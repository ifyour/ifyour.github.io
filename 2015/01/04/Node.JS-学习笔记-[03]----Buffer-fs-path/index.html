<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="theme-color" content="#ffffff"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content="Ifyour's Blog"><meta name="msapplication-TileImage" content="/img/webAppIcon-256x256.png"><meta name="msapplication-TileColor" content="#000"><meta property="algolia:search" data-application-id="3XQ5CPDDMK" data-api-key="abe9e26eebcac723f34ade5cf6b97441" data-index-name="prod_blog"><title>Node.JS å­¦ä¹ ç¬”è®° [03] -- Buffer fs path Â· Ifyour's Blog</title><meta name="description" content="Node.JS å­¦ä¹ ç¬”è®° [03] -- Buffer fs path - Ifyour"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="manifest" href="/manifest.json"><link rel="icon" type="image/x-icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="apple-touch-icon" size="256x256" href="/img/webAppIcon-256x256.png"><link rel="apple-touch-icon" size="512x512" href="/img/webAppIcon-512x512.png"><link rel="apple-touch-startup-image" href="/img/apple-launch-750x1334.png"><link rel="preload" href="/css/apollo.css" as="style"><link rel="preload" href="/js/main.js" as="script"><link rel="search" type="application/opensearchdescription+xml" href="http://ifyour.github.io/atom.xml" title="Ifyour's Blog"></head><body><div class="search"><a href="javascript:;" target="_self" class="close"><svg id="icon-close" viewbox="0 0 16 16" width="24" height="24" fill="#A4A9AC"><path d="M8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 Z M10.44352,10.7233105 L10.4528296,10.7326201 L10.7326201,10.4528296 C11.0310632,10.1543865 11.0314986,9.66985171 10.7335912,9.37194437 L9.36507937,8.0034325 L10.7360526,6.63245928 C11.0344957,6.33401613 11.0349311,5.84948135 10.7370237,5.55157401 L10.448426,5.26297627 C10.1505186,4.96506892 9.66598387,4.96550426 9.36754072,5.26394741 L8.00589385,6.62559428 L6.63738198,5.25708241 C6.33947464,4.95917507 5.85493986,4.95961041 5.55649671,5.25805356 L5.26737991,5.54717036 C4.96893676,5.84561351 4.96850142,6.33014829 5.26640876,6.62805563 L6.62561103,7.9872579 L5.25463781,9.35823112 C4.95619466,9.65667427 4.95575932,10.141209 5.25366666,10.4391164 L5.5422644,10.7277141 C5.84017175,11.0256215 6.32470652,11.0251861 6.62314967,10.726743 L7.99412289,9.35576976 L9.36263476,10.7242816 C9.66054211,11.022189 10.1450769,11.0217536 10.44352,10.7233105 Z"/></svg></a><div class="container"><input id="search-input" autocomplete="off" type="text" placeholder="Type to search" class="search-input"><div class="search-by">Search by<a href="https://www.algolia.com/" target="_blank"> algolia</a></div><div class="search-results"><div id="search-articles" class="search-item"></div></div></div><script id="search-tmp" type="text/html">{{if list.length}}
    <h3>ARTICLES</h3>
    <ul>
        {{each list item}}
        <li>
            <div class="search-item-title">
                <a href="{{item.permalink}}">{{@item.title}}</a>
            </div>
            <div class="search-item-summary" style="-webkit-box-orient: vertical;">
                {{@item.summary}}
            </div>
        </li>
        {{/each}}
    </ul>
{{else if list}}
    <h2>
        Oops! no result,
        Try it on <a target="_blank" style="color: #2c3e50; border-bottom: 2px solid #42b983; font-size: 19px;" href="https://www.google.com/search?q=site%3Aifyour.github.io+{{keywords}}">Google: {{keywords}}</a>~ ğŸ˜±
    </h2>
{{/if}}</script></div><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/docs/" target="_self" class="nav-list-link">DOCS</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="javascript:;" target="_self" id="search" class="nav-list-link">SEARCH</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Node.JS å­¦ä¹ ç¬”è®° [03] -- Buffer fs path</h1><div class="post-info">Jan 4, 2015</div><div class="sidebar-toc"><span>Catalog</span><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#ç¼“å†²åŒº-Buffer"><span class="toc-text">ç¼“å†²åŒº (Buffer)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åˆ›å»º-Buffer-ç±»"><span class="toc-text">åˆ›å»º Buffer ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å†™å…¥ç¼“å†²åŒº"><span class="toc-text">å†™å…¥ç¼“å†²åŒº</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ç¼“å†²åŒºè¯»å–"><span class="toc-text">ç¼“å†²åŒºè¯»å–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ç¼“å†²åŒºæ‹·è´"><span class="toc-text">ç¼“å†²åŒºæ‹·è´</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ–‡ä»¶ç³»ç»Ÿ-fs"><span class="toc-text">æ–‡ä»¶ç³»ç»Ÿ (fs)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#æ–‡ä»¶è¯»å†™æ–¹å¼"><span class="toc-text">æ–‡ä»¶è¯»å†™æ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æµè¯»å†™æ–¹å¼"><span class="toc-text">æµè¯»å†™æ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ç®¡é“æµè¯»å†™"><span class="toc-text">ç®¡é“æµè¯»å†™</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#é“¾å¼æµè¯»å†™"><span class="toc-text">é“¾å¼æµè¯»å†™</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ–‡ä»¶ã€æ–‡ä»¶å¤¹åˆ é™¤"><span class="toc-text">æ–‡ä»¶ã€æ–‡ä»¶å¤¹åˆ é™¤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è·¯å¾„-path"><span class="toc-text">è·¯å¾„ (path)</span></a></li></ol></div><div class="post-content"><p>ä»Šå¤©å­¦ä¹ äº† Node.js çš„ç¼“å†²åŒºï¼ˆBufferï¼‰ã€æ–‡ä»¶ç³»ç»Ÿï¼ˆfsï¼‰ã€è·¯å¾„ï¼ˆpathï¼‰æ¨¡å—ï¼Œæ„Ÿå—äº†ä¸€ä¸‹ Node.js ä½œä¸º JavaScript çš„æ‰©å±•åœ¨åå°æ–¹é¢çš„ä¸€äº›åŠŸèƒ½ã€‚ç»™æˆ‘æœ€å¤šçš„æ„Ÿå—æ˜¯ï¼Œå¤§é‡çš„å¼‚æ­¥ä»£ç å’Œå›è°ƒå‡½æ•°ï¼Œè®© Node.js æ€§èƒ½éå¸¸å‡ºè‰²ã€‚æ¥æ€»ç»“ä¸‹ä»Šå¤©å­¦ä¹ çš„å†…å®¹å§ã€‚<br><a id="more"></a></p>
<h3 id="ç¼“å†²åŒº-Buffer"><a href="#ç¼“å†²åŒº-Buffer" class="headerlink" title="ç¼“å†²åŒº (Buffer)"></a>ç¼“å†²åŒº (Buffer)</h3><p>JavaScript è¯­è¨€è‡ªèº«åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ã€‚ä½†åœ¨å¤„ç†åƒ TCP æµæˆ–æ–‡ä»¶æµæ—¶ï¼Œå¿…é¡»ä½¿ç”¨åˆ°äºŒè¿›åˆ¶æ•°æ®ã€‚å› æ­¤åœ¨ Node.js ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ª Buffer ç±»ï¼Œè¯¥ç±»ç”¨æ¥åˆ›å»ºä¸€ä¸ªä¸“é—¨å­˜æ”¾äºŒè¿›åˆ¶æ•°æ®çš„ç¼“å­˜åŒºã€‚æŒ‰ç…§æˆ‘çš„ç†è§£ï¼ŒBuffer ç±»å¾ˆåƒæˆ‘ä»¬çš„æ•´æ•°æ•°ç»„ã€‚æœ‰å¯¹åº”çš„ç´¢å¼•ï¼Œå­˜å‚¨æ–¹å¼ä¹Ÿå’Œæ•°ç»„ç±»ä¼¼ã€‚æ¥çœ‹çœ‹ Buffer ç±»æ˜¯å¦‚ä½•åˆ›å»ºçš„ã€‚</p>
<h4 id="åˆ›å»º-Buffer-ç±»"><a href="#åˆ›å»º-Buffer-ç±»" class="headerlink" title="åˆ›å»º Buffer ç±»"></a>åˆ›å»º Buffer ç±»</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ³•1</span></span><br><span class="line"><span class="comment">// åˆ›å»ºé•¿åº¦ä¸º10å­—èŠ‚çš„ Buffer ç±»</span></span><br><span class="line"><span class="keyword">var</span> buf = <span class="keyword">new</span> Buffer(<span class="number">10</span>); <span class="comment">// æ„é€ å‡½æ•°ï¼Œæ³¨æ„è¿™ç§åˆ›å»ºå½¢å¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•2</span></span><br><span class="line"><span class="comment">// ç›´æ¥é€šè¿‡æ•°ç»„èµ‹å€¼çš„å½¢å¼åˆ›å»º</span></span><br><span class="line"><span class="keyword">var</span> buf2 = <span class="keyword">new</span> Buffer([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•3</span></span><br><span class="line"><span class="comment">// é€šè¿‡å­—ç¬¦ä¸²æ¥åˆ›å»º</span></span><br><span class="line"><span class="keyword">var</span> buf3 = <span class="keyword">new</span> Buffer(<span class="string">'ifyour'</span>,<span class="string">'utf-8'</span>);<span class="comment">// utf-8 é»˜è®¤ç¼–ç ï¼Œå¯ä»¥çœç•¥</span></span><br></pre></td></tr></table></figure>
<p>ä»ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹å‡ºè¿™ä¸ª Buffer ç±»æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œé€šè¿‡å®ä¾‹åŒ–ä¸€ä¸ª Buffer å¯¹è±¡ï¼Œè®©å®ƒå…·æœ‰ä¸€äº› Buffer ç±»çš„æ–¹æ³•ï¼Œæ€»å¾—æ¥è¯´å¸¸ç”¨çš„æ–¹æ³•æœ‰ä¸‹é¢ä¸‰ç§ã€‚</p>
<h4 id="å†™å…¥ç¼“å†²åŒº"><a href="#å†™å…¥ç¼“å†²åŒº" class="headerlink" title="å†™å…¥ç¼“å†²åŒº"></a>å†™å…¥ç¼“å†²åŒº</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯­æ³•ï¼š  buf.write(string[, offset[, length]][, encoding])</span></span><br><span class="line"><span class="comment">// å®ä¾‹ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b4 = <span class="keyword">new</span> Buffer(<span class="number">14</span>);</span><br><span class="line">len = b4.write(<span class="string">'this is buffer'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Buffer å†™å…¥äº† '</span> + len + <span class="string">' å­—èŠ‚ï¼Œå†…å®¹ä¸ºï¼š'</span> + b4.toString());</span><br><span class="line"><span class="comment">// Buffer å†™å…¥äº† 14å­—èŠ‚ï¼Œå†…å®¹ä¸ºï¼šthis is buffer</span></span><br></pre></td></tr></table></figure>
<h4 id="ç¼“å†²åŒºè¯»å–"><a href="#ç¼“å†²åŒºè¯»å–" class="headerlink" title="ç¼“å†²åŒºè¯»å–"></a>ç¼“å†²åŒºè¯»å–</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯­æ³•ï¼š buf.toString([encoding[, start[, end]]])</span></span><br><span class="line"><span class="comment">// å®ä¾‹ï¼š</span></span><br><span class="line">buf = <span class="keyword">new</span> Buffer(<span class="number">26</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span> ; i &lt; <span class="number">26</span> ; i++) &#123;</span><br><span class="line">  buf[i] = i + <span class="number">97</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( buf.toString(<span class="string">'ascii'</span>));       <span class="comment">// è¾“å‡º: abcdefghijklmnopqrstuvwxyz</span></span><br><span class="line"><span class="built_in">console</span>.log( buf.toString(<span class="string">'ascii'</span>,<span class="number">0</span>,<span class="number">5</span>));   <span class="comment">// è¾“å‡º: abcde</span></span><br><span class="line"><span class="built_in">console</span>.log( buf.toString(<span class="string">'utf8'</span>,<span class="number">0</span>,<span class="number">5</span>));    <span class="comment">// è¾“å‡º: abcde</span></span><br><span class="line"><span class="built_in">console</span>.log( buf.toString(<span class="literal">undefined</span>,<span class="number">0</span>,<span class="number">5</span>)); <span class="comment">// ä½¿ç”¨ 'utf8' ç¼–ç , å¹¶è¾“å‡º: abcde</span></span><br></pre></td></tr></table></figure>
<h4 id="ç¼“å†²åŒºæ‹·è´"><a href="#ç¼“å†²åŒºæ‹·è´" class="headerlink" title="ç¼“å†²åŒºæ‹·è´"></a>ç¼“å†²åŒºæ‹·è´</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¯­æ³•ï¼š buf.copy(targetBuffer[, targetStart[, sourceStart[, sourceEnd]]])</span></span><br><span class="line"><span class="comment">//å®ä¾‹ï¼š</span></span><br><span class="line"><span class="keyword">var</span> b5 = <span class="keyword">new</span> Buffer([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]);</span><br><span class="line"><span class="keyword">var</span> b6 = <span class="keyword">new</span>  Buffer(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">b5.copy(b6,<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>);<span class="comment">// æŠŠ b5 ä¸­çš„ç´¢å¼• 0-2 ï¼ˆä¸åŒ…æ‹¬2ï¼‰ çš„å€¼å¤åˆ¶ç»™ b6 çš„ç¬¬ 1 ä½ç½®</span></span><br><span class="line"><span class="built_in">console</span>.log(b6);</span><br></pre></td></tr></table></figure>
<h3 id="æ–‡ä»¶ç³»ç»Ÿ-fs"><a href="#æ–‡ä»¶ç³»ç»Ÿ-fs" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿ (fs)"></a>æ–‡ä»¶ç³»ç»Ÿ (fs)</h3><p>Node.js æ–‡ä»¶ç³»ç»Ÿï¼ˆfs æ¨¡å—ï¼‰æ¨¡å—ä¸­çš„æ–¹æ³•å‡æœ‰å¼‚æ­¥å’ŒåŒæ­¥ç‰ˆæœ¬ï¼Œä¾‹å¦‚è¯»å–æ–‡ä»¶å†…å®¹çš„å‡½æ•°æœ‰å¼‚æ­¥çš„ <code>fs.readFile()</code> å’ŒåŒæ­¥çš„ <code>fs.readFileSync()</code>ã€‚å¼‚æ­¥çš„æ–¹æ³•å‡½æ•°æœ€åä¸€ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°åŒ…å«äº†é”™è¯¯ä¿¡æ¯ (error)ã€‚ç›¸æ¯”åŒæ­¥ï¼Œå¼‚æ­¥æ•ˆç‡æ›´é«˜ï¼Œæ€§èƒ½æ›´å¥½ï¼Œæ²¡æœ‰é˜»å¡ï¼Œä½†æ˜¯åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œä¸€å®šè¦å¤„ç†å¥½å…ˆåé¡ºåºã€‚</p>
<h4 id="æ–‡ä»¶è¯»å†™æ–¹å¼"><a href="#æ–‡ä»¶è¯»å†™æ–¹å¼" class="headerlink" title="æ–‡ä»¶è¯»å†™æ–¹å¼"></a>æ–‡ä»¶è¯»å†™æ–¹å¼</h4><p>æ–‡ä»¶è¯»å–æ–¹å¼ï¼Œä¸¾ä¸ªç®€å•ä¾‹å­ï¼Œå¥½æ¯”å…ˆæŠŠæ•´ä¸ªæ•°æ®æºå®Œæ•´æ‹¿å‡ºæ¥æ”¾åˆ°å†…å­˜ä¸­ï¼Œå†ä½¿ç”¨ <code>writeFile</code> æ–¹æ³•æˆ– <code>writeFileSync</code> æ–¹æ³•å†™å…¥æ–‡ä»¶å†…å®¹ã€‚æ˜¾ç„¶ï¼Œå¦‚æœæ•°æ®æºéå¸¸å¤§ï¼ˆ10GBï¼‰ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œæ•ˆç‡å°±å¾ˆä½äº†ã€‚è¯´ä¸å®šå°±æ­»æœºäº†ã€‚:) è¿™æ—¶å€™ï¼Œå°±éœ€è¦ä¸‹ä¸€èŠ‚è®²åˆ°çš„ <strong><em>æµè¯»å–</em></strong>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// data.txt</span><br><span class="line">Hello,Node.js!</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼‚æ­¥è¯»å–</span></span><br><span class="line">fs.readFile(<span class="string">'data.txt'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">console</span>.error(err);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">"å¼‚æ­¥è¯»å–: "</span> + data.toString());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒæ­¥è¯»å–</span></span><br><span class="line"><span class="keyword">var</span> data = fs.readFileSync(<span class="string">'data.txt'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"åŒæ­¥è¯»å–: "</span> + data.toString());</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚"</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">åŒæ­¥è¯»å–: Hello,Node.js!</span><br><span class="line">ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚</span><br><span class="line"></span><br><span class="line">å¼‚æ­¥è¯»å–: Hello,Node.js!</span><br></pre></td></tr></table></figure>
<div class="tip"><br>Node.js ä¸­ï¼Œå…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œåæ‰§è¡Œå¼‚æ­¥ä»£ç ï¼Œå¼‚æ­¥ä»£ç ä¼šå°†å›è°ƒå‡½æ•°æ”¾å…¥è°ƒç”¨ <strong><em>é˜Ÿåˆ—</em></strong>ï¼Œä»¥ <strong><em>å…ˆè¿›å…ˆå‡º</em></strong> çš„å½¢å¼ä¾æ¬¡è°ƒç”¨ã€‚<br></div>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="comment">// å¼‚æ­¥å†™å…¥</span></span><br><span class="line">fs.writeFile(<span class="string">'./data/d2.txt'</span>,<span class="string">'æˆ‘æ˜¯ä¸€æ¡æ•°æ®'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!err)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'æ–‡ä»¶å†™å…¥æˆåŠŸ'</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'å†™å…¥å¤±è´¥'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒæ­¥å†™å…¥</span></span><br><span class="line">fs.writeFileSync(<span class="string">'./data/d3'</span>,<span class="string">'æˆ‘æ˜¯ä¸€æ¡æ•°æ®'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> data = fs.readFileSync(<span class="string">'./data/d3'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(data.toString());<span class="comment">// æˆ‘æ˜¯ä¸€æ¡æ•°æ®</span></span><br></pre></td></tr></table></figure>
<h4 id="æµè¯»å†™æ–¹å¼"><a href="#æµè¯»å†™æ–¹å¼" class="headerlink" title="æµè¯»å†™æ–¹å¼"></a>æµè¯»å†™æ–¹å¼</h4><p>åº”ç”¨ç¨‹åºä¸­ï¼Œæµæ˜¯ä¸€ç»„æœ‰åºçš„ã€æœ‰èµ·ç‚¹å’Œç»ˆç‚¹çš„ <strong><em>å­—èŠ‚æ•°æ®çš„ä¼ è¾“æ–¹å¼</em></strong>ã€‚åœ¨åº”ç”¨ç¨‹åºä¸­å„ç§å¯¹è±¡ä¹‹é—´äº¤æ¢ä¸ä¼ è¾“æ•°æ®çš„æ—¶å€™ï¼Œæ€»æ˜¯å…ˆå°†è¯¥å¯¹è±¡ä¸­æ‰€åŒ…å«çš„æ•°æ®è½¬æ¢ä¸ºå„ç§å½¢å¼çš„æµæ•°æ®ï¼ˆå³å­—èŠ‚æ•°æ®ï¼‰ï¼Œå†é€šè¿‡æµçš„ä¼ è¾“ï¼Œåˆ°è¾¾ç›®çš„å¯¹è±¡åå†å°†æµæ•°æ®è½¬æ¢ä¸ºè¯¥å¯¹è±¡ä¸­å¯ä»¥ä½¿ç”¨çš„æ•°æ®ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">var</span> data = <span class="string">''</span>;</span><br><span class="line"><span class="comment">// æµè¯»å–</span></span><br><span class="line"><span class="keyword">var</span> stream = fs.createReadStream(<span class="string">'./data/d1.txt'</span>,<span class="string">'utf-8'</span>);</span><br><span class="line">stream.on(<span class="string">'data'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">    data += result;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// data end äº‹ä»¶è¡¨ç¤ºè¿è´¯çš„è¡Œä¸ºï¼Œå­—èŠ‚æµéœ€è¦èµ·ç‚¹å’Œç»ˆç‚¹ã€‚</span></span><br><span class="line">stream.on(<span class="string">'end'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">stream.on(<span class="string">'error'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err.stack);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµå†™å…¥</span></span><br><span class="line"><span class="keyword">var</span> stream = fs.createWriteStream(<span class="string">'./data/123.txt'</span>,<span class="string">'utf-8'</span>);</span><br><span class="line">stream.write(<span class="string">'hello'</span>,<span class="string">'utf-8'</span>);</span><br><span class="line"></span><br><span class="line">stream.end();</span><br><span class="line"></span><br><span class="line">stream.on(<span class="string">'finish'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="comment">// finish äº‹ä»¶è§¦å‘ï¼Œå¿…é¡»ç­‰ end äº‹ä»¶ç»“æŸæ‰å¯ä»¥</span></span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'å†™å…¥å®Œæˆï¼'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">stream.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err.stack);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<div class="tip"><br>æµè¯»å–ä¼šä¾æ¬¡è§¦å‘äº‹ä»¶ï¼š data -&gt; end -&gt; error ,æ¯ä¸ªäº‹ä»¶å‘ç”Ÿä¼šæœ‰å¯¹åº”çš„å›è°ƒå‡½æ•°å¤„ç†ã€‚<br>æµå†™å…¥ä¼šä¾æ¬¡è§¦å‘äº‹ä»¶ï¼š end -&gt; finish -&gt; error ,æ¯ä¸ªäº‹ä»¶å‘ç”Ÿä¼šæœ‰å¯¹åº”çš„å›è°ƒå‡½æ•°å¤„ç†ã€‚<br></div>

<h4 id="ç®¡é“æµè¯»å†™"><a href="#ç®¡é“æµè¯»å†™" class="headerlink" title="ç®¡é“æµè¯»å†™"></a>ç®¡é“æµè¯»å†™</h4><p>ç®¡é“(pipe) æä¾›äº†ä¸€ä¸ªè¾“å‡ºæµåˆ°è¾“å…¥æµçš„æœºåˆ¶ã€‚é€šå¸¸æˆ‘ä»¬ç”¨äºä»ä¸€ä¸ªæµä¸­è·å–æ•°æ®å¹¶å°†æ•°æ®ä¼ é€’åˆ°å¦å¤–ä¸€ä¸ªæµä¸­ã€‚é€šè¿‡ç®¡é“ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°å¤§æ–‡ä»¶æµå…¥å¦å¤–ä¸€ä¸ªæ–‡ä»¶çš„å¤åˆ¶è¿‡ç¨‹ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> readStream = fs.createReadStream(<span class="string">'./data/d1.txt'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> writeStrem = fs.createWriteStream(<span class="string">'./data/d3.txt'</span>);</span><br><span class="line"></span><br><span class="line">readStream.pipe(writeStrem);<span class="comment">// å®ç°äº† d1.txt åˆ° d3.txt çš„ä¼ è¾“è¿‡ç¨‹</span></span><br></pre></td></tr></table></figure></p>
<h4 id="é“¾å¼æµè¯»å†™"><a href="#é“¾å¼æµè¯»å†™" class="headerlink" title="é“¾å¼æµè¯»å†™"></a>é“¾å¼æµè¯»å†™</h4><p>é“¾å¼æ˜¯é€šè¿‡è¿æ¥è¾“å‡ºæµåˆ°å¦å¤–ä¸€ä¸ªæµå¹¶åˆ›å»ºå¤šä¸ªå¯¹ä¸ªæµæ“ä½œé“¾çš„æœºåˆ¶ã€‚é“¾å¼æµä¸€èˆ¬ç”¨äºç®¡é“æ“ä½œã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ˜¯ç”¨ç®¡é“å’Œé“¾å¼æ¥å‹ç¼©å’Œè§£å‹æ–‡ä»¶ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// compress.js</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">var</span> zlib = <span class="built_in">require</span>(<span class="string">'zlib'</span>); <span class="comment">// å¼•å…¥å‹ç¼©æ¨¡å—</span></span><br><span class="line"></span><br><span class="line">fs.createReadStream(<span class="string">'./data/123.txt'</span>)</span><br><span class="line">    .pipe(zlib.createGzip())</span><br><span class="line">    .pipe(fs.createWriteStream(<span class="string">'./data/123.txt.gz'</span>));<span class="comment">// é“¾å¼æ“ä½œ</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'æ–‡ä»¶å‹ç¼©å®Œæˆ'</span>);</span><br></pre></td></tr></table></figure></p>
<h4 id="æ–‡ä»¶ã€æ–‡ä»¶å¤¹åˆ é™¤"><a href="#æ–‡ä»¶ã€æ–‡ä»¶å¤¹åˆ é™¤" class="headerlink" title="æ–‡ä»¶ã€æ–‡ä»¶å¤¹åˆ é™¤"></a>æ–‡ä»¶ã€æ–‡ä»¶å¤¹åˆ é™¤</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="comment">// æ–‡ä»¶ç›®å½•è¯»å–ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ–‡ä»¶åŠæ–‡ä»¶å¤¹</span></span><br><span class="line">fs.readdir(<span class="string">"./testdir"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,files</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!err)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(files);<span class="comment">// [ 'index.html', 'main.css', 'subdir' ]</span></span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–‡ä»¶åˆ é™¤</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"å‡†å¤‡åˆ é™¤æ–‡ä»¶ï¼"</span>);</span><br><span class="line">fs.unlink(<span class="string">'./data/123.txt.gz'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">return</span> err;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æ–‡ä»¶åˆ é™¤æˆåŠŸï¼"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç©ºæ–‡ä»¶å¤¹åˆ é™¤</span></span><br><span class="line">fs.rmdir(<span class="string">'./data'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!err)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'åˆ é™¤æˆåŠŸï¼'</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªé€’å½’åˆ é™¤çš„å°ç»ƒä¹ ï¼ŒæŠŠå‰é¢çš„ç»¼åˆè¿ç”¨ä¸€ä¸‹ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">delDir(<span class="string">'./testdir'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶å¤¹è·¯å¾„ï¼Œåˆ é™¤æ‰è¯¥æ–‡ä»¶å¤¹æ‰€æœ‰å†…å®¹</span></span><br><span class="line"><span class="comment">// @param pathStr string ä¼ å…¥ä¸€ä¸ªè·¯å¾„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delDir</span>(<span class="params">pathStr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line">    <span class="keyword">if</span> (fs.existsSync(pathStr))&#123;</span><br><span class="line">        <span class="keyword">var</span> files = fs.readdirSync(pathStr);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; files.length; i++) &#123;</span><br><span class="line">            <span class="keyword">var</span> curPath = pathStr + <span class="string">'/'</span> + files[i];</span><br><span class="line">            <span class="keyword">var</span> stats = fs.statSync(curPath);</span><br><span class="line">            <span class="keyword">if</span> (stats.isFile())&#123;</span><br><span class="line">                fs.unlink(curPath);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(stats.isDirectory())&#123;</span><br><span class="line">                delDir(curPath);<span class="comment">// é€’å½’è°ƒç”¨ï¼Œæœ€ç»ˆåˆ é™¤æ‰æ‰€æœ‰æ–‡ä»¶ï¼Œåªå‰©ç©ºç›®å½•</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        fs.rmdirSync(pathStr);<span class="comment">// æ”¶å°¾ï¼Œåˆ æ‰ç©ºç›®å½•</span></span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'æ–‡ä»¶å¤¹ä¸å­˜åœ¨'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<div class="tip"><br>æ–‡ä»¶ã€æ–‡ä»¶å¤¹çš„æ“ä½œï¼Œéƒ½æœ‰åŒæ­¥å’Œå¼‚æ­¥çš„ä»£ç ï¼Œæ¯”å¦‚ <code>fs.unlink()</code> å’Œ <code>fs.unlinkSync()</code>,é»˜è®¤éƒ½æ˜¯å¼‚æ­¥ä»£ç ï¼Œå¼‚æ­¥ä»£ç ä¼šè°ƒç”¨å›è°ƒå‡½æ•°è¿›è¡Œæ“ä½œï¼ŒåŒæ­¥ä»£ç ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿›è¡Œåç»­çš„æ“ä½œï¼Œå¯ä»¥è®¤çœŸè§‚å¯Ÿä¸Šé¢ä»£ç çš„åŒºåˆ«ã€‚ä½¿ç”¨å¼‚æ­¥ä»£ç çš„æ—¶å€™ï¼Œä¸€å®šæ³¨æ„æ‰§è¡Œé¡ºåºã€‚<br></div>


<h3 id="è·¯å¾„-path"><a href="#è·¯å¾„-path" class="headerlink" title="è·¯å¾„ (path)"></a>è·¯å¾„ (path)</h3><p>path æ¨¡å—åŒ…å«ä¸€å¥—ç”¨äº <strong><em>å¤„ç†å’Œè½¬æ¢æ–‡ä»¶è·¯å¾„</em></strong> çš„å·¥å…·é›†ï¼Œç”¨äºå¤„ç†ç›®å½•çš„å¯¹è±¡ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚ç”¨ Node.js çš„ path å‘½ä»¤ï¼Œä¸ä½¿ç”¨ Linux ä¸‹çš„ shell è„šæœ¬å‘½ä»¤ç›¸ä¼¼ã€‚å‡ ä¹æ‰€æœ‰çš„æ–¹æ³•ä»…å¯¹å­—ç¬¦ä¸²è¿›è¡Œè½¬æ¢ï¼Œæ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸ä¼šæ£€æŸ¥è·¯å¾„æ˜¯å¦çœŸå®æœ‰æ•ˆã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥pathå¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* æ ¼å¼åŒ–è·¯å¾„  path.normalize(p)</span></span><br><span class="line"><span class="comment">* ç‰¹ç‚¹ï¼šå°†ä¸ç¬¦åˆè§„èŒƒçš„è·¯å¾„æ ¼å¼åŒ–ï¼Œç®€åŒ–å¼€å‘äººå‘˜ä¸­å¤„ç†å„ç§å¤æ‚çš„è·¯å¾„åˆ¤æ–­</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line">path.normalize(<span class="string">'/foo/bar//baz/asdf/quux/..'</span>);</span><br><span class="line"><span class="comment">// returns</span></span><br><span class="line"><span class="string">'/foo/bar/baz/asdf'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* è·¯å¾„è”åˆ path.join([path1], [path2], [...])</span></span><br><span class="line"><span class="comment">* ç‰¹ç‚¹ï¼šå°†æ‰€æœ‰åç§°ç”¨path.seqä¸²è”èµ·æ¥ï¼Œç„¶åç”¨normailzeæ ¼å¼åŒ–</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line">path.join(<span class="string">'///foo'</span>, <span class="string">'bar'</span>, <span class="string">'//baz/asdf'</span>, <span class="string">'quux'</span>, <span class="string">'..'</span>);</span><br><span class="line"><span class="comment">// returns</span></span><br><span class="line"><span class="string">'/foo/bar/baz/asdf'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* è·¯å¾„å¯»èˆª path.resolve([from ...], to)</span></span><br><span class="line"><span class="comment">* ç‰¹ç‚¹ï¼šç›¸å½“äºä¸æ–­çš„è°ƒç”¨ç³»ç»Ÿçš„cdå‘½ä»¤</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line">path.resolve(<span class="string">'foo/bar'</span>, <span class="string">'/tmp/file/'</span>, <span class="string">'..'</span>, <span class="string">'a/../subfile'</span>);</span><br><span class="line"><span class="comment">// ç›¸å½“äºç»ˆç«¯å‘½ä»¤ï¼š</span></span><br><span class="line"><span class="comment">// cd foo/bar</span></span><br><span class="line"><span class="comment">// cd /tmp/file/</span></span><br><span class="line"><span class="comment">// cd ..</span></span><br><span class="line"><span class="comment">// cd a/../subfile</span></span><br><span class="line"><span class="comment">// pwd</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* ç›¸å¯¹è·¯å¾„ path.relative(from, to)</span></span><br><span class="line"><span class="comment">* ç‰¹ç‚¹ï¼šè¿”å›æŸä¸ªè·¯å¾„ä¸‹ç›¸å¯¹äºå¦ä¸€ä¸ªè·¯å¾„çš„ç›¸å¯¹ä½ç½®ä¸²ï¼Œ</span></span><br><span class="line"><span class="comment">* ç›¸å½“äºï¼špath.resolve(from, path.relative(from, to)) == path.resolve(to)</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="comment">//ç®€å•ç†è§£ï¼š åœ°å€ä¸€æ‰§è¡Œæ€æ ·çš„ shell å‘½ä»¤ï¼Œåˆ°è¾¾åœ°å€äºŒ</span></span><br><span class="line">path.relative(<span class="string">'/data/orandea/test/aaa'</span>, <span class="string">'/data/orandea/impl/bbb'</span>)</span><br><span class="line"><span class="comment">// returns</span></span><br><span class="line"><span class="string">'../../impl/bbb'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* æ–‡ä»¶å¤¹åç§° path.dirname(p)</span></span><br><span class="line"><span class="comment">* ç‰¹ç‚¹ï¼šè¿”å›è·¯å¾„çš„ä¸Šçº§è·¯å¾„</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line">path.dirname(<span class="string">'/foo/bar/baz/asdf/quux'</span>)</span><br><span class="line"><span class="comment">// returns</span></span><br><span class="line"><span class="string">'/foo/bar/baz/asdf'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* æ–‡ä»¶åç§° path.basename(p, [ext])</span></span><br><span class="line"><span class="comment">* ç‰¹ç‚¹ï¼šè¿”å›æŒ‡å®šçš„æ–‡ä»¶åï¼Œè¿”å›ç»“æœå¯å»æ‰[ext]åç¼€å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line">path.basename(<span class="string">'/foo/bar/baz/asdf/quux.html'</span>)</span><br><span class="line"><span class="comment">// returns</span></span><br><span class="line"><span class="string">'quux.html'</span></span><br><span class="line"></span><br><span class="line">path.basename(<span class="string">'/foo/bar/baz/asdf/quux.html'</span>, <span class="string">'.html'</span>)</span><br><span class="line"><span class="comment">// returns</span></span><br><span class="line"><span class="string">'quux'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* æ‰©å±•åç§° path.extname(p)</span></span><br><span class="line"><span class="comment">* ç‰¹ç‚¹ï¼šè¿”å›æŒ‡å®šæ–‡ä»¶åçš„æ‰©å±•åç§°</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line">path.extname(<span class="string">'index.html'</span>)</span><br><span class="line"><span class="comment">// returns</span></span><br><span class="line"><span class="string">'.html'</span></span><br><span class="line"></span><br><span class="line">path.extname(<span class="string">'index.'</span>)</span><br><span class="line"><span class="comment">// returns</span></span><br><span class="line"><span class="string">'.'</span></span><br><span class="line"></span><br><span class="line">path.extname(<span class="string">'index'</span>)</span><br><span class="line"><span class="comment">// returns</span></span><br><span class="line"><span class="string">''</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* è·¯å¾„åˆ†éš”ç¬¦ path.sep</span></span><br><span class="line"><span class="comment">* ç‰¹ç‚¹ï¼šè·å–æ–‡ä»¶è·¯å¾„çš„åˆ†éš”ç¬¦ï¼Œä¸»è¦æ˜¯ä¸æ“ä½œç³»ç»Ÿç›¸å…³</span></span><br><span class="line"><span class="comment">* æ³¨æ„è°ƒç”¨æ–¹å¼</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="string">'foo/bar/baz'</span>.split(path.sep)</span><br><span class="line"><span class="comment">// returns</span></span><br><span class="line">[<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>]</span><br></pre></td></tr></table></figure></p>
</div></article></div></main><footer><div class="paginator"><a href="/2015/01/05/Node.JS-å­¦ä¹ ç¬”è®°-[04]----HTTP/" class="prev">PREV</a><a href="/2015/01/03/Node.JS-å­¦ä¹ ç¬”è®°-[02]----åŒæ­¥å¼‚æ­¥/" class="next">NEXT</a></div><div class="copyright"><p>Â© 2015 - 2019 Made with <span>â¤</span> by <a href="https://github.com/ifyour/ifyour.github.io">Ifyour</a></p><p>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div><script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.4.0/lib/darkmode-js.min.js"></script><script>new Darkmode({
    bottom: '1rem',
    right: '1rem',
    left: 'unset',
    time: '0.5s',
    mixColor: '#fff',
    backgroundColor: '#fff',
    buttonColorDark: '#100f2c',
    buttonColorLight: '#fff',
    saveInCookies: true,
    label: 'ğŸŒ“',
    autoMatchOsTheme: true
}).showWidget();
</script><script src="/js/algoliasearch.min.js"></script><script src="/js/template-web.min.js"></script><script src="/js/main.js"></script><script src="https://unpkg.com/medium-zoom@0/dist/medium-zoom.min.js"></script><script>mediumZoom('article img', {margin: 24});
(function(win, targetElem) {
    if (!targetElem) return;
    win.onscroll = (function() {
        if (isElementInViewport(targetElem)) {
            win.onscroll = null;
            return mediumZoom('.gitment-comment-main img', {margin: 24});
        }
        return arguments.callee;
    })();
    function isElementInViewport(el) {
        var rect = el.getBoundingClientRect();
        var winH = win.innerHeight || document.documentElement.clientHeight;
        return rect.top <= winH && rect.bottom >= winH;
    };
})(this, document.querySelector('#gc_container'));
</script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-120929321-1",'auto');ga('send','pageview');</script></footer></div><script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>