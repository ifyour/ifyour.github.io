<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="theme-color" content="#ffffff"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content="Ifyour's Blog"><meta name="msapplication-TileImage" content="/img/webAppIcon-256x256.png"><meta name="msapplication-TileColor" content="#000"><meta property="algolia:search" data-application-id="3XQ5CPDDMK" data-api-key="abe9e26eebcac723f34ade5cf6b97441" data-index-name="prod_blog"><title>Node.JS å­¦ä¹ ç¬”è®° [05] -- Express Â· Ifyour's Blog</title><meta name="description" content="Node.JS å­¦ä¹ ç¬”è®° [05] -- Express - Ifyour"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="manifest" href="/manifest.json"><link rel="icon" type="image/x-icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="apple-touch-icon" size="256x256" href="/img/webAppIcon-256x256.png"><link rel="apple-touch-icon" size="512x512" href="/img/webAppIcon-512x512.png"><link rel="apple-touch-startup-image" href="/img/apple-launch-750x1334.png"><link rel="preload" href="/css/apollo.css" as="style"><link rel="preload" href="/js/main.js" as="script"><link rel="search" type="application/opensearchdescription+xml" href="http://ifyour.github.io/atom.xml" title="Ifyour's Blog"></head><body><div class="search"><a href="javascript:;" target="_self" class="close"><svg id="icon-close" viewbox="0 0 16 16" width="24" height="24" fill="#A4A9AC"><path d="M8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 Z M10.44352,10.7233105 L10.4528296,10.7326201 L10.7326201,10.4528296 C11.0310632,10.1543865 11.0314986,9.66985171 10.7335912,9.37194437 L9.36507937,8.0034325 L10.7360526,6.63245928 C11.0344957,6.33401613 11.0349311,5.84948135 10.7370237,5.55157401 L10.448426,5.26297627 C10.1505186,4.96506892 9.66598387,4.96550426 9.36754072,5.26394741 L8.00589385,6.62559428 L6.63738198,5.25708241 C6.33947464,4.95917507 5.85493986,4.95961041 5.55649671,5.25805356 L5.26737991,5.54717036 C4.96893676,5.84561351 4.96850142,6.33014829 5.26640876,6.62805563 L6.62561103,7.9872579 L5.25463781,9.35823112 C4.95619466,9.65667427 4.95575932,10.141209 5.25366666,10.4391164 L5.5422644,10.7277141 C5.84017175,11.0256215 6.32470652,11.0251861 6.62314967,10.726743 L7.99412289,9.35576976 L9.36263476,10.7242816 C9.66054211,11.022189 10.1450769,11.0217536 10.44352,10.7233105 Z"/></svg></a><div class="container"><input id="search-input" autocomplete="off" type="text" placeholder="Type to search" class="search-input"><div class="search-by">Search by<a href="https://www.algolia.com/" target="_blank"> algolia</a></div><div class="search-results"><div id="search-articles" class="search-item"></div></div></div><script id="search-tmp" type="text/html">{{if list.length}}
    <h3>ARTICLES</h3>
    <ul>
        {{each list item}}
        <li>
            <div class="search-item-title">
                <a href="{{item.permalink}}">{{@item.title}}</a>
            </div>
            <div class="search-item-summary" style="-webkit-box-orient: vertical;">
                {{@item.summary}}
            </div>
        </li>
        {{/each}}
    </ul>
{{else if list}}
    <h2>
        Oops! no result,
        Try it on <a target="_blank" style="color: #2c3e50; border-bottom: 2px solid #42b983; font-size: 19px;" href="https://www.google.com/search?q=site%3Aifyour.github.io+{{keywords}}">Google: {{keywords}}</a>~ ğŸ˜±
    </h2>
{{/if}}</script></div><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/docs/" target="_self" class="nav-list-link">DOCS</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="javascript:;" target="_self" id="search" class="nav-list-link">SEARCH</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Node.JS å­¦ä¹ ç¬”è®° [05] -- Express</h1><div class="post-info">Jan 6, 2015</div><div class="sidebar-toc"><span>Catalog</span><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Express-å®‰è£…"><span class="toc-text">Express å®‰è£…</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åœ¨é¡¹ç›®ä¸­å¼•å…¥-Express"><span class="toc-text">åœ¨é¡¹ç›®ä¸­å¼•å…¥ Express</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ä½¿ç”¨-Express-generator"><span class="toc-text">ä½¿ç”¨ Express-generator</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Express-è·¯ç”±"><span class="toc-text">Express è·¯ç”±</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åŸºç¡€ç”¨æ³•"><span class="toc-text">åŸºç¡€ç”¨æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Router-æ–¹æ³•"><span class="toc-text">Router æ–¹æ³•</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Express-å“åº”å¯¹è±¡"><span class="toc-text">Express å“åº”å¯¹è±¡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#send"><span class="toc-text">send()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#json"><span class="toc-text">json()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#render"><span class="toc-text">render()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#download"><span class="toc-text">download()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#redirect"><span class="toc-text">redirect()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Express-è¯·æ±‚å¯¹è±¡"><span class="toc-text">Express è¯·æ±‚å¯¹è±¡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#URL-ä¸­çš„å‚æ•°"><span class="toc-text">URL ä¸­çš„å‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#è¡¨å•ä¸­çš„å‚æ•°"><span class="toc-text">è¡¨å•ä¸­çš„å‚æ•°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Express-ä¸­é—´ä»¶"><span class="toc-text">Express ä¸­é—´ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åº”ç”¨çº§ä¸­é—´ä»¶"><span class="toc-text">åº”ç”¨çº§ä¸­é—´ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å†…ç½®ä¸­é—´ä»¶"><span class="toc-text">å†…ç½®ä¸­é—´ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶"><span class="toc-text">ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶</span></a></li></ol></li></ol></div><div class="post-content"><p><strong><em>Express</em></strong> æ˜¯ä¸€ä¸ªåŸºäº Node.js å¹³å°çš„æç®€ã€çµæ´»çš„ Web åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œå®ƒæä¾›ä¸€ç³»åˆ—å¼ºå¤§çš„ç‰¹æ€§ï¼Œå¸®åŠ©ä½ åˆ›å»ºå„ç§ Web å’Œç§»åŠ¨è®¾å¤‡åº”ç”¨ã€‚Express çš„æ ¸å¿ƒç‰¹æ€§å¯ä»¥æ¦‚æ‹¬ä»¥ä¸‹ä¸‰ç‚¹ã€‚<br><a id="more"></a></p>
<ul>
<li>å¯ä»¥è®¾ç½®ä¸­é—´ä»¶æ¥å“åº” HTTP è¯·æ±‚ã€‚</li>
<li>å®šä¹‰äº†è·¯ç”±è¡¨ç”¨äºæ‰§è¡Œä¸åŒçš„ HTTP è¯·æ±‚åŠ¨ä½œã€‚</li>
<li>å¯ä»¥é€šè¿‡å‘æ¨¡æ¿ä¼ é€’å‚æ•°æ¥åŠ¨æ€æ¸²æŸ“ HTML é¡µé¢ã€‚</li>
</ul>
<p>ä¸‹é¢å­¦ä¹ çš„çŸ¥è¯†ç‚¹ï¼Œéƒ½ä¼šå›´ç»•è¿™å‡ ä¸ªç‰¹æ€§å±•å¼€ã€‚</p>
<h3 id="Express-å®‰è£…"><a href="#Express-å®‰è£…" class="headerlink" title="Express å®‰è£…"></a>Express å®‰è£…</h3><h4 id="åœ¨é¡¹ç›®ä¸­å¼•å…¥-Express"><a href="#åœ¨é¡¹ç›®ä¸­å¼•å…¥-Express" class="headerlink" title="åœ¨é¡¹ç›®ä¸­å¼•å…¥ Express"></a>åœ¨é¡¹ç›®ä¸­å¼•å…¥ Express</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> projectName              <span class="comment"># è¿›å…¥æ–°å»ºçš„ Node.js é¡¹ç›®</span></span><br><span class="line">npm init                    <span class="comment"># åˆå§‹åŒ–é¡¹ç›®é…ç½®æ–‡ä»¶</span></span><br><span class="line">npm install express --save  <span class="comment"># å®‰è£… Express æ¨¡å—åˆ°é¡¹ç›®é…ç½®æ–‡ä»¶ä¸­</span></span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä¸Šé—¨çš„å‘½ä»¤ï¼Œå°±å¯ä»¥å®Œæˆ Express çš„å®‰è£…ï¼Œä¸‹é¢åœ¨ <code>app.js</code> ä¸­ä½¿ç”¨ Express å§ï¼<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    res.send(<span class="string">'Hello,Express!'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8080</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Express running at http://127.0.0.1:8080/'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h4 id="ä½¿ç”¨-Express-generator"><a href="#ä½¿ç”¨-Express-generator" class="headerlink" title="ä½¿ç”¨ Express-generator"></a>ä½¿ç”¨ Express-generator</h4><p>ä¸ºäº†æ–¹ä¾¿å¼€å‘è€…ï¼Œæ›´ä¾¿æ·çš„ä½¿ç”¨ Express ç”Ÿæˆé¡¹ç›®ï¼Œå®˜æ–¹æä¾›çš„å¿«é€Ÿçš„ç”Ÿæˆå·¥å…· <code>Express-generator</code>ï¼Œè™½ç„¶ç”Ÿæˆéå¸¸å¿«é€Ÿæ–¹ä¾¿ï¼Œä½†æ˜¯ä½œä¸ºåˆå­¦è€…ï¼Œè¿˜æ˜¯è¦å¼„æ¸…æ¥šé‡Œé¢æ¯æ¡å‘½ä»¤æ‰€ä»£è¡¨çš„å«ä¹‰ï¼Œæœ€åå†ä½¿ç”¨å®˜æ–¹æä¾›çš„å·¥å…·å¿«é€Ÿç”Ÿæˆã€‚æ‰“å¼€ç»ˆç«¯ï¼Œå› ä¸ºæˆ‘æ˜¯ MacOSï¼Œæ‰€ä»¥å®‰è£…çš„æ—¶å€™è¦åŠ ä¸Š <code>sudo</code> å¦åˆ™ä¼šæŠ¥é”™æç¤ºæƒé™ä¸å¤Ÿã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install express-generator -g  <span class="comment"># å…¨å±€å®‰è£…</span></span><br><span class="line">express mywebapp                       <span class="comment"># åˆ›å»º mywebapp é¡¹ç›®</span></span><br><span class="line"><span class="built_in">cd</span> mywebapp &amp;&amp; npm install             <span class="comment"># å®‰è£…ä¾èµ–æ–‡ä»¶</span></span><br><span class="line">npm start                              <span class="comment"># å¯åŠ¨é¡¹ç›®</span></span><br></pre></td></tr></table></figure></p>
<p>å¯åŠ¨é¡¹ç›®åï¼Œå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­é¢„è§ˆäº†ï¼Œè®¿é—®åœ°å€ï¼š<a href="http://127.0.0.1:3000/" target="_blank" rel="noopener">http://127.0.0.1:3000/</a> ã€‚</p>
<div class="tip"><br>å¯åŠ¨å‰éœ€è¦å…³é—­å…¶å®ƒå·²ç»å¯ç”¨çš„ Web æœåŠ¡ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´ç«¯å£å ç”¨å¯åŠ¨ä¸æˆåŠŸã€‚<br></div>

<h3 id="Express-è·¯ç”±"><a href="#Express-è·¯ç”±" class="headerlink" title="Express è·¯ç”±"></a>Express è·¯ç”±</h3><blockquote>
<p>è·¯ç”±æ˜¯æŒ‡å¦‚ä½•å®šä¹‰åº”ç”¨çš„ç«¯ç‚¹ï¼ˆURLsï¼‰ä»¥åŠå¦‚ä½•å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</p>
</blockquote>
<h4 id="åŸºç¡€ç”¨æ³•"><a href="#åŸºç¡€ç”¨æ³•" class="headerlink" title="åŸºç¡€ç”¨æ³•"></a>åŸºç¡€ç”¨æ³•</h4><p>ç®€å•ç†è§£ï¼Œå…¶å®å°±æ˜¯æ ¹æ®ä¸åŒçš„è¯·æ±‚ï¼Œæ¥å“åº”ä¸ä¹‹å¯¹åº”çš„é¡µé¢ã€‚æ¯”å¦‚ï¼Œå½“ç”¨æˆ·è®¿é—® <a href="http://localhost/images/" target="_blank" rel="noopener">http://localhost/images/</a> æ—¶ï¼Œæ ¹æ® URL å¯ä»¥çœ‹å‡ºï¼Œè¯·æ±‚çš„æ˜¯ <code>/images</code> è¿™ä¸ªç›®å½•ï¼Œé‚£ä¹ˆé€šè¿‡è·¯ç”±ï¼Œæ‰¾åˆ°è¿™ä¸ªé¡µé¢å¹¶è¿”å›ç»™è¯·æ±‚çš„ç”¨æˆ·ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«è·¯ç”±ã€‚æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“ç”¨æˆ·è¯·æ±‚è®¿é—® / æ—¶ï¼Œå“åº”ä¸€ä¸ª Hello,Express! å­—ç¬¦ä¸²ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªç®€å•è·¯ç”±</span></span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    res.send(<span class="string">'Hello,Express!'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ <code>app.all()</code> ,å®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è·¯ç”±æ–¹æ³•ï¼Œæ²¡æœ‰ä»»ä½• HTTP æ–¹æ³•ä¸å…¶å¯¹åº”ï¼Œå®ƒçš„ä½œç”¨æ˜¯å¯¹äºä¸€ä¸ªè·¯å¾„ä¸Šçš„æ‰€æœ‰è¯·æ±‚åŠ è½½ä¸­é—´ä»¶ã€‚ all ç›¸å½“äºæ—¢å¯ä»¥å¤„ç† <code>GET</code>ï¼Œä¹Ÿå¯ä»¥å¤„ç† <code>POST</code> ã€‚</p>
<h4 id="Router-æ–¹æ³•"><a href="#Router-æ–¹æ³•" class="headerlink" title="Router æ–¹æ³•"></a>Router æ–¹æ³•</h4><p>é€šè¿‡ <code>express.Router</code> ç±»å¯ä»¥åˆ›å»ºç‹¬ç«‹æ¨¡å—çš„è·¯ç”±æ¨¡å—ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯ä»¥æŒ‚è½½çš„è·¯ç”±å¯¹è±¡ï¼ŒæŠŠè·¯ç”±æ¨¡å—åˆ†ç¦»å‡ºé¡¹ç›®ï¼Œè®©æ•´ä¸ªé¡¹ç›®ç»“æ„æ¸…æ™°ã€æ–¹ä¾¿ç®¡ç†ï¼Œè¿™é‡Œå…‰è¯´è¿˜æ˜¯æŒºæŠ½è±¡ï¼Œä¸¾ä¸ªä¾‹å­ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç›®å½•ç»“æ„</span></span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ index.js</span><br><span class="line">â”œâ”€â”€ node_modules</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ body-parser</span><br><span class="line">â”‚Â Â  â””â”€â”€ express</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ router</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ admin.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ home.js</span><br><span class="line">â””â”€â”€ views</span><br><span class="line">    â”œâ”€â”€ admin</span><br><span class="line">    â””â”€â”€ home</span><br></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> bodyparser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</span><br><span class="line"><span class="comment">// å¼•å…¥å¤–éƒ¨è·¯ç”±æ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> home = <span class="built_in">require</span>(<span class="string">'./router/home'</span>);</span><br><span class="line"><span class="keyword">var</span> admin = <span class="built_in">require</span>(<span class="string">'./router/admin'</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ä¸­é—´ä»¶ bodyparser ï¼Œåé¢å¯ä»¥åœ¨ req.body ä¸­åˆ†æå‡º POST è¯·æ±‚ä½“çš„å†…å®¹</span></span><br><span class="line">app.use(bodyparser.urlencoded(&#123;<span class="attr">extended</span>:<span class="literal">false</span>&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨å¤–éƒ¨è·¯ç”±æ¨¡å—</span></span><br><span class="line">app.use(<span class="string">'/'</span>,home);</span><br><span class="line">app.use(<span class="string">'/admin'</span>,admin);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8080</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'visit http://127.0.0.1:8080/'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// admin.js</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.Router();<span class="comment">// ç”¨ Router æ„é€ å‡½æ•°å®ä¾‹åŒ– router å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/login.html'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    res.sendFile(path.resolve(__dirname + <span class="string">'/../views/admin/'</span> + <span class="string">'login.html'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/user.html'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    res.sendFile(path.resolve(__dirname + <span class="string">'/../views/admin/'</span> + <span class="string">'user.html'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">'/login.html'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;<span class="comment">// /admin/login.html</span></span><br><span class="line">    res.sendFile(path.resolve(__dirname + <span class="string">'/../views/admin/'</span> + <span class="string">'login.html'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;<span class="comment">// æš´éœ²ç»™å¤–éƒ¨è°ƒç”¨è¯¥è·¯ç”±</span></span><br></pre></td></tr></table></figure>
<h3 id="Express-å“åº”å¯¹è±¡"><a href="#Express-å“åº”å¯¹è±¡" class="headerlink" title="Express å“åº”å¯¹è±¡"></a>Express å“åº”å¯¹è±¡</h3><p>é€šè¿‡å“åº”ï¼ˆResponseï¼‰å¯¹è±¡ï¼ŒæœåŠ¡å™¨å¯ä»¥è¿”å›ä¸€ä¸ªæ¥è‡ªå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰çš„ <code>Request</code> ,æœ€ç»ˆè¿”å›ç»™ç”¨æˆ·çš„å…¶å®å°±æ˜¯ä¸€ä¸ªç»è¿‡ä¸šåŠ¡é€»è¾‘å±‚å¤„ç†çš„ <code>res</code> å¯¹è±¡ã€‚æ¥äº†è§£ä¸‹ Express çš„å“åº”å¯¹è±¡å§ã€‚</p>
<h4 id="send"><a href="#send" class="headerlink" title="send()"></a>send()</h4><p>Express å·²ç»å°è£…è¿‡äº†åŸç”Ÿ Node.js çš„å“åº”æ–¹æ³•ï¼Œåœ¨åŸç”Ÿ Node.js ä¸­ï¼Œé€šè¿‡ <code>res.write()</code> æ–¹æ³•å¯ä»¥è¿”å›å­—ç¬¦ä¸²å’Œ Bufferã€‚è€Œ Express ä¸­çš„ <code>send()</code> å¯ä»¥è¿”å›ä»»æ„æ•°æ®ç±»å‹ï¼Œå¦‚æµã€æ•°æ®ã€æ™®é€šæ–‡æœ¬ç­‰ï¼Œæ¥çœ‹ä¸ªä¾‹å­ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">res.send(<span class="keyword">new</span> Buffer(<span class="string">'ifyour'</span>)); <span class="comment">// Buffer</span></span><br><span class="line">res.send(&#123;<span class="string">"name"</span>: <span class="string">"ifyour"</span>&#125;);   <span class="comment">// JSON</span></span><br><span class="line">res.send(<span class="string">'&lt;p&gt;some html&lt;/p&gt;'</span>);   <span class="comment">// HTML</span></span><br><span class="line">res.status(<span class="number">404</span>).send(<span class="string">'404 Not Find'</span>); <span class="comment">// è®¾ç½®çŠ¶æ€ç å¹¶è¿”å›æç¤º</span></span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure></p>
<h4 id="json"><a href="#json" class="headerlink" title="json()"></a>json()</h4><p>é€šè¿‡ <code>json()</code> æ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ª <code>JSON</code> å¯¹è±¡ï¼Œç”¨äº Ajax ç­‰ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">res.json(<span class="literal">null</span>);</span><br><span class="line">res.json(&#123;<span class="string">"user"</span>: <span class="string">"ifyour"</span>&#125;);</span><br><span class="line">res.status(<span class="number">500</span>).json(&#123;<span class="string">"error"</span>: <span class="string">"message"</span>&#125;);</span><br></pre></td></tr></table></figure></p>
<h4 id="render"><a href="#render" class="headerlink" title="render()"></a>render()</h4><p><code>render</code> ç”¨äºæ¸²æŸ“æ¨¡æ¿å¼•æ“ï¼Œæ¯”å¦‚åœ¨ä½¿ç”¨ <a href="https://github.com/tj/ejs" target="_blank" rel="noopener">ejs</a> æ¨¡æ¿å¼•æ“æ—¶ï¼Œå“åº”ç”¨æˆ·è¯·æ±‚å°±å¯ä»¥ä½¿ç”¨ <code>res.render()</code> è¿”å›ç»™ç”¨æˆ·ä¸€ä¸ªæ¸²æŸ“å¥½çš„é¡µé¢ã€‚è¿™ä¸ªç”¨çš„æ¯”è¾ƒå¤šï¼Œæˆ‘æ¥ä¸¾ä¸ªä¾‹å­ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç›®å½•ç»“æ„</span></span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ index.js</span><br><span class="line">â”œâ”€â”€ node_modules</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ejs</span><br><span class="line">â”‚Â Â  â””â”€â”€ express</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â””â”€â”€ views</span><br><span class="line">    â””â”€â”€ login.html</span><br></pre></td></tr></table></figure></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ejs æ¨¡æ¿å¼•æ“ï¼Œå®šä¹‰äº† /login.html --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ³¨æ„ ejs æ¨¡æ¿ä¸­å˜é‡çš„å†™æ³• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ¬¢è¿ä½ ï¼Œ<span class="tag">&lt;<span class="name">%=name%</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> ejs = <span class="built_in">require</span>(<span class="string">'ejs'</span>); <span class="comment">// å¼•å…¥ ejs æ¨¡æ¿å¼•æ“</span></span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> viewsPath = path.join(__dirname, <span class="string">'views'</span>);<span class="comment">// views æ˜¯æ¨¡æ¿ç›®å½•</span></span><br><span class="line"><span class="comment">// è®¾ç½® express views å±‚ï¼Œæ¨¡æ¿æ ¹è·¯å¾„</span></span><br><span class="line">app.set(<span class="string">'views'</span>, viewsPath);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½® express å®ä¾‹çš„æ¨¡æ¿è¯­è¨€</span></span><br><span class="line">app.set(<span class="string">'view engine'</span>, <span class="string">'html'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠ express å®ä¾‹çš„æ¨¡æ¿å¼•æ“å’Œ ejs æ¨¡æ¿å¼•æ“å…³è”</span></span><br><span class="line">app.engine(<span class="string">'html'</span>, ejs.__express);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/login.html'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    res.render(<span class="string">'login'</span>, &#123;<span class="attr">name</span>: <span class="string">"ifyour"</span>&#125;);<span class="comment">// æ›¿æ¢åˆ°æ¨¡æ¿å˜é‡ä¸­çš„ name ä¸º ifyour</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8080</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'visit http://127.0.0.1:8080/'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<div class="tip"><br><code>__dirname</code> æ˜¯ Node.js ä¸­å®šä¹‰çš„ <code>global</code> å…¨å±€å˜é‡ï¼Œè·å–å½“å‰æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œè¿”å› <code>string</code> ç±»å‹ã€‚<br></div>

<h4 id="download"><a href="#download" class="headerlink" title="download()"></a>download()</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">res.download(<span class="string">'./123.doc'</span>); <span class="comment">// ä¸‹è½½å½“å‰ç›®å½•ä¸‹é¢çš„123.docæ–‡ä»¶ã€‚</span></span><br><span class="line">res.download(<span class="string">'./123.doc'</span>,<span class="string">'books.doc'</span>); <span class="comment">// ä¸‹è½½å½“å‰ç›®å½•ä¸‹é¢çš„123.docæ–‡ä»¶ï¼Œé‡å‘½åä¸º books.doc</span></span><br></pre></td></tr></table></figure>
<h4 id="redirect"><a href="#redirect" class="headerlink" title="redirect()"></a>redirect()</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‡å®šå‘åˆ°æŒ‡å®šçš„ URL è·¯å¾„</span></span><br><span class="line">res.redirect(<span class="string">'/404.html'</span>);</span><br><span class="line">res.redirect(<span class="string">'https://www.google.com/'</span>);</span><br></pre></td></tr></table></figure>
<p>æ›´å¤šå“åº”å¯¹è±¡çš„æ–¹æ³•ï¼Œå‚è€ƒ <a href="http://www.expressjs.com.cn/4x/api.html#res" target="_blank" rel="noopener">Express å®˜æ–¹ API</a>ã€‚</p>
<h3 id="Express-è¯·æ±‚å¯¹è±¡"><a href="#Express-è¯·æ±‚å¯¹è±¡" class="headerlink" title="Express è¯·æ±‚å¯¹è±¡"></a>Express è¯·æ±‚å¯¹è±¡</h3><p>Express ä¸­çš„ <code>Request</code> å¯¹è±¡ï¼ŒåŒ…å«äº†ä¸€æ¬¡è¯·æ±‚ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œæ¯”å¦‚è¯·æ±‚å¤´ã€è·¯å¾„ã€Cookies ç­‰ï¼Œè·å–è¯·æ±‚å¤´ä¸­çš„ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ ¹æ®è¿™äº›ä¿¡æ¯å¤„ç†ä¸šåŠ¡é€»è¾‘å±‚ï¼Œæœ€ç»ˆå°†å¤„ç†è¿‡åçš„æ•°æ®è¿”å›ç»™ç”¨æˆ·ã€‚è¿™é‡Œæ€»ç»“äº†å¸¸ç”¨çš„è¯·æ±‚å¯¹è±¡æ–¹æ³•ã€‚</p>
<h4 id="URL-ä¸­çš„å‚æ•°"><a href="#URL-ä¸­çš„å‚æ•°" class="headerlink" title="URL ä¸­çš„å‚æ•°"></a>URL ä¸­çš„å‚æ•°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹å¼ä¸€ï¼š req.query.å‚æ•°å</span></span><br><span class="line"><span class="comment">// e.g.  http://localhost:3000/user?name=ifyour</span></span><br><span class="line"><span class="built_in">console</span>.log(req.query.name);</span><br><span class="line"><span class="comment">// =&gt; ifyour</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼äºŒï¼šreq.params.å‚æ•°å</span></span><br><span class="line"><span class="comment">//e.g.  http://localhost/post/123123</span></span><br><span class="line">router.get(<span class="string">'/post/:id'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(req.params.id);</span><br><span class="line">    <span class="comment">// =&gt; 123123</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="è¡¨å•ä¸­çš„å‚æ•°"><a href="#è¡¨å•ä¸­çš„å‚æ•°" class="headerlink" title="è¡¨å•ä¸­çš„å‚æ•°"></a>è¡¨å•ä¸­çš„å‚æ•°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹å¼ä¸€ï¼šè¯­æ³•ï¼šreq.param.å‚æ•°å  æ³¨æ„è¿™é‡Œæ²¡åŠ  s</span></span><br><span class="line"><span class="comment">// e.g. &lt;input type="text" name="user"&gt;</span></span><br><span class="line"><span class="built_in">console</span>.log(req.param(<span class="string">'user'</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼äºŒï¼šä½¿ç”¨ body-parser ä¸­é—´ä»¶</span></span><br><span class="line"><span class="comment">// e.g. &lt;input type="text" name="user"&gt;</span></span><br><span class="line"><span class="keyword">var</span> bodyparser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</span><br><span class="line"><span class="built_in">console</span>.console.log(req.boy.user);</span><br></pre></td></tr></table></figure>
<h3 id="Express-ä¸­é—´ä»¶"><a href="#Express-ä¸­é—´ä»¶" class="headerlink" title="Express ä¸­é—´ä»¶"></a>Express ä¸­é—´ä»¶</h3><p>Express æ˜¯ä¸€ä¸ªè‡ªèº«åŠŸèƒ½æç®€ï¼Œå®Œå…¨æ˜¯ç”±è·¯ç”±å’Œä¸­é—´ä»¶æ„æˆä¸€ä¸ªçš„ Web å¼€å‘æ¡†æ¶ï¼šä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œä¸€ä¸ª Express åº”ç”¨å°±æ˜¯åœ¨è°ƒç”¨å„ç§ä¸­é—´ä»¶ã€‚<br><img src="http://ww3.sinaimg.cn/large/6057861cgw1fbcrpk71zxj20sg03kaaa.jpg" alt><br>å¦‚å›¾ï¼Œä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰ä½äºå®¢æˆ·ç«¯å’Œè·¯ç”±ä¹‹é—´ï¼Œå®ƒå¥½æ¯”æ˜¯ä¸€ä¸ªæ¼æ–—ï¼Œç»è¿‡è¿™ä¸ªæ¼æ–—çš„ <code>Request</code> å¯¹è±¡å’Œ <code>Response</code> å¯¹è±¡ä»¥åŠå¾ªç¯æµç¨‹ä¸­çš„ <code>Next</code> ä¼šè¢«å¤„ç†ï¼Œæ¯”å¦‚æ­£ç¡®æ€§æ ¡éªŒã€ä¸šåŠ¡é€»è¾‘å¤„ç†ç­‰ã€‚</p>
<ul>
<li>æ‰§è¡Œä»»ä½•ä»£ç </li>
<li>ä¿®æ”¹è¯·æ±‚å’Œå“åº”å¯¹è±¡</li>
<li>ç»ˆç»“è¯·æ±‚-å“åº”å¾ªç¯</li>
<li>è°ƒç”¨å †æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶</li>
</ul>
<p><div class="tip"><br>å¦‚æœå½“å‰ä¸­é—´ä»¶æ²¡æœ‰ç»ˆç»“è¯·æ±‚-å“åº”å¾ªç¯ï¼Œåˆ™å¿…é¡»è°ƒç”¨ next() æ–¹æ³•å°†æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå¦åˆ™è¯·æ±‚å°±ä¼šæŒ‚èµ·ã€‚<br></div><br>ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ï¼Œå¦‚ä½•é€šè¿‡ <code>next()</code> æ–¹æ³•æŠŠæ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> accessToken = req.query.accessToken;</span><br><span class="line">   <span class="comment">//æ£€æŸ¥è¯·æ±‚ä¸­æ˜¯å¦å«æœ‰â€œè®¤è¯ç‰Œâ€ï¼Œå­˜åœ¨å°±ç»§ç»­æ‰§è¡Œã€‚</span></span><br><span class="line">   <span class="keyword">if</span>(accessToken)&#123;</span><br><span class="line">       next(); <span class="comment">// æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶</span></span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          res.send(â€œè¯·æ±‚å¿…é¡»åŒ…å«tokenâ€);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure></p>
<h4 id="åº”ç”¨çº§ä¸­é—´ä»¶"><a href="#åº”ç”¨çº§ä¸­é—´ä»¶" class="headerlink" title="åº”ç”¨çº§ä¸­é—´ä»¶"></a>åº”ç”¨çº§ä¸­é—´ä»¶</h4><p>åº”ç”¨çº§ä¸­é—´ä»¶å°±æ˜¯ç»‘å®šåˆ°ç”¨ <code>express()</code> ç”Ÿæˆçš„å¯¹è±¡ <code>app</code> èº«ä¸Šçš„ï¼Œæ¯”å¦‚ <code>app.use()</code> ä¸­çš„ <code>use</code> æ–¹æ³•ï¼Œä»¥åŠ <code>app.post()</code> ã€<code>app.get()</code> ä¸­çš„ <code>POST</code> å’Œ <code>GET</code> æ–¹æ³•ç­‰ã€‚</p>
<h4 id="å†…ç½®ä¸­é—´ä»¶"><a href="#å†…ç½®ä¸­é—´ä»¶" class="headerlink" title="å†…ç½®ä¸­é—´ä»¶"></a>å†…ç½®ä¸­é—´ä»¶</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®å…¬å…±é™æ€ç›®å½•ï¼Œç”¨äºå­˜æ”¾ css js image ç­‰æ–‡ä»¶ï¼Œé¡¹ç›®ç›®å½•é‡Œæœ‰ images ç›®å½•å­˜æ”¾ 1.png</span></span><br><span class="line"><span class="comment">// é‚£ä¹ˆè®¿é—®ï¼šhttp://localhost/images/1.png è·å–</span></span><br><span class="line">app.use(express.static(<span class="string">'public'</span>));</span><br></pre></td></tr></table></figure>
<h4 id="ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶"><a href="#ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶" class="headerlink" title="ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶"></a>ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶</h4><p>ä¸­é—´ä»¶å¯ä»¥è¯´æ˜¯æ•´ä¸ª Express çš„ç²¾åæ‰€åœ¨äº†ï¼Œä½¿ç”¨ä¸­é—´ä»¶å¯ä»¥å‡ å¤§çš„æ‰©å±•é¡¹ç›®çš„åŠŸèƒ½ã€‚ä½¿ç”¨æ–¹æ³•éƒ½å·®ä¸å¤šï¼Œè¿™é‡Œä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„ï¼Œå…·ä½“ä½¿ç”¨æ–¹å¼éœ€è¦çœ‹å®˜æ–¹çš„æ–‡æ¡£äº†ã€‚</p>
<ul>
<li>è§£æå®¢æˆ·ç«¯è¯·æ±‚çš„ body ä¸­çš„å†…å®¹ï¼šbody-parser</li>
<li>cookie è§£æä¸­é—´ä»¶ï¼šcookie-parser</li>
<li>æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶ï¼šmulter</li>
</ul>
<p>ä½¿ç”¨å‘½ä»¤ <code>npm i åŒ…åç§° --save</code> å®‰è£…åˆ°é¡¹ç›®ä¸­ï¼Œç„¶åå¼•å…¥é¡¹ç›®ä½¿ç”¨å³å¯ã€‚</p>
</div></article></div></main><footer><div class="paginator"><a href="/2016/01/05/Mongodb-å­¦ä¹ ç¬”è®°----å¢åˆ æ”¹æŸ¥/" class="prev">PREV</a><a href="/2015/01/05/Node.JS-å­¦ä¹ ç¬”è®°-[04]----HTTP/" class="next">NEXT</a></div><div class="copyright"><p>Â© 2015 - 2019 Made with <span>â¤</span> by <a href="https://github.com/ifyour/ifyour.github.io">Ifyour</a></p><p>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div><script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.4.0/lib/darkmode-js.min.js"></script><script>new Darkmode({
    bottom: '1rem',
    right: '1rem',
    left: 'unset',
    time: '0.5s',
    mixColor: '#fff',
    backgroundColor: '#fff',
    buttonColorDark: '#100f2c',
    buttonColorLight: '#fff',
    saveInCookies: true,
    label: 'ğŸŒ“',
    autoMatchOsTheme: true
}).showWidget();
</script><script src="/js/algoliasearch.min.js"></script><script src="/js/template-web.min.js"></script><script src="/js/main.js"></script><script src="https://unpkg.com/medium-zoom@0/dist/medium-zoom.min.js"></script><script>mediumZoom('article img', {margin: 24});
(function(win, targetElem) {
    if (!targetElem) return;
    win.onscroll = (function() {
        if (isElementInViewport(targetElem)) {
            win.onscroll = null;
            return mediumZoom('.gitment-comment-main img', {margin: 24});
        }
        return arguments.callee;
    })();
    function isElementInViewport(el) {
        var rect = el.getBoundingClientRect();
        var winH = win.innerHeight || document.documentElement.clientHeight;
        return rect.top <= winH && rect.bottom >= winH;
    };
})(this, document.querySelector('#gc_container'));
</script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-120929321-1",'auto');ga('send','pageview');</script></footer></div><script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>