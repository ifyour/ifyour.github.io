<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> call、apply、bind 的区别及应用 · Ifyour's Blog</title><meta name="description" content="call、apply、bind 的区别及应用 - Ifyour"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://ifyour.github.io/atom.xml" title="Ifyour's Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://twitter.com/JohnWmm/" target="_blank" class="nav-list-link">TWITTER</a></li><li class="nav-list-item"><a href="https://github.com/ifyour/" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">call、apply、bind 的区别及应用</h1><div class="post-info">Mar 26, 2016</div><div class="post-content"><p>在面向对象的编程中，经常会处理 <code>this</code> 的指向问题，改变 this 的指向就不得不谈谈今天的主角—— <code>call</code>、<code>apply</code>、<code>bind</code>。个人感觉 <code>this</code> 的问题初学者不同容易一下理解透彻，今天再来好好捋一捋加深理解。<br><a id="more"></a></p>
<h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><p><code>call</code>、<code>apply</code>、<code>bind</code> 的作用就是改变函数执行时的上下文，即改变 <code>this</code> 指向，从而提高函数的执行效率，减少冗余提高带代码 <strong><em>复用</em></strong>。</p>
<p><code>this</code> 的指向其实也就<a href="https://ifyour.github.io/2016/02/19/JavaScript-%E4%B8%AD%E7%9A%84-this-%E7%94%A8%E6%B3%95%E6%80%BB%E7%BB%93/">不外乎这四种情况</a>，其实理解起来还是很容易的，理解不了也没关系，先记住，后面在工作中大量编码应用，写多了就知道为啥要这样用了。先来一个简单的例子。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 定义人类构造函数，属性是姓名，方法是输出自己的姓名</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Person.prototype = &#123;</div><div class="line">    <span class="attr">constructor</span>: Person,</div><div class="line">    <span class="attr">showName</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">'ifyour'</span>);</div><div class="line">p1.showName(); <span class="comment">// =&gt; ifyour</span></div><div class="line"></div><div class="line"><span class="comment">// 定义一个动物对象，它有个一姓名属性</span></div><div class="line"><span class="keyword">var</span> animal = &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'cat'</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>人类实例 <code>p1</code> 想要打印自己的姓名，只要调用自身的 <code>showName</code> 方法即可，但是动物呢？我也想要动物实例 <code>animal</code> 打印自己的名字，如何做呢？当然改变 this 咯，把人类的 <code>showName</code> 方法借给动物用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 可以直接去原型上借用</span></div><div class="line">Person.prototype.showName.call(animal);<span class="comment">//=&gt;cat</span></div><div class="line"></div><div class="line"><span class="comment">// 也可以从人类上生成的实例 p1 去借用</span></div><div class="line">p1.showName.call(animal);<span class="comment">//  =&gt; cat</span></div><div class="line">p1.showName.apply(animal);<span class="comment">// =&gt; cat</span></div><div class="line">p1.showName.bind(animal)();<span class="comment">//=&gt; cat</span></div></pre></td></tr></table></figure>
<h3 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h3><h4 id="call、apply-与-bind"><a href="#call、apply-与-bind" class="headerlink" title="call、apply 与 bind"></a>call、apply 与 bind</h4><ul>
<li>call、apply 改变 this 指向后会 <strong><em>立即执行</em></strong></li>
<li>bind 并不会执行</li>
</ul>
<p>在上面的例子我们也看到了，<code>bind</code> 方法改变 this 时，还需要加一个 <code>()</code> 才能执行输出 <code>cat</code>。</p>
<h4 id="call-与-apply"><a href="#call-与-apply" class="headerlink" title="call 与 apply"></a>call 与 apply</h4><ul>
<li><code>fn.call(obj, arg1, arg2, arg3...);</code></li>
<li><code>fn.apply(obj, [arg1, arg2, arg3...]);</code></li>
</ul>
<p>它们俩之间的差别在于 <strong><em>参数</em></strong>，<code>call</code> 和 <code>aplly</code> 的第一个参数都是要改变上下文的对象，而 <code>call</code> 从第二个参数开始以参数列表的形式展现，<code>apply</code> 则是把除了改变上下文对象的参数放在一个数组里面作为它的第二个参数。</p>
<h3 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h3><p>知道了怎么使用和它们之间的区别，接下来我们来了解一下使用 <code>call</code>、<code>apply</code>、<code>bind</code> 的常见应用场景。</p>
<h4 id="求数组中的最大、最小值"><a href="#求数组中的最大、最小值" class="headerlink" title="求数组中的最大、最小值"></a>求数组中的最大、最小值</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">34</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">54</span>,<span class="number">6</span>,<span class="number">-67</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">-8</span>,<span class="number">687</span>];</div><div class="line"></div><div class="line"><span class="built_in">Math</span>.max.apply(<span class="built_in">Math</span>, arr);</div><div class="line"><span class="built_in">Math</span>.max.call(<span class="built_in">Math</span>, <span class="number">34</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">54</span>,<span class="number">6</span>,<span class="number">-67</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">-8</span>,<span class="number">687</span>);</div><div class="line"></div><div class="line"><span class="built_in">Math</span>.min.apply(<span class="built_in">Math</span>, arr);</div><div class="line"><span class="built_in">Math</span>.min.call(<span class="built_in">Math</span>, <span class="number">34</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">54</span>,<span class="number">6</span>,<span class="number">-67</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">-8</span>,<span class="number">687</span>);</div></pre></td></tr></table></figure>
<h4 id="将伪数组转化为数组"><a href="#将伪数组转化为数组" class="headerlink" title="将伪数组转化为数组"></a>将伪数组转化为数组</h4><p>JavaScript 中的伪数组(例如通过 <code>document.getElementsByTagName</code> 获取的元素)具有 <code>length</code> 属性，并且可以通过 0、1、2…下标来访问其中的元素，但是没有 <code>Array</code> 中的 <code>push</code>、<code>pop</code> 等方法。我们可以利用 <code>call</code>、<code>apply</code> 来将其转化为真正的数组这样便可以方便地使用数组方法了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 这是一个伪数组</span></div><div class="line"><span class="keyword">var</span> arrayLike = &#123;</div><div class="line">    <span class="number">0</span>: <span class="string">'aaaa'</span>,</div><div class="line">    <span class="number">1</span>: <span class="string">'bbbb'</span>,</div><div class="line">    <span class="number">2</span>: <span class="string">'cccc'</span>,</div><div class="line">    <span class="attr">length</span>: <span class="number">3</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// 通过这个方法转换</span></div><div class="line"><span class="keyword">var</span> arr = <span class="built_in">Array</span>.prototype.slice.call(arrayLike);</div></pre></td></tr></table></figure>
<div class="tip">上面 <code>arr</code> 便是一个包含 <code>arrayLike</code> 元素的真正的数组啦( 注意数据结构必须是以数字为下标而且一定要有 <code>length</code> 属性 )<br></div>

<h4 id="数组追加"><a href="#数组追加" class="headerlink" title="数组追加"></a>数组追加</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line"><span class="keyword">var</span> arr2 = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</div><div class="line">[].push.apply(arr1, arr2);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(arr1);<span class="comment">// =&gt; [1, 2, 3, 4, 5, 6]</span></div><div class="line"><span class="built_in">console</span>.log(arr2);<span class="comment">// =&gt; [1, 2, 3]</span></div></pre></td></tr></table></figure>
<h4 id="变量类型判断"><a href="#变量类型判断" class="headerlink" title="变量类型判断"></a>变量类型判断</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj) == <span class="string">'[object Array]'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];<span class="comment">//   =&gt; true</span></div><div class="line"><span class="keyword">var</span> arr2 = <span class="string">'[1,2,3]'</span>;<span class="comment">// =&gt; false</span></div></pre></td></tr></table></figure>
<h4 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 基础类</span></div><div class="line"><span class="keyword">var</span> Person = <span class="function"><span class="keyword">function</span> (<span class="params">name, age</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name;</div><div class="line">  <span class="keyword">this</span>.age = age;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 女孩类继承基础人类</span></div><div class="line"><span class="keyword">var</span> Girl = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</div><div class="line">  Person.call(<span class="keyword">this</span>, name);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// 男孩类继承基础人类</span></div><div class="line"><span class="keyword">var</span> Boy = <span class="function"><span class="keyword">function</span> (<span class="params">name, age</span>) </span>&#123;</div><div class="line">  Person.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> g1 = <span class="keyword">new</span> Girl (<span class="string">'Jilly'</span>);</div><div class="line"><span class="keyword">var</span> b1 = <span class="keyword">new</span> Boy(<span class="string">'ifyour'</span>, <span class="number">18</span>);</div></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a href="/2016/03/23/ProxyChains-NG + ShadowSocks 实现终端代理/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'ifyour';
var disqus_identifier = '2016/03/26/call、apply、bind-的区别及应用/';
var disqus_title = 'call、apply、bind 的区别及应用';
var disqus_url = 'http://ifyour.github.io/2016/03/26/call、apply、bind-的区别及应用/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//ifyour.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2017 <a href="http://ifyour.github.io">Ifyour</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>