<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="theme-color" content="#ffffff"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content="Ifyour's Blog"><meta name="msapplication-TileImage" content="/img/webAppIcon-256x256.png"><meta name="msapplication-TileColor" content="#000"><meta property="algolia:search" data-application-id="3XQ5CPDDMK" data-api-key="abe9e26eebcac723f34ade5cf6b97441" data-index-name="prod_blog"><title>React ç»„ä»¶æ¨¡å¼ Â· Ifyour's Blog</title><meta name="description" content="React ç»„ä»¶æ¨¡å¼ - Ifyour"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="manifest" href="/manifest.json"><link rel="icon" type="image/x-icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="apple-touch-icon" size="256x256" href="/img/webAppIcon-256x256.png"><link rel="apple-touch-icon" size="512x512" href="/img/webAppIcon-512x512.png"><link rel="apple-touch-startup-image" href="/img/apple-launch-750x1334.png"><link rel="preload" href="/css/apollo.css" as="style"><link rel="preload" href="/js/main.js" as="script"><link rel="search" type="application/opensearchdescription+xml" href="http://ifyour.github.io/atom.xml" title="Ifyour's Blog"></head><body><div class="search"><a href="javascript:;" target="_self" class="close"><svg id="icon-close" viewbox="0 0 16 16" width="24" height="24" fill="#A4A9AC"><path d="M8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 Z M10.44352,10.7233105 L10.4528296,10.7326201 L10.7326201,10.4528296 C11.0310632,10.1543865 11.0314986,9.66985171 10.7335912,9.37194437 L9.36507937,8.0034325 L10.7360526,6.63245928 C11.0344957,6.33401613 11.0349311,5.84948135 10.7370237,5.55157401 L10.448426,5.26297627 C10.1505186,4.96506892 9.66598387,4.96550426 9.36754072,5.26394741 L8.00589385,6.62559428 L6.63738198,5.25708241 C6.33947464,4.95917507 5.85493986,4.95961041 5.55649671,5.25805356 L5.26737991,5.54717036 C4.96893676,5.84561351 4.96850142,6.33014829 5.26640876,6.62805563 L6.62561103,7.9872579 L5.25463781,9.35823112 C4.95619466,9.65667427 4.95575932,10.141209 5.25366666,10.4391164 L5.5422644,10.7277141 C5.84017175,11.0256215 6.32470652,11.0251861 6.62314967,10.726743 L7.99412289,9.35576976 L9.36263476,10.7242816 C9.66054211,11.022189 10.1450769,11.0217536 10.44352,10.7233105 Z"/></svg></a><div class="container"><input id="search-input" autocomplete="off" type="text" placeholder="Type to search" class="search-input"><div class="search-by">Search by<a href="https://www.algolia.com/" target="_blank"> algolia</a></div><div class="search-results"><div id="search-articles" class="search-item"></div></div></div><script id="search-tmp" type="text/html">{{if list.length}}
    <h3>ARTICLES</h3>
    <ul>
        {{each list item}}
        <li>
            <div class="search-item-title">
                <a href="{{item.permalink}}">{{@item.title}}</a>
            </div>
            <div class="search-item-summary" style="-webkit-box-orient: vertical;">
                {{@item.summary}}
            </div>
        </li>
        {{/each}}
    </ul>
{{else if list}}
    <h2>
        Oops! no result,
        Try it on <a target="_blank" style="color: #2c3e50; border-bottom: 2px solid #42b983; font-size: 19px;" href="https://www.google.com/search?q=site%3Aifyour.github.io+{{keywords}}">Google: {{keywords}}</a>~ ğŸ˜±
    </h2>
{{/if}}</script></div><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/docs/" target="_self" class="nav-list-link">DOCS</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="javascript:;" target="_self" id="search" class="nav-list-link">SEARCH</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">React ç»„ä»¶æ¨¡å¼</h1><div class="post-info">May 15, 2018<a href="https://levelup.gitconnected.com/react-component-patterns-ab1f09be2c82" target="_blank" title="https://levelup.gitconnected.com/react-component-patterns-ab1f09be2c82" class="post-from">Translation Â· Original Link</a></div><div class="sidebar-toc"><span>Catalog</span><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#æ¦‚è¦"><span class="toc-text">æ¦‚è¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æœ‰çŠ¶æ€ç»„ä»¶-vs-æ— çŠ¶æ€ç»„ä»¶"><span class="toc-text">æœ‰çŠ¶æ€ç»„ä»¶ vs æ— çŠ¶æ€ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®¹å™¨ç»„ä»¶-vs-å±•ç¤ºç»„ä»¶"><span class="toc-text">å®¹å™¨ç»„ä»¶ vs å±•ç¤ºç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#é«˜é˜¶ç»„ä»¶"><span class="toc-text">é«˜é˜¶ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å›è°ƒæ¸²æŸ“ç»„ä»¶"><span class="toc-text">å›è°ƒæ¸²æŸ“ç»„ä»¶</span></a></li></ol></div><div class="post-content"><p>ä½¿ç”¨ React å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œ React æ˜¯ Facebook å…¬å¸å¼€å‘çš„ç”¨äºæ„å»ºç½‘é¡µç•Œé¢çš„ UI åº“ã€‚æœ¬æ–‡è¯•å›¾æ€»ç»“å®è·µä¸­æ‰€å­¦åˆ°çš„ä¸€äº›æ¨¡å¼ï¼ŒåŒæ—¶å¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åˆ°å³å°†è¿ˆå…¥ç»„ä»¶ä¸–ç•Œçš„å¼€å‘è€…ã€‚</p>
<a id="more"></a>
<h3 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h3><ul>
<li>æœ‰çŠ¶æ€ç»„ä»¶ vs æ— çŠ¶æ€ç»„ä»¶</li>
<li>å®¹å™¨ç»„ä»¶ vs å±•ç¤ºç»„ä»¶</li>
<li>é«˜é˜¶ç»„ä»¶ vs å›è°ƒæ¸²æŸ“ç»„ä»¶</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/15377484/40128970-a333542c-5965-11e8-8505-d1284d2759b1.png" alt="image"></p>
<h3 id="æœ‰çŠ¶æ€ç»„ä»¶-vs-æ— çŠ¶æ€ç»„ä»¶"><a href="#æœ‰çŠ¶æ€ç»„ä»¶-vs-æ— çŠ¶æ€ç»„ä»¶" class="headerlink" title="æœ‰çŠ¶æ€ç»„ä»¶ vs æ— çŠ¶æ€ç»„ä»¶"></a>æœ‰çŠ¶æ€ç»„ä»¶ vs æ— çŠ¶æ€ç»„ä»¶</h3><p>æ­£å¦‚ WEB æœåŠ¡æœ‰é™æ€å’ŒåŠ¨æ€ä¹‹åˆ†ï¼ŒReact ç»„ä»¶ä¹Ÿæœ‰æœ‰çŠ¶æ€å’Œæ— çŠ¶æ€çš„åŒºåˆ†ã€‚</p>
<ul>
<li>æœ‰çŠ¶æ€ç»„ä»¶ï¼šåœ¨åº”ç”¨ä¸­ç»„ä»¶å¯ä»¥æ‹¥æœ‰è‡ªèº«çŠ¶æ€å¹¶æ“çºµå®ƒï¼›</li>
<li>æ— çŠ¶æ€ç»„ä»¶ï¼šåªæ¥æ”¶å±æ€§è¿›è¡Œæ•ˆæœå‘ˆç°ã€‚</li>
</ul>
<p>ä¸€ä¸ªç®€å•çš„æ— çŠ¶æ€ç»„ä»¶ï¼Œåªå—å±æ€§æ§åˆ¶:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Button = <span class="function"><span class="params">props</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;props.onClick&#125;</span>&gt;</span>&#123;props.text&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªå…·æœ‰è®¡æ•°åŠŸèƒ½çš„æŒ‰é’®ç»„ä»¶ (å¤ç”¨ä¸Šé¢ Button ç»„ä»¶)</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonCounter</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="keyword">this</span>.state = &#123; <span class="attr">clicks</span>: <span class="number">0</span> &#125;;</span><br><span class="line">    <span class="keyword">this</span>.handleClick = <span class="keyword">this</span>.handleClick.bind(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClick() &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123; <span class="attr">clicks</span>: <span class="keyword">this</span>.state.clicks + <span class="number">1</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Button</span><br><span class="line">        onClick=&#123;<span class="keyword">this</span>.handleClick&#125;</span><br><span class="line">        text=&#123;<span class="string">`You've clicked me <span class="subst">$&#123;<span class="keyword">this</span>.state.clicks&#125;</span> times!`</span>&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­£å¦‚ä¸Šé¢ä¸¤ä¸ª Demo æ‰€ç¤ºï¼Œç¬¬äºŒä¸ªç»„ä»¶çš„ <code>constructor</code> å…·æœ‰çŠ¶æ€çš„å®šä¹‰ï¼Œç¬¬ä¸€ä¸ªç»„ä»¶åªæ˜¯å•çº¯åœ°æ¸²æŸ“å±æ€§æ–‡å­—ã€‚æœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶çš„åˆ’åˆ†çœ‹èµ·æ¥éå¸¸ç®€å•ï¼Œä½†æ˜¯å®ƒå¯¹äºç»„ä»¶å¤ç”¨å…·æœ‰é‡å¤§æ„ä¹‰ã€‚</p>
<h3 id="å®¹å™¨ç»„ä»¶-vs-å±•ç¤ºç»„ä»¶"><a href="#å®¹å™¨ç»„ä»¶-vs-å±•ç¤ºç»„ä»¶" class="headerlink" title="å®¹å™¨ç»„ä»¶ vs å±•ç¤ºç»„ä»¶"></a>å®¹å™¨ç»„ä»¶ vs å±•ç¤ºç»„ä»¶</h3><p>å½“ç»„ä»¶éœ€è¦è·å–å¤–éƒ¨æ•°æ®æ—¶ï¼Œæˆ‘ä»¬åˆå¯ä»¥å°†ç»„ä»¶åˆ’åˆ†ä¸ºä¸¤ç§æ–°çš„ç±»å‹ã€‚å®¹å™¨ç»„ä»¶è´Ÿè´£è·å–æ•°æ®ï¼Œå®ƒå¸¸å¸¸æ˜¯è¶…å‡ºäº† React èŒƒç•´çš„ï¼Œå¦‚ä½¿ç”¨ Redux æˆ– Relay è¿›è¡Œäº†ç»‘å®šã€‚å¯¹æ¯”è€Œè¨€ï¼Œå±•ç¤ºå‹ç»„ä»¶ä¸ä¾èµ–äºç¨‹åºå…¶ä»–éƒ¨åˆ†ï¼Œå®ƒåªå’Œè‡ªèº«çŠ¶æ€æˆ–å±æ€§æœ‰å…³ã€‚ä¸‹é¢æˆ‘ä»¬å®ç°ä¸€ä¸ªç”¨æˆ·åˆ—è¡¨çš„å±•ç¤ºç»„ä»¶:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> UserList = <span class="function"><span class="params">props</span> =&gt;</span> (</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &#123;props.users.map(<span class="function"><span class="params">u</span> =&gt;</span> (</span><br><span class="line">      &lt;li&gt;</span><br><span class="line">        &#123;u.name&#125; â€” &#123;u.age&#125; years old</span><br><span class="line">      &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">    ))&#125;</span></span><br><span class="line"><span class="regexp">  &lt;/u</span>l&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>å®¹å™¨ç»„ä»¶å¯ä»¥ç”¨æ¥æ›´æ–°ç”¨æˆ·åˆ—è¡¨çš„å±•ç¤º:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserListContainer</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="keyword">this</span>.state = &#123; <span class="attr">users</span>: [] &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    fetchUsers(<span class="function"><span class="params">users</span> =&gt;</span> <span class="keyword">this</span>.setState(&#123; users &#125;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">UserList</span> <span class="attr">users</span>=<span class="string">&#123;this.state.users&#125;</span> /&gt;</span>;</span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§åˆ†ç±»å°†æ•°æ®è·å–å’Œæ¸²æŸ“çš„é€»è¾‘åˆ†å¼€ï¼Œè¿›è€Œä½¿ç”¨æˆ·åˆ—è¡¨ç»„ä»¶å¯ä»¥å¤ç”¨ã€‚</p>
<p>å¦‚æœä½ æƒ³äº†è§£æ›´å¤šè¯¥æ¨¡å¼çš„ä¿¡æ¯ï¼Œ<a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a>å¯¹å®ƒè¿›è¡Œäº†è¯¦ç»†çš„è§£é‡Šã€‚</p>
<h3 id="é«˜é˜¶ç»„ä»¶"><a href="#é«˜é˜¶ç»„ä»¶" class="headerlink" title="é«˜é˜¶ç»„ä»¶"></a>é«˜é˜¶ç»„ä»¶</h3><p>å½“ä½ æƒ³å¤ç”¨ç»„ä»¶é€»è¾‘æ—¶ï¼Œé«˜é˜¶ç»„ä»¶éå¸¸æœ‰ç”¨ã€‚é«˜é˜¶ç»„ä»¶ï¼šæ˜¯å°†ç»„ä»¶ä½œä¸ºå‚æ•°å¹¶è¿”å›æ–°ç»„ä»¶çš„ JS å‡½æ•°ã€‚</p>
<p>å‡è®¾ä½ éœ€è¦æ„å»ºä¸€ä¸ªå¯æ‰©å±•èœå•ç»„ä»¶ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æ—¶ï¼Œå®ƒä¼šæ˜¾ç¤ºéšè—å­ç»„ä»¶å†…å®¹ã€‚å› æ­¤ï¼Œä½ å¯ä»¥ä½¿ç”¨é«˜é˜¶ç»„ä»¶æ¥å®ç°:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeToggleable</span>(<span class="params">Clickable</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">      <span class="keyword">super</span>();</span><br><span class="line">      <span class="keyword">this</span>.toggle = <span class="keyword">this</span>.toggle.bind(<span class="keyword">this</span>);</span><br><span class="line">      <span class="keyword">this</span>.state = &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    toggle() &#123;</span><br><span class="line">      <span class="keyword">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> (&#123; <span class="attr">show</span>: !prevState.show &#125;));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;Clickable &#123;...this.props&#125; onClick=&#123;<span class="keyword">this</span>.toggle&#125; /&gt;</span><br><span class="line">          &#123;<span class="keyword">this</span>.state.show &amp;&amp; <span class="keyword">this</span>.props.children&#125;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      );</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">  &#125;;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§æ–¹æ³•å…è®¸æˆ‘ä»¬ä½¿ç”¨ ES7 è£…é¥°å™¨è¯­æ³•å°†é€»è¾‘åº”ç”¨äº ToggleableMenu ç»„ä»¶:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@makeToggleable</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ToggleableMenu</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div onClick=&#123;<span class="keyword">this</span>.props.onClick&#125;&gt;</span><br><span class="line">        &lt;h1&gt;&#123;<span class="keyword">this</span>.props.title&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»»ä½•å­ç»„ä»¶ä¼ é€’ç»™ ToggleableMenu ç»„ä»¶:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Menu</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;ToggleableMenu title=<span class="string">"First Menu"</span>&gt;</span><br><span class="line">          &lt;p&gt;Some content&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>ToggleableMenu&gt;</span><br><span class="line">        &lt;ToggleableMenu title=<span class="string">"Second Menu"</span>&gt;</span><br><span class="line">          &lt;p&gt;Another content&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>ToggleableMenu&gt;</span><br><span class="line">        &lt;ToggleableMenu title=<span class="string">"Third Menu"</span>&gt;</span><br><span class="line">          &lt;p&gt;More content&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>ToggleableMenu&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ ç†Ÿæ‚‰ Redux çš„ connect å‡½æ•°æˆ–è€… React Router çš„ withRouter å‡½æ•°ï¼Œé‚£ä¹ˆä½ å·²ç»ä½¿ç”¨è¿‡é«˜é˜¶ç»„ä»¶äº†ã€‚</p>
<h3 id="å›è°ƒæ¸²æŸ“ç»„ä»¶"><a href="#å›è°ƒæ¸²æŸ“ç»„ä»¶" class="headerlink" title="å›è°ƒæ¸²æŸ“ç»„ä»¶"></a>å›è°ƒæ¸²æŸ“ç»„ä»¶</h3><p>å¦ä¸€ä¸ªæ¯”è¾ƒé«˜ç«¯çš„å¤ç”¨ç»„ä»¶é€»è¾‘çš„æ–¹æ³•æ˜¯å°†å‡½æ•°ä½œä¸ºç»„ä»¶çš„ <code>props.children</code>ï¼Œè¯¥æ–¹æ³•ä¹Ÿç§°ä¸º <strong>Function as Child Components</strong>ã€‚æˆ‘ä»¬å°†ä½¿ç”¨<strong>æ¸²æŸ“å›è°ƒ</strong>æ¥é‡æ–°å®ç°ä¸Šé¢çš„å¯æ‰©å±• Menu:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Toggleable</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="keyword">this</span>.toggle = <span class="keyword">this</span>.toggle.bind(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  toggle() &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> (&#123; <span class="attr">show</span>: !prevState.show &#125;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.props.children(<span class="keyword">this</span>.state.show, <span class="keyword">this</span>.toggle);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†å‡½æ•°ä½œä¸ºç»„ä»¶çš„å­çº§è¿›è¡Œä¼ é€’:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;Toggleable&gt;</span><br><span class="line">  &#123;(show, onClick) =&gt; (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div onClick=&#123;onClick&#125;&gt;</span><br><span class="line">        &lt;h1&gt;&#123;props.title&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">      &#123;show &amp;&amp; props.children&#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )&#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>Toggleable&gt;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç å·²ç»å°†ä¸€ä¸ªå‡½æ•°ä½œä¸º<strong>å­ç»„ä»¶</strong>ï¼Œä½†æ˜¯ï¼Œè‹¥æˆ‘ä»¬æƒ³å¤ç”¨ä¸Šè¿°é€»è¾‘ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªè½¬æ¢é€»è¾‘çš„æ–°ç»„ä»¶ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ToggleableMenu = <span class="function"><span class="params">props</span> =&gt;</span> (</span><br><span class="line">  &lt;Toggleable&gt;</span><br><span class="line">    &#123;(show, onClick) =&gt; (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;div onClick=&#123;onClick&#125;&gt;</span><br><span class="line">          &lt;h1&gt;&#123;props.title&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;</span><br><span class="line">        &#123;show &amp;&amp; props.children&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )&#125;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>Toggleable&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä½¿ç”¨ Render Callbacks å®ç°çš„å¯æ‰©å±•çš„ Menu ç»„ä»¶å¦‚ä¸‹:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Menu</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;ToggleableMenu title=<span class="string">"First Menu"</span>&gt;</span><br><span class="line">          &lt;p&gt;Some content&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>ToggleableMenu&gt;</span><br><span class="line">        &lt;ToggleableMenu title=<span class="string">"Second Menu"</span>&gt;</span><br><span class="line">          &lt;p&gt;Another content&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>ToggleableMenu&gt;</span><br><span class="line">        &lt;ToggleableMenu title=<span class="string">"Third Menu"</span>&gt;</span><br><span class="line">          &lt;p&gt;More content&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>ToggleableMenu&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>å›è°ƒæ¸²æŸ“ç»„ä»¶ (Render Callbacks) å’Œé«˜é˜¶å‡½æ•°ä½¿æˆ‘ä»¬çš„ç»„ä»¶æ›´åŠ çµæ´»ï¼ŒæŒæ¡å’Œé€‚åº”èµ·æ¥å…·æœ‰ä¸€å®šçš„éš¾åº¦ï¼Œéœ€è¦åå¤å­¦ä¹ å’Œæ¶ˆåŒ–ã€‚</p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/05/20/å¦‚ä½•é¿å…-async-await-åœ°ç‹±/" class="prev">PREV</a><a href="/2018/05/11/Git-æ“ä½œè¯¦ç»†æ€»ç»“/" class="next">NEXT</a></div><div id="gc_container"></div><script src="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/gitment.browser.js"></script><script>(new Gitment({
    id: 'aid' + (new Date('Tue May 15 2018 00:33:40 GMT+0800')).getTime()/1000,
    title: 'React ç»„ä»¶æ¨¡å¼' + ' Â· è¯„è®º',
    link: decodeURI(location.protocol + '//' + location.hostname + location.pathname),
    repo: 'ifyour.github.io',
    owner: 'ifyour',
    oauth: {
        client_id: '576e98d38d4bd19f8a02',
        client_secret: 'ba3616bf2f20c5da947a1fd5c7ef0edff4ffab99',
    }
})).render('gc_container');</script><div class="copyright"><p>Â© 2015 - 2019 Made with <span>â¤</span> by <a href="https://github.com/ifyour/ifyour.github.io">Ifyour</a></p><p>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div><script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.4.0/lib/darkmode-js.min.js"></script><script>new Darkmode({
    bottom: '1rem',
    right: '1rem',
    left: 'unset',
    time: '0.5s',
    mixColor: '#fff',
    backgroundColor: '#fff',
    buttonColorDark: '#100f2c',
    buttonColorLight: '#fff',
    saveInCookies: true,
    label: 'ğŸŒ“',
    autoMatchOsTheme: true
}).showWidget();
</script><script src="/js/algoliasearch.min.js"></script><script src="/js/template-web.min.js"></script><script src="/js/main.js"></script><script src="https://unpkg.com/medium-zoom@0/dist/medium-zoom.min.js"></script><script>mediumZoom('article img', {margin: 24});
(function(win, targetElem) {
    if (!targetElem) return;
    win.onscroll = (function() {
        if (isElementInViewport(targetElem)) {
            win.onscroll = null;
            return mediumZoom('.gitment-comment-main img', {margin: 24});
        }
        return arguments.callee;
    })();
    function isElementInViewport(el) {
        var rect = el.getBoundingClientRect();
        var winH = win.innerHeight || document.documentElement.clientHeight;
        return rect.top <= winH && rect.bottom >= winH;
    };
})(this, document.querySelector('#gc_container'));
</script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-120929321-1",'auto');ga('send','pageview');</script></footer></div><script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>