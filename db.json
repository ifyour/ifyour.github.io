{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/favicon.ico","path":"favicon.ico","modified":1,"renderable":0},{"_id":"themes/hexo-theme-apollo/source/favicon.png","path":"favicon.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-apollo/source/manifest.json","path":"manifest.json","modified":1,"renderable":1},{"_id":"themes/hexo-theme-apollo/source/css/apollo.css","path":"css/apollo.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-apollo/source/font/sourcesanspro.woff","path":"font/sourcesanspro.woff","modified":1,"renderable":1},{"_id":"themes/hexo-theme-apollo/source/font/sourcesanspro.woff2","path":"font/sourcesanspro.woff2","modified":1,"renderable":1},{"_id":"themes/hexo-theme-apollo/source/img/apple-launch-750x1334.png","path":"img/apple-launch-750x1334.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-apollo/source/img/webAppIcon-256x256.png","path":"img/webAppIcon-256x256.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-apollo/source/img/webAppIcon-256x256.png.bak","path":"img/webAppIcon-256x256.png.bak","modified":1,"renderable":1},{"_id":"themes/hexo-theme-apollo/source/img/webAppIcon-512x512.png","path":"img/webAppIcon-512x512.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-apollo/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-apollo/source/scss/apollo.scss","path":"scss/apollo.scss","modified":1,"renderable":1},{"_id":"themes/hexo-theme-apollo/source/js/template-web.min.js","path":"js/template-web.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-apollo/source/js/algoliasearch.min.js","path":"js/algoliasearch.min.js","modified":1,"renderable":1}],"Cache":[{"_id":"source/.DS_Store","hash":"d3e227ef309161835752c475a54126640d1149ab","modified":1575695527032},{"_id":"themes/hexo-theme-apollo/.gitignore","hash":"2851ba7682bb8e132da4511e7d3d769c6f247858","modified":1545840064000},{"_id":"source/favicon.ico","hash":"10df6f583311f8533e055ab21ad1be9eb3a7d80d","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/LICENSE","hash":"0cbd1cc64463ddff5c569cada287e69011ef385c","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/README.md","hash":"9c3cdfd232ed49a3d32b43696e02b980c93260ba","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/_config.yml","hash":"20facb13773bc7960e5dac9e9ae96ad1fa9a4849","modified":1575127310414},{"_id":"themes/hexo-theme-apollo/gulpfile.js","hash":"5f1e4d173e6ad54a4014c7b73b4b6202f54e0772","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/package.json","hash":"c61b194aac46b29e437b0ee2729d0c47d2478f6e","modified":1575127310421},{"_id":"source/about/index.md","hash":"b01a2955428cc6c1bc3e981586b84e4481520185","modified":1561825886649},{"_id":"source/categories/index.md","hash":"fe4bebea66d0ac9f7f2b961a0a55b5dbee2eae88","modified":1545840064000},{"_id":"source/_posts/7æ‹›è½»æ¾æå®š-JavaScript-å¤šè¡Œå­—ç¬¦ä¸²æ‹¼æ¥.md","hash":"c3627c09c7753685a67ee90d26cd1eb256a2ee42","modified":1575694773501},{"_id":"source/_posts/Async-await-æŸ¥æ¼è¡¥ç¼º.md","hash":"35b6958c59e46528e7a641e2f5a417efcf314249","modified":1575694398084},{"_id":"source/_posts/CentOS-6-x86-Node-js-MongoDB-Express-ç¯å¢ƒé…ç½®ç¬”è®°.md","hash":"0dd99e65f66f722d645a823f910551a567239c72","modified":1545840064000},{"_id":"source/_posts/Axios-ä½¿ç”¨å§¿åŠ¿æŒ‡å—.md","hash":"8097446b759763d79c8a15af0a71102957e017f6","modified":1575694398084},{"_id":"source/_posts/ES6-Promise-ç®€æ˜æŒ‡å—.md","hash":"1a5b115ff8db5054ba8170c4ac26bf0218ecd1c6","modified":1545840064000},{"_id":"source/_posts/Git-æ“ä½œè¯¦ç»†æ€»ç»“.md","hash":"67100f507fb33044881e49890bc80694e3c31bd1","modified":1545840064000},{"_id":"source/_posts/JavaScript-ä¸­çš„-this-ç”¨æ³•æ€»ç»“.md","hash":"9aac09ce6e26627426898d9b3039447495777be6","modified":1545840064000},{"_id":"source/_posts/Mongodb-å­¦ä¹ ç¬”è®°----å¢åˆ æ”¹æŸ¥.md","hash":"d24c15a319c41f0ad48cfcc9cd30c16d3c82c1c5","modified":1575694773834},{"_id":"source/_posts/Node.JS-å­¦ä¹ ç¬”è®°-[01]----å…¥é—¨.md","hash":"d582583c33d60bc88b5593bd46a7e52c88f430ea","modified":1575694773895},{"_id":"themes/hexo-theme-apollo/yarn.lock","hash":"22b28a0b73b68a2a49e9b9148bdc190fff0097e5","modified":1575127310426},{"_id":"source/_posts/Node.JS-å­¦ä¹ ç¬”è®°-[02]----åŒæ­¥å¼‚æ­¥.md","hash":"8c31f273a415cd4684d5cca07ae0a9d8fb62b466","modified":1575694774071},{"_id":"source/_posts/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1575695527025},{"_id":"source/_posts/Promise-æŸ¥æ¼è¡¥ç¼º.md","hash":"01f2ac9210e3cf1858ed2b2ff5c19daf0b31a387","modified":1575694774322},{"_id":"source/_posts/Node.JS-å­¦ä¹ ç¬”è®°-[04]----HTTP.md","hash":"7030203aed05fe83e4e6d52ded4e450283e55138","modified":1575694774172},{"_id":"source/_posts/Node.JS-å­¦ä¹ ç¬”è®°-[03]----Buffer-fs-path.md","hash":"e82c5de197792c6ee5d9eca5acd34b6f5af4d618","modified":1545840064000},{"_id":"source/_posts/Node.JS-å­¦ä¹ ç¬”è®°-[05]----Express.md","hash":"fb242cedc1e274832f244a5b5c04a364f64b8242","modified":1575694774226},{"_id":"source/_posts/ProxyChains-NG-ShadowSocks-å®ç°ç»ˆç«¯ä»£ç†.md","hash":"605995615e4e36dc1d62569dcfc6ff07eb0e4f3f","modified":1575696157267},{"_id":"source/_posts/React-ç»„ä»¶æ¨¡å¼.md","hash":"9b06a23532bd2b8d9e6d24aeafe12f4a7b04f11b","modified":1575694774371},{"_id":"source/_posts/Why-Immutable-Data.md","hash":"30335a9111ae9db150de8c1c7e13c864cac86371","modified":1575697526498},{"_id":"source/_posts/callã€applyã€bind-çš„åŒºåˆ«åŠåº”ç”¨.md","hash":"e043c224d23c7b99ad5a0561a408932693896ad1","modified":1575694773620},{"_id":"source/_posts/webpack4-å®šåˆ¶å‰ç«¯å¼€å‘ç¯å¢ƒ.md","hash":"7b8c8ce24cb97b20a718e4d4724fd99820c91bdc","modified":1575694775928},{"_id":"source/_posts/ä¸€æ®µç¥å¥‡çš„-CSS-è°ƒè¯•ä»£ç .md","hash":"aa8b751446268285200d374a147173802e1910df","modified":1575694775962},{"_id":"source/_posts/ä»£ç æ´ç™–å…»æˆæŒ‡å—.md","hash":"aa3eaf98d8320d2d07eaeba66f53dafa765ef8be","modified":1575694398094},{"_id":"source/_posts/ä»£ç é‡æ„.md","hash":"9dddb23435df44b9f28a1c65b0af5054567e4770","modified":1575694398094},{"_id":"source/_posts/å‰åç«¯é‰´æƒæ–¹å¼æ€»ç»“.md","hash":"9f88e5835b69350ecb35a82a2f8c0cb1fe43fcfc","modified":1575694398095},{"_id":"source/_posts/å¦‚ä½•åœ¨-Git-ä¸­ä½¿ç”¨æ’¤æ¶ˆæ“ä½œ.md","hash":"49d28bf80507cc51b3e352fb7da5b67c2f3b3701","modified":1545840064000},{"_id":"source/_posts/å¦‚ä½•é¿å…-async-await-åœ°ç‹±.md","hash":"23f232f0345ceec631edd80a681a690c6a7e3bbb","modified":1545840064000},{"_id":"source/_posts/æˆ‘çš„ä¸»ç®¡ç»™æˆ‘çš„ä¸€äº›å»ºè®®.md","hash":"7667fd4542a55a0f50557fe098e69bc43fe73e0f","modified":1575694776112},{"_id":"source/_posts/æŒç»­é›†æˆ-CI-åŠç®€å•å®è·µ.md","hash":"bd5c47acf28494bcb96241dfbddb70ef9f79a7e1","modified":1545840064000},{"_id":"source/_posts/æµè§ˆå™¨è·¨åŸŸè¯·æ±‚æ•°æ®æ€»ç»“.md","hash":"d7cc336bcbbb988423500c2e429622492e69b826","modified":1545840064000},{"_id":"source/_posts/ç»™å°ç™½è¯»çš„-WEB-æ‰˜ç®¡æœåŠ¡è¿›åŒ–å².md","hash":"284a23ba626210ebc1e4ae843db2718dbc2da764","modified":1575694398096},{"_id":"source/docs/index.md","hash":"0c785bf663a4f65c66bb1c01e1103b0ab3fe071d","modified":1548170120357},{"_id":"themes/hexo-theme-apollo/doc/doc-zh.md","hash":"e6151b25d3abba657e0c57aab98b95275cfd9355","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/doc/doc-en.md","hash":"fc0a961b1fe5bf40c0347df28eab4205a0fae316","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/languages/en.yml","hash":"ec237cfc9ae0cc26a382a237ae1ed7516b83926a","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/layout/archive.jade","hash":"09ddf1c05d13a8b98e6d704afaa2291d79ea7ec3","modified":1546018063000},{"_id":"themes/hexo-theme-apollo/languages/zh-cn.yml","hash":"70605654c5effd2d85848b2e89d0be4c8f307f49","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/layout/index.jade","hash":"2eb55941756a818ac892b278c417513e9f2a3c2f","modified":1546018066000},{"_id":"themes/hexo-theme-apollo/layout/post.jade","hash":"3e723074d0fbe3d12b30da0453edf11dda5a55b2","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/source/favicon.png","hash":"5384fc67ce416c0748de077e00cc72f1f51428ea","modified":1561825886649},{"_id":"themes/hexo-theme-apollo/source/manifest.json","hash":"48662c18b7af76f2eb75d55bc47a466be6689354","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/layout/mixins/post.jade","hash":"f9d1cb8830bd7100ee3db730e30fc5d355b8c638","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/layout/mixins/paginator.jade","hash":"1b8863711e214fed8f716977833a1932e94798c3","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/layout/partial/copyright.jade","hash":"df74de116edf92d00f3a33914dc8f82b45bcc9ab","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/layout/partial/comment.jade","hash":"a04077365171c4cef60cf518e0c8d0ab2635c576","modified":1575127310415},{"_id":"themes/hexo-theme-apollo/layout/partial/head.jade","hash":"ec415e0ea6c8cda2d26101dc86758c8a72d705e7","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/layout/partial/layout.jade","hash":"5e388a024616e92305e31ce086e6f2b8adbcf773","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/layout/partial/nav.jade","hash":"cbe1af51107d330240859ce26ce54e57a47f906c","modified":1575127310416},{"_id":"themes/hexo-theme-apollo/layout/partial/scripts.jade","hash":"8fa6432eb4c174f15b631d61d7d634eccbca2d94","modified":1575127310416},{"_id":"themes/hexo-theme-apollo/layout/partial/search.jade","hash":"2c5733fa0d27f5546a64732c925aa71af8be84e6","modified":1575127310418},{"_id":"themes/hexo-theme-apollo/source/css/apollo.css","hash":"d1c1e8300650c1d830bec0543bc2170a43868b3e","modified":1575127310424},{"_id":"themes/hexo-theme-apollo/source/font/sourcesanspro.woff","hash":"a6722c9b6439b7a020a9be3d3178970757a9265c","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/source/font/sourcesanspro.woff2","hash":"da65f527a8da65d5eb6721626d28cfdb46ab104a","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/source/img/apple-launch-750x1334.png","hash":"6f75a0339a57e48cd8202ef3cabcd76477a1c7d0","modified":1561825886650},{"_id":"themes/hexo-theme-apollo/source/img/webAppIcon-256x256.png","hash":"5250aaf69dab950d86361a4ee83127f8bdc643cc","modified":1561825886651},{"_id":"themes/hexo-theme-apollo/source/img/webAppIcon-256x256.png.bak","hash":"d665a7de84f94a8f59e4ab0a7a01d2038f200601","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/source/img/webAppIcon-512x512.png","hash":"cad088796287d7fe2b6d7dd4c96700789adad1e9","modified":1561825886651},{"_id":"themes/hexo-theme-apollo/source/js/main.js","hash":"b00ccadd912a2ab3bc89f6371da66740376a682f","modified":1548173391291},{"_id":"themes/hexo-theme-apollo/source/scss/apollo.scss","hash":"a5950e209c2aaefab05f1f57ee96ec44ff49d126","modified":1575127310425},{"_id":"themes/hexo-theme-apollo/source/js/template-web.min.js","hash":"315aedb8fac14e2bcc9464c609fe3ad8a03cbe20","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/source/js/algoliasearch.min.js","hash":"5244731131a647d230c1d80731171191adc7e2a8","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/archive-post-list.scss","hash":"8c982e6ffcdc0200c622136c56edcb5fe5118e64","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/base.scss","hash":"a0f16e6b8c66c34686eef29d2b784f6f7cb94a93","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/copyright.scss","hash":"a010baa6867800674cd53e20e608b2a256727ae5","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/dakmod-override.scss","hash":"9ebb68221d525cb18445e66819be9c6e27e0b0a7","modified":1575127310424},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/footer.scss","hash":"72ca7067009770a07909efe76d02c6d438f4f211","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/header.scss","hash":"e66e1056134c9c314300cf91ef0ec20791714a98","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/home-post-list.scss","hash":"d85ff34b9c1faf0d0e5baa7eae19724911a1631e","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/git-comment.scss","hash":"3d0ef57d45d2f09a04524db7d1dd950ee754fd34","modified":1575697548282},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/mq.scss","hash":"4bb6b91e821d75f751271facc53cf22b13640d1c","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/normalize.scss","hash":"623e8d1e7aa525fe207378cbe3206314ed0c1598","modified":1575698105815},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/search.scss","hash":"0ee6c1065eac784e68edd0af9a5d2ebb177ca46b","modified":1545840064000},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/toc.scss","hash":"eb84cc2b740e629492da245e226f9e584522e981","modified":1546312549099},{"_id":"themes/hexo-theme-apollo/source/scss/_partial/post.scss","hash":"af3a412f9fac801fbcc830e19fafc0afca8ecd92","modified":1545840064000}],"Category":[],"Data":[],"Page":[{"title":"About Me","date":"2018-04-30T03:14:00.000Z","comments":0,"_content":"\n```js\nlet Me = {\n  Name: 'Willard Wong',\n  Gender: 'male',\n  Job: 'Front-end Developer',\n  Hobbies: ['movie', 'reading', 'photography', 'code'],\n  Email: 'ifyour@outlook.com',\n  GitHub: 'github.com/ifyour',\n  Twitter: '@johnwmm',\n  Instagram: '@wmmjohn',\n};\n```\n\n> _å¿µå¿µä¸å¿˜, å¿…æœ‰å›å“!_\n","source":"about/index.md","raw":"---\ntitle: About Me\ndate: 2018-04-30 11:14:00\ncomments: false\n---\n\n```js\nlet Me = {\n  Name: 'Willard Wong',\n  Gender: 'male',\n  Job: 'Front-end Developer',\n  Hobbies: ['movie', 'reading', 'photography', 'code'],\n  Email: 'ifyour@outlook.com',\n  GitHub: 'github.com/ifyour',\n  Twitter: '@johnwmm',\n  Instagram: '@wmmjohn',\n};\n```\n\n> _å¿µå¿µä¸å¿˜, å¿…æœ‰å›å“!_\n","updated":"2019-06-29T16:31:26.649Z","path":"about/index.html","layout":"page","_id":"ck3v60jt00000r9q9ucjfcm4w","content":"<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> Me = &#123;</span><br><span class=\"line\">  Name: <span class=\"string\">'Willard Wong'</span>,</span><br><span class=\"line\">  Gender: <span class=\"string\">'male'</span>,</span><br><span class=\"line\">  Job: <span class=\"string\">'Front-end Developer'</span>,</span><br><span class=\"line\">  Hobbies: [<span class=\"string\">'movie'</span>, <span class=\"string\">'reading'</span>, <span class=\"string\">'photography'</span>, <span class=\"string\">'code'</span>],</span><br><span class=\"line\">  Email: <span class=\"string\">'ifyour@outlook.com'</span>,</span><br><span class=\"line\">  GitHub: <span class=\"string\">'github.com/ifyour'</span>,</span><br><span class=\"line\">  Twitter: <span class=\"string\">'@johnwmm'</span>,</span><br><span class=\"line\">  Instagram: <span class=\"string\">'@wmmjohn'</span>,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><em>å¿µå¿µä¸å¿˜, å¿…æœ‰å›å“!</em></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> Me = &#123;</span><br><span class=\"line\">  Name: <span class=\"string\">'Willard Wong'</span>,</span><br><span class=\"line\">  Gender: <span class=\"string\">'male'</span>,</span><br><span class=\"line\">  Job: <span class=\"string\">'Front-end Developer'</span>,</span><br><span class=\"line\">  Hobbies: [<span class=\"string\">'movie'</span>, <span class=\"string\">'reading'</span>, <span class=\"string\">'photography'</span>, <span class=\"string\">'code'</span>],</span><br><span class=\"line\">  Email: <span class=\"string\">'ifyour@outlook.com'</span>,</span><br><span class=\"line\">  GitHub: <span class=\"string\">'github.com/ifyour'</span>,</span><br><span class=\"line\">  Twitter: <span class=\"string\">'@johnwmm'</span>,</span><br><span class=\"line\">  Instagram: <span class=\"string\">'@wmmjohn'</span>,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><em>å¿µå¿µä¸å¿˜, å¿…æœ‰å›å“!</em></p>\n</blockquote>\n"},{"title":"å·¥å…·åŠæ–‡æ¡£","date":"2018-05-06T03:56:00.000Z","comments":1,"_content":"\n### Interesting tools\n\n- [Rico's cheatsheets](https://devhints.io/) - è®°å¿†å°æŠ„, é•¿è¯çŸ­è¯´å„ç§å¼€å‘æ–‡æ¡£\n- [Carbon](https://carbon.now.sh/) - å¸¦æ ·å¼åˆ†äº«ä»£ç \n- [CodePen](https://codepen.io/pen/) - åœ¨çº¿æµ‹è¯•å‰ç«¯ä»£ç \n- [CodeSandbox](https://codesandbox.io/s/) - ä»£ç æ²™ç›’ï¼Œå¯ä»¥åˆ†äº«å¸¦æœ‰ä¾èµ–çš„å‰ç«¯é¡¹ç›®\n- [Prettier](https://prettier.io/playground/) - åœ¨çº¿æ ¼å¼åŒ– JavaScript ä»£ç \n- [Text-formatter](https://text-formatter.herokuapp.com/) - æ ¼å¼åŒ–æ–‡æœ¬, ä¸­è‹±æ–‡ä¹‹é—´ç•™ç©ºæ ¼ä»¥åŠè‹±æ–‡æ ‡ç‚¹\n- [DevDocs](https://devdocs.io/) - ä¸€ç«™å¼å¼€å‘æ–‡æ¡£é›†åˆ\n- [Grammarly](https://app.grammarly.com/) - è‹±æ–‡è¯­æ³•é”™è¯¯æ£€æŸ¥\n- [JSONPlaceholder](http://jsonplaceholder.typicode.com/) - RESTful API å‡æ•°æ®æ¨¡æ‹Ÿ\n- [JSON2YAML](https://www.json2yaml.com/) - JSON å’Œ YAML äº’è½¬\n- [JSON Parser](http://json.parser.online.fr/beta/) - JSON æ ¼å¼åŒ–\n- [RegExr](https://regexr.com/) - åœ¨çº¿æ­£åˆ™æµ‹è¯•åŠè°ƒè¯•\n- [Regulex](https://jex.im/regulex/) - æ­£åˆ™è¡¨è¾¾å¯è§†åŒ–, å¿«é€Ÿç†è§£æ­£åˆ™è¡¨è¾¾å¼\n- [CSSMatic](https://www.cssmatic.com/) - ç”Ÿæˆé•œåƒæ¸å˜, ç›’å­é˜´å½±ç­‰\n- [CSSÂ Gradient](https://cssgradient.io/) - ä¸“ä¸šç”Ÿæˆé•œåƒæ¸å˜ã€çº¿æ€§æ¸å˜\n- [SassMeister](https://www.sassmeister.com/) - Sass æ¼”ç»ƒåœº, å¯ä»¥è¾“å‡º AutoPrefixer çš„ç»“æœ\n- [KeyframesApp](https://keyframes.app/) - CSS3 åŠ¨ç”»å…³é”®å¸§ç”Ÿæˆå·¥å…·\n- [CSS Sprites Generator](https://www.toptal.com/developers/css/sprite-generator) - CSS ç²¾çµç”Ÿæˆå·¥å…·\n- [JSNice](http://www.jsnice.org/) - åç¼–è¯‘å·²å‹ç¼©çš„ JS ä»£ç , ç†è§£å˜é‡å«ä¹‰\n- [Love2.io](https://love2.io/) - å¼€æºæŠ€æœ¯æ–‡æ¡£åˆ†äº«å¹³å°\n- [WakaTime](https://wakatime.com/) - è®°å½•æ¯å¤©çš„ç¼–ç æƒ…å†µ, ä½¿ç”¨ä»€ä¹ˆè¯­è¨€åŠç»Ÿè®¡æ—¶é•¿\n- [Best of JavaScript](https://bestofjs.org/) - æœ€æµè¡Œçš„å‰ç«¯å¼€æºé¡¹ç›®æ¸…å•\n- [è“æ¹–](https://lanhuapp.com/) - é«˜æ•ˆçš„äº§å“è®¾è®¡åä½œå¹³å°, æ ‡æ³¨åˆ‡å›¾å¾ˆå¥½ç”¨\n\n### Docs\n\n- **React**\n\n  - [React ä¸­æ–‡æ–‡æ¡£](https://doc.react-china.org/docs/hello-world.html)\n  - [Redux ä¸­æ–‡æ–‡æ¡£](https://www.kancloud.cn/allanyu/redux-in-chinese/82399)\n  - [React-saga ä¸­æ–‡æ–‡æ¡£](http://leonshi.com/redux-saga-in-chinese/docs/api/index.html)\n  - [React-router ä¸­æ–‡æ–‡æ¡£](https://react-guide.github.io/react-router-cn)\n  - [Mobx ä¸­æ–‡æ–‡æ¡£](https://suprise.gitbooks.io/mobx-cn/content/fp.html)\n  - [Ant-design æ–‡æ¡£](https://ant.design/docs/react/introduce-cn)\n  - [React-Native æ–‡æ¡£](http://reactnative.cn/docs/0.50/getting-started.html)\n\n- **Vue.js**\n\n  - [Vue.js å®˜ç½‘](https://cn.vuejs.org/v2/guide/)\n  - [Vue-Router](https://router.vuejs.org/zh-cn/)\n  - [Vuex](https://vuex.vuejs.org/zh-cn/)\n  - [Vue-SSR æœåŠ¡å™¨ç«¯æ¸²æŸ“](https://ssr.vuejs.org/zh/)\n  - [Vue-NUXT](https://zh.nuxtjs.org/guide/installation)\n\n- **Node.js**\n\n  - [Node.js API](http://nodejs.cn/api/)\n  - [Express å®˜ç½‘](http://www.expressjs.com.cn/guide/routing.html)\n\n- **Electron**\n\n  - [Electron å®˜æ–¹æ–‡æ¡£](https://electronjs.org/docs/)\n\n- **WeChat**\n\n  - [å°ç¨‹åºå®˜æ–¹æ–‡æ¡£](https://mp.weixin.qq.com/debug/wxadoc/dev/index.html?t=201832)\n\n- **TypeScript**\n\n  - [TypeScript ä¸­æ–‡ç½‘](https://www.tslang.cn/index.html)\n\n- **Vanilla JS**\n\n  - [JavaScript åŸºç¡€è¿›é˜¶ç³»åˆ—](https://segmentfault.com/a/1190000012646488)\n  - [æ·±å…¥ç†è§£ JS å¼‚æ­¥](https://github.com/wangfupeng1988/js-async-tutorial)\n  - [æ·±å…¥ç†è§£ JS (Tom)](https://www.cnblogs.com/tomxu/archive/2011/12/15/2288411.html)\n\n- **Webpack**\n\n  - [Webpack 3.x](http://www.css88.com/doc/webpack/)\n  - [Webpack 2.x](http://www.css88.com/doc/webpack2/api/loaders/#version)\n\n- **Python**\n\n  - [Python 3 æ•™ç¨‹ (å»–é›ªå³°)](https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000)\n  - [Django ä¸­æ–‡æ–‡æ¡£](https://docs.djangoproject.com/zh-hans/2.0/)\n\n- **More...**\n  - [å°è®°ä¸­æ–‡](https://docschina.org/)\n\n### One more thing\n\næ¬¢è¿åœ¨ä¸‹é¢ç•™è¨€æ¿åˆ†äº«ä½ è§‰å¾—æœ‰è¶£çš„æ‰€æœ‰ä¸œè¥¿, æœ¬æ–‡[æºä»£ç åœ°å€](https://raw.githubusercontent.com/ifyour/ifyour.github.io/src/source/docs/index.md). ğŸ˜\n","source":"docs/index.md","raw":"---\ntitle: å·¥å…·åŠæ–‡æ¡£\ndate: 2018-05-06 11:56:00\ncomments: true\n---\n\n### Interesting tools\n\n- [Rico's cheatsheets](https://devhints.io/) - è®°å¿†å°æŠ„, é•¿è¯çŸ­è¯´å„ç§å¼€å‘æ–‡æ¡£\n- [Carbon](https://carbon.now.sh/) - å¸¦æ ·å¼åˆ†äº«ä»£ç \n- [CodePen](https://codepen.io/pen/) - åœ¨çº¿æµ‹è¯•å‰ç«¯ä»£ç \n- [CodeSandbox](https://codesandbox.io/s/) - ä»£ç æ²™ç›’ï¼Œå¯ä»¥åˆ†äº«å¸¦æœ‰ä¾èµ–çš„å‰ç«¯é¡¹ç›®\n- [Prettier](https://prettier.io/playground/) - åœ¨çº¿æ ¼å¼åŒ– JavaScript ä»£ç \n- [Text-formatter](https://text-formatter.herokuapp.com/) - æ ¼å¼åŒ–æ–‡æœ¬, ä¸­è‹±æ–‡ä¹‹é—´ç•™ç©ºæ ¼ä»¥åŠè‹±æ–‡æ ‡ç‚¹\n- [DevDocs](https://devdocs.io/) - ä¸€ç«™å¼å¼€å‘æ–‡æ¡£é›†åˆ\n- [Grammarly](https://app.grammarly.com/) - è‹±æ–‡è¯­æ³•é”™è¯¯æ£€æŸ¥\n- [JSONPlaceholder](http://jsonplaceholder.typicode.com/) - RESTful API å‡æ•°æ®æ¨¡æ‹Ÿ\n- [JSON2YAML](https://www.json2yaml.com/) - JSON å’Œ YAML äº’è½¬\n- [JSON Parser](http://json.parser.online.fr/beta/) - JSON æ ¼å¼åŒ–\n- [RegExr](https://regexr.com/) - åœ¨çº¿æ­£åˆ™æµ‹è¯•åŠè°ƒè¯•\n- [Regulex](https://jex.im/regulex/) - æ­£åˆ™è¡¨è¾¾å¯è§†åŒ–, å¿«é€Ÿç†è§£æ­£åˆ™è¡¨è¾¾å¼\n- [CSSMatic](https://www.cssmatic.com/) - ç”Ÿæˆé•œåƒæ¸å˜, ç›’å­é˜´å½±ç­‰\n- [CSSÂ Gradient](https://cssgradient.io/) - ä¸“ä¸šç”Ÿæˆé•œåƒæ¸å˜ã€çº¿æ€§æ¸å˜\n- [SassMeister](https://www.sassmeister.com/) - Sass æ¼”ç»ƒåœº, å¯ä»¥è¾“å‡º AutoPrefixer çš„ç»“æœ\n- [KeyframesApp](https://keyframes.app/) - CSS3 åŠ¨ç”»å…³é”®å¸§ç”Ÿæˆå·¥å…·\n- [CSS Sprites Generator](https://www.toptal.com/developers/css/sprite-generator) - CSS ç²¾çµç”Ÿæˆå·¥å…·\n- [JSNice](http://www.jsnice.org/) - åç¼–è¯‘å·²å‹ç¼©çš„ JS ä»£ç , ç†è§£å˜é‡å«ä¹‰\n- [Love2.io](https://love2.io/) - å¼€æºæŠ€æœ¯æ–‡æ¡£åˆ†äº«å¹³å°\n- [WakaTime](https://wakatime.com/) - è®°å½•æ¯å¤©çš„ç¼–ç æƒ…å†µ, ä½¿ç”¨ä»€ä¹ˆè¯­è¨€åŠç»Ÿè®¡æ—¶é•¿\n- [Best of JavaScript](https://bestofjs.org/) - æœ€æµè¡Œçš„å‰ç«¯å¼€æºé¡¹ç›®æ¸…å•\n- [è“æ¹–](https://lanhuapp.com/) - é«˜æ•ˆçš„äº§å“è®¾è®¡åä½œå¹³å°, æ ‡æ³¨åˆ‡å›¾å¾ˆå¥½ç”¨\n\n### Docs\n\n- **React**\n\n  - [React ä¸­æ–‡æ–‡æ¡£](https://doc.react-china.org/docs/hello-world.html)\n  - [Redux ä¸­æ–‡æ–‡æ¡£](https://www.kancloud.cn/allanyu/redux-in-chinese/82399)\n  - [React-saga ä¸­æ–‡æ–‡æ¡£](http://leonshi.com/redux-saga-in-chinese/docs/api/index.html)\n  - [React-router ä¸­æ–‡æ–‡æ¡£](https://react-guide.github.io/react-router-cn)\n  - [Mobx ä¸­æ–‡æ–‡æ¡£](https://suprise.gitbooks.io/mobx-cn/content/fp.html)\n  - [Ant-design æ–‡æ¡£](https://ant.design/docs/react/introduce-cn)\n  - [React-Native æ–‡æ¡£](http://reactnative.cn/docs/0.50/getting-started.html)\n\n- **Vue.js**\n\n  - [Vue.js å®˜ç½‘](https://cn.vuejs.org/v2/guide/)\n  - [Vue-Router](https://router.vuejs.org/zh-cn/)\n  - [Vuex](https://vuex.vuejs.org/zh-cn/)\n  - [Vue-SSR æœåŠ¡å™¨ç«¯æ¸²æŸ“](https://ssr.vuejs.org/zh/)\n  - [Vue-NUXT](https://zh.nuxtjs.org/guide/installation)\n\n- **Node.js**\n\n  - [Node.js API](http://nodejs.cn/api/)\n  - [Express å®˜ç½‘](http://www.expressjs.com.cn/guide/routing.html)\n\n- **Electron**\n\n  - [Electron å®˜æ–¹æ–‡æ¡£](https://electronjs.org/docs/)\n\n- **WeChat**\n\n  - [å°ç¨‹åºå®˜æ–¹æ–‡æ¡£](https://mp.weixin.qq.com/debug/wxadoc/dev/index.html?t=201832)\n\n- **TypeScript**\n\n  - [TypeScript ä¸­æ–‡ç½‘](https://www.tslang.cn/index.html)\n\n- **Vanilla JS**\n\n  - [JavaScript åŸºç¡€è¿›é˜¶ç³»åˆ—](https://segmentfault.com/a/1190000012646488)\n  - [æ·±å…¥ç†è§£ JS å¼‚æ­¥](https://github.com/wangfupeng1988/js-async-tutorial)\n  - [æ·±å…¥ç†è§£ JS (Tom)](https://www.cnblogs.com/tomxu/archive/2011/12/15/2288411.html)\n\n- **Webpack**\n\n  - [Webpack 3.x](http://www.css88.com/doc/webpack/)\n  - [Webpack 2.x](http://www.css88.com/doc/webpack2/api/loaders/#version)\n\n- **Python**\n\n  - [Python 3 æ•™ç¨‹ (å»–é›ªå³°)](https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000)\n  - [Django ä¸­æ–‡æ–‡æ¡£](https://docs.djangoproject.com/zh-hans/2.0/)\n\n- **More...**\n  - [å°è®°ä¸­æ–‡](https://docschina.org/)\n\n### One more thing\n\næ¬¢è¿åœ¨ä¸‹é¢ç•™è¨€æ¿åˆ†äº«ä½ è§‰å¾—æœ‰è¶£çš„æ‰€æœ‰ä¸œè¥¿, æœ¬æ–‡[æºä»£ç åœ°å€](https://raw.githubusercontent.com/ifyour/ifyour.github.io/src/source/docs/index.md). ğŸ˜\n","updated":"2019-01-22T15:15:20.357Z","path":"docs/index.html","layout":"page","_id":"ck3v60jt50002r9q9qr3v4ly1","content":"<h3 id=\"Interesting-tools\"><a href=\"#Interesting-tools\" class=\"headerlink\" title=\"Interesting tools\"></a>Interesting tools</h3><ul>\n<li><a href=\"https://devhints.io/\" target=\"_blank\" rel=\"noopener\">Ricoâ€™s cheatsheets</a> - è®°å¿†å°æŠ„, é•¿è¯çŸ­è¯´å„ç§å¼€å‘æ–‡æ¡£</li>\n<li><a href=\"https://carbon.now.sh/\" target=\"_blank\" rel=\"noopener\">Carbon</a> - å¸¦æ ·å¼åˆ†äº«ä»£ç </li>\n<li><a href=\"https://codepen.io/pen/\" target=\"_blank\" rel=\"noopener\">CodePen</a> - åœ¨çº¿æµ‹è¯•å‰ç«¯ä»£ç </li>\n<li><a href=\"https://codesandbox.io/s/\" target=\"_blank\" rel=\"noopener\">CodeSandbox</a> - ä»£ç æ²™ç›’ï¼Œå¯ä»¥åˆ†äº«å¸¦æœ‰ä¾èµ–çš„å‰ç«¯é¡¹ç›®</li>\n<li><a href=\"https://prettier.io/playground/\" target=\"_blank\" rel=\"noopener\">Prettier</a> - åœ¨çº¿æ ¼å¼åŒ– JavaScript ä»£ç </li>\n<li><a href=\"https://text-formatter.herokuapp.com/\" target=\"_blank\" rel=\"noopener\">Text-formatter</a> - æ ¼å¼åŒ–æ–‡æœ¬, ä¸­è‹±æ–‡ä¹‹é—´ç•™ç©ºæ ¼ä»¥åŠè‹±æ–‡æ ‡ç‚¹</li>\n<li><a href=\"https://devdocs.io/\" target=\"_blank\" rel=\"noopener\">DevDocs</a> - ä¸€ç«™å¼å¼€å‘æ–‡æ¡£é›†åˆ</li>\n<li><a href=\"https://app.grammarly.com/\" target=\"_blank\" rel=\"noopener\">Grammarly</a> - è‹±æ–‡è¯­æ³•é”™è¯¯æ£€æŸ¥</li>\n<li><a href=\"http://jsonplaceholder.typicode.com/\" target=\"_blank\" rel=\"noopener\">JSONPlaceholder</a> - RESTful API å‡æ•°æ®æ¨¡æ‹Ÿ</li>\n<li><a href=\"https://www.json2yaml.com/\" target=\"_blank\" rel=\"noopener\">JSON2YAML</a> - JSON å’Œ YAML äº’è½¬</li>\n<li><a href=\"http://json.parser.online.fr/beta/\" target=\"_blank\" rel=\"noopener\">JSON Parser</a> - JSON æ ¼å¼åŒ–</li>\n<li><a href=\"https://regexr.com/\" target=\"_blank\" rel=\"noopener\">RegExr</a> - åœ¨çº¿æ­£åˆ™æµ‹è¯•åŠè°ƒè¯•</li>\n<li><a href=\"https://jex.im/regulex/\" target=\"_blank\" rel=\"noopener\">Regulex</a> - æ­£åˆ™è¡¨è¾¾å¯è§†åŒ–, å¿«é€Ÿç†è§£æ­£åˆ™è¡¨è¾¾å¼</li>\n<li><a href=\"https://www.cssmatic.com/\" target=\"_blank\" rel=\"noopener\">CSSMatic</a> - ç”Ÿæˆé•œåƒæ¸å˜, ç›’å­é˜´å½±ç­‰</li>\n<li><a href=\"https://cssgradient.io/\" target=\"_blank\" rel=\"noopener\">CSS Gradient</a> - ä¸“ä¸šç”Ÿæˆé•œåƒæ¸å˜ã€çº¿æ€§æ¸å˜</li>\n<li><a href=\"https://www.sassmeister.com/\" target=\"_blank\" rel=\"noopener\">SassMeister</a> - Sass æ¼”ç»ƒåœº, å¯ä»¥è¾“å‡º AutoPrefixer çš„ç»“æœ</li>\n<li><a href=\"https://keyframes.app/\" target=\"_blank\" rel=\"noopener\">KeyframesApp</a> - CSS3 åŠ¨ç”»å…³é”®å¸§ç”Ÿæˆå·¥å…·</li>\n<li><a href=\"https://www.toptal.com/developers/css/sprite-generator\" target=\"_blank\" rel=\"noopener\">CSS Sprites Generator</a> - CSS ç²¾çµç”Ÿæˆå·¥å…·</li>\n<li><a href=\"http://www.jsnice.org/\" target=\"_blank\" rel=\"noopener\">JSNice</a> - åç¼–è¯‘å·²å‹ç¼©çš„ JS ä»£ç , ç†è§£å˜é‡å«ä¹‰</li>\n<li><a href=\"https://love2.io/\" target=\"_blank\" rel=\"noopener\">Love2.io</a> - å¼€æºæŠ€æœ¯æ–‡æ¡£åˆ†äº«å¹³å°</li>\n<li><a href=\"https://wakatime.com/\" target=\"_blank\" rel=\"noopener\">WakaTime</a> - è®°å½•æ¯å¤©çš„ç¼–ç æƒ…å†µ, ä½¿ç”¨ä»€ä¹ˆè¯­è¨€åŠç»Ÿè®¡æ—¶é•¿</li>\n<li><a href=\"https://bestofjs.org/\" target=\"_blank\" rel=\"noopener\">Best of JavaScript</a> - æœ€æµè¡Œçš„å‰ç«¯å¼€æºé¡¹ç›®æ¸…å•</li>\n<li><a href=\"https://lanhuapp.com/\" target=\"_blank\" rel=\"noopener\">è“æ¹–</a> - é«˜æ•ˆçš„äº§å“è®¾è®¡åä½œå¹³å°, æ ‡æ³¨åˆ‡å›¾å¾ˆå¥½ç”¨</li>\n</ul>\n<h3 id=\"Docs\"><a href=\"#Docs\" class=\"headerlink\" title=\"Docs\"></a>Docs</h3><ul>\n<li><p><strong>React</strong></p>\n<ul>\n<li><a href=\"https://doc.react-china.org/docs/hello-world.html\" target=\"_blank\" rel=\"noopener\">React ä¸­æ–‡æ–‡æ¡£</a></li>\n<li><a href=\"https://www.kancloud.cn/allanyu/redux-in-chinese/82399\" target=\"_blank\" rel=\"noopener\">Redux ä¸­æ–‡æ–‡æ¡£</a></li>\n<li><a href=\"http://leonshi.com/redux-saga-in-chinese/docs/api/index.html\" target=\"_blank\" rel=\"noopener\">React-saga ä¸­æ–‡æ–‡æ¡£</a></li>\n<li><a href=\"https://react-guide.github.io/react-router-cn\" target=\"_blank\" rel=\"noopener\">React-router ä¸­æ–‡æ–‡æ¡£</a></li>\n<li><a href=\"https://suprise.gitbooks.io/mobx-cn/content/fp.html\" target=\"_blank\" rel=\"noopener\">Mobx ä¸­æ–‡æ–‡æ¡£</a></li>\n<li><a href=\"https://ant.design/docs/react/introduce-cn\" target=\"_blank\" rel=\"noopener\">Ant-design æ–‡æ¡£</a></li>\n<li><a href=\"http://reactnative.cn/docs/0.50/getting-started.html\" target=\"_blank\" rel=\"noopener\">React-Native æ–‡æ¡£</a></li>\n</ul>\n</li>\n<li><p><strong>Vue.js</strong></p>\n<ul>\n<li><a href=\"https://cn.vuejs.org/v2/guide/\" target=\"_blank\" rel=\"noopener\">Vue.js å®˜ç½‘</a></li>\n<li><a href=\"https://router.vuejs.org/zh-cn/\" target=\"_blank\" rel=\"noopener\">Vue-Router</a></li>\n<li><a href=\"https://vuex.vuejs.org/zh-cn/\" target=\"_blank\" rel=\"noopener\">Vuex</a></li>\n<li><a href=\"https://ssr.vuejs.org/zh/\" target=\"_blank\" rel=\"noopener\">Vue-SSR æœåŠ¡å™¨ç«¯æ¸²æŸ“</a></li>\n<li><a href=\"https://zh.nuxtjs.org/guide/installation\" target=\"_blank\" rel=\"noopener\">Vue-NUXT</a></li>\n</ul>\n</li>\n<li><p><strong>Node.js</strong></p>\n<ul>\n<li><a href=\"http://nodejs.cn/api/\" target=\"_blank\" rel=\"noopener\">Node.js API</a></li>\n<li><a href=\"http://www.expressjs.com.cn/guide/routing.html\" target=\"_blank\" rel=\"noopener\">Express å®˜ç½‘</a></li>\n</ul>\n</li>\n<li><p><strong>Electron</strong></p>\n<ul>\n<li><a href=\"https://electronjs.org/docs/\" target=\"_blank\" rel=\"noopener\">Electron å®˜æ–¹æ–‡æ¡£</a></li>\n</ul>\n</li>\n<li><p><strong>WeChat</strong></p>\n<ul>\n<li><a href=\"https://mp.weixin.qq.com/debug/wxadoc/dev/index.html?t=201832\" target=\"_blank\" rel=\"noopener\">å°ç¨‹åºå®˜æ–¹æ–‡æ¡£</a></li>\n</ul>\n</li>\n<li><p><strong>TypeScript</strong></p>\n<ul>\n<li><a href=\"https://www.tslang.cn/index.html\" target=\"_blank\" rel=\"noopener\">TypeScript ä¸­æ–‡ç½‘</a></li>\n</ul>\n</li>\n<li><p><strong>Vanilla JS</strong></p>\n<ul>\n<li><a href=\"https://segmentfault.com/a/1190000012646488\" target=\"_blank\" rel=\"noopener\">JavaScript åŸºç¡€è¿›é˜¶ç³»åˆ—</a></li>\n<li><a href=\"https://github.com/wangfupeng1988/js-async-tutorial\" target=\"_blank\" rel=\"noopener\">æ·±å…¥ç†è§£ JS å¼‚æ­¥</a></li>\n<li><a href=\"https://www.cnblogs.com/tomxu/archive/2011/12/15/2288411.html\" target=\"_blank\" rel=\"noopener\">æ·±å…¥ç†è§£ JS (Tom)</a></li>\n</ul>\n</li>\n<li><p><strong>Webpack</strong></p>\n<ul>\n<li><a href=\"http://www.css88.com/doc/webpack/\" target=\"_blank\" rel=\"noopener\">Webpack 3.x</a></li>\n<li><a href=\"http://www.css88.com/doc/webpack2/api/loaders/#version\" target=\"_blank\" rel=\"noopener\">Webpack 2.x</a></li>\n</ul>\n</li>\n<li><p><strong>Python</strong></p>\n<ul>\n<li><a href=\"https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000\" target=\"_blank\" rel=\"noopener\">Python 3 æ•™ç¨‹ (å»–é›ªå³°)</a></li>\n<li><a href=\"https://docs.djangoproject.com/zh-hans/2.0/\" target=\"_blank\" rel=\"noopener\">Django ä¸­æ–‡æ–‡æ¡£</a></li>\n</ul>\n</li>\n<li><p><strong>Moreâ€¦</strong></p>\n<ul>\n<li><a href=\"https://docschina.org/\" target=\"_blank\" rel=\"noopener\">å°è®°ä¸­æ–‡</a></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"One-more-thing\"><a href=\"#One-more-thing\" class=\"headerlink\" title=\"One more thing\"></a>One more thing</h3><p>æ¬¢è¿åœ¨ä¸‹é¢ç•™è¨€æ¿åˆ†äº«ä½ è§‰å¾—æœ‰è¶£çš„æ‰€æœ‰ä¸œè¥¿, æœ¬æ–‡<a href=\"https://raw.githubusercontent.com/ifyour/ifyour.github.io/src/source/docs/index.md\" target=\"_blank\" rel=\"noopener\">æºä»£ç åœ°å€</a>. ğŸ˜</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"Interesting-tools\"><a href=\"#Interesting-tools\" class=\"headerlink\" title=\"Interesting tools\"></a>Interesting tools</h3><ul>\n<li><a href=\"https://devhints.io/\" target=\"_blank\" rel=\"noopener\">Ricoâ€™s cheatsheets</a> - è®°å¿†å°æŠ„, é•¿è¯çŸ­è¯´å„ç§å¼€å‘æ–‡æ¡£</li>\n<li><a href=\"https://carbon.now.sh/\" target=\"_blank\" rel=\"noopener\">Carbon</a> - å¸¦æ ·å¼åˆ†äº«ä»£ç </li>\n<li><a href=\"https://codepen.io/pen/\" target=\"_blank\" rel=\"noopener\">CodePen</a> - åœ¨çº¿æµ‹è¯•å‰ç«¯ä»£ç </li>\n<li><a href=\"https://codesandbox.io/s/\" target=\"_blank\" rel=\"noopener\">CodeSandbox</a> - ä»£ç æ²™ç›’ï¼Œå¯ä»¥åˆ†äº«å¸¦æœ‰ä¾èµ–çš„å‰ç«¯é¡¹ç›®</li>\n<li><a href=\"https://prettier.io/playground/\" target=\"_blank\" rel=\"noopener\">Prettier</a> - åœ¨çº¿æ ¼å¼åŒ– JavaScript ä»£ç </li>\n<li><a href=\"https://text-formatter.herokuapp.com/\" target=\"_blank\" rel=\"noopener\">Text-formatter</a> - æ ¼å¼åŒ–æ–‡æœ¬, ä¸­è‹±æ–‡ä¹‹é—´ç•™ç©ºæ ¼ä»¥åŠè‹±æ–‡æ ‡ç‚¹</li>\n<li><a href=\"https://devdocs.io/\" target=\"_blank\" rel=\"noopener\">DevDocs</a> - ä¸€ç«™å¼å¼€å‘æ–‡æ¡£é›†åˆ</li>\n<li><a href=\"https://app.grammarly.com/\" target=\"_blank\" rel=\"noopener\">Grammarly</a> - è‹±æ–‡è¯­æ³•é”™è¯¯æ£€æŸ¥</li>\n<li><a href=\"http://jsonplaceholder.typicode.com/\" target=\"_blank\" rel=\"noopener\">JSONPlaceholder</a> - RESTful API å‡æ•°æ®æ¨¡æ‹Ÿ</li>\n<li><a href=\"https://www.json2yaml.com/\" target=\"_blank\" rel=\"noopener\">JSON2YAML</a> - JSON å’Œ YAML äº’è½¬</li>\n<li><a href=\"http://json.parser.online.fr/beta/\" target=\"_blank\" rel=\"noopener\">JSON Parser</a> - JSON æ ¼å¼åŒ–</li>\n<li><a href=\"https://regexr.com/\" target=\"_blank\" rel=\"noopener\">RegExr</a> - åœ¨çº¿æ­£åˆ™æµ‹è¯•åŠè°ƒè¯•</li>\n<li><a href=\"https://jex.im/regulex/\" target=\"_blank\" rel=\"noopener\">Regulex</a> - æ­£åˆ™è¡¨è¾¾å¯è§†åŒ–, å¿«é€Ÿç†è§£æ­£åˆ™è¡¨è¾¾å¼</li>\n<li><a href=\"https://www.cssmatic.com/\" target=\"_blank\" rel=\"noopener\">CSSMatic</a> - ç”Ÿæˆé•œåƒæ¸å˜, ç›’å­é˜´å½±ç­‰</li>\n<li><a href=\"https://cssgradient.io/\" target=\"_blank\" rel=\"noopener\">CSS Gradient</a> - ä¸“ä¸šç”Ÿæˆé•œåƒæ¸å˜ã€çº¿æ€§æ¸å˜</li>\n<li><a href=\"https://www.sassmeister.com/\" target=\"_blank\" rel=\"noopener\">SassMeister</a> - Sass æ¼”ç»ƒåœº, å¯ä»¥è¾“å‡º AutoPrefixer çš„ç»“æœ</li>\n<li><a href=\"https://keyframes.app/\" target=\"_blank\" rel=\"noopener\">KeyframesApp</a> - CSS3 åŠ¨ç”»å…³é”®å¸§ç”Ÿæˆå·¥å…·</li>\n<li><a href=\"https://www.toptal.com/developers/css/sprite-generator\" target=\"_blank\" rel=\"noopener\">CSS Sprites Generator</a> - CSS ç²¾çµç”Ÿæˆå·¥å…·</li>\n<li><a href=\"http://www.jsnice.org/\" target=\"_blank\" rel=\"noopener\">JSNice</a> - åç¼–è¯‘å·²å‹ç¼©çš„ JS ä»£ç , ç†è§£å˜é‡å«ä¹‰</li>\n<li><a href=\"https://love2.io/\" target=\"_blank\" rel=\"noopener\">Love2.io</a> - å¼€æºæŠ€æœ¯æ–‡æ¡£åˆ†äº«å¹³å°</li>\n<li><a href=\"https://wakatime.com/\" target=\"_blank\" rel=\"noopener\">WakaTime</a> - è®°å½•æ¯å¤©çš„ç¼–ç æƒ…å†µ, ä½¿ç”¨ä»€ä¹ˆè¯­è¨€åŠç»Ÿè®¡æ—¶é•¿</li>\n<li><a href=\"https://bestofjs.org/\" target=\"_blank\" rel=\"noopener\">Best of JavaScript</a> - æœ€æµè¡Œçš„å‰ç«¯å¼€æºé¡¹ç›®æ¸…å•</li>\n<li><a href=\"https://lanhuapp.com/\" target=\"_blank\" rel=\"noopener\">è“æ¹–</a> - é«˜æ•ˆçš„äº§å“è®¾è®¡åä½œå¹³å°, æ ‡æ³¨åˆ‡å›¾å¾ˆå¥½ç”¨</li>\n</ul>\n<h3 id=\"Docs\"><a href=\"#Docs\" class=\"headerlink\" title=\"Docs\"></a>Docs</h3><ul>\n<li><p><strong>React</strong></p>\n<ul>\n<li><a href=\"https://doc.react-china.org/docs/hello-world.html\" target=\"_blank\" rel=\"noopener\">React ä¸­æ–‡æ–‡æ¡£</a></li>\n<li><a href=\"https://www.kancloud.cn/allanyu/redux-in-chinese/82399\" target=\"_blank\" rel=\"noopener\">Redux ä¸­æ–‡æ–‡æ¡£</a></li>\n<li><a href=\"http://leonshi.com/redux-saga-in-chinese/docs/api/index.html\" target=\"_blank\" rel=\"noopener\">React-saga ä¸­æ–‡æ–‡æ¡£</a></li>\n<li><a href=\"https://react-guide.github.io/react-router-cn\" target=\"_blank\" rel=\"noopener\">React-router ä¸­æ–‡æ–‡æ¡£</a></li>\n<li><a href=\"https://suprise.gitbooks.io/mobx-cn/content/fp.html\" target=\"_blank\" rel=\"noopener\">Mobx ä¸­æ–‡æ–‡æ¡£</a></li>\n<li><a href=\"https://ant.design/docs/react/introduce-cn\" target=\"_blank\" rel=\"noopener\">Ant-design æ–‡æ¡£</a></li>\n<li><a href=\"http://reactnative.cn/docs/0.50/getting-started.html\" target=\"_blank\" rel=\"noopener\">React-Native æ–‡æ¡£</a></li>\n</ul>\n</li>\n<li><p><strong>Vue.js</strong></p>\n<ul>\n<li><a href=\"https://cn.vuejs.org/v2/guide/\" target=\"_blank\" rel=\"noopener\">Vue.js å®˜ç½‘</a></li>\n<li><a href=\"https://router.vuejs.org/zh-cn/\" target=\"_blank\" rel=\"noopener\">Vue-Router</a></li>\n<li><a href=\"https://vuex.vuejs.org/zh-cn/\" target=\"_blank\" rel=\"noopener\">Vuex</a></li>\n<li><a href=\"https://ssr.vuejs.org/zh/\" target=\"_blank\" rel=\"noopener\">Vue-SSR æœåŠ¡å™¨ç«¯æ¸²æŸ“</a></li>\n<li><a href=\"https://zh.nuxtjs.org/guide/installation\" target=\"_blank\" rel=\"noopener\">Vue-NUXT</a></li>\n</ul>\n</li>\n<li><p><strong>Node.js</strong></p>\n<ul>\n<li><a href=\"http://nodejs.cn/api/\" target=\"_blank\" rel=\"noopener\">Node.js API</a></li>\n<li><a href=\"http://www.expressjs.com.cn/guide/routing.html\" target=\"_blank\" rel=\"noopener\">Express å®˜ç½‘</a></li>\n</ul>\n</li>\n<li><p><strong>Electron</strong></p>\n<ul>\n<li><a href=\"https://electronjs.org/docs/\" target=\"_blank\" rel=\"noopener\">Electron å®˜æ–¹æ–‡æ¡£</a></li>\n</ul>\n</li>\n<li><p><strong>WeChat</strong></p>\n<ul>\n<li><a href=\"https://mp.weixin.qq.com/debug/wxadoc/dev/index.html?t=201832\" target=\"_blank\" rel=\"noopener\">å°ç¨‹åºå®˜æ–¹æ–‡æ¡£</a></li>\n</ul>\n</li>\n<li><p><strong>TypeScript</strong></p>\n<ul>\n<li><a href=\"https://www.tslang.cn/index.html\" target=\"_blank\" rel=\"noopener\">TypeScript ä¸­æ–‡ç½‘</a></li>\n</ul>\n</li>\n<li><p><strong>Vanilla JS</strong></p>\n<ul>\n<li><a href=\"https://segmentfault.com/a/1190000012646488\" target=\"_blank\" rel=\"noopener\">JavaScript åŸºç¡€è¿›é˜¶ç³»åˆ—</a></li>\n<li><a href=\"https://github.com/wangfupeng1988/js-async-tutorial\" target=\"_blank\" rel=\"noopener\">æ·±å…¥ç†è§£ JS å¼‚æ­¥</a></li>\n<li><a href=\"https://www.cnblogs.com/tomxu/archive/2011/12/15/2288411.html\" target=\"_blank\" rel=\"noopener\">æ·±å…¥ç†è§£ JS (Tom)</a></li>\n</ul>\n</li>\n<li><p><strong>Webpack</strong></p>\n<ul>\n<li><a href=\"http://www.css88.com/doc/webpack/\" target=\"_blank\" rel=\"noopener\">Webpack 3.x</a></li>\n<li><a href=\"http://www.css88.com/doc/webpack2/api/loaders/#version\" target=\"_blank\" rel=\"noopener\">Webpack 2.x</a></li>\n</ul>\n</li>\n<li><p><strong>Python</strong></p>\n<ul>\n<li><a href=\"https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000\" target=\"_blank\" rel=\"noopener\">Python 3 æ•™ç¨‹ (å»–é›ªå³°)</a></li>\n<li><a href=\"https://docs.djangoproject.com/zh-hans/2.0/\" target=\"_blank\" rel=\"noopener\">Django ä¸­æ–‡æ–‡æ¡£</a></li>\n</ul>\n</li>\n<li><p><strong>Moreâ€¦</strong></p>\n<ul>\n<li><a href=\"https://docschina.org/\" target=\"_blank\" rel=\"noopener\">å°è®°ä¸­æ–‡</a></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"One-more-thing\"><a href=\"#One-more-thing\" class=\"headerlink\" title=\"One more thing\"></a>One more thing</h3><p>æ¬¢è¿åœ¨ä¸‹é¢ç•™è¨€æ¿åˆ†äº«ä½ è§‰å¾—æœ‰è¶£çš„æ‰€æœ‰ä¸œè¥¿, æœ¬æ–‡<a href=\"https://raw.githubusercontent.com/ifyour/ifyour.github.io/src/source/docs/index.md\" target=\"_blank\" rel=\"noopener\">æºä»£ç åœ°å€</a>. ğŸ˜</p>\n"},{"title":"categories","date":"2015-12-27T14:33:51.000Z","type":"categories","comments":0,"_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2015-12-27 22:33:51\ntype: \"categories\"\ncomments: false\n---\n","updated":"2018-12-26T16:01:04.000Z","path":"categories/index.html","layout":"page","_id":"ck3v60jt70004r9q9oi8glts8","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"7 æ‹›è½»æ¾æå®š JavaScript å¤šè¡Œå­—ç¬¦ä¸²æ‹¼æ¥","date":"2016-01-06T13:24:40.000Z","comments":0,"_content":"\nå¹³å¸¸åœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œä¼šç»å¸¸é‡åˆ°å¤šè¡Œå­—ç¬¦ä¸²æ‹¼æ¥çš„éœ€æ±‚ï¼Œä¾‹å¦‚ï¼Œæˆ‘éœ€è¦å¤„ç†ä¸€ä¸ª `li` æ ‡ç­¾åŠ¨æ€æ‹¼æ¥æ˜¾ç¤ºåˆ° `ul` ä¸­ï¼Œç­‰ç­‰ï¼Œåƒè¿™æ ·çš„éœ€æ±‚åœºæ™¯è¿˜æ˜¯éå¸¸å¤šçš„ï¼Œè¿™å°±éœ€è¦æ ¹æ®åœ¨é¡¹ç›®ä¸­å®é™…é‡åˆ°çš„éœ€æ±‚æ¥å¤„ç†ï¼Œé€‰æ‹©åˆé€‚çš„æ‹¼æ¥æ–¹å¼ä¼šå¤§å¤§æé«˜å¼€å‘æ•ˆç‡å¹¶å‡å°‘å‡ºé”™çš„å¯èƒ½ï¼Œåœ¨è¿™é‡Œæˆ‘æ€»ç»“äº† 7 æ‹›å­—ç¬¦ä¸²æ‹¼æ¥æ–¹æ³•ã€‚\n\n<!-- more -->\n#### éœ€æ±‚åœºæ™¯\nåœ¨é¡¹ç›®ä¸­ï¼ŒåŠ¨æ€å¤„ç†åˆ†é¡µï¼Œæ ¹æ®ç³»ç»Ÿè®¾å®šçš„æ˜¾ç¤ºæ¡ç›®ç¡®å®šæœ‰å¤šå°‘åˆ†é¡µï¼Œè¿™æ—¶ï¼Œéœ€è¦å°†åˆ†é¡µçš„å†…å®¹ç»è¿‡å¤„ç†åŠ¨æ€ç”Ÿæˆå†æ”¾å›åˆ°åŸæ¥çš„ `ul` ä¸­ï¼Œè¿™æ—¶å°±éœ€è¦è¿›è¡Œå¤šè¡Œå­—ç¬¦ä¸²çš„æ‹¼æ¥ã€‚\n\n```html\n<li><a href=\"#\">ä¸Šé¡µ</a></li>\n<li><a href=\"#\"> 1 </a></li>\n<li><a href=\"#\">ä¸‹é¡µ</a></li>\n```\nå¯¹äºè¿™æ ·çš„ DOM ç»“æ„éœ€è¦åœ¨ JavaScript ä¸­æ‹¼æ¥ï¼Œä½ ä¼šæ€æ ·å¤„ç†ï¼Ÿ\n#### å¸¸è§„æ–¹æ³•\n```js\nvar s=`<li><a href=\"\">ä¸Šé¡µ</a></li><li><a href=\"\">1</a></li><li><a href=\"\">ä¸‹é¡µ</a></li>`;\n```\n#### å­—ç¬¦ä¸²ç›¸åŠ \n```js\nvar str = `<li><a href=\"#\">ä¸Šé¡µ</a></li>` +\n          `<li><a href=\"#\"> 1 </a></li>` +\n          `<li><a href=\"#\">ä¸‹é¡µ</a></li>`;\n```\n\n#### åæ–œæ \n```js\nvar str = `<li><a href=\"#\">ä¸Šé¡µ</a></li>\\\n          <li><a href=\"#\"> 1 </a></li>\\\n          <li><a href=\"#\">ä¸‹é¡µ</a></li>`;\n```\n\n#### æ•°ç»„åˆ‡å‰²\n```js\nvar str = [\n    `<li><a href=\"#\">ä¸Šé¡µ</a></li>`,\n    `<li><a href=\"#\"> 1 </a></li>`,\n    `<li><a href=\"#\">ä¸‹é¡µ</a></li>`\n].join('\\n');\n```\n\n#### ES6 è¯­æ³•\n```js\nvar str = `<li><a href=\"#\">ä¸Šé¡µ</a></li>\n          <li><a href=\"#\"> 1 </a></li>\n          <li><a href=\"#\">ä¸‹é¡µ</a></li>`\n```\n\n#### æ­£åˆ™è¡¨è¾¾å¼\n```text\næŸ¥æ‰¾ï¼š\\n\næ›¿æ¢ï¼š\\\\\\n\né€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æŠŠåŸæœ‰çš„æ¢è¡Œ \\n æ›¿æ¢æˆäº† \\\\\\n å¸¦æœ‰åæ–œæ çš„æ¢è¡Œï¼Œæœ¬è´¨æ˜¯å’Œåæ–œæ æ–¹æ³•ä¸€æ ·\n```\n![](http://ww3.sinaimg.cn/large/6057861cgw1fbn70seheej218s0v8n0x.jpg)\n\n#### é»‘é­”æ³•\n```js\nfunction aHereDoc() {/*\n    <li><a href=\"#\">ä¸Šé¡µ</a></li>\n    <li><a href=\"#\"> 1 </a></li>\n    <li><a href=\"#\">ä¸‹é¡µ</a></li>\n    */}\n\nfunction hereDoc(func) {\n    return func.toString().split(/\\n/).slice(1, -1).join('\\n');\n}\nconsole.log(hereDoc(aHereDoc));\n```\nåˆ©ç”¨ `func.toString()` è·å–éœ€è¦æ‰¹é‡å¤„ç†çš„å­—ç¬¦ä¸²ï¼Œåˆ©ç”¨ `split(/\\n/).slice(1, -1)` å»æ‰é¦–å°¾ä¸¤è¡Œå‡½æ•°å®šä¹‰çš„ä»£ç ï¼Œæ§åˆ¶å°è¾“å‡ºï¼š\n![](http://ww3.sinaimg.cn/large/6057861cgw1fbn6ta8s3yj21460b5jt0.jpg)\n","source":"_posts/7æ‹›è½»æ¾æå®š-JavaScript-å¤šè¡Œå­—ç¬¦ä¸²æ‹¼æ¥.md","raw":"---\ntitle: '7 æ‹›è½»æ¾æå®š JavaScript å¤šè¡Œå­—ç¬¦ä¸²æ‹¼æ¥'\ndate: 2016-01-06 21:24:40\ntags:\ncomments: false\n---\n\nå¹³å¸¸åœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œä¼šç»å¸¸é‡åˆ°å¤šè¡Œå­—ç¬¦ä¸²æ‹¼æ¥çš„éœ€æ±‚ï¼Œä¾‹å¦‚ï¼Œæˆ‘éœ€è¦å¤„ç†ä¸€ä¸ª `li` æ ‡ç­¾åŠ¨æ€æ‹¼æ¥æ˜¾ç¤ºåˆ° `ul` ä¸­ï¼Œç­‰ç­‰ï¼Œåƒè¿™æ ·çš„éœ€æ±‚åœºæ™¯è¿˜æ˜¯éå¸¸å¤šçš„ï¼Œè¿™å°±éœ€è¦æ ¹æ®åœ¨é¡¹ç›®ä¸­å®é™…é‡åˆ°çš„éœ€æ±‚æ¥å¤„ç†ï¼Œé€‰æ‹©åˆé€‚çš„æ‹¼æ¥æ–¹å¼ä¼šå¤§å¤§æé«˜å¼€å‘æ•ˆç‡å¹¶å‡å°‘å‡ºé”™çš„å¯èƒ½ï¼Œåœ¨è¿™é‡Œæˆ‘æ€»ç»“äº† 7 æ‹›å­—ç¬¦ä¸²æ‹¼æ¥æ–¹æ³•ã€‚\n\n<!-- more -->\n#### éœ€æ±‚åœºæ™¯\nåœ¨é¡¹ç›®ä¸­ï¼ŒåŠ¨æ€å¤„ç†åˆ†é¡µï¼Œæ ¹æ®ç³»ç»Ÿè®¾å®šçš„æ˜¾ç¤ºæ¡ç›®ç¡®å®šæœ‰å¤šå°‘åˆ†é¡µï¼Œè¿™æ—¶ï¼Œéœ€è¦å°†åˆ†é¡µçš„å†…å®¹ç»è¿‡å¤„ç†åŠ¨æ€ç”Ÿæˆå†æ”¾å›åˆ°åŸæ¥çš„ `ul` ä¸­ï¼Œè¿™æ—¶å°±éœ€è¦è¿›è¡Œå¤šè¡Œå­—ç¬¦ä¸²çš„æ‹¼æ¥ã€‚\n\n```html\n<li><a href=\"#\">ä¸Šé¡µ</a></li>\n<li><a href=\"#\"> 1 </a></li>\n<li><a href=\"#\">ä¸‹é¡µ</a></li>\n```\nå¯¹äºè¿™æ ·çš„ DOM ç»“æ„éœ€è¦åœ¨ JavaScript ä¸­æ‹¼æ¥ï¼Œä½ ä¼šæ€æ ·å¤„ç†ï¼Ÿ\n#### å¸¸è§„æ–¹æ³•\n```js\nvar s=`<li><a href=\"\">ä¸Šé¡µ</a></li><li><a href=\"\">1</a></li><li><a href=\"\">ä¸‹é¡µ</a></li>`;\n```\n#### å­—ç¬¦ä¸²ç›¸åŠ \n```js\nvar str = `<li><a href=\"#\">ä¸Šé¡µ</a></li>` +\n          `<li><a href=\"#\"> 1 </a></li>` +\n          `<li><a href=\"#\">ä¸‹é¡µ</a></li>`;\n```\n\n#### åæ–œæ \n```js\nvar str = `<li><a href=\"#\">ä¸Šé¡µ</a></li>\\\n          <li><a href=\"#\"> 1 </a></li>\\\n          <li><a href=\"#\">ä¸‹é¡µ</a></li>`;\n```\n\n#### æ•°ç»„åˆ‡å‰²\n```js\nvar str = [\n    `<li><a href=\"#\">ä¸Šé¡µ</a></li>`,\n    `<li><a href=\"#\"> 1 </a></li>`,\n    `<li><a href=\"#\">ä¸‹é¡µ</a></li>`\n].join('\\n');\n```\n\n#### ES6 è¯­æ³•\n```js\nvar str = `<li><a href=\"#\">ä¸Šé¡µ</a></li>\n          <li><a href=\"#\"> 1 </a></li>\n          <li><a href=\"#\">ä¸‹é¡µ</a></li>`\n```\n\n#### æ­£åˆ™è¡¨è¾¾å¼\n```text\næŸ¥æ‰¾ï¼š\\n\næ›¿æ¢ï¼š\\\\\\n\né€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æŠŠåŸæœ‰çš„æ¢è¡Œ \\n æ›¿æ¢æˆäº† \\\\\\n å¸¦æœ‰åæ–œæ çš„æ¢è¡Œï¼Œæœ¬è´¨æ˜¯å’Œåæ–œæ æ–¹æ³•ä¸€æ ·\n```\n![](http://ww3.sinaimg.cn/large/6057861cgw1fbn70seheej218s0v8n0x.jpg)\n\n#### é»‘é­”æ³•\n```js\nfunction aHereDoc() {/*\n    <li><a href=\"#\">ä¸Šé¡µ</a></li>\n    <li><a href=\"#\"> 1 </a></li>\n    <li><a href=\"#\">ä¸‹é¡µ</a></li>\n    */}\n\nfunction hereDoc(func) {\n    return func.toString().split(/\\n/).slice(1, -1).join('\\n');\n}\nconsole.log(hereDoc(aHereDoc));\n```\nåˆ©ç”¨ `func.toString()` è·å–éœ€è¦æ‰¹é‡å¤„ç†çš„å­—ç¬¦ä¸²ï¼Œåˆ©ç”¨ `split(/\\n/).slice(1, -1)` å»æ‰é¦–å°¾ä¸¤è¡Œå‡½æ•°å®šä¹‰çš„ä»£ç ï¼Œæ§åˆ¶å°è¾“å‡ºï¼š\n![](http://ww3.sinaimg.cn/large/6057861cgw1fbn6ta8s3yj21460b5jt0.jpg)\n","slug":"7æ‹›è½»æ¾æå®š-JavaScript-å¤šè¡Œå­—ç¬¦ä¸²æ‹¼æ¥","published":1,"updated":"2019-12-07T04:59:33.501Z","layout":"post","photos":[],"link":"","_id":"ck3v60jt20001r9q9n4y5t2y3","content":"<p>å¹³å¸¸åœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œä¼šç»å¸¸é‡åˆ°å¤šè¡Œå­—ç¬¦ä¸²æ‹¼æ¥çš„éœ€æ±‚ï¼Œä¾‹å¦‚ï¼Œæˆ‘éœ€è¦å¤„ç†ä¸€ä¸ª <code>li</code> æ ‡ç­¾åŠ¨æ€æ‹¼æ¥æ˜¾ç¤ºåˆ° <code>ul</code> ä¸­ï¼Œç­‰ç­‰ï¼Œåƒè¿™æ ·çš„éœ€æ±‚åœºæ™¯è¿˜æ˜¯éå¸¸å¤šçš„ï¼Œè¿™å°±éœ€è¦æ ¹æ®åœ¨é¡¹ç›®ä¸­å®é™…é‡åˆ°çš„éœ€æ±‚æ¥å¤„ç†ï¼Œé€‰æ‹©åˆé€‚çš„æ‹¼æ¥æ–¹å¼ä¼šå¤§å¤§æé«˜å¼€å‘æ•ˆç‡å¹¶å‡å°‘å‡ºé”™çš„å¯èƒ½ï¼Œåœ¨è¿™é‡Œæˆ‘æ€»ç»“äº† 7 æ‹›å­—ç¬¦ä¸²æ‹¼æ¥æ–¹æ³•ã€‚</p>\n<a id=\"more\"></a>\n<h4 id=\"éœ€æ±‚åœºæ™¯\"><a href=\"#éœ€æ±‚åœºæ™¯\" class=\"headerlink\" title=\"éœ€æ±‚åœºæ™¯\"></a>éœ€æ±‚åœºæ™¯</h4><p>åœ¨é¡¹ç›®ä¸­ï¼ŒåŠ¨æ€å¤„ç†åˆ†é¡µï¼Œæ ¹æ®ç³»ç»Ÿè®¾å®šçš„æ˜¾ç¤ºæ¡ç›®ç¡®å®šæœ‰å¤šå°‘åˆ†é¡µï¼Œè¿™æ—¶ï¼Œéœ€è¦å°†åˆ†é¡µçš„å†…å®¹ç»è¿‡å¤„ç†åŠ¨æ€ç”Ÿæˆå†æ”¾å›åˆ°åŸæ¥çš„ <code>ul</code> ä¸­ï¼Œè¿™æ—¶å°±éœ€è¦è¿›è¡Œå¤šè¡Œå­—ç¬¦ä¸²çš„æ‹¼æ¥ã€‚</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#\"</span>&gt;</span>ä¸Šé¡µ<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#\"</span>&gt;</span> 1 <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#\"</span>&gt;</span>ä¸‹é¡µ<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>å¯¹äºè¿™æ ·çš„ DOM ç»“æ„éœ€è¦åœ¨ JavaScript ä¸­æ‹¼æ¥ï¼Œä½ ä¼šæ€æ ·å¤„ç†ï¼Ÿ</p>\n<h4 id=\"å¸¸è§„æ–¹æ³•\"><a href=\"#å¸¸è§„æ–¹æ³•\" class=\"headerlink\" title=\"å¸¸è§„æ–¹æ³•\"></a>å¸¸è§„æ–¹æ³•</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> s=<span class=\"string\">`&lt;li&gt;&lt;a href=\"\"&gt;ä¸Šé¡µ&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=\"\"&gt;1&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=\"\"&gt;ä¸‹é¡µ&lt;/a&gt;&lt;/li&gt;`</span>;</span><br></pre></td></tr></table></figure>\n<h4 id=\"å­—ç¬¦ä¸²ç›¸åŠ \"><a href=\"#å­—ç¬¦ä¸²ç›¸åŠ \" class=\"headerlink\" title=\"å­—ç¬¦ä¸²ç›¸åŠ \"></a>å­—ç¬¦ä¸²ç›¸åŠ </h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = <span class=\"string\">`&lt;li&gt;&lt;a href=\"#\"&gt;ä¸Šé¡µ&lt;/a&gt;&lt;/li&gt;`</span> +</span><br><span class=\"line\">          <span class=\"string\">`&lt;li&gt;&lt;a href=\"#\"&gt; 1 &lt;/a&gt;&lt;/li&gt;`</span> +</span><br><span class=\"line\">          <span class=\"string\">`&lt;li&gt;&lt;a href=\"#\"&gt;ä¸‹é¡µ&lt;/a&gt;&lt;/li&gt;`</span>;</span><br></pre></td></tr></table></figure>\n<h4 id=\"åæ–œæ \"><a href=\"#åæ–œæ \" class=\"headerlink\" title=\"åæ–œæ \"></a>åæ–œæ </h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = <span class=\"string\">`&lt;li&gt;&lt;a href=\"#\"&gt;ä¸Šé¡µ&lt;/a&gt;&lt;/li&gt;\\</span></span><br><span class=\"line\"><span class=\"string\">          &lt;li&gt;&lt;a href=\"#\"&gt; 1 &lt;/a&gt;&lt;/li&gt;\\</span></span><br><span class=\"line\"><span class=\"string\">          &lt;li&gt;&lt;a href=\"#\"&gt;ä¸‹é¡µ&lt;/a&gt;&lt;/li&gt;`</span>;</span><br></pre></td></tr></table></figure>\n<h4 id=\"æ•°ç»„åˆ‡å‰²\"><a href=\"#æ•°ç»„åˆ‡å‰²\" class=\"headerlink\" title=\"æ•°ç»„åˆ‡å‰²\"></a>æ•°ç»„åˆ‡å‰²</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = [</span><br><span class=\"line\">    <span class=\"string\">`&lt;li&gt;&lt;a href=\"#\"&gt;ä¸Šé¡µ&lt;/a&gt;&lt;/li&gt;`</span>,</span><br><span class=\"line\">    <span class=\"string\">`&lt;li&gt;&lt;a href=\"#\"&gt; 1 &lt;/a&gt;&lt;/li&gt;`</span>,</span><br><span class=\"line\">    <span class=\"string\">`&lt;li&gt;&lt;a href=\"#\"&gt;ä¸‹é¡µ&lt;/a&gt;&lt;/li&gt;`</span></span><br><span class=\"line\">].join(<span class=\"string\">'\\n'</span>);</span><br></pre></td></tr></table></figure>\n<h4 id=\"ES6-è¯­æ³•\"><a href=\"#ES6-è¯­æ³•\" class=\"headerlink\" title=\"ES6 è¯­æ³•\"></a>ES6 è¯­æ³•</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = <span class=\"string\">`&lt;li&gt;&lt;a href=\"#\"&gt;ä¸Šé¡µ&lt;/a&gt;&lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;li&gt;&lt;a href=\"#\"&gt; 1 &lt;/a&gt;&lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;li&gt;&lt;a href=\"#\"&gt;ä¸‹é¡µ&lt;/a&gt;&lt;/li&gt;`</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"æ­£åˆ™è¡¨è¾¾å¼\"><a href=\"#æ­£åˆ™è¡¨è¾¾å¼\" class=\"headerlink\" title=\"æ­£åˆ™è¡¨è¾¾å¼\"></a>æ­£åˆ™è¡¨è¾¾å¼</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">æŸ¥æ‰¾ï¼š\\n</span><br><span class=\"line\">æ›¿æ¢ï¼š\\\\\\n</span><br><span class=\"line\">é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æŠŠåŸæœ‰çš„æ¢è¡Œ \\n æ›¿æ¢æˆäº† \\\\\\n å¸¦æœ‰åæ–œæ çš„æ¢è¡Œï¼Œæœ¬è´¨æ˜¯å’Œåæ–œæ æ–¹æ³•ä¸€æ ·</span><br></pre></td></tr></table></figure>\n<p><img src=\"http://ww3.sinaimg.cn/large/6057861cgw1fbn70seheej218s0v8n0x.jpg\" alt=\"\"></p>\n<h4 id=\"é»‘é­”æ³•\"><a href=\"#é»‘é­”æ³•\" class=\"headerlink\" title=\"é»‘é­”æ³•\"></a>é»‘é­”æ³•</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">aHereDoc</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    &lt;li&gt;&lt;a href=\"#\"&gt;ä¸Šé¡µ&lt;/a&gt;&lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"comment\">    &lt;li&gt;&lt;a href=\"#\"&gt; 1 &lt;/a&gt;&lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"comment\">    &lt;li&gt;&lt;a href=\"#\"&gt;ä¸‹é¡µ&lt;/a&gt;&lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"comment\">    */</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hereDoc</span>(<span class=\"params\">func</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> func.toString().split(<span class=\"regexp\">/\\n/</span>).slice(<span class=\"number\">1</span>, <span class=\"number\">-1</span>).join(<span class=\"string\">'\\n'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(hereDoc(aHereDoc));</span><br></pre></td></tr></table></figure>\n<p>åˆ©ç”¨ <code>func.toString()</code> è·å–éœ€è¦æ‰¹é‡å¤„ç†çš„å­—ç¬¦ä¸²ï¼Œåˆ©ç”¨ <code>split(/\\n/).slice(1, -1)</code> å»æ‰é¦–å°¾ä¸¤è¡Œå‡½æ•°å®šä¹‰çš„ä»£ç ï¼Œæ§åˆ¶å°è¾“å‡ºï¼š<br><img src=\"http://ww3.sinaimg.cn/large/6057861cgw1fbn6ta8s3yj21460b5jt0.jpg\" alt=\"\"></p>\n","site":{"data":{}},"excerpt":"<p>å¹³å¸¸åœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œä¼šç»å¸¸é‡åˆ°å¤šè¡Œå­—ç¬¦ä¸²æ‹¼æ¥çš„éœ€æ±‚ï¼Œä¾‹å¦‚ï¼Œæˆ‘éœ€è¦å¤„ç†ä¸€ä¸ª <code>li</code> æ ‡ç­¾åŠ¨æ€æ‹¼æ¥æ˜¾ç¤ºåˆ° <code>ul</code> ä¸­ï¼Œç­‰ç­‰ï¼Œåƒè¿™æ ·çš„éœ€æ±‚åœºæ™¯è¿˜æ˜¯éå¸¸å¤šçš„ï¼Œè¿™å°±éœ€è¦æ ¹æ®åœ¨é¡¹ç›®ä¸­å®é™…é‡åˆ°çš„éœ€æ±‚æ¥å¤„ç†ï¼Œé€‰æ‹©åˆé€‚çš„æ‹¼æ¥æ–¹å¼ä¼šå¤§å¤§æé«˜å¼€å‘æ•ˆç‡å¹¶å‡å°‘å‡ºé”™çš„å¯èƒ½ï¼Œåœ¨è¿™é‡Œæˆ‘æ€»ç»“äº† 7 æ‹›å­—ç¬¦ä¸²æ‹¼æ¥æ–¹æ³•ã€‚</p>","more":"<h4 id=\"éœ€æ±‚åœºæ™¯\"><a href=\"#éœ€æ±‚åœºæ™¯\" class=\"headerlink\" title=\"éœ€æ±‚åœºæ™¯\"></a>éœ€æ±‚åœºæ™¯</h4><p>åœ¨é¡¹ç›®ä¸­ï¼ŒåŠ¨æ€å¤„ç†åˆ†é¡µï¼Œæ ¹æ®ç³»ç»Ÿè®¾å®šçš„æ˜¾ç¤ºæ¡ç›®ç¡®å®šæœ‰å¤šå°‘åˆ†é¡µï¼Œè¿™æ—¶ï¼Œéœ€è¦å°†åˆ†é¡µçš„å†…å®¹ç»è¿‡å¤„ç†åŠ¨æ€ç”Ÿæˆå†æ”¾å›åˆ°åŸæ¥çš„ <code>ul</code> ä¸­ï¼Œè¿™æ—¶å°±éœ€è¦è¿›è¡Œå¤šè¡Œå­—ç¬¦ä¸²çš„æ‹¼æ¥ã€‚</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#\"</span>&gt;</span>ä¸Šé¡µ<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#\"</span>&gt;</span> 1 <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"#\"</span>&gt;</span>ä¸‹é¡µ<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>å¯¹äºè¿™æ ·çš„ DOM ç»“æ„éœ€è¦åœ¨ JavaScript ä¸­æ‹¼æ¥ï¼Œä½ ä¼šæ€æ ·å¤„ç†ï¼Ÿ</p>\n<h4 id=\"å¸¸è§„æ–¹æ³•\"><a href=\"#å¸¸è§„æ–¹æ³•\" class=\"headerlink\" title=\"å¸¸è§„æ–¹æ³•\"></a>å¸¸è§„æ–¹æ³•</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> s=<span class=\"string\">`&lt;li&gt;&lt;a href=\"\"&gt;ä¸Šé¡µ&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=\"\"&gt;1&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=\"\"&gt;ä¸‹é¡µ&lt;/a&gt;&lt;/li&gt;`</span>;</span><br></pre></td></tr></table></figure>\n<h4 id=\"å­—ç¬¦ä¸²ç›¸åŠ \"><a href=\"#å­—ç¬¦ä¸²ç›¸åŠ \" class=\"headerlink\" title=\"å­—ç¬¦ä¸²ç›¸åŠ \"></a>å­—ç¬¦ä¸²ç›¸åŠ </h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = <span class=\"string\">`&lt;li&gt;&lt;a href=\"#\"&gt;ä¸Šé¡µ&lt;/a&gt;&lt;/li&gt;`</span> +</span><br><span class=\"line\">          <span class=\"string\">`&lt;li&gt;&lt;a href=\"#\"&gt; 1 &lt;/a&gt;&lt;/li&gt;`</span> +</span><br><span class=\"line\">          <span class=\"string\">`&lt;li&gt;&lt;a href=\"#\"&gt;ä¸‹é¡µ&lt;/a&gt;&lt;/li&gt;`</span>;</span><br></pre></td></tr></table></figure>\n<h4 id=\"åæ–œæ \"><a href=\"#åæ–œæ \" class=\"headerlink\" title=\"åæ–œæ \"></a>åæ–œæ </h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = <span class=\"string\">`&lt;li&gt;&lt;a href=\"#\"&gt;ä¸Šé¡µ&lt;/a&gt;&lt;/li&gt;\\</span></span><br><span class=\"line\"><span class=\"string\">          &lt;li&gt;&lt;a href=\"#\"&gt; 1 &lt;/a&gt;&lt;/li&gt;\\</span></span><br><span class=\"line\"><span class=\"string\">          &lt;li&gt;&lt;a href=\"#\"&gt;ä¸‹é¡µ&lt;/a&gt;&lt;/li&gt;`</span>;</span><br></pre></td></tr></table></figure>\n<h4 id=\"æ•°ç»„åˆ‡å‰²\"><a href=\"#æ•°ç»„åˆ‡å‰²\" class=\"headerlink\" title=\"æ•°ç»„åˆ‡å‰²\"></a>æ•°ç»„åˆ‡å‰²</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = [</span><br><span class=\"line\">    <span class=\"string\">`&lt;li&gt;&lt;a href=\"#\"&gt;ä¸Šé¡µ&lt;/a&gt;&lt;/li&gt;`</span>,</span><br><span class=\"line\">    <span class=\"string\">`&lt;li&gt;&lt;a href=\"#\"&gt; 1 &lt;/a&gt;&lt;/li&gt;`</span>,</span><br><span class=\"line\">    <span class=\"string\">`&lt;li&gt;&lt;a href=\"#\"&gt;ä¸‹é¡µ&lt;/a&gt;&lt;/li&gt;`</span></span><br><span class=\"line\">].join(<span class=\"string\">'\\n'</span>);</span><br></pre></td></tr></table></figure>\n<h4 id=\"ES6-è¯­æ³•\"><a href=\"#ES6-è¯­æ³•\" class=\"headerlink\" title=\"ES6 è¯­æ³•\"></a>ES6 è¯­æ³•</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> str = <span class=\"string\">`&lt;li&gt;&lt;a href=\"#\"&gt;ä¸Šé¡µ&lt;/a&gt;&lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;li&gt;&lt;a href=\"#\"&gt; 1 &lt;/a&gt;&lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"string\">          &lt;li&gt;&lt;a href=\"#\"&gt;ä¸‹é¡µ&lt;/a&gt;&lt;/li&gt;`</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"æ­£åˆ™è¡¨è¾¾å¼\"><a href=\"#æ­£åˆ™è¡¨è¾¾å¼\" class=\"headerlink\" title=\"æ­£åˆ™è¡¨è¾¾å¼\"></a>æ­£åˆ™è¡¨è¾¾å¼</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">æŸ¥æ‰¾ï¼š\\n</span><br><span class=\"line\">æ›¿æ¢ï¼š\\\\\\n</span><br><span class=\"line\">é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æŠŠåŸæœ‰çš„æ¢è¡Œ \\n æ›¿æ¢æˆäº† \\\\\\n å¸¦æœ‰åæ–œæ çš„æ¢è¡Œï¼Œæœ¬è´¨æ˜¯å’Œåæ–œæ æ–¹æ³•ä¸€æ ·</span><br></pre></td></tr></table></figure>\n<p><img src=\"http://ww3.sinaimg.cn/large/6057861cgw1fbn70seheej218s0v8n0x.jpg\" alt=\"\"></p>\n<h4 id=\"é»‘é­”æ³•\"><a href=\"#é»‘é­”æ³•\" class=\"headerlink\" title=\"é»‘é­”æ³•\"></a>é»‘é­”æ³•</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">aHereDoc</span>(<span class=\"params\"></span>) </span>&#123;<span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    &lt;li&gt;&lt;a href=\"#\"&gt;ä¸Šé¡µ&lt;/a&gt;&lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"comment\">    &lt;li&gt;&lt;a href=\"#\"&gt; 1 &lt;/a&gt;&lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"comment\">    &lt;li&gt;&lt;a href=\"#\"&gt;ä¸‹é¡µ&lt;/a&gt;&lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"comment\">    */</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hereDoc</span>(<span class=\"params\">func</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> func.toString().split(<span class=\"regexp\">/\\n/</span>).slice(<span class=\"number\">1</span>, <span class=\"number\">-1</span>).join(<span class=\"string\">'\\n'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(hereDoc(aHereDoc));</span><br></pre></td></tr></table></figure>\n<p>åˆ©ç”¨ <code>func.toString()</code> è·å–éœ€è¦æ‰¹é‡å¤„ç†çš„å­—ç¬¦ä¸²ï¼Œåˆ©ç”¨ <code>split(/\\n/).slice(1, -1)</code> å»æ‰é¦–å°¾ä¸¤è¡Œå‡½æ•°å®šä¹‰çš„ä»£ç ï¼Œæ§åˆ¶å°è¾“å‡ºï¼š<br><img src=\"http://ww3.sinaimg.cn/large/6057861cgw1fbn6ta8s3yj21460b5jt0.jpg\" alt=\"\"></p>"},{"title":"Async/await æŸ¥æ¼è¡¥ç¼º","comments":1,"date":"2018-07-22T06:44:15.000Z","from":null,"_content":"\nä¸Šå‘¨æœ«æˆ‘å¤ä¹ äº† Promise çš„ç”¨æ³•ï¼Œé€šè¿‡ä¸€äº›å®ä¾‹åŠ æ·±äº† Promise çš„ç†è§£ã€‚ä»Šå¤©æ¥çœ‹ä¸‹å¼‚æ­¥ç¼–ç¨‹çš„ç»ˆæè§£å†³æ–¹æ¡ˆ async/awaitã€‚JavaScript ä¸­çš„å¼‚æ­¥æ“ä½œä»æœ€åˆçš„ callback æ¼”è¿›åˆ° Promiseï¼Œå†åˆ° Generatorï¼Œéƒ½æ˜¯é€æ­¥çš„æ”¹è¿›ï¼Œè€Œ async å‡½æ•°çš„å‡ºç°ä»¿ä½›çœ‹åˆ°äº†å¼‚æ­¥æ–¹æ¡ˆçš„ç»ˆç‚¹ï¼Œç”¨åŒæ­¥çš„æ–¹å¼å†™å¼‚æ­¥ä»£ç ã€‚\n\n<!-- more -->\n\n### async å‡½æ•°\n\nç®€å•è§£é‡Šï¼šasync å‡½æ•°å°±æ˜¯ Generator å‡½æ•°çš„è¯­æ³•ç³–ã€‚\n\n```js\n// Generator å‡½æ•°å†™æ³•\n\nlet promise = function(val) {\n  return new Promise(function(resolve, reject) {\n    setTimeout(() => {\n      console.log(val);\n      resolve(val);\n    }, 1000);\n  });\n};\n\nlet gen = function*() {\n  let p1 = yield promise('1');\n  let p2 = yield promise('2');\n};\n\nlet genF = gen(); // Iterator å¯¹è±¡\ngenF.next(); // => 1\ngenF.next(); // => 2\n```\n\næ›´å¤š `yield` è¡¨è¾¾å¼å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š[Generator å‡½æ•°è¯­æ³•è§£æ](https://juejin.im/post/5a6db41351882573351a8d72)ã€‚\n\nä½¿ç”¨ async æ¥æ”¹å†™ä¸Šé¢çš„ `gen` å‡½æ•° ğŸ‘‡ï¼š\n\n```js\nlet gen = async function() {\n  let p1 = await promise('1');\n  let p2 = await promise('2');\n};\n\ngen();\n\n// è¾“å‡ºç»“æœ ğŸ‘‡ï¼š\n1\n2\n```\n\nasync å‡½æ•°æ˜¯åœ¨ Generator å‡½æ•°ä¸Šè¿›è¡Œçš„æ”¹è¿›ï¼Œè¯­æ³•ä¸Š Generator å‡½æ•°çš„æ˜Ÿå·æ¢æˆäº† `async`ï¼Œ`yield` æ¢æˆäº† `await`ã€‚\n\nè€Œ async ä¹Ÿä¸ Generator å‡½æ•° **ä¸åŒ**ï¼š\n\n- `async` è‡ªå¸¦å†…ç½®æ‰§è¡Œå™¨ï¼ŒGenerator å‡½æ•°éœ€è¦ä¾é æ‰§è¡Œå™¨ï¼Œå¹¶ä¸” `async` å¯ä»¥å’Œæ™®é€šå‡½æ•°ä¸€æ ·ï¼Œåªéœ€è¦ä¸€è¡Œ\n- ç›¸å¯¹ Generator å‡½æ•°ï¼Œ`async` å’Œ `await` è¯­ä¹‰æ›´æ¸…æ¥š\n- é€‚ç”¨æ€§å¼ºï¼Œ`yield` ååªèƒ½æ˜¯ Thunk å‡½æ•°å’Œ Promise å¯¹è±¡ï¼Œè€Œ `await` åå¯ä»¥æ˜¯ Promise å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ (æ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å‹ç­‰)\n\n### async ä½œç”¨\n\nå¯„äºˆ async å‡½æ•°çš„æœŸæœ›æ˜¯å¸Œæœ›å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³å¼‚æ­¥æ“ä½œé—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦ææ¸…æ¥š async å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆã€‚\n\n```js\nasync function asyncAwait() {\n  return 'async await';\n}\n\nlet a = asyncAwait();\nconsole.log(a);\n\n// è¾“å‡ºç»“æœ ğŸ‘‡ï¼š\nPromise {<resolved>: \"async await\"}\n```\n\nå¯ä»¥çœ‹å‡º async å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¦‚æœå‡½æ•°ä¸­ return ä¸€ä¸ªç›´æ¥é‡ï¼Œasync å‡½æ•°ä¼šå°è£…æˆ Promise å¯¹è±¡è¿”å›ï¼Œè€Œå¦‚æœæ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œasync å‡½æ•°ä¼šè¿”å› `undefined`:\n\n```js\n// æ²¡æœ‰è¿”å›å€¼æ—¶çš„è¾“å‡ºç»“æœ ğŸ‘‡ï¼š\nPromise {<resolved>: undefined}\n```\n\nåœ¨æ²¡æœ‰ç»“åˆ await æ—¶ï¼Œasync å‡½æ•°ä¼šç«‹å³æ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚\n\n### await ç­‰å¾…\n\nawait æ˜¯ä¸ªè¿ç®—ç¬¦ï¼Œç­‰å¾…çš„ç»“æœæ˜¯ Promise å¯¹è±¡æˆ–å…¶å®ƒå€¼ï¼Œæ¯”å¦‚ï¼š\n\n```js\nfunction func1() {\n  return 'async';\n}\n\nasync function func2() {\n  return Promise.resolve('await');\n}\n\nasync function asyncAwait() {\n  let f1 = await func1();\n  let f2 = await func2();\n  console.log(f1, f2);\n}\n\nasyncAwait();\n\n// è¾“å‡ºç»“æœ ğŸ‘‡ï¼š\nasync await\n```\n\nawait è¡¨è¾¾å¼çš„è¿ç®—å–å†³äºç­‰å¾…çš„ç»“æœï¼Œå¦‚æœå®ƒç­‰åˆ°çš„ä¸æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œé‚£è¿ç®—ç»“æœå°±æ˜¯å®ƒç­‰åˆ°çš„ä¸œè¥¿, è€Œå¦‚æœå®ƒç­‰åˆ°çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå®ƒä¼šé˜»å¡åé¢çš„ä»£ç ï¼Œç­‰ç€ Promise å¯¹è±¡ resolveï¼Œç„¶åå¾—åˆ° resolve çš„å€¼ï¼Œä½œä¸ºè¡¨è¾¾å¼çš„è¿ç®—ç»“æœã€‚\n\n<div class=\"tip\">**async å‡½æ•°è°ƒç”¨** ä¼šå°è£…åœ¨ Promise ä¸­ï¼Œè¿™ä¹Ÿæ˜¯ await éœ€è¦åœ¨ async å‡½æ•°ä¸­ä½¿ç”¨çš„åŸå› ã€‚</div>\n\n### async/await é“¾å¼å¤„ç†\n\nå¯¹äºå¤šä¸ªå¼‚æ­¥æ“ä½œä¸­ï¼ŒPromise çš„ then å¯ä»¥è§£å†³å¤šå±‚å›è°ƒé—®é¢˜ã€‚\n\n```js\n// Promise è§£å†³å¤šå±‚åµŒå¥—é—®é¢˜\n\nfunction ajax(t) {\n  return new Promise(resolve => {\n    setTimeout(() => resolve(t + 200), t);\n  });\n}\n\nfunction step1(t) {\n  console.log(`step1 in ${t}ms`);\n  return ajax(t);\n}\n\nfunction step2(t) {\n  console.log(`step2 in ${t}ms`);\n  return ajax(t);\n}\n\nfunction step3(t) {\n  console.log(`step3 in ${t}ms`);\n  return ajax(t);\n}\n\nfunction submit() {\n  console.time('submit');\n  step1(200)\n    .then(time2 => step2(time2))\n    .then(time3 => step3(time3))\n    .then(result => {\n      console.log(`result is ${result}ms`);\n      console.timeEnd('submit');\n    });\n}\n\nsubmit();\n```\n\n```js\n// async å‡½æ•°å®ç°ï¼Œè§£å†³å¤šå±‚åµŒå¥—\n\nfunction ajax(t) {\n  return new Promise(resolve => {\n    setTimeout(() => resolve(t + 200), t);\n  });\n}\n\nfunction step1(t) {\n  console.log(`step1 in ${t}ms`);\n  return ajax(t);\n}\n\nfunction step2(t) {\n  console.log(`step2 in ${t}ms`);\n  return ajax(t);\n}\n\nfunction step3(t) {\n  console.log(`step3 in ${t}ms`);\n  return ajax(t);\n}\n\nasync function submit() {\n  console.time('submit');\n  const t1 = 200;\n  const t2 = await step1(t1);\n  const t3 = await step2(t2);\n  const result = await step3(t3);\n  console.log(`result is ${result}`);\n  console.timeEnd('submit');\n}\n\nsubmit();\n```\n\nè¾“å‡ºç»“æœ ğŸ‘‡ï¼š\n\n```text\nstep1 in 200ms\nstep2 in 400ms\nstep3 in 600ms\nresult is 800\nsubmit: 1209.85107421875ms\n```\n\nè€Œå¦‚æœéœ€æ±‚å˜æ›´ï¼Œæ¯ä¸€æ­¥çš„å‚æ•°éƒ½æ˜¯ä¹‹å‰æ­¥éª¤çš„ç»“æœåï¼Œasync å‡½æ•°å¯ä»¥å†™æˆï¼š\n\n```js\nfunction ajax(t) {\n  return new Promise(resolve => {\n    setTimeout(() => resolve(t + 200), t);\n  });\n}\n\nfunction step1(t1) {\n  console.log(`step1 in ${t1}ms`);\n  return ajax(t1);\n}\n\nfunction step2(t1, t2) {\n  console.log(`step2 in ${t1}ms,${t2}ms`);\n  return ajax(t1 + t2);\n}\n\nfunction step3(t1, t2, t3) {\n  console.log(`step3 in ${t1}ms,${t2}ms,${t3}ms`);\n  return ajax(t1 + t2 + t3);\n}\n\nasync function submit() {\n  console.time('submit');\n  const t1 = 200;\n  const t2 = await step1(t1);\n  const t3 = await step2(t1, t2);\n  const result = await step3(t1, t2, t3);\n  console.log(`result is ${result}`);\n  console.timeEnd('submit');\n}\n\nsubmit();\n```\n\nè¾“å‡ºç»“æœ ğŸ‘‡ï¼š\n\n```text\nstep1 in 200ms\nstep2 in 200ms,400ms\nstep3 in 200ms,400ms,800ms\nresult is 1600\nsubmit: 2210.47998046875ms\n```\n\n### async/await æ³¨æ„ç‚¹\n\n1.  `async` ç”¨æ¥å£°æ˜é‡Œé¢åŒ…è£¹çš„å†…å®¹ **èƒ½å¤Ÿä»¥åŒæ­¥çš„æ–¹å¼æ‰§è¡Œ**ï¼Œ`await` åˆ™æ˜¯è¿›è¡Œæ‰§è¡Œé¡ºåºæ§åˆ¶ï¼Œæ¯æ¬¡æ‰§è¡Œä¸€ä¸ª `await`ï¼Œé˜»å¡ä»£ç æ‰§è¡Œç­‰å¾… `await` è¿”å›å€¼ï¼Œç„¶åå†æ‰§è¡Œä¹‹åçš„ `await`\n2.  `await` åªèƒ½ç”¨åœ¨ `async` å‡½æ•°ä¹‹ä¸­ï¼Œç”¨åœ¨æ™®é€šå‡½æ•°ä¸­ä¼šæŠ¥é”™\n3.  `await` å‘½ä»¤åé¢çš„ Promise å¯¹è±¡ï¼Œè¿è¡Œç»“æœå¯èƒ½æ˜¯ `rejected`ï¼Œæ‰€ä»¥æœ€å¥½æŠŠ `await` å‘½ä»¤æ”¾åœ¨ `try...catch` ä»£ç å—ä¸­\n4.  `await` åé¢çš„è¡¨è¾¾å¼å¦‚æœä¸æ˜¯ Promise å®ä¾‹ï¼Œ`await` ä¼šé˜»å¡åé¢çš„ä»£ç ï¼Œç„¶åæ‰§è¡Œ `async` å¤–é¢çš„åŒæ­¥ä»£ç ï¼Œç­‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•åå›åˆ° `async` æ‰§è¡Œè¿™ä¸ªè¡¨è¾¾å¼ä½œä¸º `await` å†…å®¹ï¼Œè¯¦è§è¿™ä¸ª [JSFiddle](https://jsfiddle.net/zd4cbfrv/)\n5.  `await` åé¢çš„è¡¨è¾¾å¼æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œ`await` ä¹Ÿä¼šæš‚åœ `async` åé¢çš„ä»£ç ï¼Œå…ˆæ‰§è¡Œ `async` å¤–é¢çš„åŒæ­¥ä»£ç ï¼Œç­‰ç€ Promise å¯¹è±¡ `fulfilled`ï¼Œç„¶åæŠŠ `resolve` çš„å‚æ•°ä½œä¸º await è¡¨è¾¾å¼çš„è¿ç®—ç»“æœï¼Œè¯¦è§[è¿™é“](https://github.com/ifyour/learn-javascript/issues/15)é¢è¯•é¢˜\n\n#### async/await ç»“åˆ try/catch å†™æ³•\n\n```js\nasync function asyncAwait() {\n  try {\n    await promise();\n  } catch (err) {\n    console.log(err);\n  }\n}\n\n// å¦ä¸€ç§å†™æ³•\nasync function asyncAwait() {\n  await promise().catch(function(err) {\n    console.log(err);\n  });\n}\n```\n\n### æ€»ç»“\n\nAsync/await æ˜¯ ES7 çš„é‡è¦ç‰¹æ€§ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯ç›®å‰ç¤¾åŒºé‡Œå…¬è®¤çš„ä¼˜ç§€å¼‚æ­¥è§£å†³æ–¹æ¡ˆï¼Œå½“ä½ æ·±å…¥äº†è§£åŸç†åä¼šå‘ç°ä»¿ä½›çœ‹åˆ°äº†å¼‚æ­¥å›è°ƒéš§é“çš„å°½å¤´äº®å…‰ã€‚\n\n### å‚è€ƒ\n\n- [Generator å‡½æ•°çš„è¯­æ³• @é˜®ä¸€å³°ã€ŠECMAScript 6 å…¥é—¨ã€‹](http://es6.ruanyifeng.com/#docs/generator)\n- [async å‡½æ•° @é˜®ä¸€å³°ã€ŠECMAScript 6 å…¥é—¨ã€‹](http://es6.ruanyifeng.com/#docs/async)\n","source":"_posts/Async-await-æŸ¥æ¼è¡¥ç¼º.md","raw":"---\ntitle: Async/await æŸ¥æ¼è¡¥ç¼º\ncomments: true\ndate: 2018-07-22 14:44:15\ntags:\nfrom:\n---\n\nä¸Šå‘¨æœ«æˆ‘å¤ä¹ äº† Promise çš„ç”¨æ³•ï¼Œé€šè¿‡ä¸€äº›å®ä¾‹åŠ æ·±äº† Promise çš„ç†è§£ã€‚ä»Šå¤©æ¥çœ‹ä¸‹å¼‚æ­¥ç¼–ç¨‹çš„ç»ˆæè§£å†³æ–¹æ¡ˆ async/awaitã€‚JavaScript ä¸­çš„å¼‚æ­¥æ“ä½œä»æœ€åˆçš„ callback æ¼”è¿›åˆ° Promiseï¼Œå†åˆ° Generatorï¼Œéƒ½æ˜¯é€æ­¥çš„æ”¹è¿›ï¼Œè€Œ async å‡½æ•°çš„å‡ºç°ä»¿ä½›çœ‹åˆ°äº†å¼‚æ­¥æ–¹æ¡ˆçš„ç»ˆç‚¹ï¼Œç”¨åŒæ­¥çš„æ–¹å¼å†™å¼‚æ­¥ä»£ç ã€‚\n\n<!-- more -->\n\n### async å‡½æ•°\n\nç®€å•è§£é‡Šï¼šasync å‡½æ•°å°±æ˜¯ Generator å‡½æ•°çš„è¯­æ³•ç³–ã€‚\n\n```js\n// Generator å‡½æ•°å†™æ³•\n\nlet promise = function(val) {\n  return new Promise(function(resolve, reject) {\n    setTimeout(() => {\n      console.log(val);\n      resolve(val);\n    }, 1000);\n  });\n};\n\nlet gen = function*() {\n  let p1 = yield promise('1');\n  let p2 = yield promise('2');\n};\n\nlet genF = gen(); // Iterator å¯¹è±¡\ngenF.next(); // => 1\ngenF.next(); // => 2\n```\n\næ›´å¤š `yield` è¡¨è¾¾å¼å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š[Generator å‡½æ•°è¯­æ³•è§£æ](https://juejin.im/post/5a6db41351882573351a8d72)ã€‚\n\nä½¿ç”¨ async æ¥æ”¹å†™ä¸Šé¢çš„ `gen` å‡½æ•° ğŸ‘‡ï¼š\n\n```js\nlet gen = async function() {\n  let p1 = await promise('1');\n  let p2 = await promise('2');\n};\n\ngen();\n\n// è¾“å‡ºç»“æœ ğŸ‘‡ï¼š\n1\n2\n```\n\nasync å‡½æ•°æ˜¯åœ¨ Generator å‡½æ•°ä¸Šè¿›è¡Œçš„æ”¹è¿›ï¼Œè¯­æ³•ä¸Š Generator å‡½æ•°çš„æ˜Ÿå·æ¢æˆäº† `async`ï¼Œ`yield` æ¢æˆäº† `await`ã€‚\n\nè€Œ async ä¹Ÿä¸ Generator å‡½æ•° **ä¸åŒ**ï¼š\n\n- `async` è‡ªå¸¦å†…ç½®æ‰§è¡Œå™¨ï¼ŒGenerator å‡½æ•°éœ€è¦ä¾é æ‰§è¡Œå™¨ï¼Œå¹¶ä¸” `async` å¯ä»¥å’Œæ™®é€šå‡½æ•°ä¸€æ ·ï¼Œåªéœ€è¦ä¸€è¡Œ\n- ç›¸å¯¹ Generator å‡½æ•°ï¼Œ`async` å’Œ `await` è¯­ä¹‰æ›´æ¸…æ¥š\n- é€‚ç”¨æ€§å¼ºï¼Œ`yield` ååªèƒ½æ˜¯ Thunk å‡½æ•°å’Œ Promise å¯¹è±¡ï¼Œè€Œ `await` åå¯ä»¥æ˜¯ Promise å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ (æ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å‹ç­‰)\n\n### async ä½œç”¨\n\nå¯„äºˆ async å‡½æ•°çš„æœŸæœ›æ˜¯å¸Œæœ›å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³å¼‚æ­¥æ“ä½œé—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦ææ¸…æ¥š async å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆã€‚\n\n```js\nasync function asyncAwait() {\n  return 'async await';\n}\n\nlet a = asyncAwait();\nconsole.log(a);\n\n// è¾“å‡ºç»“æœ ğŸ‘‡ï¼š\nPromise {<resolved>: \"async await\"}\n```\n\nå¯ä»¥çœ‹å‡º async å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¦‚æœå‡½æ•°ä¸­ return ä¸€ä¸ªç›´æ¥é‡ï¼Œasync å‡½æ•°ä¼šå°è£…æˆ Promise å¯¹è±¡è¿”å›ï¼Œè€Œå¦‚æœæ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œasync å‡½æ•°ä¼šè¿”å› `undefined`:\n\n```js\n// æ²¡æœ‰è¿”å›å€¼æ—¶çš„è¾“å‡ºç»“æœ ğŸ‘‡ï¼š\nPromise {<resolved>: undefined}\n```\n\nåœ¨æ²¡æœ‰ç»“åˆ await æ—¶ï¼Œasync å‡½æ•°ä¼šç«‹å³æ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚\n\n### await ç­‰å¾…\n\nawait æ˜¯ä¸ªè¿ç®—ç¬¦ï¼Œç­‰å¾…çš„ç»“æœæ˜¯ Promise å¯¹è±¡æˆ–å…¶å®ƒå€¼ï¼Œæ¯”å¦‚ï¼š\n\n```js\nfunction func1() {\n  return 'async';\n}\n\nasync function func2() {\n  return Promise.resolve('await');\n}\n\nasync function asyncAwait() {\n  let f1 = await func1();\n  let f2 = await func2();\n  console.log(f1, f2);\n}\n\nasyncAwait();\n\n// è¾“å‡ºç»“æœ ğŸ‘‡ï¼š\nasync await\n```\n\nawait è¡¨è¾¾å¼çš„è¿ç®—å–å†³äºç­‰å¾…çš„ç»“æœï¼Œå¦‚æœå®ƒç­‰åˆ°çš„ä¸æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œé‚£è¿ç®—ç»“æœå°±æ˜¯å®ƒç­‰åˆ°çš„ä¸œè¥¿, è€Œå¦‚æœå®ƒç­‰åˆ°çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå®ƒä¼šé˜»å¡åé¢çš„ä»£ç ï¼Œç­‰ç€ Promise å¯¹è±¡ resolveï¼Œç„¶åå¾—åˆ° resolve çš„å€¼ï¼Œä½œä¸ºè¡¨è¾¾å¼çš„è¿ç®—ç»“æœã€‚\n\n<div class=\"tip\">**async å‡½æ•°è°ƒç”¨** ä¼šå°è£…åœ¨ Promise ä¸­ï¼Œè¿™ä¹Ÿæ˜¯ await éœ€è¦åœ¨ async å‡½æ•°ä¸­ä½¿ç”¨çš„åŸå› ã€‚</div>\n\n### async/await é“¾å¼å¤„ç†\n\nå¯¹äºå¤šä¸ªå¼‚æ­¥æ“ä½œä¸­ï¼ŒPromise çš„ then å¯ä»¥è§£å†³å¤šå±‚å›è°ƒé—®é¢˜ã€‚\n\n```js\n// Promise è§£å†³å¤šå±‚åµŒå¥—é—®é¢˜\n\nfunction ajax(t) {\n  return new Promise(resolve => {\n    setTimeout(() => resolve(t + 200), t);\n  });\n}\n\nfunction step1(t) {\n  console.log(`step1 in ${t}ms`);\n  return ajax(t);\n}\n\nfunction step2(t) {\n  console.log(`step2 in ${t}ms`);\n  return ajax(t);\n}\n\nfunction step3(t) {\n  console.log(`step3 in ${t}ms`);\n  return ajax(t);\n}\n\nfunction submit() {\n  console.time('submit');\n  step1(200)\n    .then(time2 => step2(time2))\n    .then(time3 => step3(time3))\n    .then(result => {\n      console.log(`result is ${result}ms`);\n      console.timeEnd('submit');\n    });\n}\n\nsubmit();\n```\n\n```js\n// async å‡½æ•°å®ç°ï¼Œè§£å†³å¤šå±‚åµŒå¥—\n\nfunction ajax(t) {\n  return new Promise(resolve => {\n    setTimeout(() => resolve(t + 200), t);\n  });\n}\n\nfunction step1(t) {\n  console.log(`step1 in ${t}ms`);\n  return ajax(t);\n}\n\nfunction step2(t) {\n  console.log(`step2 in ${t}ms`);\n  return ajax(t);\n}\n\nfunction step3(t) {\n  console.log(`step3 in ${t}ms`);\n  return ajax(t);\n}\n\nasync function submit() {\n  console.time('submit');\n  const t1 = 200;\n  const t2 = await step1(t1);\n  const t3 = await step2(t2);\n  const result = await step3(t3);\n  console.log(`result is ${result}`);\n  console.timeEnd('submit');\n}\n\nsubmit();\n```\n\nè¾“å‡ºç»“æœ ğŸ‘‡ï¼š\n\n```text\nstep1 in 200ms\nstep2 in 400ms\nstep3 in 600ms\nresult is 800\nsubmit: 1209.85107421875ms\n```\n\nè€Œå¦‚æœéœ€æ±‚å˜æ›´ï¼Œæ¯ä¸€æ­¥çš„å‚æ•°éƒ½æ˜¯ä¹‹å‰æ­¥éª¤çš„ç»“æœåï¼Œasync å‡½æ•°å¯ä»¥å†™æˆï¼š\n\n```js\nfunction ajax(t) {\n  return new Promise(resolve => {\n    setTimeout(() => resolve(t + 200), t);\n  });\n}\n\nfunction step1(t1) {\n  console.log(`step1 in ${t1}ms`);\n  return ajax(t1);\n}\n\nfunction step2(t1, t2) {\n  console.log(`step2 in ${t1}ms,${t2}ms`);\n  return ajax(t1 + t2);\n}\n\nfunction step3(t1, t2, t3) {\n  console.log(`step3 in ${t1}ms,${t2}ms,${t3}ms`);\n  return ajax(t1 + t2 + t3);\n}\n\nasync function submit() {\n  console.time('submit');\n  const t1 = 200;\n  const t2 = await step1(t1);\n  const t3 = await step2(t1, t2);\n  const result = await step3(t1, t2, t3);\n  console.log(`result is ${result}`);\n  console.timeEnd('submit');\n}\n\nsubmit();\n```\n\nè¾“å‡ºç»“æœ ğŸ‘‡ï¼š\n\n```text\nstep1 in 200ms\nstep2 in 200ms,400ms\nstep3 in 200ms,400ms,800ms\nresult is 1600\nsubmit: 2210.47998046875ms\n```\n\n### async/await æ³¨æ„ç‚¹\n\n1.  `async` ç”¨æ¥å£°æ˜é‡Œé¢åŒ…è£¹çš„å†…å®¹ **èƒ½å¤Ÿä»¥åŒæ­¥çš„æ–¹å¼æ‰§è¡Œ**ï¼Œ`await` åˆ™æ˜¯è¿›è¡Œæ‰§è¡Œé¡ºåºæ§åˆ¶ï¼Œæ¯æ¬¡æ‰§è¡Œä¸€ä¸ª `await`ï¼Œé˜»å¡ä»£ç æ‰§è¡Œç­‰å¾… `await` è¿”å›å€¼ï¼Œç„¶åå†æ‰§è¡Œä¹‹åçš„ `await`\n2.  `await` åªèƒ½ç”¨åœ¨ `async` å‡½æ•°ä¹‹ä¸­ï¼Œç”¨åœ¨æ™®é€šå‡½æ•°ä¸­ä¼šæŠ¥é”™\n3.  `await` å‘½ä»¤åé¢çš„ Promise å¯¹è±¡ï¼Œè¿è¡Œç»“æœå¯èƒ½æ˜¯ `rejected`ï¼Œæ‰€ä»¥æœ€å¥½æŠŠ `await` å‘½ä»¤æ”¾åœ¨ `try...catch` ä»£ç å—ä¸­\n4.  `await` åé¢çš„è¡¨è¾¾å¼å¦‚æœä¸æ˜¯ Promise å®ä¾‹ï¼Œ`await` ä¼šé˜»å¡åé¢çš„ä»£ç ï¼Œç„¶åæ‰§è¡Œ `async` å¤–é¢çš„åŒæ­¥ä»£ç ï¼Œç­‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•åå›åˆ° `async` æ‰§è¡Œè¿™ä¸ªè¡¨è¾¾å¼ä½œä¸º `await` å†…å®¹ï¼Œè¯¦è§è¿™ä¸ª [JSFiddle](https://jsfiddle.net/zd4cbfrv/)\n5.  `await` åé¢çš„è¡¨è¾¾å¼æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œ`await` ä¹Ÿä¼šæš‚åœ `async` åé¢çš„ä»£ç ï¼Œå…ˆæ‰§è¡Œ `async` å¤–é¢çš„åŒæ­¥ä»£ç ï¼Œç­‰ç€ Promise å¯¹è±¡ `fulfilled`ï¼Œç„¶åæŠŠ `resolve` çš„å‚æ•°ä½œä¸º await è¡¨è¾¾å¼çš„è¿ç®—ç»“æœï¼Œè¯¦è§[è¿™é“](https://github.com/ifyour/learn-javascript/issues/15)é¢è¯•é¢˜\n\n#### async/await ç»“åˆ try/catch å†™æ³•\n\n```js\nasync function asyncAwait() {\n  try {\n    await promise();\n  } catch (err) {\n    console.log(err);\n  }\n}\n\n// å¦ä¸€ç§å†™æ³•\nasync function asyncAwait() {\n  await promise().catch(function(err) {\n    console.log(err);\n  });\n}\n```\n\n### æ€»ç»“\n\nAsync/await æ˜¯ ES7 çš„é‡è¦ç‰¹æ€§ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯ç›®å‰ç¤¾åŒºé‡Œå…¬è®¤çš„ä¼˜ç§€å¼‚æ­¥è§£å†³æ–¹æ¡ˆï¼Œå½“ä½ æ·±å…¥äº†è§£åŸç†åä¼šå‘ç°ä»¿ä½›çœ‹åˆ°äº†å¼‚æ­¥å›è°ƒéš§é“çš„å°½å¤´äº®å…‰ã€‚\n\n### å‚è€ƒ\n\n- [Generator å‡½æ•°çš„è¯­æ³• @é˜®ä¸€å³°ã€ŠECMAScript 6 å…¥é—¨ã€‹](http://es6.ruanyifeng.com/#docs/generator)\n- [async å‡½æ•° @é˜®ä¸€å³°ã€ŠECMAScript 6 å…¥é—¨ã€‹](http://es6.ruanyifeng.com/#docs/async)\n","slug":"Async-await-æŸ¥æ¼è¡¥ç¼º","published":1,"updated":"2019-12-07T04:53:18.084Z","layout":"post","photos":[],"link":"","_id":"ck3v60jt60003r9q915pa1whu","content":"<p>ä¸Šå‘¨æœ«æˆ‘å¤ä¹ äº† Promise çš„ç”¨æ³•ï¼Œé€šè¿‡ä¸€äº›å®ä¾‹åŠ æ·±äº† Promise çš„ç†è§£ã€‚ä»Šå¤©æ¥çœ‹ä¸‹å¼‚æ­¥ç¼–ç¨‹çš„ç»ˆæè§£å†³æ–¹æ¡ˆ async/awaitã€‚JavaScript ä¸­çš„å¼‚æ­¥æ“ä½œä»æœ€åˆçš„ callback æ¼”è¿›åˆ° Promiseï¼Œå†åˆ° Generatorï¼Œéƒ½æ˜¯é€æ­¥çš„æ”¹è¿›ï¼Œè€Œ async å‡½æ•°çš„å‡ºç°ä»¿ä½›çœ‹åˆ°äº†å¼‚æ­¥æ–¹æ¡ˆçš„ç»ˆç‚¹ï¼Œç”¨åŒæ­¥çš„æ–¹å¼å†™å¼‚æ­¥ä»£ç ã€‚</p>\n<a id=\"more\"></a>\n<h3 id=\"async-å‡½æ•°\"><a href=\"#async-å‡½æ•°\" class=\"headerlink\" title=\"async å‡½æ•°\"></a>async å‡½æ•°</h3><p>ç®€å•è§£é‡Šï¼šasync å‡½æ•°å°±æ˜¯ Generator å‡½æ•°çš„è¯­æ³•ç³–ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Generator å‡½æ•°å†™æ³•</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> promise = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">val</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(val);</span><br><span class=\"line\">      resolve(val);</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> gen = <span class=\"function\"><span class=\"keyword\">function</span>*(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> p1 = <span class=\"keyword\">yield</span> promise(<span class=\"string\">'1'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> p2 = <span class=\"keyword\">yield</span> promise(<span class=\"string\">'2'</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> genF = gen(); <span class=\"comment\">// Iterator å¯¹è±¡</span></span><br><span class=\"line\">genF.next(); <span class=\"comment\">// =&gt; 1</span></span><br><span class=\"line\">genF.next(); <span class=\"comment\">// =&gt; 2</span></span><br></pre></td></tr></table></figure>\n<p>æ›´å¤š <code>yield</code> è¡¨è¾¾å¼å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href=\"https://juejin.im/post/5a6db41351882573351a8d72\" target=\"_blank\" rel=\"noopener\">Generator å‡½æ•°è¯­æ³•è§£æ</a>ã€‚</p>\n<p>ä½¿ç”¨ async æ¥æ”¹å†™ä¸Šé¢çš„ <code>gen</code> å‡½æ•° ğŸ‘‡ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> gen = <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> p1 = <span class=\"keyword\">await</span> promise(<span class=\"string\">'1'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> p2 = <span class=\"keyword\">await</span> promise(<span class=\"string\">'2'</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">gen();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºç»“æœ ğŸ‘‡ï¼š</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n<p>async å‡½æ•°æ˜¯åœ¨ Generator å‡½æ•°ä¸Šè¿›è¡Œçš„æ”¹è¿›ï¼Œè¯­æ³•ä¸Š Generator å‡½æ•°çš„æ˜Ÿå·æ¢æˆäº† <code>async</code>ï¼Œ<code>yield</code> æ¢æˆäº† <code>await</code>ã€‚</p>\n<p>è€Œ async ä¹Ÿä¸ Generator å‡½æ•° <strong>ä¸åŒ</strong>ï¼š</p>\n<ul>\n<li><code>async</code> è‡ªå¸¦å†…ç½®æ‰§è¡Œå™¨ï¼ŒGenerator å‡½æ•°éœ€è¦ä¾é æ‰§è¡Œå™¨ï¼Œå¹¶ä¸” <code>async</code> å¯ä»¥å’Œæ™®é€šå‡½æ•°ä¸€æ ·ï¼Œåªéœ€è¦ä¸€è¡Œ</li>\n<li>ç›¸å¯¹ Generator å‡½æ•°ï¼Œ<code>async</code> å’Œ <code>await</code> è¯­ä¹‰æ›´æ¸…æ¥š</li>\n<li>é€‚ç”¨æ€§å¼ºï¼Œ<code>yield</code> ååªèƒ½æ˜¯ Thunk å‡½æ•°å’Œ Promise å¯¹è±¡ï¼Œè€Œ <code>await</code> åå¯ä»¥æ˜¯ Promise å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ (æ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å‹ç­‰)</li>\n</ul>\n<h3 id=\"async-ä½œç”¨\"><a href=\"#async-ä½œç”¨\" class=\"headerlink\" title=\"async ä½œç”¨\"></a>async ä½œç”¨</h3><p>å¯„äºˆ async å‡½æ•°çš„æœŸæœ›æ˜¯å¸Œæœ›å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³å¼‚æ­¥æ“ä½œé—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦ææ¸…æ¥š async å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">asyncAwait</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'async await'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> a = asyncAwait();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºç»“æœ ğŸ‘‡ï¼š</span></span><br><span class=\"line\"><span class=\"built_in\">Promise</span> &#123;&lt;resolved&gt;: <span class=\"string\">\"async await\"</span>&#125;</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹å‡º async å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¦‚æœå‡½æ•°ä¸­ return ä¸€ä¸ªç›´æ¥é‡ï¼Œasync å‡½æ•°ä¼šå°è£…æˆ Promise å¯¹è±¡è¿”å›ï¼Œè€Œå¦‚æœæ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œasync å‡½æ•°ä¼šè¿”å› <code>undefined</code>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ²¡æœ‰è¿”å›å€¼æ—¶çš„è¾“å‡ºç»“æœ ğŸ‘‡ï¼š</span></span><br><span class=\"line\"><span class=\"built_in\">Promise</span> &#123;&lt;resolved&gt;: <span class=\"literal\">undefined</span>&#125;</span><br></pre></td></tr></table></figure>\n<p>åœ¨æ²¡æœ‰ç»“åˆ await æ—¶ï¼Œasync å‡½æ•°ä¼šç«‹å³æ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚</p>\n<h3 id=\"await-ç­‰å¾…\"><a href=\"#await-ç­‰å¾…\" class=\"headerlink\" title=\"await ç­‰å¾…\"></a>await ç­‰å¾…</h3><p>await æ˜¯ä¸ªè¿ç®—ç¬¦ï¼Œç­‰å¾…çš„ç»“æœæ˜¯ Promise å¯¹è±¡æˆ–å…¶å®ƒå€¼ï¼Œæ¯”å¦‚ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'async'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'await'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">asyncAwait</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> f1 = <span class=\"keyword\">await</span> func1();</span><br><span class=\"line\">  <span class=\"keyword\">let</span> f2 = <span class=\"keyword\">await</span> func2();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(f1, f2);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">asyncAwait();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºç»“æœ ğŸ‘‡ï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">await</span></span><br></pre></td></tr></table></figure>\n<p>await è¡¨è¾¾å¼çš„è¿ç®—å–å†³äºç­‰å¾…çš„ç»“æœï¼Œå¦‚æœå®ƒç­‰åˆ°çš„ä¸æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œé‚£è¿ç®—ç»“æœå°±æ˜¯å®ƒç­‰åˆ°çš„ä¸œè¥¿, è€Œå¦‚æœå®ƒç­‰åˆ°çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå®ƒä¼šé˜»å¡åé¢çš„ä»£ç ï¼Œç­‰ç€ Promise å¯¹è±¡ resolveï¼Œç„¶åå¾—åˆ° resolve çš„å€¼ï¼Œä½œä¸ºè¡¨è¾¾å¼çš„è¿ç®—ç»“æœã€‚</p>\n<div class=\"tip\"><strong>async å‡½æ•°è°ƒç”¨</strong> ä¼šå°è£…åœ¨ Promise ä¸­ï¼Œè¿™ä¹Ÿæ˜¯ await éœ€è¦åœ¨ async å‡½æ•°ä¸­ä½¿ç”¨çš„åŸå› ã€‚</div>\n\n<h3 id=\"async-await-é“¾å¼å¤„ç†\"><a href=\"#async-await-é“¾å¼å¤„ç†\" class=\"headerlink\" title=\"async/await é“¾å¼å¤„ç†\"></a>async/await é“¾å¼å¤„ç†</h3><p>å¯¹äºå¤šä¸ªå¼‚æ­¥æ“ä½œä¸­ï¼ŒPromise çš„ then å¯ä»¥è§£å†³å¤šå±‚å›è°ƒé—®é¢˜ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Promise è§£å†³å¤šå±‚åµŒå¥—é—®é¢˜</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajax</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> resolve(t + <span class=\"number\">200</span>), t);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step1</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step1 in <span class=\"subst\">$&#123;t&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step2</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step2 in <span class=\"subst\">$&#123;t&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step3</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step3 in <span class=\"subst\">$&#123;t&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">submit</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">'submit'</span>);</span><br><span class=\"line\">  step1(<span class=\"number\">200</span>)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">time2</span> =&gt;</span> step2(time2))</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">time3</span> =&gt;</span> step3(time3))</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">result</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`result is <span class=\"subst\">$&#123;result&#125;</span>ms`</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">'submit'</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">submit();</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// async å‡½æ•°å®ç°ï¼Œè§£å†³å¤šå±‚åµŒå¥—</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajax</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> resolve(t + <span class=\"number\">200</span>), t);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step1</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step1 in <span class=\"subst\">$&#123;t&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step2</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step2 in <span class=\"subst\">$&#123;t&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step3</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step3 in <span class=\"subst\">$&#123;t&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">submit</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">'submit'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> t1 = <span class=\"number\">200</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> t2 = <span class=\"keyword\">await</span> step1(t1);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> t3 = <span class=\"keyword\">await</span> step2(t2);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> step3(t3);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`result is <span class=\"subst\">$&#123;result&#125;</span>`</span>);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">'submit'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">submit();</span><br></pre></td></tr></table></figure>\n<p>è¾“å‡ºç»“æœ ğŸ‘‡ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">step1 in 200ms</span><br><span class=\"line\">step2 in 400ms</span><br><span class=\"line\">step3 in 600ms</span><br><span class=\"line\">result is 800</span><br><span class=\"line\">submit: 1209.85107421875ms</span><br></pre></td></tr></table></figure>\n<p>è€Œå¦‚æœéœ€æ±‚å˜æ›´ï¼Œæ¯ä¸€æ­¥çš„å‚æ•°éƒ½æ˜¯ä¹‹å‰æ­¥éª¤çš„ç»“æœåï¼Œasync å‡½æ•°å¯ä»¥å†™æˆï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajax</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> resolve(t + <span class=\"number\">200</span>), t);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step1</span>(<span class=\"params\">t1</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step1 in <span class=\"subst\">$&#123;t1&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t1);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step2</span>(<span class=\"params\">t1, t2</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step2 in <span class=\"subst\">$&#123;t1&#125;</span>ms,<span class=\"subst\">$&#123;t2&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t1 + t2);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step3</span>(<span class=\"params\">t1, t2, t3</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step3 in <span class=\"subst\">$&#123;t1&#125;</span>ms,<span class=\"subst\">$&#123;t2&#125;</span>ms,<span class=\"subst\">$&#123;t3&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t1 + t2 + t3);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">submit</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">'submit'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> t1 = <span class=\"number\">200</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> t2 = <span class=\"keyword\">await</span> step1(t1);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> t3 = <span class=\"keyword\">await</span> step2(t1, t2);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> step3(t1, t2, t3);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`result is <span class=\"subst\">$&#123;result&#125;</span>`</span>);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">'submit'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">submit();</span><br></pre></td></tr></table></figure>\n<p>è¾“å‡ºç»“æœ ğŸ‘‡ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">step1 in 200ms</span><br><span class=\"line\">step2 in 200ms,400ms</span><br><span class=\"line\">step3 in 200ms,400ms,800ms</span><br><span class=\"line\">result is 1600</span><br><span class=\"line\">submit: 2210.47998046875ms</span><br></pre></td></tr></table></figure>\n<h3 id=\"async-await-æ³¨æ„ç‚¹\"><a href=\"#async-await-æ³¨æ„ç‚¹\" class=\"headerlink\" title=\"async/await æ³¨æ„ç‚¹\"></a>async/await æ³¨æ„ç‚¹</h3><ol>\n<li><code>async</code> ç”¨æ¥å£°æ˜é‡Œé¢åŒ…è£¹çš„å†…å®¹ <strong>èƒ½å¤Ÿä»¥åŒæ­¥çš„æ–¹å¼æ‰§è¡Œ</strong>ï¼Œ<code>await</code> åˆ™æ˜¯è¿›è¡Œæ‰§è¡Œé¡ºåºæ§åˆ¶ï¼Œæ¯æ¬¡æ‰§è¡Œä¸€ä¸ª <code>await</code>ï¼Œé˜»å¡ä»£ç æ‰§è¡Œç­‰å¾… <code>await</code> è¿”å›å€¼ï¼Œç„¶åå†æ‰§è¡Œä¹‹åçš„ <code>await</code></li>\n<li><code>await</code> åªèƒ½ç”¨åœ¨ <code>async</code> å‡½æ•°ä¹‹ä¸­ï¼Œç”¨åœ¨æ™®é€šå‡½æ•°ä¸­ä¼šæŠ¥é”™</li>\n<li><code>await</code> å‘½ä»¤åé¢çš„ Promise å¯¹è±¡ï¼Œè¿è¡Œç»“æœå¯èƒ½æ˜¯ <code>rejected</code>ï¼Œæ‰€ä»¥æœ€å¥½æŠŠ <code>await</code> å‘½ä»¤æ”¾åœ¨ <code>try...catch</code> ä»£ç å—ä¸­</li>\n<li><code>await</code> åé¢çš„è¡¨è¾¾å¼å¦‚æœä¸æ˜¯ Promise å®ä¾‹ï¼Œ<code>await</code> ä¼šé˜»å¡åé¢çš„ä»£ç ï¼Œç„¶åæ‰§è¡Œ <code>async</code> å¤–é¢çš„åŒæ­¥ä»£ç ï¼Œç­‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•åå›åˆ° <code>async</code> æ‰§è¡Œè¿™ä¸ªè¡¨è¾¾å¼ä½œä¸º <code>await</code> å†…å®¹ï¼Œè¯¦è§è¿™ä¸ª <a href=\"https://jsfiddle.net/zd4cbfrv/\" target=\"_blank\" rel=\"noopener\">JSFiddle</a></li>\n<li><code>await</code> åé¢çš„è¡¨è¾¾å¼æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œ<code>await</code> ä¹Ÿä¼šæš‚åœ <code>async</code> åé¢çš„ä»£ç ï¼Œå…ˆæ‰§è¡Œ <code>async</code> å¤–é¢çš„åŒæ­¥ä»£ç ï¼Œç­‰ç€ Promise å¯¹è±¡ <code>fulfilled</code>ï¼Œç„¶åæŠŠ <code>resolve</code> çš„å‚æ•°ä½œä¸º await è¡¨è¾¾å¼çš„è¿ç®—ç»“æœï¼Œè¯¦è§<a href=\"https://github.com/ifyour/learn-javascript/issues/15\" target=\"_blank\" rel=\"noopener\">è¿™é“</a>é¢è¯•é¢˜</li>\n</ol>\n<h4 id=\"async-await-ç»“åˆ-try-catch-å†™æ³•\"><a href=\"#async-await-ç»“åˆ-try-catch-å†™æ³•\" class=\"headerlink\" title=\"async/await ç»“åˆ try/catch å†™æ³•\"></a>async/await ç»“åˆ try/catch å†™æ³•</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">asyncAwait</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> promise();</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å¦ä¸€ç§å†™æ³•</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">asyncAwait</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">await</span> promise().catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>Async/await æ˜¯ ES7 çš„é‡è¦ç‰¹æ€§ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯ç›®å‰ç¤¾åŒºé‡Œå…¬è®¤çš„ä¼˜ç§€å¼‚æ­¥è§£å†³æ–¹æ¡ˆï¼Œå½“ä½ æ·±å…¥äº†è§£åŸç†åä¼šå‘ç°ä»¿ä½›çœ‹åˆ°äº†å¼‚æ­¥å›è°ƒéš§é“çš„å°½å¤´äº®å…‰ã€‚</p>\n<h3 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h3><ul>\n<li><a href=\"http://es6.ruanyifeng.com/#docs/generator\" target=\"_blank\" rel=\"noopener\">Generator å‡½æ•°çš„è¯­æ³• @é˜®ä¸€å³°ã€ŠECMAScript 6 å…¥é—¨ã€‹</a></li>\n<li><a href=\"http://es6.ruanyifeng.com/#docs/async\" target=\"_blank\" rel=\"noopener\">async å‡½æ•° @é˜®ä¸€å³°ã€ŠECMAScript 6 å…¥é—¨ã€‹</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>ä¸Šå‘¨æœ«æˆ‘å¤ä¹ äº† Promise çš„ç”¨æ³•ï¼Œé€šè¿‡ä¸€äº›å®ä¾‹åŠ æ·±äº† Promise çš„ç†è§£ã€‚ä»Šå¤©æ¥çœ‹ä¸‹å¼‚æ­¥ç¼–ç¨‹çš„ç»ˆæè§£å†³æ–¹æ¡ˆ async/awaitã€‚JavaScript ä¸­çš„å¼‚æ­¥æ“ä½œä»æœ€åˆçš„ callback æ¼”è¿›åˆ° Promiseï¼Œå†åˆ° Generatorï¼Œéƒ½æ˜¯é€æ­¥çš„æ”¹è¿›ï¼Œè€Œ async å‡½æ•°çš„å‡ºç°ä»¿ä½›çœ‹åˆ°äº†å¼‚æ­¥æ–¹æ¡ˆçš„ç»ˆç‚¹ï¼Œç”¨åŒæ­¥çš„æ–¹å¼å†™å¼‚æ­¥ä»£ç ã€‚</p>","more":"<h3 id=\"async-å‡½æ•°\"><a href=\"#async-å‡½æ•°\" class=\"headerlink\" title=\"async å‡½æ•°\"></a>async å‡½æ•°</h3><p>ç®€å•è§£é‡Šï¼šasync å‡½æ•°å°±æ˜¯ Generator å‡½æ•°çš„è¯­æ³•ç³–ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Generator å‡½æ•°å†™æ³•</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> promise = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">val</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(val);</span><br><span class=\"line\">      resolve(val);</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> gen = <span class=\"function\"><span class=\"keyword\">function</span>*(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> p1 = <span class=\"keyword\">yield</span> promise(<span class=\"string\">'1'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> p2 = <span class=\"keyword\">yield</span> promise(<span class=\"string\">'2'</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> genF = gen(); <span class=\"comment\">// Iterator å¯¹è±¡</span></span><br><span class=\"line\">genF.next(); <span class=\"comment\">// =&gt; 1</span></span><br><span class=\"line\">genF.next(); <span class=\"comment\">// =&gt; 2</span></span><br></pre></td></tr></table></figure>\n<p>æ›´å¤š <code>yield</code> è¡¨è¾¾å¼å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href=\"https://juejin.im/post/5a6db41351882573351a8d72\" target=\"_blank\" rel=\"noopener\">Generator å‡½æ•°è¯­æ³•è§£æ</a>ã€‚</p>\n<p>ä½¿ç”¨ async æ¥æ”¹å†™ä¸Šé¢çš„ <code>gen</code> å‡½æ•° ğŸ‘‡ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> gen = <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> p1 = <span class=\"keyword\">await</span> promise(<span class=\"string\">'1'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> p2 = <span class=\"keyword\">await</span> promise(<span class=\"string\">'2'</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">gen();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºç»“æœ ğŸ‘‡ï¼š</span></span><br><span class=\"line\"><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n<p>async å‡½æ•°æ˜¯åœ¨ Generator å‡½æ•°ä¸Šè¿›è¡Œçš„æ”¹è¿›ï¼Œè¯­æ³•ä¸Š Generator å‡½æ•°çš„æ˜Ÿå·æ¢æˆäº† <code>async</code>ï¼Œ<code>yield</code> æ¢æˆäº† <code>await</code>ã€‚</p>\n<p>è€Œ async ä¹Ÿä¸ Generator å‡½æ•° <strong>ä¸åŒ</strong>ï¼š</p>\n<ul>\n<li><code>async</code> è‡ªå¸¦å†…ç½®æ‰§è¡Œå™¨ï¼ŒGenerator å‡½æ•°éœ€è¦ä¾é æ‰§è¡Œå™¨ï¼Œå¹¶ä¸” <code>async</code> å¯ä»¥å’Œæ™®é€šå‡½æ•°ä¸€æ ·ï¼Œåªéœ€è¦ä¸€è¡Œ</li>\n<li>ç›¸å¯¹ Generator å‡½æ•°ï¼Œ<code>async</code> å’Œ <code>await</code> è¯­ä¹‰æ›´æ¸…æ¥š</li>\n<li>é€‚ç”¨æ€§å¼ºï¼Œ<code>yield</code> ååªèƒ½æ˜¯ Thunk å‡½æ•°å’Œ Promise å¯¹è±¡ï¼Œè€Œ <code>await</code> åå¯ä»¥æ˜¯ Promise å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ (æ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å‹ç­‰)</li>\n</ul>\n<h3 id=\"async-ä½œç”¨\"><a href=\"#async-ä½œç”¨\" class=\"headerlink\" title=\"async ä½œç”¨\"></a>async ä½œç”¨</h3><p>å¯„äºˆ async å‡½æ•°çš„æœŸæœ›æ˜¯å¸Œæœ›å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³å¼‚æ­¥æ“ä½œé—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦ææ¸…æ¥š async å‡½æ•°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">asyncAwait</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'async await'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> a = asyncAwait();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(a);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºç»“æœ ğŸ‘‡ï¼š</span></span><br><span class=\"line\"><span class=\"built_in\">Promise</span> &#123;&lt;resolved&gt;: <span class=\"string\">\"async await\"</span>&#125;</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹å‡º async å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¦‚æœå‡½æ•°ä¸­ return ä¸€ä¸ªç›´æ¥é‡ï¼Œasync å‡½æ•°ä¼šå°è£…æˆ Promise å¯¹è±¡è¿”å›ï¼Œè€Œå¦‚æœæ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œasync å‡½æ•°ä¼šè¿”å› <code>undefined</code>:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ²¡æœ‰è¿”å›å€¼æ—¶çš„è¾“å‡ºç»“æœ ğŸ‘‡ï¼š</span></span><br><span class=\"line\"><span class=\"built_in\">Promise</span> &#123;&lt;resolved&gt;: <span class=\"literal\">undefined</span>&#125;</span><br></pre></td></tr></table></figure>\n<p>åœ¨æ²¡æœ‰ç»“åˆ await æ—¶ï¼Œasync å‡½æ•°ä¼šç«‹å³æ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚</p>\n<h3 id=\"await-ç­‰å¾…\"><a href=\"#await-ç­‰å¾…\" class=\"headerlink\" title=\"await ç­‰å¾…\"></a>await ç­‰å¾…</h3><p>await æ˜¯ä¸ªè¿ç®—ç¬¦ï¼Œç­‰å¾…çš„ç»“æœæ˜¯ Promise å¯¹è±¡æˆ–å…¶å®ƒå€¼ï¼Œæ¯”å¦‚ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func1</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'async'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func2</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'await'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">asyncAwait</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> f1 = <span class=\"keyword\">await</span> func1();</span><br><span class=\"line\">  <span class=\"keyword\">let</span> f2 = <span class=\"keyword\">await</span> func2();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(f1, f2);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">asyncAwait();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¾“å‡ºç»“æœ ğŸ‘‡ï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"keyword\">await</span></span><br></pre></td></tr></table></figure>\n<p>await è¡¨è¾¾å¼çš„è¿ç®—å–å†³äºç­‰å¾…çš„ç»“æœï¼Œå¦‚æœå®ƒç­‰åˆ°çš„ä¸æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œé‚£è¿ç®—ç»“æœå°±æ˜¯å®ƒç­‰åˆ°çš„ä¸œè¥¿, è€Œå¦‚æœå®ƒç­‰åˆ°çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå®ƒä¼šé˜»å¡åé¢çš„ä»£ç ï¼Œç­‰ç€ Promise å¯¹è±¡ resolveï¼Œç„¶åå¾—åˆ° resolve çš„å€¼ï¼Œä½œä¸ºè¡¨è¾¾å¼çš„è¿ç®—ç»“æœã€‚</p>\n<div class=\"tip\"><strong>async å‡½æ•°è°ƒç”¨</strong> ä¼šå°è£…åœ¨ Promise ä¸­ï¼Œè¿™ä¹Ÿæ˜¯ await éœ€è¦åœ¨ async å‡½æ•°ä¸­ä½¿ç”¨çš„åŸå› ã€‚</div>\n\n<h3 id=\"async-await-é“¾å¼å¤„ç†\"><a href=\"#async-await-é“¾å¼å¤„ç†\" class=\"headerlink\" title=\"async/await é“¾å¼å¤„ç†\"></a>async/await é“¾å¼å¤„ç†</h3><p>å¯¹äºå¤šä¸ªå¼‚æ­¥æ“ä½œä¸­ï¼ŒPromise çš„ then å¯ä»¥è§£å†³å¤šå±‚å›è°ƒé—®é¢˜ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Promise è§£å†³å¤šå±‚åµŒå¥—é—®é¢˜</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajax</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> resolve(t + <span class=\"number\">200</span>), t);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step1</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step1 in <span class=\"subst\">$&#123;t&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step2</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step2 in <span class=\"subst\">$&#123;t&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step3</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step3 in <span class=\"subst\">$&#123;t&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">submit</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">'submit'</span>);</span><br><span class=\"line\">  step1(<span class=\"number\">200</span>)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">time2</span> =&gt;</span> step2(time2))</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">time3</span> =&gt;</span> step3(time3))</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">result</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`result is <span class=\"subst\">$&#123;result&#125;</span>ms`</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">'submit'</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">submit();</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// async å‡½æ•°å®ç°ï¼Œè§£å†³å¤šå±‚åµŒå¥—</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajax</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> resolve(t + <span class=\"number\">200</span>), t);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step1</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step1 in <span class=\"subst\">$&#123;t&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step2</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step2 in <span class=\"subst\">$&#123;t&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step3</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step3 in <span class=\"subst\">$&#123;t&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">submit</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">'submit'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> t1 = <span class=\"number\">200</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> t2 = <span class=\"keyword\">await</span> step1(t1);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> t3 = <span class=\"keyword\">await</span> step2(t2);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> step3(t3);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`result is <span class=\"subst\">$&#123;result&#125;</span>`</span>);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">'submit'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">submit();</span><br></pre></td></tr></table></figure>\n<p>è¾“å‡ºç»“æœ ğŸ‘‡ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">step1 in 200ms</span><br><span class=\"line\">step2 in 400ms</span><br><span class=\"line\">step3 in 600ms</span><br><span class=\"line\">result is 800</span><br><span class=\"line\">submit: 1209.85107421875ms</span><br></pre></td></tr></table></figure>\n<p>è€Œå¦‚æœéœ€æ±‚å˜æ›´ï¼Œæ¯ä¸€æ­¥çš„å‚æ•°éƒ½æ˜¯ä¹‹å‰æ­¥éª¤çš„ç»“æœåï¼Œasync å‡½æ•°å¯ä»¥å†™æˆï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ajax</span>(<span class=\"params\">t</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> resolve(t + <span class=\"number\">200</span>), t);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step1</span>(<span class=\"params\">t1</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step1 in <span class=\"subst\">$&#123;t1&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t1);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step2</span>(<span class=\"params\">t1, t2</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step2 in <span class=\"subst\">$&#123;t1&#125;</span>ms,<span class=\"subst\">$&#123;t2&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t1 + t2);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">step3</span>(<span class=\"params\">t1, t2, t3</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`step3 in <span class=\"subst\">$&#123;t1&#125;</span>ms,<span class=\"subst\">$&#123;t2&#125;</span>ms,<span class=\"subst\">$&#123;t3&#125;</span>ms`</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ajax(t1 + t2 + t3);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">submit</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">'submit'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> t1 = <span class=\"number\">200</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> t2 = <span class=\"keyword\">await</span> step1(t1);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> t3 = <span class=\"keyword\">await</span> step2(t1, t2);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> step3(t1, t2, t3);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`result is <span class=\"subst\">$&#123;result&#125;</span>`</span>);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">'submit'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">submit();</span><br></pre></td></tr></table></figure>\n<p>è¾“å‡ºç»“æœ ğŸ‘‡ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">step1 in 200ms</span><br><span class=\"line\">step2 in 200ms,400ms</span><br><span class=\"line\">step3 in 200ms,400ms,800ms</span><br><span class=\"line\">result is 1600</span><br><span class=\"line\">submit: 2210.47998046875ms</span><br></pre></td></tr></table></figure>\n<h3 id=\"async-await-æ³¨æ„ç‚¹\"><a href=\"#async-await-æ³¨æ„ç‚¹\" class=\"headerlink\" title=\"async/await æ³¨æ„ç‚¹\"></a>async/await æ³¨æ„ç‚¹</h3><ol>\n<li><code>async</code> ç”¨æ¥å£°æ˜é‡Œé¢åŒ…è£¹çš„å†…å®¹ <strong>èƒ½å¤Ÿä»¥åŒæ­¥çš„æ–¹å¼æ‰§è¡Œ</strong>ï¼Œ<code>await</code> åˆ™æ˜¯è¿›è¡Œæ‰§è¡Œé¡ºåºæ§åˆ¶ï¼Œæ¯æ¬¡æ‰§è¡Œä¸€ä¸ª <code>await</code>ï¼Œé˜»å¡ä»£ç æ‰§è¡Œç­‰å¾… <code>await</code> è¿”å›å€¼ï¼Œç„¶åå†æ‰§è¡Œä¹‹åçš„ <code>await</code></li>\n<li><code>await</code> åªèƒ½ç”¨åœ¨ <code>async</code> å‡½æ•°ä¹‹ä¸­ï¼Œç”¨åœ¨æ™®é€šå‡½æ•°ä¸­ä¼šæŠ¥é”™</li>\n<li><code>await</code> å‘½ä»¤åé¢çš„ Promise å¯¹è±¡ï¼Œè¿è¡Œç»“æœå¯èƒ½æ˜¯ <code>rejected</code>ï¼Œæ‰€ä»¥æœ€å¥½æŠŠ <code>await</code> å‘½ä»¤æ”¾åœ¨ <code>try...catch</code> ä»£ç å—ä¸­</li>\n<li><code>await</code> åé¢çš„è¡¨è¾¾å¼å¦‚æœä¸æ˜¯ Promise å®ä¾‹ï¼Œ<code>await</code> ä¼šé˜»å¡åé¢çš„ä»£ç ï¼Œç„¶åæ‰§è¡Œ <code>async</code> å¤–é¢çš„åŒæ­¥ä»£ç ï¼Œç­‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•åå›åˆ° <code>async</code> æ‰§è¡Œè¿™ä¸ªè¡¨è¾¾å¼ä½œä¸º <code>await</code> å†…å®¹ï¼Œè¯¦è§è¿™ä¸ª <a href=\"https://jsfiddle.net/zd4cbfrv/\" target=\"_blank\" rel=\"noopener\">JSFiddle</a></li>\n<li><code>await</code> åé¢çš„è¡¨è¾¾å¼æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œ<code>await</code> ä¹Ÿä¼šæš‚åœ <code>async</code> åé¢çš„ä»£ç ï¼Œå…ˆæ‰§è¡Œ <code>async</code> å¤–é¢çš„åŒæ­¥ä»£ç ï¼Œç­‰ç€ Promise å¯¹è±¡ <code>fulfilled</code>ï¼Œç„¶åæŠŠ <code>resolve</code> çš„å‚æ•°ä½œä¸º await è¡¨è¾¾å¼çš„è¿ç®—ç»“æœï¼Œè¯¦è§<a href=\"https://github.com/ifyour/learn-javascript/issues/15\" target=\"_blank\" rel=\"noopener\">è¿™é“</a>é¢è¯•é¢˜</li>\n</ol>\n<h4 id=\"async-await-ç»“åˆ-try-catch-å†™æ³•\"><a href=\"#async-await-ç»“åˆ-try-catch-å†™æ³•\" class=\"headerlink\" title=\"async/await ç»“åˆ try/catch å†™æ³•\"></a>async/await ç»“åˆ try/catch å†™æ³•</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">asyncAwait</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> promise();</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å¦ä¸€ç§å†™æ³•</span></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">asyncAwait</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">await</span> promise().catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>Async/await æ˜¯ ES7 çš„é‡è¦ç‰¹æ€§ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯ç›®å‰ç¤¾åŒºé‡Œå…¬è®¤çš„ä¼˜ç§€å¼‚æ­¥è§£å†³æ–¹æ¡ˆï¼Œå½“ä½ æ·±å…¥äº†è§£åŸç†åä¼šå‘ç°ä»¿ä½›çœ‹åˆ°äº†å¼‚æ­¥å›è°ƒéš§é“çš„å°½å¤´äº®å…‰ã€‚</p>\n<h3 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h3><ul>\n<li><a href=\"http://es6.ruanyifeng.com/#docs/generator\" target=\"_blank\" rel=\"noopener\">Generator å‡½æ•°çš„è¯­æ³• @é˜®ä¸€å³°ã€ŠECMAScript 6 å…¥é—¨ã€‹</a></li>\n<li><a href=\"http://es6.ruanyifeng.com/#docs/async\" target=\"_blank\" rel=\"noopener\">async å‡½æ•° @é˜®ä¸€å³°ã€ŠECMAScript 6 å…¥é—¨ã€‹</a></li>\n</ul>"},{"title":"CentOS 6 x86 Node.js + MongoDB + Express ç¯å¢ƒé…ç½®ç¬”è®°","date":"2015-01-01T12:18:33.000Z","comments":0,"_content":"\næ€»ä½“æ¥è¯´é…ç½®æ¯”è¾ƒé¡ºåˆ©ï¼Œä¹Ÿè¸©äº†ä¸å°‘å‘ TATï¼Œæ¯•ç«Ÿä¸æ˜¯ä¸“ä¸šçš„è¿ç»´äººå‘˜ï¼ŒLinux ç»éªŒå®Œå…¨åœ¨å¹³å¸¸é¡¹ç›®ä¸­ä¸€ç‚¹ç‚¹ç§¯ç´¯çš„ã€‚\n<!-- more -->\n\n<div class=\"tip\">\n    é‡è¦æç¤ºï¼šæœ¬æ–‡é€‚ç”¨äºæœ‰ä¸€å®š Linux åŸºç¡€çš„ç«¥é‹æ“ä½œï¼Œæ¯”å¦‚æ‡‚å¾— `ls`ã€`cd`ã€`vim`ç­‰å‘½ä»¤åŸºæœ¬ç”¨æ³•ã€‚\n    é€‚ç”¨äºæ“ä½œç³»ç»Ÿï¼šCentOS-6-x86_64ï¼Œå®‰è£… node v6.9.4ï¼Œmongodb v3.4.2ã€‚\n</div>\n\n### Node.js å®‰è£…\n0.è¿›å…¥åˆ°å¾…å®‰è£…ä½ç½®\n```bash\ncd /usr/local/\n```\n\n1.ä¸‹è½½å®‰è£…æ–‡ä»¶\n```bash\nwget https://nodejs.org/dist/v6.9.4/node-v6.9.4-linux-x86.tar.xz\n```\n\n2.è§£å‹æ–‡ä»¶\n```bash\nxz -d node-v6.9.4-linux-x86.tar.xz\ntar xvf node-v6.9.4-linux-x86.tar\n```\n3.é‡å‘½åæ–‡ä»¶\n```bash\nrm -rf node-v*.tar\nmv node-v* node\n```\n\n\n4.é…ç½®ç¯å¢ƒå˜é‡\n```bash\n#ç¼–è¾‘ç³»ç»Ÿæ–‡ä»¶\nvim ~/.bash_profile\n\n#åœ¨æœ€é¡¶ç«¯æ·»åŠ ç¯å¢ƒå˜é‡åœ°å€\nPATH=/usr/local/node/bin:$PATH\n\n#ä¿å­˜åé‡æ–°å¯åŠ¨ä»¥ç”Ÿæ•ˆ\nsource ~/.bash_profile\n```\n\n5.éªŒè¯æ˜¯å¦æˆåŠŸï¼Œæ˜¾ç¤ºç‰ˆæœ¬å·å³å®‰è£…æˆåŠŸï¼\n```bash\nnode -v\n```\n\n### Mongodb å®‰è£…\n\n0.è¿›å…¥åˆ°å¾…å®‰è£…ä½ç½®\n```bash\ncd /usr/local/\n```\n\n1.ä¸‹è½½å®‰è£…æ–‡ä»¶\n```bash\nwget http://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.4.2.tgz\n```\n\n2.è§£å‹æ–‡ä»¶\n```bash\ntar zxf mongodb-linux-*.tgz\n```\n\n3.é‡å‘½å\n```bash\nrm -rf mongodb-*.tgz\nmv mongodb-* mongodb\n```\n\n4.é…ç½®ç¯å¢ƒå˜é‡\n```bash\n#ç¼–è¾‘ç³»ç»Ÿæ–‡ä»¶\nvim ~/.bash_profile\n\n#åœ¨æœ€é¡¶ç«¯æ·»åŠ ç¯å¢ƒå˜é‡åœ°å€\nPATH=/usr/local/mongodb/bin:$PATH\n\n#ä¿å­˜åé‡æ–°å¯åŠ¨ä»¥ç”Ÿæ•ˆ\nsource ~/.bash_profile\n```\n\n5.éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ\n```bash\nmongod --version\n```\n\n6.åˆ›å»ºæ•°æ®åº“ç›®å½•å’Œæ—¥å¿—ç›®å½•\n```bash\nmkdir -p /data/db\nmkdir -p /data/logs/mongodb.log\n```\n\n7.æ–°å¢é…ç½®æ–‡ä»¶ `/data/mongodb.conf`\n```txet\n#æ•°æ®åº“æ–‡ä»¶\ndbpath = /data/\n\n#æ—¥å¿—æ–‡ä»¶\nlogpath = /data/logs/mongodb.log\n\n#é»˜è®¤ç«¯å£\nport = 27017\n\n#åå°è¿è¡Œ\nfork = true\n\n#ç”¨æˆ·æˆæƒ\nauth = true\n\n#ä¸å¯ç”¨httpè®¿é—®\nnohttpinterface = true\n```\n<div class=\"tip\">\næ·»åŠ æˆæƒåéœ€è¦åœ¨ mongodb æ•°æ®åº“æ–‡ä»¶çš„ Users é›†åˆæ–°å¢ç”¨æˆ·ï¼Œæ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚\n</div>\n\n\n8.åœ¨è‡ªå¯åŠ¨æ–‡ä»¶ `/etc/rc.local` ä¸­å†™å…¥ mongod è¿›ç¨‹å¸¦é…ç½®æ–‡ä»¶å¯åŠ¨\n```bash\necho \"/usr/local/mongodb/bin/mongod -f /data/mongodb.conf\" >> /etc/rc.local\n```\n\n9.é‡å¯\n```bash\nreboot\n```\n\n\n### Express\n```bash\nnpm i express -g\n```\n","source":"_posts/CentOS-6-x86-Node-js-MongoDB-Express-ç¯å¢ƒé…ç½®ç¬”è®°.md","raw":"---\ntitle: CentOS 6 x86 Node.js + MongoDB + Express ç¯å¢ƒé…ç½®ç¬”è®°\ndate: 2015-1-1 20:18:33\ntags:\ncomments: false\n---\n\næ€»ä½“æ¥è¯´é…ç½®æ¯”è¾ƒé¡ºåˆ©ï¼Œä¹Ÿè¸©äº†ä¸å°‘å‘ TATï¼Œæ¯•ç«Ÿä¸æ˜¯ä¸“ä¸šçš„è¿ç»´äººå‘˜ï¼ŒLinux ç»éªŒå®Œå…¨åœ¨å¹³å¸¸é¡¹ç›®ä¸­ä¸€ç‚¹ç‚¹ç§¯ç´¯çš„ã€‚\n<!-- more -->\n\n<div class=\"tip\">\n    é‡è¦æç¤ºï¼šæœ¬æ–‡é€‚ç”¨äºæœ‰ä¸€å®š Linux åŸºç¡€çš„ç«¥é‹æ“ä½œï¼Œæ¯”å¦‚æ‡‚å¾— `ls`ã€`cd`ã€`vim`ç­‰å‘½ä»¤åŸºæœ¬ç”¨æ³•ã€‚\n    é€‚ç”¨äºæ“ä½œç³»ç»Ÿï¼šCentOS-6-x86_64ï¼Œå®‰è£… node v6.9.4ï¼Œmongodb v3.4.2ã€‚\n</div>\n\n### Node.js å®‰è£…\n0.è¿›å…¥åˆ°å¾…å®‰è£…ä½ç½®\n```bash\ncd /usr/local/\n```\n\n1.ä¸‹è½½å®‰è£…æ–‡ä»¶\n```bash\nwget https://nodejs.org/dist/v6.9.4/node-v6.9.4-linux-x86.tar.xz\n```\n\n2.è§£å‹æ–‡ä»¶\n```bash\nxz -d node-v6.9.4-linux-x86.tar.xz\ntar xvf node-v6.9.4-linux-x86.tar\n```\n3.é‡å‘½åæ–‡ä»¶\n```bash\nrm -rf node-v*.tar\nmv node-v* node\n```\n\n\n4.é…ç½®ç¯å¢ƒå˜é‡\n```bash\n#ç¼–è¾‘ç³»ç»Ÿæ–‡ä»¶\nvim ~/.bash_profile\n\n#åœ¨æœ€é¡¶ç«¯æ·»åŠ ç¯å¢ƒå˜é‡åœ°å€\nPATH=/usr/local/node/bin:$PATH\n\n#ä¿å­˜åé‡æ–°å¯åŠ¨ä»¥ç”Ÿæ•ˆ\nsource ~/.bash_profile\n```\n\n5.éªŒè¯æ˜¯å¦æˆåŠŸï¼Œæ˜¾ç¤ºç‰ˆæœ¬å·å³å®‰è£…æˆåŠŸï¼\n```bash\nnode -v\n```\n\n### Mongodb å®‰è£…\n\n0.è¿›å…¥åˆ°å¾…å®‰è£…ä½ç½®\n```bash\ncd /usr/local/\n```\n\n1.ä¸‹è½½å®‰è£…æ–‡ä»¶\n```bash\nwget http://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.4.2.tgz\n```\n\n2.è§£å‹æ–‡ä»¶\n```bash\ntar zxf mongodb-linux-*.tgz\n```\n\n3.é‡å‘½å\n```bash\nrm -rf mongodb-*.tgz\nmv mongodb-* mongodb\n```\n\n4.é…ç½®ç¯å¢ƒå˜é‡\n```bash\n#ç¼–è¾‘ç³»ç»Ÿæ–‡ä»¶\nvim ~/.bash_profile\n\n#åœ¨æœ€é¡¶ç«¯æ·»åŠ ç¯å¢ƒå˜é‡åœ°å€\nPATH=/usr/local/mongodb/bin:$PATH\n\n#ä¿å­˜åé‡æ–°å¯åŠ¨ä»¥ç”Ÿæ•ˆ\nsource ~/.bash_profile\n```\n\n5.éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ\n```bash\nmongod --version\n```\n\n6.åˆ›å»ºæ•°æ®åº“ç›®å½•å’Œæ—¥å¿—ç›®å½•\n```bash\nmkdir -p /data/db\nmkdir -p /data/logs/mongodb.log\n```\n\n7.æ–°å¢é…ç½®æ–‡ä»¶ `/data/mongodb.conf`\n```txet\n#æ•°æ®åº“æ–‡ä»¶\ndbpath = /data/\n\n#æ—¥å¿—æ–‡ä»¶\nlogpath = /data/logs/mongodb.log\n\n#é»˜è®¤ç«¯å£\nport = 27017\n\n#åå°è¿è¡Œ\nfork = true\n\n#ç”¨æˆ·æˆæƒ\nauth = true\n\n#ä¸å¯ç”¨httpè®¿é—®\nnohttpinterface = true\n```\n<div class=\"tip\">\næ·»åŠ æˆæƒåéœ€è¦åœ¨ mongodb æ•°æ®åº“æ–‡ä»¶çš„ Users é›†åˆæ–°å¢ç”¨æˆ·ï¼Œæ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚\n</div>\n\n\n8.åœ¨è‡ªå¯åŠ¨æ–‡ä»¶ `/etc/rc.local` ä¸­å†™å…¥ mongod è¿›ç¨‹å¸¦é…ç½®æ–‡ä»¶å¯åŠ¨\n```bash\necho \"/usr/local/mongodb/bin/mongod -f /data/mongodb.conf\" >> /etc/rc.local\n```\n\n9.é‡å¯\n```bash\nreboot\n```\n\n\n### Express\n```bash\nnpm i express -g\n```\n","slug":"CentOS-6-x86-Node-js-MongoDB-Express-ç¯å¢ƒé…ç½®ç¬”è®°","published":1,"updated":"2018-12-26T16:01:04.000Z","layout":"post","photos":[],"link":"","_id":"ck3v60jt70005r9q9myt1u00p","content":"<p>æ€»ä½“æ¥è¯´é…ç½®æ¯”è¾ƒé¡ºåˆ©ï¼Œä¹Ÿè¸©äº†ä¸å°‘å‘ TATï¼Œæ¯•ç«Ÿä¸æ˜¯ä¸“ä¸šçš„è¿ç»´äººå‘˜ï¼ŒLinux ç»éªŒå®Œå…¨åœ¨å¹³å¸¸é¡¹ç›®ä¸­ä¸€ç‚¹ç‚¹ç§¯ç´¯çš„ã€‚<br><a id=\"more\"></a></p>\n<div class=\"tip\"><br>    é‡è¦æç¤ºï¼šæœ¬æ–‡é€‚ç”¨äºæœ‰ä¸€å®š Linux åŸºç¡€çš„ç«¥é‹æ“ä½œï¼Œæ¯”å¦‚æ‡‚å¾— <code>ls</code>ã€<code>cd</code>ã€<code>vim</code>ç­‰å‘½ä»¤åŸºæœ¬ç”¨æ³•ã€‚<br>    é€‚ç”¨äºæ“ä½œç³»ç»Ÿï¼šCentOS-6-x86_64ï¼Œå®‰è£… node v6.9.4ï¼Œmongodb v3.4.2ã€‚<br></div>\n\n<h3 id=\"Node-js-å®‰è£…\"><a href=\"#Node-js-å®‰è£…\" class=\"headerlink\" title=\"Node.js å®‰è£…\"></a>Node.js å®‰è£…</h3><p>0.è¿›å…¥åˆ°å¾…å®‰è£…ä½ç½®<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/</span><br></pre></td></tr></table></figure></p>\n<p>1.ä¸‹è½½å®‰è£…æ–‡ä»¶<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://nodejs.org/dist/v6.9.4/node-v6.9.4-linux-x86.tar.xz</span><br></pre></td></tr></table></figure></p>\n<p>2.è§£å‹æ–‡ä»¶<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">xz -d node-v6.9.4-linux-x86.tar.xz</span><br><span class=\"line\">tar xvf node-v6.9.4-linux-x86.tar</span><br></pre></td></tr></table></figure></p>\n<p>3.é‡å‘½åæ–‡ä»¶<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -rf node-v*.tar</span><br><span class=\"line\">mv node-v* node</span><br></pre></td></tr></table></figure></p>\n<p>4.é…ç½®ç¯å¢ƒå˜é‡<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#ç¼–è¾‘ç³»ç»Ÿæ–‡ä»¶</span></span><br><span class=\"line\">vim ~/.bash_profile</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#åœ¨æœ€é¡¶ç«¯æ·»åŠ ç¯å¢ƒå˜é‡åœ°å€</span></span><br><span class=\"line\">PATH=/usr/<span class=\"built_in\">local</span>/node/bin:<span class=\"variable\">$PATH</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#ä¿å­˜åé‡æ–°å¯åŠ¨ä»¥ç”Ÿæ•ˆ</span></span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure></p>\n<p>5.éªŒè¯æ˜¯å¦æˆåŠŸï¼Œæ˜¾ç¤ºç‰ˆæœ¬å·å³å®‰è£…æˆåŠŸï¼<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node -v</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Mongodb-å®‰è£…\"><a href=\"#Mongodb-å®‰è£…\" class=\"headerlink\" title=\"Mongodb å®‰è£…\"></a>Mongodb å®‰è£…</h3><p>0.è¿›å…¥åˆ°å¾…å®‰è£…ä½ç½®<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/</span><br></pre></td></tr></table></figure></p>\n<p>1.ä¸‹è½½å®‰è£…æ–‡ä»¶<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.4.2.tgz</span><br></pre></td></tr></table></figure></p>\n<p>2.è§£å‹æ–‡ä»¶<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxf mongodb-linux-*.tgz</span><br></pre></td></tr></table></figure></p>\n<p>3.é‡å‘½å<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -rf mongodb-*.tgz</span><br><span class=\"line\">mv mongodb-* mongodb</span><br></pre></td></tr></table></figure></p>\n<p>4.é…ç½®ç¯å¢ƒå˜é‡<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#ç¼–è¾‘ç³»ç»Ÿæ–‡ä»¶</span></span><br><span class=\"line\">vim ~/.bash_profile</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#åœ¨æœ€é¡¶ç«¯æ·»åŠ ç¯å¢ƒå˜é‡åœ°å€</span></span><br><span class=\"line\">PATH=/usr/<span class=\"built_in\">local</span>/mongodb/bin:<span class=\"variable\">$PATH</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#ä¿å­˜åé‡æ–°å¯åŠ¨ä»¥ç”Ÿæ•ˆ</span></span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure></p>\n<p>5.éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mongod --version</span><br></pre></td></tr></table></figure></p>\n<p>6.åˆ›å»ºæ•°æ®åº“ç›®å½•å’Œæ—¥å¿—ç›®å½•<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /data/db</span><br><span class=\"line\">mkdir -p /data/logs/mongodb.log</span><br></pre></td></tr></table></figure></p>\n<p>7.æ–°å¢é…ç½®æ–‡ä»¶ <code>/data/mongodb.conf</code><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#æ•°æ®åº“æ–‡ä»¶</span><br><span class=\"line\">dbpath = /data/</span><br><span class=\"line\"></span><br><span class=\"line\">#æ—¥å¿—æ–‡ä»¶</span><br><span class=\"line\">logpath = /data/logs/mongodb.log</span><br><span class=\"line\"></span><br><span class=\"line\">#é»˜è®¤ç«¯å£</span><br><span class=\"line\">port = 27017</span><br><span class=\"line\"></span><br><span class=\"line\">#åå°è¿è¡Œ</span><br><span class=\"line\">fork = true</span><br><span class=\"line\"></span><br><span class=\"line\">#ç”¨æˆ·æˆæƒ</span><br><span class=\"line\">auth = true</span><br><span class=\"line\"></span><br><span class=\"line\">#ä¸å¯ç”¨httpè®¿é—®</span><br><span class=\"line\">nohttpinterface = true</span><br></pre></td></tr></table></figure></p>\n<div class=\"tip\"><br>æ·»åŠ æˆæƒåéœ€è¦åœ¨ mongodb æ•°æ®åº“æ–‡ä»¶çš„ Users é›†åˆæ–°å¢ç”¨æˆ·ï¼Œæ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚<br></div>\n\n\n<p>8.åœ¨è‡ªå¯åŠ¨æ–‡ä»¶ <code>/etc/rc.local</code> ä¸­å†™å…¥ mongod è¿›ç¨‹å¸¦é…ç½®æ–‡ä»¶å¯åŠ¨<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"/usr/local/mongodb/bin/mongod -f /data/mongodb.conf\"</span> &gt;&gt; /etc/rc.local</span><br></pre></td></tr></table></figure></p>\n<p>9.é‡å¯<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">reboot</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Express\"><a href=\"#Express\" class=\"headerlink\" title=\"Express\"></a>Express</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i express -g</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p>æ€»ä½“æ¥è¯´é…ç½®æ¯”è¾ƒé¡ºåˆ©ï¼Œä¹Ÿè¸©äº†ä¸å°‘å‘ TATï¼Œæ¯•ç«Ÿä¸æ˜¯ä¸“ä¸šçš„è¿ç»´äººå‘˜ï¼ŒLinux ç»éªŒå®Œå…¨åœ¨å¹³å¸¸é¡¹ç›®ä¸­ä¸€ç‚¹ç‚¹ç§¯ç´¯çš„ã€‚<br>","more":"</p>\n<div class=\"tip\"><br>    é‡è¦æç¤ºï¼šæœ¬æ–‡é€‚ç”¨äºæœ‰ä¸€å®š Linux åŸºç¡€çš„ç«¥é‹æ“ä½œï¼Œæ¯”å¦‚æ‡‚å¾— <code>ls</code>ã€<code>cd</code>ã€<code>vim</code>ç­‰å‘½ä»¤åŸºæœ¬ç”¨æ³•ã€‚<br>    é€‚ç”¨äºæ“ä½œç³»ç»Ÿï¼šCentOS-6-x86_64ï¼Œå®‰è£… node v6.9.4ï¼Œmongodb v3.4.2ã€‚<br></div>\n\n<h3 id=\"Node-js-å®‰è£…\"><a href=\"#Node-js-å®‰è£…\" class=\"headerlink\" title=\"Node.js å®‰è£…\"></a>Node.js å®‰è£…</h3><p>0.è¿›å…¥åˆ°å¾…å®‰è£…ä½ç½®<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/</span><br></pre></td></tr></table></figure></p>\n<p>1.ä¸‹è½½å®‰è£…æ–‡ä»¶<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://nodejs.org/dist/v6.9.4/node-v6.9.4-linux-x86.tar.xz</span><br></pre></td></tr></table></figure></p>\n<p>2.è§£å‹æ–‡ä»¶<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">xz -d node-v6.9.4-linux-x86.tar.xz</span><br><span class=\"line\">tar xvf node-v6.9.4-linux-x86.tar</span><br></pre></td></tr></table></figure></p>\n<p>3.é‡å‘½åæ–‡ä»¶<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -rf node-v*.tar</span><br><span class=\"line\">mv node-v* node</span><br></pre></td></tr></table></figure></p>\n<p>4.é…ç½®ç¯å¢ƒå˜é‡<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#ç¼–è¾‘ç³»ç»Ÿæ–‡ä»¶</span></span><br><span class=\"line\">vim ~/.bash_profile</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#åœ¨æœ€é¡¶ç«¯æ·»åŠ ç¯å¢ƒå˜é‡åœ°å€</span></span><br><span class=\"line\">PATH=/usr/<span class=\"built_in\">local</span>/node/bin:<span class=\"variable\">$PATH</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#ä¿å­˜åé‡æ–°å¯åŠ¨ä»¥ç”Ÿæ•ˆ</span></span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure></p>\n<p>5.éªŒè¯æ˜¯å¦æˆåŠŸï¼Œæ˜¾ç¤ºç‰ˆæœ¬å·å³å®‰è£…æˆåŠŸï¼<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node -v</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Mongodb-å®‰è£…\"><a href=\"#Mongodb-å®‰è£…\" class=\"headerlink\" title=\"Mongodb å®‰è£…\"></a>Mongodb å®‰è£…</h3><p>0.è¿›å…¥åˆ°å¾…å®‰è£…ä½ç½®<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/</span><br></pre></td></tr></table></figure></p>\n<p>1.ä¸‹è½½å®‰è£…æ–‡ä»¶<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.4.2.tgz</span><br></pre></td></tr></table></figure></p>\n<p>2.è§£å‹æ–‡ä»¶<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxf mongodb-linux-*.tgz</span><br></pre></td></tr></table></figure></p>\n<p>3.é‡å‘½å<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -rf mongodb-*.tgz</span><br><span class=\"line\">mv mongodb-* mongodb</span><br></pre></td></tr></table></figure></p>\n<p>4.é…ç½®ç¯å¢ƒå˜é‡<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#ç¼–è¾‘ç³»ç»Ÿæ–‡ä»¶</span></span><br><span class=\"line\">vim ~/.bash_profile</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#åœ¨æœ€é¡¶ç«¯æ·»åŠ ç¯å¢ƒå˜é‡åœ°å€</span></span><br><span class=\"line\">PATH=/usr/<span class=\"built_in\">local</span>/mongodb/bin:<span class=\"variable\">$PATH</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#ä¿å­˜åé‡æ–°å¯åŠ¨ä»¥ç”Ÿæ•ˆ</span></span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure></p>\n<p>5.éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mongod --version</span><br></pre></td></tr></table></figure></p>\n<p>6.åˆ›å»ºæ•°æ®åº“ç›®å½•å’Œæ—¥å¿—ç›®å½•<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /data/db</span><br><span class=\"line\">mkdir -p /data/logs/mongodb.log</span><br></pre></td></tr></table></figure></p>\n<p>7.æ–°å¢é…ç½®æ–‡ä»¶ <code>/data/mongodb.conf</code><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#æ•°æ®åº“æ–‡ä»¶</span><br><span class=\"line\">dbpath = /data/</span><br><span class=\"line\"></span><br><span class=\"line\">#æ—¥å¿—æ–‡ä»¶</span><br><span class=\"line\">logpath = /data/logs/mongodb.log</span><br><span class=\"line\"></span><br><span class=\"line\">#é»˜è®¤ç«¯å£</span><br><span class=\"line\">port = 27017</span><br><span class=\"line\"></span><br><span class=\"line\">#åå°è¿è¡Œ</span><br><span class=\"line\">fork = true</span><br><span class=\"line\"></span><br><span class=\"line\">#ç”¨æˆ·æˆæƒ</span><br><span class=\"line\">auth = true</span><br><span class=\"line\"></span><br><span class=\"line\">#ä¸å¯ç”¨httpè®¿é—®</span><br><span class=\"line\">nohttpinterface = true</span><br></pre></td></tr></table></figure></p>\n<div class=\"tip\"><br>æ·»åŠ æˆæƒåéœ€è¦åœ¨ mongodb æ•°æ®åº“æ–‡ä»¶çš„ Users é›†åˆæ–°å¢ç”¨æˆ·ï¼Œæ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚<br></div>\n\n\n<p>8.åœ¨è‡ªå¯åŠ¨æ–‡ä»¶ <code>/etc/rc.local</code> ä¸­å†™å…¥ mongod è¿›ç¨‹å¸¦é…ç½®æ–‡ä»¶å¯åŠ¨<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"/usr/local/mongodb/bin/mongod -f /data/mongodb.conf\"</span> &gt;&gt; /etc/rc.local</span><br></pre></td></tr></table></figure></p>\n<p>9.é‡å¯<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">reboot</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Express\"><a href=\"#Express\" class=\"headerlink\" title=\"Express\"></a>Express</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i express -g</span><br></pre></td></tr></table></figure>"},{"title":"Axios ä½¿ç”¨å§¿åŠ¿æŒ‡å—","comments":1,"date":"2018-09-19T14:09:48.000Z","from":null,"_content":"\næœ€è¿‘å‡ ä¸ªé¡¹ç›®éƒ½ç”¨åˆ°äº† Axiosï¼Œå®ƒæ˜¯ä¸€ä¸ªæ›´ç°ä»£çš„ API è¯·æ±‚åº“ï¼ŒåŸºäº Promiseï¼Œèƒ½è¿è¡Œåœ¨æµè§ˆå™¨å’Œ Node.js é‡Œã€‚åœ¨é¡¹ç›®é‡Œï¼Œä¸€èˆ¬éƒ½æ˜¯éœ€è¦è¿›è¡Œä¸€æ¬¡å°è£…å†æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚å¤„ç†é‰´æƒã€è¿˜æœ‰å…¨å±€çš„è¯·æ±‚ Loading åŠ¨ç”»ç­‰ã€‚ä»Šå¤©æ¥æ€»ç»“ä¸€ä¸‹ã€‚\n\n<!-- more -->\n\n### Axios ç®€ä»‹\n\n[Axios](https://github.com/axios/axios) æ˜¯ä¸€ä¸ªåŸºäº Promise ç”¨äºæµè§ˆå™¨å’Œ nodejs çš„ HTTP å®¢æˆ·ç«¯ã€‚å®ƒæœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š\n\n- ä»æµè§ˆå™¨ä¸­åˆ›å»º XMLHttpRequest\n- ä» Node.js å‘å‡º HTTP è¯·æ±‚\n- æ”¯æŒ Promise API\n- æ‹¦æˆªè¯·æ±‚å’Œå“åº”\n- è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®\n- è‡ªåŠ¨è½¬æ¢ JSON æ•°æ®\n- å®¢æˆ·ç«¯é˜²æ­¢ CSRF/XSRF\n\n### åŸºç¡€ API\n\n- `axios.request(config)`\n- `axios.get(url [,config])`\n- `axios.delete(url [,config])`\n- `axios.head(url [,config])`\n- `axios.options(url [,config])`\n- `axios.post(url [,data [,config]])`\n- `axios.put(url [,data [,config]])`\n- `axios.patch(url [,data [,config]])`\n\n<div class=\"tip\">\n  HTTP è¯·æ±‚æ–¹æ³•ä¸€èˆ¬ä¼šæŒ‰ç…§å®ƒå…·ä½“çš„å«ä¹‰æ¥æ‰§è¡Œç›¸å…³çš„åŠ¨ä½œï¼Œè¿™é‡Œæœ‰ä¸€ä»½ [HTTP åŠ¨è¯å¯¹åº”è§£é‡Š @MDN](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods)ã€‚\n</div>\n\n### ç”¨æ³•ç¤ºä¾‹\n\n#### GET\n\n```js\n// å‘å…·æœ‰æŒ‡å®š ID çš„ç”¨æˆ·å‘å‡ºè¯·æ±‚ï¼ˆå‚æ•°åœ¨ URL ä¸Šï¼‰\naxios\n  .get('/user?ID=12345')\n  .then(function(res) {\n    console.log(res);\n  })\n  .catch(function(error) {\n    console.log(error);\n  });\n\n// ä¹Ÿå¯ä»¥é€šè¿‡ params å¯¹è±¡ä¼ é€’å‚æ•°\naxios\n  .get('/user', {\n    params: {\n      ID: 12345\n    }\n  })\n  .then(function(response) {\n    console.log(response);\n  })\n  .catch(function(error) {\n    console.log(error);\n  });\n```\n\n#### POST\n\n```js\naxios\n  .post(\n    '/user',\n    {\n      userId: '123'\n    },\n    {\n      headers: {\n        token: 'abc'\n      }\n    }\n  )\n  .then(function(res) {\n    console.log(res);\n  })\n  .catch(function(error) {\n    console.log(error);\n  });\n```\n\n#### ç›´æ¥ä½¿ç”¨ config\n\n```js\n// GET\naxios({\n  url: 'pakage.json',\n  method: 'get',\n  params: {\n    // get åœ¨ params ä¸­å®šä¹‰\n    userId: '123'\n  },\n  headers: {\n    token: 'http-test'\n  }\n}).then(res => {\n  console.log(res.data);\n});\n\n// POST\naxios({\n  url: 'pakage.json',\n  method: 'post',\n  data: {\n    // post åœ¨ data ä¸­å®šä¹‰\n    userId: '123'\n  },\n  headers: {\n    token: 'http-test'\n  }\n}).then(res => {\n  console.log(res.data);\n});\n```\n\n#### å¹¶å‘è¯·æ±‚\n\n```js\nfunction getUserAcount() {\n  // è¿”å›ä¸€ä¸ª promise å¯¹è±¡\n  return axios.get('/user/1234');\n}\nfunction getUserPermissions() {\n  // è¿”å›ä¸€ä¸ª promise å¯¹è±¡\n  return axios.get('/user/1234/getUserPermissions');\n}\n\n// ä¸€æ¬¡æ€§è¿”å›ä¸¤ä¸ªæ¥å£\naxios.all([getUserAccount(), getUserPerssions()]).then(\n  axios.spread((acct, perms) => {\n    // spread å±•å¼€ä¸¤ä¸ªè¿”å›çš„ç»“æœ\n    // ä¸¤ä¸ªè¯·æ±‚ç°å·²å®Œæˆ\n  })\n);\n```\n\n### å…¨å±€å°è£…ã€å¼‚å¸¸å¤„ç†\n\nåœ¨é¡¹ç›®ä¸­ï¼Œå¦‚æœæ¯æ¬¡è¯·æ±‚éƒ½å†™ä¸€å † `config` ä¼šå­˜åœ¨å¤§é‡é‡å¤ä»£ç ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šå°è£…æˆä¸€ä¸ªæ–¹æ³•ï¼ŒæŠŠä¸€äº›å¿…è¦çš„å‚æ•°é…ç½®å¥½ï¼ŒåŒç†ï¼Œå…¨å±€çš„å¼‚å¸¸è¿˜æœ‰é‰´æƒç­‰éƒ½ç»Ÿä¸€é…ç½®ã€‚å•æ¬¡è¯·æ±‚æ•°æ®åªåšå’Œæ•°æ®ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘ã€‚ä¸‹é¢æ¥çœ‹ä¸€ä¸‹ Axios çš„å…¨å±€å°è£…ä¾‹å­ã€‚\n\n#### å°è£…\n\n```js\nimport axios from 'axios';\nimport qs from 'qs';\n\n// POST æ–¹æ³•å°è£…  (åŸç”Ÿ form æäº¤)\nexport const postRequest = (url, params) => {\n  return axios({\n    method: 'post',\n    url: url,\n    data: params,\n    transformRequest: [\n      function(data) {\n        return qs.stringify(data);\n      }\n    ],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  });\n};\n\n// POST æ–¹æ³•å°è£…  (æ–‡ä»¶ä¸Šä¼ )\nexport const uploadFileRequest = (url, params) => {\n  return axios({\n    method: 'post',\n    url: url,\n    data: params,\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  });\n};\n\n// GET æ–¹æ³•å°è£…\nexport const getRequest = url => {\n  return axios({\n    method: 'get',\n    url: url\n  });\n};\n\n// PUT æ–¹æ³•å°è£…\nexport const putRequest = (url, params) => {\n  return axios({\n    method: 'put',\n    url: url,\n    data: params,\n    transformRequest: [\n      function(data) {\n        return qs.stringify(data);\n      }\n    ],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  });\n};\n\n// DELETE æ–¹æ³•å°è£…\nexport const deleteRequest = url => {\n  return axios({\n    method: 'delete',\n    url: url\n  });\n};\n```\n\n#### å¼‚å¸¸å¤„ç†\n\n```js\nimport axios from 'axios';\nimport { Message } from 'element-ui';\n\n//  è¯·æ±‚æ‹¦æˆª\naxios.interceptors.request.use(\n  config => {\n    // è¯·æ±‚å‰é…ç½® config\n    return config;\n  },\n  err => {\n    // é”™è¯¯å¤„ç†\n    Message.error({ message: 'è¯·æ±‚è¶…æ—¶!' });\n    return Promise.resolve(err);\n  }\n);\n\n// å“åº”æ‹¦æˆª\naxios.interceptors.response.use(\n  data => {\n    // è¯·æ±‚åå¤„ç†å¯¹åº”çš„æ•°æ®\n\n    // æ–¹å¼ä¸€ï¼šå’Œåç«¯çº¦å®šå“åº”ç  `code`\n    switch (data.code) {\n      case '0':\n        // æ­£å¸¸ç›´æ¥è¿”å›\n        return data;\n      // éœ€è¦é‡æ–°ç™»å½•\n      case '-1':\n        // some code here..\n        break;\n      default:\n    }\n\n    // æ–¹å¼äºŒï¼šä»…åˆ¤æ–­ HTTP çŠ¶æ€ç \n    if (data.status && data.status == 200 && data.data.status == 'error') {\n      Message.error({ message: data.data.msg });\n      return;\n    }\n    return data;\n  },\n  err => {\n    // é”™è¯¯å¤„ç†\n    if (err && err.response) {\n      switch (err.response.status) {\n        case 400:\n          err.message = 'è¯·æ±‚é”™è¯¯ (400)';\n          break;\n        case 401:\n          err.message = 'æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½• (401)';\n          break;\n        case 403:\n          err.message = 'æ‹’ç»è®¿é—® (403)';\n          break;\n        case 404:\n          err.message = 'è¯·æ±‚å‡ºé”™ (404)';\n          break;\n        case 408:\n          err.message = 'è¯·æ±‚è¶…æ—¶ (408)';\n          break;\n        case 500:\n          err.message = 'æœåŠ¡å™¨é”™è¯¯ (500)';\n          break;\n        case 501:\n          err.message = 'æœåŠ¡æœªå®ç° (501)';\n          break;\n        case 502:\n          err.message = 'ç½‘ç»œé”™è¯¯ (502)';\n          break;\n        case 503:\n          err.message = 'æœåŠ¡ä¸å¯ç”¨ (503)';\n          break;\n        case 504:\n          err.message = 'ç½‘ç»œè¶…æ—¶ (504)';\n          break;\n        case 505:\n          err.message = 'HTTP ç‰ˆæœ¬ä¸å—æ”¯æŒ (505)';\n          break;\n        default:\n          err.message = `è¿æ¥å‡ºé”™ (${err.response.status})!`;\n      }\n    } else {\n      err.message = 'è¿æ¥æœåŠ¡å™¨å¤±è´¥!';\n    }\n    Message.err({ message: err.message });\n    return Promise.resolve(err);\n  }\n);\n```\n\n<div class=\"tip\">\nè¯·æ±‚å‡ºé”™çš„æ—¶å€™æ‰§è¡Œçš„æ˜¯ï¼š`Promise.resolve(err)`ï¼Œè€Œä¸æ˜¯ `Promise.reject(err)`ï¼Œè¿™æ ·æ— è®ºè¯·æ±‚æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œåœ¨æˆåŠŸçš„å›è°ƒä¸­éƒ½èƒ½æ”¶åˆ°é€šçŸ¥ã€‚\n</div>\n\n### å…¶å®ƒé…ç½®\n\n#### baseURL\n\né€šè¿‡ `axios.defaults.baseURL` æ¥è®¾ç½® API çš„æ ¹åŸŸåã€‚\n\n```js\nif (process.env.NODE_ENV == 'development') {\n  axios.defaults.baseURL = 'https://dev.server.com/';\n} else if (process.env.NODE_ENV == 'debug') {\n  axios.defaults.baseURL = 'https://debug.server.com/';\n} else if (process.env.NODE_ENV == 'production') {\n  axios.defaults.baseURL = 'https://pro.server.com/';\n}\n```\n\n<div class=\"tip\">\n`process.env` æ˜¯ Node.js æä¾›çš„å…¨å±€å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ npm scripts é‡Œé€šè¿‡ cross-env è¿™ä¸ªå·¥å…·ç»Ÿä¸€é…ç½®ä¸åŒçš„ç¯å¢ƒï¼Œcross-env åšäº†å„ç§ç³»ç»Ÿå¹³å°çš„å…¼å®¹å¤„ç†ã€‚ä¸€èˆ¬ç”¨è¿™ä¸ªè®¾ç½®ç¯å¢ƒå˜é‡ã€‚\n</div>\n\n#### è¯·æ±‚è¶…æ—¶\n\né€šè¿‡ `axios.defaults.timeout` è®¾ç½®é»˜è®¤çš„è¯·æ±‚è¶…æ—¶æ—¶é—´ã€‚ä¾‹å¦‚è¶…è¿‡äº† 10sï¼Œå°±ä¼šå‘ŠçŸ¥ç”¨æˆ·å½“å‰è¯·æ±‚è¶…æ—¶ï¼Œè¯·åˆ·æ–°ç­‰ã€‚\n\n```js\naxios.defaults.timeout = 10000;\n```\n\n#### å•ç‹¬è®¾ç½® POST çš„è¯·æ±‚å¤´\n\næ¯”å¦‚è®¾ç½® POST æäº¤ï¼ˆåŸç”Ÿ formï¼‰æ—¶å•ç‹¬é…ç½®ã€‚\n\n```js\naxios.defaults.headers.post['Content-Type'] =\n  'application/x-www-form-urlencoded;charset=UTF-8';\n```\n\n### é™„: å®Œæ•´ä»£ç \n\n```js\nimport axios from 'axios';\nimport QS from 'qs';\nimport { Toast } from 'vant';\n\n// ç¯å¢ƒçš„åˆ‡æ¢\nif (process.env.NODE_ENV == 'development') {\n  axios.defaults.baseURL = 'https://dev.server.com/';\n} else if (process.env.NODE_ENV == 'debug') {\n  axios.defaults.baseURL = 'https://debug.server.com/';\n} else if (process.env.NODE_ENV == 'production') {\n  axios.defaults.baseURL = 'https://pro.server.com/';\n}\n\n// è¯·æ±‚è¶…æ—¶æ—¶é—´\naxios.defaults.timeout = 10000;\n\n// POST è¯·æ±‚å¤´\naxios.defaults.headers.post['Content-Type'] =\n  'application/x-www-form-urlencoded;charset=UTF-8';\n\n// è¯·æ±‚æ‹¦æˆªå™¨\naxios.interceptors.request.use(\n  config = > {\n    const token = store.state.token;\n    token && (config.headers.Authorization = token);\n    return config;\n  }, error = > {\n    return Promise.error(error);\n  }\n)\n\n// å“åº”æ‹¦æˆªå™¨\naxios.interceptors.response.use(\n  response = > {\n    if (response.status === 200) {\n      return Promise.resolve(response);\n    } else {\n      return Promise.reject(response);\n    }\n  },\n  // æœåŠ¡å™¨çŠ¶æ€ç ä¸æ˜¯ 200 çš„æƒ…å†µ\n  error = > {\n    if (error.response.status) {\n      switch (error.response.status) {\n        case 401:\n          router.replace({\n            path: '/login',\n            query: {\n              redirect: router.currentRoute.fullPath\n            }\n          });\n          break;\n        case 403:\n          Toast({\n            message: 'ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•',\n            duration: 1000,\n            forbidClick: true\n          });\n          break;\n          // 404 è¯·æ±‚ä¸å­˜åœ¨\n        case 404:\n          Toast({\n            message: 'ç½‘ç»œè¯·æ±‚ä¸å­˜åœ¨',\n            duration: 1500,\n            forbidClick: true\n          });\n          break;\n          // å…¶ä»–é”™è¯¯ï¼Œç›´æ¥æŠ›å‡ºé”™è¯¯æç¤º\n        default:\n          Toast({\n            message: error.response.data.message,\n            duration: 1500,\n            forbidClick: true\n          });\n      }\n      return Promise.reject(error.response);\n    }\n  }\n);\n\n// GET è¯·æ±‚\nexport function get(url, params) {\n  return new Promise((resolve, reject) => {\n    axios\n      .get(url, { params: params })\n      .then(res => {\n        resolve(res.data);\n      })\n      .catch (err => {\n        reject(err.data)\n      })\n  });\n}\n\n// POST è¯·æ±‚\nexport function post(url, params) {\n  return new Promise((resolve, reject) => {\n    axios\n      .post(url, QS.stringify(params))\n      .then(res = > {\n        resolve(res.data);\n      })\n      .catch (err => {\n        reject(err.data)\n      })\n  });\n}\n```\n\n### é™„: Content-Type\n\nè¯´åˆ°å’ŒæœåŠ¡ç«¯æ•°æ®äº¤äº’ï¼Œæ€»æ˜¯ç»•ä¸å¼€è¿™ä¸ªï¼Œå¿…é¡»è¦æ‰«ç›²ä¸€ä¸‹äº†ï¼ğŸ˜‚ğŸ˜‚\n\n> Content-Type ç”¨äºæŒ‡å®šå†…å®¹ç±»å‹ï¼Œä¸€èˆ¬æ˜¯æŒ‡ç½‘é¡µä¸­å­˜åœ¨çš„ Content-Typeï¼ŒContent-Type å±æ€§æŒ‡å®šè¯·æ±‚å’Œå“åº”çš„ HTTP å†…å®¹ç±»å‹ã€‚å¦‚æœæœªæŒ‡å®š ContentTypeï¼Œé»˜è®¤ä¸º `text/html`ã€‚\n\nå¸¸è§ç±»å‹æœ‰ï¼š\n\n- text/html\n- application/x-www-form-urlencoded\n- multipart/form-data\n- application/json\n- application/xml\n\n`application/x-www-form-urlencoded`ã€`multipart/form-data`ã€`application/json`ã€`application/xml` è¿™å››ä¸ªåˆ™æ˜¯ ajax è¯·æ±‚éœ€è¦æŒ‡å®šçš„ç±»å‹ï¼Œè¡¨å•æäº¤æˆ–ä¸Šä¼ æ–‡ä»¶å¸¸ç”¨çš„èµ„æºç±»å‹ã€‚\n\n#### application/x-www-form-urlencoded\n\nè¿™æ˜¯è¡¨å•é»˜è®¤æäº¤æ–¹å¼ï¼Œæ ¼å¼ä¸º URL ç¼–ç  `key=value&key1=value1`ã€‚\n\n<div style=\"max-width: 500px\">![image](https://user-images.githubusercontent.com/9158841/32037816-ade83a36-b9ec-11e7-9f07-4f72a99c6aaa.png)</div>\n\næ³¨ï¼šChrome æµè§ˆå™¨ä¼šè‡ªåŠ¨æ ¼å¼åŒ–æˆæ˜“è¯»çš„æ ¼å¼\n\n#### multipart/form-data\n\nä½¿ç”¨è¡¨å•ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œå¿…é¡»æŒ‡å®šè¡¨å•çš„ enctype å±æ€§å€¼ä¸º `multipart/form-data`ã€‚\nè¯·æ±‚ä½“è¢«åˆ†å‰²æˆå¤šéƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†ä½¿ç”¨ `--boundary` åˆ†å‰²ï¼Œä½¿ç”¨ `--boundary--\\r\\n` ç»“æŸã€‚\n\nè¡¨å•ä¸Šä¼ æ–‡ä»¶ Demo:\n\n```html\n<form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\">\n    ç”¨æˆ·å: <input type=\"text\" name=\"username\">\n    å¯†ç : <input type=\"password\" name=\"password\">\n    ä¸Šä¼ æ–‡ä»¶: <input type=\"file\" name=\"file\">\n    <input type=\"submit\" value=\"æäº¤\">\n</form>\n```\n\n<div style=\"max-width: 500px\">![image](https://user-images.githubusercontent.com/9158841/32038354-1201f94c-b9ef-11e7-8817-fb9031b2b036.png)</div>\n\n#### application/json\n\nAxios é»˜è®¤ `POST` æäº¤æ–¹å¼å°±æ˜¯ `application/json`ï¼Œæ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨ axios æäº¤è¡¨å•æ—¶éœ€è¦æ³¨æ„åç«¯èƒ½ä¸èƒ½è§£æï¼Œä¸èƒ½è§£æéœ€è¦è®¾ç½® `POST` å¸¸ç”¨æ ¼å¼ `application/x-www-form-urlencoded`ï¼Œä¸”æäº¤çš„æ•°æ®éœ€è¦ä½¿ç”¨ qs æ¨¡å—åºåˆ—åŒ–æ ¼å¼ã€‚\n\n```js\naxios.post(\n  'https://jsonplaceholder.typicode.com/posts',\n  {\n    userId: 1,\n    name: 'ifyour',\n    arr: [1, 2, 3, 4]\n  },\n  {\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    },\n    transformRequest: [\n      function(data) {\n        return qs.stringify(data);\n      }\n    ]\n  }\n);\n```\n\n<div style=\"max-width: 400px\">![image](https://user-images.githubusercontent.com/15377484/45913317-a939a580-be62-11e8-9d96-1a097337da44.png)</div>\n\n#### application/xml\n\n```text\nPOST http://www.example.com HTTP/1.1\nContent-Type: text/xml\n```\n\n```xml\n<?xml version=\"1.0\"?>\n<resource>\n    <id>123</id>\n    <params>\n        <name>\n            <value>example</value>\n        </name>\n        <age>\n            <value>21</value>\n        </age>\n    </params>\n</resource>\n```\n\n### å‚è€ƒ\n\n- [Axios å®˜æ–¹æ–‡æ¡£ @GitHub](https://github.com/axios/axios#installing)\n- [HTTP Content-Type å¯¹ç…§è¡¨ @OSChina](http://tool.oschina.net/commons)\n- [HTTP è¯·æ±‚æ–¹æ³• @MDN](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods)\n","source":"_posts/Axios-ä½¿ç”¨å§¿åŠ¿æŒ‡å—.md","raw":"---\ntitle: Axios ä½¿ç”¨å§¿åŠ¿æŒ‡å—\ncomments: true\ndate: 2018-09-19 22:09:48\ntags:\nfrom:\n---\n\næœ€è¿‘å‡ ä¸ªé¡¹ç›®éƒ½ç”¨åˆ°äº† Axiosï¼Œå®ƒæ˜¯ä¸€ä¸ªæ›´ç°ä»£çš„ API è¯·æ±‚åº“ï¼ŒåŸºäº Promiseï¼Œèƒ½è¿è¡Œåœ¨æµè§ˆå™¨å’Œ Node.js é‡Œã€‚åœ¨é¡¹ç›®é‡Œï¼Œä¸€èˆ¬éƒ½æ˜¯éœ€è¦è¿›è¡Œä¸€æ¬¡å°è£…å†æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚å¤„ç†é‰´æƒã€è¿˜æœ‰å…¨å±€çš„è¯·æ±‚ Loading åŠ¨ç”»ç­‰ã€‚ä»Šå¤©æ¥æ€»ç»“ä¸€ä¸‹ã€‚\n\n<!-- more -->\n\n### Axios ç®€ä»‹\n\n[Axios](https://github.com/axios/axios) æ˜¯ä¸€ä¸ªåŸºäº Promise ç”¨äºæµè§ˆå™¨å’Œ nodejs çš„ HTTP å®¢æˆ·ç«¯ã€‚å®ƒæœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š\n\n- ä»æµè§ˆå™¨ä¸­åˆ›å»º XMLHttpRequest\n- ä» Node.js å‘å‡º HTTP è¯·æ±‚\n- æ”¯æŒ Promise API\n- æ‹¦æˆªè¯·æ±‚å’Œå“åº”\n- è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®\n- è‡ªåŠ¨è½¬æ¢ JSON æ•°æ®\n- å®¢æˆ·ç«¯é˜²æ­¢ CSRF/XSRF\n\n### åŸºç¡€ API\n\n- `axios.request(config)`\n- `axios.get(url [,config])`\n- `axios.delete(url [,config])`\n- `axios.head(url [,config])`\n- `axios.options(url [,config])`\n- `axios.post(url [,data [,config]])`\n- `axios.put(url [,data [,config]])`\n- `axios.patch(url [,data [,config]])`\n\n<div class=\"tip\">\n  HTTP è¯·æ±‚æ–¹æ³•ä¸€èˆ¬ä¼šæŒ‰ç…§å®ƒå…·ä½“çš„å«ä¹‰æ¥æ‰§è¡Œç›¸å…³çš„åŠ¨ä½œï¼Œè¿™é‡Œæœ‰ä¸€ä»½ [HTTP åŠ¨è¯å¯¹åº”è§£é‡Š @MDN](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods)ã€‚\n</div>\n\n### ç”¨æ³•ç¤ºä¾‹\n\n#### GET\n\n```js\n// å‘å…·æœ‰æŒ‡å®š ID çš„ç”¨æˆ·å‘å‡ºè¯·æ±‚ï¼ˆå‚æ•°åœ¨ URL ä¸Šï¼‰\naxios\n  .get('/user?ID=12345')\n  .then(function(res) {\n    console.log(res);\n  })\n  .catch(function(error) {\n    console.log(error);\n  });\n\n// ä¹Ÿå¯ä»¥é€šè¿‡ params å¯¹è±¡ä¼ é€’å‚æ•°\naxios\n  .get('/user', {\n    params: {\n      ID: 12345\n    }\n  })\n  .then(function(response) {\n    console.log(response);\n  })\n  .catch(function(error) {\n    console.log(error);\n  });\n```\n\n#### POST\n\n```js\naxios\n  .post(\n    '/user',\n    {\n      userId: '123'\n    },\n    {\n      headers: {\n        token: 'abc'\n      }\n    }\n  )\n  .then(function(res) {\n    console.log(res);\n  })\n  .catch(function(error) {\n    console.log(error);\n  });\n```\n\n#### ç›´æ¥ä½¿ç”¨ config\n\n```js\n// GET\naxios({\n  url: 'pakage.json',\n  method: 'get',\n  params: {\n    // get åœ¨ params ä¸­å®šä¹‰\n    userId: '123'\n  },\n  headers: {\n    token: 'http-test'\n  }\n}).then(res => {\n  console.log(res.data);\n});\n\n// POST\naxios({\n  url: 'pakage.json',\n  method: 'post',\n  data: {\n    // post åœ¨ data ä¸­å®šä¹‰\n    userId: '123'\n  },\n  headers: {\n    token: 'http-test'\n  }\n}).then(res => {\n  console.log(res.data);\n});\n```\n\n#### å¹¶å‘è¯·æ±‚\n\n```js\nfunction getUserAcount() {\n  // è¿”å›ä¸€ä¸ª promise å¯¹è±¡\n  return axios.get('/user/1234');\n}\nfunction getUserPermissions() {\n  // è¿”å›ä¸€ä¸ª promise å¯¹è±¡\n  return axios.get('/user/1234/getUserPermissions');\n}\n\n// ä¸€æ¬¡æ€§è¿”å›ä¸¤ä¸ªæ¥å£\naxios.all([getUserAccount(), getUserPerssions()]).then(\n  axios.spread((acct, perms) => {\n    // spread å±•å¼€ä¸¤ä¸ªè¿”å›çš„ç»“æœ\n    // ä¸¤ä¸ªè¯·æ±‚ç°å·²å®Œæˆ\n  })\n);\n```\n\n### å…¨å±€å°è£…ã€å¼‚å¸¸å¤„ç†\n\nåœ¨é¡¹ç›®ä¸­ï¼Œå¦‚æœæ¯æ¬¡è¯·æ±‚éƒ½å†™ä¸€å † `config` ä¼šå­˜åœ¨å¤§é‡é‡å¤ä»£ç ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šå°è£…æˆä¸€ä¸ªæ–¹æ³•ï¼ŒæŠŠä¸€äº›å¿…è¦çš„å‚æ•°é…ç½®å¥½ï¼ŒåŒç†ï¼Œå…¨å±€çš„å¼‚å¸¸è¿˜æœ‰é‰´æƒç­‰éƒ½ç»Ÿä¸€é…ç½®ã€‚å•æ¬¡è¯·æ±‚æ•°æ®åªåšå’Œæ•°æ®ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘ã€‚ä¸‹é¢æ¥çœ‹ä¸€ä¸‹ Axios çš„å…¨å±€å°è£…ä¾‹å­ã€‚\n\n#### å°è£…\n\n```js\nimport axios from 'axios';\nimport qs from 'qs';\n\n// POST æ–¹æ³•å°è£…  (åŸç”Ÿ form æäº¤)\nexport const postRequest = (url, params) => {\n  return axios({\n    method: 'post',\n    url: url,\n    data: params,\n    transformRequest: [\n      function(data) {\n        return qs.stringify(data);\n      }\n    ],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  });\n};\n\n// POST æ–¹æ³•å°è£…  (æ–‡ä»¶ä¸Šä¼ )\nexport const uploadFileRequest = (url, params) => {\n  return axios({\n    method: 'post',\n    url: url,\n    data: params,\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  });\n};\n\n// GET æ–¹æ³•å°è£…\nexport const getRequest = url => {\n  return axios({\n    method: 'get',\n    url: url\n  });\n};\n\n// PUT æ–¹æ³•å°è£…\nexport const putRequest = (url, params) => {\n  return axios({\n    method: 'put',\n    url: url,\n    data: params,\n    transformRequest: [\n      function(data) {\n        return qs.stringify(data);\n      }\n    ],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  });\n};\n\n// DELETE æ–¹æ³•å°è£…\nexport const deleteRequest = url => {\n  return axios({\n    method: 'delete',\n    url: url\n  });\n};\n```\n\n#### å¼‚å¸¸å¤„ç†\n\n```js\nimport axios from 'axios';\nimport { Message } from 'element-ui';\n\n//  è¯·æ±‚æ‹¦æˆª\naxios.interceptors.request.use(\n  config => {\n    // è¯·æ±‚å‰é…ç½® config\n    return config;\n  },\n  err => {\n    // é”™è¯¯å¤„ç†\n    Message.error({ message: 'è¯·æ±‚è¶…æ—¶!' });\n    return Promise.resolve(err);\n  }\n);\n\n// å“åº”æ‹¦æˆª\naxios.interceptors.response.use(\n  data => {\n    // è¯·æ±‚åå¤„ç†å¯¹åº”çš„æ•°æ®\n\n    // æ–¹å¼ä¸€ï¼šå’Œåç«¯çº¦å®šå“åº”ç  `code`\n    switch (data.code) {\n      case '0':\n        // æ­£å¸¸ç›´æ¥è¿”å›\n        return data;\n      // éœ€è¦é‡æ–°ç™»å½•\n      case '-1':\n        // some code here..\n        break;\n      default:\n    }\n\n    // æ–¹å¼äºŒï¼šä»…åˆ¤æ–­ HTTP çŠ¶æ€ç \n    if (data.status && data.status == 200 && data.data.status == 'error') {\n      Message.error({ message: data.data.msg });\n      return;\n    }\n    return data;\n  },\n  err => {\n    // é”™è¯¯å¤„ç†\n    if (err && err.response) {\n      switch (err.response.status) {\n        case 400:\n          err.message = 'è¯·æ±‚é”™è¯¯ (400)';\n          break;\n        case 401:\n          err.message = 'æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½• (401)';\n          break;\n        case 403:\n          err.message = 'æ‹’ç»è®¿é—® (403)';\n          break;\n        case 404:\n          err.message = 'è¯·æ±‚å‡ºé”™ (404)';\n          break;\n        case 408:\n          err.message = 'è¯·æ±‚è¶…æ—¶ (408)';\n          break;\n        case 500:\n          err.message = 'æœåŠ¡å™¨é”™è¯¯ (500)';\n          break;\n        case 501:\n          err.message = 'æœåŠ¡æœªå®ç° (501)';\n          break;\n        case 502:\n          err.message = 'ç½‘ç»œé”™è¯¯ (502)';\n          break;\n        case 503:\n          err.message = 'æœåŠ¡ä¸å¯ç”¨ (503)';\n          break;\n        case 504:\n          err.message = 'ç½‘ç»œè¶…æ—¶ (504)';\n          break;\n        case 505:\n          err.message = 'HTTP ç‰ˆæœ¬ä¸å—æ”¯æŒ (505)';\n          break;\n        default:\n          err.message = `è¿æ¥å‡ºé”™ (${err.response.status})!`;\n      }\n    } else {\n      err.message = 'è¿æ¥æœåŠ¡å™¨å¤±è´¥!';\n    }\n    Message.err({ message: err.message });\n    return Promise.resolve(err);\n  }\n);\n```\n\n<div class=\"tip\">\nè¯·æ±‚å‡ºé”™çš„æ—¶å€™æ‰§è¡Œçš„æ˜¯ï¼š`Promise.resolve(err)`ï¼Œè€Œä¸æ˜¯ `Promise.reject(err)`ï¼Œè¿™æ ·æ— è®ºè¯·æ±‚æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œåœ¨æˆåŠŸçš„å›è°ƒä¸­éƒ½èƒ½æ”¶åˆ°é€šçŸ¥ã€‚\n</div>\n\n### å…¶å®ƒé…ç½®\n\n#### baseURL\n\né€šè¿‡ `axios.defaults.baseURL` æ¥è®¾ç½® API çš„æ ¹åŸŸåã€‚\n\n```js\nif (process.env.NODE_ENV == 'development') {\n  axios.defaults.baseURL = 'https://dev.server.com/';\n} else if (process.env.NODE_ENV == 'debug') {\n  axios.defaults.baseURL = 'https://debug.server.com/';\n} else if (process.env.NODE_ENV == 'production') {\n  axios.defaults.baseURL = 'https://pro.server.com/';\n}\n```\n\n<div class=\"tip\">\n`process.env` æ˜¯ Node.js æä¾›çš„å…¨å±€å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ npm scripts é‡Œé€šè¿‡ cross-env è¿™ä¸ªå·¥å…·ç»Ÿä¸€é…ç½®ä¸åŒçš„ç¯å¢ƒï¼Œcross-env åšäº†å„ç§ç³»ç»Ÿå¹³å°çš„å…¼å®¹å¤„ç†ã€‚ä¸€èˆ¬ç”¨è¿™ä¸ªè®¾ç½®ç¯å¢ƒå˜é‡ã€‚\n</div>\n\n#### è¯·æ±‚è¶…æ—¶\n\né€šè¿‡ `axios.defaults.timeout` è®¾ç½®é»˜è®¤çš„è¯·æ±‚è¶…æ—¶æ—¶é—´ã€‚ä¾‹å¦‚è¶…è¿‡äº† 10sï¼Œå°±ä¼šå‘ŠçŸ¥ç”¨æˆ·å½“å‰è¯·æ±‚è¶…æ—¶ï¼Œè¯·åˆ·æ–°ç­‰ã€‚\n\n```js\naxios.defaults.timeout = 10000;\n```\n\n#### å•ç‹¬è®¾ç½® POST çš„è¯·æ±‚å¤´\n\næ¯”å¦‚è®¾ç½® POST æäº¤ï¼ˆåŸç”Ÿ formï¼‰æ—¶å•ç‹¬é…ç½®ã€‚\n\n```js\naxios.defaults.headers.post['Content-Type'] =\n  'application/x-www-form-urlencoded;charset=UTF-8';\n```\n\n### é™„: å®Œæ•´ä»£ç \n\n```js\nimport axios from 'axios';\nimport QS from 'qs';\nimport { Toast } from 'vant';\n\n// ç¯å¢ƒçš„åˆ‡æ¢\nif (process.env.NODE_ENV == 'development') {\n  axios.defaults.baseURL = 'https://dev.server.com/';\n} else if (process.env.NODE_ENV == 'debug') {\n  axios.defaults.baseURL = 'https://debug.server.com/';\n} else if (process.env.NODE_ENV == 'production') {\n  axios.defaults.baseURL = 'https://pro.server.com/';\n}\n\n// è¯·æ±‚è¶…æ—¶æ—¶é—´\naxios.defaults.timeout = 10000;\n\n// POST è¯·æ±‚å¤´\naxios.defaults.headers.post['Content-Type'] =\n  'application/x-www-form-urlencoded;charset=UTF-8';\n\n// è¯·æ±‚æ‹¦æˆªå™¨\naxios.interceptors.request.use(\n  config = > {\n    const token = store.state.token;\n    token && (config.headers.Authorization = token);\n    return config;\n  }, error = > {\n    return Promise.error(error);\n  }\n)\n\n// å“åº”æ‹¦æˆªå™¨\naxios.interceptors.response.use(\n  response = > {\n    if (response.status === 200) {\n      return Promise.resolve(response);\n    } else {\n      return Promise.reject(response);\n    }\n  },\n  // æœåŠ¡å™¨çŠ¶æ€ç ä¸æ˜¯ 200 çš„æƒ…å†µ\n  error = > {\n    if (error.response.status) {\n      switch (error.response.status) {\n        case 401:\n          router.replace({\n            path: '/login',\n            query: {\n              redirect: router.currentRoute.fullPath\n            }\n          });\n          break;\n        case 403:\n          Toast({\n            message: 'ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•',\n            duration: 1000,\n            forbidClick: true\n          });\n          break;\n          // 404 è¯·æ±‚ä¸å­˜åœ¨\n        case 404:\n          Toast({\n            message: 'ç½‘ç»œè¯·æ±‚ä¸å­˜åœ¨',\n            duration: 1500,\n            forbidClick: true\n          });\n          break;\n          // å…¶ä»–é”™è¯¯ï¼Œç›´æ¥æŠ›å‡ºé”™è¯¯æç¤º\n        default:\n          Toast({\n            message: error.response.data.message,\n            duration: 1500,\n            forbidClick: true\n          });\n      }\n      return Promise.reject(error.response);\n    }\n  }\n);\n\n// GET è¯·æ±‚\nexport function get(url, params) {\n  return new Promise((resolve, reject) => {\n    axios\n      .get(url, { params: params })\n      .then(res => {\n        resolve(res.data);\n      })\n      .catch (err => {\n        reject(err.data)\n      })\n  });\n}\n\n// POST è¯·æ±‚\nexport function post(url, params) {\n  return new Promise((resolve, reject) => {\n    axios\n      .post(url, QS.stringify(params))\n      .then(res = > {\n        resolve(res.data);\n      })\n      .catch (err => {\n        reject(err.data)\n      })\n  });\n}\n```\n\n### é™„: Content-Type\n\nè¯´åˆ°å’ŒæœåŠ¡ç«¯æ•°æ®äº¤äº’ï¼Œæ€»æ˜¯ç»•ä¸å¼€è¿™ä¸ªï¼Œå¿…é¡»è¦æ‰«ç›²ä¸€ä¸‹äº†ï¼ğŸ˜‚ğŸ˜‚\n\n> Content-Type ç”¨äºæŒ‡å®šå†…å®¹ç±»å‹ï¼Œä¸€èˆ¬æ˜¯æŒ‡ç½‘é¡µä¸­å­˜åœ¨çš„ Content-Typeï¼ŒContent-Type å±æ€§æŒ‡å®šè¯·æ±‚å’Œå“åº”çš„ HTTP å†…å®¹ç±»å‹ã€‚å¦‚æœæœªæŒ‡å®š ContentTypeï¼Œé»˜è®¤ä¸º `text/html`ã€‚\n\nå¸¸è§ç±»å‹æœ‰ï¼š\n\n- text/html\n- application/x-www-form-urlencoded\n- multipart/form-data\n- application/json\n- application/xml\n\n`application/x-www-form-urlencoded`ã€`multipart/form-data`ã€`application/json`ã€`application/xml` è¿™å››ä¸ªåˆ™æ˜¯ ajax è¯·æ±‚éœ€è¦æŒ‡å®šçš„ç±»å‹ï¼Œè¡¨å•æäº¤æˆ–ä¸Šä¼ æ–‡ä»¶å¸¸ç”¨çš„èµ„æºç±»å‹ã€‚\n\n#### application/x-www-form-urlencoded\n\nè¿™æ˜¯è¡¨å•é»˜è®¤æäº¤æ–¹å¼ï¼Œæ ¼å¼ä¸º URL ç¼–ç  `key=value&key1=value1`ã€‚\n\n<div style=\"max-width: 500px\">![image](https://user-images.githubusercontent.com/9158841/32037816-ade83a36-b9ec-11e7-9f07-4f72a99c6aaa.png)</div>\n\næ³¨ï¼šChrome æµè§ˆå™¨ä¼šè‡ªåŠ¨æ ¼å¼åŒ–æˆæ˜“è¯»çš„æ ¼å¼\n\n#### multipart/form-data\n\nä½¿ç”¨è¡¨å•ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œå¿…é¡»æŒ‡å®šè¡¨å•çš„ enctype å±æ€§å€¼ä¸º `multipart/form-data`ã€‚\nè¯·æ±‚ä½“è¢«åˆ†å‰²æˆå¤šéƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†ä½¿ç”¨ `--boundary` åˆ†å‰²ï¼Œä½¿ç”¨ `--boundary--\\r\\n` ç»“æŸã€‚\n\nè¡¨å•ä¸Šä¼ æ–‡ä»¶ Demo:\n\n```html\n<form action=\"/upload\" enctype=\"multipart/form-data\" method=\"post\">\n    ç”¨æˆ·å: <input type=\"text\" name=\"username\">\n    å¯†ç : <input type=\"password\" name=\"password\">\n    ä¸Šä¼ æ–‡ä»¶: <input type=\"file\" name=\"file\">\n    <input type=\"submit\" value=\"æäº¤\">\n</form>\n```\n\n<div style=\"max-width: 500px\">![image](https://user-images.githubusercontent.com/9158841/32038354-1201f94c-b9ef-11e7-8817-fb9031b2b036.png)</div>\n\n#### application/json\n\nAxios é»˜è®¤ `POST` æäº¤æ–¹å¼å°±æ˜¯ `application/json`ï¼Œæ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨ axios æäº¤è¡¨å•æ—¶éœ€è¦æ³¨æ„åç«¯èƒ½ä¸èƒ½è§£æï¼Œä¸èƒ½è§£æéœ€è¦è®¾ç½® `POST` å¸¸ç”¨æ ¼å¼ `application/x-www-form-urlencoded`ï¼Œä¸”æäº¤çš„æ•°æ®éœ€è¦ä½¿ç”¨ qs æ¨¡å—åºåˆ—åŒ–æ ¼å¼ã€‚\n\n```js\naxios.post(\n  'https://jsonplaceholder.typicode.com/posts',\n  {\n    userId: 1,\n    name: 'ifyour',\n    arr: [1, 2, 3, 4]\n  },\n  {\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    },\n    transformRequest: [\n      function(data) {\n        return qs.stringify(data);\n      }\n    ]\n  }\n);\n```\n\n<div style=\"max-width: 400px\">![image](https://user-images.githubusercontent.com/15377484/45913317-a939a580-be62-11e8-9d96-1a097337da44.png)</div>\n\n#### application/xml\n\n```text\nPOST http://www.example.com HTTP/1.1\nContent-Type: text/xml\n```\n\n```xml\n<?xml version=\"1.0\"?>\n<resource>\n    <id>123</id>\n    <params>\n        <name>\n            <value>example</value>\n        </name>\n        <age>\n            <value>21</value>\n        </age>\n    </params>\n</resource>\n```\n\n### å‚è€ƒ\n\n- [Axios å®˜æ–¹æ–‡æ¡£ @GitHub](https://github.com/axios/axios#installing)\n- [HTTP Content-Type å¯¹ç…§è¡¨ @OSChina](http://tool.oschina.net/commons)\n- [HTTP è¯·æ±‚æ–¹æ³• @MDN](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods)\n","slug":"Axios-ä½¿ç”¨å§¿åŠ¿æŒ‡å—","published":1,"updated":"2019-12-07T04:53:18.084Z","layout":"post","photos":[],"link":"","_id":"ck3v60jt80006r9q9kvbjbebj","content":"<p>æœ€è¿‘å‡ ä¸ªé¡¹ç›®éƒ½ç”¨åˆ°äº† Axiosï¼Œå®ƒæ˜¯ä¸€ä¸ªæ›´ç°ä»£çš„ API è¯·æ±‚åº“ï¼ŒåŸºäº Promiseï¼Œèƒ½è¿è¡Œåœ¨æµè§ˆå™¨å’Œ Node.js é‡Œã€‚åœ¨é¡¹ç›®é‡Œï¼Œä¸€èˆ¬éƒ½æ˜¯éœ€è¦è¿›è¡Œä¸€æ¬¡å°è£…å†æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚å¤„ç†é‰´æƒã€è¿˜æœ‰å…¨å±€çš„è¯·æ±‚ Loading åŠ¨ç”»ç­‰ã€‚ä»Šå¤©æ¥æ€»ç»“ä¸€ä¸‹ã€‚</p>\n<a id=\"more\"></a>\n<h3 id=\"Axios-ç®€ä»‹\"><a href=\"#Axios-ç®€ä»‹\" class=\"headerlink\" title=\"Axios ç®€ä»‹\"></a>Axios ç®€ä»‹</h3><p><a href=\"https://github.com/axios/axios\" target=\"_blank\" rel=\"noopener\">Axios</a> æ˜¯ä¸€ä¸ªåŸºäº Promise ç”¨äºæµè§ˆå™¨å’Œ nodejs çš„ HTTP å®¢æˆ·ç«¯ã€‚å®ƒæœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š</p>\n<ul>\n<li>ä»æµè§ˆå™¨ä¸­åˆ›å»º XMLHttpRequest</li>\n<li>ä» Node.js å‘å‡º HTTP è¯·æ±‚</li>\n<li>æ”¯æŒ Promise API</li>\n<li>æ‹¦æˆªè¯·æ±‚å’Œå“åº”</li>\n<li>è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®</li>\n<li>è‡ªåŠ¨è½¬æ¢ JSON æ•°æ®</li>\n<li>å®¢æˆ·ç«¯é˜²æ­¢ CSRF/XSRF</li>\n</ul>\n<h3 id=\"åŸºç¡€-API\"><a href=\"#åŸºç¡€-API\" class=\"headerlink\" title=\"åŸºç¡€ API\"></a>åŸºç¡€ API</h3><ul>\n<li><code>axios.request(config)</code></li>\n<li><code>axios.get(url [,config])</code></li>\n<li><code>axios.delete(url [,config])</code></li>\n<li><code>axios.head(url [,config])</code></li>\n<li><code>axios.options(url [,config])</code></li>\n<li><code>axios.post(url [,data [,config]])</code></li>\n<li><code>axios.put(url [,data [,config]])</code></li>\n<li><code>axios.patch(url [,data [,config]])</code></li>\n</ul>\n<div class=\"tip\"><br>  HTTP è¯·æ±‚æ–¹æ³•ä¸€èˆ¬ä¼šæŒ‰ç…§å®ƒå…·ä½“çš„å«ä¹‰æ¥æ‰§è¡Œç›¸å…³çš„åŠ¨ä½œï¼Œè¿™é‡Œæœ‰ä¸€ä»½ <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods\" target=\"_blank\" rel=\"noopener\">HTTP åŠ¨è¯å¯¹åº”è§£é‡Š @MDN</a>ã€‚<br></div>\n\n<h3 id=\"ç”¨æ³•ç¤ºä¾‹\"><a href=\"#ç”¨æ³•ç¤ºä¾‹\" class=\"headerlink\" title=\"ç”¨æ³•ç¤ºä¾‹\"></a>ç”¨æ³•ç¤ºä¾‹</h3><h4 id=\"GET\"><a href=\"#GET\" class=\"headerlink\" title=\"GET\"></a>GET</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å‘å…·æœ‰æŒ‡å®š ID çš„ç”¨æˆ·å‘å‡ºè¯·æ±‚ï¼ˆå‚æ•°åœ¨ URL ä¸Šï¼‰</span></span><br><span class=\"line\">axios</span><br><span class=\"line\">  .get(<span class=\"string\">'/user?ID=12345'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¹Ÿå¯ä»¥é€šè¿‡ params å¯¹è±¡ä¼ é€’å‚æ•°</span></span><br><span class=\"line\">axios</span><br><span class=\"line\">  .get(<span class=\"string\">'/user'</span>, &#123;</span><br><span class=\"line\">    params: &#123;</span><br><span class=\"line\">      ID: <span class=\"number\">12345</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(response);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"POST\"><a href=\"#POST\" class=\"headerlink\" title=\"POST\"></a>POST</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">axios</span><br><span class=\"line\">  .post(</span><br><span class=\"line\">    <span class=\"string\">'/user'</span>,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      userId: <span class=\"string\">'123'</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        token: <span class=\"string\">'abc'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  )</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"ç›´æ¥ä½¿ç”¨-config\"><a href=\"#ç›´æ¥ä½¿ç”¨-config\" class=\"headerlink\" title=\"ç›´æ¥ä½¿ç”¨ config\"></a>ç›´æ¥ä½¿ç”¨ config</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// GET</span></span><br><span class=\"line\">axios(&#123;</span><br><span class=\"line\">  url: <span class=\"string\">'pakage.json'</span>,</span><br><span class=\"line\">  method: <span class=\"string\">'get'</span>,</span><br><span class=\"line\">  params: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// get åœ¨ params ä¸­å®šä¹‰</span></span><br><span class=\"line\">    userId: <span class=\"string\">'123'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  headers: &#123;</span><br><span class=\"line\">    token: <span class=\"string\">'http-test'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res.data);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// POST</span></span><br><span class=\"line\">axios(&#123;</span><br><span class=\"line\">  url: <span class=\"string\">'pakage.json'</span>,</span><br><span class=\"line\">  method: <span class=\"string\">'post'</span>,</span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// post åœ¨ data ä¸­å®šä¹‰</span></span><br><span class=\"line\">    userId: <span class=\"string\">'123'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  headers: &#123;</span><br><span class=\"line\">    token: <span class=\"string\">'http-test'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res.data);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"å¹¶å‘è¯·æ±‚\"><a href=\"#å¹¶å‘è¯·æ±‚\" class=\"headerlink\" title=\"å¹¶å‘è¯·æ±‚\"></a>å¹¶å‘è¯·æ±‚</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserAcount</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// è¿”å›ä¸€ä¸ª promise å¯¹è±¡</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios.get(<span class=\"string\">'/user/1234'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserPermissions</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// è¿”å›ä¸€ä¸ª promise å¯¹è±¡</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios.get(<span class=\"string\">'/user/1234/getUserPermissions'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¸€æ¬¡æ€§è¿”å›ä¸¤ä¸ªæ¥å£</span></span><br><span class=\"line\">axios.all([getUserAccount(), getUserPerssions()]).then(</span><br><span class=\"line\">  axios.spread(<span class=\"function\">(<span class=\"params\">acct, perms</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// spread å±•å¼€ä¸¤ä¸ªè¿”å›çš„ç»“æœ</span></span><br><span class=\"line\">    <span class=\"comment\">// ä¸¤ä¸ªè¯·æ±‚ç°å·²å®Œæˆ</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<h3 id=\"å…¨å±€å°è£…ã€å¼‚å¸¸å¤„ç†\"><a href=\"#å…¨å±€å°è£…ã€å¼‚å¸¸å¤„ç†\" class=\"headerlink\" title=\"å…¨å±€å°è£…ã€å¼‚å¸¸å¤„ç†\"></a>å…¨å±€å°è£…ã€å¼‚å¸¸å¤„ç†</h3><p>åœ¨é¡¹ç›®ä¸­ï¼Œå¦‚æœæ¯æ¬¡è¯·æ±‚éƒ½å†™ä¸€å † <code>config</code> ä¼šå­˜åœ¨å¤§é‡é‡å¤ä»£ç ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šå°è£…æˆä¸€ä¸ªæ–¹æ³•ï¼ŒæŠŠä¸€äº›å¿…è¦çš„å‚æ•°é…ç½®å¥½ï¼ŒåŒç†ï¼Œå…¨å±€çš„å¼‚å¸¸è¿˜æœ‰é‰´æƒç­‰éƒ½ç»Ÿä¸€é…ç½®ã€‚å•æ¬¡è¯·æ±‚æ•°æ®åªåšå’Œæ•°æ®ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘ã€‚ä¸‹é¢æ¥çœ‹ä¸€ä¸‹ Axios çš„å…¨å±€å°è£…ä¾‹å­ã€‚</p>\n<h4 id=\"å°è£…\"><a href=\"#å°è£…\" class=\"headerlink\" title=\"å°è£…\"></a>å°è£…</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> qs <span class=\"keyword\">from</span> <span class=\"string\">'qs'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// POST æ–¹æ³•å°è£…  (åŸç”Ÿ form æäº¤)</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> postRequest = <span class=\"function\">(<span class=\"params\">url, params</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios(&#123;</span><br><span class=\"line\">    method: <span class=\"string\">'post'</span>,</span><br><span class=\"line\">    url: url,</span><br><span class=\"line\">    data: params,</span><br><span class=\"line\">    transformRequest: [</span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> qs.stringify(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/x-www-form-urlencoded'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// POST æ–¹æ³•å°è£…  (æ–‡ä»¶ä¸Šä¼ )</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> uploadFileRequest = <span class=\"function\">(<span class=\"params\">url, params</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios(&#123;</span><br><span class=\"line\">    method: <span class=\"string\">'post'</span>,</span><br><span class=\"line\">    url: url,</span><br><span class=\"line\">    data: params,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'multipart/form-data'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// GET æ–¹æ³•å°è£…</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getRequest = <span class=\"function\"><span class=\"params\">url</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios(&#123;</span><br><span class=\"line\">    method: <span class=\"string\">'get'</span>,</span><br><span class=\"line\">    url: url</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// PUT æ–¹æ³•å°è£…</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> putRequest = <span class=\"function\">(<span class=\"params\">url, params</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios(&#123;</span><br><span class=\"line\">    method: <span class=\"string\">'put'</span>,</span><br><span class=\"line\">    url: url,</span><br><span class=\"line\">    data: params,</span><br><span class=\"line\">    transformRequest: [</span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> qs.stringify(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/x-www-form-urlencoded'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// DELETE æ–¹æ³•å°è£…</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> deleteRequest = <span class=\"function\"><span class=\"params\">url</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios(&#123;</span><br><span class=\"line\">    method: <span class=\"string\">'delete'</span>,</span><br><span class=\"line\">    url: url</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"å¼‚å¸¸å¤„ç†\"><a href=\"#å¼‚å¸¸å¤„ç†\" class=\"headerlink\" title=\"å¼‚å¸¸å¤„ç†\"></a>å¼‚å¸¸å¤„ç†</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Message &#125; <span class=\"keyword\">from</span> <span class=\"string\">'element-ui'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  è¯·æ±‚æ‹¦æˆª</span></span><br><span class=\"line\">axios.interceptors.request.use(</span><br><span class=\"line\">  config =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// è¯·æ±‚å‰é…ç½® config</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> config;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  err =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// é”™è¯¯å¤„ç†</span></span><br><span class=\"line\">    Message.error(&#123; <span class=\"attr\">message</span>: <span class=\"string\">'è¯·æ±‚è¶…æ—¶!'</span> &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(err);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å“åº”æ‹¦æˆª</span></span><br><span class=\"line\">axios.interceptors.response.use(</span><br><span class=\"line\">  data =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// è¯·æ±‚åå¤„ç†å¯¹åº”çš„æ•°æ®</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// æ–¹å¼ä¸€ï¼šå’Œåç«¯çº¦å®šå“åº”ç  `code`</span></span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (data.code) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'0'</span>:</span><br><span class=\"line\">        <span class=\"comment\">// æ­£å¸¸ç›´æ¥è¿”å›</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">      <span class=\"comment\">// éœ€è¦é‡æ–°ç™»å½•</span></span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'-1'</span>:</span><br><span class=\"line\">        <span class=\"comment\">// some code here..</span></span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      <span class=\"keyword\">default</span>:</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// æ–¹å¼äºŒï¼šä»…åˆ¤æ–­ HTTP çŠ¶æ€ç </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (data.status &amp;&amp; data.status == <span class=\"number\">200</span> &amp;&amp; data.data.status == <span class=\"string\">'error'</span>) &#123;</span><br><span class=\"line\">      Message.error(&#123; <span class=\"attr\">message</span>: data.data.msg &#125;);</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  err =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// é”™è¯¯å¤„ç†</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err &amp;&amp; err.response) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">switch</span> (err.response.status) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">400</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'è¯·æ±‚é”™è¯¯ (400)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">401</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½• (401)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">403</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'æ‹’ç»è®¿é—® (403)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">404</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'è¯·æ±‚å‡ºé”™ (404)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">408</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'è¯·æ±‚è¶…æ—¶ (408)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">500</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'æœåŠ¡å™¨é”™è¯¯ (500)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">501</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'æœåŠ¡æœªå®ç° (501)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">502</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'ç½‘ç»œé”™è¯¯ (502)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">503</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'æœåŠ¡ä¸å¯ç”¨ (503)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">504</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'ç½‘ç»œè¶…æ—¶ (504)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">505</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'HTTP ç‰ˆæœ¬ä¸å—æ”¯æŒ (505)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">`è¿æ¥å‡ºé”™ (<span class=\"subst\">$&#123;err.response.status&#125;</span>)!`</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      err.message = <span class=\"string\">'è¿æ¥æœåŠ¡å™¨å¤±è´¥!'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    Message.err(&#123; <span class=\"attr\">message</span>: err.message &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(err);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<div class=\"tip\"><br>è¯·æ±‚å‡ºé”™çš„æ—¶å€™æ‰§è¡Œçš„æ˜¯ï¼š<code>Promise.resolve(err)</code>ï¼Œè€Œä¸æ˜¯ <code>Promise.reject(err)</code>ï¼Œè¿™æ ·æ— è®ºè¯·æ±‚æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œåœ¨æˆåŠŸçš„å›è°ƒä¸­éƒ½èƒ½æ”¶åˆ°é€šçŸ¥ã€‚<br></div>\n\n<h3 id=\"å…¶å®ƒé…ç½®\"><a href=\"#å…¶å®ƒé…ç½®\" class=\"headerlink\" title=\"å…¶å®ƒé…ç½®\"></a>å…¶å®ƒé…ç½®</h3><h4 id=\"baseURL\"><a href=\"#baseURL\" class=\"headerlink\" title=\"baseURL\"></a>baseURL</h4><p>é€šè¿‡ <code>axios.defaults.baseURL</code> æ¥è®¾ç½® API çš„æ ¹åŸŸåã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (process.env.NODE_ENV == <span class=\"string\">'development'</span>) &#123;</span><br><span class=\"line\">  axios.defaults.baseURL = <span class=\"string\">'https://dev.server.com/'</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.env.NODE_ENV == <span class=\"string\">'debug'</span>) &#123;</span><br><span class=\"line\">  axios.defaults.baseURL = <span class=\"string\">'https://debug.server.com/'</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.env.NODE_ENV == <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">  axios.defaults.baseURL = <span class=\"string\">'https://pro.server.com/'</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<div class=\"tip\"><br><code>process.env</code> æ˜¯ Node.js æä¾›çš„å…¨å±€å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ npm scripts é‡Œé€šè¿‡ cross-env è¿™ä¸ªå·¥å…·ç»Ÿä¸€é…ç½®ä¸åŒçš„ç¯å¢ƒï¼Œcross-env åšäº†å„ç§ç³»ç»Ÿå¹³å°çš„å…¼å®¹å¤„ç†ã€‚ä¸€èˆ¬ç”¨è¿™ä¸ªè®¾ç½®ç¯å¢ƒå˜é‡ã€‚<br></div>\n\n<h4 id=\"è¯·æ±‚è¶…æ—¶\"><a href=\"#è¯·æ±‚è¶…æ—¶\" class=\"headerlink\" title=\"è¯·æ±‚è¶…æ—¶\"></a>è¯·æ±‚è¶…æ—¶</h4><p>é€šè¿‡ <code>axios.defaults.timeout</code> è®¾ç½®é»˜è®¤çš„è¯·æ±‚è¶…æ—¶æ—¶é—´ã€‚ä¾‹å¦‚è¶…è¿‡äº† 10sï¼Œå°±ä¼šå‘ŠçŸ¥ç”¨æˆ·å½“å‰è¯·æ±‚è¶…æ—¶ï¼Œè¯·åˆ·æ–°ç­‰ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">axios.defaults.timeout = <span class=\"number\">10000</span>;</span><br></pre></td></tr></table></figure>\n<h4 id=\"å•ç‹¬è®¾ç½®-POST-çš„è¯·æ±‚å¤´\"><a href=\"#å•ç‹¬è®¾ç½®-POST-çš„è¯·æ±‚å¤´\" class=\"headerlink\" title=\"å•ç‹¬è®¾ç½® POST çš„è¯·æ±‚å¤´\"></a>å•ç‹¬è®¾ç½® POST çš„è¯·æ±‚å¤´</h4><p>æ¯”å¦‚è®¾ç½® POST æäº¤ï¼ˆåŸç”Ÿ formï¼‰æ—¶å•ç‹¬é…ç½®ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">axios.defaults.headers.post[<span class=\"string\">'Content-Type'</span>] =</span><br><span class=\"line\">  <span class=\"string\">'application/x-www-form-urlencoded;charset=UTF-8'</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"é™„-å®Œæ•´ä»£ç \"><a href=\"#é™„-å®Œæ•´ä»£ç \" class=\"headerlink\" title=\"é™„: å®Œæ•´ä»£ç \"></a>é™„: å®Œæ•´ä»£ç </h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> QS <span class=\"keyword\">from</span> <span class=\"string\">'qs'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Toast &#125; <span class=\"keyword\">from</span> <span class=\"string\">'vant'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç¯å¢ƒçš„åˆ‡æ¢</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (process.env.NODE_ENV == <span class=\"string\">'development'</span>) &#123;</span><br><span class=\"line\">  axios.defaults.baseURL = <span class=\"string\">'https://dev.server.com/'</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.env.NODE_ENV == <span class=\"string\">'debug'</span>) &#123;</span><br><span class=\"line\">  axios.defaults.baseURL = <span class=\"string\">'https://debug.server.com/'</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.env.NODE_ENV == <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">  axios.defaults.baseURL = <span class=\"string\">'https://pro.server.com/'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¯·æ±‚è¶…æ—¶æ—¶é—´</span></span><br><span class=\"line\">axios.defaults.timeout = <span class=\"number\">10000</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// POST è¯·æ±‚å¤´</span></span><br><span class=\"line\">axios.defaults.headers.post[<span class=\"string\">'Content-Type'</span>] =</span><br><span class=\"line\">  <span class=\"string\">'application/x-www-form-urlencoded;charset=UTF-8'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class=\"line\">axios.interceptors.request.use(</span><br><span class=\"line\">  config = &gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> token = store.state.token;</span><br><span class=\"line\">    token &amp;&amp; (config.headers.Authorization = token);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> config;</span><br><span class=\"line\">  &#125;, error = &gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.error(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class=\"line\">axios.interceptors.response.use(</span><br><span class=\"line\">  response = &gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (response.status === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(response);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.reject(response);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// æœåŠ¡å™¨çŠ¶æ€ç ä¸æ˜¯ 200 çš„æƒ…å†µ</span></span><br><span class=\"line\">  error = &gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (error.response.status) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">switch</span> (error.response.status) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">401</span>:</span><br><span class=\"line\">          router.replace(&#123;</span><br><span class=\"line\">            path: <span class=\"string\">'/login'</span>,</span><br><span class=\"line\">            query: &#123;</span><br><span class=\"line\">              redirect: router.currentRoute.fullPath</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">403</span>:</span><br><span class=\"line\">          Toast(&#123;</span><br><span class=\"line\">            message: <span class=\"string\">'ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•'</span>,</span><br><span class=\"line\">            duration: <span class=\"number\">1000</span>,</span><br><span class=\"line\">            forbidClick: <span class=\"literal\">true</span></span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">          <span class=\"comment\">// 404 è¯·æ±‚ä¸å­˜åœ¨</span></span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">404</span>:</span><br><span class=\"line\">          Toast(&#123;</span><br><span class=\"line\">            message: <span class=\"string\">'ç½‘ç»œè¯·æ±‚ä¸å­˜åœ¨'</span>,</span><br><span class=\"line\">            duration: <span class=\"number\">1500</span>,</span><br><span class=\"line\">            forbidClick: <span class=\"literal\">true</span></span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">          <span class=\"comment\">// å…¶ä»–é”™è¯¯ï¼Œç›´æ¥æŠ›å‡ºé”™è¯¯æç¤º</span></span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">          Toast(&#123;</span><br><span class=\"line\">            message: error.response.data.message,</span><br><span class=\"line\">            duration: <span class=\"number\">1500</span>,</span><br><span class=\"line\">            forbidClick: <span class=\"literal\">true</span></span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.reject(error.response);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// GET è¯·æ±‚</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">get</span>(<span class=\"params\">url, params</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    axios</span><br><span class=\"line\">      .get(url, &#123; <span class=\"attr\">params</span>: params &#125;)</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">        resolve(res.data);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch (<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">        reject(err.data)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// POST è¯·æ±‚</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">post</span>(<span class=\"params\">url, params</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    axios</span><br><span class=\"line\">      .post(url, QS.stringify(params))</span><br><span class=\"line\">      .then(res = &gt; &#123;</span><br><span class=\"line\">        resolve(res.data);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch (<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">        reject(err.data)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"é™„-Content-Type\"><a href=\"#é™„-Content-Type\" class=\"headerlink\" title=\"é™„: Content-Type\"></a>é™„: Content-Type</h3><p>è¯´åˆ°å’ŒæœåŠ¡ç«¯æ•°æ®äº¤äº’ï¼Œæ€»æ˜¯ç»•ä¸å¼€è¿™ä¸ªï¼Œå¿…é¡»è¦æ‰«ç›²ä¸€ä¸‹äº†ï¼ğŸ˜‚ğŸ˜‚</p>\n<blockquote>\n<p>Content-Type ç”¨äºæŒ‡å®šå†…å®¹ç±»å‹ï¼Œä¸€èˆ¬æ˜¯æŒ‡ç½‘é¡µä¸­å­˜åœ¨çš„ Content-Typeï¼ŒContent-Type å±æ€§æŒ‡å®šè¯·æ±‚å’Œå“åº”çš„ HTTP å†…å®¹ç±»å‹ã€‚å¦‚æœæœªæŒ‡å®š ContentTypeï¼Œé»˜è®¤ä¸º <code>text/html</code>ã€‚</p>\n</blockquote>\n<p>å¸¸è§ç±»å‹æœ‰ï¼š</p>\n<ul>\n<li>text/html</li>\n<li>application/x-www-form-urlencoded</li>\n<li>multipart/form-data</li>\n<li>application/json</li>\n<li>application/xml</li>\n</ul>\n<p><code>application/x-www-form-urlencoded</code>ã€<code>multipart/form-data</code>ã€<code>application/json</code>ã€<code>application/xml</code> è¿™å››ä¸ªåˆ™æ˜¯ ajax è¯·æ±‚éœ€è¦æŒ‡å®šçš„ç±»å‹ï¼Œè¡¨å•æäº¤æˆ–ä¸Šä¼ æ–‡ä»¶å¸¸ç”¨çš„èµ„æºç±»å‹ã€‚</p>\n<h4 id=\"application-x-www-form-urlencoded\"><a href=\"#application-x-www-form-urlencoded\" class=\"headerlink\" title=\"application/x-www-form-urlencoded\"></a>application/x-www-form-urlencoded</h4><p>è¿™æ˜¯è¡¨å•é»˜è®¤æäº¤æ–¹å¼ï¼Œæ ¼å¼ä¸º URL ç¼–ç  <code>key=value&amp;key1=value1</code>ã€‚</p>\n<div style=\"max-width: 500px\"><img src=\"https://user-images.githubusercontent.com/9158841/32037816-ade83a36-b9ec-11e7-9f07-4f72a99c6aaa.png\" alt=\"image\"></div>\n\n<p>æ³¨ï¼šChrome æµè§ˆå™¨ä¼šè‡ªåŠ¨æ ¼å¼åŒ–æˆæ˜“è¯»çš„æ ¼å¼</p>\n<h4 id=\"multipart-form-data\"><a href=\"#multipart-form-data\" class=\"headerlink\" title=\"multipart/form-data\"></a>multipart/form-data</h4><p>ä½¿ç”¨è¡¨å•ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œå¿…é¡»æŒ‡å®šè¡¨å•çš„ enctype å±æ€§å€¼ä¸º <code>multipart/form-data</code>ã€‚<br>è¯·æ±‚ä½“è¢«åˆ†å‰²æˆå¤šéƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†ä½¿ç”¨ <code>--boundary</code> åˆ†å‰²ï¼Œä½¿ç”¨ <code>--boundary--\\r\\n</code> ç»“æŸã€‚</p>\n<p>è¡¨å•ä¸Šä¼ æ–‡ä»¶ Demo:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">\"/upload\"</span> <span class=\"attr\">enctype</span>=<span class=\"string\">\"multipart/form-data\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"post\"</span>&gt;</span></span><br><span class=\"line\">    ç”¨æˆ·å: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span>&gt;</span></span><br><span class=\"line\">    å¯†ç : <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span>&gt;</span></span><br><span class=\"line\">    ä¸Šä¼ æ–‡ä»¶: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"file\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"file\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"submit\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"æäº¤\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<div style=\"max-width: 500px\"><img src=\"https://user-images.githubusercontent.com/9158841/32038354-1201f94c-b9ef-11e7-8817-fb9031b2b036.png\" alt=\"image\"></div>\n\n<h4 id=\"application-json\"><a href=\"#application-json\" class=\"headerlink\" title=\"application/json\"></a>application/json</h4><p>Axios é»˜è®¤ <code>POST</code> æäº¤æ–¹å¼å°±æ˜¯ <code>application/json</code>ï¼Œæ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨ axios æäº¤è¡¨å•æ—¶éœ€è¦æ³¨æ„åç«¯èƒ½ä¸èƒ½è§£æï¼Œä¸èƒ½è§£æéœ€è¦è®¾ç½® <code>POST</code> å¸¸ç”¨æ ¼å¼ <code>application/x-www-form-urlencoded</code>ï¼Œä¸”æäº¤çš„æ•°æ®éœ€è¦ä½¿ç”¨ qs æ¨¡å—åºåˆ—åŒ–æ ¼å¼ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">axios.post(</span><br><span class=\"line\">  <span class=\"string\">'https://jsonplaceholder.typicode.com/posts'</span>,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    userId: <span class=\"number\">1</span>,</span><br><span class=\"line\">    name: <span class=\"string\">'ifyour'</span>,</span><br><span class=\"line\">    arr: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/x-www-form-urlencoded'</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    transformRequest: [</span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> qs.stringify(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<div style=\"max-width: 400px\"><img src=\"https://user-images.githubusercontent.com/15377484/45913317-a939a580-be62-11e8-9d96-1a097337da44.png\" alt=\"image\"></div>\n\n<h4 id=\"application-xml\"><a href=\"#application-xml\" class=\"headerlink\" title=\"application/xml\"></a>application/xml</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST http://www.example.com HTTP/1.1</span><br><span class=\"line\">Content-Type: text/xml</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\"?&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resource</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>123<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">params</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>example<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">age</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>21<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">age</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">params</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resource</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h3><ul>\n<li><a href=\"https://github.com/axios/axios#installing\" target=\"_blank\" rel=\"noopener\">Axios å®˜æ–¹æ–‡æ¡£ @GitHub</a></li>\n<li><a href=\"http://tool.oschina.net/commons\" target=\"_blank\" rel=\"noopener\">HTTP Content-Type å¯¹ç…§è¡¨ @OSChina</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods\" target=\"_blank\" rel=\"noopener\">HTTP è¯·æ±‚æ–¹æ³• @MDN</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>æœ€è¿‘å‡ ä¸ªé¡¹ç›®éƒ½ç”¨åˆ°äº† Axiosï¼Œå®ƒæ˜¯ä¸€ä¸ªæ›´ç°ä»£çš„ API è¯·æ±‚åº“ï¼ŒåŸºäº Promiseï¼Œèƒ½è¿è¡Œåœ¨æµè§ˆå™¨å’Œ Node.js é‡Œã€‚åœ¨é¡¹ç›®é‡Œï¼Œä¸€èˆ¬éƒ½æ˜¯éœ€è¦è¿›è¡Œä¸€æ¬¡å°è£…å†æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚å¤„ç†é‰´æƒã€è¿˜æœ‰å…¨å±€çš„è¯·æ±‚ Loading åŠ¨ç”»ç­‰ã€‚ä»Šå¤©æ¥æ€»ç»“ä¸€ä¸‹ã€‚</p>","more":"<h3 id=\"Axios-ç®€ä»‹\"><a href=\"#Axios-ç®€ä»‹\" class=\"headerlink\" title=\"Axios ç®€ä»‹\"></a>Axios ç®€ä»‹</h3><p><a href=\"https://github.com/axios/axios\" target=\"_blank\" rel=\"noopener\">Axios</a> æ˜¯ä¸€ä¸ªåŸºäº Promise ç”¨äºæµè§ˆå™¨å’Œ nodejs çš„ HTTP å®¢æˆ·ç«¯ã€‚å®ƒæœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š</p>\n<ul>\n<li>ä»æµè§ˆå™¨ä¸­åˆ›å»º XMLHttpRequest</li>\n<li>ä» Node.js å‘å‡º HTTP è¯·æ±‚</li>\n<li>æ”¯æŒ Promise API</li>\n<li>æ‹¦æˆªè¯·æ±‚å’Œå“åº”</li>\n<li>è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®</li>\n<li>è‡ªåŠ¨è½¬æ¢ JSON æ•°æ®</li>\n<li>å®¢æˆ·ç«¯é˜²æ­¢ CSRF/XSRF</li>\n</ul>\n<h3 id=\"åŸºç¡€-API\"><a href=\"#åŸºç¡€-API\" class=\"headerlink\" title=\"åŸºç¡€ API\"></a>åŸºç¡€ API</h3><ul>\n<li><code>axios.request(config)</code></li>\n<li><code>axios.get(url [,config])</code></li>\n<li><code>axios.delete(url [,config])</code></li>\n<li><code>axios.head(url [,config])</code></li>\n<li><code>axios.options(url [,config])</code></li>\n<li><code>axios.post(url [,data [,config]])</code></li>\n<li><code>axios.put(url [,data [,config]])</code></li>\n<li><code>axios.patch(url [,data [,config]])</code></li>\n</ul>\n<div class=\"tip\"><br>  HTTP è¯·æ±‚æ–¹æ³•ä¸€èˆ¬ä¼šæŒ‰ç…§å®ƒå…·ä½“çš„å«ä¹‰æ¥æ‰§è¡Œç›¸å…³çš„åŠ¨ä½œï¼Œè¿™é‡Œæœ‰ä¸€ä»½ <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods\" target=\"_blank\" rel=\"noopener\">HTTP åŠ¨è¯å¯¹åº”è§£é‡Š @MDN</a>ã€‚<br></div>\n\n<h3 id=\"ç”¨æ³•ç¤ºä¾‹\"><a href=\"#ç”¨æ³•ç¤ºä¾‹\" class=\"headerlink\" title=\"ç”¨æ³•ç¤ºä¾‹\"></a>ç”¨æ³•ç¤ºä¾‹</h3><h4 id=\"GET\"><a href=\"#GET\" class=\"headerlink\" title=\"GET\"></a>GET</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å‘å…·æœ‰æŒ‡å®š ID çš„ç”¨æˆ·å‘å‡ºè¯·æ±‚ï¼ˆå‚æ•°åœ¨ URL ä¸Šï¼‰</span></span><br><span class=\"line\">axios</span><br><span class=\"line\">  .get(<span class=\"string\">'/user?ID=12345'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¹Ÿå¯ä»¥é€šè¿‡ params å¯¹è±¡ä¼ é€’å‚æ•°</span></span><br><span class=\"line\">axios</span><br><span class=\"line\">  .get(<span class=\"string\">'/user'</span>, &#123;</span><br><span class=\"line\">    params: &#123;</span><br><span class=\"line\">      ID: <span class=\"number\">12345</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(response);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"POST\"><a href=\"#POST\" class=\"headerlink\" title=\"POST\"></a>POST</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">axios</span><br><span class=\"line\">  .post(</span><br><span class=\"line\">    <span class=\"string\">'/user'</span>,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      userId: <span class=\"string\">'123'</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        token: <span class=\"string\">'abc'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  )</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"ç›´æ¥ä½¿ç”¨-config\"><a href=\"#ç›´æ¥ä½¿ç”¨-config\" class=\"headerlink\" title=\"ç›´æ¥ä½¿ç”¨ config\"></a>ç›´æ¥ä½¿ç”¨ config</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// GET</span></span><br><span class=\"line\">axios(&#123;</span><br><span class=\"line\">  url: <span class=\"string\">'pakage.json'</span>,</span><br><span class=\"line\">  method: <span class=\"string\">'get'</span>,</span><br><span class=\"line\">  params: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// get åœ¨ params ä¸­å®šä¹‰</span></span><br><span class=\"line\">    userId: <span class=\"string\">'123'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  headers: &#123;</span><br><span class=\"line\">    token: <span class=\"string\">'http-test'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res.data);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// POST</span></span><br><span class=\"line\">axios(&#123;</span><br><span class=\"line\">  url: <span class=\"string\">'pakage.json'</span>,</span><br><span class=\"line\">  method: <span class=\"string\">'post'</span>,</span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// post åœ¨ data ä¸­å®šä¹‰</span></span><br><span class=\"line\">    userId: <span class=\"string\">'123'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  headers: &#123;</span><br><span class=\"line\">    token: <span class=\"string\">'http-test'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res.data);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"å¹¶å‘è¯·æ±‚\"><a href=\"#å¹¶å‘è¯·æ±‚\" class=\"headerlink\" title=\"å¹¶å‘è¯·æ±‚\"></a>å¹¶å‘è¯·æ±‚</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserAcount</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// è¿”å›ä¸€ä¸ª promise å¯¹è±¡</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios.get(<span class=\"string\">'/user/1234'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserPermissions</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// è¿”å›ä¸€ä¸ª promise å¯¹è±¡</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios.get(<span class=\"string\">'/user/1234/getUserPermissions'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¸€æ¬¡æ€§è¿”å›ä¸¤ä¸ªæ¥å£</span></span><br><span class=\"line\">axios.all([getUserAccount(), getUserPerssions()]).then(</span><br><span class=\"line\">  axios.spread(<span class=\"function\">(<span class=\"params\">acct, perms</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// spread å±•å¼€ä¸¤ä¸ªè¿”å›çš„ç»“æœ</span></span><br><span class=\"line\">    <span class=\"comment\">// ä¸¤ä¸ªè¯·æ±‚ç°å·²å®Œæˆ</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<h3 id=\"å…¨å±€å°è£…ã€å¼‚å¸¸å¤„ç†\"><a href=\"#å…¨å±€å°è£…ã€å¼‚å¸¸å¤„ç†\" class=\"headerlink\" title=\"å…¨å±€å°è£…ã€å¼‚å¸¸å¤„ç†\"></a>å…¨å±€å°è£…ã€å¼‚å¸¸å¤„ç†</h3><p>åœ¨é¡¹ç›®ä¸­ï¼Œå¦‚æœæ¯æ¬¡è¯·æ±‚éƒ½å†™ä¸€å † <code>config</code> ä¼šå­˜åœ¨å¤§é‡é‡å¤ä»£ç ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šå°è£…æˆä¸€ä¸ªæ–¹æ³•ï¼ŒæŠŠä¸€äº›å¿…è¦çš„å‚æ•°é…ç½®å¥½ï¼ŒåŒç†ï¼Œå…¨å±€çš„å¼‚å¸¸è¿˜æœ‰é‰´æƒç­‰éƒ½ç»Ÿä¸€é…ç½®ã€‚å•æ¬¡è¯·æ±‚æ•°æ®åªåšå’Œæ•°æ®ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘ã€‚ä¸‹é¢æ¥çœ‹ä¸€ä¸‹ Axios çš„å…¨å±€å°è£…ä¾‹å­ã€‚</p>\n<h4 id=\"å°è£…\"><a href=\"#å°è£…\" class=\"headerlink\" title=\"å°è£…\"></a>å°è£…</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> qs <span class=\"keyword\">from</span> <span class=\"string\">'qs'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// POST æ–¹æ³•å°è£…  (åŸç”Ÿ form æäº¤)</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> postRequest = <span class=\"function\">(<span class=\"params\">url, params</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios(&#123;</span><br><span class=\"line\">    method: <span class=\"string\">'post'</span>,</span><br><span class=\"line\">    url: url,</span><br><span class=\"line\">    data: params,</span><br><span class=\"line\">    transformRequest: [</span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> qs.stringify(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/x-www-form-urlencoded'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// POST æ–¹æ³•å°è£…  (æ–‡ä»¶ä¸Šä¼ )</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> uploadFileRequest = <span class=\"function\">(<span class=\"params\">url, params</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios(&#123;</span><br><span class=\"line\">    method: <span class=\"string\">'post'</span>,</span><br><span class=\"line\">    url: url,</span><br><span class=\"line\">    data: params,</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'multipart/form-data'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// GET æ–¹æ³•å°è£…</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getRequest = <span class=\"function\"><span class=\"params\">url</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios(&#123;</span><br><span class=\"line\">    method: <span class=\"string\">'get'</span>,</span><br><span class=\"line\">    url: url</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// PUT æ–¹æ³•å°è£…</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> putRequest = <span class=\"function\">(<span class=\"params\">url, params</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios(&#123;</span><br><span class=\"line\">    method: <span class=\"string\">'put'</span>,</span><br><span class=\"line\">    url: url,</span><br><span class=\"line\">    data: params,</span><br><span class=\"line\">    transformRequest: [</span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> qs.stringify(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/x-www-form-urlencoded'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// DELETE æ–¹æ³•å°è£…</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> deleteRequest = <span class=\"function\"><span class=\"params\">url</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios(&#123;</span><br><span class=\"line\">    method: <span class=\"string\">'delete'</span>,</span><br><span class=\"line\">    url: url</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"å¼‚å¸¸å¤„ç†\"><a href=\"#å¼‚å¸¸å¤„ç†\" class=\"headerlink\" title=\"å¼‚å¸¸å¤„ç†\"></a>å¼‚å¸¸å¤„ç†</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Message &#125; <span class=\"keyword\">from</span> <span class=\"string\">'element-ui'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  è¯·æ±‚æ‹¦æˆª</span></span><br><span class=\"line\">axios.interceptors.request.use(</span><br><span class=\"line\">  config =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// è¯·æ±‚å‰é…ç½® config</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> config;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  err =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// é”™è¯¯å¤„ç†</span></span><br><span class=\"line\">    Message.error(&#123; <span class=\"attr\">message</span>: <span class=\"string\">'è¯·æ±‚è¶…æ—¶!'</span> &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(err);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å“åº”æ‹¦æˆª</span></span><br><span class=\"line\">axios.interceptors.response.use(</span><br><span class=\"line\">  data =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// è¯·æ±‚åå¤„ç†å¯¹åº”çš„æ•°æ®</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// æ–¹å¼ä¸€ï¼šå’Œåç«¯çº¦å®šå“åº”ç  `code`</span></span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (data.code) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'0'</span>:</span><br><span class=\"line\">        <span class=\"comment\">// æ­£å¸¸ç›´æ¥è¿”å›</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">      <span class=\"comment\">// éœ€è¦é‡æ–°ç™»å½•</span></span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'-1'</span>:</span><br><span class=\"line\">        <span class=\"comment\">// some code here..</span></span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      <span class=\"keyword\">default</span>:</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// æ–¹å¼äºŒï¼šä»…åˆ¤æ–­ HTTP çŠ¶æ€ç </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (data.status &amp;&amp; data.status == <span class=\"number\">200</span> &amp;&amp; data.data.status == <span class=\"string\">'error'</span>) &#123;</span><br><span class=\"line\">      Message.error(&#123; <span class=\"attr\">message</span>: data.data.msg &#125;);</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  err =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// é”™è¯¯å¤„ç†</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err &amp;&amp; err.response) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">switch</span> (err.response.status) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">400</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'è¯·æ±‚é”™è¯¯ (400)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">401</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½• (401)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">403</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'æ‹’ç»è®¿é—® (403)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">404</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'è¯·æ±‚å‡ºé”™ (404)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">408</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'è¯·æ±‚è¶…æ—¶ (408)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">500</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'æœåŠ¡å™¨é”™è¯¯ (500)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">501</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'æœåŠ¡æœªå®ç° (501)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">502</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'ç½‘ç»œé”™è¯¯ (502)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">503</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'æœåŠ¡ä¸å¯ç”¨ (503)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">504</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'ç½‘ç»œè¶…æ—¶ (504)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">505</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">'HTTP ç‰ˆæœ¬ä¸å—æ”¯æŒ (505)'</span>;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">          err.message = <span class=\"string\">`è¿æ¥å‡ºé”™ (<span class=\"subst\">$&#123;err.response.status&#125;</span>)!`</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      err.message = <span class=\"string\">'è¿æ¥æœåŠ¡å™¨å¤±è´¥!'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    Message.err(&#123; <span class=\"attr\">message</span>: err.message &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(err);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<div class=\"tip\"><br>è¯·æ±‚å‡ºé”™çš„æ—¶å€™æ‰§è¡Œçš„æ˜¯ï¼š<code>Promise.resolve(err)</code>ï¼Œè€Œä¸æ˜¯ <code>Promise.reject(err)</code>ï¼Œè¿™æ ·æ— è®ºè¯·æ±‚æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œåœ¨æˆåŠŸçš„å›è°ƒä¸­éƒ½èƒ½æ”¶åˆ°é€šçŸ¥ã€‚<br></div>\n\n<h3 id=\"å…¶å®ƒé…ç½®\"><a href=\"#å…¶å®ƒé…ç½®\" class=\"headerlink\" title=\"å…¶å®ƒé…ç½®\"></a>å…¶å®ƒé…ç½®</h3><h4 id=\"baseURL\"><a href=\"#baseURL\" class=\"headerlink\" title=\"baseURL\"></a>baseURL</h4><p>é€šè¿‡ <code>axios.defaults.baseURL</code> æ¥è®¾ç½® API çš„æ ¹åŸŸåã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (process.env.NODE_ENV == <span class=\"string\">'development'</span>) &#123;</span><br><span class=\"line\">  axios.defaults.baseURL = <span class=\"string\">'https://dev.server.com/'</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.env.NODE_ENV == <span class=\"string\">'debug'</span>) &#123;</span><br><span class=\"line\">  axios.defaults.baseURL = <span class=\"string\">'https://debug.server.com/'</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.env.NODE_ENV == <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">  axios.defaults.baseURL = <span class=\"string\">'https://pro.server.com/'</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<div class=\"tip\"><br><code>process.env</code> æ˜¯ Node.js æä¾›çš„å…¨å±€å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ npm scripts é‡Œé€šè¿‡ cross-env è¿™ä¸ªå·¥å…·ç»Ÿä¸€é…ç½®ä¸åŒçš„ç¯å¢ƒï¼Œcross-env åšäº†å„ç§ç³»ç»Ÿå¹³å°çš„å…¼å®¹å¤„ç†ã€‚ä¸€èˆ¬ç”¨è¿™ä¸ªè®¾ç½®ç¯å¢ƒå˜é‡ã€‚<br></div>\n\n<h4 id=\"è¯·æ±‚è¶…æ—¶\"><a href=\"#è¯·æ±‚è¶…æ—¶\" class=\"headerlink\" title=\"è¯·æ±‚è¶…æ—¶\"></a>è¯·æ±‚è¶…æ—¶</h4><p>é€šè¿‡ <code>axios.defaults.timeout</code> è®¾ç½®é»˜è®¤çš„è¯·æ±‚è¶…æ—¶æ—¶é—´ã€‚ä¾‹å¦‚è¶…è¿‡äº† 10sï¼Œå°±ä¼šå‘ŠçŸ¥ç”¨æˆ·å½“å‰è¯·æ±‚è¶…æ—¶ï¼Œè¯·åˆ·æ–°ç­‰ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">axios.defaults.timeout = <span class=\"number\">10000</span>;</span><br></pre></td></tr></table></figure>\n<h4 id=\"å•ç‹¬è®¾ç½®-POST-çš„è¯·æ±‚å¤´\"><a href=\"#å•ç‹¬è®¾ç½®-POST-çš„è¯·æ±‚å¤´\" class=\"headerlink\" title=\"å•ç‹¬è®¾ç½® POST çš„è¯·æ±‚å¤´\"></a>å•ç‹¬è®¾ç½® POST çš„è¯·æ±‚å¤´</h4><p>æ¯”å¦‚è®¾ç½® POST æäº¤ï¼ˆåŸç”Ÿ formï¼‰æ—¶å•ç‹¬é…ç½®ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">axios.defaults.headers.post[<span class=\"string\">'Content-Type'</span>] =</span><br><span class=\"line\">  <span class=\"string\">'application/x-www-form-urlencoded;charset=UTF-8'</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"é™„-å®Œæ•´ä»£ç \"><a href=\"#é™„-å®Œæ•´ä»£ç \" class=\"headerlink\" title=\"é™„: å®Œæ•´ä»£ç \"></a>é™„: å®Œæ•´ä»£ç </h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">'axios'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> QS <span class=\"keyword\">from</span> <span class=\"string\">'qs'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Toast &#125; <span class=\"keyword\">from</span> <span class=\"string\">'vant'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç¯å¢ƒçš„åˆ‡æ¢</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (process.env.NODE_ENV == <span class=\"string\">'development'</span>) &#123;</span><br><span class=\"line\">  axios.defaults.baseURL = <span class=\"string\">'https://dev.server.com/'</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.env.NODE_ENV == <span class=\"string\">'debug'</span>) &#123;</span><br><span class=\"line\">  axios.defaults.baseURL = <span class=\"string\">'https://debug.server.com/'</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.env.NODE_ENV == <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">  axios.defaults.baseURL = <span class=\"string\">'https://pro.server.com/'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¯·æ±‚è¶…æ—¶æ—¶é—´</span></span><br><span class=\"line\">axios.defaults.timeout = <span class=\"number\">10000</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// POST è¯·æ±‚å¤´</span></span><br><span class=\"line\">axios.defaults.headers.post[<span class=\"string\">'Content-Type'</span>] =</span><br><span class=\"line\">  <span class=\"string\">'application/x-www-form-urlencoded;charset=UTF-8'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class=\"line\">axios.interceptors.request.use(</span><br><span class=\"line\">  config = &gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> token = store.state.token;</span><br><span class=\"line\">    token &amp;&amp; (config.headers.Authorization = token);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> config;</span><br><span class=\"line\">  &#125;, error = &gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.error(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class=\"line\">axios.interceptors.response.use(</span><br><span class=\"line\">  response = &gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (response.status === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(response);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.reject(response);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// æœåŠ¡å™¨çŠ¶æ€ç ä¸æ˜¯ 200 çš„æƒ…å†µ</span></span><br><span class=\"line\">  error = &gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (error.response.status) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">switch</span> (error.response.status) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">401</span>:</span><br><span class=\"line\">          router.replace(&#123;</span><br><span class=\"line\">            path: <span class=\"string\">'/login'</span>,</span><br><span class=\"line\">            query: &#123;</span><br><span class=\"line\">              redirect: router.currentRoute.fullPath</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">403</span>:</span><br><span class=\"line\">          Toast(&#123;</span><br><span class=\"line\">            message: <span class=\"string\">'ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•'</span>,</span><br><span class=\"line\">            duration: <span class=\"number\">1000</span>,</span><br><span class=\"line\">            forbidClick: <span class=\"literal\">true</span></span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">          <span class=\"comment\">// 404 è¯·æ±‚ä¸å­˜åœ¨</span></span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">404</span>:</span><br><span class=\"line\">          Toast(&#123;</span><br><span class=\"line\">            message: <span class=\"string\">'ç½‘ç»œè¯·æ±‚ä¸å­˜åœ¨'</span>,</span><br><span class=\"line\">            duration: <span class=\"number\">1500</span>,</span><br><span class=\"line\">            forbidClick: <span class=\"literal\">true</span></span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">          <span class=\"comment\">// å…¶ä»–é”™è¯¯ï¼Œç›´æ¥æŠ›å‡ºé”™è¯¯æç¤º</span></span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">          Toast(&#123;</span><br><span class=\"line\">            message: error.response.data.message,</span><br><span class=\"line\">            duration: <span class=\"number\">1500</span>,</span><br><span class=\"line\">            forbidClick: <span class=\"literal\">true</span></span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.reject(error.response);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// GET è¯·æ±‚</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">get</span>(<span class=\"params\">url, params</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    axios</span><br><span class=\"line\">      .get(url, &#123; <span class=\"attr\">params</span>: params &#125;)</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">        resolve(res.data);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch (<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">        reject(err.data)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// POST è¯·æ±‚</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">post</span>(<span class=\"params\">url, params</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    axios</span><br><span class=\"line\">      .post(url, QS.stringify(params))</span><br><span class=\"line\">      .then(res = &gt; &#123;</span><br><span class=\"line\">        resolve(res.data);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch (<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">        reject(err.data)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"é™„-Content-Type\"><a href=\"#é™„-Content-Type\" class=\"headerlink\" title=\"é™„: Content-Type\"></a>é™„: Content-Type</h3><p>è¯´åˆ°å’ŒæœåŠ¡ç«¯æ•°æ®äº¤äº’ï¼Œæ€»æ˜¯ç»•ä¸å¼€è¿™ä¸ªï¼Œå¿…é¡»è¦æ‰«ç›²ä¸€ä¸‹äº†ï¼ğŸ˜‚ğŸ˜‚</p>\n<blockquote>\n<p>Content-Type ç”¨äºæŒ‡å®šå†…å®¹ç±»å‹ï¼Œä¸€èˆ¬æ˜¯æŒ‡ç½‘é¡µä¸­å­˜åœ¨çš„ Content-Typeï¼ŒContent-Type å±æ€§æŒ‡å®šè¯·æ±‚å’Œå“åº”çš„ HTTP å†…å®¹ç±»å‹ã€‚å¦‚æœæœªæŒ‡å®š ContentTypeï¼Œé»˜è®¤ä¸º <code>text/html</code>ã€‚</p>\n</blockquote>\n<p>å¸¸è§ç±»å‹æœ‰ï¼š</p>\n<ul>\n<li>text/html</li>\n<li>application/x-www-form-urlencoded</li>\n<li>multipart/form-data</li>\n<li>application/json</li>\n<li>application/xml</li>\n</ul>\n<p><code>application/x-www-form-urlencoded</code>ã€<code>multipart/form-data</code>ã€<code>application/json</code>ã€<code>application/xml</code> è¿™å››ä¸ªåˆ™æ˜¯ ajax è¯·æ±‚éœ€è¦æŒ‡å®šçš„ç±»å‹ï¼Œè¡¨å•æäº¤æˆ–ä¸Šä¼ æ–‡ä»¶å¸¸ç”¨çš„èµ„æºç±»å‹ã€‚</p>\n<h4 id=\"application-x-www-form-urlencoded\"><a href=\"#application-x-www-form-urlencoded\" class=\"headerlink\" title=\"application/x-www-form-urlencoded\"></a>application/x-www-form-urlencoded</h4><p>è¿™æ˜¯è¡¨å•é»˜è®¤æäº¤æ–¹å¼ï¼Œæ ¼å¼ä¸º URL ç¼–ç  <code>key=value&amp;key1=value1</code>ã€‚</p>\n<div style=\"max-width: 500px\"><img src=\"https://user-images.githubusercontent.com/9158841/32037816-ade83a36-b9ec-11e7-9f07-4f72a99c6aaa.png\" alt=\"image\"></div>\n\n<p>æ³¨ï¼šChrome æµè§ˆå™¨ä¼šè‡ªåŠ¨æ ¼å¼åŒ–æˆæ˜“è¯»çš„æ ¼å¼</p>\n<h4 id=\"multipart-form-data\"><a href=\"#multipart-form-data\" class=\"headerlink\" title=\"multipart/form-data\"></a>multipart/form-data</h4><p>ä½¿ç”¨è¡¨å•ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œå¿…é¡»æŒ‡å®šè¡¨å•çš„ enctype å±æ€§å€¼ä¸º <code>multipart/form-data</code>ã€‚<br>è¯·æ±‚ä½“è¢«åˆ†å‰²æˆå¤šéƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†ä½¿ç”¨ <code>--boundary</code> åˆ†å‰²ï¼Œä½¿ç”¨ <code>--boundary--\\r\\n</code> ç»“æŸã€‚</p>\n<p>è¡¨å•ä¸Šä¼ æ–‡ä»¶ Demo:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">\"/upload\"</span> <span class=\"attr\">enctype</span>=<span class=\"string\">\"multipart/form-data\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"post\"</span>&gt;</span></span><br><span class=\"line\">    ç”¨æˆ·å: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span>&gt;</span></span><br><span class=\"line\">    å¯†ç : <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span>&gt;</span></span><br><span class=\"line\">    ä¸Šä¼ æ–‡ä»¶: <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"file\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"file\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"submit\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"æäº¤\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<div style=\"max-width: 500px\"><img src=\"https://user-images.githubusercontent.com/9158841/32038354-1201f94c-b9ef-11e7-8817-fb9031b2b036.png\" alt=\"image\"></div>\n\n<h4 id=\"application-json\"><a href=\"#application-json\" class=\"headerlink\" title=\"application/json\"></a>application/json</h4><p>Axios é»˜è®¤ <code>POST</code> æäº¤æ–¹å¼å°±æ˜¯ <code>application/json</code>ï¼Œæ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨ axios æäº¤è¡¨å•æ—¶éœ€è¦æ³¨æ„åç«¯èƒ½ä¸èƒ½è§£æï¼Œä¸èƒ½è§£æéœ€è¦è®¾ç½® <code>POST</code> å¸¸ç”¨æ ¼å¼ <code>application/x-www-form-urlencoded</code>ï¼Œä¸”æäº¤çš„æ•°æ®éœ€è¦ä½¿ç”¨ qs æ¨¡å—åºåˆ—åŒ–æ ¼å¼ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">axios.post(</span><br><span class=\"line\">  <span class=\"string\">'https://jsonplaceholder.typicode.com/posts'</span>,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    userId: <span class=\"number\">1</span>,</span><br><span class=\"line\">    name: <span class=\"string\">'ifyour'</span>,</span><br><span class=\"line\">    arr: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/x-www-form-urlencoded'</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    transformRequest: [</span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> qs.stringify(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<div style=\"max-width: 400px\"><img src=\"https://user-images.githubusercontent.com/15377484/45913317-a939a580-be62-11e8-9d96-1a097337da44.png\" alt=\"image\"></div>\n\n<h4 id=\"application-xml\"><a href=\"#application-xml\" class=\"headerlink\" title=\"application/xml\"></a>application/xml</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">POST http://www.example.com HTTP/1.1</span><br><span class=\"line\">Content-Type: text/xml</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\"?&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resource</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>123<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">params</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>example<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">age</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>21<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">age</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">params</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resource</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h3><ul>\n<li><a href=\"https://github.com/axios/axios#installing\" target=\"_blank\" rel=\"noopener\">Axios å®˜æ–¹æ–‡æ¡£ @GitHub</a></li>\n<li><a href=\"http://tool.oschina.net/commons\" target=\"_blank\" rel=\"noopener\">HTTP Content-Type å¯¹ç…§è¡¨ @OSChina</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods\" target=\"_blank\" rel=\"noopener\">HTTP è¯·æ±‚æ–¹æ³• @MDN</a></li>\n</ul>"},{"title":"ES6 Promise ç®€æ˜æŒ‡å—","comments":1,"date":"2018-05-29T14:28:41.000Z","from":"https://codeburst.io/a-simple-guide-to-es6-promises-d71bacd2e13a","_content":"\nPromise æ˜¯ JavaScriptES6 ä¸­æœ€ä»¤äººå…´å¥‹çš„æ–°å¢åŠŸèƒ½ä¹‹ä¸€. ES5 ä¸­ä½¿ç”¨å›è°ƒå‡½æ•°æ¥å¤„ç†å¼‚æ­¥æ“ä½œ. è¿‡åº¦ä½¿ç”¨å›è°ƒåˆ™ä¼šäº§ç”Ÿå›è°ƒåœ°ç‹±å’Œå¤šçº§åµŒå¥—ç¼©å¸¦æ¥çš„é—®é¢˜. Promise é€šè¿‡å°†å¼‚æ­¥ä»£ç è½¬åŒ–æˆåŒæ­¥æ‰§è¡Œçš„æ–¹å¼, å¤§å¤§ç®€åŒ–äº†å¼‚æ­¥ç¼–ç¨‹æ–¹å¼.\n\n<!-- more -->\n\nè¿™ç¯‡æ–‡ç« ä¸­, æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹ä»€ä¹ˆæ˜¯ Promise ä»¥åŠåœ¨å¼€å‘ä¸­çš„å®è·µ.\n\n### ä»€ä¹ˆæ˜¯ Promise\n\nç®€å•æ¥è¯´ Promise å°±æ˜¯ä¸€ä¸ªå­˜æ”¾ç€æœªæ¥æ‰ä¼šæœ‰è®¡ç®—ç»“æœçš„å ä½ç¬¦. ç¨å¾®æƒ³æƒ³, ä½ ä¼šå‘ç°, è¿™å’Œæˆ‘ä»¬å¹³å¸¸åœ¨è°ˆè¯è¿‡ç¨‹ä¸­è¯´çš„æ‰¿è¯ºå¾ˆåƒ. ä¸¾ä¸ªä¾‹å­: ä½ å‡†å¤‡å»å°åº¦æ—…è¡Œ, ä½ è®¢äº†ä¸€å¼ å»å°åº¦çš„æœºç¥¨. è¿™ä¸ªæœºç¥¨ä¸Šå†™ç€å¤šå°‘å·, åº§ä½å·æ˜¯å¤šå°‘. è¿™ä¸ªåœºæ™¯ä¸‹, æœºç¥¨å°±æ˜¯èˆªç©ºå…¬å¸ç»™ä½ è®¸ä¸‹çš„æ‰¿è¯º: åœ¨ä½ å‡†å¤‡å‡ºå‘é‚£å¤©ç»™ä½ é¢„ç•™äº†ä¸€ä¸ªå¤´ç­‰èˆ±ï¼ğŸ˜\n\nè¿˜æœ‰ä¸€ä¸ªç®€å•çš„ä¾‹å­, ä½ æ‰¿è¯ºä½ çš„æœ‹å‹, å½“ä½ è¯»å®Œã€Šè®¡ç®—æœºç¼–ç¨‹è‰ºæœ¯ã€‹è¿™æœ¬ä¹¦å, ä½ å°±æŠŠè¿™æœ¬ä¹¦è¿˜å›å». åœ¨è¿™é‡Œ, ä½ æ‰€è¯´çš„è¯å°±å¥½æ¯”æ˜¯ä¸€ä¸ªå ä½ç¬¦, éœ€è¦è¿”å›çš„å€¼å°±æ˜¯è¿™æœ¬ä¹¦.\n\nä½ è¿˜å¯ä»¥æƒ³åˆ°å…¶ä»–ä¸€äº›ç±»ä¼¼æ‰¿è¯ºçš„ä¾‹å­, æ¯”å¦‚åœ¨åŒ»ç”ŸåŠå…¬å®¤ç­‰ç€ã€åœ¨é¤é¦†ç‚¹é¤ã€åœ¨å›¾ä¹¦é¦†å†™ä¹¦ç­‰ç­‰. éƒ½æ¶‰åŠæŸç§å½¢å¼çš„æ‰¿è¯º.\n\n### ç”Ÿæˆä¸€ä¸ª Promise\n\nå½“æŸé¡¹ä»»åŠ¡çš„å®Œæˆæ—¶é—´ä¸ç¡®å®šæˆ–å¤ªé•¿æ—¶, å°±å¯ä»¥ä½¿ç”¨ Promise. ä¾‹å¦‚, ç½‘ç»œè¯·æ±‚å¯èƒ½éœ€è¦ 10ms åˆ° 200msï¼ˆæˆ–æ›´é•¿ï¼‰çš„æ—¶é—´, å…·ä½“å–å†³äºç½‘é€Ÿ. æˆ‘ä»¬ä¸æƒ³åœ¨è·å–æ•°æ®æ—¶ç­‰å¾…. 200 æ¯«ç§’å¯¹ä½ æ¥è¯´å¯èƒ½ä¸å¤ªé‡è¦, ä½†å¯¹äºä¸€å°ç”µè„‘æ¥è¯´, è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ—¶é—´. Promise å°±æ˜¯è¦è®©è¿™ç§å¼‚æ­¥å˜å¾—ç®€å•ã€è½»æ¾. ä½¿ç”¨ Promise æ„é€ å‡½æ•°, æ¥å®ä¾‹åŒ–ä¸€ä¸ª myPromise å®ä¾‹, åƒè¿™æ ·:\n\n```js\nconst myPromise = new Promise((resolve, reject) => {\n  if (Math.random() * 100 <= 90) {\n    resolve('Hello, Promises!');\n  }\n  reject(new Error('In 10% of the cases, I fail. Miserably.'));\n});\n```\n\næ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ¥æ”¶ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°. `new Promise()` è¢«ç§°ä¸ºæ‰§è¡Œå™¨å‡½æ•°, å®ƒæè¿°äº†è¦å®Œæˆçš„è®¡ç®—. å®ƒçš„è¿™ä¸¤ä¸ªå‚æ•°é€šå¸¸è¢«å«åš `resolve` å’Œ `reject`, å¯ä»¥ç†è§£ä¸º **æ‰§è¡Œ** å’Œ **æ‹’ç»**, å®ƒä»¬ç”¨æ¥æ ‡è®°æ‰§è¡Œå™¨å‡½æ•°æœ€ç»ˆçš„è®¡ç®—ç»“æœ. `resolve` å’Œ `reject` æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°, å®ƒç”¨æ¥è¿”å›ä¸€ä¸ªå€¼ç»™æˆ‘ä»¬çš„ Promise å®ä¾‹.\n\nå½“è¿ç®—ç»“æœæˆåŠŸæ—¶, æˆ–è€…æœªæ¥ç€è¿™ä¸ªå€¼å‡†å¤‡å°±ç»ªæ—¶, æˆ‘ä»¬å°±ä½¿ç”¨è¿™ä¸ª `resolve` å‡½æ•°æ¥è¿”å›ä¸€ä¸ªå€¼, æˆ‘ä»¬å°±è¯´: æˆ‘è·µè¡Œäº†å½“åˆè®¸ä¸‹çš„è¿™ä¸ªæ‰¿è¯º.\n\nåŒç†, å½“è®¡ç®—ç»“æœå¤±è´¥æ—¶, æˆ–è€…è®¡ç®—è¿‡ç¨‹ä¸­é‡åˆ°äº†é”™è¯¯, æˆ‘ä»¬å°±ä½¿ç”¨ `reject` å‡½æ•°, æˆ‘ä»¬å°±è¯´: æˆ‘æ‹’ç»å±¥è¡Œè¿™ä¸ªæ‰¿è¯º. `reject` å‡½æ•°å¯ä»¥æ¥æ”¶ä»»ä½•å€¼æ¥ä½œä¸ºå‚æ•°, ä½†æ˜¯æ¯”è¾ƒæ¨èçš„æ˜¯æˆ‘ä»¬å¯ä»¥ä¼ é€’ä¸€ä¸ª `Error` å¯¹è±¡, å³: æŠ›å‡ºä¸€ä¸ªé”™è¯¯, ç”¨æ¥å¸®åŠ©æˆ‘ä»¬è°ƒè¯•ä»£ç , è¿™æ ·å°±å¯ä»¥æ ¹æ®å…·ä½“çš„æŠ›å‡ºé”™è¯¯ä¿¡æ¯å»è§£å†³é—®é¢˜å•¦.\n\nåœ¨ä¸Šé¢çš„è¿™ä¸ªä¾‹å­ä¸­, `Math.random()` ç”¨æ¥ç”Ÿæˆä¸€ä¸ªéšæœºæ•°, åœ¨ 90% çš„æƒ…å†µä¸‹, è¿™ä¸ª Promise éƒ½åº”è¯¥è¢«æ‰§è¡Œ (å‡è®¾ç­‰æ¦‚ç‡åˆ†å¸ƒ), å‰©ä½™çš„æƒ…å†µä¸‹éƒ½æ˜¯æ‹’ç»æ‰§è¡Œçš„.\n\n### å¦‚ä½•ä½¿ç”¨ Promises\n\nåœ¨ä¸Šé¢çš„ä»£ç ä¾‹å­ä¸­, æˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ª Promise å®ä¾‹ `myPromise`, é‚£ä¹ˆå¦‚ä½•é€šè¿‡ `resolve` å’Œ `reject` å‡½æ•°è®¿é—®è®¡ç®—å®Œæˆåçš„å€¼å‘¢? æ‰€æœ‰çš„ `Promise` å®ä¾‹éƒ½æœ‰ä¸€ä¸ª `.then()` æ–¹æ³•, æˆ‘ä»¬æ¥ç§ç§:\n\n```js\nconst myPromise = new Promise((resolve, reject) => {\n  if (Math.random() * 100 < 90) {\n    console.log('resolving the promise ...');\n    resolve('Hello, Promises!');\n  }\n  reject(new Error('In 10% of the cases, I fail. Miserably.'));\n});\n\n// Two functions\nconst onResolved = resolvedValue => console.log(resolvedValue);\nconst onRejected = error => console.log(error);\n\nmyPromise.then(onResolved, onRejected);\n\n// Same as above, written concisely\nmyPromise.then(\n  resolvedValue => {\n    console.log(resolvedValue);\n  },\n  error => {\n    console.log(error);\n  }\n);\n\n// Output (in 90% of the cases)\n\n// resolving the promise ...\n// Hello, Promises!\n// Hello, Promises!\n```\n\n`.then()` æ–¹æ³•æ¥æ”¶ 2 ä¸ªå›è°ƒå‡½æ•°, ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°æ˜¯å½“æˆ‘ä»¬çš„ Promise å®ä¾‹è¢«æ‰§è¡Œ (resolve) æ—¶è°ƒç”¨, ç¬¬äºŒä¸ªåˆ™æ˜¯è¢«æ‹’ç» (reject) æ—¶è°ƒç”¨. åœ¨ä¸Šé¢çš„ä»£ç ä¸­, æˆ‘ä»¬ä½¿ç”¨ `onResolved` å’Œ `onRejected` å®šä¹‰äº†è¿™ä¸¤ä¸ªå‡½æ•°, ç„¶åæŠŠå®ƒæ”¾åˆ° `.then` å‡½æ•°é‡Œ, å½“ç„¶, ä½ ä¹Ÿå¯ä»¥æŒ‰ç…§å¸¸è§„å†™æ³•, ç›´æ¥åœ¨ `.then` å‡½æ•°é‡Œå†™ä¸¤ä¸ªå‡½æ•°, éƒ½æ˜¯ä¸€æ ·çš„.\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­, æœ‰å‡ ç‚¹éå¸¸é‡è¦, æˆ‘ä»¬æ¥è¯´ä¸€ä¸‹:\n\n* ä¸€ä¸ª `promise` åªèƒ½æ˜¯æˆåŠŸæˆ–è€…å¤±è´¥çŠ¶æ€ä¸­çš„ä¸€ä¸ª. å®ƒä¸èƒ½æˆåŠŸæˆ–è€…å¤±è´¥å¤šæ¬¡. ä¹Ÿä¸èƒ½ä»æˆåŠŸçŠ¶æ€åˆ‡æ¢åˆ°å¤±è´¥çŠ¶æ€, å¤±è´¥åä¹‹äº¦ç„¶.\n* ä½ å¯ä»¥åœ¨æˆåŠŸæˆ–è€…å¤±è´¥çŠ¶æ€å, å»å®šä¹‰è¿™æ ·ä¸€ä¸ªå›è°ƒå‡½æ•°. å½“ä»–ä»¬ `resolve` æˆ–è€… `reject` ä»ç„¶èƒ½æ­£ç¡®è°ƒç”¨.\n\nè¿™å°±è¯´æ˜, `Promise` æœ€ç»ˆåªæœ‰ä¸€ä¸ªçŠ¶æ€, å³ä½¿ä½ å¤šæ¬¡ä½¿ç”¨ `.then` å¤„ç†å‡½æ•°, è¿™ä¸ªçŠ¶æ€ä¸èƒ½æ›´æ”¹ (è®¡ç®—ç»“æœä¹Ÿä¸ä¼šé‡å¤æ‰§è¡Œ).\n\nä¸ºäº†éªŒè¯è¿™ç‚¹, ä½ å¯ä»¥çœ‹åˆ°åœ¨ç¬¬ 3 è¡Œä»£ç ä¸­, `console.log` è¯­å¥, å½“ä½ å¤šæ¬¡ä½¿ç”¨ `.then` å¤„ç†ç¨‹åºè¿è¡Œä¸Šè¿°ä»£ç æ—¶, `console.log` çš„è¯­å¥åªä¼šè¢«æ‰“å°ä¸€æ¬¡. è¿™å°±è¯´æ˜äº† Promise ä¼šç¼“å­˜è®¡ç®—ç»“æœçš„, å½“æœ‰ä¸€äº›ç›¸åŒçš„ç»“æœæ—¶, ç¼“å­˜ç»“æœä¼šè¢«è¿”å›.\n\nå¦ä¸€ä¸ªé‡è¦çš„è¦æ³¨æ„çš„æ˜¯, Promise æ˜¯ [åŠæ—©æ±‚å€¼ (evaluated eagerly)](https://zh.wikipedia.org/wiki/%E5%8F%8A%E6%97%A9%E6%B1%82%E5%80%BC) çš„: åªè¦å£°æ˜å¹¶å°†å…¶èµ‹å€¼åˆ°å˜é‡ä¸Š, å®ƒå·²ç»å¼€å§‹åœ¨å†…å­˜ä¸­æ‰§è¡Œäº†. æ²¡æœ‰ `.start` æˆ– `.begin` æ–¹æ³•. å°±åƒå®ƒåœ¨å‰é¢çš„ä¾‹å­ä¸­å¼€å§‹çš„é‚£æ ·.\n\nä¸ºäº†ç¡®ä¿ Promise èƒ½è¢«å»¶è¿Ÿè°ƒç”¨, æˆ‘ä»¬é€šå¸¸è¿˜éœ€è¦åœ¨å®ƒçš„å¤–å±‚åŒ…è£¹ä¸€ä¸ªå‡½æ•°, ç¨åçš„ä¾‹å­ä¸­æˆ‘ä»¬ä¼šè§£é‡Šè¿™ä¸ª.\n\n### æ•è· Promise\n\nåˆ°ç›®å‰ä¸ºæ­¢, æˆ‘ä»¬å·²ç»çœ‹åˆ°äº† `resolve` çš„åœºæ™¯, é‚£ä¹ˆå½“æ‰§è¡Œå‡½æ•°ä¸­å‡ºç°ä¸€ä¸ªé”™è¯¯æ—¶, ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢? åœ¨ `.then()` å‡½æ•°ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°, å°±æ˜¯ä¸Šé¢ä¾‹å­ä¸­çš„ `onRejected` ä¼šè¢«æ‰§è¡Œ, æ¥çœ‹ä¸€ä¸ªä¾‹å­:\n\n```js\nconst myPromise = new Promise((resolve, reject) => {\n  if (Math.random() * 100 < 90) {\n    reject(new Error('The promise was rejected by using reject function.'));\n  }\n  throw new Error('The promise was rejected by throwing an error');\n});\n\nmyPromise.then(\n  () => console.log('resolved'),\n  error => console.log(error.message)\n);\n\n// Output (in 90% of cases)\n\n// The promise was rejected by using reject function.\n```\n\nå’Œç¬¬ä¸€ä¸ªä¾‹å­ä¸€æ ·çš„, ä½†æ˜¯ç°åœ¨ 90% çš„æƒ…å†µæ˜¯è¢« `reject` çš„, å¦å¤– 10% çš„æƒ…å†µåˆ™æ˜¯æŠ›å‡ºä¸€ä¸ªé”™è¯¯è¯­å¥.\n\nåœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬åˆ†åˆ«å®šä¹‰äº† `onResolved` å’Œ `onRejected` æ–¹æ³•, `onRejected` æ–¹æ³•å°†åœ¨é”™è¯¯å‘ç”Ÿæ—¶è¢«è°ƒç”¨, å¯ä»¥çœ‹åˆ° `reject` å‡½æ•°çš„å‚æ•°å¯ä»¥ç›´æ¥æ˜¯é”™è¯¯æç¤º, æ²¡å¿…è¦å¿…é¡» `new Error`, ä¸¤ä¸ªå†™æ³•éƒ½ä¸€æ ·.\n\nå¥å£®çš„ç¨‹åºä»£ç ç¦»ä¸å¼€é”™è¯¯å¤„ç†, `.then` æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ç»™äº†æˆ‘ä»¬è¿™æ ·ä¸€ä¸ªæ·å¾„. å½“éœ€è¦å¤„ç†ä¸€ä¸ªé”™è¯¯æ—¶, å¯ä»¥ç”¨ `.catch(onRejected)` æ¥ä»£æ›¿ `.then(null, () => {...})`, `catch` æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•° `onRejected`, å› æ­¤, ä¸Šé¢çš„ä»£ç , å¯ä»¥ä½¿ç”¨ `catch` æ¥ç®€åŒ–å†™æ³•:\n\n```js\nmyPromise.catch(error => console.log(error.message));\n```\n\nè®°ä½: `.catch` æ–¹æ³•ä»…ä»…æ˜¯ `.then(undefined, onRejected)` çš„è¯­æ³•ç³–è€Œå·².\n\n### é“¾å¼ Promise\n\n`.then()` å’Œ `.catch()` æ–¹æ³•æ°¸è¿œä¼šè¿”å›ä¸€ä¸ª Promise å®ä¾‹, æ‰€ä»¥ä½ å¯ä»¥é“¾å¼ä½¿ç”¨å¤šä¸ª `.then` ä¸€èµ·æ¥è°ƒç”¨. è®©æˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­ç†è§£å®ƒ.\n\né¦–å…ˆ, æˆ‘ä»¬å†™ä¸€ä¸ªå‡½æ•°, æ¥å»¶è¿Ÿè¿”å›ä¸€ä¸ª Promise å®ä¾‹. è¿™ä¸ªè¿”å›çš„ Promise å°†åœ¨ç¨åçš„æ—¶é—´å†… `resolve`. è¿™é‡Œæ˜¯å®ç°æ–¹æ³•:\n\n```js\nconst delay = ms => new Promise(resolve => setTimeout(resolve, ms));\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªå‡½æ•°æ¥åŒ…è£¹æˆ‘ä»¬çš„ Promise å®ä¾‹, æ‰€ä»¥å®ƒå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œ. è¿™ä¸ª `delay` å‡½æ•°æ¥æ”¶ä¸€ä¸ªæ—¶é—´æ¥ä½œä¸ºå‚æ•°. è¿™ä¸ªæ‰§è¡Œå‡½æ•°å°†æ¥æ”¶ `ms` ä½œä¸ºä»–çš„å‚æ•°, å®ƒè¿˜åŒ…å«ä¸€ä¸ª `setTimeout` , å®ƒåœ¨ `ms` æ¯«ç§’åè°ƒç”¨ `resolve` å‡½æ•°, ä»è€Œæ­£ç¡®æ‰§è¡Œ. çœ‹è¿™ä¸ªä¾‹å­:\n\n```js\ndelay(5000).then(() => console.log('Resolved after 5 seconds'));\n```\n\n`.then` ä¸­çš„å›è°ƒè¯­å¥å°†åœ¨ `delay(5000)` åæ‰§è¡Œ. å½“ä½ æ‰§è¡Œä¸Šé¢çš„ä»£ç  5 ç§’å, ä½ å°±å¯ä»¥åœ¨æ§åˆ¶å°ä¸Šçœ‹åˆ°è¾“å‡ºç»“æœäº†.\n\nè¿™é‡Œ, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šä¸ª `.then()` æ–¹æ³•æ¥é“¾å¼è°ƒç”¨:\n\n```js\nconst delay = ms => new Promise(resolve => setTimeout(resolve, ms));\n\ndelay(2000)\n  .then(() => {\n    console.log('Resolved after 2 seconds');\n    return delay(1500);\n  })\n  .then(() => {\n    console.log('Resolved after 1.5 seconds');\n    return delay(3000);\n  })\n  .then(() => {\n    console.log('Resolved after 3 seconds');\n    throw new Error();\n  })\n  .catch(() => {\n    console.log('Caught an error.');\n  })\n  .then(() => {\n    console.log('Done.');\n  });\n\n// Resolved after 2 seconds\n// Resolved after 1.5 seconds\n// Resolved after 3 seconds\n// Caught an error.\n// Done.\n```\n\nä»ç¬¬ 3 è¡Œå¼€å§‹, å®ƒçš„æ‰§è¡Œæ­¥éª¤æ˜¯è¿™æ ·çš„:\n\n* `delay(2000)` å‡½æ•°æ‰§è¡Œ, å®ƒè¿”å›ä¸€ä¸ªç¨å 2 ç§’å³å°†æ‰§è¡Œçš„ Promise å®ä¾‹.\n* ç¬¬ 1 ä¸ª `.then()` æ‰§è¡Œ, å®ƒè¾“å‡ºè¯­å¥ `Resolved after 2 seconds`, ç„¶åå®ƒæ‰§è¡Œ `delay(1500)` åˆè¿”å›ä¸€ä¸ª Promise å®ä¾‹, å¦‚æœä¸€ä¸ª `.then()` è¿”å›äº†ä¸€ä¸ª Promise å®ä¾‹, é‚£ä¹ˆå®ƒçš„ `resolve` å°†è¢«è½¬å‘ç»™ä¸‹ä¸€ä¸ª `.then` æ–¹æ³•è°ƒç”¨, æŠ€æœ¯ä¸Šå«: æ²‰é™ (settlement).\n* åªè¦åƒè¿™æ ·ç»§ç»­ä¸²è”ä¸‹å», å®ƒä¼šç»§ç»­æ‰§è¡Œ.\n\næ³¨æ„åœ¨ç¬¬ä¸‰ä¸ª `.then()` æ–¹æ³•æ—¶, æˆ‘ä»¬åœ¨ `.then` ä¸­æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯. è¿™æ„å‘³ç€å½“å‰çš„ Promise è¢«æ‹’ç». ç„¶åå®ƒä¼šåœ¨ä¸‹ä¸€ä¸ª `.catch` è¯­å¥ä¸­è¢«æ•è·, `Caught an error` å°†ä¼šè¢«è¾“å‡º. ç„¶è€Œä¸€ä¸ª `.catch` è¯­å¥å®ƒè‡ªå·±æ°¸è¿œæ˜¯è¢« `resolve` çš„, æ‰€ä»¥ä¸éœ€è¦åœ¨è¯­å¥é‡Œå†å†™ `reject` (é™¤éä½ æ•…æ„æŠ›å‡ºä¸€ä¸ªé”™è¯¯), è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨ `.catch` è¯­å¥åè¿˜å¯ä»¥ç»§ç»­å†™ `.then` çš„åŸå› .\n\næ¯”è¾ƒæ¨èçš„åšæ³•æ˜¯åœ¨ `.then` æ–¹æ³•åæ‰§è¡Œ `.catch` è€Œä¸æ˜¯ä½¿ç”¨ `onResolved` å’Œ `onRejected`, æˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­è¯´æ˜ä¸€ä¸‹:\n\n```js\nconst promiseThatResolves = () =>\n  new Promise((resolve, reject) => {\n    resolve();\n  });\n\n// Leads to UnhandledPromiseRejection\npromiseThatResolves().then(\n  () => {\n    throw new Error();\n  },\n  err => console.log(err)\n);\n\n// Proper error handling\npromiseThatResolves()\n  .then(() => {\n    throw new Error();\n  })\n  .catch(err => console.log(err));\n```\n\næˆ‘ä»¬åˆ›é€ ä¸€ä¸ªæ°¸è¿œèƒ½è¢« `resolve` çš„ Promise å®ä¾‹, å½“ä½ æ‰§è¡Œ `.then` æ—¶, å¯ä»¥å¸¦ä¸¤ä¸ªå›è°ƒå‡½æ•°: `onResolved` å’Œ `onRejected`, ç¬¬ä¸€ç§å†™æ³•, åœ¨ `then` ç§æ”¾å…¥ä¸¤ä¸ªå›è°ƒå‡½æ•°, ä½†æ˜¯: å¦‚æœåœ¨ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸­ç»§ç»­æŠ›å‡ºé”™è¯¯, é‚£ä¹ˆè¿™ä¸ªé”™è¯¯æ˜¯ä¸èƒ½è¢«æ•è·çš„. ğŸ˜…\n\nç¬¬äºŒç§å†™æ³•, åœ¨ `.then` è¯­å¥çš„åé¢ä½¿ç”¨ `.catch` æ•è·, ä¸å…‰èƒ½æ•è·åˆ°æ‰§è¡Œå‡½æ•° `promiseThatResolves` çš„é”™è¯¯, è€Œä¸”åœ¨ `.then()` ä¸­çš„é”™è¯¯ä¹Ÿæ˜¯èƒ½è¢«æ•è·åˆ°. çŸ¥é“è¿™æ ·å†™çš„å¥½å¤„äº†å§!ğŸ˜\n\n### æ€»ç»“\n\nä½ å¯ä»¥æ‰§è¡Œä¸Šé¢çš„æ‰€æœ‰ä»£ç ç‰‡æ®µæ¥æ›´æ·±å…¥çš„å­¦ä¹ . ä¸€ç§æ¯”è¾ƒå¥½çš„å®è·µå°±æ˜¯, æŠŠæ‰€æœ‰åŸºäºå›è°ƒçš„å‡½æ•°éƒ½ç”¨ Promise æ¥é‡æ–°å®ç°. å¦‚æœä½ å†™ Node.js çš„è¯, ä½ ä¼šå‘ç° `fs` è¿˜æœ‰å…¶ä»–æ¨¡å—éƒ½æ˜¯åŸºäºå›è°ƒå‡½æ•°æ¥å®ç°çš„. æ‰€ä»¥ä¼šå­˜åœ¨ä¸€äº›å·¥å…·åº“, å®ƒä»¬æŠŠæ‰€æœ‰åŸºäºå›è°ƒçš„å®ç°æ–¹å¼ä½¿ç”¨ Promise æ¥å®ç°äº†. æ¯”å¦‚ Node.js çš„ [util.promisify](https://nodejs.org/api/util.html#util_util_promisify_original) å’Œ [pify](https://github.com/sindresorhus/pify). å¦‚æœä½ åœ¨å­¦ä¹ çš„è¯, é‚£ä¹ˆå°½å¯èƒ½çš„å°è¯•è‡ªå·±å»å®ç°. æˆ–è€…è¯´å»è¯»è¿™äº› Promise å®ç°åº“çš„æºä»£ç . ç„¶åä½ å°±å¯ä»¥æŠŠè¿™äº›æœ€ä½³å®è·µç”¨äºä½ çš„äº§å“ä¸­å•¦!\n\nè¿˜æœ‰ä¸€äº›å…³äº Promise çš„ä¸œè¥¿æ²¡æœ‰å®Œå…¨è®²åˆ°, æ¯”å¦‚ `Promise.all` å’Œ `Promise.race` æ–¹æ³•, å¤„ç† Promise ä¸­çš„é”™è¯¯, ä»¥åŠä¸€äº›å¸¸è§çš„åæ¨¡å¼å’Œç»†èŠ‚ç­‰. ä½ å¯ä»¥å‚è€ƒä¸‹é¢çš„é“¾æ¥æ¥å­¦ä¹ æ›´å¤šå…³äº Promise çš„çŸ¥è¯†.\n\n### å‚è€ƒ\n\n* [ECMA Promise Specification](http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects)\n* [Mozilla Docs](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\n* [Googleâ€™s Developerâ€™s Guide on Promises written by Jake Archibald](https://developers.google.com/web/fundamentals/primers/promises#promise-api-reference)\n* [Exploring JSâ€™s Chapter on Promises](http://exploringjs.com/es6/ch_promises.html#sec_first-example-promises)\n* [Introduction to Promises](http://jamesknelson.com/grokking-es6-promises-the-four-functions-you-need-to-avoid-callback-hell/)\n","source":"_posts/ES6-Promise-ç®€æ˜æŒ‡å—.md","raw":"---\ntitle: ES6 Promise ç®€æ˜æŒ‡å—\ncomments: true\ndate: 2018-05-29 22:28:41\ntags:\nfrom: https://codeburst.io/a-simple-guide-to-es6-promises-d71bacd2e13a\n---\n\nPromise æ˜¯ JavaScriptES6 ä¸­æœ€ä»¤äººå…´å¥‹çš„æ–°å¢åŠŸèƒ½ä¹‹ä¸€. ES5 ä¸­ä½¿ç”¨å›è°ƒå‡½æ•°æ¥å¤„ç†å¼‚æ­¥æ“ä½œ. è¿‡åº¦ä½¿ç”¨å›è°ƒåˆ™ä¼šäº§ç”Ÿå›è°ƒåœ°ç‹±å’Œå¤šçº§åµŒå¥—ç¼©å¸¦æ¥çš„é—®é¢˜. Promise é€šè¿‡å°†å¼‚æ­¥ä»£ç è½¬åŒ–æˆåŒæ­¥æ‰§è¡Œçš„æ–¹å¼, å¤§å¤§ç®€åŒ–äº†å¼‚æ­¥ç¼–ç¨‹æ–¹å¼.\n\n<!-- more -->\n\nè¿™ç¯‡æ–‡ç« ä¸­, æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹ä»€ä¹ˆæ˜¯ Promise ä»¥åŠåœ¨å¼€å‘ä¸­çš„å®è·µ.\n\n### ä»€ä¹ˆæ˜¯ Promise\n\nç®€å•æ¥è¯´ Promise å°±æ˜¯ä¸€ä¸ªå­˜æ”¾ç€æœªæ¥æ‰ä¼šæœ‰è®¡ç®—ç»“æœçš„å ä½ç¬¦. ç¨å¾®æƒ³æƒ³, ä½ ä¼šå‘ç°, è¿™å’Œæˆ‘ä»¬å¹³å¸¸åœ¨è°ˆè¯è¿‡ç¨‹ä¸­è¯´çš„æ‰¿è¯ºå¾ˆåƒ. ä¸¾ä¸ªä¾‹å­: ä½ å‡†å¤‡å»å°åº¦æ—…è¡Œ, ä½ è®¢äº†ä¸€å¼ å»å°åº¦çš„æœºç¥¨. è¿™ä¸ªæœºç¥¨ä¸Šå†™ç€å¤šå°‘å·, åº§ä½å·æ˜¯å¤šå°‘. è¿™ä¸ªåœºæ™¯ä¸‹, æœºç¥¨å°±æ˜¯èˆªç©ºå…¬å¸ç»™ä½ è®¸ä¸‹çš„æ‰¿è¯º: åœ¨ä½ å‡†å¤‡å‡ºå‘é‚£å¤©ç»™ä½ é¢„ç•™äº†ä¸€ä¸ªå¤´ç­‰èˆ±ï¼ğŸ˜\n\nè¿˜æœ‰ä¸€ä¸ªç®€å•çš„ä¾‹å­, ä½ æ‰¿è¯ºä½ çš„æœ‹å‹, å½“ä½ è¯»å®Œã€Šè®¡ç®—æœºç¼–ç¨‹è‰ºæœ¯ã€‹è¿™æœ¬ä¹¦å, ä½ å°±æŠŠè¿™æœ¬ä¹¦è¿˜å›å». åœ¨è¿™é‡Œ, ä½ æ‰€è¯´çš„è¯å°±å¥½æ¯”æ˜¯ä¸€ä¸ªå ä½ç¬¦, éœ€è¦è¿”å›çš„å€¼å°±æ˜¯è¿™æœ¬ä¹¦.\n\nä½ è¿˜å¯ä»¥æƒ³åˆ°å…¶ä»–ä¸€äº›ç±»ä¼¼æ‰¿è¯ºçš„ä¾‹å­, æ¯”å¦‚åœ¨åŒ»ç”ŸåŠå…¬å®¤ç­‰ç€ã€åœ¨é¤é¦†ç‚¹é¤ã€åœ¨å›¾ä¹¦é¦†å†™ä¹¦ç­‰ç­‰. éƒ½æ¶‰åŠæŸç§å½¢å¼çš„æ‰¿è¯º.\n\n### ç”Ÿæˆä¸€ä¸ª Promise\n\nå½“æŸé¡¹ä»»åŠ¡çš„å®Œæˆæ—¶é—´ä¸ç¡®å®šæˆ–å¤ªé•¿æ—¶, å°±å¯ä»¥ä½¿ç”¨ Promise. ä¾‹å¦‚, ç½‘ç»œè¯·æ±‚å¯èƒ½éœ€è¦ 10ms åˆ° 200msï¼ˆæˆ–æ›´é•¿ï¼‰çš„æ—¶é—´, å…·ä½“å–å†³äºç½‘é€Ÿ. æˆ‘ä»¬ä¸æƒ³åœ¨è·å–æ•°æ®æ—¶ç­‰å¾…. 200 æ¯«ç§’å¯¹ä½ æ¥è¯´å¯èƒ½ä¸å¤ªé‡è¦, ä½†å¯¹äºä¸€å°ç”µè„‘æ¥è¯´, è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ—¶é—´. Promise å°±æ˜¯è¦è®©è¿™ç§å¼‚æ­¥å˜å¾—ç®€å•ã€è½»æ¾. ä½¿ç”¨ Promise æ„é€ å‡½æ•°, æ¥å®ä¾‹åŒ–ä¸€ä¸ª myPromise å®ä¾‹, åƒè¿™æ ·:\n\n```js\nconst myPromise = new Promise((resolve, reject) => {\n  if (Math.random() * 100 <= 90) {\n    resolve('Hello, Promises!');\n  }\n  reject(new Error('In 10% of the cases, I fail. Miserably.'));\n});\n```\n\næ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ¥æ”¶ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°. `new Promise()` è¢«ç§°ä¸ºæ‰§è¡Œå™¨å‡½æ•°, å®ƒæè¿°äº†è¦å®Œæˆçš„è®¡ç®—. å®ƒçš„è¿™ä¸¤ä¸ªå‚æ•°é€šå¸¸è¢«å«åš `resolve` å’Œ `reject`, å¯ä»¥ç†è§£ä¸º **æ‰§è¡Œ** å’Œ **æ‹’ç»**, å®ƒä»¬ç”¨æ¥æ ‡è®°æ‰§è¡Œå™¨å‡½æ•°æœ€ç»ˆçš„è®¡ç®—ç»“æœ. `resolve` å’Œ `reject` æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°, å®ƒç”¨æ¥è¿”å›ä¸€ä¸ªå€¼ç»™æˆ‘ä»¬çš„ Promise å®ä¾‹.\n\nå½“è¿ç®—ç»“æœæˆåŠŸæ—¶, æˆ–è€…æœªæ¥ç€è¿™ä¸ªå€¼å‡†å¤‡å°±ç»ªæ—¶, æˆ‘ä»¬å°±ä½¿ç”¨è¿™ä¸ª `resolve` å‡½æ•°æ¥è¿”å›ä¸€ä¸ªå€¼, æˆ‘ä»¬å°±è¯´: æˆ‘è·µè¡Œäº†å½“åˆè®¸ä¸‹çš„è¿™ä¸ªæ‰¿è¯º.\n\nåŒç†, å½“è®¡ç®—ç»“æœå¤±è´¥æ—¶, æˆ–è€…è®¡ç®—è¿‡ç¨‹ä¸­é‡åˆ°äº†é”™è¯¯, æˆ‘ä»¬å°±ä½¿ç”¨ `reject` å‡½æ•°, æˆ‘ä»¬å°±è¯´: æˆ‘æ‹’ç»å±¥è¡Œè¿™ä¸ªæ‰¿è¯º. `reject` å‡½æ•°å¯ä»¥æ¥æ”¶ä»»ä½•å€¼æ¥ä½œä¸ºå‚æ•°, ä½†æ˜¯æ¯”è¾ƒæ¨èçš„æ˜¯æˆ‘ä»¬å¯ä»¥ä¼ é€’ä¸€ä¸ª `Error` å¯¹è±¡, å³: æŠ›å‡ºä¸€ä¸ªé”™è¯¯, ç”¨æ¥å¸®åŠ©æˆ‘ä»¬è°ƒè¯•ä»£ç , è¿™æ ·å°±å¯ä»¥æ ¹æ®å…·ä½“çš„æŠ›å‡ºé”™è¯¯ä¿¡æ¯å»è§£å†³é—®é¢˜å•¦.\n\nåœ¨ä¸Šé¢çš„è¿™ä¸ªä¾‹å­ä¸­, `Math.random()` ç”¨æ¥ç”Ÿæˆä¸€ä¸ªéšæœºæ•°, åœ¨ 90% çš„æƒ…å†µä¸‹, è¿™ä¸ª Promise éƒ½åº”è¯¥è¢«æ‰§è¡Œ (å‡è®¾ç­‰æ¦‚ç‡åˆ†å¸ƒ), å‰©ä½™çš„æƒ…å†µä¸‹éƒ½æ˜¯æ‹’ç»æ‰§è¡Œçš„.\n\n### å¦‚ä½•ä½¿ç”¨ Promises\n\nåœ¨ä¸Šé¢çš„ä»£ç ä¾‹å­ä¸­, æˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ª Promise å®ä¾‹ `myPromise`, é‚£ä¹ˆå¦‚ä½•é€šè¿‡ `resolve` å’Œ `reject` å‡½æ•°è®¿é—®è®¡ç®—å®Œæˆåçš„å€¼å‘¢? æ‰€æœ‰çš„ `Promise` å®ä¾‹éƒ½æœ‰ä¸€ä¸ª `.then()` æ–¹æ³•, æˆ‘ä»¬æ¥ç§ç§:\n\n```js\nconst myPromise = new Promise((resolve, reject) => {\n  if (Math.random() * 100 < 90) {\n    console.log('resolving the promise ...');\n    resolve('Hello, Promises!');\n  }\n  reject(new Error('In 10% of the cases, I fail. Miserably.'));\n});\n\n// Two functions\nconst onResolved = resolvedValue => console.log(resolvedValue);\nconst onRejected = error => console.log(error);\n\nmyPromise.then(onResolved, onRejected);\n\n// Same as above, written concisely\nmyPromise.then(\n  resolvedValue => {\n    console.log(resolvedValue);\n  },\n  error => {\n    console.log(error);\n  }\n);\n\n// Output (in 90% of the cases)\n\n// resolving the promise ...\n// Hello, Promises!\n// Hello, Promises!\n```\n\n`.then()` æ–¹æ³•æ¥æ”¶ 2 ä¸ªå›è°ƒå‡½æ•°, ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°æ˜¯å½“æˆ‘ä»¬çš„ Promise å®ä¾‹è¢«æ‰§è¡Œ (resolve) æ—¶è°ƒç”¨, ç¬¬äºŒä¸ªåˆ™æ˜¯è¢«æ‹’ç» (reject) æ—¶è°ƒç”¨. åœ¨ä¸Šé¢çš„ä»£ç ä¸­, æˆ‘ä»¬ä½¿ç”¨ `onResolved` å’Œ `onRejected` å®šä¹‰äº†è¿™ä¸¤ä¸ªå‡½æ•°, ç„¶åæŠŠå®ƒæ”¾åˆ° `.then` å‡½æ•°é‡Œ, å½“ç„¶, ä½ ä¹Ÿå¯ä»¥æŒ‰ç…§å¸¸è§„å†™æ³•, ç›´æ¥åœ¨ `.then` å‡½æ•°é‡Œå†™ä¸¤ä¸ªå‡½æ•°, éƒ½æ˜¯ä¸€æ ·çš„.\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­, æœ‰å‡ ç‚¹éå¸¸é‡è¦, æˆ‘ä»¬æ¥è¯´ä¸€ä¸‹:\n\n* ä¸€ä¸ª `promise` åªèƒ½æ˜¯æˆåŠŸæˆ–è€…å¤±è´¥çŠ¶æ€ä¸­çš„ä¸€ä¸ª. å®ƒä¸èƒ½æˆåŠŸæˆ–è€…å¤±è´¥å¤šæ¬¡. ä¹Ÿä¸èƒ½ä»æˆåŠŸçŠ¶æ€åˆ‡æ¢åˆ°å¤±è´¥çŠ¶æ€, å¤±è´¥åä¹‹äº¦ç„¶.\n* ä½ å¯ä»¥åœ¨æˆåŠŸæˆ–è€…å¤±è´¥çŠ¶æ€å, å»å®šä¹‰è¿™æ ·ä¸€ä¸ªå›è°ƒå‡½æ•°. å½“ä»–ä»¬ `resolve` æˆ–è€… `reject` ä»ç„¶èƒ½æ­£ç¡®è°ƒç”¨.\n\nè¿™å°±è¯´æ˜, `Promise` æœ€ç»ˆåªæœ‰ä¸€ä¸ªçŠ¶æ€, å³ä½¿ä½ å¤šæ¬¡ä½¿ç”¨ `.then` å¤„ç†å‡½æ•°, è¿™ä¸ªçŠ¶æ€ä¸èƒ½æ›´æ”¹ (è®¡ç®—ç»“æœä¹Ÿä¸ä¼šé‡å¤æ‰§è¡Œ).\n\nä¸ºäº†éªŒè¯è¿™ç‚¹, ä½ å¯ä»¥çœ‹åˆ°åœ¨ç¬¬ 3 è¡Œä»£ç ä¸­, `console.log` è¯­å¥, å½“ä½ å¤šæ¬¡ä½¿ç”¨ `.then` å¤„ç†ç¨‹åºè¿è¡Œä¸Šè¿°ä»£ç æ—¶, `console.log` çš„è¯­å¥åªä¼šè¢«æ‰“å°ä¸€æ¬¡. è¿™å°±è¯´æ˜äº† Promise ä¼šç¼“å­˜è®¡ç®—ç»“æœçš„, å½“æœ‰ä¸€äº›ç›¸åŒçš„ç»“æœæ—¶, ç¼“å­˜ç»“æœä¼šè¢«è¿”å›.\n\nå¦ä¸€ä¸ªé‡è¦çš„è¦æ³¨æ„çš„æ˜¯, Promise æ˜¯ [åŠæ—©æ±‚å€¼ (evaluated eagerly)](https://zh.wikipedia.org/wiki/%E5%8F%8A%E6%97%A9%E6%B1%82%E5%80%BC) çš„: åªè¦å£°æ˜å¹¶å°†å…¶èµ‹å€¼åˆ°å˜é‡ä¸Š, å®ƒå·²ç»å¼€å§‹åœ¨å†…å­˜ä¸­æ‰§è¡Œäº†. æ²¡æœ‰ `.start` æˆ– `.begin` æ–¹æ³•. å°±åƒå®ƒåœ¨å‰é¢çš„ä¾‹å­ä¸­å¼€å§‹çš„é‚£æ ·.\n\nä¸ºäº†ç¡®ä¿ Promise èƒ½è¢«å»¶è¿Ÿè°ƒç”¨, æˆ‘ä»¬é€šå¸¸è¿˜éœ€è¦åœ¨å®ƒçš„å¤–å±‚åŒ…è£¹ä¸€ä¸ªå‡½æ•°, ç¨åçš„ä¾‹å­ä¸­æˆ‘ä»¬ä¼šè§£é‡Šè¿™ä¸ª.\n\n### æ•è· Promise\n\nåˆ°ç›®å‰ä¸ºæ­¢, æˆ‘ä»¬å·²ç»çœ‹åˆ°äº† `resolve` çš„åœºæ™¯, é‚£ä¹ˆå½“æ‰§è¡Œå‡½æ•°ä¸­å‡ºç°ä¸€ä¸ªé”™è¯¯æ—¶, ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢? åœ¨ `.then()` å‡½æ•°ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°, å°±æ˜¯ä¸Šé¢ä¾‹å­ä¸­çš„ `onRejected` ä¼šè¢«æ‰§è¡Œ, æ¥çœ‹ä¸€ä¸ªä¾‹å­:\n\n```js\nconst myPromise = new Promise((resolve, reject) => {\n  if (Math.random() * 100 < 90) {\n    reject(new Error('The promise was rejected by using reject function.'));\n  }\n  throw new Error('The promise was rejected by throwing an error');\n});\n\nmyPromise.then(\n  () => console.log('resolved'),\n  error => console.log(error.message)\n);\n\n// Output (in 90% of cases)\n\n// The promise was rejected by using reject function.\n```\n\nå’Œç¬¬ä¸€ä¸ªä¾‹å­ä¸€æ ·çš„, ä½†æ˜¯ç°åœ¨ 90% çš„æƒ…å†µæ˜¯è¢« `reject` çš„, å¦å¤– 10% çš„æƒ…å†µåˆ™æ˜¯æŠ›å‡ºä¸€ä¸ªé”™è¯¯è¯­å¥.\n\nåœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬åˆ†åˆ«å®šä¹‰äº† `onResolved` å’Œ `onRejected` æ–¹æ³•, `onRejected` æ–¹æ³•å°†åœ¨é”™è¯¯å‘ç”Ÿæ—¶è¢«è°ƒç”¨, å¯ä»¥çœ‹åˆ° `reject` å‡½æ•°çš„å‚æ•°å¯ä»¥ç›´æ¥æ˜¯é”™è¯¯æç¤º, æ²¡å¿…è¦å¿…é¡» `new Error`, ä¸¤ä¸ªå†™æ³•éƒ½ä¸€æ ·.\n\nå¥å£®çš„ç¨‹åºä»£ç ç¦»ä¸å¼€é”™è¯¯å¤„ç†, `.then` æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ç»™äº†æˆ‘ä»¬è¿™æ ·ä¸€ä¸ªæ·å¾„. å½“éœ€è¦å¤„ç†ä¸€ä¸ªé”™è¯¯æ—¶, å¯ä»¥ç”¨ `.catch(onRejected)` æ¥ä»£æ›¿ `.then(null, () => {...})`, `catch` æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•° `onRejected`, å› æ­¤, ä¸Šé¢çš„ä»£ç , å¯ä»¥ä½¿ç”¨ `catch` æ¥ç®€åŒ–å†™æ³•:\n\n```js\nmyPromise.catch(error => console.log(error.message));\n```\n\nè®°ä½: `.catch` æ–¹æ³•ä»…ä»…æ˜¯ `.then(undefined, onRejected)` çš„è¯­æ³•ç³–è€Œå·².\n\n### é“¾å¼ Promise\n\n`.then()` å’Œ `.catch()` æ–¹æ³•æ°¸è¿œä¼šè¿”å›ä¸€ä¸ª Promise å®ä¾‹, æ‰€ä»¥ä½ å¯ä»¥é“¾å¼ä½¿ç”¨å¤šä¸ª `.then` ä¸€èµ·æ¥è°ƒç”¨. è®©æˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­ç†è§£å®ƒ.\n\né¦–å…ˆ, æˆ‘ä»¬å†™ä¸€ä¸ªå‡½æ•°, æ¥å»¶è¿Ÿè¿”å›ä¸€ä¸ª Promise å®ä¾‹. è¿™ä¸ªè¿”å›çš„ Promise å°†åœ¨ç¨åçš„æ—¶é—´å†… `resolve`. è¿™é‡Œæ˜¯å®ç°æ–¹æ³•:\n\n```js\nconst delay = ms => new Promise(resolve => setTimeout(resolve, ms));\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªå‡½æ•°æ¥åŒ…è£¹æˆ‘ä»¬çš„ Promise å®ä¾‹, æ‰€ä»¥å®ƒå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œ. è¿™ä¸ª `delay` å‡½æ•°æ¥æ”¶ä¸€ä¸ªæ—¶é—´æ¥ä½œä¸ºå‚æ•°. è¿™ä¸ªæ‰§è¡Œå‡½æ•°å°†æ¥æ”¶ `ms` ä½œä¸ºä»–çš„å‚æ•°, å®ƒè¿˜åŒ…å«ä¸€ä¸ª `setTimeout` , å®ƒåœ¨ `ms` æ¯«ç§’åè°ƒç”¨ `resolve` å‡½æ•°, ä»è€Œæ­£ç¡®æ‰§è¡Œ. çœ‹è¿™ä¸ªä¾‹å­:\n\n```js\ndelay(5000).then(() => console.log('Resolved after 5 seconds'));\n```\n\n`.then` ä¸­çš„å›è°ƒè¯­å¥å°†åœ¨ `delay(5000)` åæ‰§è¡Œ. å½“ä½ æ‰§è¡Œä¸Šé¢çš„ä»£ç  5 ç§’å, ä½ å°±å¯ä»¥åœ¨æ§åˆ¶å°ä¸Šçœ‹åˆ°è¾“å‡ºç»“æœäº†.\n\nè¿™é‡Œ, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šä¸ª `.then()` æ–¹æ³•æ¥é“¾å¼è°ƒç”¨:\n\n```js\nconst delay = ms => new Promise(resolve => setTimeout(resolve, ms));\n\ndelay(2000)\n  .then(() => {\n    console.log('Resolved after 2 seconds');\n    return delay(1500);\n  })\n  .then(() => {\n    console.log('Resolved after 1.5 seconds');\n    return delay(3000);\n  })\n  .then(() => {\n    console.log('Resolved after 3 seconds');\n    throw new Error();\n  })\n  .catch(() => {\n    console.log('Caught an error.');\n  })\n  .then(() => {\n    console.log('Done.');\n  });\n\n// Resolved after 2 seconds\n// Resolved after 1.5 seconds\n// Resolved after 3 seconds\n// Caught an error.\n// Done.\n```\n\nä»ç¬¬ 3 è¡Œå¼€å§‹, å®ƒçš„æ‰§è¡Œæ­¥éª¤æ˜¯è¿™æ ·çš„:\n\n* `delay(2000)` å‡½æ•°æ‰§è¡Œ, å®ƒè¿”å›ä¸€ä¸ªç¨å 2 ç§’å³å°†æ‰§è¡Œçš„ Promise å®ä¾‹.\n* ç¬¬ 1 ä¸ª `.then()` æ‰§è¡Œ, å®ƒè¾“å‡ºè¯­å¥ `Resolved after 2 seconds`, ç„¶åå®ƒæ‰§è¡Œ `delay(1500)` åˆè¿”å›ä¸€ä¸ª Promise å®ä¾‹, å¦‚æœä¸€ä¸ª `.then()` è¿”å›äº†ä¸€ä¸ª Promise å®ä¾‹, é‚£ä¹ˆå®ƒçš„ `resolve` å°†è¢«è½¬å‘ç»™ä¸‹ä¸€ä¸ª `.then` æ–¹æ³•è°ƒç”¨, æŠ€æœ¯ä¸Šå«: æ²‰é™ (settlement).\n* åªè¦åƒè¿™æ ·ç»§ç»­ä¸²è”ä¸‹å», å®ƒä¼šç»§ç»­æ‰§è¡Œ.\n\næ³¨æ„åœ¨ç¬¬ä¸‰ä¸ª `.then()` æ–¹æ³•æ—¶, æˆ‘ä»¬åœ¨ `.then` ä¸­æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯. è¿™æ„å‘³ç€å½“å‰çš„ Promise è¢«æ‹’ç». ç„¶åå®ƒä¼šåœ¨ä¸‹ä¸€ä¸ª `.catch` è¯­å¥ä¸­è¢«æ•è·, `Caught an error` å°†ä¼šè¢«è¾“å‡º. ç„¶è€Œä¸€ä¸ª `.catch` è¯­å¥å®ƒè‡ªå·±æ°¸è¿œæ˜¯è¢« `resolve` çš„, æ‰€ä»¥ä¸éœ€è¦åœ¨è¯­å¥é‡Œå†å†™ `reject` (é™¤éä½ æ•…æ„æŠ›å‡ºä¸€ä¸ªé”™è¯¯), è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨ `.catch` è¯­å¥åè¿˜å¯ä»¥ç»§ç»­å†™ `.then` çš„åŸå› .\n\næ¯”è¾ƒæ¨èçš„åšæ³•æ˜¯åœ¨ `.then` æ–¹æ³•åæ‰§è¡Œ `.catch` è€Œä¸æ˜¯ä½¿ç”¨ `onResolved` å’Œ `onRejected`, æˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­è¯´æ˜ä¸€ä¸‹:\n\n```js\nconst promiseThatResolves = () =>\n  new Promise((resolve, reject) => {\n    resolve();\n  });\n\n// Leads to UnhandledPromiseRejection\npromiseThatResolves().then(\n  () => {\n    throw new Error();\n  },\n  err => console.log(err)\n);\n\n// Proper error handling\npromiseThatResolves()\n  .then(() => {\n    throw new Error();\n  })\n  .catch(err => console.log(err));\n```\n\næˆ‘ä»¬åˆ›é€ ä¸€ä¸ªæ°¸è¿œèƒ½è¢« `resolve` çš„ Promise å®ä¾‹, å½“ä½ æ‰§è¡Œ `.then` æ—¶, å¯ä»¥å¸¦ä¸¤ä¸ªå›è°ƒå‡½æ•°: `onResolved` å’Œ `onRejected`, ç¬¬ä¸€ç§å†™æ³•, åœ¨ `then` ç§æ”¾å…¥ä¸¤ä¸ªå›è°ƒå‡½æ•°, ä½†æ˜¯: å¦‚æœåœ¨ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸­ç»§ç»­æŠ›å‡ºé”™è¯¯, é‚£ä¹ˆè¿™ä¸ªé”™è¯¯æ˜¯ä¸èƒ½è¢«æ•è·çš„. ğŸ˜…\n\nç¬¬äºŒç§å†™æ³•, åœ¨ `.then` è¯­å¥çš„åé¢ä½¿ç”¨ `.catch` æ•è·, ä¸å…‰èƒ½æ•è·åˆ°æ‰§è¡Œå‡½æ•° `promiseThatResolves` çš„é”™è¯¯, è€Œä¸”åœ¨ `.then()` ä¸­çš„é”™è¯¯ä¹Ÿæ˜¯èƒ½è¢«æ•è·åˆ°. çŸ¥é“è¿™æ ·å†™çš„å¥½å¤„äº†å§!ğŸ˜\n\n### æ€»ç»“\n\nä½ å¯ä»¥æ‰§è¡Œä¸Šé¢çš„æ‰€æœ‰ä»£ç ç‰‡æ®µæ¥æ›´æ·±å…¥çš„å­¦ä¹ . ä¸€ç§æ¯”è¾ƒå¥½çš„å®è·µå°±æ˜¯, æŠŠæ‰€æœ‰åŸºäºå›è°ƒçš„å‡½æ•°éƒ½ç”¨ Promise æ¥é‡æ–°å®ç°. å¦‚æœä½ å†™ Node.js çš„è¯, ä½ ä¼šå‘ç° `fs` è¿˜æœ‰å…¶ä»–æ¨¡å—éƒ½æ˜¯åŸºäºå›è°ƒå‡½æ•°æ¥å®ç°çš„. æ‰€ä»¥ä¼šå­˜åœ¨ä¸€äº›å·¥å…·åº“, å®ƒä»¬æŠŠæ‰€æœ‰åŸºäºå›è°ƒçš„å®ç°æ–¹å¼ä½¿ç”¨ Promise æ¥å®ç°äº†. æ¯”å¦‚ Node.js çš„ [util.promisify](https://nodejs.org/api/util.html#util_util_promisify_original) å’Œ [pify](https://github.com/sindresorhus/pify). å¦‚æœä½ åœ¨å­¦ä¹ çš„è¯, é‚£ä¹ˆå°½å¯èƒ½çš„å°è¯•è‡ªå·±å»å®ç°. æˆ–è€…è¯´å»è¯»è¿™äº› Promise å®ç°åº“çš„æºä»£ç . ç„¶åä½ å°±å¯ä»¥æŠŠè¿™äº›æœ€ä½³å®è·µç”¨äºä½ çš„äº§å“ä¸­å•¦!\n\nè¿˜æœ‰ä¸€äº›å…³äº Promise çš„ä¸œè¥¿æ²¡æœ‰å®Œå…¨è®²åˆ°, æ¯”å¦‚ `Promise.all` å’Œ `Promise.race` æ–¹æ³•, å¤„ç† Promise ä¸­çš„é”™è¯¯, ä»¥åŠä¸€äº›å¸¸è§çš„åæ¨¡å¼å’Œç»†èŠ‚ç­‰. ä½ å¯ä»¥å‚è€ƒä¸‹é¢çš„é“¾æ¥æ¥å­¦ä¹ æ›´å¤šå…³äº Promise çš„çŸ¥è¯†.\n\n### å‚è€ƒ\n\n* [ECMA Promise Specification](http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects)\n* [Mozilla Docs](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)\n* [Googleâ€™s Developerâ€™s Guide on Promises written by Jake Archibald](https://developers.google.com/web/fundamentals/primers/promises#promise-api-reference)\n* [Exploring JSâ€™s Chapter on Promises](http://exploringjs.com/es6/ch_promises.html#sec_first-example-promises)\n* [Introduction to Promises](http://jamesknelson.com/grokking-es6-promises-the-four-functions-you-need-to-avoid-callback-hell/)\n","slug":"ES6-Promise-ç®€æ˜æŒ‡å—","published":1,"updated":"2018-12-26T16:01:04.000Z","layout":"post","photos":[],"link":"","_id":"ck3v60jt90007r9q9qnoci6eo","content":"<p>Promise æ˜¯ JavaScriptES6 ä¸­æœ€ä»¤äººå…´å¥‹çš„æ–°å¢åŠŸèƒ½ä¹‹ä¸€. ES5 ä¸­ä½¿ç”¨å›è°ƒå‡½æ•°æ¥å¤„ç†å¼‚æ­¥æ“ä½œ. è¿‡åº¦ä½¿ç”¨å›è°ƒåˆ™ä¼šäº§ç”Ÿå›è°ƒåœ°ç‹±å’Œå¤šçº§åµŒå¥—ç¼©å¸¦æ¥çš„é—®é¢˜. Promise é€šè¿‡å°†å¼‚æ­¥ä»£ç è½¬åŒ–æˆåŒæ­¥æ‰§è¡Œçš„æ–¹å¼, å¤§å¤§ç®€åŒ–äº†å¼‚æ­¥ç¼–ç¨‹æ–¹å¼.</p>\n<a id=\"more\"></a>\n<p>è¿™ç¯‡æ–‡ç« ä¸­, æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹ä»€ä¹ˆæ˜¯ Promise ä»¥åŠåœ¨å¼€å‘ä¸­çš„å®è·µ.</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯-Promise\"><a href=\"#ä»€ä¹ˆæ˜¯-Promise\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ Promise\"></a>ä»€ä¹ˆæ˜¯ Promise</h3><p>ç®€å•æ¥è¯´ Promise å°±æ˜¯ä¸€ä¸ªå­˜æ”¾ç€æœªæ¥æ‰ä¼šæœ‰è®¡ç®—ç»“æœçš„å ä½ç¬¦. ç¨å¾®æƒ³æƒ³, ä½ ä¼šå‘ç°, è¿™å’Œæˆ‘ä»¬å¹³å¸¸åœ¨è°ˆè¯è¿‡ç¨‹ä¸­è¯´çš„æ‰¿è¯ºå¾ˆåƒ. ä¸¾ä¸ªä¾‹å­: ä½ å‡†å¤‡å»å°åº¦æ—…è¡Œ, ä½ è®¢äº†ä¸€å¼ å»å°åº¦çš„æœºç¥¨. è¿™ä¸ªæœºç¥¨ä¸Šå†™ç€å¤šå°‘å·, åº§ä½å·æ˜¯å¤šå°‘. è¿™ä¸ªåœºæ™¯ä¸‹, æœºç¥¨å°±æ˜¯èˆªç©ºå…¬å¸ç»™ä½ è®¸ä¸‹çš„æ‰¿è¯º: åœ¨ä½ å‡†å¤‡å‡ºå‘é‚£å¤©ç»™ä½ é¢„ç•™äº†ä¸€ä¸ªå¤´ç­‰èˆ±ï¼ğŸ˜</p>\n<p>è¿˜æœ‰ä¸€ä¸ªç®€å•çš„ä¾‹å­, ä½ æ‰¿è¯ºä½ çš„æœ‹å‹, å½“ä½ è¯»å®Œã€Šè®¡ç®—æœºç¼–ç¨‹è‰ºæœ¯ã€‹è¿™æœ¬ä¹¦å, ä½ å°±æŠŠè¿™æœ¬ä¹¦è¿˜å›å». åœ¨è¿™é‡Œ, ä½ æ‰€è¯´çš„è¯å°±å¥½æ¯”æ˜¯ä¸€ä¸ªå ä½ç¬¦, éœ€è¦è¿”å›çš„å€¼å°±æ˜¯è¿™æœ¬ä¹¦.</p>\n<p>ä½ è¿˜å¯ä»¥æƒ³åˆ°å…¶ä»–ä¸€äº›ç±»ä¼¼æ‰¿è¯ºçš„ä¾‹å­, æ¯”å¦‚åœ¨åŒ»ç”ŸåŠå…¬å®¤ç­‰ç€ã€åœ¨é¤é¦†ç‚¹é¤ã€åœ¨å›¾ä¹¦é¦†å†™ä¹¦ç­‰ç­‰. éƒ½æ¶‰åŠæŸç§å½¢å¼çš„æ‰¿è¯º.</p>\n<h3 id=\"ç”Ÿæˆä¸€ä¸ª-Promise\"><a href=\"#ç”Ÿæˆä¸€ä¸ª-Promise\" class=\"headerlink\" title=\"ç”Ÿæˆä¸€ä¸ª Promise\"></a>ç”Ÿæˆä¸€ä¸ª Promise</h3><p>å½“æŸé¡¹ä»»åŠ¡çš„å®Œæˆæ—¶é—´ä¸ç¡®å®šæˆ–å¤ªé•¿æ—¶, å°±å¯ä»¥ä½¿ç”¨ Promise. ä¾‹å¦‚, ç½‘ç»œè¯·æ±‚å¯èƒ½éœ€è¦ 10ms åˆ° 200msï¼ˆæˆ–æ›´é•¿ï¼‰çš„æ—¶é—´, å…·ä½“å–å†³äºç½‘é€Ÿ. æˆ‘ä»¬ä¸æƒ³åœ¨è·å–æ•°æ®æ—¶ç­‰å¾…. 200 æ¯«ç§’å¯¹ä½ æ¥è¯´å¯èƒ½ä¸å¤ªé‡è¦, ä½†å¯¹äºä¸€å°ç”µè„‘æ¥è¯´, è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ—¶é—´. Promise å°±æ˜¯è¦è®©è¿™ç§å¼‚æ­¥å˜å¾—ç®€å•ã€è½»æ¾. ä½¿ç”¨ Promise æ„é€ å‡½æ•°, æ¥å®ä¾‹åŒ–ä¸€ä¸ª myPromise å®ä¾‹, åƒè¿™æ ·:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> myPromise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Math</span>.random() * <span class=\"number\">100</span> &lt;= <span class=\"number\">90</span>) &#123;</span><br><span class=\"line\">    resolve(<span class=\"string\">'Hello, Promises!'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  reject(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'In 10% of the cases, I fail. Miserably.'</span>));</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ¥æ”¶ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°. <code>new Promise()</code> è¢«ç§°ä¸ºæ‰§è¡Œå™¨å‡½æ•°, å®ƒæè¿°äº†è¦å®Œæˆçš„è®¡ç®—. å®ƒçš„è¿™ä¸¤ä¸ªå‚æ•°é€šå¸¸è¢«å«åš <code>resolve</code> å’Œ <code>reject</code>, å¯ä»¥ç†è§£ä¸º <strong>æ‰§è¡Œ</strong> å’Œ <strong>æ‹’ç»</strong>, å®ƒä»¬ç”¨æ¥æ ‡è®°æ‰§è¡Œå™¨å‡½æ•°æœ€ç»ˆçš„è®¡ç®—ç»“æœ. <code>resolve</code> å’Œ <code>reject</code> æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°, å®ƒç”¨æ¥è¿”å›ä¸€ä¸ªå€¼ç»™æˆ‘ä»¬çš„ Promise å®ä¾‹.</p>\n<p>å½“è¿ç®—ç»“æœæˆåŠŸæ—¶, æˆ–è€…æœªæ¥ç€è¿™ä¸ªå€¼å‡†å¤‡å°±ç»ªæ—¶, æˆ‘ä»¬å°±ä½¿ç”¨è¿™ä¸ª <code>resolve</code> å‡½æ•°æ¥è¿”å›ä¸€ä¸ªå€¼, æˆ‘ä»¬å°±è¯´: æˆ‘è·µè¡Œäº†å½“åˆè®¸ä¸‹çš„è¿™ä¸ªæ‰¿è¯º.</p>\n<p>åŒç†, å½“è®¡ç®—ç»“æœå¤±è´¥æ—¶, æˆ–è€…è®¡ç®—è¿‡ç¨‹ä¸­é‡åˆ°äº†é”™è¯¯, æˆ‘ä»¬å°±ä½¿ç”¨ <code>reject</code> å‡½æ•°, æˆ‘ä»¬å°±è¯´: æˆ‘æ‹’ç»å±¥è¡Œè¿™ä¸ªæ‰¿è¯º. <code>reject</code> å‡½æ•°å¯ä»¥æ¥æ”¶ä»»ä½•å€¼æ¥ä½œä¸ºå‚æ•°, ä½†æ˜¯æ¯”è¾ƒæ¨èçš„æ˜¯æˆ‘ä»¬å¯ä»¥ä¼ é€’ä¸€ä¸ª <code>Error</code> å¯¹è±¡, å³: æŠ›å‡ºä¸€ä¸ªé”™è¯¯, ç”¨æ¥å¸®åŠ©æˆ‘ä»¬è°ƒè¯•ä»£ç , è¿™æ ·å°±å¯ä»¥æ ¹æ®å…·ä½“çš„æŠ›å‡ºé”™è¯¯ä¿¡æ¯å»è§£å†³é—®é¢˜å•¦.</p>\n<p>åœ¨ä¸Šé¢çš„è¿™ä¸ªä¾‹å­ä¸­, <code>Math.random()</code> ç”¨æ¥ç”Ÿæˆä¸€ä¸ªéšæœºæ•°, åœ¨ 90% çš„æƒ…å†µä¸‹, è¿™ä¸ª Promise éƒ½åº”è¯¥è¢«æ‰§è¡Œ (å‡è®¾ç­‰æ¦‚ç‡åˆ†å¸ƒ), å‰©ä½™çš„æƒ…å†µä¸‹éƒ½æ˜¯æ‹’ç»æ‰§è¡Œçš„.</p>\n<h3 id=\"å¦‚ä½•ä½¿ç”¨-Promises\"><a href=\"#å¦‚ä½•ä½¿ç”¨-Promises\" class=\"headerlink\" title=\"å¦‚ä½•ä½¿ç”¨ Promises\"></a>å¦‚ä½•ä½¿ç”¨ Promises</h3><p>åœ¨ä¸Šé¢çš„ä»£ç ä¾‹å­ä¸­, æˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ª Promise å®ä¾‹ <code>myPromise</code>, é‚£ä¹ˆå¦‚ä½•é€šè¿‡ <code>resolve</code> å’Œ <code>reject</code> å‡½æ•°è®¿é—®è®¡ç®—å®Œæˆåçš„å€¼å‘¢? æ‰€æœ‰çš„ <code>Promise</code> å®ä¾‹éƒ½æœ‰ä¸€ä¸ª <code>.then()</code> æ–¹æ³•, æˆ‘ä»¬æ¥ç§ç§:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> myPromise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Math</span>.random() * <span class=\"number\">100</span> &lt; <span class=\"number\">90</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'resolving the promise ...'</span>);</span><br><span class=\"line\">    resolve(<span class=\"string\">'Hello, Promises!'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  reject(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'In 10% of the cases, I fail. Miserably.'</span>));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Two functions</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> onResolved = <span class=\"function\"><span class=\"params\">resolvedValue</span> =&gt;</span> <span class=\"built_in\">console</span>.log(resolvedValue);</span><br><span class=\"line\"><span class=\"keyword\">const</span> onRejected = <span class=\"function\"><span class=\"params\">error</span> =&gt;</span> <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\"></span><br><span class=\"line\">myPromise.then(onResolved, onRejected);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Same as above, written concisely</span></span><br><span class=\"line\">myPromise.then(</span><br><span class=\"line\">  resolvedValue =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(resolvedValue);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  error =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Output (in 90% of the cases)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// resolving the promise ...</span></span><br><span class=\"line\"><span class=\"comment\">// Hello, Promises!</span></span><br><span class=\"line\"><span class=\"comment\">// Hello, Promises!</span></span><br></pre></td></tr></table></figure>\n<p><code>.then()</code> æ–¹æ³•æ¥æ”¶ 2 ä¸ªå›è°ƒå‡½æ•°, ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°æ˜¯å½“æˆ‘ä»¬çš„ Promise å®ä¾‹è¢«æ‰§è¡Œ (resolve) æ—¶è°ƒç”¨, ç¬¬äºŒä¸ªåˆ™æ˜¯è¢«æ‹’ç» (reject) æ—¶è°ƒç”¨. åœ¨ä¸Šé¢çš„ä»£ç ä¸­, æˆ‘ä»¬ä½¿ç”¨ <code>onResolved</code> å’Œ <code>onRejected</code> å®šä¹‰äº†è¿™ä¸¤ä¸ªå‡½æ•°, ç„¶åæŠŠå®ƒæ”¾åˆ° <code>.then</code> å‡½æ•°é‡Œ, å½“ç„¶, ä½ ä¹Ÿå¯ä»¥æŒ‰ç…§å¸¸è§„å†™æ³•, ç›´æ¥åœ¨ <code>.then</code> å‡½æ•°é‡Œå†™ä¸¤ä¸ªå‡½æ•°, éƒ½æ˜¯ä¸€æ ·çš„.</p>\n<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­, æœ‰å‡ ç‚¹éå¸¸é‡è¦, æˆ‘ä»¬æ¥è¯´ä¸€ä¸‹:</p>\n<ul>\n<li>ä¸€ä¸ª <code>promise</code> åªèƒ½æ˜¯æˆåŠŸæˆ–è€…å¤±è´¥çŠ¶æ€ä¸­çš„ä¸€ä¸ª. å®ƒä¸èƒ½æˆåŠŸæˆ–è€…å¤±è´¥å¤šæ¬¡. ä¹Ÿä¸èƒ½ä»æˆåŠŸçŠ¶æ€åˆ‡æ¢åˆ°å¤±è´¥çŠ¶æ€, å¤±è´¥åä¹‹äº¦ç„¶.</li>\n<li>ä½ å¯ä»¥åœ¨æˆåŠŸæˆ–è€…å¤±è´¥çŠ¶æ€å, å»å®šä¹‰è¿™æ ·ä¸€ä¸ªå›è°ƒå‡½æ•°. å½“ä»–ä»¬ <code>resolve</code> æˆ–è€… <code>reject</code> ä»ç„¶èƒ½æ­£ç¡®è°ƒç”¨.</li>\n</ul>\n<p>è¿™å°±è¯´æ˜, <code>Promise</code> æœ€ç»ˆåªæœ‰ä¸€ä¸ªçŠ¶æ€, å³ä½¿ä½ å¤šæ¬¡ä½¿ç”¨ <code>.then</code> å¤„ç†å‡½æ•°, è¿™ä¸ªçŠ¶æ€ä¸èƒ½æ›´æ”¹ (è®¡ç®—ç»“æœä¹Ÿä¸ä¼šé‡å¤æ‰§è¡Œ).</p>\n<p>ä¸ºäº†éªŒè¯è¿™ç‚¹, ä½ å¯ä»¥çœ‹åˆ°åœ¨ç¬¬ 3 è¡Œä»£ç ä¸­, <code>console.log</code> è¯­å¥, å½“ä½ å¤šæ¬¡ä½¿ç”¨ <code>.then</code> å¤„ç†ç¨‹åºè¿è¡Œä¸Šè¿°ä»£ç æ—¶, <code>console.log</code> çš„è¯­å¥åªä¼šè¢«æ‰“å°ä¸€æ¬¡. è¿™å°±è¯´æ˜äº† Promise ä¼šç¼“å­˜è®¡ç®—ç»“æœçš„, å½“æœ‰ä¸€äº›ç›¸åŒçš„ç»“æœæ—¶, ç¼“å­˜ç»“æœä¼šè¢«è¿”å›.</p>\n<p>å¦ä¸€ä¸ªé‡è¦çš„è¦æ³¨æ„çš„æ˜¯, Promise æ˜¯ <a href=\"https://zh.wikipedia.org/wiki/%E5%8F%8A%E6%97%A9%E6%B1%82%E5%80%BC\" target=\"_blank\" rel=\"noopener\">åŠæ—©æ±‚å€¼ (evaluated eagerly)</a> çš„: åªè¦å£°æ˜å¹¶å°†å…¶èµ‹å€¼åˆ°å˜é‡ä¸Š, å®ƒå·²ç»å¼€å§‹åœ¨å†…å­˜ä¸­æ‰§è¡Œäº†. æ²¡æœ‰ <code>.start</code> æˆ– <code>.begin</code> æ–¹æ³•. å°±åƒå®ƒåœ¨å‰é¢çš„ä¾‹å­ä¸­å¼€å§‹çš„é‚£æ ·.</p>\n<p>ä¸ºäº†ç¡®ä¿ Promise èƒ½è¢«å»¶è¿Ÿè°ƒç”¨, æˆ‘ä»¬é€šå¸¸è¿˜éœ€è¦åœ¨å®ƒçš„å¤–å±‚åŒ…è£¹ä¸€ä¸ªå‡½æ•°, ç¨åçš„ä¾‹å­ä¸­æˆ‘ä»¬ä¼šè§£é‡Šè¿™ä¸ª.</p>\n<h3 id=\"æ•è·-Promise\"><a href=\"#æ•è·-Promise\" class=\"headerlink\" title=\"æ•è· Promise\"></a>æ•è· Promise</h3><p>åˆ°ç›®å‰ä¸ºæ­¢, æˆ‘ä»¬å·²ç»çœ‹åˆ°äº† <code>resolve</code> çš„åœºæ™¯, é‚£ä¹ˆå½“æ‰§è¡Œå‡½æ•°ä¸­å‡ºç°ä¸€ä¸ªé”™è¯¯æ—¶, ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢? åœ¨ <code>.then()</code> å‡½æ•°ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°, å°±æ˜¯ä¸Šé¢ä¾‹å­ä¸­çš„ <code>onRejected</code> ä¼šè¢«æ‰§è¡Œ, æ¥çœ‹ä¸€ä¸ªä¾‹å­:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> myPromise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Math</span>.random() * <span class=\"number\">100</span> &lt; <span class=\"number\">90</span>) &#123;</span><br><span class=\"line\">    reject(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'The promise was rejected by using reject function.'</span>));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'The promise was rejected by throwing an error'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">myPromise.then(</span><br><span class=\"line\">  () =&gt; <span class=\"built_in\">console</span>.log(<span class=\"string\">'resolved'</span>),</span><br><span class=\"line\">  error =&gt; <span class=\"built_in\">console</span>.log(error.message)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Output (in 90% of cases)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// The promise was rejected by using reject function.</span></span><br></pre></td></tr></table></figure>\n<p>å’Œç¬¬ä¸€ä¸ªä¾‹å­ä¸€æ ·çš„, ä½†æ˜¯ç°åœ¨ 90% çš„æƒ…å†µæ˜¯è¢« <code>reject</code> çš„, å¦å¤– 10% çš„æƒ…å†µåˆ™æ˜¯æŠ›å‡ºä¸€ä¸ªé”™è¯¯è¯­å¥.</p>\n<p>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬åˆ†åˆ«å®šä¹‰äº† <code>onResolved</code> å’Œ <code>onRejected</code> æ–¹æ³•, <code>onRejected</code> æ–¹æ³•å°†åœ¨é”™è¯¯å‘ç”Ÿæ—¶è¢«è°ƒç”¨, å¯ä»¥çœ‹åˆ° <code>reject</code> å‡½æ•°çš„å‚æ•°å¯ä»¥ç›´æ¥æ˜¯é”™è¯¯æç¤º, æ²¡å¿…è¦å¿…é¡» <code>new Error</code>, ä¸¤ä¸ªå†™æ³•éƒ½ä¸€æ ·.</p>\n<p>å¥å£®çš„ç¨‹åºä»£ç ç¦»ä¸å¼€é”™è¯¯å¤„ç†, <code>.then</code> æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ç»™äº†æˆ‘ä»¬è¿™æ ·ä¸€ä¸ªæ·å¾„. å½“éœ€è¦å¤„ç†ä¸€ä¸ªé”™è¯¯æ—¶, å¯ä»¥ç”¨ <code>.catch(onRejected)</code> æ¥ä»£æ›¿ <code>.then(null, () =&gt; {...})</code>, <code>catch</code> æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•° <code>onRejected</code>, å› æ­¤, ä¸Šé¢çš„ä»£ç , å¯ä»¥ä½¿ç”¨ <code>catch</code> æ¥ç®€åŒ–å†™æ³•:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">myPromise.catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> <span class=\"built_in\">console</span>.log(error.message));</span><br></pre></td></tr></table></figure>\n<p>è®°ä½: <code>.catch</code> æ–¹æ³•ä»…ä»…æ˜¯ <code>.then(undefined, onRejected)</code> çš„è¯­æ³•ç³–è€Œå·².</p>\n<h3 id=\"é“¾å¼-Promise\"><a href=\"#é“¾å¼-Promise\" class=\"headerlink\" title=\"é“¾å¼ Promise\"></a>é“¾å¼ Promise</h3><p><code>.then()</code> å’Œ <code>.catch()</code> æ–¹æ³•æ°¸è¿œä¼šè¿”å›ä¸€ä¸ª Promise å®ä¾‹, æ‰€ä»¥ä½ å¯ä»¥é“¾å¼ä½¿ç”¨å¤šä¸ª <code>.then</code> ä¸€èµ·æ¥è°ƒç”¨. è®©æˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­ç†è§£å®ƒ.</p>\n<p>é¦–å…ˆ, æˆ‘ä»¬å†™ä¸€ä¸ªå‡½æ•°, æ¥å»¶è¿Ÿè¿”å›ä¸€ä¸ª Promise å®ä¾‹. è¿™ä¸ªè¿”å›çš„ Promise å°†åœ¨ç¨åçš„æ—¶é—´å†… <code>resolve</code>. è¿™é‡Œæ˜¯å®ç°æ–¹æ³•:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> delay = <span class=\"function\"><span class=\"params\">ms</span> =&gt;</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> setTimeout(resolve, ms));</span><br></pre></td></tr></table></figure>\n<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªå‡½æ•°æ¥åŒ…è£¹æˆ‘ä»¬çš„ Promise å®ä¾‹, æ‰€ä»¥å®ƒå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œ. è¿™ä¸ª <code>delay</code> å‡½æ•°æ¥æ”¶ä¸€ä¸ªæ—¶é—´æ¥ä½œä¸ºå‚æ•°. è¿™ä¸ªæ‰§è¡Œå‡½æ•°å°†æ¥æ”¶ <code>ms</code> ä½œä¸ºä»–çš„å‚æ•°, å®ƒè¿˜åŒ…å«ä¸€ä¸ª <code>setTimeout</code> , å®ƒåœ¨ <code>ms</code> æ¯«ç§’åè°ƒç”¨ <code>resolve</code> å‡½æ•°, ä»è€Œæ­£ç¡®æ‰§è¡Œ. çœ‹è¿™ä¸ªä¾‹å­:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">delay(<span class=\"number\">5000</span>).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">'Resolved after 5 seconds'</span>));</span><br></pre></td></tr></table></figure>\n<p><code>.then</code> ä¸­çš„å›è°ƒè¯­å¥å°†åœ¨ <code>delay(5000)</code> åæ‰§è¡Œ. å½“ä½ æ‰§è¡Œä¸Šé¢çš„ä»£ç  5 ç§’å, ä½ å°±å¯ä»¥åœ¨æ§åˆ¶å°ä¸Šçœ‹åˆ°è¾“å‡ºç»“æœäº†.</p>\n<p>è¿™é‡Œ, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šä¸ª <code>.then()</code> æ–¹æ³•æ¥é“¾å¼è°ƒç”¨:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> delay = <span class=\"function\"><span class=\"params\">ms</span> =&gt;</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> setTimeout(resolve, ms));</span><br><span class=\"line\"></span><br><span class=\"line\">delay(<span class=\"number\">2000</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Resolved after 2 seconds'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> delay(<span class=\"number\">1500</span>);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Resolved after 1.5 seconds'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> delay(<span class=\"number\">3000</span>);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Resolved after 3 seconds'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>();</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Caught an error.'</span>);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Done.'</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Resolved after 2 seconds</span></span><br><span class=\"line\"><span class=\"comment\">// Resolved after 1.5 seconds</span></span><br><span class=\"line\"><span class=\"comment\">// Resolved after 3 seconds</span></span><br><span class=\"line\"><span class=\"comment\">// Caught an error.</span></span><br><span class=\"line\"><span class=\"comment\">// Done.</span></span><br></pre></td></tr></table></figure>\n<p>ä»ç¬¬ 3 è¡Œå¼€å§‹, å®ƒçš„æ‰§è¡Œæ­¥éª¤æ˜¯è¿™æ ·çš„:</p>\n<ul>\n<li><code>delay(2000)</code> å‡½æ•°æ‰§è¡Œ, å®ƒè¿”å›ä¸€ä¸ªç¨å 2 ç§’å³å°†æ‰§è¡Œçš„ Promise å®ä¾‹.</li>\n<li>ç¬¬ 1 ä¸ª <code>.then()</code> æ‰§è¡Œ, å®ƒè¾“å‡ºè¯­å¥ <code>Resolved after 2 seconds</code>, ç„¶åå®ƒæ‰§è¡Œ <code>delay(1500)</code> åˆè¿”å›ä¸€ä¸ª Promise å®ä¾‹, å¦‚æœä¸€ä¸ª <code>.then()</code> è¿”å›äº†ä¸€ä¸ª Promise å®ä¾‹, é‚£ä¹ˆå®ƒçš„ <code>resolve</code> å°†è¢«è½¬å‘ç»™ä¸‹ä¸€ä¸ª <code>.then</code> æ–¹æ³•è°ƒç”¨, æŠ€æœ¯ä¸Šå«: æ²‰é™ (settlement).</li>\n<li>åªè¦åƒè¿™æ ·ç»§ç»­ä¸²è”ä¸‹å», å®ƒä¼šç»§ç»­æ‰§è¡Œ.</li>\n</ul>\n<p>æ³¨æ„åœ¨ç¬¬ä¸‰ä¸ª <code>.then()</code> æ–¹æ³•æ—¶, æˆ‘ä»¬åœ¨ <code>.then</code> ä¸­æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯. è¿™æ„å‘³ç€å½“å‰çš„ Promise è¢«æ‹’ç». ç„¶åå®ƒä¼šåœ¨ä¸‹ä¸€ä¸ª <code>.catch</code> è¯­å¥ä¸­è¢«æ•è·, <code>Caught an error</code> å°†ä¼šè¢«è¾“å‡º. ç„¶è€Œä¸€ä¸ª <code>.catch</code> è¯­å¥å®ƒè‡ªå·±æ°¸è¿œæ˜¯è¢« <code>resolve</code> çš„, æ‰€ä»¥ä¸éœ€è¦åœ¨è¯­å¥é‡Œå†å†™ <code>reject</code> (é™¤éä½ æ•…æ„æŠ›å‡ºä¸€ä¸ªé”™è¯¯), è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨ <code>.catch</code> è¯­å¥åè¿˜å¯ä»¥ç»§ç»­å†™ <code>.then</code> çš„åŸå› .</p>\n<p>æ¯”è¾ƒæ¨èçš„åšæ³•æ˜¯åœ¨ <code>.then</code> æ–¹æ³•åæ‰§è¡Œ <code>.catch</code> è€Œä¸æ˜¯ä½¿ç”¨ <code>onResolved</code> å’Œ <code>onRejected</code>, æˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­è¯´æ˜ä¸€ä¸‹:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promiseThatResolves = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span></span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    resolve();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Leads to UnhandledPromiseRejection</span></span><br><span class=\"line\">promiseThatResolves().then(</span><br><span class=\"line\">  () =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>();</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  err =&gt; <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Proper error handling</span></span><br><span class=\"line\">promiseThatResolves()</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>();</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> <span class=\"built_in\">console</span>.log(err));</span><br></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬åˆ›é€ ä¸€ä¸ªæ°¸è¿œèƒ½è¢« <code>resolve</code> çš„ Promise å®ä¾‹, å½“ä½ æ‰§è¡Œ <code>.then</code> æ—¶, å¯ä»¥å¸¦ä¸¤ä¸ªå›è°ƒå‡½æ•°: <code>onResolved</code> å’Œ <code>onRejected</code>, ç¬¬ä¸€ç§å†™æ³•, åœ¨ <code>then</code> ç§æ”¾å…¥ä¸¤ä¸ªå›è°ƒå‡½æ•°, ä½†æ˜¯: å¦‚æœåœ¨ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸­ç»§ç»­æŠ›å‡ºé”™è¯¯, é‚£ä¹ˆè¿™ä¸ªé”™è¯¯æ˜¯ä¸èƒ½è¢«æ•è·çš„. ğŸ˜…</p>\n<p>ç¬¬äºŒç§å†™æ³•, åœ¨ <code>.then</code> è¯­å¥çš„åé¢ä½¿ç”¨ <code>.catch</code> æ•è·, ä¸å…‰èƒ½æ•è·åˆ°æ‰§è¡Œå‡½æ•° <code>promiseThatResolves</code> çš„é”™è¯¯, è€Œä¸”åœ¨ <code>.then()</code> ä¸­çš„é”™è¯¯ä¹Ÿæ˜¯èƒ½è¢«æ•è·åˆ°. çŸ¥é“è¿™æ ·å†™çš„å¥½å¤„äº†å§!ğŸ˜</p>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>ä½ å¯ä»¥æ‰§è¡Œä¸Šé¢çš„æ‰€æœ‰ä»£ç ç‰‡æ®µæ¥æ›´æ·±å…¥çš„å­¦ä¹ . ä¸€ç§æ¯”è¾ƒå¥½çš„å®è·µå°±æ˜¯, æŠŠæ‰€æœ‰åŸºäºå›è°ƒçš„å‡½æ•°éƒ½ç”¨ Promise æ¥é‡æ–°å®ç°. å¦‚æœä½ å†™ Node.js çš„è¯, ä½ ä¼šå‘ç° <code>fs</code> è¿˜æœ‰å…¶ä»–æ¨¡å—éƒ½æ˜¯åŸºäºå›è°ƒå‡½æ•°æ¥å®ç°çš„. æ‰€ä»¥ä¼šå­˜åœ¨ä¸€äº›å·¥å…·åº“, å®ƒä»¬æŠŠæ‰€æœ‰åŸºäºå›è°ƒçš„å®ç°æ–¹å¼ä½¿ç”¨ Promise æ¥å®ç°äº†. æ¯”å¦‚ Node.js çš„ <a href=\"https://nodejs.org/api/util.html#util_util_promisify_original\" target=\"_blank\" rel=\"noopener\">util.promisify</a> å’Œ <a href=\"https://github.com/sindresorhus/pify\" target=\"_blank\" rel=\"noopener\">pify</a>. å¦‚æœä½ åœ¨å­¦ä¹ çš„è¯, é‚£ä¹ˆå°½å¯èƒ½çš„å°è¯•è‡ªå·±å»å®ç°. æˆ–è€…è¯´å»è¯»è¿™äº› Promise å®ç°åº“çš„æºä»£ç . ç„¶åä½ å°±å¯ä»¥æŠŠè¿™äº›æœ€ä½³å®è·µç”¨äºä½ çš„äº§å“ä¸­å•¦!</p>\n<p>è¿˜æœ‰ä¸€äº›å…³äº Promise çš„ä¸œè¥¿æ²¡æœ‰å®Œå…¨è®²åˆ°, æ¯”å¦‚ <code>Promise.all</code> å’Œ <code>Promise.race</code> æ–¹æ³•, å¤„ç† Promise ä¸­çš„é”™è¯¯, ä»¥åŠä¸€äº›å¸¸è§çš„åæ¨¡å¼å’Œç»†èŠ‚ç­‰. ä½ å¯ä»¥å‚è€ƒä¸‹é¢çš„é“¾æ¥æ¥å­¦ä¹ æ›´å¤šå…³äº Promise çš„çŸ¥è¯†.</p>\n<h3 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h3><ul>\n<li><a href=\"http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects\" target=\"_blank\" rel=\"noopener\">ECMA Promise Specification</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\" target=\"_blank\" rel=\"noopener\">Mozilla Docs</a></li>\n<li><a href=\"https://developers.google.com/web/fundamentals/primers/promises#promise-api-reference\" target=\"_blank\" rel=\"noopener\">Googleâ€™s Developerâ€™s Guide on Promises written by Jake Archibald</a></li>\n<li><a href=\"http://exploringjs.com/es6/ch_promises.html#sec_first-example-promises\" target=\"_blank\" rel=\"noopener\">Exploring JSâ€™s Chapter on Promises</a></li>\n<li><a href=\"http://jamesknelson.com/grokking-es6-promises-the-four-functions-you-need-to-avoid-callback-hell/\" target=\"_blank\" rel=\"noopener\">Introduction to Promises</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>Promise æ˜¯ JavaScriptES6 ä¸­æœ€ä»¤äººå…´å¥‹çš„æ–°å¢åŠŸèƒ½ä¹‹ä¸€. ES5 ä¸­ä½¿ç”¨å›è°ƒå‡½æ•°æ¥å¤„ç†å¼‚æ­¥æ“ä½œ. è¿‡åº¦ä½¿ç”¨å›è°ƒåˆ™ä¼šäº§ç”Ÿå›è°ƒåœ°ç‹±å’Œå¤šçº§åµŒå¥—ç¼©å¸¦æ¥çš„é—®é¢˜. Promise é€šè¿‡å°†å¼‚æ­¥ä»£ç è½¬åŒ–æˆåŒæ­¥æ‰§è¡Œçš„æ–¹å¼, å¤§å¤§ç®€åŒ–äº†å¼‚æ­¥ç¼–ç¨‹æ–¹å¼.</p>","more":"<p>è¿™ç¯‡æ–‡ç« ä¸­, æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹ä»€ä¹ˆæ˜¯ Promise ä»¥åŠåœ¨å¼€å‘ä¸­çš„å®è·µ.</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯-Promise\"><a href=\"#ä»€ä¹ˆæ˜¯-Promise\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ Promise\"></a>ä»€ä¹ˆæ˜¯ Promise</h3><p>ç®€å•æ¥è¯´ Promise å°±æ˜¯ä¸€ä¸ªå­˜æ”¾ç€æœªæ¥æ‰ä¼šæœ‰è®¡ç®—ç»“æœçš„å ä½ç¬¦. ç¨å¾®æƒ³æƒ³, ä½ ä¼šå‘ç°, è¿™å’Œæˆ‘ä»¬å¹³å¸¸åœ¨è°ˆè¯è¿‡ç¨‹ä¸­è¯´çš„æ‰¿è¯ºå¾ˆåƒ. ä¸¾ä¸ªä¾‹å­: ä½ å‡†å¤‡å»å°åº¦æ—…è¡Œ, ä½ è®¢äº†ä¸€å¼ å»å°åº¦çš„æœºç¥¨. è¿™ä¸ªæœºç¥¨ä¸Šå†™ç€å¤šå°‘å·, åº§ä½å·æ˜¯å¤šå°‘. è¿™ä¸ªåœºæ™¯ä¸‹, æœºç¥¨å°±æ˜¯èˆªç©ºå…¬å¸ç»™ä½ è®¸ä¸‹çš„æ‰¿è¯º: åœ¨ä½ å‡†å¤‡å‡ºå‘é‚£å¤©ç»™ä½ é¢„ç•™äº†ä¸€ä¸ªå¤´ç­‰èˆ±ï¼ğŸ˜</p>\n<p>è¿˜æœ‰ä¸€ä¸ªç®€å•çš„ä¾‹å­, ä½ æ‰¿è¯ºä½ çš„æœ‹å‹, å½“ä½ è¯»å®Œã€Šè®¡ç®—æœºç¼–ç¨‹è‰ºæœ¯ã€‹è¿™æœ¬ä¹¦å, ä½ å°±æŠŠè¿™æœ¬ä¹¦è¿˜å›å». åœ¨è¿™é‡Œ, ä½ æ‰€è¯´çš„è¯å°±å¥½æ¯”æ˜¯ä¸€ä¸ªå ä½ç¬¦, éœ€è¦è¿”å›çš„å€¼å°±æ˜¯è¿™æœ¬ä¹¦.</p>\n<p>ä½ è¿˜å¯ä»¥æƒ³åˆ°å…¶ä»–ä¸€äº›ç±»ä¼¼æ‰¿è¯ºçš„ä¾‹å­, æ¯”å¦‚åœ¨åŒ»ç”ŸåŠå…¬å®¤ç­‰ç€ã€åœ¨é¤é¦†ç‚¹é¤ã€åœ¨å›¾ä¹¦é¦†å†™ä¹¦ç­‰ç­‰. éƒ½æ¶‰åŠæŸç§å½¢å¼çš„æ‰¿è¯º.</p>\n<h3 id=\"ç”Ÿæˆä¸€ä¸ª-Promise\"><a href=\"#ç”Ÿæˆä¸€ä¸ª-Promise\" class=\"headerlink\" title=\"ç”Ÿæˆä¸€ä¸ª Promise\"></a>ç”Ÿæˆä¸€ä¸ª Promise</h3><p>å½“æŸé¡¹ä»»åŠ¡çš„å®Œæˆæ—¶é—´ä¸ç¡®å®šæˆ–å¤ªé•¿æ—¶, å°±å¯ä»¥ä½¿ç”¨ Promise. ä¾‹å¦‚, ç½‘ç»œè¯·æ±‚å¯èƒ½éœ€è¦ 10ms åˆ° 200msï¼ˆæˆ–æ›´é•¿ï¼‰çš„æ—¶é—´, å…·ä½“å–å†³äºç½‘é€Ÿ. æˆ‘ä»¬ä¸æƒ³åœ¨è·å–æ•°æ®æ—¶ç­‰å¾…. 200 æ¯«ç§’å¯¹ä½ æ¥è¯´å¯èƒ½ä¸å¤ªé‡è¦, ä½†å¯¹äºä¸€å°ç”µè„‘æ¥è¯´, è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ—¶é—´. Promise å°±æ˜¯è¦è®©è¿™ç§å¼‚æ­¥å˜å¾—ç®€å•ã€è½»æ¾. ä½¿ç”¨ Promise æ„é€ å‡½æ•°, æ¥å®ä¾‹åŒ–ä¸€ä¸ª myPromise å®ä¾‹, åƒè¿™æ ·:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> myPromise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Math</span>.random() * <span class=\"number\">100</span> &lt;= <span class=\"number\">90</span>) &#123;</span><br><span class=\"line\">    resolve(<span class=\"string\">'Hello, Promises!'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  reject(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'In 10% of the cases, I fail. Miserably.'</span>));</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ¥æ”¶ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°. <code>new Promise()</code> è¢«ç§°ä¸ºæ‰§è¡Œå™¨å‡½æ•°, å®ƒæè¿°äº†è¦å®Œæˆçš„è®¡ç®—. å®ƒçš„è¿™ä¸¤ä¸ªå‚æ•°é€šå¸¸è¢«å«åš <code>resolve</code> å’Œ <code>reject</code>, å¯ä»¥ç†è§£ä¸º <strong>æ‰§è¡Œ</strong> å’Œ <strong>æ‹’ç»</strong>, å®ƒä»¬ç”¨æ¥æ ‡è®°æ‰§è¡Œå™¨å‡½æ•°æœ€ç»ˆçš„è®¡ç®—ç»“æœ. <code>resolve</code> å’Œ <code>reject</code> æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°, å®ƒç”¨æ¥è¿”å›ä¸€ä¸ªå€¼ç»™æˆ‘ä»¬çš„ Promise å®ä¾‹.</p>\n<p>å½“è¿ç®—ç»“æœæˆåŠŸæ—¶, æˆ–è€…æœªæ¥ç€è¿™ä¸ªå€¼å‡†å¤‡å°±ç»ªæ—¶, æˆ‘ä»¬å°±ä½¿ç”¨è¿™ä¸ª <code>resolve</code> å‡½æ•°æ¥è¿”å›ä¸€ä¸ªå€¼, æˆ‘ä»¬å°±è¯´: æˆ‘è·µè¡Œäº†å½“åˆè®¸ä¸‹çš„è¿™ä¸ªæ‰¿è¯º.</p>\n<p>åŒç†, å½“è®¡ç®—ç»“æœå¤±è´¥æ—¶, æˆ–è€…è®¡ç®—è¿‡ç¨‹ä¸­é‡åˆ°äº†é”™è¯¯, æˆ‘ä»¬å°±ä½¿ç”¨ <code>reject</code> å‡½æ•°, æˆ‘ä»¬å°±è¯´: æˆ‘æ‹’ç»å±¥è¡Œè¿™ä¸ªæ‰¿è¯º. <code>reject</code> å‡½æ•°å¯ä»¥æ¥æ”¶ä»»ä½•å€¼æ¥ä½œä¸ºå‚æ•°, ä½†æ˜¯æ¯”è¾ƒæ¨èçš„æ˜¯æˆ‘ä»¬å¯ä»¥ä¼ é€’ä¸€ä¸ª <code>Error</code> å¯¹è±¡, å³: æŠ›å‡ºä¸€ä¸ªé”™è¯¯, ç”¨æ¥å¸®åŠ©æˆ‘ä»¬è°ƒè¯•ä»£ç , è¿™æ ·å°±å¯ä»¥æ ¹æ®å…·ä½“çš„æŠ›å‡ºé”™è¯¯ä¿¡æ¯å»è§£å†³é—®é¢˜å•¦.</p>\n<p>åœ¨ä¸Šé¢çš„è¿™ä¸ªä¾‹å­ä¸­, <code>Math.random()</code> ç”¨æ¥ç”Ÿæˆä¸€ä¸ªéšæœºæ•°, åœ¨ 90% çš„æƒ…å†µä¸‹, è¿™ä¸ª Promise éƒ½åº”è¯¥è¢«æ‰§è¡Œ (å‡è®¾ç­‰æ¦‚ç‡åˆ†å¸ƒ), å‰©ä½™çš„æƒ…å†µä¸‹éƒ½æ˜¯æ‹’ç»æ‰§è¡Œçš„.</p>\n<h3 id=\"å¦‚ä½•ä½¿ç”¨-Promises\"><a href=\"#å¦‚ä½•ä½¿ç”¨-Promises\" class=\"headerlink\" title=\"å¦‚ä½•ä½¿ç”¨ Promises\"></a>å¦‚ä½•ä½¿ç”¨ Promises</h3><p>åœ¨ä¸Šé¢çš„ä»£ç ä¾‹å­ä¸­, æˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ª Promise å®ä¾‹ <code>myPromise</code>, é‚£ä¹ˆå¦‚ä½•é€šè¿‡ <code>resolve</code> å’Œ <code>reject</code> å‡½æ•°è®¿é—®è®¡ç®—å®Œæˆåçš„å€¼å‘¢? æ‰€æœ‰çš„ <code>Promise</code> å®ä¾‹éƒ½æœ‰ä¸€ä¸ª <code>.then()</code> æ–¹æ³•, æˆ‘ä»¬æ¥ç§ç§:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> myPromise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Math</span>.random() * <span class=\"number\">100</span> &lt; <span class=\"number\">90</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'resolving the promise ...'</span>);</span><br><span class=\"line\">    resolve(<span class=\"string\">'Hello, Promises!'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  reject(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'In 10% of the cases, I fail. Miserably.'</span>));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Two functions</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> onResolved = <span class=\"function\"><span class=\"params\">resolvedValue</span> =&gt;</span> <span class=\"built_in\">console</span>.log(resolvedValue);</span><br><span class=\"line\"><span class=\"keyword\">const</span> onRejected = <span class=\"function\"><span class=\"params\">error</span> =&gt;</span> <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\"></span><br><span class=\"line\">myPromise.then(onResolved, onRejected);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Same as above, written concisely</span></span><br><span class=\"line\">myPromise.then(</span><br><span class=\"line\">  resolvedValue =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(resolvedValue);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  error =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Output (in 90% of the cases)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// resolving the promise ...</span></span><br><span class=\"line\"><span class=\"comment\">// Hello, Promises!</span></span><br><span class=\"line\"><span class=\"comment\">// Hello, Promises!</span></span><br></pre></td></tr></table></figure>\n<p><code>.then()</code> æ–¹æ³•æ¥æ”¶ 2 ä¸ªå›è°ƒå‡½æ•°, ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°æ˜¯å½“æˆ‘ä»¬çš„ Promise å®ä¾‹è¢«æ‰§è¡Œ (resolve) æ—¶è°ƒç”¨, ç¬¬äºŒä¸ªåˆ™æ˜¯è¢«æ‹’ç» (reject) æ—¶è°ƒç”¨. åœ¨ä¸Šé¢çš„ä»£ç ä¸­, æˆ‘ä»¬ä½¿ç”¨ <code>onResolved</code> å’Œ <code>onRejected</code> å®šä¹‰äº†è¿™ä¸¤ä¸ªå‡½æ•°, ç„¶åæŠŠå®ƒæ”¾åˆ° <code>.then</code> å‡½æ•°é‡Œ, å½“ç„¶, ä½ ä¹Ÿå¯ä»¥æŒ‰ç…§å¸¸è§„å†™æ³•, ç›´æ¥åœ¨ <code>.then</code> å‡½æ•°é‡Œå†™ä¸¤ä¸ªå‡½æ•°, éƒ½æ˜¯ä¸€æ ·çš„.</p>\n<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­, æœ‰å‡ ç‚¹éå¸¸é‡è¦, æˆ‘ä»¬æ¥è¯´ä¸€ä¸‹:</p>\n<ul>\n<li>ä¸€ä¸ª <code>promise</code> åªèƒ½æ˜¯æˆåŠŸæˆ–è€…å¤±è´¥çŠ¶æ€ä¸­çš„ä¸€ä¸ª. å®ƒä¸èƒ½æˆåŠŸæˆ–è€…å¤±è´¥å¤šæ¬¡. ä¹Ÿä¸èƒ½ä»æˆåŠŸçŠ¶æ€åˆ‡æ¢åˆ°å¤±è´¥çŠ¶æ€, å¤±è´¥åä¹‹äº¦ç„¶.</li>\n<li>ä½ å¯ä»¥åœ¨æˆåŠŸæˆ–è€…å¤±è´¥çŠ¶æ€å, å»å®šä¹‰è¿™æ ·ä¸€ä¸ªå›è°ƒå‡½æ•°. å½“ä»–ä»¬ <code>resolve</code> æˆ–è€… <code>reject</code> ä»ç„¶èƒ½æ­£ç¡®è°ƒç”¨.</li>\n</ul>\n<p>è¿™å°±è¯´æ˜, <code>Promise</code> æœ€ç»ˆåªæœ‰ä¸€ä¸ªçŠ¶æ€, å³ä½¿ä½ å¤šæ¬¡ä½¿ç”¨ <code>.then</code> å¤„ç†å‡½æ•°, è¿™ä¸ªçŠ¶æ€ä¸èƒ½æ›´æ”¹ (è®¡ç®—ç»“æœä¹Ÿä¸ä¼šé‡å¤æ‰§è¡Œ).</p>\n<p>ä¸ºäº†éªŒè¯è¿™ç‚¹, ä½ å¯ä»¥çœ‹åˆ°åœ¨ç¬¬ 3 è¡Œä»£ç ä¸­, <code>console.log</code> è¯­å¥, å½“ä½ å¤šæ¬¡ä½¿ç”¨ <code>.then</code> å¤„ç†ç¨‹åºè¿è¡Œä¸Šè¿°ä»£ç æ—¶, <code>console.log</code> çš„è¯­å¥åªä¼šè¢«æ‰“å°ä¸€æ¬¡. è¿™å°±è¯´æ˜äº† Promise ä¼šç¼“å­˜è®¡ç®—ç»“æœçš„, å½“æœ‰ä¸€äº›ç›¸åŒçš„ç»“æœæ—¶, ç¼“å­˜ç»“æœä¼šè¢«è¿”å›.</p>\n<p>å¦ä¸€ä¸ªé‡è¦çš„è¦æ³¨æ„çš„æ˜¯, Promise æ˜¯ <a href=\"https://zh.wikipedia.org/wiki/%E5%8F%8A%E6%97%A9%E6%B1%82%E5%80%BC\" target=\"_blank\" rel=\"noopener\">åŠæ—©æ±‚å€¼ (evaluated eagerly)</a> çš„: åªè¦å£°æ˜å¹¶å°†å…¶èµ‹å€¼åˆ°å˜é‡ä¸Š, å®ƒå·²ç»å¼€å§‹åœ¨å†…å­˜ä¸­æ‰§è¡Œäº†. æ²¡æœ‰ <code>.start</code> æˆ– <code>.begin</code> æ–¹æ³•. å°±åƒå®ƒåœ¨å‰é¢çš„ä¾‹å­ä¸­å¼€å§‹çš„é‚£æ ·.</p>\n<p>ä¸ºäº†ç¡®ä¿ Promise èƒ½è¢«å»¶è¿Ÿè°ƒç”¨, æˆ‘ä»¬é€šå¸¸è¿˜éœ€è¦åœ¨å®ƒçš„å¤–å±‚åŒ…è£¹ä¸€ä¸ªå‡½æ•°, ç¨åçš„ä¾‹å­ä¸­æˆ‘ä»¬ä¼šè§£é‡Šè¿™ä¸ª.</p>\n<h3 id=\"æ•è·-Promise\"><a href=\"#æ•è·-Promise\" class=\"headerlink\" title=\"æ•è· Promise\"></a>æ•è· Promise</h3><p>åˆ°ç›®å‰ä¸ºæ­¢, æˆ‘ä»¬å·²ç»çœ‹åˆ°äº† <code>resolve</code> çš„åœºæ™¯, é‚£ä¹ˆå½“æ‰§è¡Œå‡½æ•°ä¸­å‡ºç°ä¸€ä¸ªé”™è¯¯æ—¶, ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢? åœ¨ <code>.then()</code> å‡½æ•°ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°, å°±æ˜¯ä¸Šé¢ä¾‹å­ä¸­çš„ <code>onRejected</code> ä¼šè¢«æ‰§è¡Œ, æ¥çœ‹ä¸€ä¸ªä¾‹å­:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> myPromise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Math</span>.random() * <span class=\"number\">100</span> &lt; <span class=\"number\">90</span>) &#123;</span><br><span class=\"line\">    reject(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'The promise was rejected by using reject function.'</span>));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'The promise was rejected by throwing an error'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">myPromise.then(</span><br><span class=\"line\">  () =&gt; <span class=\"built_in\">console</span>.log(<span class=\"string\">'resolved'</span>),</span><br><span class=\"line\">  error =&gt; <span class=\"built_in\">console</span>.log(error.message)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Output (in 90% of cases)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// The promise was rejected by using reject function.</span></span><br></pre></td></tr></table></figure>\n<p>å’Œç¬¬ä¸€ä¸ªä¾‹å­ä¸€æ ·çš„, ä½†æ˜¯ç°åœ¨ 90% çš„æƒ…å†µæ˜¯è¢« <code>reject</code> çš„, å¦å¤– 10% çš„æƒ…å†µåˆ™æ˜¯æŠ›å‡ºä¸€ä¸ªé”™è¯¯è¯­å¥.</p>\n<p>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬åˆ†åˆ«å®šä¹‰äº† <code>onResolved</code> å’Œ <code>onRejected</code> æ–¹æ³•, <code>onRejected</code> æ–¹æ³•å°†åœ¨é”™è¯¯å‘ç”Ÿæ—¶è¢«è°ƒç”¨, å¯ä»¥çœ‹åˆ° <code>reject</code> å‡½æ•°çš„å‚æ•°å¯ä»¥ç›´æ¥æ˜¯é”™è¯¯æç¤º, æ²¡å¿…è¦å¿…é¡» <code>new Error</code>, ä¸¤ä¸ªå†™æ³•éƒ½ä¸€æ ·.</p>\n<p>å¥å£®çš„ç¨‹åºä»£ç ç¦»ä¸å¼€é”™è¯¯å¤„ç†, <code>.then</code> æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ç»™äº†æˆ‘ä»¬è¿™æ ·ä¸€ä¸ªæ·å¾„. å½“éœ€è¦å¤„ç†ä¸€ä¸ªé”™è¯¯æ—¶, å¯ä»¥ç”¨ <code>.catch(onRejected)</code> æ¥ä»£æ›¿ <code>.then(null, () =&gt; {...})</code>, <code>catch</code> æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•° <code>onRejected</code>, å› æ­¤, ä¸Šé¢çš„ä»£ç , å¯ä»¥ä½¿ç”¨ <code>catch</code> æ¥ç®€åŒ–å†™æ³•:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">myPromise.catch(<span class=\"function\"><span class=\"params\">error</span> =&gt;</span> <span class=\"built_in\">console</span>.log(error.message));</span><br></pre></td></tr></table></figure>\n<p>è®°ä½: <code>.catch</code> æ–¹æ³•ä»…ä»…æ˜¯ <code>.then(undefined, onRejected)</code> çš„è¯­æ³•ç³–è€Œå·².</p>\n<h3 id=\"é“¾å¼-Promise\"><a href=\"#é“¾å¼-Promise\" class=\"headerlink\" title=\"é“¾å¼ Promise\"></a>é“¾å¼ Promise</h3><p><code>.then()</code> å’Œ <code>.catch()</code> æ–¹æ³•æ°¸è¿œä¼šè¿”å›ä¸€ä¸ª Promise å®ä¾‹, æ‰€ä»¥ä½ å¯ä»¥é“¾å¼ä½¿ç”¨å¤šä¸ª <code>.then</code> ä¸€èµ·æ¥è°ƒç”¨. è®©æˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­ç†è§£å®ƒ.</p>\n<p>é¦–å…ˆ, æˆ‘ä»¬å†™ä¸€ä¸ªå‡½æ•°, æ¥å»¶è¿Ÿè¿”å›ä¸€ä¸ª Promise å®ä¾‹. è¿™ä¸ªè¿”å›çš„ Promise å°†åœ¨ç¨åçš„æ—¶é—´å†… <code>resolve</code>. è¿™é‡Œæ˜¯å®ç°æ–¹æ³•:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> delay = <span class=\"function\"><span class=\"params\">ms</span> =&gt;</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> setTimeout(resolve, ms));</span><br></pre></td></tr></table></figure>\n<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªå‡½æ•°æ¥åŒ…è£¹æˆ‘ä»¬çš„ Promise å®ä¾‹, æ‰€ä»¥å®ƒå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œ. è¿™ä¸ª <code>delay</code> å‡½æ•°æ¥æ”¶ä¸€ä¸ªæ—¶é—´æ¥ä½œä¸ºå‚æ•°. è¿™ä¸ªæ‰§è¡Œå‡½æ•°å°†æ¥æ”¶ <code>ms</code> ä½œä¸ºä»–çš„å‚æ•°, å®ƒè¿˜åŒ…å«ä¸€ä¸ª <code>setTimeout</code> , å®ƒåœ¨ <code>ms</code> æ¯«ç§’åè°ƒç”¨ <code>resolve</code> å‡½æ•°, ä»è€Œæ­£ç¡®æ‰§è¡Œ. çœ‹è¿™ä¸ªä¾‹å­:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">delay(<span class=\"number\">5000</span>).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">'Resolved after 5 seconds'</span>));</span><br></pre></td></tr></table></figure>\n<p><code>.then</code> ä¸­çš„å›è°ƒè¯­å¥å°†åœ¨ <code>delay(5000)</code> åæ‰§è¡Œ. å½“ä½ æ‰§è¡Œä¸Šé¢çš„ä»£ç  5 ç§’å, ä½ å°±å¯ä»¥åœ¨æ§åˆ¶å°ä¸Šçœ‹åˆ°è¾“å‡ºç»“æœäº†.</p>\n<p>è¿™é‡Œ, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šä¸ª <code>.then()</code> æ–¹æ³•æ¥é“¾å¼è°ƒç”¨:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> delay = <span class=\"function\"><span class=\"params\">ms</span> =&gt;</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> setTimeout(resolve, ms));</span><br><span class=\"line\"></span><br><span class=\"line\">delay(<span class=\"number\">2000</span>)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Resolved after 2 seconds'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> delay(<span class=\"number\">1500</span>);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Resolved after 1.5 seconds'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> delay(<span class=\"number\">3000</span>);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Resolved after 3 seconds'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>();</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Caught an error.'</span>);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Done.'</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Resolved after 2 seconds</span></span><br><span class=\"line\"><span class=\"comment\">// Resolved after 1.5 seconds</span></span><br><span class=\"line\"><span class=\"comment\">// Resolved after 3 seconds</span></span><br><span class=\"line\"><span class=\"comment\">// Caught an error.</span></span><br><span class=\"line\"><span class=\"comment\">// Done.</span></span><br></pre></td></tr></table></figure>\n<p>ä»ç¬¬ 3 è¡Œå¼€å§‹, å®ƒçš„æ‰§è¡Œæ­¥éª¤æ˜¯è¿™æ ·çš„:</p>\n<ul>\n<li><code>delay(2000)</code> å‡½æ•°æ‰§è¡Œ, å®ƒè¿”å›ä¸€ä¸ªç¨å 2 ç§’å³å°†æ‰§è¡Œçš„ Promise å®ä¾‹.</li>\n<li>ç¬¬ 1 ä¸ª <code>.then()</code> æ‰§è¡Œ, å®ƒè¾“å‡ºè¯­å¥ <code>Resolved after 2 seconds</code>, ç„¶åå®ƒæ‰§è¡Œ <code>delay(1500)</code> åˆè¿”å›ä¸€ä¸ª Promise å®ä¾‹, å¦‚æœä¸€ä¸ª <code>.then()</code> è¿”å›äº†ä¸€ä¸ª Promise å®ä¾‹, é‚£ä¹ˆå®ƒçš„ <code>resolve</code> å°†è¢«è½¬å‘ç»™ä¸‹ä¸€ä¸ª <code>.then</code> æ–¹æ³•è°ƒç”¨, æŠ€æœ¯ä¸Šå«: æ²‰é™ (settlement).</li>\n<li>åªè¦åƒè¿™æ ·ç»§ç»­ä¸²è”ä¸‹å», å®ƒä¼šç»§ç»­æ‰§è¡Œ.</li>\n</ul>\n<p>æ³¨æ„åœ¨ç¬¬ä¸‰ä¸ª <code>.then()</code> æ–¹æ³•æ—¶, æˆ‘ä»¬åœ¨ <code>.then</code> ä¸­æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯. è¿™æ„å‘³ç€å½“å‰çš„ Promise è¢«æ‹’ç». ç„¶åå®ƒä¼šåœ¨ä¸‹ä¸€ä¸ª <code>.catch</code> è¯­å¥ä¸­è¢«æ•è·, <code>Caught an error</code> å°†ä¼šè¢«è¾“å‡º. ç„¶è€Œä¸€ä¸ª <code>.catch</code> è¯­å¥å®ƒè‡ªå·±æ°¸è¿œæ˜¯è¢« <code>resolve</code> çš„, æ‰€ä»¥ä¸éœ€è¦åœ¨è¯­å¥é‡Œå†å†™ <code>reject</code> (é™¤éä½ æ•…æ„æŠ›å‡ºä¸€ä¸ªé”™è¯¯), è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨ <code>.catch</code> è¯­å¥åè¿˜å¯ä»¥ç»§ç»­å†™ <code>.then</code> çš„åŸå› .</p>\n<p>æ¯”è¾ƒæ¨èçš„åšæ³•æ˜¯åœ¨ <code>.then</code> æ–¹æ³•åæ‰§è¡Œ <code>.catch</code> è€Œä¸æ˜¯ä½¿ç”¨ <code>onResolved</code> å’Œ <code>onRejected</code>, æˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­è¯´æ˜ä¸€ä¸‹:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> promiseThatResolves = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span></span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    resolve();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Leads to UnhandledPromiseRejection</span></span><br><span class=\"line\">promiseThatResolves().then(</span><br><span class=\"line\">  () =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>();</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  err =&gt; <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Proper error handling</span></span><br><span class=\"line\">promiseThatResolves()</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>();</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> <span class=\"built_in\">console</span>.log(err));</span><br></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬åˆ›é€ ä¸€ä¸ªæ°¸è¿œèƒ½è¢« <code>resolve</code> çš„ Promise å®ä¾‹, å½“ä½ æ‰§è¡Œ <code>.then</code> æ—¶, å¯ä»¥å¸¦ä¸¤ä¸ªå›è°ƒå‡½æ•°: <code>onResolved</code> å’Œ <code>onRejected</code>, ç¬¬ä¸€ç§å†™æ³•, åœ¨ <code>then</code> ç§æ”¾å…¥ä¸¤ä¸ªå›è°ƒå‡½æ•°, ä½†æ˜¯: å¦‚æœåœ¨ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸­ç»§ç»­æŠ›å‡ºé”™è¯¯, é‚£ä¹ˆè¿™ä¸ªé”™è¯¯æ˜¯ä¸èƒ½è¢«æ•è·çš„. ğŸ˜…</p>\n<p>ç¬¬äºŒç§å†™æ³•, åœ¨ <code>.then</code> è¯­å¥çš„åé¢ä½¿ç”¨ <code>.catch</code> æ•è·, ä¸å…‰èƒ½æ•è·åˆ°æ‰§è¡Œå‡½æ•° <code>promiseThatResolves</code> çš„é”™è¯¯, è€Œä¸”åœ¨ <code>.then()</code> ä¸­çš„é”™è¯¯ä¹Ÿæ˜¯èƒ½è¢«æ•è·åˆ°. çŸ¥é“è¿™æ ·å†™çš„å¥½å¤„äº†å§!ğŸ˜</p>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>ä½ å¯ä»¥æ‰§è¡Œä¸Šé¢çš„æ‰€æœ‰ä»£ç ç‰‡æ®µæ¥æ›´æ·±å…¥çš„å­¦ä¹ . ä¸€ç§æ¯”è¾ƒå¥½çš„å®è·µå°±æ˜¯, æŠŠæ‰€æœ‰åŸºäºå›è°ƒçš„å‡½æ•°éƒ½ç”¨ Promise æ¥é‡æ–°å®ç°. å¦‚æœä½ å†™ Node.js çš„è¯, ä½ ä¼šå‘ç° <code>fs</code> è¿˜æœ‰å…¶ä»–æ¨¡å—éƒ½æ˜¯åŸºäºå›è°ƒå‡½æ•°æ¥å®ç°çš„. æ‰€ä»¥ä¼šå­˜åœ¨ä¸€äº›å·¥å…·åº“, å®ƒä»¬æŠŠæ‰€æœ‰åŸºäºå›è°ƒçš„å®ç°æ–¹å¼ä½¿ç”¨ Promise æ¥å®ç°äº†. æ¯”å¦‚ Node.js çš„ <a href=\"https://nodejs.org/api/util.html#util_util_promisify_original\" target=\"_blank\" rel=\"noopener\">util.promisify</a> å’Œ <a href=\"https://github.com/sindresorhus/pify\" target=\"_blank\" rel=\"noopener\">pify</a>. å¦‚æœä½ åœ¨å­¦ä¹ çš„è¯, é‚£ä¹ˆå°½å¯èƒ½çš„å°è¯•è‡ªå·±å»å®ç°. æˆ–è€…è¯´å»è¯»è¿™äº› Promise å®ç°åº“çš„æºä»£ç . ç„¶åä½ å°±å¯ä»¥æŠŠè¿™äº›æœ€ä½³å®è·µç”¨äºä½ çš„äº§å“ä¸­å•¦!</p>\n<p>è¿˜æœ‰ä¸€äº›å…³äº Promise çš„ä¸œè¥¿æ²¡æœ‰å®Œå…¨è®²åˆ°, æ¯”å¦‚ <code>Promise.all</code> å’Œ <code>Promise.race</code> æ–¹æ³•, å¤„ç† Promise ä¸­çš„é”™è¯¯, ä»¥åŠä¸€äº›å¸¸è§çš„åæ¨¡å¼å’Œç»†èŠ‚ç­‰. ä½ å¯ä»¥å‚è€ƒä¸‹é¢çš„é“¾æ¥æ¥å­¦ä¹ æ›´å¤šå…³äº Promise çš„çŸ¥è¯†.</p>\n<h3 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h3><ul>\n<li><a href=\"http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects\" target=\"_blank\" rel=\"noopener\">ECMA Promise Specification</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\" target=\"_blank\" rel=\"noopener\">Mozilla Docs</a></li>\n<li><a href=\"https://developers.google.com/web/fundamentals/primers/promises#promise-api-reference\" target=\"_blank\" rel=\"noopener\">Googleâ€™s Developerâ€™s Guide on Promises written by Jake Archibald</a></li>\n<li><a href=\"http://exploringjs.com/es6/ch_promises.html#sec_first-example-promises\" target=\"_blank\" rel=\"noopener\">Exploring JSâ€™s Chapter on Promises</a></li>\n<li><a href=\"http://jamesknelson.com/grokking-es6-promises-the-four-functions-you-need-to-avoid-callback-hell/\" target=\"_blank\" rel=\"noopener\">Introduction to Promises</a></li>\n</ul>"},{"title":"JavaScript ä¸­çš„ this ç”¨æ³•æ€»ç»“","date":"2016-02-19T11:23:36.000Z","comments":0,"_content":"\n`this` æ˜¯ Javascript è¯­è¨€çš„ä¸€ä¸ªå…³é”®å­—ã€‚å®ƒä»£è¡¨å‡½æ•°è¿è¡Œæ—¶ï¼Œè‡ªåŠ¨ç”Ÿæˆçš„ä¸€ä¸ªå†…éƒ¨å¯¹è±¡ï¼Œåªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ã€‚éšç€å‡½æ•°ä½¿ç”¨åœºåˆçš„ä¸åŒï¼Œ`this` çš„å€¼ä¼šå‘ç”Ÿå˜åŒ–ã€‚ä½†æ˜¯æœ‰ä¸€ä¸ªæ€»çš„åŸåˆ™ï¼Œé‚£å°±æ˜¯ `this` æŒ‡çš„æ˜¯ï¼Œè°ƒç”¨å‡½æ•°çš„é‚£ä¸ªå¯¹è±¡ã€‚\n\n<!-- more -->\n### å››ç§æƒ…å†µ\n#### çº¯ç²¹çš„å‡½æ•°è°ƒç”¨\n\n```js\n// eg:1\nconsole.log(this);// => window å¯¹è±¡\n\n// eg:2\nfunction fun(){\n    this.x = 1;\n}\nconsole.log(x); // => 1\n// this æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œå³ DOM ä¸­çš„ window å¯¹è±¡\n```\n\n#### ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨\n\n```js\nvar user = {\n    count: 1,\n\n    getCount: function() {\n        return this.count;\n    }\n};\n\nconsole.log(user.getCount());// 1\n// this æŒ‡å‘è°ƒç”¨ getCount æ–¹æ³•çš„å¯¹è±¡ user\n```\n\n#### ä½œä¸ºæ„é€ å‡½æ•°çš„è°ƒç”¨\n```js\nvar x = 2;\n\nfunction fun(){\n    this.x = 1;\n}\n\nvar obj = new fun();\nconsole.log(obj.x); // => 1\nconsole.log(x); // => 2\n//this å°±æŒ‡å‘æ„é€ å™¨åˆ›å»ºçš„æ–°å¯¹è±¡ obj\n```\n\n#### apply/call è°ƒç”¨\n`apply()` æ˜¯å‡½æ•°å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ”¹å˜å‡½æ•°çš„è°ƒç”¨å¯¹è±¡ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°å°±è¡¨ç¤ºæ”¹å˜åçš„è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„å¯¹è±¡ï¼Œæ— å‚æ•°æ—¶ä¼ å…¥ window å¯¹è±¡ã€‚å› æ­¤ï¼Œ`this` æŒ‡çš„å°±æ˜¯è¿™ç¬¬ä¸€ä¸ªå‚æ•°ã€‚\n```js\nvar x = 0;\n\nfunction fun(){\n    console.log(this.x);\n}\n\nvar obj = {};\nobj.x = 1;\nobj.m = fun;\n\nobj.m(); //           => 1  this æŒ‡å‘è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡å³ï¼šobj\nobj.m.apply();  //    => 0  this æŒ‡å‘çš„æ˜¯å…¨å±€å¯¹è±¡å³ï¼šwindow\nobj.m.apply(obj);//   => 1  this æŒ‡å‘çš„ç¬¬ä¸€ä¸ªå‚æ•°å³ï¼šobj\nobj.m.call(obj);//    => 1  this æŒ‡å‘çš„ç¬¬ä¸€ä¸ªå‚æ•°å³ï¼šobj\n```\n\n### æ€»ç»“\n1. çº¯ç²¹çš„å‡½æ•°è°ƒç”¨: `this` å°±ä»£è¡¨å…¨å±€å¯¹è±¡ Globalï¼ˆæµè§ˆå™¨ä¸‹å°±æ˜¯ windowï¼‰\n2. ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨: `this` æŒ‡å‘è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡\n3. ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ï¼š`this` å°±æŒ‡å‘æ„é€ å™¨åˆ›å»ºçš„æ–°å¯¹è±¡\n4. `apply`, `call` è°ƒç”¨ï¼š`this` æŒ‡å‘å°±æ˜¯è¿™äº›å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°\n\nä¸‹ä¸€ç¯‡æ–‡ç« æ€»ç»“ä¸€ä¸‹ï¼š`apply`ã€`call`ã€`bind` çš„ç”¨æ³• :P\n","source":"_posts/JavaScript-ä¸­çš„-this-ç”¨æ³•æ€»ç»“.md","raw":"---\ntitle: JavaScript ä¸­çš„ this ç”¨æ³•æ€»ç»“\ndate: 2016-02-19 19:23:36\ntags:\ncomments: false\n---\n\n`this` æ˜¯ Javascript è¯­è¨€çš„ä¸€ä¸ªå…³é”®å­—ã€‚å®ƒä»£è¡¨å‡½æ•°è¿è¡Œæ—¶ï¼Œè‡ªåŠ¨ç”Ÿæˆçš„ä¸€ä¸ªå†…éƒ¨å¯¹è±¡ï¼Œåªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ã€‚éšç€å‡½æ•°ä½¿ç”¨åœºåˆçš„ä¸åŒï¼Œ`this` çš„å€¼ä¼šå‘ç”Ÿå˜åŒ–ã€‚ä½†æ˜¯æœ‰ä¸€ä¸ªæ€»çš„åŸåˆ™ï¼Œé‚£å°±æ˜¯ `this` æŒ‡çš„æ˜¯ï¼Œè°ƒç”¨å‡½æ•°çš„é‚£ä¸ªå¯¹è±¡ã€‚\n\n<!-- more -->\n### å››ç§æƒ…å†µ\n#### çº¯ç²¹çš„å‡½æ•°è°ƒç”¨\n\n```js\n// eg:1\nconsole.log(this);// => window å¯¹è±¡\n\n// eg:2\nfunction fun(){\n    this.x = 1;\n}\nconsole.log(x); // => 1\n// this æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œå³ DOM ä¸­çš„ window å¯¹è±¡\n```\n\n#### ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨\n\n```js\nvar user = {\n    count: 1,\n\n    getCount: function() {\n        return this.count;\n    }\n};\n\nconsole.log(user.getCount());// 1\n// this æŒ‡å‘è°ƒç”¨ getCount æ–¹æ³•çš„å¯¹è±¡ user\n```\n\n#### ä½œä¸ºæ„é€ å‡½æ•°çš„è°ƒç”¨\n```js\nvar x = 2;\n\nfunction fun(){\n    this.x = 1;\n}\n\nvar obj = new fun();\nconsole.log(obj.x); // => 1\nconsole.log(x); // => 2\n//this å°±æŒ‡å‘æ„é€ å™¨åˆ›å»ºçš„æ–°å¯¹è±¡ obj\n```\n\n#### apply/call è°ƒç”¨\n`apply()` æ˜¯å‡½æ•°å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ”¹å˜å‡½æ•°çš„è°ƒç”¨å¯¹è±¡ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°å°±è¡¨ç¤ºæ”¹å˜åçš„è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„å¯¹è±¡ï¼Œæ— å‚æ•°æ—¶ä¼ å…¥ window å¯¹è±¡ã€‚å› æ­¤ï¼Œ`this` æŒ‡çš„å°±æ˜¯è¿™ç¬¬ä¸€ä¸ªå‚æ•°ã€‚\n```js\nvar x = 0;\n\nfunction fun(){\n    console.log(this.x);\n}\n\nvar obj = {};\nobj.x = 1;\nobj.m = fun;\n\nobj.m(); //           => 1  this æŒ‡å‘è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡å³ï¼šobj\nobj.m.apply();  //    => 0  this æŒ‡å‘çš„æ˜¯å…¨å±€å¯¹è±¡å³ï¼šwindow\nobj.m.apply(obj);//   => 1  this æŒ‡å‘çš„ç¬¬ä¸€ä¸ªå‚æ•°å³ï¼šobj\nobj.m.call(obj);//    => 1  this æŒ‡å‘çš„ç¬¬ä¸€ä¸ªå‚æ•°å³ï¼šobj\n```\n\n### æ€»ç»“\n1. çº¯ç²¹çš„å‡½æ•°è°ƒç”¨: `this` å°±ä»£è¡¨å…¨å±€å¯¹è±¡ Globalï¼ˆæµè§ˆå™¨ä¸‹å°±æ˜¯ windowï¼‰\n2. ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨: `this` æŒ‡å‘è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡\n3. ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ï¼š`this` å°±æŒ‡å‘æ„é€ å™¨åˆ›å»ºçš„æ–°å¯¹è±¡\n4. `apply`, `call` è°ƒç”¨ï¼š`this` æŒ‡å‘å°±æ˜¯è¿™äº›å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°\n\nä¸‹ä¸€ç¯‡æ–‡ç« æ€»ç»“ä¸€ä¸‹ï¼š`apply`ã€`call`ã€`bind` çš„ç”¨æ³• :P\n","slug":"JavaScript-ä¸­çš„-this-ç”¨æ³•æ€»ç»“","published":1,"updated":"2018-12-26T16:01:04.000Z","layout":"post","photos":[],"link":"","_id":"ck3v60jta0008r9q94edjg6t8","content":"<p><code>this</code> æ˜¯ Javascript è¯­è¨€çš„ä¸€ä¸ªå…³é”®å­—ã€‚å®ƒä»£è¡¨å‡½æ•°è¿è¡Œæ—¶ï¼Œè‡ªåŠ¨ç”Ÿæˆçš„ä¸€ä¸ªå†…éƒ¨å¯¹è±¡ï¼Œåªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ã€‚éšç€å‡½æ•°ä½¿ç”¨åœºåˆçš„ä¸åŒï¼Œ<code>this</code> çš„å€¼ä¼šå‘ç”Ÿå˜åŒ–ã€‚ä½†æ˜¯æœ‰ä¸€ä¸ªæ€»çš„åŸåˆ™ï¼Œé‚£å°±æ˜¯ <code>this</code> æŒ‡çš„æ˜¯ï¼Œè°ƒç”¨å‡½æ•°çš„é‚£ä¸ªå¯¹è±¡ã€‚</p>\n<a id=\"more\"></a>\n<h3 id=\"å››ç§æƒ…å†µ\"><a href=\"#å››ç§æƒ…å†µ\" class=\"headerlink\" title=\"å››ç§æƒ…å†µ\"></a>å››ç§æƒ…å†µ</h3><h4 id=\"çº¯ç²¹çš„å‡½æ•°è°ƒç”¨\"><a href=\"#çº¯ç²¹çš„å‡½æ•°è°ƒç”¨\" class=\"headerlink\" title=\"çº¯ç²¹çš„å‡½æ•°è°ƒç”¨\"></a>çº¯ç²¹çš„å‡½æ•°è°ƒç”¨</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// eg:1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>);<span class=\"comment\">// =&gt; window å¯¹è±¡</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// eg:2</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.x = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(x); <span class=\"comment\">// =&gt; 1</span></span><br><span class=\"line\"><span class=\"comment\">// this æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œå³ DOM ä¸­çš„ window å¯¹è±¡</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨\"><a href=\"#ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨\" class=\"headerlink\" title=\"ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨\"></a>ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> user = &#123;</span><br><span class=\"line\">    count: <span class=\"number\">1</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">    getCount: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.count;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(user.getCount());<span class=\"comment\">// 1</span></span><br><span class=\"line\"><span class=\"comment\">// this æŒ‡å‘è°ƒç”¨ getCount æ–¹æ³•çš„å¯¹è±¡ user</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"ä½œä¸ºæ„é€ å‡½æ•°çš„è°ƒç”¨\"><a href=\"#ä½œä¸ºæ„é€ å‡½æ•°çš„è°ƒç”¨\" class=\"headerlink\" title=\"ä½œä¸ºæ„é€ å‡½æ•°çš„è°ƒç”¨\"></a>ä½œä¸ºæ„é€ å‡½æ•°çš„è°ƒç”¨</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.x = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"keyword\">new</span> fun();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.x); <span class=\"comment\">// =&gt; 1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(x); <span class=\"comment\">// =&gt; 2</span></span><br><span class=\"line\"><span class=\"comment\">//this å°±æŒ‡å‘æ„é€ å™¨åˆ›å»ºçš„æ–°å¯¹è±¡ obj</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"apply-call-è°ƒç”¨\"><a href=\"#apply-call-è°ƒç”¨\" class=\"headerlink\" title=\"apply/call è°ƒç”¨\"></a>apply/call è°ƒç”¨</h4><p><code>apply()</code> æ˜¯å‡½æ•°å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ”¹å˜å‡½æ•°çš„è°ƒç”¨å¯¹è±¡ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°å°±è¡¨ç¤ºæ”¹å˜åçš„è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„å¯¹è±¡ï¼Œæ— å‚æ•°æ—¶ä¼ å…¥ window å¯¹è±¡ã€‚å› æ­¤ï¼Œ<code>this</code> æŒ‡çš„å°±æ˜¯è¿™ç¬¬ä¸€ä¸ªå‚æ•°ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.x);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;&#125;;</span><br><span class=\"line\">obj.x = <span class=\"number\">1</span>;</span><br><span class=\"line\">obj.m = fun;</span><br><span class=\"line\"></span><br><span class=\"line\">obj.m(); <span class=\"comment\">//           =&gt; 1  this æŒ‡å‘è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡å³ï¼šobj</span></span><br><span class=\"line\">obj.m.apply();  <span class=\"comment\">//    =&gt; 0  this æŒ‡å‘çš„æ˜¯å…¨å±€å¯¹è±¡å³ï¼šwindow</span></span><br><span class=\"line\">obj.m.apply(obj);<span class=\"comment\">//   =&gt; 1  this æŒ‡å‘çš„ç¬¬ä¸€ä¸ªå‚æ•°å³ï¼šobj</span></span><br><span class=\"line\">obj.m.call(obj);<span class=\"comment\">//    =&gt; 1  this æŒ‡å‘çš„ç¬¬ä¸€ä¸ªå‚æ•°å³ï¼šobj</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><ol>\n<li>çº¯ç²¹çš„å‡½æ•°è°ƒç”¨: <code>this</code> å°±ä»£è¡¨å…¨å±€å¯¹è±¡ Globalï¼ˆæµè§ˆå™¨ä¸‹å°±æ˜¯ windowï¼‰</li>\n<li>ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨: <code>this</code> æŒ‡å‘è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡</li>\n<li>ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ï¼š<code>this</code> å°±æŒ‡å‘æ„é€ å™¨åˆ›å»ºçš„æ–°å¯¹è±¡</li>\n<li><code>apply</code>, <code>call</code> è°ƒç”¨ï¼š<code>this</code> æŒ‡å‘å°±æ˜¯è¿™äº›å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°</li>\n</ol>\n<p>ä¸‹ä¸€ç¯‡æ–‡ç« æ€»ç»“ä¸€ä¸‹ï¼š<code>apply</code>ã€<code>call</code>ã€<code>bind</code> çš„ç”¨æ³• :P</p>\n","site":{"data":{}},"excerpt":"<p><code>this</code> æ˜¯ Javascript è¯­è¨€çš„ä¸€ä¸ªå…³é”®å­—ã€‚å®ƒä»£è¡¨å‡½æ•°è¿è¡Œæ—¶ï¼Œè‡ªåŠ¨ç”Ÿæˆçš„ä¸€ä¸ªå†…éƒ¨å¯¹è±¡ï¼Œåªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ã€‚éšç€å‡½æ•°ä½¿ç”¨åœºåˆçš„ä¸åŒï¼Œ<code>this</code> çš„å€¼ä¼šå‘ç”Ÿå˜åŒ–ã€‚ä½†æ˜¯æœ‰ä¸€ä¸ªæ€»çš„åŸåˆ™ï¼Œé‚£å°±æ˜¯ <code>this</code> æŒ‡çš„æ˜¯ï¼Œè°ƒç”¨å‡½æ•°çš„é‚£ä¸ªå¯¹è±¡ã€‚</p>","more":"<h3 id=\"å››ç§æƒ…å†µ\"><a href=\"#å››ç§æƒ…å†µ\" class=\"headerlink\" title=\"å››ç§æƒ…å†µ\"></a>å››ç§æƒ…å†µ</h3><h4 id=\"çº¯ç²¹çš„å‡½æ•°è°ƒç”¨\"><a href=\"#çº¯ç²¹çš„å‡½æ•°è°ƒç”¨\" class=\"headerlink\" title=\"çº¯ç²¹çš„å‡½æ•°è°ƒç”¨\"></a>çº¯ç²¹çš„å‡½æ•°è°ƒç”¨</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// eg:1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>);<span class=\"comment\">// =&gt; window å¯¹è±¡</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// eg:2</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.x = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(x); <span class=\"comment\">// =&gt; 1</span></span><br><span class=\"line\"><span class=\"comment\">// this æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œå³ DOM ä¸­çš„ window å¯¹è±¡</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨\"><a href=\"#ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨\" class=\"headerlink\" title=\"ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨\"></a>ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> user = &#123;</span><br><span class=\"line\">    count: <span class=\"number\">1</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">    getCount: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.count;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(user.getCount());<span class=\"comment\">// 1</span></span><br><span class=\"line\"><span class=\"comment\">// this æŒ‡å‘è°ƒç”¨ getCount æ–¹æ³•çš„å¯¹è±¡ user</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"ä½œä¸ºæ„é€ å‡½æ•°çš„è°ƒç”¨\"><a href=\"#ä½œä¸ºæ„é€ å‡½æ•°çš„è°ƒç”¨\" class=\"headerlink\" title=\"ä½œä¸ºæ„é€ å‡½æ•°çš„è°ƒç”¨\"></a>ä½œä¸ºæ„é€ å‡½æ•°çš„è°ƒç”¨</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.x = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = <span class=\"keyword\">new</span> fun();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.x); <span class=\"comment\">// =&gt; 1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(x); <span class=\"comment\">// =&gt; 2</span></span><br><span class=\"line\"><span class=\"comment\">//this å°±æŒ‡å‘æ„é€ å™¨åˆ›å»ºçš„æ–°å¯¹è±¡ obj</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"apply-call-è°ƒç”¨\"><a href=\"#apply-call-è°ƒç”¨\" class=\"headerlink\" title=\"apply/call è°ƒç”¨\"></a>apply/call è°ƒç”¨</h4><p><code>apply()</code> æ˜¯å‡½æ•°å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ”¹å˜å‡½æ•°çš„è°ƒç”¨å¯¹è±¡ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°å°±è¡¨ç¤ºæ”¹å˜åçš„è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„å¯¹è±¡ï¼Œæ— å‚æ•°æ—¶ä¼ å…¥ window å¯¹è±¡ã€‚å› æ­¤ï¼Œ<code>this</code> æŒ‡çš„å°±æ˜¯è¿™ç¬¬ä¸€ä¸ªå‚æ•°ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.x);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;&#125;;</span><br><span class=\"line\">obj.x = <span class=\"number\">1</span>;</span><br><span class=\"line\">obj.m = fun;</span><br><span class=\"line\"></span><br><span class=\"line\">obj.m(); <span class=\"comment\">//           =&gt; 1  this æŒ‡å‘è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡å³ï¼šobj</span></span><br><span class=\"line\">obj.m.apply();  <span class=\"comment\">//    =&gt; 0  this æŒ‡å‘çš„æ˜¯å…¨å±€å¯¹è±¡å³ï¼šwindow</span></span><br><span class=\"line\">obj.m.apply(obj);<span class=\"comment\">//   =&gt; 1  this æŒ‡å‘çš„ç¬¬ä¸€ä¸ªå‚æ•°å³ï¼šobj</span></span><br><span class=\"line\">obj.m.call(obj);<span class=\"comment\">//    =&gt; 1  this æŒ‡å‘çš„ç¬¬ä¸€ä¸ªå‚æ•°å³ï¼šobj</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><ol>\n<li>çº¯ç²¹çš„å‡½æ•°è°ƒç”¨: <code>this</code> å°±ä»£è¡¨å…¨å±€å¯¹è±¡ Globalï¼ˆæµè§ˆå™¨ä¸‹å°±æ˜¯ windowï¼‰</li>\n<li>ä½œä¸ºå¯¹è±¡æ–¹æ³•çš„è°ƒç”¨: <code>this</code> æŒ‡å‘è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡</li>\n<li>ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ï¼š<code>this</code> å°±æŒ‡å‘æ„é€ å™¨åˆ›å»ºçš„æ–°å¯¹è±¡</li>\n<li><code>apply</code>, <code>call</code> è°ƒç”¨ï¼š<code>this</code> æŒ‡å‘å°±æ˜¯è¿™äº›å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°</li>\n</ol>\n<p>ä¸‹ä¸€ç¯‡æ–‡ç« æ€»ç»“ä¸€ä¸‹ï¼š<code>apply</code>ã€<code>call</code>ã€<code>bind</code> çš„ç”¨æ³• :P</p>"},{"title":"Mongodb å­¦ä¹ ç¬”è®° -- å¢åˆ æ”¹æŸ¥","date":"2016-01-05T13:24:40.000Z","comments":0,"_content":"\nè®°å½• Mongodb çš„å­¦ä¹ ä¹‹æ—…ï¼Œä»ç¯å¢ƒé…ç½®ï¼Œåˆ°åŸºç¡€å‘½ä»¤è¡Œä½¿ç”¨ï¼Œç®—æ˜¯ä¸€ä¸ªç®€å•çš„å…¥é—¨æ•™ç¨‹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å­¦ä¹ æ€»ç»“ï¼Œè¿˜æœ‰æŠŠè¸©åˆ°çš„å‘éƒ½è®°å½•ä¸‹æ¥ï¼Œä»¥åé‡åˆ°åŒæ ·çš„é—®é¢˜ä¸è‡³äºåœ¨åŒä¸€ä¸ªåœ°æ–¹ç»§ç»­è¸©å‘ã€‚\n<!-- more -->\n### Mongodb ä»‹ç»\n> MongoDB æ˜¯ä¸€ç§æ–‡æ¡£å¯¼å‘***æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ***ï¼Œç”± C++æ’°å†™è€Œæˆï¼Œæ—¨åœ¨ä¸º WEB åº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚2007 å¹´ 10 æœˆï¼ŒMongoDB ç”± 10gen å›¢é˜Ÿæ‰€å‘å±•ã€‚2009 å¹´ 2 æœˆé¦–åº¦æ¨å‡ºã€‚ --- ***ç»´åŸºç™¾ç§‘***\n\nMongoDB æ˜¯ä¸€ä¸ªä»‹äºå…³ç³»æ•°æ®åº“å’Œéå…³ç³»æ•°æ®åº“ä¹‹é—´çš„äº§å“ï¼Œæ˜¯éå…³ç³»æ•°æ®åº“å½“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œï¼Œæœ€åƒå…³ç³»æ•°æ®åº“çš„ã€‚å¬ç€å¾ˆé¥¶ï¼Œå…¶å®å°±æ˜¯éå…³ç³»æ•°æ®åº“ã€‚é‚£ä»€ä¹ˆåˆæ˜¯ ***å…³ç³»å‹æ•°æ®åº“*** å‘¢ï¼Ÿå…³ç³»å‹æ•°æ®åº“ä»¥è¡Œå’Œåˆ—çš„å½¢å¼å­˜å‚¨æ•°æ®ï¼Œè¿™ä¸€ç³»åˆ—çš„è¡Œå’Œåˆ—è¢«ç§°ä¸ºè¡¨ï¼Œä¸€ç»„è¡¨ç»„æˆäº†æ•°æ®åº“ã€‚è¡¨ä¸è¡¨ä¹‹é—´çš„æ•°æ®è®°å½•æœ‰å…³ç³»ã€‚\n\n### Mongodb å®‰è£…\næœ¬äººçš„æ“ä½œç³»ç»Ÿæ˜¯ï¼šMacOSï¼Œä¸”å·²ç»å®‰è£…äº† [brew](http://brew.sh/index_zh-cn.html) ï¼Œæ‰€ä»¥å›¾çœäº‹ï¼Œæˆ‘å°±ä½¿ç”¨ brew ä¸€é”®å®‰è£…äº†ã€‚æ²¡ç”¨è¿‡ brew çš„åŒå­¦å¯ä»¥å»[è¿™é‡Œçœ‹çœ‹](http://www.cnblogs.com/TankXiao/p/3247113.html)ï¼Œç”¨èµ·æ¥è¿˜æ˜¯æŒºæ–¹ä¾¿çš„ã€‚\n\n```bash\nbrew install mongodb\n```\nå®‰è£…é€Ÿåº¦å–å†³äºä½ çš„ç½‘ç»œæƒ…å†µï¼Œè¿™é‡Œç¨ç­‰ç‰‡åˆ»ã€‚brew é»˜è®¤çš„å®‰è£…ä½ç½®åœ¨ `/usr/local/Cellar/` ä¸€ä¼šçš„åŠŸå¤«ï¼Œæˆ‘ä»¬å°±èƒ½åœ¨è¿™é‡Œçœ‹åˆ°ï¼ŒMongodb ä¹–ä¹–çš„èººåœ¨è¿™äº†ã€‚å› ä¸º Mongodb ä¼šé»˜è®¤è¯»å– `/data/db` ç›®å½•ä¸‹çš„æ•°æ®åº“ï¼Œæ‰€ä»¥æ–¹ä¾¿çœäº‹ï¼Œæˆ‘ä»¬æŠŠé»˜è®¤çš„æ•°æ®åº“å°±åˆ›å»ºåœ¨è¿™ä¸ªä½ç½®ï¼Œå¹¶ä¸”ç»™ `/data` æ‰§è¡Œæƒé™ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ã€‚\n\n```bash\nsudo mkdir -p /data/db         # sudo è¡¨ç¤ºä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œï¼Œ-p è¡¨ç¤ºåˆ›å»ºå¤šå±‚ç›®å½•\nsudo chown -R  UserName /data  # UserName è¡¨ç¤ºä½ å½“å‰çš„ç³»ç»Ÿç”¨æˆ·å\n```\nå®‰è£…æˆåŠŸåï¼Œå°±å¯ä»¥åœ¨ Mongodb çš„å®‰è£…ç›®å½•ä¸‹ æ‰¾åˆ° `bin` ç›®å½•äº†ï¼Œè¿™é‡Œé¢æ”¾ç€æ‰€æœ‰éœ€è¦ç”¨åˆ°çš„å‘½ä»¤ã€‚\n```bash\ncd /usr/local/Cellar/mongodb/3.4.0/bin\n./mongod   # æ‰§è¡Œ Mongodb è¿›ç¨‹åï¼Œæµè§ˆå™¨æ‰“å¼€ http://127.0.0.1:27017/\n```\næµè§ˆå™¨æ˜¾ç¤ºä¸‹é¢çš„å†…å®¹ï¼Œå°±è¡¨ç¤ºå®‰è£…æˆåŠŸå•¦ã€‚\n```text\nIt looks like you are trying to access MongoDB over HTTP on the native driver port.\n```\næ¥ä¸‹æ¥æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ŒéªŒè¯æˆ‘ä»¬ç¡®å®å®‰è£…æˆåŠŸäº†ã€‚åœ¨ Mongodb çš„æ§åˆ¶å°ä¸­ï¼Œå¯ä»¥æ‰§è¡Œå¾ˆå¤šå‘½ä»¤æ¥æ“ä½œæ•°æ®åº“ã€‚\n```bash\ncd /usr/local/Cellar/mongodb/3.4.0/bin\n./mongo\n\n# è¿›å…¥ MongoDB shell åï¼Œå…‰æ ‡ä¼šå˜æˆä¸‹é¢è¿‡çš„çŠ¶æ€ï¼Œæ‰§è¡Œ show dbs åï¼Œæ˜¾ç¤ºå¦‚ä¸‹åˆ™å¤§åŠŸå‘Šæˆï¼\n> show dbs\nadmin  0.000GB\nlocal  0.000GB\n```\næ¥ä¸‹æ¥ï¼Œä¸ºäº†æ–¹ä¾¿ä¸‹æ¬¡æ‰§è¡Œ Mongodb ï¼Œæˆ‘ä»¬æŠŠ `bin` ç›®å½•æ”¾åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œè¿™æ ·ä¸‹æ¬¡ç›´æ¥åœ¨ç»ˆç«¯è¾“å…¥ `mongod` å³å¯å¯ç”¨æœåŠ¡ï¼Œè¾“å…¥å‘½ä»¤ `mongo` å³å¯è¿›å…¥ shell æ§åˆ¶å°ã€‚\n\n```bash\n# æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œè¯­æ³•ï¼šecho \"export PATH=xxxxxx:$PATH\" >> ~/.bash_profile\necho 'export PATH=/usr/local/Cellar/mongodb/3.4.0/bin:$PATH'>>~/.bash_profile\n```\n### Mongodb ä½¿ç”¨\nä½¿ç”¨ä¹‹å‰ï¼Œåœ¨æ˜ç™½å‡ ä¸ªæ¦‚å¿µï¼Œç›¸æ¯”å…³ç³»å‹æ•°æ®åº“ï¼Œéå…³ç³»æ•°æ®åº“é‡‡ç”¨äº† ***æ•°æ®åº“***ã€***é›†åˆ***ã€***æ–‡æ¡£***ã€çš„æ¦‚å¿µã€‚å…¶å®å¯¹æ¯” SQL æ•°æ®åº“ï¼Œå°±å¾ˆå®¹æ˜“ç†è§£ï¼Œé›†åˆå°±å¥½æ¯”æ˜¯ä¸€å¼ è¡¨ï¼Œæ–‡æ¡£å¥½æ¯”å°±æ˜¯ä¸€æ•´è¡Œæ•°æ®ã€‚åº“çš„æ¦‚å¿µæ˜¯ä¸€è‡´çš„ã€‚å°±è¿™ç‚¹åŒºåˆ«ã€‚åœ¨ç»ˆç«¯è¾“å…¥ `mongo` è¿›å…¥ shell æ§åˆ¶å°ã€‚\n```bash\nmongo\n```\n#### åŸºç¡€å‘½ä»¤\næ–°å¢æ•°æ®\n- æ˜¾ç¤ºæ•°æ®åº“ï¼š`show dbs`\n- ä½¿ç”¨/åˆ›å»ºæ•°æ®åº“ï¼š`use æ•°æ®åº“å`\n- æ˜¾ç¤ºé›†åˆï¼š`show collections`\n- ä¿å­˜æ•°æ®ï¼š`db.collection.save({\"key\":\"value\",\"key2\":\"value2\"})`\n- æ’å…¥æ•°æ®ï¼š`db.collection.insert({\"key\":\"value\",\"key2\":\"value2\"})`\n\n<div class=\"tip\">\nè‹¥æ–°å¢çš„æ•°æ®ä¸»é”®å·²ç»å­˜åœ¨ï¼Œinsert()ä¼šä¸åšæ“ä½œå¹¶æç¤ºé”™è¯¯ï¼Œè€Œsave()åˆ™æ›´æ”¹åŸæ¥çš„å†…å®¹ä¸ºæ–°å†…å®¹ã€‚\n</div>\n\nåˆ é™¤æ•°æ®\n- åˆ é™¤æ‰€æœ‰æ–‡æ¡£ï¼š`db.collection.remove({})`\n- åˆ é™¤æŒ‡å®šæ–‡æ¡£ï¼š`db.collection.remove({\"key\":\"value\"})`\n- åˆ é™¤é›†åˆï¼š`db.collection.drop()` æˆ–è€… `db.runCommand({\"drop\":\"collection\"})`\n- åˆ é™¤æ•°æ®åº“ï¼š`db.runCommand({\"dropDatabase\": 1})` æ³¨æ„ï¼š1 æ²¡æœ‰å¼•å·\n\næŸ¥æ‰¾æ•°æ®\n- æŸ¥æ‰¾æ‰€æœ‰æ•°æ®ï¼š `db.collection.find({})`\n- æŸ¥åˆ°å•æ¡æ•°æ®ï¼š`db.collection.findOne({})`\n- æ¡ä»¶æŸ¥æ‰¾ï¼š`db.collection.find({\"key\":\"value\"})`\n- æ¡ä»¶æŸ¥æ‰¾ key < valueï¼š`db.collection.find({\"key\":{$lt:value}})`\n- æ¡ä»¶æŸ¥æ‰¾ key > valueï¼š`db.collection.find({\"key\":{$gt:value}})`\n- æ¡ä»¶æŸ¥æ‰¾ key >= valueï¼š`db.collection.find({\"key\":{$gte:value}})`\n- èŒƒå›´æŸ¥æ‰¾ï¼š`db.collection.find({\"key\":{$gt:value1,$lt:value2Â }Â })`\n- æ¨¡è¿ç®—æŸ¥æ‰¾ï¼š`db.collection.find({\"key\":{$mod:[10,1]}})`\n- èŒƒå›´åœ¨æŸ¥æ‰¾ï¼š`db.collection.find({\"key\":{$in:[1,2,3]}})`\n- èŒƒå›´ä¸åœ¨åœ¨æŸ¥æ‰¾ï¼š`db.collection.find({\"key\":{$nin:[1,2,3]}})`\n- æ•°ç»„é•¿åº¦æŸ¥æ‰¾ï¼š`db.collection.find({\"key\":{$size:1}})` key å¿…é¡»æ˜¯æ•°ç»„\n- å­—æ®µå­˜åœ¨æŸ¥æ‰¾ï¼š`db.collection.find({\"key\":{$exists:true|false}})`\n- å¤šæ¡ä»¶æŸ¥æ‰¾ï¼š`db.collection.find({$or:[{a:1},{b:2}]})`\n- å†…åµŒå¯¹è±¡ä¸­çš„å€¼æŸ¥æ‰¾ï¼š`db.collection.find({\"key.subkey\":value})`\n- æ’åºï¼š`db.collection.find({}).sort({\"key1\":1,\"key2\":-1})` 1 å‡åº -1 é™åº\n- å¯¹å­—æ®µå»ºç«‹ç´¢å¼•ï¼š`db.collection.find({})ensureIndex({\"key\":1})` 1 å‡åº -1 é™åº\n- èŒƒå›´æ§åˆ¶æŸ¥æ‰¾ï¼š`db.collection.find().skip(5).limit(5)` è·³è¿‡ 5 æ¡ï¼Œè¯»å– 5 æ¡\n- æŸ¥è¯¢ç»“æœé›†ç»Ÿè®¡ï¼š`db.collection.find().count()`\n- æ¨¡ç³ŠæŸ¥æ‰¾ï¼š`db.collection.find({\"key\":/ab/})` æ­£åˆ™\n\n\næ›´æ”¹æ•°æ®\n- `db.collection.update({\"targetKey\":\"targetValue\"},{\"newKey\":\"newVlue\"})`\n\n#### GUI å·¥å…·\n![](http://ww1.sinaimg.cn/large/6057861cgw1fbfwwdbu8qj20zq0dbqah.jpg)\n***Robomongo*** å¯è§†åŒ– Mongodb æ•°æ®åº“ç®¡ç†å·¥å…· ï¼Œç‚¹å‡»[è¿™é‡Œ](https://robomongo.org/download)ä¸‹è½½ï¼Œå®˜æ–¹ç½‘ç«™ï¼šhttps://robomongo.org/ ã€‚\n\n###  Mongoose ä»‹ç»\n[Mongoose](http://mongoosejs.com/) ç®€è€Œè¨€ä¹‹å°±æ˜¯åœ¨ Node ç¯å¢ƒä¸­æ“ä½œ MongoDB æ•°æ®åº“çš„ä¸€ç§å¯¹è±¡æ¨¡å‹å·¥å…·ï¼ŒMongoose å°†æ•°æ®åº“ä¸­çš„æ•°æ®è½¬æ¢ä¸º JavaScript å¯¹è±¡ä¾›å¼€å‘äººå‘˜ä½¿ç”¨ã€‚\n\n#### é…ç½®\nå®‰è£… Mongoose\n```bash\nnpm install mongoose --save\n```\nå¼•å…¥åˆ°é¡¹ç›®æ–‡ä»¶ä¸­å¹¶åˆ›å»ºé“¾æ¥\n```js\n// app.js\nvar mongoose = require('mongoose');\nmongoose.connect('mongodb://localhost/my_database');\n```\n\n#### æ–°å¢æ•°æ®\n```js\n// å¼•å…¥æ¨¡å—\nvar mongoose = require('mongoose');\n// è¿æ¥æ•°æ®åº“\nvar db = mongoose.createConnection('mongodb://127.0.0.1:27017/test');\n// è®¾ç½®æ•°æ®ç±»å‹\nvar monSchema = new mongooose.Schema({\n    name:{type:String,default:\"username\"},\n    ageï¼š{type:Number},\n    sex:{type:String}\n});\n// é€‰æ‹©é›†åˆ\nvar monModel = db.model('user',monSchema);\n// æ•°æ®é›†\nvar content = {name:\"Nick\",age:23,sex:'ç”·'};\n// å®ä¾‹åŒ–å¯¹è±¡å¹¶æ’å…¥æ•°æ®\nvar monInsert = new monModel(content);\nmonInsert.save(function(err){\n  if(err){\n    console.log(err);\n  }else{\n    console.log('æˆåŠŸæ’å…¥æ•°æ®');\n  }\n  db.close();\n});\n```\n#### åˆ é™¤æ•°æ®\n```js\n// å¼•å…¥æ¨¡å—\nvar mongoose = require('mongoose');\n// è¿æ¥æ•°æ®åº“\nvar db = mongoose.createConnection('mongodb://127.0.0.1:27017/test');\n// cosole.log(db);\n// è®¾ç½®æ•°æ®ç±»å‹\nvar monSchema = new mongooose.Schema({\n    name:{type:String,default:\"name\"},\n    ageï¼š{type:Number},\n    sex:{type:String}\n});\n// é€‰æ‹©é›†åˆ\nvar monModel = db.model('user',monSchema);\n// åŸæ•°æ®å­—æ®µå€¼\nvar oldValue  = {name:\"Nick\"};\n// å•æ¡ä»¶æ›´æ–°\nvar newData1 = {$set:{name:\"å†…å®¹\"}};\n// å¤šæ¡ä»¶æ›´æ–°\nvar newData2 = {$set:{name:\"å†…å®¹\",age:2}};\nmonModel.update(oldValue,newData,function(err,result){\n  if(err){\n    console.log(err);\n  }else{\n    console.log(\"update\");\n  }\n  db.close();\n});\n```\n\n#### æŸ¥è¯¢æ•°æ®\n```js\n// å¼•å…¥æ¨¡å—\nvar mongoose = require('mongoose');\n// è¿æ¥æ•°æ®åº“\nvar db = mongoose.createConnection('mongodb://127.0.0.1:27017/test');\n// cosole.log(db);\n// è®¾ç½®æ•°æ®ç±»å‹\nvar monSchema = new mongooose.Schema({\n    name:{type:String,default:\"name\"},\n    ageï¼š{type:Number},\n    sex:{type:String}\n});\n// é€‰æ‹©é›†åˆ\nvar monModel = db.model('user',monSchema);\nvar content = {name:\"å§“å2\"};\nvar field = {name:1,age:1,sex:1};\nmonModel.find(content,field,function(err,result){\n  if(err){\n    console.log(err);\n  }else{\n    console.log(result);\n  }\n  db.close();\n});\n```\n\n\n#### ä¿®æ”¹æ•°æ®\n```js\n// å¼•å…¥æ¨¡å—\nvar mongoose = require('mongoose');\n// è¿æ¥æ•°æ®åº“\nvar db = mongoose.createConnection('mongodb://127.0.0.1:27017/test');\n// cosole.log(db);\n// è®¾ç½®æ•°æ®ç±»å‹\nvar monSchema = new mongooose.Schema({\n    name:{type:String,default:\"name\"},\n    ageï¼š{type:Number},\n    sex:{type:String}\n});\n// é€‰æ‹©é›†åˆ\nvar monModel = db.model('user',monSchema);\n// åŸæ•°æ®å­—æ®µå€¼\nvar oldValue  = {name:\"Nick\"};\n// å•æ¡ä»¶æ›´æ–°\nvar newData1 = {$set:{name:\"å†…å®¹\"}};\n// å¤šæ¡ä»¶æ›´æ–°\nvar newData2 = {$set:{name:\"å†…å®¹\",age:2}};\nmonModel.update(oldValue,newData,function(err,result){\n  if(err){\n    console.log(err);\n  }else{\n    console.log(\"update\");\n  }\n  db.close();\n});\n```\n","source":"_posts/Mongodb-å­¦ä¹ ç¬”è®°----å¢åˆ æ”¹æŸ¥.md","raw":"---\ntitle: 'Mongodb å­¦ä¹ ç¬”è®° -- å¢åˆ æ”¹æŸ¥'\ndate: 2016-01-05 21:24:40\ntags:\ncomments: false\n---\n\nè®°å½• Mongodb çš„å­¦ä¹ ä¹‹æ—…ï¼Œä»ç¯å¢ƒé…ç½®ï¼Œåˆ°åŸºç¡€å‘½ä»¤è¡Œä½¿ç”¨ï¼Œç®—æ˜¯ä¸€ä¸ªç®€å•çš„å…¥é—¨æ•™ç¨‹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å­¦ä¹ æ€»ç»“ï¼Œè¿˜æœ‰æŠŠè¸©åˆ°çš„å‘éƒ½è®°å½•ä¸‹æ¥ï¼Œä»¥åé‡åˆ°åŒæ ·çš„é—®é¢˜ä¸è‡³äºåœ¨åŒä¸€ä¸ªåœ°æ–¹ç»§ç»­è¸©å‘ã€‚\n<!-- more -->\n### Mongodb ä»‹ç»\n> MongoDB æ˜¯ä¸€ç§æ–‡æ¡£å¯¼å‘***æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ***ï¼Œç”± C++æ’°å†™è€Œæˆï¼Œæ—¨åœ¨ä¸º WEB åº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚2007 å¹´ 10 æœˆï¼ŒMongoDB ç”± 10gen å›¢é˜Ÿæ‰€å‘å±•ã€‚2009 å¹´ 2 æœˆé¦–åº¦æ¨å‡ºã€‚ --- ***ç»´åŸºç™¾ç§‘***\n\nMongoDB æ˜¯ä¸€ä¸ªä»‹äºå…³ç³»æ•°æ®åº“å’Œéå…³ç³»æ•°æ®åº“ä¹‹é—´çš„äº§å“ï¼Œæ˜¯éå…³ç³»æ•°æ®åº“å½“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œï¼Œæœ€åƒå…³ç³»æ•°æ®åº“çš„ã€‚å¬ç€å¾ˆé¥¶ï¼Œå…¶å®å°±æ˜¯éå…³ç³»æ•°æ®åº“ã€‚é‚£ä»€ä¹ˆåˆæ˜¯ ***å…³ç³»å‹æ•°æ®åº“*** å‘¢ï¼Ÿå…³ç³»å‹æ•°æ®åº“ä»¥è¡Œå’Œåˆ—çš„å½¢å¼å­˜å‚¨æ•°æ®ï¼Œè¿™ä¸€ç³»åˆ—çš„è¡Œå’Œåˆ—è¢«ç§°ä¸ºè¡¨ï¼Œä¸€ç»„è¡¨ç»„æˆäº†æ•°æ®åº“ã€‚è¡¨ä¸è¡¨ä¹‹é—´çš„æ•°æ®è®°å½•æœ‰å…³ç³»ã€‚\n\n### Mongodb å®‰è£…\næœ¬äººçš„æ“ä½œç³»ç»Ÿæ˜¯ï¼šMacOSï¼Œä¸”å·²ç»å®‰è£…äº† [brew](http://brew.sh/index_zh-cn.html) ï¼Œæ‰€ä»¥å›¾çœäº‹ï¼Œæˆ‘å°±ä½¿ç”¨ brew ä¸€é”®å®‰è£…äº†ã€‚æ²¡ç”¨è¿‡ brew çš„åŒå­¦å¯ä»¥å»[è¿™é‡Œçœ‹çœ‹](http://www.cnblogs.com/TankXiao/p/3247113.html)ï¼Œç”¨èµ·æ¥è¿˜æ˜¯æŒºæ–¹ä¾¿çš„ã€‚\n\n```bash\nbrew install mongodb\n```\nå®‰è£…é€Ÿåº¦å–å†³äºä½ çš„ç½‘ç»œæƒ…å†µï¼Œè¿™é‡Œç¨ç­‰ç‰‡åˆ»ã€‚brew é»˜è®¤çš„å®‰è£…ä½ç½®åœ¨ `/usr/local/Cellar/` ä¸€ä¼šçš„åŠŸå¤«ï¼Œæˆ‘ä»¬å°±èƒ½åœ¨è¿™é‡Œçœ‹åˆ°ï¼ŒMongodb ä¹–ä¹–çš„èººåœ¨è¿™äº†ã€‚å› ä¸º Mongodb ä¼šé»˜è®¤è¯»å– `/data/db` ç›®å½•ä¸‹çš„æ•°æ®åº“ï¼Œæ‰€ä»¥æ–¹ä¾¿çœäº‹ï¼Œæˆ‘ä»¬æŠŠé»˜è®¤çš„æ•°æ®åº“å°±åˆ›å»ºåœ¨è¿™ä¸ªä½ç½®ï¼Œå¹¶ä¸”ç»™ `/data` æ‰§è¡Œæƒé™ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ã€‚\n\n```bash\nsudo mkdir -p /data/db         # sudo è¡¨ç¤ºä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œï¼Œ-p è¡¨ç¤ºåˆ›å»ºå¤šå±‚ç›®å½•\nsudo chown -R  UserName /data  # UserName è¡¨ç¤ºä½ å½“å‰çš„ç³»ç»Ÿç”¨æˆ·å\n```\nå®‰è£…æˆåŠŸåï¼Œå°±å¯ä»¥åœ¨ Mongodb çš„å®‰è£…ç›®å½•ä¸‹ æ‰¾åˆ° `bin` ç›®å½•äº†ï¼Œè¿™é‡Œé¢æ”¾ç€æ‰€æœ‰éœ€è¦ç”¨åˆ°çš„å‘½ä»¤ã€‚\n```bash\ncd /usr/local/Cellar/mongodb/3.4.0/bin\n./mongod   # æ‰§è¡Œ Mongodb è¿›ç¨‹åï¼Œæµè§ˆå™¨æ‰“å¼€ http://127.0.0.1:27017/\n```\næµè§ˆå™¨æ˜¾ç¤ºä¸‹é¢çš„å†…å®¹ï¼Œå°±è¡¨ç¤ºå®‰è£…æˆåŠŸå•¦ã€‚\n```text\nIt looks like you are trying to access MongoDB over HTTP on the native driver port.\n```\næ¥ä¸‹æ¥æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ŒéªŒè¯æˆ‘ä»¬ç¡®å®å®‰è£…æˆåŠŸäº†ã€‚åœ¨ Mongodb çš„æ§åˆ¶å°ä¸­ï¼Œå¯ä»¥æ‰§è¡Œå¾ˆå¤šå‘½ä»¤æ¥æ“ä½œæ•°æ®åº“ã€‚\n```bash\ncd /usr/local/Cellar/mongodb/3.4.0/bin\n./mongo\n\n# è¿›å…¥ MongoDB shell åï¼Œå…‰æ ‡ä¼šå˜æˆä¸‹é¢è¿‡çš„çŠ¶æ€ï¼Œæ‰§è¡Œ show dbs åï¼Œæ˜¾ç¤ºå¦‚ä¸‹åˆ™å¤§åŠŸå‘Šæˆï¼\n> show dbs\nadmin  0.000GB\nlocal  0.000GB\n```\næ¥ä¸‹æ¥ï¼Œä¸ºäº†æ–¹ä¾¿ä¸‹æ¬¡æ‰§è¡Œ Mongodb ï¼Œæˆ‘ä»¬æŠŠ `bin` ç›®å½•æ”¾åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œè¿™æ ·ä¸‹æ¬¡ç›´æ¥åœ¨ç»ˆç«¯è¾“å…¥ `mongod` å³å¯å¯ç”¨æœåŠ¡ï¼Œè¾“å…¥å‘½ä»¤ `mongo` å³å¯è¿›å…¥ shell æ§åˆ¶å°ã€‚\n\n```bash\n# æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œè¯­æ³•ï¼šecho \"export PATH=xxxxxx:$PATH\" >> ~/.bash_profile\necho 'export PATH=/usr/local/Cellar/mongodb/3.4.0/bin:$PATH'>>~/.bash_profile\n```\n### Mongodb ä½¿ç”¨\nä½¿ç”¨ä¹‹å‰ï¼Œåœ¨æ˜ç™½å‡ ä¸ªæ¦‚å¿µï¼Œç›¸æ¯”å…³ç³»å‹æ•°æ®åº“ï¼Œéå…³ç³»æ•°æ®åº“é‡‡ç”¨äº† ***æ•°æ®åº“***ã€***é›†åˆ***ã€***æ–‡æ¡£***ã€çš„æ¦‚å¿µã€‚å…¶å®å¯¹æ¯” SQL æ•°æ®åº“ï¼Œå°±å¾ˆå®¹æ˜“ç†è§£ï¼Œé›†åˆå°±å¥½æ¯”æ˜¯ä¸€å¼ è¡¨ï¼Œæ–‡æ¡£å¥½æ¯”å°±æ˜¯ä¸€æ•´è¡Œæ•°æ®ã€‚åº“çš„æ¦‚å¿µæ˜¯ä¸€è‡´çš„ã€‚å°±è¿™ç‚¹åŒºåˆ«ã€‚åœ¨ç»ˆç«¯è¾“å…¥ `mongo` è¿›å…¥ shell æ§åˆ¶å°ã€‚\n```bash\nmongo\n```\n#### åŸºç¡€å‘½ä»¤\næ–°å¢æ•°æ®\n- æ˜¾ç¤ºæ•°æ®åº“ï¼š`show dbs`\n- ä½¿ç”¨/åˆ›å»ºæ•°æ®åº“ï¼š`use æ•°æ®åº“å`\n- æ˜¾ç¤ºé›†åˆï¼š`show collections`\n- ä¿å­˜æ•°æ®ï¼š`db.collection.save({\"key\":\"value\",\"key2\":\"value2\"})`\n- æ’å…¥æ•°æ®ï¼š`db.collection.insert({\"key\":\"value\",\"key2\":\"value2\"})`\n\n<div class=\"tip\">\nè‹¥æ–°å¢çš„æ•°æ®ä¸»é”®å·²ç»å­˜åœ¨ï¼Œinsert()ä¼šä¸åšæ“ä½œå¹¶æç¤ºé”™è¯¯ï¼Œè€Œsave()åˆ™æ›´æ”¹åŸæ¥çš„å†…å®¹ä¸ºæ–°å†…å®¹ã€‚\n</div>\n\nåˆ é™¤æ•°æ®\n- åˆ é™¤æ‰€æœ‰æ–‡æ¡£ï¼š`db.collection.remove({})`\n- åˆ é™¤æŒ‡å®šæ–‡æ¡£ï¼š`db.collection.remove({\"key\":\"value\"})`\n- åˆ é™¤é›†åˆï¼š`db.collection.drop()` æˆ–è€… `db.runCommand({\"drop\":\"collection\"})`\n- åˆ é™¤æ•°æ®åº“ï¼š`db.runCommand({\"dropDatabase\": 1})` æ³¨æ„ï¼š1 æ²¡æœ‰å¼•å·\n\næŸ¥æ‰¾æ•°æ®\n- æŸ¥æ‰¾æ‰€æœ‰æ•°æ®ï¼š `db.collection.find({})`\n- æŸ¥åˆ°å•æ¡æ•°æ®ï¼š`db.collection.findOne({})`\n- æ¡ä»¶æŸ¥æ‰¾ï¼š`db.collection.find({\"key\":\"value\"})`\n- æ¡ä»¶æŸ¥æ‰¾ key < valueï¼š`db.collection.find({\"key\":{$lt:value}})`\n- æ¡ä»¶æŸ¥æ‰¾ key > valueï¼š`db.collection.find({\"key\":{$gt:value}})`\n- æ¡ä»¶æŸ¥æ‰¾ key >= valueï¼š`db.collection.find({\"key\":{$gte:value}})`\n- èŒƒå›´æŸ¥æ‰¾ï¼š`db.collection.find({\"key\":{$gt:value1,$lt:value2Â }Â })`\n- æ¨¡è¿ç®—æŸ¥æ‰¾ï¼š`db.collection.find({\"key\":{$mod:[10,1]}})`\n- èŒƒå›´åœ¨æŸ¥æ‰¾ï¼š`db.collection.find({\"key\":{$in:[1,2,3]}})`\n- èŒƒå›´ä¸åœ¨åœ¨æŸ¥æ‰¾ï¼š`db.collection.find({\"key\":{$nin:[1,2,3]}})`\n- æ•°ç»„é•¿åº¦æŸ¥æ‰¾ï¼š`db.collection.find({\"key\":{$size:1}})` key å¿…é¡»æ˜¯æ•°ç»„\n- å­—æ®µå­˜åœ¨æŸ¥æ‰¾ï¼š`db.collection.find({\"key\":{$exists:true|false}})`\n- å¤šæ¡ä»¶æŸ¥æ‰¾ï¼š`db.collection.find({$or:[{a:1},{b:2}]})`\n- å†…åµŒå¯¹è±¡ä¸­çš„å€¼æŸ¥æ‰¾ï¼š`db.collection.find({\"key.subkey\":value})`\n- æ’åºï¼š`db.collection.find({}).sort({\"key1\":1,\"key2\":-1})` 1 å‡åº -1 é™åº\n- å¯¹å­—æ®µå»ºç«‹ç´¢å¼•ï¼š`db.collection.find({})ensureIndex({\"key\":1})` 1 å‡åº -1 é™åº\n- èŒƒå›´æ§åˆ¶æŸ¥æ‰¾ï¼š`db.collection.find().skip(5).limit(5)` è·³è¿‡ 5 æ¡ï¼Œè¯»å– 5 æ¡\n- æŸ¥è¯¢ç»“æœé›†ç»Ÿè®¡ï¼š`db.collection.find().count()`\n- æ¨¡ç³ŠæŸ¥æ‰¾ï¼š`db.collection.find({\"key\":/ab/})` æ­£åˆ™\n\n\næ›´æ”¹æ•°æ®\n- `db.collection.update({\"targetKey\":\"targetValue\"},{\"newKey\":\"newVlue\"})`\n\n#### GUI å·¥å…·\n![](http://ww1.sinaimg.cn/large/6057861cgw1fbfwwdbu8qj20zq0dbqah.jpg)\n***Robomongo*** å¯è§†åŒ– Mongodb æ•°æ®åº“ç®¡ç†å·¥å…· ï¼Œç‚¹å‡»[è¿™é‡Œ](https://robomongo.org/download)ä¸‹è½½ï¼Œå®˜æ–¹ç½‘ç«™ï¼šhttps://robomongo.org/ ã€‚\n\n###  Mongoose ä»‹ç»\n[Mongoose](http://mongoosejs.com/) ç®€è€Œè¨€ä¹‹å°±æ˜¯åœ¨ Node ç¯å¢ƒä¸­æ“ä½œ MongoDB æ•°æ®åº“çš„ä¸€ç§å¯¹è±¡æ¨¡å‹å·¥å…·ï¼ŒMongoose å°†æ•°æ®åº“ä¸­çš„æ•°æ®è½¬æ¢ä¸º JavaScript å¯¹è±¡ä¾›å¼€å‘äººå‘˜ä½¿ç”¨ã€‚\n\n#### é…ç½®\nå®‰è£… Mongoose\n```bash\nnpm install mongoose --save\n```\nå¼•å…¥åˆ°é¡¹ç›®æ–‡ä»¶ä¸­å¹¶åˆ›å»ºé“¾æ¥\n```js\n// app.js\nvar mongoose = require('mongoose');\nmongoose.connect('mongodb://localhost/my_database');\n```\n\n#### æ–°å¢æ•°æ®\n```js\n// å¼•å…¥æ¨¡å—\nvar mongoose = require('mongoose');\n// è¿æ¥æ•°æ®åº“\nvar db = mongoose.createConnection('mongodb://127.0.0.1:27017/test');\n// è®¾ç½®æ•°æ®ç±»å‹\nvar monSchema = new mongooose.Schema({\n    name:{type:String,default:\"username\"},\n    ageï¼š{type:Number},\n    sex:{type:String}\n});\n// é€‰æ‹©é›†åˆ\nvar monModel = db.model('user',monSchema);\n// æ•°æ®é›†\nvar content = {name:\"Nick\",age:23,sex:'ç”·'};\n// å®ä¾‹åŒ–å¯¹è±¡å¹¶æ’å…¥æ•°æ®\nvar monInsert = new monModel(content);\nmonInsert.save(function(err){\n  if(err){\n    console.log(err);\n  }else{\n    console.log('æˆåŠŸæ’å…¥æ•°æ®');\n  }\n  db.close();\n});\n```\n#### åˆ é™¤æ•°æ®\n```js\n// å¼•å…¥æ¨¡å—\nvar mongoose = require('mongoose');\n// è¿æ¥æ•°æ®åº“\nvar db = mongoose.createConnection('mongodb://127.0.0.1:27017/test');\n// cosole.log(db);\n// è®¾ç½®æ•°æ®ç±»å‹\nvar monSchema = new mongooose.Schema({\n    name:{type:String,default:\"name\"},\n    ageï¼š{type:Number},\n    sex:{type:String}\n});\n// é€‰æ‹©é›†åˆ\nvar monModel = db.model('user',monSchema);\n// åŸæ•°æ®å­—æ®µå€¼\nvar oldValue  = {name:\"Nick\"};\n// å•æ¡ä»¶æ›´æ–°\nvar newData1 = {$set:{name:\"å†…å®¹\"}};\n// å¤šæ¡ä»¶æ›´æ–°\nvar newData2 = {$set:{name:\"å†…å®¹\",age:2}};\nmonModel.update(oldValue,newData,function(err,result){\n  if(err){\n    console.log(err);\n  }else{\n    console.log(\"update\");\n  }\n  db.close();\n});\n```\n\n#### æŸ¥è¯¢æ•°æ®\n```js\n// å¼•å…¥æ¨¡å—\nvar mongoose = require('mongoose');\n// è¿æ¥æ•°æ®åº“\nvar db = mongoose.createConnection('mongodb://127.0.0.1:27017/test');\n// cosole.log(db);\n// è®¾ç½®æ•°æ®ç±»å‹\nvar monSchema = new mongooose.Schema({\n    name:{type:String,default:\"name\"},\n    ageï¼š{type:Number},\n    sex:{type:String}\n});\n// é€‰æ‹©é›†åˆ\nvar monModel = db.model('user',monSchema);\nvar content = {name:\"å§“å2\"};\nvar field = {name:1,age:1,sex:1};\nmonModel.find(content,field,function(err,result){\n  if(err){\n    console.log(err);\n  }else{\n    console.log(result);\n  }\n  db.close();\n});\n```\n\n\n#### ä¿®æ”¹æ•°æ®\n```js\n// å¼•å…¥æ¨¡å—\nvar mongoose = require('mongoose');\n// è¿æ¥æ•°æ®åº“\nvar db = mongoose.createConnection('mongodb://127.0.0.1:27017/test');\n// cosole.log(db);\n// è®¾ç½®æ•°æ®ç±»å‹\nvar monSchema = new mongooose.Schema({\n    name:{type:String,default:\"name\"},\n    ageï¼š{type:Number},\n    sex:{type:String}\n});\n// é€‰æ‹©é›†åˆ\nvar monModel = db.model('user',monSchema);\n// åŸæ•°æ®å­—æ®µå€¼\nvar oldValue  = {name:\"Nick\"};\n// å•æ¡ä»¶æ›´æ–°\nvar newData1 = {$set:{name:\"å†…å®¹\"}};\n// å¤šæ¡ä»¶æ›´æ–°\nvar newData2 = {$set:{name:\"å†…å®¹\",age:2}};\nmonModel.update(oldValue,newData,function(err,result){\n  if(err){\n    console.log(err);\n  }else{\n    console.log(\"update\");\n  }\n  db.close();\n});\n```\n","slug":"Mongodb-å­¦ä¹ ç¬”è®°----å¢åˆ æ”¹æŸ¥","published":1,"updated":"2019-12-07T04:59:33.834Z","layout":"post","photos":[],"link":"","_id":"ck3v60jta0009r9q9d21kz1bp","content":"<p>è®°å½• Mongodb çš„å­¦ä¹ ä¹‹æ—…ï¼Œä»ç¯å¢ƒé…ç½®ï¼Œåˆ°åŸºç¡€å‘½ä»¤è¡Œä½¿ç”¨ï¼Œç®—æ˜¯ä¸€ä¸ªç®€å•çš„å…¥é—¨æ•™ç¨‹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å­¦ä¹ æ€»ç»“ï¼Œè¿˜æœ‰æŠŠè¸©åˆ°çš„å‘éƒ½è®°å½•ä¸‹æ¥ï¼Œä»¥åé‡åˆ°åŒæ ·çš„é—®é¢˜ä¸è‡³äºåœ¨åŒä¸€ä¸ªåœ°æ–¹ç»§ç»­è¸©å‘ã€‚<br><a id=\"more\"></a></p>\n<h3 id=\"Mongodb-ä»‹ç»\"><a href=\"#Mongodb-ä»‹ç»\" class=\"headerlink\" title=\"Mongodb ä»‹ç»\"></a>Mongodb ä»‹ç»</h3><blockquote>\n<p>MongoDB æ˜¯ä¸€ç§æ–‡æ¡£å¯¼å‘<strong><em>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</em></strong>ï¼Œç”± C++æ’°å†™è€Œæˆï¼Œæ—¨åœ¨ä¸º WEB åº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚2007 å¹´ 10 æœˆï¼ŒMongoDB ç”± 10gen å›¢é˜Ÿæ‰€å‘å±•ã€‚2009 å¹´ 2 æœˆé¦–åº¦æ¨å‡ºã€‚ â€” <strong><em>ç»´åŸºç™¾ç§‘</em></strong></p>\n</blockquote>\n<p>MongoDB æ˜¯ä¸€ä¸ªä»‹äºå…³ç³»æ•°æ®åº“å’Œéå…³ç³»æ•°æ®åº“ä¹‹é—´çš„äº§å“ï¼Œæ˜¯éå…³ç³»æ•°æ®åº“å½“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œï¼Œæœ€åƒå…³ç³»æ•°æ®åº“çš„ã€‚å¬ç€å¾ˆé¥¶ï¼Œå…¶å®å°±æ˜¯éå…³ç³»æ•°æ®åº“ã€‚é‚£ä»€ä¹ˆåˆæ˜¯ <strong><em>å…³ç³»å‹æ•°æ®åº“</em></strong> å‘¢ï¼Ÿå…³ç³»å‹æ•°æ®åº“ä»¥è¡Œå’Œåˆ—çš„å½¢å¼å­˜å‚¨æ•°æ®ï¼Œè¿™ä¸€ç³»åˆ—çš„è¡Œå’Œåˆ—è¢«ç§°ä¸ºè¡¨ï¼Œä¸€ç»„è¡¨ç»„æˆäº†æ•°æ®åº“ã€‚è¡¨ä¸è¡¨ä¹‹é—´çš„æ•°æ®è®°å½•æœ‰å…³ç³»ã€‚</p>\n<h3 id=\"Mongodb-å®‰è£…\"><a href=\"#Mongodb-å®‰è£…\" class=\"headerlink\" title=\"Mongodb å®‰è£…\"></a>Mongodb å®‰è£…</h3><p>æœ¬äººçš„æ“ä½œç³»ç»Ÿæ˜¯ï¼šMacOSï¼Œä¸”å·²ç»å®‰è£…äº† <a href=\"http://brew.sh/index_zh-cn.html\" target=\"_blank\" rel=\"noopener\">brew</a> ï¼Œæ‰€ä»¥å›¾çœäº‹ï¼Œæˆ‘å°±ä½¿ç”¨ brew ä¸€é”®å®‰è£…äº†ã€‚æ²¡ç”¨è¿‡ brew çš„åŒå­¦å¯ä»¥å»<a href=\"http://www.cnblogs.com/TankXiao/p/3247113.html\" target=\"_blank\" rel=\"noopener\">è¿™é‡Œçœ‹çœ‹</a>ï¼Œç”¨èµ·æ¥è¿˜æ˜¯æŒºæ–¹ä¾¿çš„ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install mongodb</span><br></pre></td></tr></table></figure>\n<p>å®‰è£…é€Ÿåº¦å–å†³äºä½ çš„ç½‘ç»œæƒ…å†µï¼Œè¿™é‡Œç¨ç­‰ç‰‡åˆ»ã€‚brew é»˜è®¤çš„å®‰è£…ä½ç½®åœ¨ <code>/usr/local/Cellar/</code> ä¸€ä¼šçš„åŠŸå¤«ï¼Œæˆ‘ä»¬å°±èƒ½åœ¨è¿™é‡Œçœ‹åˆ°ï¼ŒMongodb ä¹–ä¹–çš„èººåœ¨è¿™äº†ã€‚å› ä¸º Mongodb ä¼šé»˜è®¤è¯»å– <code>/data/db</code> ç›®å½•ä¸‹çš„æ•°æ®åº“ï¼Œæ‰€ä»¥æ–¹ä¾¿çœäº‹ï¼Œæˆ‘ä»¬æŠŠé»˜è®¤çš„æ•°æ®åº“å°±åˆ›å»ºåœ¨è¿™ä¸ªä½ç½®ï¼Œå¹¶ä¸”ç»™ <code>/data</code> æ‰§è¡Œæƒé™ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir -p /data/db         <span class=\"comment\"># sudo è¡¨ç¤ºä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œï¼Œ-p è¡¨ç¤ºåˆ›å»ºå¤šå±‚ç›®å½•</span></span><br><span class=\"line\">sudo chown -R  UserName /data  <span class=\"comment\"># UserName è¡¨ç¤ºä½ å½“å‰çš„ç³»ç»Ÿç”¨æˆ·å</span></span><br></pre></td></tr></table></figure>\n<p>å®‰è£…æˆåŠŸåï¼Œå°±å¯ä»¥åœ¨ Mongodb çš„å®‰è£…ç›®å½•ä¸‹ æ‰¾åˆ° <code>bin</code> ç›®å½•äº†ï¼Œè¿™é‡Œé¢æ”¾ç€æ‰€æœ‰éœ€è¦ç”¨åˆ°çš„å‘½ä»¤ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/Cellar/mongodb/3.4.0/bin</span><br><span class=\"line\">./mongod   <span class=\"comment\"># æ‰§è¡Œ Mongodb è¿›ç¨‹åï¼Œæµè§ˆå™¨æ‰“å¼€ http://127.0.0.1:27017/</span></span><br></pre></td></tr></table></figure></p>\n<p>æµè§ˆå™¨æ˜¾ç¤ºä¸‹é¢çš„å†…å®¹ï¼Œå°±è¡¨ç¤ºå®‰è£…æˆåŠŸå•¦ã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">It looks like you are trying to access MongoDB over HTTP on the native driver port.</span><br></pre></td></tr></table></figure></p>\n<p>æ¥ä¸‹æ¥æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ŒéªŒè¯æˆ‘ä»¬ç¡®å®å®‰è£…æˆåŠŸäº†ã€‚åœ¨ Mongodb çš„æ§åˆ¶å°ä¸­ï¼Œå¯ä»¥æ‰§è¡Œå¾ˆå¤šå‘½ä»¤æ¥æ“ä½œæ•°æ®åº“ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/Cellar/mongodb/3.4.0/bin</span><br><span class=\"line\">./mongo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è¿›å…¥ MongoDB shell åï¼Œå…‰æ ‡ä¼šå˜æˆä¸‹é¢è¿‡çš„çŠ¶æ€ï¼Œæ‰§è¡Œ show dbs åï¼Œæ˜¾ç¤ºå¦‚ä¸‹åˆ™å¤§åŠŸå‘Šæˆï¼</span></span><br><span class=\"line\">&gt; show dbs</span><br><span class=\"line\">admin  0.000GB</span><br><span class=\"line\"><span class=\"built_in\">local</span>  0.000GB</span><br></pre></td></tr></table></figure></p>\n<p>æ¥ä¸‹æ¥ï¼Œä¸ºäº†æ–¹ä¾¿ä¸‹æ¬¡æ‰§è¡Œ Mongodb ï¼Œæˆ‘ä»¬æŠŠ <code>bin</code> ç›®å½•æ”¾åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œè¿™æ ·ä¸‹æ¬¡ç›´æ¥åœ¨ç»ˆç«¯è¾“å…¥ <code>mongod</code> å³å¯å¯ç”¨æœåŠ¡ï¼Œè¾“å…¥å‘½ä»¤ <code>mongo</code> å³å¯è¿›å…¥ shell æ§åˆ¶å°ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œè¯­æ³•ï¼šecho \"export PATH=xxxxxx:$PATH\" &gt;&gt; ~/.bash_profile</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'export PATH=/usr/local/Cellar/mongodb/3.4.0/bin:$PATH'</span>&gt;&gt;~/.bash_profile</span><br></pre></td></tr></table></figure>\n<h3 id=\"Mongodb-ä½¿ç”¨\"><a href=\"#Mongodb-ä½¿ç”¨\" class=\"headerlink\" title=\"Mongodb ä½¿ç”¨\"></a>Mongodb ä½¿ç”¨</h3><p>ä½¿ç”¨ä¹‹å‰ï¼Œåœ¨æ˜ç™½å‡ ä¸ªæ¦‚å¿µï¼Œç›¸æ¯”å…³ç³»å‹æ•°æ®åº“ï¼Œéå…³ç³»æ•°æ®åº“é‡‡ç”¨äº† <strong><em>æ•°æ®åº“</em></strong>ã€<strong><em>é›†åˆ</em></strong>ã€<strong><em>æ–‡æ¡£</em></strong>ã€çš„æ¦‚å¿µã€‚å…¶å®å¯¹æ¯” SQL æ•°æ®åº“ï¼Œå°±å¾ˆå®¹æ˜“ç†è§£ï¼Œé›†åˆå°±å¥½æ¯”æ˜¯ä¸€å¼ è¡¨ï¼Œæ–‡æ¡£å¥½æ¯”å°±æ˜¯ä¸€æ•´è¡Œæ•°æ®ã€‚åº“çš„æ¦‚å¿µæ˜¯ä¸€è‡´çš„ã€‚å°±è¿™ç‚¹åŒºåˆ«ã€‚åœ¨ç»ˆç«¯è¾“å…¥ <code>mongo</code> è¿›å…¥ shell æ§åˆ¶å°ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mongo</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"åŸºç¡€å‘½ä»¤\"><a href=\"#åŸºç¡€å‘½ä»¤\" class=\"headerlink\" title=\"åŸºç¡€å‘½ä»¤\"></a>åŸºç¡€å‘½ä»¤</h4><p>æ–°å¢æ•°æ®</p>\n<ul>\n<li>æ˜¾ç¤ºæ•°æ®åº“ï¼š<code>show dbs</code></li>\n<li>ä½¿ç”¨/åˆ›å»ºæ•°æ®åº“ï¼š<code>use æ•°æ®åº“å</code></li>\n<li>æ˜¾ç¤ºé›†åˆï¼š<code>show collections</code></li>\n<li>ä¿å­˜æ•°æ®ï¼š<code>db.collection.save({&quot;key&quot;:&quot;value&quot;,&quot;key2&quot;:&quot;value2&quot;})</code></li>\n<li>æ’å…¥æ•°æ®ï¼š<code>db.collection.insert({&quot;key&quot;:&quot;value&quot;,&quot;key2&quot;:&quot;value2&quot;})</code></li>\n</ul>\n<div class=\"tip\"><br>è‹¥æ–°å¢çš„æ•°æ®ä¸»é”®å·²ç»å­˜åœ¨ï¼Œinsert()ä¼šä¸åšæ“ä½œå¹¶æç¤ºé”™è¯¯ï¼Œè€Œsave()åˆ™æ›´æ”¹åŸæ¥çš„å†…å®¹ä¸ºæ–°å†…å®¹ã€‚<br></div>\n\n<p>åˆ é™¤æ•°æ®</p>\n<ul>\n<li>åˆ é™¤æ‰€æœ‰æ–‡æ¡£ï¼š<code>db.collection.remove({})</code></li>\n<li>åˆ é™¤æŒ‡å®šæ–‡æ¡£ï¼š<code>db.collection.remove({&quot;key&quot;:&quot;value&quot;})</code></li>\n<li>åˆ é™¤é›†åˆï¼š<code>db.collection.drop()</code> æˆ–è€… <code>db.runCommand({&quot;drop&quot;:&quot;collection&quot;})</code></li>\n<li>åˆ é™¤æ•°æ®åº“ï¼š<code>db.runCommand({&quot;dropDatabase&quot;: 1})</code> æ³¨æ„ï¼š1 æ²¡æœ‰å¼•å·</li>\n</ul>\n<p>æŸ¥æ‰¾æ•°æ®</p>\n<ul>\n<li>æŸ¥æ‰¾æ‰€æœ‰æ•°æ®ï¼š <code>db.collection.find({})</code></li>\n<li>æŸ¥åˆ°å•æ¡æ•°æ®ï¼š<code>db.collection.findOne({})</code></li>\n<li>æ¡ä»¶æŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key&quot;:&quot;value&quot;})</code></li>\n<li>æ¡ä»¶æŸ¥æ‰¾ key &lt; valueï¼š<code>db.collection.find({&quot;key&quot;:{$lt:value}})</code></li>\n<li>æ¡ä»¶æŸ¥æ‰¾ key &gt; valueï¼š<code>db.collection.find({&quot;key&quot;:{$gt:value}})</code></li>\n<li>æ¡ä»¶æŸ¥æ‰¾ key &gt;= valueï¼š<code>db.collection.find({&quot;key&quot;:{$gte:value}})</code></li>\n<li>èŒƒå›´æŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key&quot;:{$gt:value1,$lt:value2 } })</code></li>\n<li>æ¨¡è¿ç®—æŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key&quot;:{$mod:[10,1]}})</code></li>\n<li>èŒƒå›´åœ¨æŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key&quot;:{$in:[1,2,3]}})</code></li>\n<li>èŒƒå›´ä¸åœ¨åœ¨æŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key&quot;:{$nin:[1,2,3]}})</code></li>\n<li>æ•°ç»„é•¿åº¦æŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key&quot;:{$size:1}})</code> key å¿…é¡»æ˜¯æ•°ç»„</li>\n<li>å­—æ®µå­˜åœ¨æŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key&quot;:{$exists:true|false}})</code></li>\n<li>å¤šæ¡ä»¶æŸ¥æ‰¾ï¼š<code>db.collection.find({$or:[{a:1},{b:2}]})</code></li>\n<li>å†…åµŒå¯¹è±¡ä¸­çš„å€¼æŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key.subkey&quot;:value})</code></li>\n<li>æ’åºï¼š<code>db.collection.find({}).sort({&quot;key1&quot;:1,&quot;key2&quot;:-1})</code> 1 å‡åº -1 é™åº</li>\n<li>å¯¹å­—æ®µå»ºç«‹ç´¢å¼•ï¼š<code>db.collection.find({})ensureIndex({&quot;key&quot;:1})</code> 1 å‡åº -1 é™åº</li>\n<li>èŒƒå›´æ§åˆ¶æŸ¥æ‰¾ï¼š<code>db.collection.find().skip(5).limit(5)</code> è·³è¿‡ 5 æ¡ï¼Œè¯»å– 5 æ¡</li>\n<li>æŸ¥è¯¢ç»“æœé›†ç»Ÿè®¡ï¼š<code>db.collection.find().count()</code></li>\n<li>æ¨¡ç³ŠæŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key&quot;:/ab/})</code> æ­£åˆ™</li>\n</ul>\n<p>æ›´æ”¹æ•°æ®</p>\n<ul>\n<li><code>db.collection.update({&quot;targetKey&quot;:&quot;targetValue&quot;},{&quot;newKey&quot;:&quot;newVlue&quot;})</code></li>\n</ul>\n<h4 id=\"GUI-å·¥å…·\"><a href=\"#GUI-å·¥å…·\" class=\"headerlink\" title=\"GUI å·¥å…·\"></a>GUI å·¥å…·</h4><p><img src=\"http://ww1.sinaimg.cn/large/6057861cgw1fbfwwdbu8qj20zq0dbqah.jpg\" alt=\"\"><br><strong><em>Robomongo</em></strong> å¯è§†åŒ– Mongodb æ•°æ®åº“ç®¡ç†å·¥å…· ï¼Œç‚¹å‡»<a href=\"https://robomongo.org/download\" target=\"_blank\" rel=\"noopener\">è¿™é‡Œ</a>ä¸‹è½½ï¼Œå®˜æ–¹ç½‘ç«™ï¼š<a href=\"https://robomongo.org/\" target=\"_blank\" rel=\"noopener\">https://robomongo.org/</a> ã€‚</p>\n<h3 id=\"Mongoose-ä»‹ç»\"><a href=\"#Mongoose-ä»‹ç»\" class=\"headerlink\" title=\"Mongoose ä»‹ç»\"></a>Mongoose ä»‹ç»</h3><p><a href=\"http://mongoosejs.com/\" target=\"_blank\" rel=\"noopener\">Mongoose</a> ç®€è€Œè¨€ä¹‹å°±æ˜¯åœ¨ Node ç¯å¢ƒä¸­æ“ä½œ MongoDB æ•°æ®åº“çš„ä¸€ç§å¯¹è±¡æ¨¡å‹å·¥å…·ï¼ŒMongoose å°†æ•°æ®åº“ä¸­çš„æ•°æ®è½¬æ¢ä¸º JavaScript å¯¹è±¡ä¾›å¼€å‘äººå‘˜ä½¿ç”¨ã€‚</p>\n<h4 id=\"é…ç½®\"><a href=\"#é…ç½®\" class=\"headerlink\" title=\"é…ç½®\"></a>é…ç½®</h4><p>å®‰è£… Mongoose<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install mongoose --save</span><br></pre></td></tr></table></figure></p>\n<p>å¼•å…¥åˆ°é¡¹ç›®æ–‡ä»¶ä¸­å¹¶åˆ›å»ºé“¾æ¥<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// app.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">'mongoose'</span>);</span><br><span class=\"line\">mongoose.connect(<span class=\"string\">'mongodb://localhost/my_database'</span>);</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"æ–°å¢æ•°æ®\"><a href=\"#æ–°å¢æ•°æ®\" class=\"headerlink\" title=\"æ–°å¢æ•°æ®\"></a>æ–°å¢æ•°æ®</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¼•å…¥æ¨¡å—</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">'mongoose'</span>);</span><br><span class=\"line\"><span class=\"comment\">// è¿æ¥æ•°æ®åº“</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> db = mongoose.createConnection(<span class=\"string\">'mongodb://127.0.0.1:27017/test'</span>);</span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½®æ•°æ®ç±»å‹</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monSchema = <span class=\"keyword\">new</span> mongooose.Schema(&#123;</span><br><span class=\"line\">    name:&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">String</span>,<span class=\"attr\">default</span>:<span class=\"string\">\"username\"</span>&#125;,</span><br><span class=\"line\">    ageï¼š&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">Number</span>&#125;,</span><br><span class=\"line\">    sex:&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">String</span>&#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// é€‰æ‹©é›†åˆ</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monModel = db.model(<span class=\"string\">'user'</span>,monSchema);</span><br><span class=\"line\"><span class=\"comment\">// æ•°æ®é›†</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> content = &#123;<span class=\"attr\">name</span>:<span class=\"string\">\"Nick\"</span>,<span class=\"attr\">age</span>:<span class=\"number\">23</span>,<span class=\"attr\">sex</span>:<span class=\"string\">'ç”·'</span>&#125;;</span><br><span class=\"line\"><span class=\"comment\">// å®ä¾‹åŒ–å¯¹è±¡å¹¶æ’å…¥æ•°æ®</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monInsert = <span class=\"keyword\">new</span> monModel(content);</span><br><span class=\"line\">monInsert.save(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(err)&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'æˆåŠŸæ’å…¥æ•°æ®'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  db.close();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"åˆ é™¤æ•°æ®\"><a href=\"#åˆ é™¤æ•°æ®\" class=\"headerlink\" title=\"åˆ é™¤æ•°æ®\"></a>åˆ é™¤æ•°æ®</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¼•å…¥æ¨¡å—</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">'mongoose'</span>);</span><br><span class=\"line\"><span class=\"comment\">// è¿æ¥æ•°æ®åº“</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> db = mongoose.createConnection(<span class=\"string\">'mongodb://127.0.0.1:27017/test'</span>);</span><br><span class=\"line\"><span class=\"comment\">// cosole.log(db);</span></span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½®æ•°æ®ç±»å‹</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monSchema = <span class=\"keyword\">new</span> mongooose.Schema(&#123;</span><br><span class=\"line\">    name:&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">String</span>,<span class=\"attr\">default</span>:<span class=\"string\">\"name\"</span>&#125;,</span><br><span class=\"line\">    ageï¼š&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">Number</span>&#125;,</span><br><span class=\"line\">    sex:&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">String</span>&#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// é€‰æ‹©é›†åˆ</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monModel = db.model(<span class=\"string\">'user'</span>,monSchema);</span><br><span class=\"line\"><span class=\"comment\">// åŸæ•°æ®å­—æ®µå€¼</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> oldValue  = &#123;<span class=\"attr\">name</span>:<span class=\"string\">\"Nick\"</span>&#125;;</span><br><span class=\"line\"><span class=\"comment\">// å•æ¡ä»¶æ›´æ–°</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> newData1 = &#123;<span class=\"attr\">$set</span>:&#123;<span class=\"attr\">name</span>:<span class=\"string\">\"å†…å®¹\"</span>&#125;&#125;;</span><br><span class=\"line\"><span class=\"comment\">// å¤šæ¡ä»¶æ›´æ–°</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> newData2 = &#123;<span class=\"attr\">$set</span>:&#123;<span class=\"attr\">name</span>:<span class=\"string\">\"å†…å®¹\"</span>,<span class=\"attr\">age</span>:<span class=\"number\">2</span>&#125;&#125;;</span><br><span class=\"line\">monModel.update(oldValue,newData,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err,result</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(err)&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"update\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  db.close();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"æŸ¥è¯¢æ•°æ®\"><a href=\"#æŸ¥è¯¢æ•°æ®\" class=\"headerlink\" title=\"æŸ¥è¯¢æ•°æ®\"></a>æŸ¥è¯¢æ•°æ®</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¼•å…¥æ¨¡å—</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">'mongoose'</span>);</span><br><span class=\"line\"><span class=\"comment\">// è¿æ¥æ•°æ®åº“</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> db = mongoose.createConnection(<span class=\"string\">'mongodb://127.0.0.1:27017/test'</span>);</span><br><span class=\"line\"><span class=\"comment\">// cosole.log(db);</span></span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½®æ•°æ®ç±»å‹</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monSchema = <span class=\"keyword\">new</span> mongooose.Schema(&#123;</span><br><span class=\"line\">    name:&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">String</span>,<span class=\"attr\">default</span>:<span class=\"string\">\"name\"</span>&#125;,</span><br><span class=\"line\">    ageï¼š&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">Number</span>&#125;,</span><br><span class=\"line\">    sex:&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">String</span>&#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// é€‰æ‹©é›†åˆ</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monModel = db.model(<span class=\"string\">'user'</span>,monSchema);</span><br><span class=\"line\"><span class=\"keyword\">var</span> content = &#123;<span class=\"attr\">name</span>:<span class=\"string\">\"å§“å2\"</span>&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> field = &#123;<span class=\"attr\">name</span>:<span class=\"number\">1</span>,<span class=\"attr\">age</span>:<span class=\"number\">1</span>,<span class=\"attr\">sex</span>:<span class=\"number\">1</span>&#125;;</span><br><span class=\"line\">monModel.find(content,field,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err,result</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(err)&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(result);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  db.close();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"ä¿®æ”¹æ•°æ®\"><a href=\"#ä¿®æ”¹æ•°æ®\" class=\"headerlink\" title=\"ä¿®æ”¹æ•°æ®\"></a>ä¿®æ”¹æ•°æ®</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¼•å…¥æ¨¡å—</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">'mongoose'</span>);</span><br><span class=\"line\"><span class=\"comment\">// è¿æ¥æ•°æ®åº“</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> db = mongoose.createConnection(<span class=\"string\">'mongodb://127.0.0.1:27017/test'</span>);</span><br><span class=\"line\"><span class=\"comment\">// cosole.log(db);</span></span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½®æ•°æ®ç±»å‹</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monSchema = <span class=\"keyword\">new</span> mongooose.Schema(&#123;</span><br><span class=\"line\">    name:&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">String</span>,<span class=\"attr\">default</span>:<span class=\"string\">\"name\"</span>&#125;,</span><br><span class=\"line\">    ageï¼š&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">Number</span>&#125;,</span><br><span class=\"line\">    sex:&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">String</span>&#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// é€‰æ‹©é›†åˆ</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monModel = db.model(<span class=\"string\">'user'</span>,monSchema);</span><br><span class=\"line\"><span class=\"comment\">// åŸæ•°æ®å­—æ®µå€¼</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> oldValue  = &#123;<span class=\"attr\">name</span>:<span class=\"string\">\"Nick\"</span>&#125;;</span><br><span class=\"line\"><span class=\"comment\">// å•æ¡ä»¶æ›´æ–°</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> newData1 = &#123;<span class=\"attr\">$set</span>:&#123;<span class=\"attr\">name</span>:<span class=\"string\">\"å†…å®¹\"</span>&#125;&#125;;</span><br><span class=\"line\"><span class=\"comment\">// å¤šæ¡ä»¶æ›´æ–°</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> newData2 = &#123;<span class=\"attr\">$set</span>:&#123;<span class=\"attr\">name</span>:<span class=\"string\">\"å†…å®¹\"</span>,<span class=\"attr\">age</span>:<span class=\"number\">2</span>&#125;&#125;;</span><br><span class=\"line\">monModel.update(oldValue,newData,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err,result</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(err)&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"update\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  db.close();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p>è®°å½• Mongodb çš„å­¦ä¹ ä¹‹æ—…ï¼Œä»ç¯å¢ƒé…ç½®ï¼Œåˆ°åŸºç¡€å‘½ä»¤è¡Œä½¿ç”¨ï¼Œç®—æ˜¯ä¸€ä¸ªç®€å•çš„å…¥é—¨æ•™ç¨‹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å­¦ä¹ æ€»ç»“ï¼Œè¿˜æœ‰æŠŠè¸©åˆ°çš„å‘éƒ½è®°å½•ä¸‹æ¥ï¼Œä»¥åé‡åˆ°åŒæ ·çš„é—®é¢˜ä¸è‡³äºåœ¨åŒä¸€ä¸ªåœ°æ–¹ç»§ç»­è¸©å‘ã€‚<br>","more":"</p>\n<h3 id=\"Mongodb-ä»‹ç»\"><a href=\"#Mongodb-ä»‹ç»\" class=\"headerlink\" title=\"Mongodb ä»‹ç»\"></a>Mongodb ä»‹ç»</h3><blockquote>\n<p>MongoDB æ˜¯ä¸€ç§æ–‡æ¡£å¯¼å‘<strong><em>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</em></strong>ï¼Œç”± C++æ’°å†™è€Œæˆï¼Œæ—¨åœ¨ä¸º WEB åº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚2007 å¹´ 10 æœˆï¼ŒMongoDB ç”± 10gen å›¢é˜Ÿæ‰€å‘å±•ã€‚2009 å¹´ 2 æœˆé¦–åº¦æ¨å‡ºã€‚ â€” <strong><em>ç»´åŸºç™¾ç§‘</em></strong></p>\n</blockquote>\n<p>MongoDB æ˜¯ä¸€ä¸ªä»‹äºå…³ç³»æ•°æ®åº“å’Œéå…³ç³»æ•°æ®åº“ä¹‹é—´çš„äº§å“ï¼Œæ˜¯éå…³ç³»æ•°æ®åº“å½“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œï¼Œæœ€åƒå…³ç³»æ•°æ®åº“çš„ã€‚å¬ç€å¾ˆé¥¶ï¼Œå…¶å®å°±æ˜¯éå…³ç³»æ•°æ®åº“ã€‚é‚£ä»€ä¹ˆåˆæ˜¯ <strong><em>å…³ç³»å‹æ•°æ®åº“</em></strong> å‘¢ï¼Ÿå…³ç³»å‹æ•°æ®åº“ä»¥è¡Œå’Œåˆ—çš„å½¢å¼å­˜å‚¨æ•°æ®ï¼Œè¿™ä¸€ç³»åˆ—çš„è¡Œå’Œåˆ—è¢«ç§°ä¸ºè¡¨ï¼Œä¸€ç»„è¡¨ç»„æˆäº†æ•°æ®åº“ã€‚è¡¨ä¸è¡¨ä¹‹é—´çš„æ•°æ®è®°å½•æœ‰å…³ç³»ã€‚</p>\n<h3 id=\"Mongodb-å®‰è£…\"><a href=\"#Mongodb-å®‰è£…\" class=\"headerlink\" title=\"Mongodb å®‰è£…\"></a>Mongodb å®‰è£…</h3><p>æœ¬äººçš„æ“ä½œç³»ç»Ÿæ˜¯ï¼šMacOSï¼Œä¸”å·²ç»å®‰è£…äº† <a href=\"http://brew.sh/index_zh-cn.html\" target=\"_blank\" rel=\"noopener\">brew</a> ï¼Œæ‰€ä»¥å›¾çœäº‹ï¼Œæˆ‘å°±ä½¿ç”¨ brew ä¸€é”®å®‰è£…äº†ã€‚æ²¡ç”¨è¿‡ brew çš„åŒå­¦å¯ä»¥å»<a href=\"http://www.cnblogs.com/TankXiao/p/3247113.html\" target=\"_blank\" rel=\"noopener\">è¿™é‡Œçœ‹çœ‹</a>ï¼Œç”¨èµ·æ¥è¿˜æ˜¯æŒºæ–¹ä¾¿çš„ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install mongodb</span><br></pre></td></tr></table></figure>\n<p>å®‰è£…é€Ÿåº¦å–å†³äºä½ çš„ç½‘ç»œæƒ…å†µï¼Œè¿™é‡Œç¨ç­‰ç‰‡åˆ»ã€‚brew é»˜è®¤çš„å®‰è£…ä½ç½®åœ¨ <code>/usr/local/Cellar/</code> ä¸€ä¼šçš„åŠŸå¤«ï¼Œæˆ‘ä»¬å°±èƒ½åœ¨è¿™é‡Œçœ‹åˆ°ï¼ŒMongodb ä¹–ä¹–çš„èººåœ¨è¿™äº†ã€‚å› ä¸º Mongodb ä¼šé»˜è®¤è¯»å– <code>/data/db</code> ç›®å½•ä¸‹çš„æ•°æ®åº“ï¼Œæ‰€ä»¥æ–¹ä¾¿çœäº‹ï¼Œæˆ‘ä»¬æŠŠé»˜è®¤çš„æ•°æ®åº“å°±åˆ›å»ºåœ¨è¿™ä¸ªä½ç½®ï¼Œå¹¶ä¸”ç»™ <code>/data</code> æ‰§è¡Œæƒé™ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir -p /data/db         <span class=\"comment\"># sudo è¡¨ç¤ºä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œï¼Œ-p è¡¨ç¤ºåˆ›å»ºå¤šå±‚ç›®å½•</span></span><br><span class=\"line\">sudo chown -R  UserName /data  <span class=\"comment\"># UserName è¡¨ç¤ºä½ å½“å‰çš„ç³»ç»Ÿç”¨æˆ·å</span></span><br></pre></td></tr></table></figure>\n<p>å®‰è£…æˆåŠŸåï¼Œå°±å¯ä»¥åœ¨ Mongodb çš„å®‰è£…ç›®å½•ä¸‹ æ‰¾åˆ° <code>bin</code> ç›®å½•äº†ï¼Œè¿™é‡Œé¢æ”¾ç€æ‰€æœ‰éœ€è¦ç”¨åˆ°çš„å‘½ä»¤ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/Cellar/mongodb/3.4.0/bin</span><br><span class=\"line\">./mongod   <span class=\"comment\"># æ‰§è¡Œ Mongodb è¿›ç¨‹åï¼Œæµè§ˆå™¨æ‰“å¼€ http://127.0.0.1:27017/</span></span><br></pre></td></tr></table></figure></p>\n<p>æµè§ˆå™¨æ˜¾ç¤ºä¸‹é¢çš„å†…å®¹ï¼Œå°±è¡¨ç¤ºå®‰è£…æˆåŠŸå•¦ã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">It looks like you are trying to access MongoDB over HTTP on the native driver port.</span><br></pre></td></tr></table></figure></p>\n<p>æ¥ä¸‹æ¥æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ŒéªŒè¯æˆ‘ä»¬ç¡®å®å®‰è£…æˆåŠŸäº†ã€‚åœ¨ Mongodb çš„æ§åˆ¶å°ä¸­ï¼Œå¯ä»¥æ‰§è¡Œå¾ˆå¤šå‘½ä»¤æ¥æ“ä½œæ•°æ®åº“ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/<span class=\"built_in\">local</span>/Cellar/mongodb/3.4.0/bin</span><br><span class=\"line\">./mongo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è¿›å…¥ MongoDB shell åï¼Œå…‰æ ‡ä¼šå˜æˆä¸‹é¢è¿‡çš„çŠ¶æ€ï¼Œæ‰§è¡Œ show dbs åï¼Œæ˜¾ç¤ºå¦‚ä¸‹åˆ™å¤§åŠŸå‘Šæˆï¼</span></span><br><span class=\"line\">&gt; show dbs</span><br><span class=\"line\">admin  0.000GB</span><br><span class=\"line\"><span class=\"built_in\">local</span>  0.000GB</span><br></pre></td></tr></table></figure></p>\n<p>æ¥ä¸‹æ¥ï¼Œä¸ºäº†æ–¹ä¾¿ä¸‹æ¬¡æ‰§è¡Œ Mongodb ï¼Œæˆ‘ä»¬æŠŠ <code>bin</code> ç›®å½•æ”¾åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œè¿™æ ·ä¸‹æ¬¡ç›´æ¥åœ¨ç»ˆç«¯è¾“å…¥ <code>mongod</code> å³å¯å¯ç”¨æœåŠ¡ï¼Œè¾“å…¥å‘½ä»¤ <code>mongo</code> å³å¯è¿›å…¥ shell æ§åˆ¶å°ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œè¯­æ³•ï¼šecho \"export PATH=xxxxxx:$PATH\" &gt;&gt; ~/.bash_profile</span></span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'export PATH=/usr/local/Cellar/mongodb/3.4.0/bin:$PATH'</span>&gt;&gt;~/.bash_profile</span><br></pre></td></tr></table></figure>\n<h3 id=\"Mongodb-ä½¿ç”¨\"><a href=\"#Mongodb-ä½¿ç”¨\" class=\"headerlink\" title=\"Mongodb ä½¿ç”¨\"></a>Mongodb ä½¿ç”¨</h3><p>ä½¿ç”¨ä¹‹å‰ï¼Œåœ¨æ˜ç™½å‡ ä¸ªæ¦‚å¿µï¼Œç›¸æ¯”å…³ç³»å‹æ•°æ®åº“ï¼Œéå…³ç³»æ•°æ®åº“é‡‡ç”¨äº† <strong><em>æ•°æ®åº“</em></strong>ã€<strong><em>é›†åˆ</em></strong>ã€<strong><em>æ–‡æ¡£</em></strong>ã€çš„æ¦‚å¿µã€‚å…¶å®å¯¹æ¯” SQL æ•°æ®åº“ï¼Œå°±å¾ˆå®¹æ˜“ç†è§£ï¼Œé›†åˆå°±å¥½æ¯”æ˜¯ä¸€å¼ è¡¨ï¼Œæ–‡æ¡£å¥½æ¯”å°±æ˜¯ä¸€æ•´è¡Œæ•°æ®ã€‚åº“çš„æ¦‚å¿µæ˜¯ä¸€è‡´çš„ã€‚å°±è¿™ç‚¹åŒºåˆ«ã€‚åœ¨ç»ˆç«¯è¾“å…¥ <code>mongo</code> è¿›å…¥ shell æ§åˆ¶å°ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mongo</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"åŸºç¡€å‘½ä»¤\"><a href=\"#åŸºç¡€å‘½ä»¤\" class=\"headerlink\" title=\"åŸºç¡€å‘½ä»¤\"></a>åŸºç¡€å‘½ä»¤</h4><p>æ–°å¢æ•°æ®</p>\n<ul>\n<li>æ˜¾ç¤ºæ•°æ®åº“ï¼š<code>show dbs</code></li>\n<li>ä½¿ç”¨/åˆ›å»ºæ•°æ®åº“ï¼š<code>use æ•°æ®åº“å</code></li>\n<li>æ˜¾ç¤ºé›†åˆï¼š<code>show collections</code></li>\n<li>ä¿å­˜æ•°æ®ï¼š<code>db.collection.save({&quot;key&quot;:&quot;value&quot;,&quot;key2&quot;:&quot;value2&quot;})</code></li>\n<li>æ’å…¥æ•°æ®ï¼š<code>db.collection.insert({&quot;key&quot;:&quot;value&quot;,&quot;key2&quot;:&quot;value2&quot;})</code></li>\n</ul>\n<div class=\"tip\"><br>è‹¥æ–°å¢çš„æ•°æ®ä¸»é”®å·²ç»å­˜åœ¨ï¼Œinsert()ä¼šä¸åšæ“ä½œå¹¶æç¤ºé”™è¯¯ï¼Œè€Œsave()åˆ™æ›´æ”¹åŸæ¥çš„å†…å®¹ä¸ºæ–°å†…å®¹ã€‚<br></div>\n\n<p>åˆ é™¤æ•°æ®</p>\n<ul>\n<li>åˆ é™¤æ‰€æœ‰æ–‡æ¡£ï¼š<code>db.collection.remove({})</code></li>\n<li>åˆ é™¤æŒ‡å®šæ–‡æ¡£ï¼š<code>db.collection.remove({&quot;key&quot;:&quot;value&quot;})</code></li>\n<li>åˆ é™¤é›†åˆï¼š<code>db.collection.drop()</code> æˆ–è€… <code>db.runCommand({&quot;drop&quot;:&quot;collection&quot;})</code></li>\n<li>åˆ é™¤æ•°æ®åº“ï¼š<code>db.runCommand({&quot;dropDatabase&quot;: 1})</code> æ³¨æ„ï¼š1 æ²¡æœ‰å¼•å·</li>\n</ul>\n<p>æŸ¥æ‰¾æ•°æ®</p>\n<ul>\n<li>æŸ¥æ‰¾æ‰€æœ‰æ•°æ®ï¼š <code>db.collection.find({})</code></li>\n<li>æŸ¥åˆ°å•æ¡æ•°æ®ï¼š<code>db.collection.findOne({})</code></li>\n<li>æ¡ä»¶æŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key&quot;:&quot;value&quot;})</code></li>\n<li>æ¡ä»¶æŸ¥æ‰¾ key &lt; valueï¼š<code>db.collection.find({&quot;key&quot;:{$lt:value}})</code></li>\n<li>æ¡ä»¶æŸ¥æ‰¾ key &gt; valueï¼š<code>db.collection.find({&quot;key&quot;:{$gt:value}})</code></li>\n<li>æ¡ä»¶æŸ¥æ‰¾ key &gt;= valueï¼š<code>db.collection.find({&quot;key&quot;:{$gte:value}})</code></li>\n<li>èŒƒå›´æŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key&quot;:{$gt:value1,$lt:value2 } })</code></li>\n<li>æ¨¡è¿ç®—æŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key&quot;:{$mod:[10,1]}})</code></li>\n<li>èŒƒå›´åœ¨æŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key&quot;:{$in:[1,2,3]}})</code></li>\n<li>èŒƒå›´ä¸åœ¨åœ¨æŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key&quot;:{$nin:[1,2,3]}})</code></li>\n<li>æ•°ç»„é•¿åº¦æŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key&quot;:{$size:1}})</code> key å¿…é¡»æ˜¯æ•°ç»„</li>\n<li>å­—æ®µå­˜åœ¨æŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key&quot;:{$exists:true|false}})</code></li>\n<li>å¤šæ¡ä»¶æŸ¥æ‰¾ï¼š<code>db.collection.find({$or:[{a:1},{b:2}]})</code></li>\n<li>å†…åµŒå¯¹è±¡ä¸­çš„å€¼æŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key.subkey&quot;:value})</code></li>\n<li>æ’åºï¼š<code>db.collection.find({}).sort({&quot;key1&quot;:1,&quot;key2&quot;:-1})</code> 1 å‡åº -1 é™åº</li>\n<li>å¯¹å­—æ®µå»ºç«‹ç´¢å¼•ï¼š<code>db.collection.find({})ensureIndex({&quot;key&quot;:1})</code> 1 å‡åº -1 é™åº</li>\n<li>èŒƒå›´æ§åˆ¶æŸ¥æ‰¾ï¼š<code>db.collection.find().skip(5).limit(5)</code> è·³è¿‡ 5 æ¡ï¼Œè¯»å– 5 æ¡</li>\n<li>æŸ¥è¯¢ç»“æœé›†ç»Ÿè®¡ï¼š<code>db.collection.find().count()</code></li>\n<li>æ¨¡ç³ŠæŸ¥æ‰¾ï¼š<code>db.collection.find({&quot;key&quot;:/ab/})</code> æ­£åˆ™</li>\n</ul>\n<p>æ›´æ”¹æ•°æ®</p>\n<ul>\n<li><code>db.collection.update({&quot;targetKey&quot;:&quot;targetValue&quot;},{&quot;newKey&quot;:&quot;newVlue&quot;})</code></li>\n</ul>\n<h4 id=\"GUI-å·¥å…·\"><a href=\"#GUI-å·¥å…·\" class=\"headerlink\" title=\"GUI å·¥å…·\"></a>GUI å·¥å…·</h4><p><img src=\"http://ww1.sinaimg.cn/large/6057861cgw1fbfwwdbu8qj20zq0dbqah.jpg\" alt=\"\"><br><strong><em>Robomongo</em></strong> å¯è§†åŒ– Mongodb æ•°æ®åº“ç®¡ç†å·¥å…· ï¼Œç‚¹å‡»<a href=\"https://robomongo.org/download\" target=\"_blank\" rel=\"noopener\">è¿™é‡Œ</a>ä¸‹è½½ï¼Œå®˜æ–¹ç½‘ç«™ï¼š<a href=\"https://robomongo.org/\" target=\"_blank\" rel=\"noopener\">https://robomongo.org/</a> ã€‚</p>\n<h3 id=\"Mongoose-ä»‹ç»\"><a href=\"#Mongoose-ä»‹ç»\" class=\"headerlink\" title=\"Mongoose ä»‹ç»\"></a>Mongoose ä»‹ç»</h3><p><a href=\"http://mongoosejs.com/\" target=\"_blank\" rel=\"noopener\">Mongoose</a> ç®€è€Œè¨€ä¹‹å°±æ˜¯åœ¨ Node ç¯å¢ƒä¸­æ“ä½œ MongoDB æ•°æ®åº“çš„ä¸€ç§å¯¹è±¡æ¨¡å‹å·¥å…·ï¼ŒMongoose å°†æ•°æ®åº“ä¸­çš„æ•°æ®è½¬æ¢ä¸º JavaScript å¯¹è±¡ä¾›å¼€å‘äººå‘˜ä½¿ç”¨ã€‚</p>\n<h4 id=\"é…ç½®\"><a href=\"#é…ç½®\" class=\"headerlink\" title=\"é…ç½®\"></a>é…ç½®</h4><p>å®‰è£… Mongoose<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install mongoose --save</span><br></pre></td></tr></table></figure></p>\n<p>å¼•å…¥åˆ°é¡¹ç›®æ–‡ä»¶ä¸­å¹¶åˆ›å»ºé“¾æ¥<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// app.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">'mongoose'</span>);</span><br><span class=\"line\">mongoose.connect(<span class=\"string\">'mongodb://localhost/my_database'</span>);</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"æ–°å¢æ•°æ®\"><a href=\"#æ–°å¢æ•°æ®\" class=\"headerlink\" title=\"æ–°å¢æ•°æ®\"></a>æ–°å¢æ•°æ®</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¼•å…¥æ¨¡å—</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">'mongoose'</span>);</span><br><span class=\"line\"><span class=\"comment\">// è¿æ¥æ•°æ®åº“</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> db = mongoose.createConnection(<span class=\"string\">'mongodb://127.0.0.1:27017/test'</span>);</span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½®æ•°æ®ç±»å‹</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monSchema = <span class=\"keyword\">new</span> mongooose.Schema(&#123;</span><br><span class=\"line\">    name:&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">String</span>,<span class=\"attr\">default</span>:<span class=\"string\">\"username\"</span>&#125;,</span><br><span class=\"line\">    ageï¼š&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">Number</span>&#125;,</span><br><span class=\"line\">    sex:&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">String</span>&#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// é€‰æ‹©é›†åˆ</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monModel = db.model(<span class=\"string\">'user'</span>,monSchema);</span><br><span class=\"line\"><span class=\"comment\">// æ•°æ®é›†</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> content = &#123;<span class=\"attr\">name</span>:<span class=\"string\">\"Nick\"</span>,<span class=\"attr\">age</span>:<span class=\"number\">23</span>,<span class=\"attr\">sex</span>:<span class=\"string\">'ç”·'</span>&#125;;</span><br><span class=\"line\"><span class=\"comment\">// å®ä¾‹åŒ–å¯¹è±¡å¹¶æ’å…¥æ•°æ®</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monInsert = <span class=\"keyword\">new</span> monModel(content);</span><br><span class=\"line\">monInsert.save(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(err)&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'æˆåŠŸæ’å…¥æ•°æ®'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  db.close();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"åˆ é™¤æ•°æ®\"><a href=\"#åˆ é™¤æ•°æ®\" class=\"headerlink\" title=\"åˆ é™¤æ•°æ®\"></a>åˆ é™¤æ•°æ®</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¼•å…¥æ¨¡å—</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">'mongoose'</span>);</span><br><span class=\"line\"><span class=\"comment\">// è¿æ¥æ•°æ®åº“</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> db = mongoose.createConnection(<span class=\"string\">'mongodb://127.0.0.1:27017/test'</span>);</span><br><span class=\"line\"><span class=\"comment\">// cosole.log(db);</span></span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½®æ•°æ®ç±»å‹</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monSchema = <span class=\"keyword\">new</span> mongooose.Schema(&#123;</span><br><span class=\"line\">    name:&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">String</span>,<span class=\"attr\">default</span>:<span class=\"string\">\"name\"</span>&#125;,</span><br><span class=\"line\">    ageï¼š&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">Number</span>&#125;,</span><br><span class=\"line\">    sex:&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">String</span>&#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// é€‰æ‹©é›†åˆ</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monModel = db.model(<span class=\"string\">'user'</span>,monSchema);</span><br><span class=\"line\"><span class=\"comment\">// åŸæ•°æ®å­—æ®µå€¼</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> oldValue  = &#123;<span class=\"attr\">name</span>:<span class=\"string\">\"Nick\"</span>&#125;;</span><br><span class=\"line\"><span class=\"comment\">// å•æ¡ä»¶æ›´æ–°</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> newData1 = &#123;<span class=\"attr\">$set</span>:&#123;<span class=\"attr\">name</span>:<span class=\"string\">\"å†…å®¹\"</span>&#125;&#125;;</span><br><span class=\"line\"><span class=\"comment\">// å¤šæ¡ä»¶æ›´æ–°</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> newData2 = &#123;<span class=\"attr\">$set</span>:&#123;<span class=\"attr\">name</span>:<span class=\"string\">\"å†…å®¹\"</span>,<span class=\"attr\">age</span>:<span class=\"number\">2</span>&#125;&#125;;</span><br><span class=\"line\">monModel.update(oldValue,newData,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err,result</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(err)&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"update\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  db.close();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"æŸ¥è¯¢æ•°æ®\"><a href=\"#æŸ¥è¯¢æ•°æ®\" class=\"headerlink\" title=\"æŸ¥è¯¢æ•°æ®\"></a>æŸ¥è¯¢æ•°æ®</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¼•å…¥æ¨¡å—</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">'mongoose'</span>);</span><br><span class=\"line\"><span class=\"comment\">// è¿æ¥æ•°æ®åº“</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> db = mongoose.createConnection(<span class=\"string\">'mongodb://127.0.0.1:27017/test'</span>);</span><br><span class=\"line\"><span class=\"comment\">// cosole.log(db);</span></span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½®æ•°æ®ç±»å‹</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monSchema = <span class=\"keyword\">new</span> mongooose.Schema(&#123;</span><br><span class=\"line\">    name:&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">String</span>,<span class=\"attr\">default</span>:<span class=\"string\">\"name\"</span>&#125;,</span><br><span class=\"line\">    ageï¼š&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">Number</span>&#125;,</span><br><span class=\"line\">    sex:&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">String</span>&#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// é€‰æ‹©é›†åˆ</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monModel = db.model(<span class=\"string\">'user'</span>,monSchema);</span><br><span class=\"line\"><span class=\"keyword\">var</span> content = &#123;<span class=\"attr\">name</span>:<span class=\"string\">\"å§“å2\"</span>&#125;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> field = &#123;<span class=\"attr\">name</span>:<span class=\"number\">1</span>,<span class=\"attr\">age</span>:<span class=\"number\">1</span>,<span class=\"attr\">sex</span>:<span class=\"number\">1</span>&#125;;</span><br><span class=\"line\">monModel.find(content,field,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err,result</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(err)&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(result);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  db.close();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"ä¿®æ”¹æ•°æ®\"><a href=\"#ä¿®æ”¹æ•°æ®\" class=\"headerlink\" title=\"ä¿®æ”¹æ•°æ®\"></a>ä¿®æ”¹æ•°æ®</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¼•å…¥æ¨¡å—</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> mongoose = <span class=\"built_in\">require</span>(<span class=\"string\">'mongoose'</span>);</span><br><span class=\"line\"><span class=\"comment\">// è¿æ¥æ•°æ®åº“</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> db = mongoose.createConnection(<span class=\"string\">'mongodb://127.0.0.1:27017/test'</span>);</span><br><span class=\"line\"><span class=\"comment\">// cosole.log(db);</span></span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½®æ•°æ®ç±»å‹</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monSchema = <span class=\"keyword\">new</span> mongooose.Schema(&#123;</span><br><span class=\"line\">    name:&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">String</span>,<span class=\"attr\">default</span>:<span class=\"string\">\"name\"</span>&#125;,</span><br><span class=\"line\">    ageï¼š&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">Number</span>&#125;,</span><br><span class=\"line\">    sex:&#123;<span class=\"attr\">type</span>:<span class=\"built_in\">String</span>&#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// é€‰æ‹©é›†åˆ</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> monModel = db.model(<span class=\"string\">'user'</span>,monSchema);</span><br><span class=\"line\"><span class=\"comment\">// åŸæ•°æ®å­—æ®µå€¼</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> oldValue  = &#123;<span class=\"attr\">name</span>:<span class=\"string\">\"Nick\"</span>&#125;;</span><br><span class=\"line\"><span class=\"comment\">// å•æ¡ä»¶æ›´æ–°</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> newData1 = &#123;<span class=\"attr\">$set</span>:&#123;<span class=\"attr\">name</span>:<span class=\"string\">\"å†…å®¹\"</span>&#125;&#125;;</span><br><span class=\"line\"><span class=\"comment\">// å¤šæ¡ä»¶æ›´æ–°</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> newData2 = &#123;<span class=\"attr\">$set</span>:&#123;<span class=\"attr\">name</span>:<span class=\"string\">\"å†…å®¹\"</span>,<span class=\"attr\">age</span>:<span class=\"number\">2</span>&#125;&#125;;</span><br><span class=\"line\">monModel.update(oldValue,newData,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err,result</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(err)&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"update\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  db.close();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>"},{"title":"Node.JS å­¦ä¹ ç¬”è®° [01] -- å…¥é—¨","date":"2015-01-02T11:00:24.000Z","comments":0,"_content":"\næ•´ç†è®°å½• Node.js å­¦ä¹ ç¬”è®°ï¼Œä½œä¸ºå‰ç«¯äººå‘˜ï¼Œéå¸¸æœ‰å¿…è¦äº†è§£åç«¯çš„ä¸€äº›çŸ¥è¯†ï¼Œæ–¹ä¾¿ä¸åç«¯çš„åŒäº‹åä½œï¼Œæé«˜æ•ˆç‡ï¼Œæå¥½å‰ç«¯åï¼Œä¹Ÿå¯ä»¥å°è¯•å¾€åç«¯å‘å±•ï¼Œæˆä¸ºä¸€åå…¨æ ˆå·¥ç¨‹å¸ˆï¼:P\n<!-- more -->\n![](http://ww4.sinaimg.cn/mw690/6057861cgw1fb6vlzd7i7j20go08cjro.jpg)\n### Node.js ä»‹ç»\nNode.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒã€‚Node.js ä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ã€éé˜»å¡å¼ I/O çš„æ¨¡å‹ï¼Œä½¿å…¶è½»é‡åˆé«˜æ•ˆã€‚Node.js çš„åŒ…ç®¡ç†å™¨ npmï¼Œæ˜¯å…¨çƒæœ€å¤§çš„å¼€æºåº“ç”Ÿæ€ç³»ç»Ÿã€‚\n\n#### Node.js å’Œ JavaScript çš„åŒºåˆ«\n- Node.js æ˜¯ä¸€ä¸ªå¯ä»¥è¿è¡Œ JavaScript çš„å¹³å°ï¼ŒåŸºäº ChromeV8 å¼•æ“ï¼Œæ˜¯å¯¹ JavaScript çš„å¢å¼ºï¼Œä½¿ JavaScript å…·å¤‡äº†æœåŠ¡å™¨è¯­è¨€çš„å¼€å‘èƒ½åŠ›ï¼Œæ¯”å¦‚æ“ä½œæ–‡ä»¶ã€è¯»å–ç³»ç»Ÿä¿¡æ¯ã€ç½‘ç»œä¼ è¾“ç­‰ã€‚\n- JavaScript æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œåªè¦æœ‰ JavaScript å¼•æ“å°±èƒ½è¿è¡Œå¹¶ä¸”å¦‚æœ JavaScript è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ï¼Œæµè§ˆå™¨å¯¹ JavaScript åŠ å…¥äº†æµè§ˆå™¨å’Œæ–‡æ¡£æ“ä½œçš„æ¥å£ï¼ˆæ–¹æ³•ï¼‰ã€‚\n\n<div class=\"tip\">\nç®€å•ç†è§£ï¼šæµè§ˆå™¨ä¸­ JavaScript ä¸»è¦æ˜¯æ“ä½œ BOM å’Œ DOMï¼Œè€Œ Node.js åˆ™æ˜¯å…·æœ‰æœåŠ¡ç«¯è¯­è¨€å¤„ç†èƒ½åŠ›ï¼ˆå¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œä¿å­˜æ•°æ®åˆ°æ•°æ®åº“ç­‰ï¼‰ã€‚\n</div>\n\n#### å®˜æ–¹ç½‘ç«™\n- è‹±æ–‡ç¤¾åŒºï¼š https://www.npmjs.com/\n- ä¸­æ–‡ç¤¾åŒºï¼šhttp://cnodejs.org/\n\n#### Node.js å®‰è£…åŠè¿è¡Œ\nåœ¨ Node.js çš„å®˜æ–¹æä¾›çš„[ä¸‹è½½é¢‘é“](https://nodejs.org/en/download/)é€‰æ‹©å¯¹åº”çš„å¹³å°åŠå®‰è£…ç¨‹åºå®‰è£…å³å¯ã€‚Node.js æä¾›äº† `REPLï¼ˆRead-Evaluate-Print-Loopï¼‰` æ¨¡å¼ï¼Œå³ ***äº¤äº’å¼å‘½ä»¤è¡Œè§£æå™¨***ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥å‘½ä»¤è¡Œï¼Œç¼–å†™ Node.js ä»£ç ã€‚å®‰è£…æˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯é‡Œè¾“å…¥ `node -v` è·å–å½“å‰çš„ Node.js ç‰ˆæœ¬å·ï¼Œèƒ½è·å–è¡¨ç¤ºæˆåŠŸå®‰è£…ã€‚\n\n### Node.js æ¨¡å—\næ¨¡å—å¯¹äº Node.js æ¥è¯´æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œä¸€ä¸ªç‰¹å®šåŠŸèƒ½çš„æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚æ¨¡å—ä¹‹é—´å¯èƒ½ä¼šå­˜åœ¨ä¸€å®šçš„ä¾èµ–å…³ç³»ï¼Œæ¯”å¦‚æˆ‘å†™äº†ä¸€ä¸ª jQuery è½®æ’­çš„æ’ä»¶ï¼Œå®ƒå°±ä¾èµ– jQuery åº“ï¼Œåœ¨ Node.js ä¸­å¯ä»¥éå¸¸æ–¹ä¾¿çš„è¡¨ç¤ºæ¸…æ¥šè¿™ç§ä¾èµ–å…³ç³»ã€‚è¯´åˆ°æ¨¡å—ï¼Œè¿˜éœ€è¦è¯´ä¸€ä¸ªå°±æ˜¯ç¼–å†™æ¨¡å—çš„è§„èŒƒã€‚\n\n#### æ¨¡å—è§„èŒƒ\n- ***AMD*** (Asynchronous Module Definition)ï¼Œè¿™ç§è§„èŒƒæ˜¯å¼‚æ­¥çš„åŠ è½½æ¨¡å—ï¼ŒRequireR.js åº”ç”¨äº†è¿™ä¸€è§„èŒƒ,é€‚åˆå®¢æˆ·ç«¯æµè§ˆå™¨ç¯å¢ƒã€‚\n- ***CMD*** (Common Module Definition), æ˜¯ Sea.js æ¨å´‡çš„è§„èŒƒã€‚\n- ***CommonJS*** , æ˜¯è¯ç”Ÿæ¯”è¾ƒæ—©çš„ã€‚Node.js å°±é‡‡ç”¨äº† CommonJS çš„è§„èŒƒæ¥å®šä¹‰æ¨¡å—ã€‚ä½†æ˜¯ CommonJs é‡‡ç”¨çš„æ˜¯åŒæ­¥åŠ è½½æ–‡ä»¶æ–¹å¼ï¼Œåªé€‚ç”¨äºæœåŠ¡ç«¯ï¼ˆNode.js å¹³å°ï¼‰ã€‚\n\n#### ä½¿ç”¨æ¨¡å—\næ¨¡å—å®šä¹‰å®Œæˆåï¼Œå°±å¯ä»¥ä½¿ç”¨æ¨¡å—ï¼Œé€šè¿‡å‘½ä»¤è¡Œå‚æ•°ä¼ é€’ç»™ Node.js ä»¥å¯åŠ¨ç¨‹åºçš„æ¨¡å—è¢«ç§°ä¸º ***ä¸»æ¨¡å—***ã€‚ä¸»æ¨¡å—è´Ÿè´£è°ƒåº¦ç»„æˆæ•´ä¸ªç¨‹åºçš„å…¶å®ƒæ¨¡å—å®Œæˆå·¥ä½œã€‚å…¶å®å°±ç±»ä¼¼ç½‘ç«™ä¸­çš„ `index.html`ï¼ŒNode.js ä¸­çš„ä¸»æ¨¡å—é€šå¸¸æ˜¯ `main.js` æˆ–è€… `index.js`ã€‚\n```js\nvar http = require('http');// é€šè¿‡ require å¼•å…¥ http æ¨¡å—\n```\n\n#### æ¨¡å—ç»„æˆ\nåœ¨ä¸Šæ¡å‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ require å¼•å…¥äº†ä¸€ä¸ª http æ¨¡å—ï¼Œå®é™…ä¸Šä½œä¸ºä¸€ä¸ªå•ç‹¬çš„æ¨¡å—æ–‡ä»¶ï¼ŒNode.js ä¸ºæˆ‘ä»¬åœ¨å¤–å±‚åµŒå¥—äº†ä¸€ä¸ªå‡½æ•°ï¼Œæ­£å› ä¸ºæœ‰äº†è¿™ä¸ªå‡½æ•°ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å£°æ˜çš„å˜é‡å°±æ˜¯ç§æœ‰å˜é‡å•¦ï¼Œé‚£ä¹ˆæ¯ä¸ªæ¨¡å—ä¹‹é—´å°±ä¸ä¼šäº§ç”Ÿå¹²æ‰°äº†ã€‚é‚£ä¹ˆæ¥çœ‹çœ‹è¿™ä¸ªå‡½æ•°é•¿ä»€ä¹ˆæ ·å­ã€‚\n```js\nfunction (exports, require, module, __filename, __dirname) {\n    var http = require('http');// é€šè¿‡ require å¼•å…¥ http æ¨¡å—\n}\n```\næœ€å¤–å±‚ï¼ŒNode.js ä¸ºæˆ‘ä»¬çš„ä»£ç åŒ…è£¹äº†è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼ å…¥äº†å‡ ä¸ªå‚æ•°ï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹ï¼š\n- exports ï¼šç”¨äºåœ¨å½“å‰æ¨¡å—ä¸­åŠ è½½å’Œä½¿ç”¨åˆ«çš„æ¨¡å—ï¼Œä¼ å…¥ä¸€ä¸ªæ¨¡å—åï¼Œè¿”å›ä¸€ä¸ªæ¨¡å—å¯¼å‡ºå¯¹è±¡ã€‚\n- requireï¼šå½“å‰æ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ï¼Œç”¨äºå¯¼å‡ºæ¨¡å—å…¬æœ‰æ–¹æ³•å’Œå±æ€§ã€‚\n- moduleï¼šè®¿é—®åˆ°å½“å‰æ¨¡å—çš„ä¸€äº›ç›¸å…³ä¿¡æ¯ï¼Œä½†æœ€å¤šçš„ç”¨é€”æ˜¯æ›¿æ¢å½“å‰æ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ã€‚\n- __filenameï¼šå½“å‰æ¨¡å—çš„æ–‡ä»¶å\n- __dirnameï¼šå½“å‰æ¨¡å—çš„ç›®å½•å\n\n#### æ¨¡å—åˆ†ç±»\nNode.js æä¾›ä¸¤ç§æ¨¡å—ç±»å‹ï¼š\n1. æ ¸å¿ƒæ¨¡å—ï¼šæ˜¯ç”± Node.js å¹³å°æä¾›çš„æ¨¡å—ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºâ€œç³»ç»Ÿæ¨¡å—â€ã€‚\n2. æ–‡ä»¶æ¨¡å—ï¼šä»¥ `..` æˆ– `.` å’Œ `/` å¼€å§‹çš„æ ‡è¯†ç¬¦ï¼Œè¿™é‡Œéƒ½è¢«å½“åšæ–‡ä»¶æ¨¡å—æ¥å¤„ç†ã€‚\n\n#### node_modules æ–‡ä»¶å¤¹\nè¯¥æ–‡ä»¶å¤¹æ˜¯ Node.js ä¸­çš„ç‰¹æ®Šæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾ node æ¨¡å—ï¼Œå¦‚æœä¸€ä¸ªæ¨¡å—æ—¢ä¸æ˜¯ç³»ç»Ÿæ¨¡å—ï¼Œä¹Ÿä¸æ˜¯æ–‡ä»¶æ¨¡å—ï¼Œé‚£ä¹ˆå®ƒä¼šè¢«å­˜æ”¾åœ¨ node_modules æ–‡ä»¶å¤¹ä¸­ã€‚ä½¿ç”¨ `console.log(module.paths);` å¯ä»¥æ‰“å° Node.js ä¼šéå†çš„ node_modules ç›®å½•ã€‚\n```js\n[ '/Users/wangmingming/Documents/Projects/JSstudy/12.26/node_modules',\n  '/Users/wangmingming/Documents/Projects/JSstudy/node_modules',\n  '/Users/wangmingming/Documents/Projects/node_modules',\n  '/Users/wangmingming/Documents/node_modules',\n  '/Users/wangmingming/node_modules',\n  '/Users/node_modules',\n  '/node_modules' ]\n```\n<div class=\"tip\">\nåœ¨è°ƒç”¨ä¸€ä¸ªæ¨¡å—æ—¶ï¼ŒNode.js æ²¿è·¯å¾„å‘ä¸Šé€çº§é€’å½’ï¼Œç›´åˆ°æ ¹ç›®å½•ä¸‹çš„ node_modules ç›®å½•ã€‚CommonJS æ¨¡è§„èŒƒä¹Ÿå…è®¸åœ¨æ ‡è¯†ç¬¦ä¸­ä¸åŒ…å«æ–‡ä»¶æ‰©å±•åï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒNode ä¼šæŒ‰ jsã€jsonã€node çš„æ¬¡åºè¡¥è¶³æ‰©å±•åï¼Œä¾æ¬¡å°è¯•ã€‚\n</div>\n\n### åŒ… (Package)\næŠŠç”±å¤šä¸ªå­æ¨¡å—ç»„æˆçš„å¤§æ¨¡å—ç§°åšåŒ…ï¼Œå¹¶æŠŠæ‰€æœ‰å­æ¨¡å—æ”¾åœ¨åŒä¸€ä¸ªç›®å½•é‡Œã€‚åœ¨ä¸€ä¸ªåŒ…ä¸­ï¼Œä¼šç”¨ `package.json` æ–‡ä»¶ä¸­çš„ `main` å±æ€§ç”¨æ¥æè¿°è¿™ä¸ªåŒ…çš„ä¸»æ–‡ä»¶ã€‚\n\n#### NPM (Node Package Manager)\nå¤§åé¼é¼çš„ NPM å®é™…ä¸Šå°±æ˜¯ç”¨æ¥ç®¡ç†åŒ…çš„ä¸€ä¸ªå·¥å…·ï¼Œå€ŸåŠ© NPM æˆ‘ä»¬å¯ä»¥å¿«é€Ÿçš„å®‰è£…å’Œç®¡ç†ä¾èµ–åŒ…ã€‚ä¸‹é¢æ˜¯æˆ‘æ•´ç†çš„ npm å¸¸ç”¨å‘½ä»¤ã€‚\n```bash\nnpm init                   #  åˆå§‹åŒ–åŒ…ï¼Œè¦æ±‚å¡«å…¥åŒ…åç­‰ä¿¡æ¯\nnpm install <name>         #  æœ¬åœ°å®‰è£…ä¸€ä¸ªåŒ…\nnpm install <name> -g      #  å…¨å±€å®‰è£…ä¸€ä¸ªåŒ…\nnpm install <name> --save  #  æœ¬åœ°å®‰è£…å¹¶å†™å…¥ package.json ä¾èµ–ä¸­\nnpm remove <name>          #  ç§»é™¤\nnpm update <name>          #  æ›´æ–°\n\n```\n- æœ¬åœ°å®‰è£…ï¼šå°†å®‰è£…åŒ…æ”¾åœ¨ `./node_modules` ä¸‹ï¼ˆè¿è¡Œ npm å‘½ä»¤æ—¶æ‰€åœ¨çš„ç›®å½•ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ node_modules ç›®å½•ï¼Œä¼šåœ¨å½“å‰æ‰§è¡Œ npm å‘½ä»¤çš„ç›®å½•ä¸‹ç”Ÿæˆ node_modules ç›®å½•ã€‚å¯ä»¥é€šè¿‡ `require()` æ¥å¼•å…¥æœ¬åœ°å®‰è£…çš„åŒ…ã€‚\n- å…¨å±€å®‰è£…ï¼šå°†å®‰è£…åŒ…æ”¾åœ¨ `/usr/local` ä¸‹æˆ–è€…ä½  node çš„å®‰è£…ç›®å½•ï¼Œå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨ã€‚\n","source":"_posts/Node.JS-å­¦ä¹ ç¬”è®°-[01]----å…¥é—¨.md","raw":"---\ntitle: 'Node.JS å­¦ä¹ ç¬”è®° [01] -- å…¥é—¨'\ndate: 2015-1-2 19:00:24\ntags:\ncomments: false\n---\n\næ•´ç†è®°å½• Node.js å­¦ä¹ ç¬”è®°ï¼Œä½œä¸ºå‰ç«¯äººå‘˜ï¼Œéå¸¸æœ‰å¿…è¦äº†è§£åç«¯çš„ä¸€äº›çŸ¥è¯†ï¼Œæ–¹ä¾¿ä¸åç«¯çš„åŒäº‹åä½œï¼Œæé«˜æ•ˆç‡ï¼Œæå¥½å‰ç«¯åï¼Œä¹Ÿå¯ä»¥å°è¯•å¾€åç«¯å‘å±•ï¼Œæˆä¸ºä¸€åå…¨æ ˆå·¥ç¨‹å¸ˆï¼:P\n<!-- more -->\n![](http://ww4.sinaimg.cn/mw690/6057861cgw1fb6vlzd7i7j20go08cjro.jpg)\n### Node.js ä»‹ç»\nNode.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒã€‚Node.js ä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ã€éé˜»å¡å¼ I/O çš„æ¨¡å‹ï¼Œä½¿å…¶è½»é‡åˆé«˜æ•ˆã€‚Node.js çš„åŒ…ç®¡ç†å™¨ npmï¼Œæ˜¯å…¨çƒæœ€å¤§çš„å¼€æºåº“ç”Ÿæ€ç³»ç»Ÿã€‚\n\n#### Node.js å’Œ JavaScript çš„åŒºåˆ«\n- Node.js æ˜¯ä¸€ä¸ªå¯ä»¥è¿è¡Œ JavaScript çš„å¹³å°ï¼ŒåŸºäº ChromeV8 å¼•æ“ï¼Œæ˜¯å¯¹ JavaScript çš„å¢å¼ºï¼Œä½¿ JavaScript å…·å¤‡äº†æœåŠ¡å™¨è¯­è¨€çš„å¼€å‘èƒ½åŠ›ï¼Œæ¯”å¦‚æ“ä½œæ–‡ä»¶ã€è¯»å–ç³»ç»Ÿä¿¡æ¯ã€ç½‘ç»œä¼ è¾“ç­‰ã€‚\n- JavaScript æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œåªè¦æœ‰ JavaScript å¼•æ“å°±èƒ½è¿è¡Œå¹¶ä¸”å¦‚æœ JavaScript è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ï¼Œæµè§ˆå™¨å¯¹ JavaScript åŠ å…¥äº†æµè§ˆå™¨å’Œæ–‡æ¡£æ“ä½œçš„æ¥å£ï¼ˆæ–¹æ³•ï¼‰ã€‚\n\n<div class=\"tip\">\nç®€å•ç†è§£ï¼šæµè§ˆå™¨ä¸­ JavaScript ä¸»è¦æ˜¯æ“ä½œ BOM å’Œ DOMï¼Œè€Œ Node.js åˆ™æ˜¯å…·æœ‰æœåŠ¡ç«¯è¯­è¨€å¤„ç†èƒ½åŠ›ï¼ˆå¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œä¿å­˜æ•°æ®åˆ°æ•°æ®åº“ç­‰ï¼‰ã€‚\n</div>\n\n#### å®˜æ–¹ç½‘ç«™\n- è‹±æ–‡ç¤¾åŒºï¼š https://www.npmjs.com/\n- ä¸­æ–‡ç¤¾åŒºï¼šhttp://cnodejs.org/\n\n#### Node.js å®‰è£…åŠè¿è¡Œ\nåœ¨ Node.js çš„å®˜æ–¹æä¾›çš„[ä¸‹è½½é¢‘é“](https://nodejs.org/en/download/)é€‰æ‹©å¯¹åº”çš„å¹³å°åŠå®‰è£…ç¨‹åºå®‰è£…å³å¯ã€‚Node.js æä¾›äº† `REPLï¼ˆRead-Evaluate-Print-Loopï¼‰` æ¨¡å¼ï¼Œå³ ***äº¤äº’å¼å‘½ä»¤è¡Œè§£æå™¨***ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥å‘½ä»¤è¡Œï¼Œç¼–å†™ Node.js ä»£ç ã€‚å®‰è£…æˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯é‡Œè¾“å…¥ `node -v` è·å–å½“å‰çš„ Node.js ç‰ˆæœ¬å·ï¼Œèƒ½è·å–è¡¨ç¤ºæˆåŠŸå®‰è£…ã€‚\n\n### Node.js æ¨¡å—\næ¨¡å—å¯¹äº Node.js æ¥è¯´æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œä¸€ä¸ªç‰¹å®šåŠŸèƒ½çš„æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚æ¨¡å—ä¹‹é—´å¯èƒ½ä¼šå­˜åœ¨ä¸€å®šçš„ä¾èµ–å…³ç³»ï¼Œæ¯”å¦‚æˆ‘å†™äº†ä¸€ä¸ª jQuery è½®æ’­çš„æ’ä»¶ï¼Œå®ƒå°±ä¾èµ– jQuery åº“ï¼Œåœ¨ Node.js ä¸­å¯ä»¥éå¸¸æ–¹ä¾¿çš„è¡¨ç¤ºæ¸…æ¥šè¿™ç§ä¾èµ–å…³ç³»ã€‚è¯´åˆ°æ¨¡å—ï¼Œè¿˜éœ€è¦è¯´ä¸€ä¸ªå°±æ˜¯ç¼–å†™æ¨¡å—çš„è§„èŒƒã€‚\n\n#### æ¨¡å—è§„èŒƒ\n- ***AMD*** (Asynchronous Module Definition)ï¼Œè¿™ç§è§„èŒƒæ˜¯å¼‚æ­¥çš„åŠ è½½æ¨¡å—ï¼ŒRequireR.js åº”ç”¨äº†è¿™ä¸€è§„èŒƒ,é€‚åˆå®¢æˆ·ç«¯æµè§ˆå™¨ç¯å¢ƒã€‚\n- ***CMD*** (Common Module Definition), æ˜¯ Sea.js æ¨å´‡çš„è§„èŒƒã€‚\n- ***CommonJS*** , æ˜¯è¯ç”Ÿæ¯”è¾ƒæ—©çš„ã€‚Node.js å°±é‡‡ç”¨äº† CommonJS çš„è§„èŒƒæ¥å®šä¹‰æ¨¡å—ã€‚ä½†æ˜¯ CommonJs é‡‡ç”¨çš„æ˜¯åŒæ­¥åŠ è½½æ–‡ä»¶æ–¹å¼ï¼Œåªé€‚ç”¨äºæœåŠ¡ç«¯ï¼ˆNode.js å¹³å°ï¼‰ã€‚\n\n#### ä½¿ç”¨æ¨¡å—\næ¨¡å—å®šä¹‰å®Œæˆåï¼Œå°±å¯ä»¥ä½¿ç”¨æ¨¡å—ï¼Œé€šè¿‡å‘½ä»¤è¡Œå‚æ•°ä¼ é€’ç»™ Node.js ä»¥å¯åŠ¨ç¨‹åºçš„æ¨¡å—è¢«ç§°ä¸º ***ä¸»æ¨¡å—***ã€‚ä¸»æ¨¡å—è´Ÿè´£è°ƒåº¦ç»„æˆæ•´ä¸ªç¨‹åºçš„å…¶å®ƒæ¨¡å—å®Œæˆå·¥ä½œã€‚å…¶å®å°±ç±»ä¼¼ç½‘ç«™ä¸­çš„ `index.html`ï¼ŒNode.js ä¸­çš„ä¸»æ¨¡å—é€šå¸¸æ˜¯ `main.js` æˆ–è€… `index.js`ã€‚\n```js\nvar http = require('http');// é€šè¿‡ require å¼•å…¥ http æ¨¡å—\n```\n\n#### æ¨¡å—ç»„æˆ\nåœ¨ä¸Šæ¡å‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ require å¼•å…¥äº†ä¸€ä¸ª http æ¨¡å—ï¼Œå®é™…ä¸Šä½œä¸ºä¸€ä¸ªå•ç‹¬çš„æ¨¡å—æ–‡ä»¶ï¼ŒNode.js ä¸ºæˆ‘ä»¬åœ¨å¤–å±‚åµŒå¥—äº†ä¸€ä¸ªå‡½æ•°ï¼Œæ­£å› ä¸ºæœ‰äº†è¿™ä¸ªå‡½æ•°ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å£°æ˜çš„å˜é‡å°±æ˜¯ç§æœ‰å˜é‡å•¦ï¼Œé‚£ä¹ˆæ¯ä¸ªæ¨¡å—ä¹‹é—´å°±ä¸ä¼šäº§ç”Ÿå¹²æ‰°äº†ã€‚é‚£ä¹ˆæ¥çœ‹çœ‹è¿™ä¸ªå‡½æ•°é•¿ä»€ä¹ˆæ ·å­ã€‚\n```js\nfunction (exports, require, module, __filename, __dirname) {\n    var http = require('http');// é€šè¿‡ require å¼•å…¥ http æ¨¡å—\n}\n```\næœ€å¤–å±‚ï¼ŒNode.js ä¸ºæˆ‘ä»¬çš„ä»£ç åŒ…è£¹äº†è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼ å…¥äº†å‡ ä¸ªå‚æ•°ï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹ï¼š\n- exports ï¼šç”¨äºåœ¨å½“å‰æ¨¡å—ä¸­åŠ è½½å’Œä½¿ç”¨åˆ«çš„æ¨¡å—ï¼Œä¼ å…¥ä¸€ä¸ªæ¨¡å—åï¼Œè¿”å›ä¸€ä¸ªæ¨¡å—å¯¼å‡ºå¯¹è±¡ã€‚\n- requireï¼šå½“å‰æ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ï¼Œç”¨äºå¯¼å‡ºæ¨¡å—å…¬æœ‰æ–¹æ³•å’Œå±æ€§ã€‚\n- moduleï¼šè®¿é—®åˆ°å½“å‰æ¨¡å—çš„ä¸€äº›ç›¸å…³ä¿¡æ¯ï¼Œä½†æœ€å¤šçš„ç”¨é€”æ˜¯æ›¿æ¢å½“å‰æ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ã€‚\n- __filenameï¼šå½“å‰æ¨¡å—çš„æ–‡ä»¶å\n- __dirnameï¼šå½“å‰æ¨¡å—çš„ç›®å½•å\n\n#### æ¨¡å—åˆ†ç±»\nNode.js æä¾›ä¸¤ç§æ¨¡å—ç±»å‹ï¼š\n1. æ ¸å¿ƒæ¨¡å—ï¼šæ˜¯ç”± Node.js å¹³å°æä¾›çš„æ¨¡å—ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºâ€œç³»ç»Ÿæ¨¡å—â€ã€‚\n2. æ–‡ä»¶æ¨¡å—ï¼šä»¥ `..` æˆ– `.` å’Œ `/` å¼€å§‹çš„æ ‡è¯†ç¬¦ï¼Œè¿™é‡Œéƒ½è¢«å½“åšæ–‡ä»¶æ¨¡å—æ¥å¤„ç†ã€‚\n\n#### node_modules æ–‡ä»¶å¤¹\nè¯¥æ–‡ä»¶å¤¹æ˜¯ Node.js ä¸­çš„ç‰¹æ®Šæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾ node æ¨¡å—ï¼Œå¦‚æœä¸€ä¸ªæ¨¡å—æ—¢ä¸æ˜¯ç³»ç»Ÿæ¨¡å—ï¼Œä¹Ÿä¸æ˜¯æ–‡ä»¶æ¨¡å—ï¼Œé‚£ä¹ˆå®ƒä¼šè¢«å­˜æ”¾åœ¨ node_modules æ–‡ä»¶å¤¹ä¸­ã€‚ä½¿ç”¨ `console.log(module.paths);` å¯ä»¥æ‰“å° Node.js ä¼šéå†çš„ node_modules ç›®å½•ã€‚\n```js\n[ '/Users/wangmingming/Documents/Projects/JSstudy/12.26/node_modules',\n  '/Users/wangmingming/Documents/Projects/JSstudy/node_modules',\n  '/Users/wangmingming/Documents/Projects/node_modules',\n  '/Users/wangmingming/Documents/node_modules',\n  '/Users/wangmingming/node_modules',\n  '/Users/node_modules',\n  '/node_modules' ]\n```\n<div class=\"tip\">\nåœ¨è°ƒç”¨ä¸€ä¸ªæ¨¡å—æ—¶ï¼ŒNode.js æ²¿è·¯å¾„å‘ä¸Šé€çº§é€’å½’ï¼Œç›´åˆ°æ ¹ç›®å½•ä¸‹çš„ node_modules ç›®å½•ã€‚CommonJS æ¨¡è§„èŒƒä¹Ÿå…è®¸åœ¨æ ‡è¯†ç¬¦ä¸­ä¸åŒ…å«æ–‡ä»¶æ‰©å±•åï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒNode ä¼šæŒ‰ jsã€jsonã€node çš„æ¬¡åºè¡¥è¶³æ‰©å±•åï¼Œä¾æ¬¡å°è¯•ã€‚\n</div>\n\n### åŒ… (Package)\næŠŠç”±å¤šä¸ªå­æ¨¡å—ç»„æˆçš„å¤§æ¨¡å—ç§°åšåŒ…ï¼Œå¹¶æŠŠæ‰€æœ‰å­æ¨¡å—æ”¾åœ¨åŒä¸€ä¸ªç›®å½•é‡Œã€‚åœ¨ä¸€ä¸ªåŒ…ä¸­ï¼Œä¼šç”¨ `package.json` æ–‡ä»¶ä¸­çš„ `main` å±æ€§ç”¨æ¥æè¿°è¿™ä¸ªåŒ…çš„ä¸»æ–‡ä»¶ã€‚\n\n#### NPM (Node Package Manager)\nå¤§åé¼é¼çš„ NPM å®é™…ä¸Šå°±æ˜¯ç”¨æ¥ç®¡ç†åŒ…çš„ä¸€ä¸ªå·¥å…·ï¼Œå€ŸåŠ© NPM æˆ‘ä»¬å¯ä»¥å¿«é€Ÿçš„å®‰è£…å’Œç®¡ç†ä¾èµ–åŒ…ã€‚ä¸‹é¢æ˜¯æˆ‘æ•´ç†çš„ npm å¸¸ç”¨å‘½ä»¤ã€‚\n```bash\nnpm init                   #  åˆå§‹åŒ–åŒ…ï¼Œè¦æ±‚å¡«å…¥åŒ…åç­‰ä¿¡æ¯\nnpm install <name>         #  æœ¬åœ°å®‰è£…ä¸€ä¸ªåŒ…\nnpm install <name> -g      #  å…¨å±€å®‰è£…ä¸€ä¸ªåŒ…\nnpm install <name> --save  #  æœ¬åœ°å®‰è£…å¹¶å†™å…¥ package.json ä¾èµ–ä¸­\nnpm remove <name>          #  ç§»é™¤\nnpm update <name>          #  æ›´æ–°\n\n```\n- æœ¬åœ°å®‰è£…ï¼šå°†å®‰è£…åŒ…æ”¾åœ¨ `./node_modules` ä¸‹ï¼ˆè¿è¡Œ npm å‘½ä»¤æ—¶æ‰€åœ¨çš„ç›®å½•ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ node_modules ç›®å½•ï¼Œä¼šåœ¨å½“å‰æ‰§è¡Œ npm å‘½ä»¤çš„ç›®å½•ä¸‹ç”Ÿæˆ node_modules ç›®å½•ã€‚å¯ä»¥é€šè¿‡ `require()` æ¥å¼•å…¥æœ¬åœ°å®‰è£…çš„åŒ…ã€‚\n- å…¨å±€å®‰è£…ï¼šå°†å®‰è£…åŒ…æ”¾åœ¨ `/usr/local` ä¸‹æˆ–è€…ä½  node çš„å®‰è£…ç›®å½•ï¼Œå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨ã€‚\n","slug":"Node.JS-å­¦ä¹ ç¬”è®°-[01]----å…¥é—¨","published":1,"updated":"2019-12-07T04:59:33.895Z","layout":"post","photos":[],"link":"","_id":"ck3v60jtb000ar9q90mhsaep4","content":"<p>æ•´ç†è®°å½• Node.js å­¦ä¹ ç¬”è®°ï¼Œä½œä¸ºå‰ç«¯äººå‘˜ï¼Œéå¸¸æœ‰å¿…è¦äº†è§£åç«¯çš„ä¸€äº›çŸ¥è¯†ï¼Œæ–¹ä¾¿ä¸åç«¯çš„åŒäº‹åä½œï¼Œæé«˜æ•ˆç‡ï¼Œæå¥½å‰ç«¯åï¼Œä¹Ÿå¯ä»¥å°è¯•å¾€åç«¯å‘å±•ï¼Œæˆä¸ºä¸€åå…¨æ ˆå·¥ç¨‹å¸ˆï¼:P<br><a id=\"more\"></a><br><img src=\"http://ww4.sinaimg.cn/mw690/6057861cgw1fb6vlzd7i7j20go08cjro.jpg\" alt=\"\"></p>\n<h3 id=\"Node-js-ä»‹ç»\"><a href=\"#Node-js-ä»‹ç»\" class=\"headerlink\" title=\"Node.js ä»‹ç»\"></a>Node.js ä»‹ç»</h3><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒã€‚Node.js ä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ã€éé˜»å¡å¼ I/O çš„æ¨¡å‹ï¼Œä½¿å…¶è½»é‡åˆé«˜æ•ˆã€‚Node.js çš„åŒ…ç®¡ç†å™¨ npmï¼Œæ˜¯å…¨çƒæœ€å¤§çš„å¼€æºåº“ç”Ÿæ€ç³»ç»Ÿã€‚</p>\n<h4 id=\"Node-js-å’Œ-JavaScript-çš„åŒºåˆ«\"><a href=\"#Node-js-å’Œ-JavaScript-çš„åŒºåˆ«\" class=\"headerlink\" title=\"Node.js å’Œ JavaScript çš„åŒºåˆ«\"></a>Node.js å’Œ JavaScript çš„åŒºåˆ«</h4><ul>\n<li>Node.js æ˜¯ä¸€ä¸ªå¯ä»¥è¿è¡Œ JavaScript çš„å¹³å°ï¼ŒåŸºäº ChromeV8 å¼•æ“ï¼Œæ˜¯å¯¹ JavaScript çš„å¢å¼ºï¼Œä½¿ JavaScript å…·å¤‡äº†æœåŠ¡å™¨è¯­è¨€çš„å¼€å‘èƒ½åŠ›ï¼Œæ¯”å¦‚æ“ä½œæ–‡ä»¶ã€è¯»å–ç³»ç»Ÿä¿¡æ¯ã€ç½‘ç»œä¼ è¾“ç­‰ã€‚</li>\n<li>JavaScript æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œåªè¦æœ‰ JavaScript å¼•æ“å°±èƒ½è¿è¡Œå¹¶ä¸”å¦‚æœ JavaScript è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ï¼Œæµè§ˆå™¨å¯¹ JavaScript åŠ å…¥äº†æµè§ˆå™¨å’Œæ–‡æ¡£æ“ä½œçš„æ¥å£ï¼ˆæ–¹æ³•ï¼‰ã€‚</li>\n</ul>\n<div class=\"tip\"><br>ç®€å•ç†è§£ï¼šæµè§ˆå™¨ä¸­ JavaScript ä¸»è¦æ˜¯æ“ä½œ BOM å’Œ DOMï¼Œè€Œ Node.js åˆ™æ˜¯å…·æœ‰æœåŠ¡ç«¯è¯­è¨€å¤„ç†èƒ½åŠ›ï¼ˆå¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œä¿å­˜æ•°æ®åˆ°æ•°æ®åº“ç­‰ï¼‰ã€‚<br></div>\n\n<h4 id=\"å®˜æ–¹ç½‘ç«™\"><a href=\"#å®˜æ–¹ç½‘ç«™\" class=\"headerlink\" title=\"å®˜æ–¹ç½‘ç«™\"></a>å®˜æ–¹ç½‘ç«™</h4><ul>\n<li>è‹±æ–‡ç¤¾åŒºï¼š <a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"noopener\">https://www.npmjs.com/</a></li>\n<li>ä¸­æ–‡ç¤¾åŒºï¼š<a href=\"http://cnodejs.org/\" target=\"_blank\" rel=\"noopener\">http://cnodejs.org/</a></li>\n</ul>\n<h4 id=\"Node-js-å®‰è£…åŠè¿è¡Œ\"><a href=\"#Node-js-å®‰è£…åŠè¿è¡Œ\" class=\"headerlink\" title=\"Node.js å®‰è£…åŠè¿è¡Œ\"></a>Node.js å®‰è£…åŠè¿è¡Œ</h4><p>åœ¨ Node.js çš„å®˜æ–¹æä¾›çš„<a href=\"https://nodejs.org/en/download/\" target=\"_blank\" rel=\"noopener\">ä¸‹è½½é¢‘é“</a>é€‰æ‹©å¯¹åº”çš„å¹³å°åŠå®‰è£…ç¨‹åºå®‰è£…å³å¯ã€‚Node.js æä¾›äº† <code>REPLï¼ˆRead-Evaluate-Print-Loopï¼‰</code> æ¨¡å¼ï¼Œå³ <strong><em>äº¤äº’å¼å‘½ä»¤è¡Œè§£æå™¨</em></strong>ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥å‘½ä»¤è¡Œï¼Œç¼–å†™ Node.js ä»£ç ã€‚å®‰è£…æˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯é‡Œè¾“å…¥ <code>node -v</code> è·å–å½“å‰çš„ Node.js ç‰ˆæœ¬å·ï¼Œèƒ½è·å–è¡¨ç¤ºæˆåŠŸå®‰è£…ã€‚</p>\n<h3 id=\"Node-js-æ¨¡å—\"><a href=\"#Node-js-æ¨¡å—\" class=\"headerlink\" title=\"Node.js æ¨¡å—\"></a>Node.js æ¨¡å—</h3><p>æ¨¡å—å¯¹äº Node.js æ¥è¯´æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œä¸€ä¸ªç‰¹å®šåŠŸèƒ½çš„æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚æ¨¡å—ä¹‹é—´å¯èƒ½ä¼šå­˜åœ¨ä¸€å®šçš„ä¾èµ–å…³ç³»ï¼Œæ¯”å¦‚æˆ‘å†™äº†ä¸€ä¸ª jQuery è½®æ’­çš„æ’ä»¶ï¼Œå®ƒå°±ä¾èµ– jQuery åº“ï¼Œåœ¨ Node.js ä¸­å¯ä»¥éå¸¸æ–¹ä¾¿çš„è¡¨ç¤ºæ¸…æ¥šè¿™ç§ä¾èµ–å…³ç³»ã€‚è¯´åˆ°æ¨¡å—ï¼Œè¿˜éœ€è¦è¯´ä¸€ä¸ªå°±æ˜¯ç¼–å†™æ¨¡å—çš„è§„èŒƒã€‚</p>\n<h4 id=\"æ¨¡å—è§„èŒƒ\"><a href=\"#æ¨¡å—è§„èŒƒ\" class=\"headerlink\" title=\"æ¨¡å—è§„èŒƒ\"></a>æ¨¡å—è§„èŒƒ</h4><ul>\n<li><strong><em>AMD</em></strong> (Asynchronous Module Definition)ï¼Œè¿™ç§è§„èŒƒæ˜¯å¼‚æ­¥çš„åŠ è½½æ¨¡å—ï¼ŒRequireR.js åº”ç”¨äº†è¿™ä¸€è§„èŒƒ,é€‚åˆå®¢æˆ·ç«¯æµè§ˆå™¨ç¯å¢ƒã€‚</li>\n<li><strong><em>CMD</em></strong> (Common Module Definition), æ˜¯ Sea.js æ¨å´‡çš„è§„èŒƒã€‚</li>\n<li><strong><em>CommonJS</em></strong> , æ˜¯è¯ç”Ÿæ¯”è¾ƒæ—©çš„ã€‚Node.js å°±é‡‡ç”¨äº† CommonJS çš„è§„èŒƒæ¥å®šä¹‰æ¨¡å—ã€‚ä½†æ˜¯ CommonJs é‡‡ç”¨çš„æ˜¯åŒæ­¥åŠ è½½æ–‡ä»¶æ–¹å¼ï¼Œåªé€‚ç”¨äºæœåŠ¡ç«¯ï¼ˆNode.js å¹³å°ï¼‰ã€‚</li>\n</ul>\n<h4 id=\"ä½¿ç”¨æ¨¡å—\"><a href=\"#ä½¿ç”¨æ¨¡å—\" class=\"headerlink\" title=\"ä½¿ç”¨æ¨¡å—\"></a>ä½¿ç”¨æ¨¡å—</h4><p>æ¨¡å—å®šä¹‰å®Œæˆåï¼Œå°±å¯ä»¥ä½¿ç”¨æ¨¡å—ï¼Œé€šè¿‡å‘½ä»¤è¡Œå‚æ•°ä¼ é€’ç»™ Node.js ä»¥å¯åŠ¨ç¨‹åºçš„æ¨¡å—è¢«ç§°ä¸º <strong><em>ä¸»æ¨¡å—</em></strong>ã€‚ä¸»æ¨¡å—è´Ÿè´£è°ƒåº¦ç»„æˆæ•´ä¸ªç¨‹åºçš„å…¶å®ƒæ¨¡å—å®Œæˆå·¥ä½œã€‚å…¶å®å°±ç±»ä¼¼ç½‘ç«™ä¸­çš„ <code>index.html</code>ï¼ŒNode.js ä¸­çš„ä¸»æ¨¡å—é€šå¸¸æ˜¯ <code>main.js</code> æˆ–è€… <code>index.js</code>ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>);<span class=\"comment\">// é€šè¿‡ require å¼•å…¥ http æ¨¡å—</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"æ¨¡å—ç»„æˆ\"><a href=\"#æ¨¡å—ç»„æˆ\" class=\"headerlink\" title=\"æ¨¡å—ç»„æˆ\"></a>æ¨¡å—ç»„æˆ</h4><p>åœ¨ä¸Šæ¡å‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ require å¼•å…¥äº†ä¸€ä¸ª http æ¨¡å—ï¼Œå®é™…ä¸Šä½œä¸ºä¸€ä¸ªå•ç‹¬çš„æ¨¡å—æ–‡ä»¶ï¼ŒNode.js ä¸ºæˆ‘ä»¬åœ¨å¤–å±‚åµŒå¥—äº†ä¸€ä¸ªå‡½æ•°ï¼Œæ­£å› ä¸ºæœ‰äº†è¿™ä¸ªå‡½æ•°ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å£°æ˜çš„å˜é‡å°±æ˜¯ç§æœ‰å˜é‡å•¦ï¼Œé‚£ä¹ˆæ¯ä¸ªæ¨¡å—ä¹‹é—´å°±ä¸ä¼šäº§ç”Ÿå¹²æ‰°äº†ã€‚é‚£ä¹ˆæ¥çœ‹çœ‹è¿™ä¸ªå‡½æ•°é•¿ä»€ä¹ˆæ ·å­ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">exports, require, module, __filename, __dirname</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>);<span class=\"comment\">// é€šè¿‡ require å¼•å…¥ http æ¨¡å—</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æœ€å¤–å±‚ï¼ŒNode.js ä¸ºæˆ‘ä»¬çš„ä»£ç åŒ…è£¹äº†è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼ å…¥äº†å‡ ä¸ªå‚æ•°ï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹ï¼š</p>\n<ul>\n<li>exports ï¼šç”¨äºåœ¨å½“å‰æ¨¡å—ä¸­åŠ è½½å’Œä½¿ç”¨åˆ«çš„æ¨¡å—ï¼Œä¼ å…¥ä¸€ä¸ªæ¨¡å—åï¼Œè¿”å›ä¸€ä¸ªæ¨¡å—å¯¼å‡ºå¯¹è±¡ã€‚</li>\n<li>requireï¼šå½“å‰æ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ï¼Œç”¨äºå¯¼å‡ºæ¨¡å—å…¬æœ‰æ–¹æ³•å’Œå±æ€§ã€‚</li>\n<li>moduleï¼šè®¿é—®åˆ°å½“å‰æ¨¡å—çš„ä¸€äº›ç›¸å…³ä¿¡æ¯ï¼Œä½†æœ€å¤šçš„ç”¨é€”æ˜¯æ›¿æ¢å½“å‰æ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ã€‚</li>\n<li>__filenameï¼šå½“å‰æ¨¡å—çš„æ–‡ä»¶å</li>\n<li>__dirnameï¼šå½“å‰æ¨¡å—çš„ç›®å½•å</li>\n</ul>\n<h4 id=\"æ¨¡å—åˆ†ç±»\"><a href=\"#æ¨¡å—åˆ†ç±»\" class=\"headerlink\" title=\"æ¨¡å—åˆ†ç±»\"></a>æ¨¡å—åˆ†ç±»</h4><p>Node.js æä¾›ä¸¤ç§æ¨¡å—ç±»å‹ï¼š</p>\n<ol>\n<li>æ ¸å¿ƒæ¨¡å—ï¼šæ˜¯ç”± Node.js å¹³å°æä¾›çš„æ¨¡å—ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºâ€œç³»ç»Ÿæ¨¡å—â€ã€‚</li>\n<li>æ–‡ä»¶æ¨¡å—ï¼šä»¥ <code>..</code> æˆ– <code>.</code> å’Œ <code>/</code> å¼€å§‹çš„æ ‡è¯†ç¬¦ï¼Œè¿™é‡Œéƒ½è¢«å½“åšæ–‡ä»¶æ¨¡å—æ¥å¤„ç†ã€‚</li>\n</ol>\n<h4 id=\"node-modules-æ–‡ä»¶å¤¹\"><a href=\"#node-modules-æ–‡ä»¶å¤¹\" class=\"headerlink\" title=\"node_modules æ–‡ä»¶å¤¹\"></a>node_modules æ–‡ä»¶å¤¹</h4><p>è¯¥æ–‡ä»¶å¤¹æ˜¯ Node.js ä¸­çš„ç‰¹æ®Šæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾ node æ¨¡å—ï¼Œå¦‚æœä¸€ä¸ªæ¨¡å—æ—¢ä¸æ˜¯ç³»ç»Ÿæ¨¡å—ï¼Œä¹Ÿä¸æ˜¯æ–‡ä»¶æ¨¡å—ï¼Œé‚£ä¹ˆå®ƒä¼šè¢«å­˜æ”¾åœ¨ node_modules æ–‡ä»¶å¤¹ä¸­ã€‚ä½¿ç”¨ <code>console.log(module.paths);</code> å¯ä»¥æ‰“å° Node.js ä¼šéå†çš„ node_modules ç›®å½•ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[ <span class=\"string\">'/Users/wangmingming/Documents/Projects/JSstudy/12.26/node_modules'</span>,</span><br><span class=\"line\">  <span class=\"string\">'/Users/wangmingming/Documents/Projects/JSstudy/node_modules'</span>,</span><br><span class=\"line\">  <span class=\"string\">'/Users/wangmingming/Documents/Projects/node_modules'</span>,</span><br><span class=\"line\">  <span class=\"string\">'/Users/wangmingming/Documents/node_modules'</span>,</span><br><span class=\"line\">  <span class=\"string\">'/Users/wangmingming/node_modules'</span>,</span><br><span class=\"line\">  <span class=\"string\">'/Users/node_modules'</span>,</span><br><span class=\"line\">  <span class=\"string\">'/node_modules'</span> ]</span><br></pre></td></tr></table></figure></p>\n<div class=\"tip\"><br>åœ¨è°ƒç”¨ä¸€ä¸ªæ¨¡å—æ—¶ï¼ŒNode.js æ²¿è·¯å¾„å‘ä¸Šé€çº§é€’å½’ï¼Œç›´åˆ°æ ¹ç›®å½•ä¸‹çš„ node_modules ç›®å½•ã€‚CommonJS æ¨¡è§„èŒƒä¹Ÿå…è®¸åœ¨æ ‡è¯†ç¬¦ä¸­ä¸åŒ…å«æ–‡ä»¶æ‰©å±•åï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒNode ä¼šæŒ‰ jsã€jsonã€node çš„æ¬¡åºè¡¥è¶³æ‰©å±•åï¼Œä¾æ¬¡å°è¯•ã€‚<br></div>\n\n<h3 id=\"åŒ…-Package\"><a href=\"#åŒ…-Package\" class=\"headerlink\" title=\"åŒ… (Package)\"></a>åŒ… (Package)</h3><p>æŠŠç”±å¤šä¸ªå­æ¨¡å—ç»„æˆçš„å¤§æ¨¡å—ç§°åšåŒ…ï¼Œå¹¶æŠŠæ‰€æœ‰å­æ¨¡å—æ”¾åœ¨åŒä¸€ä¸ªç›®å½•é‡Œã€‚åœ¨ä¸€ä¸ªåŒ…ä¸­ï¼Œä¼šç”¨ <code>package.json</code> æ–‡ä»¶ä¸­çš„ <code>main</code> å±æ€§ç”¨æ¥æè¿°è¿™ä¸ªåŒ…çš„ä¸»æ–‡ä»¶ã€‚</p>\n<h4 id=\"NPM-Node-Package-Manager\"><a href=\"#NPM-Node-Package-Manager\" class=\"headerlink\" title=\"NPM (Node Package Manager)\"></a>NPM (Node Package Manager)</h4><p>å¤§åé¼é¼çš„ NPM å®é™…ä¸Šå°±æ˜¯ç”¨æ¥ç®¡ç†åŒ…çš„ä¸€ä¸ªå·¥å…·ï¼Œå€ŸåŠ© NPM æˆ‘ä»¬å¯ä»¥å¿«é€Ÿçš„å®‰è£…å’Œç®¡ç†ä¾èµ–åŒ…ã€‚ä¸‹é¢æ˜¯æˆ‘æ•´ç†çš„ npm å¸¸ç”¨å‘½ä»¤ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm init                   <span class=\"comment\">#  åˆå§‹åŒ–åŒ…ï¼Œè¦æ±‚å¡«å…¥åŒ…åç­‰ä¿¡æ¯</span></span><br><span class=\"line\">npm install &lt;name&gt;         <span class=\"comment\">#  æœ¬åœ°å®‰è£…ä¸€ä¸ªåŒ…</span></span><br><span class=\"line\">npm install &lt;name&gt; -g      <span class=\"comment\">#  å…¨å±€å®‰è£…ä¸€ä¸ªåŒ…</span></span><br><span class=\"line\">npm install &lt;name&gt; --save  <span class=\"comment\">#  æœ¬åœ°å®‰è£…å¹¶å†™å…¥ package.json ä¾èµ–ä¸­</span></span><br><span class=\"line\">npm remove &lt;name&gt;          <span class=\"comment\">#  ç§»é™¤</span></span><br><span class=\"line\">npm update &lt;name&gt;          <span class=\"comment\">#  æ›´æ–°</span></span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>æœ¬åœ°å®‰è£…ï¼šå°†å®‰è£…åŒ…æ”¾åœ¨ <code>./node_modules</code> ä¸‹ï¼ˆè¿è¡Œ npm å‘½ä»¤æ—¶æ‰€åœ¨çš„ç›®å½•ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ node_modules ç›®å½•ï¼Œä¼šåœ¨å½“å‰æ‰§è¡Œ npm å‘½ä»¤çš„ç›®å½•ä¸‹ç”Ÿæˆ node_modules ç›®å½•ã€‚å¯ä»¥é€šè¿‡ <code>require()</code> æ¥å¼•å…¥æœ¬åœ°å®‰è£…çš„åŒ…ã€‚</li>\n<li>å…¨å±€å®‰è£…ï¼šå°†å®‰è£…åŒ…æ”¾åœ¨ <code>/usr/local</code> ä¸‹æˆ–è€…ä½  node çš„å®‰è£…ç›®å½•ï¼Œå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨ã€‚</li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>æ•´ç†è®°å½• Node.js å­¦ä¹ ç¬”è®°ï¼Œä½œä¸ºå‰ç«¯äººå‘˜ï¼Œéå¸¸æœ‰å¿…è¦äº†è§£åç«¯çš„ä¸€äº›çŸ¥è¯†ï¼Œæ–¹ä¾¿ä¸åç«¯çš„åŒäº‹åä½œï¼Œæé«˜æ•ˆç‡ï¼Œæå¥½å‰ç«¯åï¼Œä¹Ÿå¯ä»¥å°è¯•å¾€åç«¯å‘å±•ï¼Œæˆä¸ºä¸€åå…¨æ ˆå·¥ç¨‹å¸ˆï¼:P<br>","more":"<br><img src=\"http://ww4.sinaimg.cn/mw690/6057861cgw1fb6vlzd7i7j20go08cjro.jpg\" alt=\"\"></p>\n<h3 id=\"Node-js-ä»‹ç»\"><a href=\"#Node-js-ä»‹ç»\" class=\"headerlink\" title=\"Node.js ä»‹ç»\"></a>Node.js ä»‹ç»</h3><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒã€‚Node.js ä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ã€éé˜»å¡å¼ I/O çš„æ¨¡å‹ï¼Œä½¿å…¶è½»é‡åˆé«˜æ•ˆã€‚Node.js çš„åŒ…ç®¡ç†å™¨ npmï¼Œæ˜¯å…¨çƒæœ€å¤§çš„å¼€æºåº“ç”Ÿæ€ç³»ç»Ÿã€‚</p>\n<h4 id=\"Node-js-å’Œ-JavaScript-çš„åŒºåˆ«\"><a href=\"#Node-js-å’Œ-JavaScript-çš„åŒºåˆ«\" class=\"headerlink\" title=\"Node.js å’Œ JavaScript çš„åŒºåˆ«\"></a>Node.js å’Œ JavaScript çš„åŒºåˆ«</h4><ul>\n<li>Node.js æ˜¯ä¸€ä¸ªå¯ä»¥è¿è¡Œ JavaScript çš„å¹³å°ï¼ŒåŸºäº ChromeV8 å¼•æ“ï¼Œæ˜¯å¯¹ JavaScript çš„å¢å¼ºï¼Œä½¿ JavaScript å…·å¤‡äº†æœåŠ¡å™¨è¯­è¨€çš„å¼€å‘èƒ½åŠ›ï¼Œæ¯”å¦‚æ“ä½œæ–‡ä»¶ã€è¯»å–ç³»ç»Ÿä¿¡æ¯ã€ç½‘ç»œä¼ è¾“ç­‰ã€‚</li>\n<li>JavaScript æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œåªè¦æœ‰ JavaScript å¼•æ“å°±èƒ½è¿è¡Œå¹¶ä¸”å¦‚æœ JavaScript è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ï¼Œæµè§ˆå™¨å¯¹ JavaScript åŠ å…¥äº†æµè§ˆå™¨å’Œæ–‡æ¡£æ“ä½œçš„æ¥å£ï¼ˆæ–¹æ³•ï¼‰ã€‚</li>\n</ul>\n<div class=\"tip\"><br>ç®€å•ç†è§£ï¼šæµè§ˆå™¨ä¸­ JavaScript ä¸»è¦æ˜¯æ“ä½œ BOM å’Œ DOMï¼Œè€Œ Node.js åˆ™æ˜¯å…·æœ‰æœåŠ¡ç«¯è¯­è¨€å¤„ç†èƒ½åŠ›ï¼ˆå¤„ç†ç½‘ç»œè¯·æ±‚ï¼Œä¿å­˜æ•°æ®åˆ°æ•°æ®åº“ç­‰ï¼‰ã€‚<br></div>\n\n<h4 id=\"å®˜æ–¹ç½‘ç«™\"><a href=\"#å®˜æ–¹ç½‘ç«™\" class=\"headerlink\" title=\"å®˜æ–¹ç½‘ç«™\"></a>å®˜æ–¹ç½‘ç«™</h4><ul>\n<li>è‹±æ–‡ç¤¾åŒºï¼š <a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"noopener\">https://www.npmjs.com/</a></li>\n<li>ä¸­æ–‡ç¤¾åŒºï¼š<a href=\"http://cnodejs.org/\" target=\"_blank\" rel=\"noopener\">http://cnodejs.org/</a></li>\n</ul>\n<h4 id=\"Node-js-å®‰è£…åŠè¿è¡Œ\"><a href=\"#Node-js-å®‰è£…åŠè¿è¡Œ\" class=\"headerlink\" title=\"Node.js å®‰è£…åŠè¿è¡Œ\"></a>Node.js å®‰è£…åŠè¿è¡Œ</h4><p>åœ¨ Node.js çš„å®˜æ–¹æä¾›çš„<a href=\"https://nodejs.org/en/download/\" target=\"_blank\" rel=\"noopener\">ä¸‹è½½é¢‘é“</a>é€‰æ‹©å¯¹åº”çš„å¹³å°åŠå®‰è£…ç¨‹åºå®‰è£…å³å¯ã€‚Node.js æä¾›äº† <code>REPLï¼ˆRead-Evaluate-Print-Loopï¼‰</code> æ¨¡å¼ï¼Œå³ <strong><em>äº¤äº’å¼å‘½ä»¤è¡Œè§£æå™¨</em></strong>ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥å‘½ä»¤è¡Œï¼Œç¼–å†™ Node.js ä»£ç ã€‚å®‰è£…æˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯é‡Œè¾“å…¥ <code>node -v</code> è·å–å½“å‰çš„ Node.js ç‰ˆæœ¬å·ï¼Œèƒ½è·å–è¡¨ç¤ºæˆåŠŸå®‰è£…ã€‚</p>\n<h3 id=\"Node-js-æ¨¡å—\"><a href=\"#Node-js-æ¨¡å—\" class=\"headerlink\" title=\"Node.js æ¨¡å—\"></a>Node.js æ¨¡å—</h3><p>æ¨¡å—å¯¹äº Node.js æ¥è¯´æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œä¸€ä¸ªç‰¹å®šåŠŸèƒ½çš„æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚æ¨¡å—ä¹‹é—´å¯èƒ½ä¼šå­˜åœ¨ä¸€å®šçš„ä¾èµ–å…³ç³»ï¼Œæ¯”å¦‚æˆ‘å†™äº†ä¸€ä¸ª jQuery è½®æ’­çš„æ’ä»¶ï¼Œå®ƒå°±ä¾èµ– jQuery åº“ï¼Œåœ¨ Node.js ä¸­å¯ä»¥éå¸¸æ–¹ä¾¿çš„è¡¨ç¤ºæ¸…æ¥šè¿™ç§ä¾èµ–å…³ç³»ã€‚è¯´åˆ°æ¨¡å—ï¼Œè¿˜éœ€è¦è¯´ä¸€ä¸ªå°±æ˜¯ç¼–å†™æ¨¡å—çš„è§„èŒƒã€‚</p>\n<h4 id=\"æ¨¡å—è§„èŒƒ\"><a href=\"#æ¨¡å—è§„èŒƒ\" class=\"headerlink\" title=\"æ¨¡å—è§„èŒƒ\"></a>æ¨¡å—è§„èŒƒ</h4><ul>\n<li><strong><em>AMD</em></strong> (Asynchronous Module Definition)ï¼Œè¿™ç§è§„èŒƒæ˜¯å¼‚æ­¥çš„åŠ è½½æ¨¡å—ï¼ŒRequireR.js åº”ç”¨äº†è¿™ä¸€è§„èŒƒ,é€‚åˆå®¢æˆ·ç«¯æµè§ˆå™¨ç¯å¢ƒã€‚</li>\n<li><strong><em>CMD</em></strong> (Common Module Definition), æ˜¯ Sea.js æ¨å´‡çš„è§„èŒƒã€‚</li>\n<li><strong><em>CommonJS</em></strong> , æ˜¯è¯ç”Ÿæ¯”è¾ƒæ—©çš„ã€‚Node.js å°±é‡‡ç”¨äº† CommonJS çš„è§„èŒƒæ¥å®šä¹‰æ¨¡å—ã€‚ä½†æ˜¯ CommonJs é‡‡ç”¨çš„æ˜¯åŒæ­¥åŠ è½½æ–‡ä»¶æ–¹å¼ï¼Œåªé€‚ç”¨äºæœåŠ¡ç«¯ï¼ˆNode.js å¹³å°ï¼‰ã€‚</li>\n</ul>\n<h4 id=\"ä½¿ç”¨æ¨¡å—\"><a href=\"#ä½¿ç”¨æ¨¡å—\" class=\"headerlink\" title=\"ä½¿ç”¨æ¨¡å—\"></a>ä½¿ç”¨æ¨¡å—</h4><p>æ¨¡å—å®šä¹‰å®Œæˆåï¼Œå°±å¯ä»¥ä½¿ç”¨æ¨¡å—ï¼Œé€šè¿‡å‘½ä»¤è¡Œå‚æ•°ä¼ é€’ç»™ Node.js ä»¥å¯åŠ¨ç¨‹åºçš„æ¨¡å—è¢«ç§°ä¸º <strong><em>ä¸»æ¨¡å—</em></strong>ã€‚ä¸»æ¨¡å—è´Ÿè´£è°ƒåº¦ç»„æˆæ•´ä¸ªç¨‹åºçš„å…¶å®ƒæ¨¡å—å®Œæˆå·¥ä½œã€‚å…¶å®å°±ç±»ä¼¼ç½‘ç«™ä¸­çš„ <code>index.html</code>ï¼ŒNode.js ä¸­çš„ä¸»æ¨¡å—é€šå¸¸æ˜¯ <code>main.js</code> æˆ–è€… <code>index.js</code>ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>);<span class=\"comment\">// é€šè¿‡ require å¼•å…¥ http æ¨¡å—</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"æ¨¡å—ç»„æˆ\"><a href=\"#æ¨¡å—ç»„æˆ\" class=\"headerlink\" title=\"æ¨¡å—ç»„æˆ\"></a>æ¨¡å—ç»„æˆ</h4><p>åœ¨ä¸Šæ¡å‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ require å¼•å…¥äº†ä¸€ä¸ª http æ¨¡å—ï¼Œå®é™…ä¸Šä½œä¸ºä¸€ä¸ªå•ç‹¬çš„æ¨¡å—æ–‡ä»¶ï¼ŒNode.js ä¸ºæˆ‘ä»¬åœ¨å¤–å±‚åµŒå¥—äº†ä¸€ä¸ªå‡½æ•°ï¼Œæ­£å› ä¸ºæœ‰äº†è¿™ä¸ªå‡½æ•°ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å£°æ˜çš„å˜é‡å°±æ˜¯ç§æœ‰å˜é‡å•¦ï¼Œé‚£ä¹ˆæ¯ä¸ªæ¨¡å—ä¹‹é—´å°±ä¸ä¼šäº§ç”Ÿå¹²æ‰°äº†ã€‚é‚£ä¹ˆæ¥çœ‹çœ‹è¿™ä¸ªå‡½æ•°é•¿ä»€ä¹ˆæ ·å­ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">exports, require, module, __filename, __dirname</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>);<span class=\"comment\">// é€šè¿‡ require å¼•å…¥ http æ¨¡å—</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æœ€å¤–å±‚ï¼ŒNode.js ä¸ºæˆ‘ä»¬çš„ä»£ç åŒ…è£¹äº†è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼ å…¥äº†å‡ ä¸ªå‚æ•°ï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹ï¼š</p>\n<ul>\n<li>exports ï¼šç”¨äºåœ¨å½“å‰æ¨¡å—ä¸­åŠ è½½å’Œä½¿ç”¨åˆ«çš„æ¨¡å—ï¼Œä¼ å…¥ä¸€ä¸ªæ¨¡å—åï¼Œè¿”å›ä¸€ä¸ªæ¨¡å—å¯¼å‡ºå¯¹è±¡ã€‚</li>\n<li>requireï¼šå½“å‰æ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ï¼Œç”¨äºå¯¼å‡ºæ¨¡å—å…¬æœ‰æ–¹æ³•å’Œå±æ€§ã€‚</li>\n<li>moduleï¼šè®¿é—®åˆ°å½“å‰æ¨¡å—çš„ä¸€äº›ç›¸å…³ä¿¡æ¯ï¼Œä½†æœ€å¤šçš„ç”¨é€”æ˜¯æ›¿æ¢å½“å‰æ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ã€‚</li>\n<li>__filenameï¼šå½“å‰æ¨¡å—çš„æ–‡ä»¶å</li>\n<li>__dirnameï¼šå½“å‰æ¨¡å—çš„ç›®å½•å</li>\n</ul>\n<h4 id=\"æ¨¡å—åˆ†ç±»\"><a href=\"#æ¨¡å—åˆ†ç±»\" class=\"headerlink\" title=\"æ¨¡å—åˆ†ç±»\"></a>æ¨¡å—åˆ†ç±»</h4><p>Node.js æä¾›ä¸¤ç§æ¨¡å—ç±»å‹ï¼š</p>\n<ol>\n<li>æ ¸å¿ƒæ¨¡å—ï¼šæ˜¯ç”± Node.js å¹³å°æä¾›çš„æ¨¡å—ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºâ€œç³»ç»Ÿæ¨¡å—â€ã€‚</li>\n<li>æ–‡ä»¶æ¨¡å—ï¼šä»¥ <code>..</code> æˆ– <code>.</code> å’Œ <code>/</code> å¼€å§‹çš„æ ‡è¯†ç¬¦ï¼Œè¿™é‡Œéƒ½è¢«å½“åšæ–‡ä»¶æ¨¡å—æ¥å¤„ç†ã€‚</li>\n</ol>\n<h4 id=\"node-modules-æ–‡ä»¶å¤¹\"><a href=\"#node-modules-æ–‡ä»¶å¤¹\" class=\"headerlink\" title=\"node_modules æ–‡ä»¶å¤¹\"></a>node_modules æ–‡ä»¶å¤¹</h4><p>è¯¥æ–‡ä»¶å¤¹æ˜¯ Node.js ä¸­çš„ç‰¹æ®Šæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾ node æ¨¡å—ï¼Œå¦‚æœä¸€ä¸ªæ¨¡å—æ—¢ä¸æ˜¯ç³»ç»Ÿæ¨¡å—ï¼Œä¹Ÿä¸æ˜¯æ–‡ä»¶æ¨¡å—ï¼Œé‚£ä¹ˆå®ƒä¼šè¢«å­˜æ”¾åœ¨ node_modules æ–‡ä»¶å¤¹ä¸­ã€‚ä½¿ç”¨ <code>console.log(module.paths);</code> å¯ä»¥æ‰“å° Node.js ä¼šéå†çš„ node_modules ç›®å½•ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[ <span class=\"string\">'/Users/wangmingming/Documents/Projects/JSstudy/12.26/node_modules'</span>,</span><br><span class=\"line\">  <span class=\"string\">'/Users/wangmingming/Documents/Projects/JSstudy/node_modules'</span>,</span><br><span class=\"line\">  <span class=\"string\">'/Users/wangmingming/Documents/Projects/node_modules'</span>,</span><br><span class=\"line\">  <span class=\"string\">'/Users/wangmingming/Documents/node_modules'</span>,</span><br><span class=\"line\">  <span class=\"string\">'/Users/wangmingming/node_modules'</span>,</span><br><span class=\"line\">  <span class=\"string\">'/Users/node_modules'</span>,</span><br><span class=\"line\">  <span class=\"string\">'/node_modules'</span> ]</span><br></pre></td></tr></table></figure></p>\n<div class=\"tip\"><br>åœ¨è°ƒç”¨ä¸€ä¸ªæ¨¡å—æ—¶ï¼ŒNode.js æ²¿è·¯å¾„å‘ä¸Šé€çº§é€’å½’ï¼Œç›´åˆ°æ ¹ç›®å½•ä¸‹çš„ node_modules ç›®å½•ã€‚CommonJS æ¨¡è§„èŒƒä¹Ÿå…è®¸åœ¨æ ‡è¯†ç¬¦ä¸­ä¸åŒ…å«æ–‡ä»¶æ‰©å±•åï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒNode ä¼šæŒ‰ jsã€jsonã€node çš„æ¬¡åºè¡¥è¶³æ‰©å±•åï¼Œä¾æ¬¡å°è¯•ã€‚<br></div>\n\n<h3 id=\"åŒ…-Package\"><a href=\"#åŒ…-Package\" class=\"headerlink\" title=\"åŒ… (Package)\"></a>åŒ… (Package)</h3><p>æŠŠç”±å¤šä¸ªå­æ¨¡å—ç»„æˆçš„å¤§æ¨¡å—ç§°åšåŒ…ï¼Œå¹¶æŠŠæ‰€æœ‰å­æ¨¡å—æ”¾åœ¨åŒä¸€ä¸ªç›®å½•é‡Œã€‚åœ¨ä¸€ä¸ªåŒ…ä¸­ï¼Œä¼šç”¨ <code>package.json</code> æ–‡ä»¶ä¸­çš„ <code>main</code> å±æ€§ç”¨æ¥æè¿°è¿™ä¸ªåŒ…çš„ä¸»æ–‡ä»¶ã€‚</p>\n<h4 id=\"NPM-Node-Package-Manager\"><a href=\"#NPM-Node-Package-Manager\" class=\"headerlink\" title=\"NPM (Node Package Manager)\"></a>NPM (Node Package Manager)</h4><p>å¤§åé¼é¼çš„ NPM å®é™…ä¸Šå°±æ˜¯ç”¨æ¥ç®¡ç†åŒ…çš„ä¸€ä¸ªå·¥å…·ï¼Œå€ŸåŠ© NPM æˆ‘ä»¬å¯ä»¥å¿«é€Ÿçš„å®‰è£…å’Œç®¡ç†ä¾èµ–åŒ…ã€‚ä¸‹é¢æ˜¯æˆ‘æ•´ç†çš„ npm å¸¸ç”¨å‘½ä»¤ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm init                   <span class=\"comment\">#  åˆå§‹åŒ–åŒ…ï¼Œè¦æ±‚å¡«å…¥åŒ…åç­‰ä¿¡æ¯</span></span><br><span class=\"line\">npm install &lt;name&gt;         <span class=\"comment\">#  æœ¬åœ°å®‰è£…ä¸€ä¸ªåŒ…</span></span><br><span class=\"line\">npm install &lt;name&gt; -g      <span class=\"comment\">#  å…¨å±€å®‰è£…ä¸€ä¸ªåŒ…</span></span><br><span class=\"line\">npm install &lt;name&gt; --save  <span class=\"comment\">#  æœ¬åœ°å®‰è£…å¹¶å†™å…¥ package.json ä¾èµ–ä¸­</span></span><br><span class=\"line\">npm remove &lt;name&gt;          <span class=\"comment\">#  ç§»é™¤</span></span><br><span class=\"line\">npm update &lt;name&gt;          <span class=\"comment\">#  æ›´æ–°</span></span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>æœ¬åœ°å®‰è£…ï¼šå°†å®‰è£…åŒ…æ”¾åœ¨ <code>./node_modules</code> ä¸‹ï¼ˆè¿è¡Œ npm å‘½ä»¤æ—¶æ‰€åœ¨çš„ç›®å½•ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ node_modules ç›®å½•ï¼Œä¼šåœ¨å½“å‰æ‰§è¡Œ npm å‘½ä»¤çš„ç›®å½•ä¸‹ç”Ÿæˆ node_modules ç›®å½•ã€‚å¯ä»¥é€šè¿‡ <code>require()</code> æ¥å¼•å…¥æœ¬åœ°å®‰è£…çš„åŒ…ã€‚</li>\n<li>å…¨å±€å®‰è£…ï¼šå°†å®‰è£…åŒ…æ”¾åœ¨ <code>/usr/local</code> ä¸‹æˆ–è€…ä½  node çš„å®‰è£…ç›®å½•ï¼Œå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨ã€‚</li>\n</ul>"},{"title":"Node.JS å­¦ä¹ ç¬”è®° [02] -- åŒæ­¥å¼‚æ­¥","date":"2015-01-03T00:27:02.000Z","comments":0,"_content":"\nåœ¨ä½¿ç”¨ npm çš„æ—¶å€™ï¼Œæˆ‘å‘ç°åœ¨é€Ÿåº¦å®åœ¨å¤ªæ…¢ï¼Œå®‰è£…å°ä¸€ç‚¹çš„åŒ…ç¡®å®æ²¡å•¥é—®é¢˜ï¼Œè£…å¤§ä¸€ç‚¹çš„ï¼Œä¾èµ–å¤šä¸€ç‚¹çš„åŒ…çš„æ—¶å€™ï¼Œé—®é¢˜å°±æ¥äº†ã€‚é€Ÿåº¦æ…¢ï¼Œå“åº”è¿Ÿé’ã€‚***nrm*** æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå®‰è£… nrm åï¼Œå¯ä»¥ä½¿ç”¨ç®€å•çš„å‘½ä»¤å¿«é€Ÿæ¥åˆ‡æ¢ npm æºï¼Œæ¯”å¦‚åˆ‡æ¢åˆ° cnpmã€taobao æºç­‰ï¼Œè¯¦ç»†çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥ç‚¹[è¿™é‡Œ](https://github.com/Pana/nrm#install)è¿›å»äº†è§£ä¸‹ã€‚\n<!-- more -->\n### Node.js ä½¿ç”¨\n\n#### Node.js æ§åˆ¶å°\nå‰é¢è¯´äº†ï¼ŒNode.js æä¾›äº† REPL æ¨¡å¼æ¥è§£æè¾“å…¥çš„æ¯æ¡å‘½ä»¤ï¼Œç°åœ¨å¯ä»¥å®æˆ˜ä¸€ä¸‹äº†ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œç„¶åè¾“å…¥ `node` è¿›å…¥ Node.js å¼€å§‹æ•²å‘½ä»¤å§ï¼\n```js\nconsole.log('hello,world!'); // æ™®é€šè¾“å…¥\nconsole.error('é”™è¯¯æ¶ˆæ¯');    // é”™è¯¯è¾“å‡º\nconsole.time('time');        // ä¼šè®¡ç®—åœ¨è¿™ä¸ªè¡¨è¾¾å¼ä¹‹é—´çš„ä»£ç å—æ‰§è¡Œè€—æ—¶\n// {...}\nconsole.time('time');\nconsole.assert(3>10,'str..');// æ–­è¨€ï¼šè¡¨è¾¾å¼ä¸æˆç«‹ï¼Œä¼šè¾“å‡ºåé¢çš„å­—ç¬¦ä¸²\n```\n\n#### Node.js ä½œç”¨åŸŸ\n- å…¨å±€ä½œç”¨åŸŸï¼šæ²¡æœ‰ä½¿ç”¨ `var` éšå¼å£°æ˜çš„ä¸€ä¸ªå˜é‡ï¼Œä¼šäº«å—å…¨å±€ä½œç”¨åŸŸï¼Œæˆ–è€…åœ¨ `global` ä¸ŠæŒ‚è½½çš„å˜é‡ï¼Œä¹Ÿå…·æœ‰å…¨å±€ä½œç”¨åŸŸçš„å±æ€§ï¼Œå…¨å±€å˜é‡å¯ä»¥è¢«å…¶å®ƒæ¨¡å—ä½¿ç”¨ã€‚\n- å±€éƒ¨ä½œç”¨åŸŸï¼šåœ¨ Node.js ä¸­ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œåœ¨è¿™ä¸ªæ¨¡å—ä¸­å®šä¹‰çš„å˜é‡ï¼Œåªèƒ½åœ¨è¿™ä¸ªæ¨¡å—ä¸­ä½¿ç”¨ã€‚\n\n```js\n// è¿™äº›å˜é‡éƒ½å±äºå…¨å±€å˜é‡\nname = 'ifyour';\nglobal.age = 18; // Node.js ä¸­çš„ global ç±»ä¼¼ JavaScript ä¸­çš„ window\n```\n<div class='tip'>\nå°½é‡é¿å…ä½¿ç”¨å…¨å±€å˜é‡ï¼Œä¼šé€ æˆå˜é‡æ±¡æŸ“ã€‚\n</div>\n\n#### å›è°ƒå‡½æ•°\nNode.js ä¸­å¤§é‡ä½¿ç”¨äº†å›è°ƒå‡½æ•°ï¼Œå…³äºå›è°ƒå‡½æ•°ï¼Œæˆ‘ä¹‹å‰åœ¨ç®€ä¹¦å†™äº†ä¸€ç¯‡ï¼Œæˆ‘çš„ç†è§£å¿ƒå¾—ï¼Œæœ‰å…´è¶£çš„å¯ä»¥[å»çœ‹çœ‹](http://www.jianshu.com/p/1383f4cb9a75)ã€‚å…³äºå›è°ƒå‡½æ•°ï¼Œæˆ‘ä¹Ÿæ­£æ˜¯åœ¨ Node.js ä¸­å¯¹å®ƒçš„ç†è§£æ›´ä¸ºæ·±åˆ»äº†ï¼ŒNode.js å¤§é‡çš„å¼‚æ­¥ä»£ç éƒ½å€ŸåŠ©å›è°ƒå‡½æ•°å®ç°ï¼Œæ­£å› å¦‚æ­¤ï¼Œæ€§èƒ½æ›´é«˜å‘€ã€‚çœ‹ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ã€‚\n\n```js\n// å®šä¹‰å›è°ƒå‡½æ•°\nfunction cb(){\n  console.log('Hello,callback!');\n}\n\n// æŠŠå›è°ƒå‡½æ•°çš„å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰ä¼ å…¥è¯¥å‡½æ•°ï¼Œä¸€ç§’åæ‰§è¡Œ\nsetTimeout(cb,1000);\n```\nå€ŸåŠ©è¿™ä¸ªä¾‹å­ï¼Œå¯ä»¥çœ‹åˆ°å›è°ƒå‡½æ•°çš„å®ç°æœºåˆ¶ï¼š\n- å®šä¹‰ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼ˆå…¶å®å®ƒå°±æ˜¯å›è°ƒå‡½æ•°ï¼‰\n- å°†è¯¥å‡½æ•°çš„å¼•ç”¨åœ°å€ä½œä¸ºå‚æ•°ä¼ ç»™è°ƒç”¨è€…ï¼Œè°ƒç”¨è€…æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¾‹å­ä¸­çš„ `setTimeout`\n- å½“ç‰¹å®šæ¡ä»¶å‘ç”Ÿæ—¶ï¼Œè°ƒç”¨è€…ä½¿ç”¨è¿™ä¸ªå¼•ç”¨åœ°å€å»æ‰§è¡Œè¯¥å‡½æ•°\n\nå›è°ƒå‡½æ•°çš„ç”¨é€”å¾ˆå¤šï¼Œæ¯”å¦‚å®ç°äº‹ä»¶æ³¨å†Œã€å¼‚æ­¥ä»£ç ç­‰ã€‚åœ¨ jQuery ä¸­çš„åŠ¨ç”»å°±æ˜¯å›è°ƒå‡½æ•°çš„ç»å…¸ç”¨æ³•ï¼Œ`animate(x,y,z,function(){...})`,å½“ä¸€ä¸ªåŠ¨ç”»æ‰§è¡Œå®Œæˆåï¼Œæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚å½“ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®æ—¶ï¼Œéœ€è¦æ‰§è¡Œçš„å‡½æ•°å—ï¼Œè¿™äº›éƒ½æ˜¯å›è°ƒå‡½æ•°ã€‚\n\n### Node.js äº‹ä»¶\nNode.js ä¸­çš„ event æ¨¡å—å°±æ˜¯æä¾›äº‹ä»¶ç¼–ç¨‹çš„ APIï¼Œæ‰€æœ‰å…·æœ‰è§¦å‘äº‹ä»¶çš„å¯¹è±¡éƒ½ç»§æ‰¿æˆ–å†…éƒ¨åŒ…å«äº† `EventEmitter` å¯¹è±¡ã€‚æ¥ä¸€ä¸ªç®€å•çš„ä¾‹å­å§ï¼\n```js\n//events æ¨¡å—ä¸­çš„ EventEmitter å¯¹è±¡ï¼Œå®šä¹‰äº†äº‹ä»¶å¯¹è±¡çš„åŸºç¡€ä¿¡æ¯å’Œè¡Œä¸º\nvar EventEmitter = require('events').EventEmitter;\nvar event = new EventEmitter();// å®ä¾‹åŒ–ä¸€ä¸ª event å¯¹è±¡\nevent.on('myevent',function(name){ // ç»‘å®š myevent äº‹ä»¶\n    console.log('Hi!' + name);\n});\nevent.emit('myevent','ifyour');// è§¦å‘äº‹ä»¶\n```\n#### äº‹ä»¶å¸¸ç”¨æ–¹æ³•\n\n|æ–¹æ³•                               | æè¿°                                                     |\n|:---------------------------------|:---------------------------------------------------------|\n|addListener(event, listener)      | ä¸ºæŒ‡å®šäº‹ä»¶æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨åˆ°ç›‘å¬å™¨æ•°ç»„çš„å°¾éƒ¨ã€‚ä¸ on ç­‰ä»·          |\n|on(event, listener)               | ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªç›‘å¬å™¨ï¼Œæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸² event å’Œä¸€ä¸ªå›è°ƒå‡½æ•° |\n|once(event, listener)             | ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªå•æ¬¡ç›‘å¬å™¨                                |\n|removeListener(event,listener)    |ç§»é™¤æŒ‡å®šäº‹ä»¶çš„æŸä¸ªç›‘å¬å™¨ï¼Œç›‘å¬å™¨å¿…é¡»æ˜¯è¯¥äº‹ä»¶å·²ç»æ³¨å†Œè¿‡çš„ç›‘å¬å™¨  |\n|removeAllListeners([event])       |ç§»é™¤æ‰€æœ‰äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨å¦‚æœæŒ‡å®šäº‹ä»¶ï¼Œåˆ™ç§»é™¤è¯¥äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨  |\n|setMaxListeners(n)                |setMaxListeners å‡½æ•°ç”¨äºæé«˜ç›‘å¬å™¨çš„é»˜è®¤é™åˆ¶çš„æ•°é‡ï¼Œé»˜è®¤æ˜¯ 10 |\n|listeners(event)                  |è¿”å›æŒ‡å®šäº‹ä»¶çš„ç›‘å¬å™¨æ•°ç»„                                    |\n|emit(event, [arg1], [arg2], [...])|æŒ‰é¡ºåºæ‰§è¡Œç›‘å¬å™¨ï¼Œå¦‚æœäº‹ä»¶æœ‰æ³¨å†Œç›‘å¬è¿”å› trueï¼Œå¦åˆ™è¿”å› false |\n\n\n### Node.js å¼‚æ­¥ä¸åŒæ­¥\n\n***åŒæ­¥***ï¼šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œæ‰èƒ½æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œæ€»æ—¶é—´ç­‰äºæ‰€æœ‰ä»»åŠ¡æ¶ˆè€—æ—¶é—´ä¹‹å’Œã€‚\n***å¼‚æ­¥***ï¼šå‡ ä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œï¼Œä¸é™åˆ¶å…ˆåï¼Œæ‰§è¡Œæ€»æ—¶é—´ç­‰äºæ‰§è¡Œè€—æ—¶æœ€é•¿çš„é‚£ä¸ªä»»åŠ¡çš„æ¶ˆè€—æ—¶é—´ã€‚\n\nåœ¨ Node.js ä¸­æ¯ä¸€ä¸ªä»»åŠ¡æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå›è°ƒå‡½æ•°ï¼Œå‰ä¸€ä¸ªä»»åŠ¡ç»“æŸåï¼Œä¸æ˜¯æ‰§è¡Œåä¸€ä¸ªä»»åŠ¡ï¼Œè€Œæ˜¯æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œåä¸€ä¸ªä»»åŠ¡åˆ™æ˜¯ä¸ç­‰å‰ä¸€ä¸ªä»»åŠ¡ç»“æŸå°±æ‰§è¡Œï¼Œæ‰€ä»¥ç¨‹åºçš„æ‰§è¡Œé¡ºåºä¸ä»»åŠ¡çš„æ’åˆ—é¡ºåºæ˜¯ä¸ä¸€è‡´çš„ã€å¼‚æ­¥çš„ã€‚\n\n#### å¼‚æ­¥çš„å®ç°\n- å›è°ƒå‡½æ•°\n- äº‹ä»¶ï¼ˆåŸºäºå›è°ƒå‡½æ•°ï¼‰\n- Promise ï¼ˆES6ï¼‰\n\nå‰é¢å·²ç»è®²äº†å›è°ƒå‡½æ•°çš„å®ç°æ–¹å¼ï¼Œä¸‹é¢ä¸¾ä¸¤ä¸ªä¾‹å­æ¥è¯´æ˜ Node.js ä¸­ ***äº‹ä»¶*** å’Œ ***Promise*** å®ç°å¼‚æ­¥ã€‚\n```js\n// äº‹ä»¶ï¼ˆåŸºäºå›è°ƒå‡½æ•°ï¼‰å®ç°å¼‚æ­¥\nvar fs = require('fs');\n\nvar stream = fs.createReadStream('./data');// è°ƒç”¨ fs æ¨¡å—åˆ›å»ºä¸€ä¸ªè¯»å–æµå¯¹è±¡\nstream.on('data',getData);// è¯»å–äº‹ä»¶ï¼Œæ¯æ¬¡è¯»å–æ—¶è§¦å‘è°ƒç”¨å›è°ƒå‡½æ•° getData\nstream.on('end',getDataDone);// è¯»å–å®Œæ¯•è°ƒç”¨å›è°ƒå‡½æ•° getDataDone\n\nfunction getDataDone() {\n    console.log('read done!');\n}\nfunction getData(data) {\n    console.log(data.toString());\n}\n```\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œå½“è¯»å–å¤šä¸ª `data` æ–‡ä»¶æ—¶ï¼Œè¾“å‡ºçš„å†…å®¹çš„é¡ºåºå¯èƒ½ä¸ä¸€è‡´ï¼Œå› ä¸ºäº‹ä»¶é‡‡ç”¨å›è°ƒå‡½æ•°å®ç°äº†å¼‚æ­¥æ“ä½œã€‚å¯ä»¥çœ‹å‡ºï¼Œäº‹ä»¶å®ç°å¼‚æ­¥ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯å›è°ƒå‡½æ•°ã€‚\n\n> æ‰€è°“ Promiseï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚\n\nä¸‹é¢æ¥çœ‹çœ‹ `Promise` çš„ä¸€ä¸ªå®ä¾‹ï¼š\n```js\nvar fs = require('fs');\n\nvar p = new Promise(function (resolve, reject) {// ä½¿ç”¨ Promise ç”Ÿæˆå®ä¾‹\n    fs.readFile('./1', 'utf-8', function (err, data) {// readFile æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•\n        if (!err) {\n            resolve(data);\n        } else {\n            reject(err);\n        }\n    })\n});\n\np.then(function (data) {// è°ƒç”¨å®ä¾‹çš„ then æ–¹æ³•\n    console.log(data);\n}, function (err) {\n    console.log(err);\n});\n```\nES6 è§„å®šï¼ŒPromise å¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ Promise å®ä¾‹ã€‚Promise æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ `resolve` å’Œ `reject`ã€‚å®ƒä»¬æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œç”± JavaScript å¼•æ“æä¾›ï¼Œä¸ç”¨è‡ªå·±éƒ¨ç½²ã€‚\n\n- resolve : åœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ï¼›\n- reject  : åœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚\n\nPromise å®ä¾‹ç”Ÿæˆä»¥åï¼Œå¯ä»¥ç”¨ `then` æ–¹æ³•åˆ†åˆ«æŒ‡å®š Resolved çŠ¶æ€å’Œ Reject çŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚\n```js\npromise.then(function(value) {\n  // success\n}, function(error) {\n  // failure\n});\n```\næœ‰äº† Promise å¯¹è±¡ï¼Œå°±å¯ä»¥å°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥æ“ä½œçš„æµç¨‹è¡¨è¾¾å‡ºæ¥ï¼Œé¿å…äº†å±‚å±‚åµŒå¥—çš„å›è°ƒå‡½æ•°ã€‚æ­¤å¤–ï¼ŒPromise å¯¹è±¡æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œä½¿å¾—æ§åˆ¶å¼‚æ­¥æ“ä½œæ›´åŠ å®¹æ˜“ã€‚\n\nä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œåœ¨æœªä½¿ç”¨ `Promise` æ—¶ï¼Œæˆ‘ä»¬æƒ³è¦ `p1` è¯»å–å®Œæ•°æ®åï¼Œç´§æ¥ç€ `p2` ã€`p3` è¯»å–ï¼Œå°±éœ€è¦åœ¨ `p1` çš„å›è°ƒè¯»å–æˆåŠŸå‡½æ•°é‡Œç»§ç»­å†™ `p2` çš„è¯»å–ï¼Œç±»ä¼¼çš„ `p3` ä¹Ÿè¦åœ¨ `p2` çš„å›è°ƒå‡½æ•°ä¸­å†™ï¼Œè¿™å°±é€ æˆäº† ***å±‚å±‚åµŒå¥—*** ä¸åˆ©äºä»£ç é˜…è¯»ã€‚è€Œä½¿ç”¨ `Promise` åï¼Œ`then` æ–¹æ³•æŠŠé‡Œé¢çš„å›è°ƒå‡½æ•°ç»Ÿä¸€æå–å‡ºæ¥ï¼Œ å¯è¯»æ€§æ›´å¥½äº†ï¼Œä¹Ÿæ–¹ä¾¿ç†è§£ã€‚\n```js\n// Promise æä¾›çš„ then æ–¹æ³•é¿å…å±‚æ¬¡åµŒå¥—ï¼Œç›¸å½“äºå®ç° then çš„é“¾å¼æ“ä½œ\n// p1 æ‰§è¡Œå®Œ then æ–¹æ³•åï¼Œé€šè¿‡ return p2 ï¼Œè®© p2 ç»§ç»­æ‰§è¡Œ then æ–¹æ³•\np1.then(function(data){\n    console.log(data);\n    return p2;\n},function(err){\n    console.log(err);\n    return p2;\n}).then(function(data){\n    console.log(data);\n    return p3;\n},function(err){\n    console.log(err);\n    return p3;\n}).then(function(data){\n    console.log(data);\n},function(){\n    console.log(err);\n});\n```\næ›´å¤š Promise è¯­æ³•ï¼Œå¯ä»¥å‚è€ƒé˜®ä¸€å³°çš„ã€Š[ECMAScript 6 å…¥é—¨](http://es6.ruanyifeng.com/#docs/promise#åŸºæœ¬ç”¨æ³•)ã€‹ã€‚\n","source":"_posts/Node.JS-å­¦ä¹ ç¬”è®°-[02]----åŒæ­¥å¼‚æ­¥.md","raw":"---\ntitle: 'Node.JS å­¦ä¹ ç¬”è®° [02] -- åŒæ­¥å¼‚æ­¥'\ndate: 2015-1-3 08:27:02\ncomments: false\n---\n\nåœ¨ä½¿ç”¨ npm çš„æ—¶å€™ï¼Œæˆ‘å‘ç°åœ¨é€Ÿåº¦å®åœ¨å¤ªæ…¢ï¼Œå®‰è£…å°ä¸€ç‚¹çš„åŒ…ç¡®å®æ²¡å•¥é—®é¢˜ï¼Œè£…å¤§ä¸€ç‚¹çš„ï¼Œä¾èµ–å¤šä¸€ç‚¹çš„åŒ…çš„æ—¶å€™ï¼Œé—®é¢˜å°±æ¥äº†ã€‚é€Ÿåº¦æ…¢ï¼Œå“åº”è¿Ÿé’ã€‚***nrm*** æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå®‰è£… nrm åï¼Œå¯ä»¥ä½¿ç”¨ç®€å•çš„å‘½ä»¤å¿«é€Ÿæ¥åˆ‡æ¢ npm æºï¼Œæ¯”å¦‚åˆ‡æ¢åˆ° cnpmã€taobao æºç­‰ï¼Œè¯¦ç»†çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥ç‚¹[è¿™é‡Œ](https://github.com/Pana/nrm#install)è¿›å»äº†è§£ä¸‹ã€‚\n<!-- more -->\n### Node.js ä½¿ç”¨\n\n#### Node.js æ§åˆ¶å°\nå‰é¢è¯´äº†ï¼ŒNode.js æä¾›äº† REPL æ¨¡å¼æ¥è§£æè¾“å…¥çš„æ¯æ¡å‘½ä»¤ï¼Œç°åœ¨å¯ä»¥å®æˆ˜ä¸€ä¸‹äº†ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œç„¶åè¾“å…¥ `node` è¿›å…¥ Node.js å¼€å§‹æ•²å‘½ä»¤å§ï¼\n```js\nconsole.log('hello,world!'); // æ™®é€šè¾“å…¥\nconsole.error('é”™è¯¯æ¶ˆæ¯');    // é”™è¯¯è¾“å‡º\nconsole.time('time');        // ä¼šè®¡ç®—åœ¨è¿™ä¸ªè¡¨è¾¾å¼ä¹‹é—´çš„ä»£ç å—æ‰§è¡Œè€—æ—¶\n// {...}\nconsole.time('time');\nconsole.assert(3>10,'str..');// æ–­è¨€ï¼šè¡¨è¾¾å¼ä¸æˆç«‹ï¼Œä¼šè¾“å‡ºåé¢çš„å­—ç¬¦ä¸²\n```\n\n#### Node.js ä½œç”¨åŸŸ\n- å…¨å±€ä½œç”¨åŸŸï¼šæ²¡æœ‰ä½¿ç”¨ `var` éšå¼å£°æ˜çš„ä¸€ä¸ªå˜é‡ï¼Œä¼šäº«å—å…¨å±€ä½œç”¨åŸŸï¼Œæˆ–è€…åœ¨ `global` ä¸ŠæŒ‚è½½çš„å˜é‡ï¼Œä¹Ÿå…·æœ‰å…¨å±€ä½œç”¨åŸŸçš„å±æ€§ï¼Œå…¨å±€å˜é‡å¯ä»¥è¢«å…¶å®ƒæ¨¡å—ä½¿ç”¨ã€‚\n- å±€éƒ¨ä½œç”¨åŸŸï¼šåœ¨ Node.js ä¸­ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œåœ¨è¿™ä¸ªæ¨¡å—ä¸­å®šä¹‰çš„å˜é‡ï¼Œåªèƒ½åœ¨è¿™ä¸ªæ¨¡å—ä¸­ä½¿ç”¨ã€‚\n\n```js\n// è¿™äº›å˜é‡éƒ½å±äºå…¨å±€å˜é‡\nname = 'ifyour';\nglobal.age = 18; // Node.js ä¸­çš„ global ç±»ä¼¼ JavaScript ä¸­çš„ window\n```\n<div class='tip'>\nå°½é‡é¿å…ä½¿ç”¨å…¨å±€å˜é‡ï¼Œä¼šé€ æˆå˜é‡æ±¡æŸ“ã€‚\n</div>\n\n#### å›è°ƒå‡½æ•°\nNode.js ä¸­å¤§é‡ä½¿ç”¨äº†å›è°ƒå‡½æ•°ï¼Œå…³äºå›è°ƒå‡½æ•°ï¼Œæˆ‘ä¹‹å‰åœ¨ç®€ä¹¦å†™äº†ä¸€ç¯‡ï¼Œæˆ‘çš„ç†è§£å¿ƒå¾—ï¼Œæœ‰å…´è¶£çš„å¯ä»¥[å»çœ‹çœ‹](http://www.jianshu.com/p/1383f4cb9a75)ã€‚å…³äºå›è°ƒå‡½æ•°ï¼Œæˆ‘ä¹Ÿæ­£æ˜¯åœ¨ Node.js ä¸­å¯¹å®ƒçš„ç†è§£æ›´ä¸ºæ·±åˆ»äº†ï¼ŒNode.js å¤§é‡çš„å¼‚æ­¥ä»£ç éƒ½å€ŸåŠ©å›è°ƒå‡½æ•°å®ç°ï¼Œæ­£å› å¦‚æ­¤ï¼Œæ€§èƒ½æ›´é«˜å‘€ã€‚çœ‹ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ã€‚\n\n```js\n// å®šä¹‰å›è°ƒå‡½æ•°\nfunction cb(){\n  console.log('Hello,callback!');\n}\n\n// æŠŠå›è°ƒå‡½æ•°çš„å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰ä¼ å…¥è¯¥å‡½æ•°ï¼Œä¸€ç§’åæ‰§è¡Œ\nsetTimeout(cb,1000);\n```\nå€ŸåŠ©è¿™ä¸ªä¾‹å­ï¼Œå¯ä»¥çœ‹åˆ°å›è°ƒå‡½æ•°çš„å®ç°æœºåˆ¶ï¼š\n- å®šä¹‰ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼ˆå…¶å®å®ƒå°±æ˜¯å›è°ƒå‡½æ•°ï¼‰\n- å°†è¯¥å‡½æ•°çš„å¼•ç”¨åœ°å€ä½œä¸ºå‚æ•°ä¼ ç»™è°ƒç”¨è€…ï¼Œè°ƒç”¨è€…æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¾‹å­ä¸­çš„ `setTimeout`\n- å½“ç‰¹å®šæ¡ä»¶å‘ç”Ÿæ—¶ï¼Œè°ƒç”¨è€…ä½¿ç”¨è¿™ä¸ªå¼•ç”¨åœ°å€å»æ‰§è¡Œè¯¥å‡½æ•°\n\nå›è°ƒå‡½æ•°çš„ç”¨é€”å¾ˆå¤šï¼Œæ¯”å¦‚å®ç°äº‹ä»¶æ³¨å†Œã€å¼‚æ­¥ä»£ç ç­‰ã€‚åœ¨ jQuery ä¸­çš„åŠ¨ç”»å°±æ˜¯å›è°ƒå‡½æ•°çš„ç»å…¸ç”¨æ³•ï¼Œ`animate(x,y,z,function(){...})`,å½“ä¸€ä¸ªåŠ¨ç”»æ‰§è¡Œå®Œæˆåï¼Œæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚å½“ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®æ—¶ï¼Œéœ€è¦æ‰§è¡Œçš„å‡½æ•°å—ï¼Œè¿™äº›éƒ½æ˜¯å›è°ƒå‡½æ•°ã€‚\n\n### Node.js äº‹ä»¶\nNode.js ä¸­çš„ event æ¨¡å—å°±æ˜¯æä¾›äº‹ä»¶ç¼–ç¨‹çš„ APIï¼Œæ‰€æœ‰å…·æœ‰è§¦å‘äº‹ä»¶çš„å¯¹è±¡éƒ½ç»§æ‰¿æˆ–å†…éƒ¨åŒ…å«äº† `EventEmitter` å¯¹è±¡ã€‚æ¥ä¸€ä¸ªç®€å•çš„ä¾‹å­å§ï¼\n```js\n//events æ¨¡å—ä¸­çš„ EventEmitter å¯¹è±¡ï¼Œå®šä¹‰äº†äº‹ä»¶å¯¹è±¡çš„åŸºç¡€ä¿¡æ¯å’Œè¡Œä¸º\nvar EventEmitter = require('events').EventEmitter;\nvar event = new EventEmitter();// å®ä¾‹åŒ–ä¸€ä¸ª event å¯¹è±¡\nevent.on('myevent',function(name){ // ç»‘å®š myevent äº‹ä»¶\n    console.log('Hi!' + name);\n});\nevent.emit('myevent','ifyour');// è§¦å‘äº‹ä»¶\n```\n#### äº‹ä»¶å¸¸ç”¨æ–¹æ³•\n\n|æ–¹æ³•                               | æè¿°                                                     |\n|:---------------------------------|:---------------------------------------------------------|\n|addListener(event, listener)      | ä¸ºæŒ‡å®šäº‹ä»¶æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨åˆ°ç›‘å¬å™¨æ•°ç»„çš„å°¾éƒ¨ã€‚ä¸ on ç­‰ä»·          |\n|on(event, listener)               | ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªç›‘å¬å™¨ï¼Œæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸² event å’Œä¸€ä¸ªå›è°ƒå‡½æ•° |\n|once(event, listener)             | ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªå•æ¬¡ç›‘å¬å™¨                                |\n|removeListener(event,listener)    |ç§»é™¤æŒ‡å®šäº‹ä»¶çš„æŸä¸ªç›‘å¬å™¨ï¼Œç›‘å¬å™¨å¿…é¡»æ˜¯è¯¥äº‹ä»¶å·²ç»æ³¨å†Œè¿‡çš„ç›‘å¬å™¨  |\n|removeAllListeners([event])       |ç§»é™¤æ‰€æœ‰äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨å¦‚æœæŒ‡å®šäº‹ä»¶ï¼Œåˆ™ç§»é™¤è¯¥äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨  |\n|setMaxListeners(n)                |setMaxListeners å‡½æ•°ç”¨äºæé«˜ç›‘å¬å™¨çš„é»˜è®¤é™åˆ¶çš„æ•°é‡ï¼Œé»˜è®¤æ˜¯ 10 |\n|listeners(event)                  |è¿”å›æŒ‡å®šäº‹ä»¶çš„ç›‘å¬å™¨æ•°ç»„                                    |\n|emit(event, [arg1], [arg2], [...])|æŒ‰é¡ºåºæ‰§è¡Œç›‘å¬å™¨ï¼Œå¦‚æœäº‹ä»¶æœ‰æ³¨å†Œç›‘å¬è¿”å› trueï¼Œå¦åˆ™è¿”å› false |\n\n\n### Node.js å¼‚æ­¥ä¸åŒæ­¥\n\n***åŒæ­¥***ï¼šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œæ‰èƒ½æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œæ€»æ—¶é—´ç­‰äºæ‰€æœ‰ä»»åŠ¡æ¶ˆè€—æ—¶é—´ä¹‹å’Œã€‚\n***å¼‚æ­¥***ï¼šå‡ ä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œï¼Œä¸é™åˆ¶å…ˆåï¼Œæ‰§è¡Œæ€»æ—¶é—´ç­‰äºæ‰§è¡Œè€—æ—¶æœ€é•¿çš„é‚£ä¸ªä»»åŠ¡çš„æ¶ˆè€—æ—¶é—´ã€‚\n\nåœ¨ Node.js ä¸­æ¯ä¸€ä¸ªä»»åŠ¡æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå›è°ƒå‡½æ•°ï¼Œå‰ä¸€ä¸ªä»»åŠ¡ç»“æŸåï¼Œä¸æ˜¯æ‰§è¡Œåä¸€ä¸ªä»»åŠ¡ï¼Œè€Œæ˜¯æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œåä¸€ä¸ªä»»åŠ¡åˆ™æ˜¯ä¸ç­‰å‰ä¸€ä¸ªä»»åŠ¡ç»“æŸå°±æ‰§è¡Œï¼Œæ‰€ä»¥ç¨‹åºçš„æ‰§è¡Œé¡ºåºä¸ä»»åŠ¡çš„æ’åˆ—é¡ºåºæ˜¯ä¸ä¸€è‡´çš„ã€å¼‚æ­¥çš„ã€‚\n\n#### å¼‚æ­¥çš„å®ç°\n- å›è°ƒå‡½æ•°\n- äº‹ä»¶ï¼ˆåŸºäºå›è°ƒå‡½æ•°ï¼‰\n- Promise ï¼ˆES6ï¼‰\n\nå‰é¢å·²ç»è®²äº†å›è°ƒå‡½æ•°çš„å®ç°æ–¹å¼ï¼Œä¸‹é¢ä¸¾ä¸¤ä¸ªä¾‹å­æ¥è¯´æ˜ Node.js ä¸­ ***äº‹ä»¶*** å’Œ ***Promise*** å®ç°å¼‚æ­¥ã€‚\n```js\n// äº‹ä»¶ï¼ˆåŸºäºå›è°ƒå‡½æ•°ï¼‰å®ç°å¼‚æ­¥\nvar fs = require('fs');\n\nvar stream = fs.createReadStream('./data');// è°ƒç”¨ fs æ¨¡å—åˆ›å»ºä¸€ä¸ªè¯»å–æµå¯¹è±¡\nstream.on('data',getData);// è¯»å–äº‹ä»¶ï¼Œæ¯æ¬¡è¯»å–æ—¶è§¦å‘è°ƒç”¨å›è°ƒå‡½æ•° getData\nstream.on('end',getDataDone);// è¯»å–å®Œæ¯•è°ƒç”¨å›è°ƒå‡½æ•° getDataDone\n\nfunction getDataDone() {\n    console.log('read done!');\n}\nfunction getData(data) {\n    console.log(data.toString());\n}\n```\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œå½“è¯»å–å¤šä¸ª `data` æ–‡ä»¶æ—¶ï¼Œè¾“å‡ºçš„å†…å®¹çš„é¡ºåºå¯èƒ½ä¸ä¸€è‡´ï¼Œå› ä¸ºäº‹ä»¶é‡‡ç”¨å›è°ƒå‡½æ•°å®ç°äº†å¼‚æ­¥æ“ä½œã€‚å¯ä»¥çœ‹å‡ºï¼Œäº‹ä»¶å®ç°å¼‚æ­¥ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯å›è°ƒå‡½æ•°ã€‚\n\n> æ‰€è°“ Promiseï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚\n\nä¸‹é¢æ¥çœ‹çœ‹ `Promise` çš„ä¸€ä¸ªå®ä¾‹ï¼š\n```js\nvar fs = require('fs');\n\nvar p = new Promise(function (resolve, reject) {// ä½¿ç”¨ Promise ç”Ÿæˆå®ä¾‹\n    fs.readFile('./1', 'utf-8', function (err, data) {// readFile æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•\n        if (!err) {\n            resolve(data);\n        } else {\n            reject(err);\n        }\n    })\n});\n\np.then(function (data) {// è°ƒç”¨å®ä¾‹çš„ then æ–¹æ³•\n    console.log(data);\n}, function (err) {\n    console.log(err);\n});\n```\nES6 è§„å®šï¼ŒPromise å¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ Promise å®ä¾‹ã€‚Promise æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ `resolve` å’Œ `reject`ã€‚å®ƒä»¬æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œç”± JavaScript å¼•æ“æä¾›ï¼Œä¸ç”¨è‡ªå·±éƒ¨ç½²ã€‚\n\n- resolve : åœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ï¼›\n- reject  : åœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚\n\nPromise å®ä¾‹ç”Ÿæˆä»¥åï¼Œå¯ä»¥ç”¨ `then` æ–¹æ³•åˆ†åˆ«æŒ‡å®š Resolved çŠ¶æ€å’Œ Reject çŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚\n```js\npromise.then(function(value) {\n  // success\n}, function(error) {\n  // failure\n});\n```\næœ‰äº† Promise å¯¹è±¡ï¼Œå°±å¯ä»¥å°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥æ“ä½œçš„æµç¨‹è¡¨è¾¾å‡ºæ¥ï¼Œé¿å…äº†å±‚å±‚åµŒå¥—çš„å›è°ƒå‡½æ•°ã€‚æ­¤å¤–ï¼ŒPromise å¯¹è±¡æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œä½¿å¾—æ§åˆ¶å¼‚æ­¥æ“ä½œæ›´åŠ å®¹æ˜“ã€‚\n\nä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œåœ¨æœªä½¿ç”¨ `Promise` æ—¶ï¼Œæˆ‘ä»¬æƒ³è¦ `p1` è¯»å–å®Œæ•°æ®åï¼Œç´§æ¥ç€ `p2` ã€`p3` è¯»å–ï¼Œå°±éœ€è¦åœ¨ `p1` çš„å›è°ƒè¯»å–æˆåŠŸå‡½æ•°é‡Œç»§ç»­å†™ `p2` çš„è¯»å–ï¼Œç±»ä¼¼çš„ `p3` ä¹Ÿè¦åœ¨ `p2` çš„å›è°ƒå‡½æ•°ä¸­å†™ï¼Œè¿™å°±é€ æˆäº† ***å±‚å±‚åµŒå¥—*** ä¸åˆ©äºä»£ç é˜…è¯»ã€‚è€Œä½¿ç”¨ `Promise` åï¼Œ`then` æ–¹æ³•æŠŠé‡Œé¢çš„å›è°ƒå‡½æ•°ç»Ÿä¸€æå–å‡ºæ¥ï¼Œ å¯è¯»æ€§æ›´å¥½äº†ï¼Œä¹Ÿæ–¹ä¾¿ç†è§£ã€‚\n```js\n// Promise æä¾›çš„ then æ–¹æ³•é¿å…å±‚æ¬¡åµŒå¥—ï¼Œç›¸å½“äºå®ç° then çš„é“¾å¼æ“ä½œ\n// p1 æ‰§è¡Œå®Œ then æ–¹æ³•åï¼Œé€šè¿‡ return p2 ï¼Œè®© p2 ç»§ç»­æ‰§è¡Œ then æ–¹æ³•\np1.then(function(data){\n    console.log(data);\n    return p2;\n},function(err){\n    console.log(err);\n    return p2;\n}).then(function(data){\n    console.log(data);\n    return p3;\n},function(err){\n    console.log(err);\n    return p3;\n}).then(function(data){\n    console.log(data);\n},function(){\n    console.log(err);\n});\n```\næ›´å¤š Promise è¯­æ³•ï¼Œå¯ä»¥å‚è€ƒé˜®ä¸€å³°çš„ã€Š[ECMAScript 6 å…¥é—¨](http://es6.ruanyifeng.com/#docs/promise#åŸºæœ¬ç”¨æ³•)ã€‹ã€‚\n","slug":"Node.JS-å­¦ä¹ ç¬”è®°-[02]----åŒæ­¥å¼‚æ­¥","published":1,"updated":"2019-12-07T04:59:34.071Z","layout":"post","photos":[],"link":"","_id":"ck3v60jtd000br9q9qdnxvxhf","content":"<p>åœ¨ä½¿ç”¨ npm çš„æ—¶å€™ï¼Œæˆ‘å‘ç°åœ¨é€Ÿåº¦å®åœ¨å¤ªæ…¢ï¼Œå®‰è£…å°ä¸€ç‚¹çš„åŒ…ç¡®å®æ²¡å•¥é—®é¢˜ï¼Œè£…å¤§ä¸€ç‚¹çš„ï¼Œä¾èµ–å¤šä¸€ç‚¹çš„åŒ…çš„æ—¶å€™ï¼Œé—®é¢˜å°±æ¥äº†ã€‚é€Ÿåº¦æ…¢ï¼Œå“åº”è¿Ÿé’ã€‚<strong><em>nrm</em></strong> æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå®‰è£… nrm åï¼Œå¯ä»¥ä½¿ç”¨ç®€å•çš„å‘½ä»¤å¿«é€Ÿæ¥åˆ‡æ¢ npm æºï¼Œæ¯”å¦‚åˆ‡æ¢åˆ° cnpmã€taobao æºç­‰ï¼Œè¯¦ç»†çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥ç‚¹<a href=\"https://github.com/Pana/nrm#install\" target=\"_blank\" rel=\"noopener\">è¿™é‡Œ</a>è¿›å»äº†è§£ä¸‹ã€‚<br><a id=\"more\"></a></p>\n<h3 id=\"Node-js-ä½¿ç”¨\"><a href=\"#Node-js-ä½¿ç”¨\" class=\"headerlink\" title=\"Node.js ä½¿ç”¨\"></a>Node.js ä½¿ç”¨</h3><h4 id=\"Node-js-æ§åˆ¶å°\"><a href=\"#Node-js-æ§åˆ¶å°\" class=\"headerlink\" title=\"Node.js æ§åˆ¶å°\"></a>Node.js æ§åˆ¶å°</h4><p>å‰é¢è¯´äº†ï¼ŒNode.js æä¾›äº† REPL æ¨¡å¼æ¥è§£æè¾“å…¥çš„æ¯æ¡å‘½ä»¤ï¼Œç°åœ¨å¯ä»¥å®æˆ˜ä¸€ä¸‹äº†ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œç„¶åè¾“å…¥ <code>node</code> è¿›å…¥ Node.js å¼€å§‹æ•²å‘½ä»¤å§ï¼<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'hello,world!'</span>); <span class=\"comment\">// æ™®é€šè¾“å…¥</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.error(<span class=\"string\">'é”™è¯¯æ¶ˆæ¯'</span>);    <span class=\"comment\">// é”™è¯¯è¾“å‡º</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.time(<span class=\"string\">'time'</span>);        <span class=\"comment\">// ä¼šè®¡ç®—åœ¨è¿™ä¸ªè¡¨è¾¾å¼ä¹‹é—´çš„ä»£ç å—æ‰§è¡Œè€—æ—¶</span></span><br><span class=\"line\"><span class=\"comment\">// &#123;...&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.time(<span class=\"string\">'time'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.assert(<span class=\"number\">3</span>&gt;<span class=\"number\">10</span>,<span class=\"string\">'str..'</span>);<span class=\"comment\">// æ–­è¨€ï¼šè¡¨è¾¾å¼ä¸æˆç«‹ï¼Œä¼šè¾“å‡ºåé¢çš„å­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"Node-js-ä½œç”¨åŸŸ\"><a href=\"#Node-js-ä½œç”¨åŸŸ\" class=\"headerlink\" title=\"Node.js ä½œç”¨åŸŸ\"></a>Node.js ä½œç”¨åŸŸ</h4><ul>\n<li>å…¨å±€ä½œç”¨åŸŸï¼šæ²¡æœ‰ä½¿ç”¨ <code>var</code> éšå¼å£°æ˜çš„ä¸€ä¸ªå˜é‡ï¼Œä¼šäº«å—å…¨å±€ä½œç”¨åŸŸï¼Œæˆ–è€…åœ¨ <code>global</code> ä¸ŠæŒ‚è½½çš„å˜é‡ï¼Œä¹Ÿå…·æœ‰å…¨å±€ä½œç”¨åŸŸçš„å±æ€§ï¼Œå…¨å±€å˜é‡å¯ä»¥è¢«å…¶å®ƒæ¨¡å—ä½¿ç”¨ã€‚</li>\n<li>å±€éƒ¨ä½œç”¨åŸŸï¼šåœ¨ Node.js ä¸­ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œåœ¨è¿™ä¸ªæ¨¡å—ä¸­å®šä¹‰çš„å˜é‡ï¼Œåªèƒ½åœ¨è¿™ä¸ªæ¨¡å—ä¸­ä½¿ç”¨ã€‚</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿™äº›å˜é‡éƒ½å±äºå…¨å±€å˜é‡</span></span><br><span class=\"line\">name = <span class=\"string\">'ifyour'</span>;</span><br><span class=\"line\">global.age = <span class=\"number\">18</span>; <span class=\"comment\">// Node.js ä¸­çš„ global ç±»ä¼¼ JavaScript ä¸­çš„ window</span></span><br></pre></td></tr></table></figure>\n<div class=\"tip\"><br>å°½é‡é¿å…ä½¿ç”¨å…¨å±€å˜é‡ï¼Œä¼šé€ æˆå˜é‡æ±¡æŸ“ã€‚<br></div>\n\n<h4 id=\"å›è°ƒå‡½æ•°\"><a href=\"#å›è°ƒå‡½æ•°\" class=\"headerlink\" title=\"å›è°ƒå‡½æ•°\"></a>å›è°ƒå‡½æ•°</h4><p>Node.js ä¸­å¤§é‡ä½¿ç”¨äº†å›è°ƒå‡½æ•°ï¼Œå…³äºå›è°ƒå‡½æ•°ï¼Œæˆ‘ä¹‹å‰åœ¨ç®€ä¹¦å†™äº†ä¸€ç¯‡ï¼Œæˆ‘çš„ç†è§£å¿ƒå¾—ï¼Œæœ‰å…´è¶£çš„å¯ä»¥<a href=\"http://www.jianshu.com/p/1383f4cb9a75\" target=\"_blank\" rel=\"noopener\">å»çœ‹çœ‹</a>ã€‚å…³äºå›è°ƒå‡½æ•°ï¼Œæˆ‘ä¹Ÿæ­£æ˜¯åœ¨ Node.js ä¸­å¯¹å®ƒçš„ç†è§£æ›´ä¸ºæ·±åˆ»äº†ï¼ŒNode.js å¤§é‡çš„å¼‚æ­¥ä»£ç éƒ½å€ŸåŠ©å›è°ƒå‡½æ•°å®ç°ï¼Œæ­£å› å¦‚æ­¤ï¼Œæ€§èƒ½æ›´é«˜å‘€ã€‚çœ‹ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å®šä¹‰å›è°ƒå‡½æ•°</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cb</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello,callback!'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æŠŠå›è°ƒå‡½æ•°çš„å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰ä¼ å…¥è¯¥å‡½æ•°ï¼Œä¸€ç§’åæ‰§è¡Œ</span></span><br><span class=\"line\">setTimeout(cb,<span class=\"number\">1000</span>);</span><br></pre></td></tr></table></figure>\n<p>å€ŸåŠ©è¿™ä¸ªä¾‹å­ï¼Œå¯ä»¥çœ‹åˆ°å›è°ƒå‡½æ•°çš„å®ç°æœºåˆ¶ï¼š</p>\n<ul>\n<li>å®šä¹‰ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼ˆå…¶å®å®ƒå°±æ˜¯å›è°ƒå‡½æ•°ï¼‰</li>\n<li>å°†è¯¥å‡½æ•°çš„å¼•ç”¨åœ°å€ä½œä¸ºå‚æ•°ä¼ ç»™è°ƒç”¨è€…ï¼Œè°ƒç”¨è€…æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¾‹å­ä¸­çš„ <code>setTimeout</code></li>\n<li>å½“ç‰¹å®šæ¡ä»¶å‘ç”Ÿæ—¶ï¼Œè°ƒç”¨è€…ä½¿ç”¨è¿™ä¸ªå¼•ç”¨åœ°å€å»æ‰§è¡Œè¯¥å‡½æ•°</li>\n</ul>\n<p>å›è°ƒå‡½æ•°çš„ç”¨é€”å¾ˆå¤šï¼Œæ¯”å¦‚å®ç°äº‹ä»¶æ³¨å†Œã€å¼‚æ­¥ä»£ç ç­‰ã€‚åœ¨ jQuery ä¸­çš„åŠ¨ç”»å°±æ˜¯å›è°ƒå‡½æ•°çš„ç»å…¸ç”¨æ³•ï¼Œ<code>animate(x,y,z,function(){...})</code>,å½“ä¸€ä¸ªåŠ¨ç”»æ‰§è¡Œå®Œæˆåï¼Œæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚å½“ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®æ—¶ï¼Œéœ€è¦æ‰§è¡Œçš„å‡½æ•°å—ï¼Œè¿™äº›éƒ½æ˜¯å›è°ƒå‡½æ•°ã€‚</p>\n<h3 id=\"Node-js-äº‹ä»¶\"><a href=\"#Node-js-äº‹ä»¶\" class=\"headerlink\" title=\"Node.js äº‹ä»¶\"></a>Node.js äº‹ä»¶</h3><p>Node.js ä¸­çš„ event æ¨¡å—å°±æ˜¯æä¾›äº‹ä»¶ç¼–ç¨‹çš„ APIï¼Œæ‰€æœ‰å…·æœ‰è§¦å‘äº‹ä»¶çš„å¯¹è±¡éƒ½ç»§æ‰¿æˆ–å†…éƒ¨åŒ…å«äº† <code>EventEmitter</code> å¯¹è±¡ã€‚æ¥ä¸€ä¸ªç®€å•çš„ä¾‹å­å§ï¼<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//events æ¨¡å—ä¸­çš„ EventEmitter å¯¹è±¡ï¼Œå®šä¹‰äº†äº‹ä»¶å¯¹è±¡çš„åŸºç¡€ä¿¡æ¯å’Œè¡Œä¸º</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> EventEmitter = <span class=\"built_in\">require</span>(<span class=\"string\">'events'</span>).EventEmitter;</span><br><span class=\"line\"><span class=\"keyword\">var</span> event = <span class=\"keyword\">new</span> EventEmitter();<span class=\"comment\">// å®ä¾‹åŒ–ä¸€ä¸ª event å¯¹è±¡</span></span><br><span class=\"line\">event.on(<span class=\"string\">'myevent'</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>)</span>&#123; <span class=\"comment\">// ç»‘å®š myevent äº‹ä»¶</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hi!'</span> + name);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">event.emit(<span class=\"string\">'myevent'</span>,<span class=\"string\">'ifyour'</span>);<span class=\"comment\">// è§¦å‘äº‹ä»¶</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"äº‹ä»¶å¸¸ç”¨æ–¹æ³•\"><a href=\"#äº‹ä»¶å¸¸ç”¨æ–¹æ³•\" class=\"headerlink\" title=\"äº‹ä»¶å¸¸ç”¨æ–¹æ³•\"></a>äº‹ä»¶å¸¸ç”¨æ–¹æ³•</h4><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">æ–¹æ³•</th>\n<th style=\"text-align:left\">æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">addListener(event, listener)</td>\n<td style=\"text-align:left\">ä¸ºæŒ‡å®šäº‹ä»¶æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨åˆ°ç›‘å¬å™¨æ•°ç»„çš„å°¾éƒ¨ã€‚ä¸ on ç­‰ä»·</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">on(event, listener)</td>\n<td style=\"text-align:left\">ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªç›‘å¬å™¨ï¼Œæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸² event å’Œä¸€ä¸ªå›è°ƒå‡½æ•°</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">once(event, listener)</td>\n<td style=\"text-align:left\">ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªå•æ¬¡ç›‘å¬å™¨</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">removeListener(event,listener)</td>\n<td style=\"text-align:left\">ç§»é™¤æŒ‡å®šäº‹ä»¶çš„æŸä¸ªç›‘å¬å™¨ï¼Œç›‘å¬å™¨å¿…é¡»æ˜¯è¯¥äº‹ä»¶å·²ç»æ³¨å†Œè¿‡çš„ç›‘å¬å™¨</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">removeAllListeners([event])</td>\n<td style=\"text-align:left\">ç§»é™¤æ‰€æœ‰äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨å¦‚æœæŒ‡å®šäº‹ä»¶ï¼Œåˆ™ç§»é™¤è¯¥äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">setMaxListeners(n)</td>\n<td style=\"text-align:left\">setMaxListeners å‡½æ•°ç”¨äºæé«˜ç›‘å¬å™¨çš„é»˜è®¤é™åˆ¶çš„æ•°é‡ï¼Œé»˜è®¤æ˜¯ 10</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">listeners(event)</td>\n<td style=\"text-align:left\">è¿”å›æŒ‡å®šäº‹ä»¶çš„ç›‘å¬å™¨æ•°ç»„</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">emit(event, [arg1], [arg2], [â€¦])</td>\n<td style=\"text-align:left\">æŒ‰é¡ºåºæ‰§è¡Œç›‘å¬å™¨ï¼Œå¦‚æœäº‹ä»¶æœ‰æ³¨å†Œç›‘å¬è¿”å› trueï¼Œå¦åˆ™è¿”å› false</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"Node-js-å¼‚æ­¥ä¸åŒæ­¥\"><a href=\"#Node-js-å¼‚æ­¥ä¸åŒæ­¥\" class=\"headerlink\" title=\"Node.js å¼‚æ­¥ä¸åŒæ­¥\"></a>Node.js å¼‚æ­¥ä¸åŒæ­¥</h3><p><strong><em>åŒæ­¥</em></strong>ï¼šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œæ‰èƒ½æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œæ€»æ—¶é—´ç­‰äºæ‰€æœ‰ä»»åŠ¡æ¶ˆè€—æ—¶é—´ä¹‹å’Œã€‚<br><strong><em>å¼‚æ­¥</em></strong>ï¼šå‡ ä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œï¼Œä¸é™åˆ¶å…ˆåï¼Œæ‰§è¡Œæ€»æ—¶é—´ç­‰äºæ‰§è¡Œè€—æ—¶æœ€é•¿çš„é‚£ä¸ªä»»åŠ¡çš„æ¶ˆè€—æ—¶é—´ã€‚</p>\n<p>åœ¨ Node.js ä¸­æ¯ä¸€ä¸ªä»»åŠ¡æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå›è°ƒå‡½æ•°ï¼Œå‰ä¸€ä¸ªä»»åŠ¡ç»“æŸåï¼Œä¸æ˜¯æ‰§è¡Œåä¸€ä¸ªä»»åŠ¡ï¼Œè€Œæ˜¯æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œåä¸€ä¸ªä»»åŠ¡åˆ™æ˜¯ä¸ç­‰å‰ä¸€ä¸ªä»»åŠ¡ç»“æŸå°±æ‰§è¡Œï¼Œæ‰€ä»¥ç¨‹åºçš„æ‰§è¡Œé¡ºåºä¸ä»»åŠ¡çš„æ’åˆ—é¡ºåºæ˜¯ä¸ä¸€è‡´çš„ã€å¼‚æ­¥çš„ã€‚</p>\n<h4 id=\"å¼‚æ­¥çš„å®ç°\"><a href=\"#å¼‚æ­¥çš„å®ç°\" class=\"headerlink\" title=\"å¼‚æ­¥çš„å®ç°\"></a>å¼‚æ­¥çš„å®ç°</h4><ul>\n<li>å›è°ƒå‡½æ•°</li>\n<li>äº‹ä»¶ï¼ˆåŸºäºå›è°ƒå‡½æ•°ï¼‰</li>\n<li>Promise ï¼ˆES6ï¼‰</li>\n</ul>\n<p>å‰é¢å·²ç»è®²äº†å›è°ƒå‡½æ•°çš„å®ç°æ–¹å¼ï¼Œä¸‹é¢ä¸¾ä¸¤ä¸ªä¾‹å­æ¥è¯´æ˜ Node.js ä¸­ <strong><em>äº‹ä»¶</em></strong> å’Œ <strong><em>Promise</em></strong> å®ç°å¼‚æ­¥ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// äº‹ä»¶ï¼ˆåŸºäºå›è°ƒå‡½æ•°ï¼‰å®ç°å¼‚æ­¥</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> stream = fs.createReadStream(<span class=\"string\">'./data'</span>);<span class=\"comment\">// è°ƒç”¨ fs æ¨¡å—åˆ›å»ºä¸€ä¸ªè¯»å–æµå¯¹è±¡</span></span><br><span class=\"line\">stream.on(<span class=\"string\">'data'</span>,getData);<span class=\"comment\">// è¯»å–äº‹ä»¶ï¼Œæ¯æ¬¡è¯»å–æ—¶è§¦å‘è°ƒç”¨å›è°ƒå‡½æ•° getData</span></span><br><span class=\"line\">stream.on(<span class=\"string\">'end'</span>,getDataDone);<span class=\"comment\">// è¯»å–å®Œæ¯•è°ƒç”¨å›è°ƒå‡½æ•° getDataDone</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getDataDone</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'read done!'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getData</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data.toString());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå½“è¯»å–å¤šä¸ª <code>data</code> æ–‡ä»¶æ—¶ï¼Œè¾“å‡ºçš„å†…å®¹çš„é¡ºåºå¯èƒ½ä¸ä¸€è‡´ï¼Œå› ä¸ºäº‹ä»¶é‡‡ç”¨å›è°ƒå‡½æ•°å®ç°äº†å¼‚æ­¥æ“ä½œã€‚å¯ä»¥çœ‹å‡ºï¼Œäº‹ä»¶å®ç°å¼‚æ­¥ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯å›è°ƒå‡½æ•°ã€‚</p>\n<blockquote>\n<p>æ‰€è°“ Promiseï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚</p>\n</blockquote>\n<p>ä¸‹é¢æ¥çœ‹çœ‹ <code>Promise</code> çš„ä¸€ä¸ªå®ä¾‹ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;<span class=\"comment\">// ä½¿ç”¨ Promise ç”Ÿæˆå®ä¾‹</span></span><br><span class=\"line\">    fs.readFile(<span class=\"string\">'./1'</span>, <span class=\"string\">'utf-8'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, data</span>) </span>&#123;<span class=\"comment\">// readFile æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!err) &#123;</span><br><span class=\"line\">            resolve(data);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            reject(err);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">p.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;<span class=\"comment\">// è°ƒç”¨å®ä¾‹çš„ then æ–¹æ³•</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>ES6 è§„å®šï¼ŒPromise å¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ Promise å®ä¾‹ã€‚Promise æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ <code>resolve</code> å’Œ <code>reject</code>ã€‚å®ƒä»¬æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œç”± JavaScript å¼•æ“æä¾›ï¼Œä¸ç”¨è‡ªå·±éƒ¨ç½²ã€‚</p>\n<ul>\n<li>resolve : åœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ï¼›</li>\n<li>reject  : åœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚</li>\n</ul>\n<p>Promise å®ä¾‹ç”Ÿæˆä»¥åï¼Œå¯ä»¥ç”¨ <code>then</code> æ–¹æ³•åˆ†åˆ«æŒ‡å®š Resolved çŠ¶æ€å’Œ Reject çŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">promise.then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// success</span></span><br><span class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// failure</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>æœ‰äº† Promise å¯¹è±¡ï¼Œå°±å¯ä»¥å°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥æ“ä½œçš„æµç¨‹è¡¨è¾¾å‡ºæ¥ï¼Œé¿å…äº†å±‚å±‚åµŒå¥—çš„å›è°ƒå‡½æ•°ã€‚æ­¤å¤–ï¼ŒPromise å¯¹è±¡æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œä½¿å¾—æ§åˆ¶å¼‚æ­¥æ“ä½œæ›´åŠ å®¹æ˜“ã€‚</p>\n<p>ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œåœ¨æœªä½¿ç”¨ <code>Promise</code> æ—¶ï¼Œæˆ‘ä»¬æƒ³è¦ <code>p1</code> è¯»å–å®Œæ•°æ®åï¼Œç´§æ¥ç€ <code>p2</code> ã€<code>p3</code> è¯»å–ï¼Œå°±éœ€è¦åœ¨ <code>p1</code> çš„å›è°ƒè¯»å–æˆåŠŸå‡½æ•°é‡Œç»§ç»­å†™ <code>p2</code> çš„è¯»å–ï¼Œç±»ä¼¼çš„ <code>p3</code> ä¹Ÿè¦åœ¨ <code>p2</code> çš„å›è°ƒå‡½æ•°ä¸­å†™ï¼Œè¿™å°±é€ æˆäº† <strong><em>å±‚å±‚åµŒå¥—</em></strong> ä¸åˆ©äºä»£ç é˜…è¯»ã€‚è€Œä½¿ç”¨ <code>Promise</code> åï¼Œ<code>then</code> æ–¹æ³•æŠŠé‡Œé¢çš„å›è°ƒå‡½æ•°ç»Ÿä¸€æå–å‡ºæ¥ï¼Œ å¯è¯»æ€§æ›´å¥½äº†ï¼Œä¹Ÿæ–¹ä¾¿ç†è§£ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Promise æä¾›çš„ then æ–¹æ³•é¿å…å±‚æ¬¡åµŒå¥—ï¼Œç›¸å½“äºå®ç° then çš„é“¾å¼æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">// p1 æ‰§è¡Œå®Œ then æ–¹æ³•åï¼Œé€šè¿‡ return p2 ï¼Œè®© p2 ç»§ç»­æ‰§è¡Œ then æ–¹æ³•</span></span><br><span class=\"line\">p1.then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p2;</span><br><span class=\"line\">&#125;,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p2;</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p3;</span><br><span class=\"line\">&#125;,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p3;</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">&#125;,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>æ›´å¤š Promise è¯­æ³•ï¼Œå¯ä»¥å‚è€ƒé˜®ä¸€å³°çš„ã€Š<a href=\"http://es6.ruanyifeng.com/#docs/promise#åŸºæœ¬ç”¨æ³•\" target=\"_blank\" rel=\"noopener\">ECMAScript 6 å…¥é—¨</a>ã€‹ã€‚</p>\n","site":{"data":{}},"excerpt":"<p>åœ¨ä½¿ç”¨ npm çš„æ—¶å€™ï¼Œæˆ‘å‘ç°åœ¨é€Ÿåº¦å®åœ¨å¤ªæ…¢ï¼Œå®‰è£…å°ä¸€ç‚¹çš„åŒ…ç¡®å®æ²¡å•¥é—®é¢˜ï¼Œè£…å¤§ä¸€ç‚¹çš„ï¼Œä¾èµ–å¤šä¸€ç‚¹çš„åŒ…çš„æ—¶å€™ï¼Œé—®é¢˜å°±æ¥äº†ã€‚é€Ÿåº¦æ…¢ï¼Œå“åº”è¿Ÿé’ã€‚<strong><em>nrm</em></strong> æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå®‰è£… nrm åï¼Œå¯ä»¥ä½¿ç”¨ç®€å•çš„å‘½ä»¤å¿«é€Ÿæ¥åˆ‡æ¢ npm æºï¼Œæ¯”å¦‚åˆ‡æ¢åˆ° cnpmã€taobao æºç­‰ï¼Œè¯¦ç»†çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥ç‚¹<a href=\"https://github.com/Pana/nrm#install\" target=\"_blank\" rel=\"noopener\">è¿™é‡Œ</a>è¿›å»äº†è§£ä¸‹ã€‚<br>","more":"</p>\n<h3 id=\"Node-js-ä½¿ç”¨\"><a href=\"#Node-js-ä½¿ç”¨\" class=\"headerlink\" title=\"Node.js ä½¿ç”¨\"></a>Node.js ä½¿ç”¨</h3><h4 id=\"Node-js-æ§åˆ¶å°\"><a href=\"#Node-js-æ§åˆ¶å°\" class=\"headerlink\" title=\"Node.js æ§åˆ¶å°\"></a>Node.js æ§åˆ¶å°</h4><p>å‰é¢è¯´äº†ï¼ŒNode.js æä¾›äº† REPL æ¨¡å¼æ¥è§£æè¾“å…¥çš„æ¯æ¡å‘½ä»¤ï¼Œç°åœ¨å¯ä»¥å®æˆ˜ä¸€ä¸‹äº†ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œç„¶åè¾“å…¥ <code>node</code> è¿›å…¥ Node.js å¼€å§‹æ•²å‘½ä»¤å§ï¼<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'hello,world!'</span>); <span class=\"comment\">// æ™®é€šè¾“å…¥</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.error(<span class=\"string\">'é”™è¯¯æ¶ˆæ¯'</span>);    <span class=\"comment\">// é”™è¯¯è¾“å‡º</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.time(<span class=\"string\">'time'</span>);        <span class=\"comment\">// ä¼šè®¡ç®—åœ¨è¿™ä¸ªè¡¨è¾¾å¼ä¹‹é—´çš„ä»£ç å—æ‰§è¡Œè€—æ—¶</span></span><br><span class=\"line\"><span class=\"comment\">// &#123;...&#125;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.time(<span class=\"string\">'time'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.assert(<span class=\"number\">3</span>&gt;<span class=\"number\">10</span>,<span class=\"string\">'str..'</span>);<span class=\"comment\">// æ–­è¨€ï¼šè¡¨è¾¾å¼ä¸æˆç«‹ï¼Œä¼šè¾“å‡ºåé¢çš„å­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"Node-js-ä½œç”¨åŸŸ\"><a href=\"#Node-js-ä½œç”¨åŸŸ\" class=\"headerlink\" title=\"Node.js ä½œç”¨åŸŸ\"></a>Node.js ä½œç”¨åŸŸ</h4><ul>\n<li>å…¨å±€ä½œç”¨åŸŸï¼šæ²¡æœ‰ä½¿ç”¨ <code>var</code> éšå¼å£°æ˜çš„ä¸€ä¸ªå˜é‡ï¼Œä¼šäº«å—å…¨å±€ä½œç”¨åŸŸï¼Œæˆ–è€…åœ¨ <code>global</code> ä¸ŠæŒ‚è½½çš„å˜é‡ï¼Œä¹Ÿå…·æœ‰å…¨å±€ä½œç”¨åŸŸçš„å±æ€§ï¼Œå…¨å±€å˜é‡å¯ä»¥è¢«å…¶å®ƒæ¨¡å—ä½¿ç”¨ã€‚</li>\n<li>å±€éƒ¨ä½œç”¨åŸŸï¼šåœ¨ Node.js ä¸­ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œåœ¨è¿™ä¸ªæ¨¡å—ä¸­å®šä¹‰çš„å˜é‡ï¼Œåªèƒ½åœ¨è¿™ä¸ªæ¨¡å—ä¸­ä½¿ç”¨ã€‚</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿™äº›å˜é‡éƒ½å±äºå…¨å±€å˜é‡</span></span><br><span class=\"line\">name = <span class=\"string\">'ifyour'</span>;</span><br><span class=\"line\">global.age = <span class=\"number\">18</span>; <span class=\"comment\">// Node.js ä¸­çš„ global ç±»ä¼¼ JavaScript ä¸­çš„ window</span></span><br></pre></td></tr></table></figure>\n<div class=\"tip\"><br>å°½é‡é¿å…ä½¿ç”¨å…¨å±€å˜é‡ï¼Œä¼šé€ æˆå˜é‡æ±¡æŸ“ã€‚<br></div>\n\n<h4 id=\"å›è°ƒå‡½æ•°\"><a href=\"#å›è°ƒå‡½æ•°\" class=\"headerlink\" title=\"å›è°ƒå‡½æ•°\"></a>å›è°ƒå‡½æ•°</h4><p>Node.js ä¸­å¤§é‡ä½¿ç”¨äº†å›è°ƒå‡½æ•°ï¼Œå…³äºå›è°ƒå‡½æ•°ï¼Œæˆ‘ä¹‹å‰åœ¨ç®€ä¹¦å†™äº†ä¸€ç¯‡ï¼Œæˆ‘çš„ç†è§£å¿ƒå¾—ï¼Œæœ‰å…´è¶£çš„å¯ä»¥<a href=\"http://www.jianshu.com/p/1383f4cb9a75\" target=\"_blank\" rel=\"noopener\">å»çœ‹çœ‹</a>ã€‚å…³äºå›è°ƒå‡½æ•°ï¼Œæˆ‘ä¹Ÿæ­£æ˜¯åœ¨ Node.js ä¸­å¯¹å®ƒçš„ç†è§£æ›´ä¸ºæ·±åˆ»äº†ï¼ŒNode.js å¤§é‡çš„å¼‚æ­¥ä»£ç éƒ½å€ŸåŠ©å›è°ƒå‡½æ•°å®ç°ï¼Œæ­£å› å¦‚æ­¤ï¼Œæ€§èƒ½æ›´é«˜å‘€ã€‚çœ‹ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å®šä¹‰å›è°ƒå‡½æ•°</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cb</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello,callback!'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æŠŠå›è°ƒå‡½æ•°çš„å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰ä¼ å…¥è¯¥å‡½æ•°ï¼Œä¸€ç§’åæ‰§è¡Œ</span></span><br><span class=\"line\">setTimeout(cb,<span class=\"number\">1000</span>);</span><br></pre></td></tr></table></figure>\n<p>å€ŸåŠ©è¿™ä¸ªä¾‹å­ï¼Œå¯ä»¥çœ‹åˆ°å›è°ƒå‡½æ•°çš„å®ç°æœºåˆ¶ï¼š</p>\n<ul>\n<li>å®šä¹‰ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼ˆå…¶å®å®ƒå°±æ˜¯å›è°ƒå‡½æ•°ï¼‰</li>\n<li>å°†è¯¥å‡½æ•°çš„å¼•ç”¨åœ°å€ä½œä¸ºå‚æ•°ä¼ ç»™è°ƒç”¨è€…ï¼Œè°ƒç”¨è€…æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¾‹å­ä¸­çš„ <code>setTimeout</code></li>\n<li>å½“ç‰¹å®šæ¡ä»¶å‘ç”Ÿæ—¶ï¼Œè°ƒç”¨è€…ä½¿ç”¨è¿™ä¸ªå¼•ç”¨åœ°å€å»æ‰§è¡Œè¯¥å‡½æ•°</li>\n</ul>\n<p>å›è°ƒå‡½æ•°çš„ç”¨é€”å¾ˆå¤šï¼Œæ¯”å¦‚å®ç°äº‹ä»¶æ³¨å†Œã€å¼‚æ­¥ä»£ç ç­‰ã€‚åœ¨ jQuery ä¸­çš„åŠ¨ç”»å°±æ˜¯å›è°ƒå‡½æ•°çš„ç»å…¸ç”¨æ³•ï¼Œ<code>animate(x,y,z,function(){...})</code>,å½“ä¸€ä¸ªåŠ¨ç”»æ‰§è¡Œå®Œæˆåï¼Œæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚å½“ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®æ—¶ï¼Œéœ€è¦æ‰§è¡Œçš„å‡½æ•°å—ï¼Œè¿™äº›éƒ½æ˜¯å›è°ƒå‡½æ•°ã€‚</p>\n<h3 id=\"Node-js-äº‹ä»¶\"><a href=\"#Node-js-äº‹ä»¶\" class=\"headerlink\" title=\"Node.js äº‹ä»¶\"></a>Node.js äº‹ä»¶</h3><p>Node.js ä¸­çš„ event æ¨¡å—å°±æ˜¯æä¾›äº‹ä»¶ç¼–ç¨‹çš„ APIï¼Œæ‰€æœ‰å…·æœ‰è§¦å‘äº‹ä»¶çš„å¯¹è±¡éƒ½ç»§æ‰¿æˆ–å†…éƒ¨åŒ…å«äº† <code>EventEmitter</code> å¯¹è±¡ã€‚æ¥ä¸€ä¸ªç®€å•çš„ä¾‹å­å§ï¼<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//events æ¨¡å—ä¸­çš„ EventEmitter å¯¹è±¡ï¼Œå®šä¹‰äº†äº‹ä»¶å¯¹è±¡çš„åŸºç¡€ä¿¡æ¯å’Œè¡Œä¸º</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> EventEmitter = <span class=\"built_in\">require</span>(<span class=\"string\">'events'</span>).EventEmitter;</span><br><span class=\"line\"><span class=\"keyword\">var</span> event = <span class=\"keyword\">new</span> EventEmitter();<span class=\"comment\">// å®ä¾‹åŒ–ä¸€ä¸ª event å¯¹è±¡</span></span><br><span class=\"line\">event.on(<span class=\"string\">'myevent'</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>)</span>&#123; <span class=\"comment\">// ç»‘å®š myevent äº‹ä»¶</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hi!'</span> + name);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">event.emit(<span class=\"string\">'myevent'</span>,<span class=\"string\">'ifyour'</span>);<span class=\"comment\">// è§¦å‘äº‹ä»¶</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"äº‹ä»¶å¸¸ç”¨æ–¹æ³•\"><a href=\"#äº‹ä»¶å¸¸ç”¨æ–¹æ³•\" class=\"headerlink\" title=\"äº‹ä»¶å¸¸ç”¨æ–¹æ³•\"></a>äº‹ä»¶å¸¸ç”¨æ–¹æ³•</h4><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">æ–¹æ³•</th>\n<th style=\"text-align:left\">æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">addListener(event, listener)</td>\n<td style=\"text-align:left\">ä¸ºæŒ‡å®šäº‹ä»¶æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨åˆ°ç›‘å¬å™¨æ•°ç»„çš„å°¾éƒ¨ã€‚ä¸ on ç­‰ä»·</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">on(event, listener)</td>\n<td style=\"text-align:left\">ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªç›‘å¬å™¨ï¼Œæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸² event å’Œä¸€ä¸ªå›è°ƒå‡½æ•°</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">once(event, listener)</td>\n<td style=\"text-align:left\">ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªå•æ¬¡ç›‘å¬å™¨</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">removeListener(event,listener)</td>\n<td style=\"text-align:left\">ç§»é™¤æŒ‡å®šäº‹ä»¶çš„æŸä¸ªç›‘å¬å™¨ï¼Œç›‘å¬å™¨å¿…é¡»æ˜¯è¯¥äº‹ä»¶å·²ç»æ³¨å†Œè¿‡çš„ç›‘å¬å™¨</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">removeAllListeners([event])</td>\n<td style=\"text-align:left\">ç§»é™¤æ‰€æœ‰äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨å¦‚æœæŒ‡å®šäº‹ä»¶ï¼Œåˆ™ç§»é™¤è¯¥äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">setMaxListeners(n)</td>\n<td style=\"text-align:left\">setMaxListeners å‡½æ•°ç”¨äºæé«˜ç›‘å¬å™¨çš„é»˜è®¤é™åˆ¶çš„æ•°é‡ï¼Œé»˜è®¤æ˜¯ 10</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">listeners(event)</td>\n<td style=\"text-align:left\">è¿”å›æŒ‡å®šäº‹ä»¶çš„ç›‘å¬å™¨æ•°ç»„</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">emit(event, [arg1], [arg2], [â€¦])</td>\n<td style=\"text-align:left\">æŒ‰é¡ºåºæ‰§è¡Œç›‘å¬å™¨ï¼Œå¦‚æœäº‹ä»¶æœ‰æ³¨å†Œç›‘å¬è¿”å› trueï¼Œå¦åˆ™è¿”å› false</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"Node-js-å¼‚æ­¥ä¸åŒæ­¥\"><a href=\"#Node-js-å¼‚æ­¥ä¸åŒæ­¥\" class=\"headerlink\" title=\"Node.js å¼‚æ­¥ä¸åŒæ­¥\"></a>Node.js å¼‚æ­¥ä¸åŒæ­¥</h3><p><strong><em>åŒæ­¥</em></strong>ï¼šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œæ‰èƒ½æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œæ€»æ—¶é—´ç­‰äºæ‰€æœ‰ä»»åŠ¡æ¶ˆè€—æ—¶é—´ä¹‹å’Œã€‚<br><strong><em>å¼‚æ­¥</em></strong>ï¼šå‡ ä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œï¼Œä¸é™åˆ¶å…ˆåï¼Œæ‰§è¡Œæ€»æ—¶é—´ç­‰äºæ‰§è¡Œè€—æ—¶æœ€é•¿çš„é‚£ä¸ªä»»åŠ¡çš„æ¶ˆè€—æ—¶é—´ã€‚</p>\n<p>åœ¨ Node.js ä¸­æ¯ä¸€ä¸ªä»»åŠ¡æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå›è°ƒå‡½æ•°ï¼Œå‰ä¸€ä¸ªä»»åŠ¡ç»“æŸåï¼Œä¸æ˜¯æ‰§è¡Œåä¸€ä¸ªä»»åŠ¡ï¼Œè€Œæ˜¯æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œåä¸€ä¸ªä»»åŠ¡åˆ™æ˜¯ä¸ç­‰å‰ä¸€ä¸ªä»»åŠ¡ç»“æŸå°±æ‰§è¡Œï¼Œæ‰€ä»¥ç¨‹åºçš„æ‰§è¡Œé¡ºåºä¸ä»»åŠ¡çš„æ’åˆ—é¡ºåºæ˜¯ä¸ä¸€è‡´çš„ã€å¼‚æ­¥çš„ã€‚</p>\n<h4 id=\"å¼‚æ­¥çš„å®ç°\"><a href=\"#å¼‚æ­¥çš„å®ç°\" class=\"headerlink\" title=\"å¼‚æ­¥çš„å®ç°\"></a>å¼‚æ­¥çš„å®ç°</h4><ul>\n<li>å›è°ƒå‡½æ•°</li>\n<li>äº‹ä»¶ï¼ˆåŸºäºå›è°ƒå‡½æ•°ï¼‰</li>\n<li>Promise ï¼ˆES6ï¼‰</li>\n</ul>\n<p>å‰é¢å·²ç»è®²äº†å›è°ƒå‡½æ•°çš„å®ç°æ–¹å¼ï¼Œä¸‹é¢ä¸¾ä¸¤ä¸ªä¾‹å­æ¥è¯´æ˜ Node.js ä¸­ <strong><em>äº‹ä»¶</em></strong> å’Œ <strong><em>Promise</em></strong> å®ç°å¼‚æ­¥ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// äº‹ä»¶ï¼ˆåŸºäºå›è°ƒå‡½æ•°ï¼‰å®ç°å¼‚æ­¥</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> stream = fs.createReadStream(<span class=\"string\">'./data'</span>);<span class=\"comment\">// è°ƒç”¨ fs æ¨¡å—åˆ›å»ºä¸€ä¸ªè¯»å–æµå¯¹è±¡</span></span><br><span class=\"line\">stream.on(<span class=\"string\">'data'</span>,getData);<span class=\"comment\">// è¯»å–äº‹ä»¶ï¼Œæ¯æ¬¡è¯»å–æ—¶è§¦å‘è°ƒç”¨å›è°ƒå‡½æ•° getData</span></span><br><span class=\"line\">stream.on(<span class=\"string\">'end'</span>,getDataDone);<span class=\"comment\">// è¯»å–å®Œæ¯•è°ƒç”¨å›è°ƒå‡½æ•° getDataDone</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getDataDone</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'read done!'</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getData</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data.toString());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå½“è¯»å–å¤šä¸ª <code>data</code> æ–‡ä»¶æ—¶ï¼Œè¾“å‡ºçš„å†…å®¹çš„é¡ºåºå¯èƒ½ä¸ä¸€è‡´ï¼Œå› ä¸ºäº‹ä»¶é‡‡ç”¨å›è°ƒå‡½æ•°å®ç°äº†å¼‚æ­¥æ“ä½œã€‚å¯ä»¥çœ‹å‡ºï¼Œäº‹ä»¶å®ç°å¼‚æ­¥ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯å›è°ƒå‡½æ•°ã€‚</p>\n<blockquote>\n<p>æ‰€è°“ Promiseï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚</p>\n</blockquote>\n<p>ä¸‹é¢æ¥çœ‹çœ‹ <code>Promise</code> çš„ä¸€ä¸ªå®ä¾‹ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;<span class=\"comment\">// ä½¿ç”¨ Promise ç”Ÿæˆå®ä¾‹</span></span><br><span class=\"line\">    fs.readFile(<span class=\"string\">'./1'</span>, <span class=\"string\">'utf-8'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, data</span>) </span>&#123;<span class=\"comment\">// readFile æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!err) &#123;</span><br><span class=\"line\">            resolve(data);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            reject(err);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">p.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;<span class=\"comment\">// è°ƒç”¨å®ä¾‹çš„ then æ–¹æ³•</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>ES6 è§„å®šï¼ŒPromise å¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ Promise å®ä¾‹ã€‚Promise æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ <code>resolve</code> å’Œ <code>reject</code>ã€‚å®ƒä»¬æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œç”± JavaScript å¼•æ“æä¾›ï¼Œä¸ç”¨è‡ªå·±éƒ¨ç½²ã€‚</p>\n<ul>\n<li>resolve : åœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ï¼›</li>\n<li>reject  : åœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚</li>\n</ul>\n<p>Promise å®ä¾‹ç”Ÿæˆä»¥åï¼Œå¯ä»¥ç”¨ <code>then</code> æ–¹æ³•åˆ†åˆ«æŒ‡å®š Resolved çŠ¶æ€å’Œ Reject çŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">promise.then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// success</span></span><br><span class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// failure</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>æœ‰äº† Promise å¯¹è±¡ï¼Œå°±å¯ä»¥å°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥æ“ä½œçš„æµç¨‹è¡¨è¾¾å‡ºæ¥ï¼Œé¿å…äº†å±‚å±‚åµŒå¥—çš„å›è°ƒå‡½æ•°ã€‚æ­¤å¤–ï¼ŒPromise å¯¹è±¡æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œä½¿å¾—æ§åˆ¶å¼‚æ­¥æ“ä½œæ›´åŠ å®¹æ˜“ã€‚</p>\n<p>ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œåœ¨æœªä½¿ç”¨ <code>Promise</code> æ—¶ï¼Œæˆ‘ä»¬æƒ³è¦ <code>p1</code> è¯»å–å®Œæ•°æ®åï¼Œç´§æ¥ç€ <code>p2</code> ã€<code>p3</code> è¯»å–ï¼Œå°±éœ€è¦åœ¨ <code>p1</code> çš„å›è°ƒè¯»å–æˆåŠŸå‡½æ•°é‡Œç»§ç»­å†™ <code>p2</code> çš„è¯»å–ï¼Œç±»ä¼¼çš„ <code>p3</code> ä¹Ÿè¦åœ¨ <code>p2</code> çš„å›è°ƒå‡½æ•°ä¸­å†™ï¼Œè¿™å°±é€ æˆäº† <strong><em>å±‚å±‚åµŒå¥—</em></strong> ä¸åˆ©äºä»£ç é˜…è¯»ã€‚è€Œä½¿ç”¨ <code>Promise</code> åï¼Œ<code>then</code> æ–¹æ³•æŠŠé‡Œé¢çš„å›è°ƒå‡½æ•°ç»Ÿä¸€æå–å‡ºæ¥ï¼Œ å¯è¯»æ€§æ›´å¥½äº†ï¼Œä¹Ÿæ–¹ä¾¿ç†è§£ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Promise æä¾›çš„ then æ–¹æ³•é¿å…å±‚æ¬¡åµŒå¥—ï¼Œç›¸å½“äºå®ç° then çš„é“¾å¼æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">// p1 æ‰§è¡Œå®Œ then æ–¹æ³•åï¼Œé€šè¿‡ return p2 ï¼Œè®© p2 ç»§ç»­æ‰§è¡Œ then æ–¹æ³•</span></span><br><span class=\"line\">p1.then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p2;</span><br><span class=\"line\">&#125;,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p2;</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p3;</span><br><span class=\"line\">&#125;,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p3;</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">&#125;,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>æ›´å¤š Promise è¯­æ³•ï¼Œå¯ä»¥å‚è€ƒé˜®ä¸€å³°çš„ã€Š<a href=\"http://es6.ruanyifeng.com/#docs/promise#åŸºæœ¬ç”¨æ³•\" target=\"_blank\" rel=\"noopener\">ECMAScript 6 å…¥é—¨</a>ã€‹ã€‚</p>"},{"title":"Promise æŸ¥æ¼è¡¥ç¼º","comments":1,"date":"2018-07-15T01:17:58.000Z","from":null,"_content":"\nPromise çš„é‡è¦æ€§ä¸ç”¨å¤šè¯´, æ›¾ç»çœ‹åˆ°å…³äº JavaScript çš„æè¿° --- JS çš„ä¸‰åº§å¤§å±±å°±æ˜¯: `åŸå‹`/`ä½œç”¨åŸŸ`/`å¼‚æ­¥`, æ‰€ä»¥å¦‚æœè¯´ä½ æ˜¯ä¸€ä¸ªåˆæ ¼çš„ JavaScript ç¨‹åºå‘˜, è¿™ä¸‰å—çš„å†…å®¹è‚¯å®šæ˜¯è¦åƒé€çš„. çºµè§‚ JavaScript çš„å¼‚æ­¥å², å®ƒç»å†äº† `callback` -> `Promise` -> `Generator` -> `async-await` è¿™æ ·ä¸€ä¸ªå†ç¨‹, å‰å‰ååç¼–å†™å¼‚æ­¥ä»£ç çš„å˜åŒ–. ä»å˜åŒ–ä¸­å°±å¯ä»¥ä½“ä¼šåˆ°, ç¡®å®è¶Šæ¥è¶Šç®€æ´, è¶Šæ¥è¶Šæ˜“è¯». æŒæ¡å®ƒä»¬, ä½ èƒ½å†™å‡ºæ›´ä¼˜é›…çš„ä»£ç .\n\n<!-- more -->\n\n### Promise ç®€ä»‹\n\n![image](https://user-images.githubusercontent.com/15377484/42730799-8a283548-8830-11e8-9cc0-adb620f7f71a.png)\n\nECMAscript6 åŸç”Ÿæä¾›äº† Promise å¯¹è±¡, ç”±æµè§ˆå™¨ç›´æ¥æ”¯æŒ, ç›®å‰å¤§å¤šæ•°æµè§ˆå™¨éƒ½å·²ç»å®ç°äº†, ä½ç‰ˆæœ¬æµè§ˆå™¨å¯ä»¥ä½¿ç”¨ *es6-promise* åº“æ¥å¡«å¹³å…¼å®¹æ€§é—®é¢˜. Promise æœ€å¤§çš„å¥½å¤„æ˜¯æŠŠæ‰§è¡Œä»£ç å’Œå¤„ç†ä»£ç åˆ†ç¦»å¼€, ä½¿å¼‚æ­¥æ“ä½œé€»è¾‘æ›´åŠ æ¸…æ™°.\n\n### Promise ç‰¹ç‚¹\n\n1. å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ Promise å¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œ, æœ‰ä¸‰ç§çŠ¶æ€:\n  * pending - åˆå§‹çŠ¶æ€\n  * fulfilled - æ“ä½œæˆåŠŸå®Œæˆ\n  * rejected - æ“ä½œå¤±è´¥\n2. ä¸€æ—¦çŠ¶æ€æ”¹å˜, å°±ä¸ä¼šå†å‘ç”Ÿå˜åŒ–. Promise å¯¹è±¡çš„çŠ¶æ€æ”¹å˜. åªæœ‰ä¸¤ç§æƒ…å†µ: ä» `Pending` å˜ä¸º `Resolved` å’Œä» `Pending` å˜ä¸º `Rejected`. åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿ, çŠ¶æ€å°±ä¼šå›ºå®š, ä¸ä¼šå†å˜äº†, ä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æœ, ä¸äº‹ä»¶ä¸åŒçš„æ˜¯, å°±ç®—æ”¹å˜å·²ç»å‘ç”Ÿäº†, å†å¯¹ Promise å¯¹è±¡æ·»åŠ å›è°ƒå‡½æ•°, ä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æœ, è€Œäº‹ä»¶ä¸€æ—¦é”™è¿‡å†å»ç›‘å¬, å°±ä¸ä¼šå¾—åˆ°ç»“æœ.\n\n![image](https://user-images.githubusercontent.com/15377484/42730787-1d531df2-8830-11e8-8514-0a810d945440.png)\n\n<div class=\"tip\"> åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€, å…¶ä»–æ“ä½œéƒ½ä¸ä¼šå½±å“çŠ¶æ€æ”¹å˜, è¿™ä¹Ÿæ˜¯ Promise æœ€æœ¬è´¨çš„ç‰¹æ€§, å¯¹äºè°ƒç”¨è€…çš„ä¸€ç§æ‰¿è¯º </div>\n\n### Promise ä¼˜ç¼ºç‚¹\n\nä¼˜ç‚¹:\n\n  * å¯ä»¥å°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥æ“ä½œçš„æµç¨‹è¡¨è¾¾å‡ºæ¥, é¿å…äº†å±‚å±‚åµŒå¥—çš„å›è°ƒå‡½æ•° Promise\n  * å¯¹è±¡æä¾›ç»Ÿä¸€çš„æ¥å£, ä½¿å¾—æ§åˆ¶å¼‚æ­¥æ“ä½œæ›´åŠ å®¹æ˜“\n\nç¼ºç‚¹:\n\n  * æ— æ³•å–æ¶ˆ Promise, ä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œ, æ— æ³•ä¸­é€”å–æ¶ˆ\n  * å¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°, Promise å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯, ä¸ä¼šååº”åˆ°å¤–éƒ¨\n  * å½“å¤„äº `Pending` çŠ¶æ€æ—¶, æ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€ä¸ªé˜¶æ®µï¼ˆåˆšåˆšå¼€å§‹æˆ–è€…å³å°†å®Œæˆï¼‰\n\n### Promise.prototype.then\n\nPromise.prototype.then æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡, å› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•\n\n```js\najax('http://some.api.com/')\n  .then((json) => {\n    return json.post;\n  })\n  .then((post) => {\n    // post å¤„ç†\n  });\n```\n\nğŸ‘† ä»£ç ä¸­ä½¿ç”¨äº†ä¸¤ä¸ª then æ–¹æ³•, åˆ†åˆ«æŒ‡å®šäº†å¯¹åº”çš„å›è°ƒå‚æ•°. ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°å®Œæˆå, ä¼šå°†è¿”å›ç»“æœä½œä¸ºå‚æ•°, ä¼ å…¥ç¬¬äºŒä¸ª then ä¸­çš„å›è°ƒå‡½æ•°æ‰§è¡Œ.\n\n```js\najax('http://some.api.com/')\n  .then((jsonURL) => {\n    return ajax(jsonURL);\n  })\n  .then((post) => {\n    // post å¤„ç†\n  });\n```\n\nğŸ‘† å¦‚æœç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°è¿”å›çš„æ˜¯ Promise å¯¹è±¡, åä¸€ä¸ªå›è°ƒå‡½æ•°ä¼šç­‰å¾…è¯¥ Promise å¯¹è±¡çš„è¿è¡Œç»“æœ, ç­‰ Promise è¿è¡Œç»“æœè¿”å›, å†è¿›ä¸€æ­¥è°ƒç”¨. è¿™ç§è®¾è®¡ä½¿å¾—åµŒå¥—çš„å¼‚æ­¥æ“ä½œ, å¯ä»¥è¢«å¾ˆå®¹æ˜“å¾—æ”¹å†™, æŠŠå›è°ƒå‡½æ•°çš„ \"æ¨ªå‘å‘å±•\" æ”¹ä¸ºäº† \"å‘ä¸‹å‘å±•\".\n\n### Promise.prototype.catch\n\nPromise.prototype.catch é”™è¯¯æ•æ‰æ–¹æ³•æ˜¯ `Promise.prototype.then(null, rejection)` çš„åˆ«å, ç”¨æ¥æŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å¤„ç†å‡½æ•°.\n\n```js\najax('http://some.api.com/')\n  .then((post) => {\n    throw Error();\n  })\n  .catch((error) => {\n    // æ•æ‰å›è°ƒå‡½æ•°è¿è¡Œæ—¶å‘ç”Ÿçš„é”™è¯¯è¿›è¡Œå¤„ç†\n    console.log('error:' + error);\n  });\n```\n\nPromise å¯¹è±¡çš„é”™è¯¯å…·æœ‰ \"å†’æ³¡\" æ€§è´¨, ä¼šä¸€ç›´å‘åä¼ é€’, ç›´åˆ°è¢«æ•è·ä¸ºæ­¢.\n\n```js\najax('http://some.api.com/')\n  .then((jsonURL) => {\n    return ajax(jsonURL);\n  })\n  .then((comments) => {\n    throw Error();\n  })\n  .catch((error) => {\n    // å¤„ç†å‰ä¸¤ä¸ªå›è°ƒå‡½æ•°çš„é”™è¯¯\n    console.log('error:' + error);\n  });\n```\n\n### Promise.resolve\n\nPromise.resolve æ–¹æ³•å¯ä»¥å°†ç°æœ‰å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡. å¦‚æœ Promise.resolve æ–¹æ³•çš„å‚æ•°, ä¸æ˜¯ thenable å¯¹è±¡ (å…·æœ‰ then æ–¹æ³•çš„å¯¹è±¡), åˆ™è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡, ä¸”å®ƒçš„çŠ¶æ€ä¸º `fulfilled`.\n\n```js\nconst resolve = Promise.resolve('promise resolve');\n\nresolve.then((s) => {\n  console.log(s);\n});\n\n// output ğŸ‘‡\npromise resolve\n```\n\nå¦‚æœ Promise å¯¹è±¡çš„å®ä¾‹çŠ¶æ€ä¸º `fulfilled`, å›è°ƒå‡½æ•°ä¼šç«‹å³æ‰§è¡Œ, Promise.resolve æ–¹æ³•çš„å‚æ•°å°±æ˜¯å›è°ƒå‡½æ•°çš„å‚æ•°. å¦‚æœ Promise.resolve æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ª Promise å¯¹è±¡çš„å®ä¾‹, åˆ™ä¼šè¿”å›è¯¥ Promise å®ä¾‹.\n\n### Promise.reject\n\nPromise.reject(reason) æ–¹æ³•ä¸ resolve æ–¹æ³•ç±»ä¼¼, ä¹Ÿä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹, ä½†è¯¥å®ä¾‹çš„çŠ¶æ€ä¸º `rejected`. Promise.reject æ–¹æ³•çš„å‚æ•°, ä¼šè¢«ä¼ é€’ç»™å®ä¾‹çš„å›è°ƒå‡½æ•°.\n\n```js\nconst reject = Promise.reject('promise reject');\n\nreject.then(null, (err) => {\n  console.log(err)\n});\n\n// output ğŸ‘‡\npromise reject\n```\n\n### Promise.all\n\nPromise.all æ–¹æ³•ç”¨äºå°†å¤šä¸ª Promise å®ä¾‹, åŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹, è¯¥æ–¹æ³•ä¸€èˆ¬æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°, ä½†ä¸ä¸€å®šæ˜¯æ•°ç»„, åªè¦å…·æœ‰ iterator æ¥å£. ä¸”è¿”å›çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ Promise å®ä¾‹.\n\n```js\nconst getRandom = () => +(Math.random() * 1000).toFixed(0);\nconst ajax = (taskID) => new Promise(resolve => {\n  let timeout = getRandom();\n  console.log(`taskID=${taskID} start.`);\n  setTimeout(function() {\n    console.log(`taskID=${taskID} finished in time=${timeout}.`);\n    resolve(taskID)\n  }, timeout);\n});\n\nPromise.all([ajax(1), ajax(2), ajax(3)])\n  .then(resultList => {\n    console.log('results:', resultList);\n  });\n```\n\nè¾“å‡ºç»“æœ ğŸ‘‡:\n\n```text\ntaskID=1 start.\ntaskID=2 start.\ntaskID=3 start.\ntaskID=2 finished in time=27.\ntaskID=3 finished in time=257.\ntaskID=1 finished in time=876.\nresults: [1, 2, 3]\n```\n\nPromise.all çŠ¶æ€åˆ†ä¸ºä¸¤ç§:\n\n* åªæœ‰ ajax(1)ã€ajax(2)ã€ajax(3) çš„çŠ¶æ€éƒ½å˜æˆ `fulfilled`, Promise.all è¿”å›çš„çŠ¶æ€æ‰ä¼šå˜æˆ `fulfilled`, æ­¤æ—¶ ajax(1)ã€ajax(2)ã€ajax(3) çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„, ä¼ é€’ç»™ Promise.all çš„å›è°ƒå‡½æ•°.\n* åªè¦ ajax(1)ã€ajax(2)ã€ajax(3) ä¹‹ä¸­æœ‰ä¸€ä¸ªæ˜¯ `rejected`, Promise.all è¿”å›çš„çŠ¶æ€å°±å˜æˆ `rejected`, æ­¤æ—¶ç¬¬ä¸€ä¸ªè¢« reject çš„å®ä¾‹çš„è¿”å›å€¼, ä¼šä¼ é€’ç»™ Promise.all çš„å›è°ƒå‡½æ•°.\n\n### Promise.race\n\nPromise.race æ–¹æ³•ä¹Ÿæ˜¯å°†å¤šä¸ª Promise å®ä¾‹, åŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹, ä¸ Promise.all ä¸åŒçš„æ˜¯ä¸€æ—¦æœ‰çŠ¶æ€æ”¹å˜, å°±ä¼šè¿”å›ç¬¬ä¸€ä¸ªçŠ¶æ€æ”¹å˜çš„ Promise å®ä¾‹è¿”å›å€¼.\n\n```js\nconst getRandom = () => +(Math.random() * 1000).toFixed(0);\nconst ajax = (taskID) => new Promise(resolve => {\n  let timeout = getRandom();\n  console.log(`taskID=${taskID} start.`);\n  setTimeout(function() {\n    console.log(`taskID=${taskID} finished in time=${timeout}.`);\n    resolve(taskID)\n  }, timeout);\n});\n\nPromise.race([ajax(1), ajax(2), ajax(3)])\n  .then(result => {\n    console.log('results:', result);\n  });\n```\n\nè¾“å‡ºç»“æœ ğŸ‘‡:\n\n```text\ntaskID=1 start.\ntaskID=2 start.\ntaskID=3 start.\ntaskID=2 finished in time=59.\nresults: 2\ntaskID=3 finished in time=707.\ntaskID=1 finished in time=854.\n```\n\nPromise.race è™½ç„¶ **è¿”å›ç¬¬ä¸€ä¸ªçŠ¶æ€æ”¹å˜çš„ Promise å®ä¾‹**, ä½†ä¸èƒ½é˜»æ­¢å…¶ä»– Promise å®ä¾‹çŠ¶æ€æ”¹å˜.\n\nå¦‚æœ `Promise.all` å’Œ `Promise.race` çš„å‚æ•°ä¸æ˜¯ Promise å®ä¾‹, å®ƒä»¬å°±ä¼šè°ƒç”¨ Promise.resolve æ–¹æ³•, å°†å‚æ•°è½¬ä¸º Promise å®ä¾‹, å†è¿›ä¸€æ­¥å¤„ç†.\n\n### å‚è€ƒ\n\n* [js-async-tutorial @GitHub](https://github.com/wangfupeng1988/js-async-tutorial)\n* [Promise constructor @MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise)\n","source":"_posts/Promise-æŸ¥æ¼è¡¥ç¼º.md","raw":"---\ntitle: Promise æŸ¥æ¼è¡¥ç¼º\ncomments: true\ndate: 2018-07-15 09:17:58\ntags:\nfrom:\n---\n\nPromise çš„é‡è¦æ€§ä¸ç”¨å¤šè¯´, æ›¾ç»çœ‹åˆ°å…³äº JavaScript çš„æè¿° --- JS çš„ä¸‰åº§å¤§å±±å°±æ˜¯: `åŸå‹`/`ä½œç”¨åŸŸ`/`å¼‚æ­¥`, æ‰€ä»¥å¦‚æœè¯´ä½ æ˜¯ä¸€ä¸ªåˆæ ¼çš„ JavaScript ç¨‹åºå‘˜, è¿™ä¸‰å—çš„å†…å®¹è‚¯å®šæ˜¯è¦åƒé€çš„. çºµè§‚ JavaScript çš„å¼‚æ­¥å², å®ƒç»å†äº† `callback` -> `Promise` -> `Generator` -> `async-await` è¿™æ ·ä¸€ä¸ªå†ç¨‹, å‰å‰ååç¼–å†™å¼‚æ­¥ä»£ç çš„å˜åŒ–. ä»å˜åŒ–ä¸­å°±å¯ä»¥ä½“ä¼šåˆ°, ç¡®å®è¶Šæ¥è¶Šç®€æ´, è¶Šæ¥è¶Šæ˜“è¯». æŒæ¡å®ƒä»¬, ä½ èƒ½å†™å‡ºæ›´ä¼˜é›…çš„ä»£ç .\n\n<!-- more -->\n\n### Promise ç®€ä»‹\n\n![image](https://user-images.githubusercontent.com/15377484/42730799-8a283548-8830-11e8-9cc0-adb620f7f71a.png)\n\nECMAscript6 åŸç”Ÿæä¾›äº† Promise å¯¹è±¡, ç”±æµè§ˆå™¨ç›´æ¥æ”¯æŒ, ç›®å‰å¤§å¤šæ•°æµè§ˆå™¨éƒ½å·²ç»å®ç°äº†, ä½ç‰ˆæœ¬æµè§ˆå™¨å¯ä»¥ä½¿ç”¨ *es6-promise* åº“æ¥å¡«å¹³å…¼å®¹æ€§é—®é¢˜. Promise æœ€å¤§çš„å¥½å¤„æ˜¯æŠŠæ‰§è¡Œä»£ç å’Œå¤„ç†ä»£ç åˆ†ç¦»å¼€, ä½¿å¼‚æ­¥æ“ä½œé€»è¾‘æ›´åŠ æ¸…æ™°.\n\n### Promise ç‰¹ç‚¹\n\n1. å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ Promise å¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œ, æœ‰ä¸‰ç§çŠ¶æ€:\n  * pending - åˆå§‹çŠ¶æ€\n  * fulfilled - æ“ä½œæˆåŠŸå®Œæˆ\n  * rejected - æ“ä½œå¤±è´¥\n2. ä¸€æ—¦çŠ¶æ€æ”¹å˜, å°±ä¸ä¼šå†å‘ç”Ÿå˜åŒ–. Promise å¯¹è±¡çš„çŠ¶æ€æ”¹å˜. åªæœ‰ä¸¤ç§æƒ…å†µ: ä» `Pending` å˜ä¸º `Resolved` å’Œä» `Pending` å˜ä¸º `Rejected`. åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿ, çŠ¶æ€å°±ä¼šå›ºå®š, ä¸ä¼šå†å˜äº†, ä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æœ, ä¸äº‹ä»¶ä¸åŒçš„æ˜¯, å°±ç®—æ”¹å˜å·²ç»å‘ç”Ÿäº†, å†å¯¹ Promise å¯¹è±¡æ·»åŠ å›è°ƒå‡½æ•°, ä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æœ, è€Œäº‹ä»¶ä¸€æ—¦é”™è¿‡å†å»ç›‘å¬, å°±ä¸ä¼šå¾—åˆ°ç»“æœ.\n\n![image](https://user-images.githubusercontent.com/15377484/42730787-1d531df2-8830-11e8-8514-0a810d945440.png)\n\n<div class=\"tip\"> åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€, å…¶ä»–æ“ä½œéƒ½ä¸ä¼šå½±å“çŠ¶æ€æ”¹å˜, è¿™ä¹Ÿæ˜¯ Promise æœ€æœ¬è´¨çš„ç‰¹æ€§, å¯¹äºè°ƒç”¨è€…çš„ä¸€ç§æ‰¿è¯º </div>\n\n### Promise ä¼˜ç¼ºç‚¹\n\nä¼˜ç‚¹:\n\n  * å¯ä»¥å°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥æ“ä½œçš„æµç¨‹è¡¨è¾¾å‡ºæ¥, é¿å…äº†å±‚å±‚åµŒå¥—çš„å›è°ƒå‡½æ•° Promise\n  * å¯¹è±¡æä¾›ç»Ÿä¸€çš„æ¥å£, ä½¿å¾—æ§åˆ¶å¼‚æ­¥æ“ä½œæ›´åŠ å®¹æ˜“\n\nç¼ºç‚¹:\n\n  * æ— æ³•å–æ¶ˆ Promise, ä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œ, æ— æ³•ä¸­é€”å–æ¶ˆ\n  * å¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°, Promise å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯, ä¸ä¼šååº”åˆ°å¤–éƒ¨\n  * å½“å¤„äº `Pending` çŠ¶æ€æ—¶, æ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€ä¸ªé˜¶æ®µï¼ˆåˆšåˆšå¼€å§‹æˆ–è€…å³å°†å®Œæˆï¼‰\n\n### Promise.prototype.then\n\nPromise.prototype.then æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡, å› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•\n\n```js\najax('http://some.api.com/')\n  .then((json) => {\n    return json.post;\n  })\n  .then((post) => {\n    // post å¤„ç†\n  });\n```\n\nğŸ‘† ä»£ç ä¸­ä½¿ç”¨äº†ä¸¤ä¸ª then æ–¹æ³•, åˆ†åˆ«æŒ‡å®šäº†å¯¹åº”çš„å›è°ƒå‚æ•°. ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°å®Œæˆå, ä¼šå°†è¿”å›ç»“æœä½œä¸ºå‚æ•°, ä¼ å…¥ç¬¬äºŒä¸ª then ä¸­çš„å›è°ƒå‡½æ•°æ‰§è¡Œ.\n\n```js\najax('http://some.api.com/')\n  .then((jsonURL) => {\n    return ajax(jsonURL);\n  })\n  .then((post) => {\n    // post å¤„ç†\n  });\n```\n\nğŸ‘† å¦‚æœç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°è¿”å›çš„æ˜¯ Promise å¯¹è±¡, åä¸€ä¸ªå›è°ƒå‡½æ•°ä¼šç­‰å¾…è¯¥ Promise å¯¹è±¡çš„è¿è¡Œç»“æœ, ç­‰ Promise è¿è¡Œç»“æœè¿”å›, å†è¿›ä¸€æ­¥è°ƒç”¨. è¿™ç§è®¾è®¡ä½¿å¾—åµŒå¥—çš„å¼‚æ­¥æ“ä½œ, å¯ä»¥è¢«å¾ˆå®¹æ˜“å¾—æ”¹å†™, æŠŠå›è°ƒå‡½æ•°çš„ \"æ¨ªå‘å‘å±•\" æ”¹ä¸ºäº† \"å‘ä¸‹å‘å±•\".\n\n### Promise.prototype.catch\n\nPromise.prototype.catch é”™è¯¯æ•æ‰æ–¹æ³•æ˜¯ `Promise.prototype.then(null, rejection)` çš„åˆ«å, ç”¨æ¥æŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å¤„ç†å‡½æ•°.\n\n```js\najax('http://some.api.com/')\n  .then((post) => {\n    throw Error();\n  })\n  .catch((error) => {\n    // æ•æ‰å›è°ƒå‡½æ•°è¿è¡Œæ—¶å‘ç”Ÿçš„é”™è¯¯è¿›è¡Œå¤„ç†\n    console.log('error:' + error);\n  });\n```\n\nPromise å¯¹è±¡çš„é”™è¯¯å…·æœ‰ \"å†’æ³¡\" æ€§è´¨, ä¼šä¸€ç›´å‘åä¼ é€’, ç›´åˆ°è¢«æ•è·ä¸ºæ­¢.\n\n```js\najax('http://some.api.com/')\n  .then((jsonURL) => {\n    return ajax(jsonURL);\n  })\n  .then((comments) => {\n    throw Error();\n  })\n  .catch((error) => {\n    // å¤„ç†å‰ä¸¤ä¸ªå›è°ƒå‡½æ•°çš„é”™è¯¯\n    console.log('error:' + error);\n  });\n```\n\n### Promise.resolve\n\nPromise.resolve æ–¹æ³•å¯ä»¥å°†ç°æœ‰å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡. å¦‚æœ Promise.resolve æ–¹æ³•çš„å‚æ•°, ä¸æ˜¯ thenable å¯¹è±¡ (å…·æœ‰ then æ–¹æ³•çš„å¯¹è±¡), åˆ™è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡, ä¸”å®ƒçš„çŠ¶æ€ä¸º `fulfilled`.\n\n```js\nconst resolve = Promise.resolve('promise resolve');\n\nresolve.then((s) => {\n  console.log(s);\n});\n\n// output ğŸ‘‡\npromise resolve\n```\n\nå¦‚æœ Promise å¯¹è±¡çš„å®ä¾‹çŠ¶æ€ä¸º `fulfilled`, å›è°ƒå‡½æ•°ä¼šç«‹å³æ‰§è¡Œ, Promise.resolve æ–¹æ³•çš„å‚æ•°å°±æ˜¯å›è°ƒå‡½æ•°çš„å‚æ•°. å¦‚æœ Promise.resolve æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ª Promise å¯¹è±¡çš„å®ä¾‹, åˆ™ä¼šè¿”å›è¯¥ Promise å®ä¾‹.\n\n### Promise.reject\n\nPromise.reject(reason) æ–¹æ³•ä¸ resolve æ–¹æ³•ç±»ä¼¼, ä¹Ÿä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹, ä½†è¯¥å®ä¾‹çš„çŠ¶æ€ä¸º `rejected`. Promise.reject æ–¹æ³•çš„å‚æ•°, ä¼šè¢«ä¼ é€’ç»™å®ä¾‹çš„å›è°ƒå‡½æ•°.\n\n```js\nconst reject = Promise.reject('promise reject');\n\nreject.then(null, (err) => {\n  console.log(err)\n});\n\n// output ğŸ‘‡\npromise reject\n```\n\n### Promise.all\n\nPromise.all æ–¹æ³•ç”¨äºå°†å¤šä¸ª Promise å®ä¾‹, åŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹, è¯¥æ–¹æ³•ä¸€èˆ¬æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°, ä½†ä¸ä¸€å®šæ˜¯æ•°ç»„, åªè¦å…·æœ‰ iterator æ¥å£. ä¸”è¿”å›çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ Promise å®ä¾‹.\n\n```js\nconst getRandom = () => +(Math.random() * 1000).toFixed(0);\nconst ajax = (taskID) => new Promise(resolve => {\n  let timeout = getRandom();\n  console.log(`taskID=${taskID} start.`);\n  setTimeout(function() {\n    console.log(`taskID=${taskID} finished in time=${timeout}.`);\n    resolve(taskID)\n  }, timeout);\n});\n\nPromise.all([ajax(1), ajax(2), ajax(3)])\n  .then(resultList => {\n    console.log('results:', resultList);\n  });\n```\n\nè¾“å‡ºç»“æœ ğŸ‘‡:\n\n```text\ntaskID=1 start.\ntaskID=2 start.\ntaskID=3 start.\ntaskID=2 finished in time=27.\ntaskID=3 finished in time=257.\ntaskID=1 finished in time=876.\nresults: [1, 2, 3]\n```\n\nPromise.all çŠ¶æ€åˆ†ä¸ºä¸¤ç§:\n\n* åªæœ‰ ajax(1)ã€ajax(2)ã€ajax(3) çš„çŠ¶æ€éƒ½å˜æˆ `fulfilled`, Promise.all è¿”å›çš„çŠ¶æ€æ‰ä¼šå˜æˆ `fulfilled`, æ­¤æ—¶ ajax(1)ã€ajax(2)ã€ajax(3) çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„, ä¼ é€’ç»™ Promise.all çš„å›è°ƒå‡½æ•°.\n* åªè¦ ajax(1)ã€ajax(2)ã€ajax(3) ä¹‹ä¸­æœ‰ä¸€ä¸ªæ˜¯ `rejected`, Promise.all è¿”å›çš„çŠ¶æ€å°±å˜æˆ `rejected`, æ­¤æ—¶ç¬¬ä¸€ä¸ªè¢« reject çš„å®ä¾‹çš„è¿”å›å€¼, ä¼šä¼ é€’ç»™ Promise.all çš„å›è°ƒå‡½æ•°.\n\n### Promise.race\n\nPromise.race æ–¹æ³•ä¹Ÿæ˜¯å°†å¤šä¸ª Promise å®ä¾‹, åŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹, ä¸ Promise.all ä¸åŒçš„æ˜¯ä¸€æ—¦æœ‰çŠ¶æ€æ”¹å˜, å°±ä¼šè¿”å›ç¬¬ä¸€ä¸ªçŠ¶æ€æ”¹å˜çš„ Promise å®ä¾‹è¿”å›å€¼.\n\n```js\nconst getRandom = () => +(Math.random() * 1000).toFixed(0);\nconst ajax = (taskID) => new Promise(resolve => {\n  let timeout = getRandom();\n  console.log(`taskID=${taskID} start.`);\n  setTimeout(function() {\n    console.log(`taskID=${taskID} finished in time=${timeout}.`);\n    resolve(taskID)\n  }, timeout);\n});\n\nPromise.race([ajax(1), ajax(2), ajax(3)])\n  .then(result => {\n    console.log('results:', result);\n  });\n```\n\nè¾“å‡ºç»“æœ ğŸ‘‡:\n\n```text\ntaskID=1 start.\ntaskID=2 start.\ntaskID=3 start.\ntaskID=2 finished in time=59.\nresults: 2\ntaskID=3 finished in time=707.\ntaskID=1 finished in time=854.\n```\n\nPromise.race è™½ç„¶ **è¿”å›ç¬¬ä¸€ä¸ªçŠ¶æ€æ”¹å˜çš„ Promise å®ä¾‹**, ä½†ä¸èƒ½é˜»æ­¢å…¶ä»– Promise å®ä¾‹çŠ¶æ€æ”¹å˜.\n\nå¦‚æœ `Promise.all` å’Œ `Promise.race` çš„å‚æ•°ä¸æ˜¯ Promise å®ä¾‹, å®ƒä»¬å°±ä¼šè°ƒç”¨ Promise.resolve æ–¹æ³•, å°†å‚æ•°è½¬ä¸º Promise å®ä¾‹, å†è¿›ä¸€æ­¥å¤„ç†.\n\n### å‚è€ƒ\n\n* [js-async-tutorial @GitHub](https://github.com/wangfupeng1988/js-async-tutorial)\n* [Promise constructor @MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise)\n","slug":"Promise-æŸ¥æ¼è¡¥ç¼º","published":1,"updated":"2019-12-07T04:59:34.322Z","layout":"post","photos":[],"link":"","_id":"ck3v60jte000cr9q9ct55mrd2","content":"<p>Promise çš„é‡è¦æ€§ä¸ç”¨å¤šè¯´, æ›¾ç»çœ‹åˆ°å…³äº JavaScript çš„æè¿° â€” JS çš„ä¸‰åº§å¤§å±±å°±æ˜¯: <code>åŸå‹</code>/<code>ä½œç”¨åŸŸ</code>/<code>å¼‚æ­¥</code>, æ‰€ä»¥å¦‚æœè¯´ä½ æ˜¯ä¸€ä¸ªåˆæ ¼çš„ JavaScript ç¨‹åºå‘˜, è¿™ä¸‰å—çš„å†…å®¹è‚¯å®šæ˜¯è¦åƒé€çš„. çºµè§‚ JavaScript çš„å¼‚æ­¥å², å®ƒç»å†äº† <code>callback</code> -&gt; <code>Promise</code> -&gt; <code>Generator</code> -&gt; <code>async-await</code> è¿™æ ·ä¸€ä¸ªå†ç¨‹, å‰å‰ååç¼–å†™å¼‚æ­¥ä»£ç çš„å˜åŒ–. ä»å˜åŒ–ä¸­å°±å¯ä»¥ä½“ä¼šåˆ°, ç¡®å®è¶Šæ¥è¶Šç®€æ´, è¶Šæ¥è¶Šæ˜“è¯». æŒæ¡å®ƒä»¬, ä½ èƒ½å†™å‡ºæ›´ä¼˜é›…çš„ä»£ç .</p>\n<a id=\"more\"></a>\n<h3 id=\"Promise-ç®€ä»‹\"><a href=\"#Promise-ç®€ä»‹\" class=\"headerlink\" title=\"Promise ç®€ä»‹\"></a>Promise ç®€ä»‹</h3><p><img src=\"https://user-images.githubusercontent.com/15377484/42730799-8a283548-8830-11e8-9cc0-adb620f7f71a.png\" alt=\"image\"></p>\n<p>ECMAscript6 åŸç”Ÿæä¾›äº† Promise å¯¹è±¡, ç”±æµè§ˆå™¨ç›´æ¥æ”¯æŒ, ç›®å‰å¤§å¤šæ•°æµè§ˆå™¨éƒ½å·²ç»å®ç°äº†, ä½ç‰ˆæœ¬æµè§ˆå™¨å¯ä»¥ä½¿ç”¨ <em>es6-promise</em> åº“æ¥å¡«å¹³å…¼å®¹æ€§é—®é¢˜. Promise æœ€å¤§çš„å¥½å¤„æ˜¯æŠŠæ‰§è¡Œä»£ç å’Œå¤„ç†ä»£ç åˆ†ç¦»å¼€, ä½¿å¼‚æ­¥æ“ä½œé€»è¾‘æ›´åŠ æ¸…æ™°.</p>\n<h3 id=\"Promise-ç‰¹ç‚¹\"><a href=\"#Promise-ç‰¹ç‚¹\" class=\"headerlink\" title=\"Promise ç‰¹ç‚¹\"></a>Promise ç‰¹ç‚¹</h3><ol>\n<li>å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ Promise å¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œ, æœ‰ä¸‰ç§çŠ¶æ€:<ul>\n<li>pending - åˆå§‹çŠ¶æ€</li>\n<li>fulfilled - æ“ä½œæˆåŠŸå®Œæˆ</li>\n<li>rejected - æ“ä½œå¤±è´¥</li>\n</ul>\n</li>\n<li>ä¸€æ—¦çŠ¶æ€æ”¹å˜, å°±ä¸ä¼šå†å‘ç”Ÿå˜åŒ–. Promise å¯¹è±¡çš„çŠ¶æ€æ”¹å˜. åªæœ‰ä¸¤ç§æƒ…å†µ: ä» <code>Pending</code> å˜ä¸º <code>Resolved</code> å’Œä» <code>Pending</code> å˜ä¸º <code>Rejected</code>. åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿ, çŠ¶æ€å°±ä¼šå›ºå®š, ä¸ä¼šå†å˜äº†, ä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æœ, ä¸äº‹ä»¶ä¸åŒçš„æ˜¯, å°±ç®—æ”¹å˜å·²ç»å‘ç”Ÿäº†, å†å¯¹ Promise å¯¹è±¡æ·»åŠ å›è°ƒå‡½æ•°, ä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æœ, è€Œäº‹ä»¶ä¸€æ—¦é”™è¿‡å†å»ç›‘å¬, å°±ä¸ä¼šå¾—åˆ°ç»“æœ.</li>\n</ol>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/42730787-1d531df2-8830-11e8-8514-0a810d945440.png\" alt=\"image\"></p>\n<div class=\"tip\"> åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€, å…¶ä»–æ“ä½œéƒ½ä¸ä¼šå½±å“çŠ¶æ€æ”¹å˜, è¿™ä¹Ÿæ˜¯ Promise æœ€æœ¬è´¨çš„ç‰¹æ€§, å¯¹äºè°ƒç”¨è€…çš„ä¸€ç§æ‰¿è¯º </div>\n\n<h3 id=\"Promise-ä¼˜ç¼ºç‚¹\"><a href=\"#Promise-ä¼˜ç¼ºç‚¹\" class=\"headerlink\" title=\"Promise ä¼˜ç¼ºç‚¹\"></a>Promise ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹:</p>\n<ul>\n<li>å¯ä»¥å°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥æ“ä½œçš„æµç¨‹è¡¨è¾¾å‡ºæ¥, é¿å…äº†å±‚å±‚åµŒå¥—çš„å›è°ƒå‡½æ•° Promise</li>\n<li>å¯¹è±¡æä¾›ç»Ÿä¸€çš„æ¥å£, ä½¿å¾—æ§åˆ¶å¼‚æ­¥æ“ä½œæ›´åŠ å®¹æ˜“</li>\n</ul>\n<p>ç¼ºç‚¹:</p>\n<ul>\n<li>æ— æ³•å–æ¶ˆ Promise, ä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œ, æ— æ³•ä¸­é€”å–æ¶ˆ</li>\n<li>å¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°, Promise å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯, ä¸ä¼šååº”åˆ°å¤–éƒ¨</li>\n<li>å½“å¤„äº <code>Pending</code> çŠ¶æ€æ—¶, æ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€ä¸ªé˜¶æ®µï¼ˆåˆšåˆšå¼€å§‹æˆ–è€…å³å°†å®Œæˆï¼‰</li>\n</ul>\n<h3 id=\"Promise-prototype-then\"><a href=\"#Promise-prototype-then\" class=\"headerlink\" title=\"Promise.prototype.then\"></a>Promise.prototype.then</h3><p>Promise.prototype.then æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡, å› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ajax(<span class=\"string\">'http://some.api.com/'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">json</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> json.post;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">post</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// post å¤„ç†</span></span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<p>ğŸ‘† ä»£ç ä¸­ä½¿ç”¨äº†ä¸¤ä¸ª then æ–¹æ³•, åˆ†åˆ«æŒ‡å®šäº†å¯¹åº”çš„å›è°ƒå‚æ•°. ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°å®Œæˆå, ä¼šå°†è¿”å›ç»“æœä½œä¸ºå‚æ•°, ä¼ å…¥ç¬¬äºŒä¸ª then ä¸­çš„å›è°ƒå‡½æ•°æ‰§è¡Œ.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ajax(<span class=\"string\">'http://some.api.com/'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">jsonURL</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ajax(jsonURL);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">post</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// post å¤„ç†</span></span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<p>ğŸ‘† å¦‚æœç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°è¿”å›çš„æ˜¯ Promise å¯¹è±¡, åä¸€ä¸ªå›è°ƒå‡½æ•°ä¼šç­‰å¾…è¯¥ Promise å¯¹è±¡çš„è¿è¡Œç»“æœ, ç­‰ Promise è¿è¡Œç»“æœè¿”å›, å†è¿›ä¸€æ­¥è°ƒç”¨. è¿™ç§è®¾è®¡ä½¿å¾—åµŒå¥—çš„å¼‚æ­¥æ“ä½œ, å¯ä»¥è¢«å¾ˆå®¹æ˜“å¾—æ”¹å†™, æŠŠå›è°ƒå‡½æ•°çš„ â€œæ¨ªå‘å‘å±•â€ æ”¹ä¸ºäº† â€œå‘ä¸‹å‘å±•â€.</p>\n<h3 id=\"Promise-prototype-catch\"><a href=\"#Promise-prototype-catch\" class=\"headerlink\" title=\"Promise.prototype.catch\"></a>Promise.prototype.catch</h3><p>Promise.prototype.catch é”™è¯¯æ•æ‰æ–¹æ³•æ˜¯ <code>Promise.prototype.then(null, rejection)</code> çš„åˆ«å, ç”¨æ¥æŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å¤„ç†å‡½æ•°.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ajax(<span class=\"string\">'http://some.api.com/'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">post</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"built_in\">Error</span>();</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// æ•æ‰å›è°ƒå‡½æ•°è¿è¡Œæ—¶å‘ç”Ÿçš„é”™è¯¯è¿›è¡Œå¤„ç†</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'error:'</span> + error);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<p>Promise å¯¹è±¡çš„é”™è¯¯å…·æœ‰ â€œå†’æ³¡â€ æ€§è´¨, ä¼šä¸€ç›´å‘åä¼ é€’, ç›´åˆ°è¢«æ•è·ä¸ºæ­¢.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ajax(<span class=\"string\">'http://some.api.com/'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">jsonURL</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ajax(jsonURL);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">comments</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"built_in\">Error</span>();</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å¤„ç†å‰ä¸¤ä¸ªå›è°ƒå‡½æ•°çš„é”™è¯¯</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'error:'</span> + error);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"Promise-resolve\"><a href=\"#Promise-resolve\" class=\"headerlink\" title=\"Promise.resolve\"></a>Promise.resolve</h3><p>Promise.resolve æ–¹æ³•å¯ä»¥å°†ç°æœ‰å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡. å¦‚æœ Promise.resolve æ–¹æ³•çš„å‚æ•°, ä¸æ˜¯ thenable å¯¹è±¡ (å…·æœ‰ then æ–¹æ³•çš„å¯¹è±¡), åˆ™è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡, ä¸”å®ƒçš„çŠ¶æ€ä¸º <code>fulfilled</code>.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> resolve = <span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'promise resolve'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">resolve.then(<span class=\"function\">(<span class=\"params\">s</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(s);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output ğŸ‘‡</span></span><br><span class=\"line\">promise resolve</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœ Promise å¯¹è±¡çš„å®ä¾‹çŠ¶æ€ä¸º <code>fulfilled</code>, å›è°ƒå‡½æ•°ä¼šç«‹å³æ‰§è¡Œ, Promise.resolve æ–¹æ³•çš„å‚æ•°å°±æ˜¯å›è°ƒå‡½æ•°çš„å‚æ•°. å¦‚æœ Promise.resolve æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ª Promise å¯¹è±¡çš„å®ä¾‹, åˆ™ä¼šè¿”å›è¯¥ Promise å®ä¾‹.</p>\n<h3 id=\"Promise-reject\"><a href=\"#Promise-reject\" class=\"headerlink\" title=\"Promise.reject\"></a>Promise.reject</h3><p>Promise.reject(reason) æ–¹æ³•ä¸ resolve æ–¹æ³•ç±»ä¼¼, ä¹Ÿä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹, ä½†è¯¥å®ä¾‹çš„çŠ¶æ€ä¸º <code>rejected</code>. Promise.reject æ–¹æ³•çš„å‚æ•°, ä¼šè¢«ä¼ é€’ç»™å®ä¾‹çš„å›è°ƒå‡½æ•°.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> reject = <span class=\"built_in\">Promise</span>.reject(<span class=\"string\">'promise reject'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">reject.then(<span class=\"literal\">null</span>, (err) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output ğŸ‘‡</span></span><br><span class=\"line\">promise reject</span><br></pre></td></tr></table></figure>\n<h3 id=\"Promise-all\"><a href=\"#Promise-all\" class=\"headerlink\" title=\"Promise.all\"></a>Promise.all</h3><p>Promise.all æ–¹æ³•ç”¨äºå°†å¤šä¸ª Promise å®ä¾‹, åŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹, è¯¥æ–¹æ³•ä¸€èˆ¬æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°, ä½†ä¸ä¸€å®šæ˜¯æ•°ç»„, åªè¦å…·æœ‰ iterator æ¥å£. ä¸”è¿”å›çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ Promise å®ä¾‹.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> getRandom = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> +(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">1000</span>).toFixed(<span class=\"number\">0</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ajax = <span class=\"function\">(<span class=\"params\">taskID</span>) =&gt;</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> timeout = getRandom();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`taskID=<span class=\"subst\">$&#123;taskID&#125;</span> start.`</span>);</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`taskID=<span class=\"subst\">$&#123;taskID&#125;</span> finished in time=<span class=\"subst\">$&#123;timeout&#125;</span>.`</span>);</span><br><span class=\"line\">    resolve(taskID)</span><br><span class=\"line\">  &#125;, timeout);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.all([ajax(<span class=\"number\">1</span>), ajax(<span class=\"number\">2</span>), ajax(<span class=\"number\">3</span>)])</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">resultList</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'results:'</span>, resultList);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<p>è¾“å‡ºç»“æœ ğŸ‘‡:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">taskID=1 start.</span><br><span class=\"line\">taskID=2 start.</span><br><span class=\"line\">taskID=3 start.</span><br><span class=\"line\">taskID=2 finished in time=27.</span><br><span class=\"line\">taskID=3 finished in time=257.</span><br><span class=\"line\">taskID=1 finished in time=876.</span><br><span class=\"line\">results: [1, 2, 3]</span><br></pre></td></tr></table></figure>\n<p>Promise.all çŠ¶æ€åˆ†ä¸ºä¸¤ç§:</p>\n<ul>\n<li>åªæœ‰ ajax(1)ã€ajax(2)ã€ajax(3) çš„çŠ¶æ€éƒ½å˜æˆ <code>fulfilled</code>, Promise.all è¿”å›çš„çŠ¶æ€æ‰ä¼šå˜æˆ <code>fulfilled</code>, æ­¤æ—¶ ajax(1)ã€ajax(2)ã€ajax(3) çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„, ä¼ é€’ç»™ Promise.all çš„å›è°ƒå‡½æ•°.</li>\n<li>åªè¦ ajax(1)ã€ajax(2)ã€ajax(3) ä¹‹ä¸­æœ‰ä¸€ä¸ªæ˜¯ <code>rejected</code>, Promise.all è¿”å›çš„çŠ¶æ€å°±å˜æˆ <code>rejected</code>, æ­¤æ—¶ç¬¬ä¸€ä¸ªè¢« reject çš„å®ä¾‹çš„è¿”å›å€¼, ä¼šä¼ é€’ç»™ Promise.all çš„å›è°ƒå‡½æ•°.</li>\n</ul>\n<h3 id=\"Promise-race\"><a href=\"#Promise-race\" class=\"headerlink\" title=\"Promise.race\"></a>Promise.race</h3><p>Promise.race æ–¹æ³•ä¹Ÿæ˜¯å°†å¤šä¸ª Promise å®ä¾‹, åŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹, ä¸ Promise.all ä¸åŒçš„æ˜¯ä¸€æ—¦æœ‰çŠ¶æ€æ”¹å˜, å°±ä¼šè¿”å›ç¬¬ä¸€ä¸ªçŠ¶æ€æ”¹å˜çš„ Promise å®ä¾‹è¿”å›å€¼.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> getRandom = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> +(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">1000</span>).toFixed(<span class=\"number\">0</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ajax = <span class=\"function\">(<span class=\"params\">taskID</span>) =&gt;</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> timeout = getRandom();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`taskID=<span class=\"subst\">$&#123;taskID&#125;</span> start.`</span>);</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`taskID=<span class=\"subst\">$&#123;taskID&#125;</span> finished in time=<span class=\"subst\">$&#123;timeout&#125;</span>.`</span>);</span><br><span class=\"line\">    resolve(taskID)</span><br><span class=\"line\">  &#125;, timeout);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.race([ajax(<span class=\"number\">1</span>), ajax(<span class=\"number\">2</span>), ajax(<span class=\"number\">3</span>)])</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">result</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'results:'</span>, result);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<p>è¾“å‡ºç»“æœ ğŸ‘‡:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">taskID=1 start.</span><br><span class=\"line\">taskID=2 start.</span><br><span class=\"line\">taskID=3 start.</span><br><span class=\"line\">taskID=2 finished in time=59.</span><br><span class=\"line\">results: 2</span><br><span class=\"line\">taskID=3 finished in time=707.</span><br><span class=\"line\">taskID=1 finished in time=854.</span><br></pre></td></tr></table></figure>\n<p>Promise.race è™½ç„¶ <strong>è¿”å›ç¬¬ä¸€ä¸ªçŠ¶æ€æ”¹å˜çš„ Promise å®ä¾‹</strong>, ä½†ä¸èƒ½é˜»æ­¢å…¶ä»– Promise å®ä¾‹çŠ¶æ€æ”¹å˜.</p>\n<p>å¦‚æœ <code>Promise.all</code> å’Œ <code>Promise.race</code> çš„å‚æ•°ä¸æ˜¯ Promise å®ä¾‹, å®ƒä»¬å°±ä¼šè°ƒç”¨ Promise.resolve æ–¹æ³•, å°†å‚æ•°è½¬ä¸º Promise å®ä¾‹, å†è¿›ä¸€æ­¥å¤„ç†.</p>\n<h3 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h3><ul>\n<li><a href=\"https://github.com/wangfupeng1988/js-async-tutorial\" target=\"_blank\" rel=\"noopener\">js-async-tutorial @GitHub</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise\" target=\"_blank\" rel=\"noopener\">Promise constructor @MDN</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>Promise çš„é‡è¦æ€§ä¸ç”¨å¤šè¯´, æ›¾ç»çœ‹åˆ°å…³äº JavaScript çš„æè¿° â€” JS çš„ä¸‰åº§å¤§å±±å°±æ˜¯: <code>åŸå‹</code>/<code>ä½œç”¨åŸŸ</code>/<code>å¼‚æ­¥</code>, æ‰€ä»¥å¦‚æœè¯´ä½ æ˜¯ä¸€ä¸ªåˆæ ¼çš„ JavaScript ç¨‹åºå‘˜, è¿™ä¸‰å—çš„å†…å®¹è‚¯å®šæ˜¯è¦åƒé€çš„. çºµè§‚ JavaScript çš„å¼‚æ­¥å², å®ƒç»å†äº† <code>callback</code> -&gt; <code>Promise</code> -&gt; <code>Generator</code> -&gt; <code>async-await</code> è¿™æ ·ä¸€ä¸ªå†ç¨‹, å‰å‰ååç¼–å†™å¼‚æ­¥ä»£ç çš„å˜åŒ–. ä»å˜åŒ–ä¸­å°±å¯ä»¥ä½“ä¼šåˆ°, ç¡®å®è¶Šæ¥è¶Šç®€æ´, è¶Šæ¥è¶Šæ˜“è¯». æŒæ¡å®ƒä»¬, ä½ èƒ½å†™å‡ºæ›´ä¼˜é›…çš„ä»£ç .</p>","more":"<h3 id=\"Promise-ç®€ä»‹\"><a href=\"#Promise-ç®€ä»‹\" class=\"headerlink\" title=\"Promise ç®€ä»‹\"></a>Promise ç®€ä»‹</h3><p><img src=\"https://user-images.githubusercontent.com/15377484/42730799-8a283548-8830-11e8-9cc0-adb620f7f71a.png\" alt=\"image\"></p>\n<p>ECMAscript6 åŸç”Ÿæä¾›äº† Promise å¯¹è±¡, ç”±æµè§ˆå™¨ç›´æ¥æ”¯æŒ, ç›®å‰å¤§å¤šæ•°æµè§ˆå™¨éƒ½å·²ç»å®ç°äº†, ä½ç‰ˆæœ¬æµè§ˆå™¨å¯ä»¥ä½¿ç”¨ <em>es6-promise</em> åº“æ¥å¡«å¹³å…¼å®¹æ€§é—®é¢˜. Promise æœ€å¤§çš„å¥½å¤„æ˜¯æŠŠæ‰§è¡Œä»£ç å’Œå¤„ç†ä»£ç åˆ†ç¦»å¼€, ä½¿å¼‚æ­¥æ“ä½œé€»è¾‘æ›´åŠ æ¸…æ™°.</p>\n<h3 id=\"Promise-ç‰¹ç‚¹\"><a href=\"#Promise-ç‰¹ç‚¹\" class=\"headerlink\" title=\"Promise ç‰¹ç‚¹\"></a>Promise ç‰¹ç‚¹</h3><ol>\n<li>å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ Promise å¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œ, æœ‰ä¸‰ç§çŠ¶æ€:<ul>\n<li>pending - åˆå§‹çŠ¶æ€</li>\n<li>fulfilled - æ“ä½œæˆåŠŸå®Œæˆ</li>\n<li>rejected - æ“ä½œå¤±è´¥</li>\n</ul>\n</li>\n<li>ä¸€æ—¦çŠ¶æ€æ”¹å˜, å°±ä¸ä¼šå†å‘ç”Ÿå˜åŒ–. Promise å¯¹è±¡çš„çŠ¶æ€æ”¹å˜. åªæœ‰ä¸¤ç§æƒ…å†µ: ä» <code>Pending</code> å˜ä¸º <code>Resolved</code> å’Œä» <code>Pending</code> å˜ä¸º <code>Rejected</code>. åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿ, çŠ¶æ€å°±ä¼šå›ºå®š, ä¸ä¼šå†å˜äº†, ä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æœ, ä¸äº‹ä»¶ä¸åŒçš„æ˜¯, å°±ç®—æ”¹å˜å·²ç»å‘ç”Ÿäº†, å†å¯¹ Promise å¯¹è±¡æ·»åŠ å›è°ƒå‡½æ•°, ä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æœ, è€Œäº‹ä»¶ä¸€æ—¦é”™è¿‡å†å»ç›‘å¬, å°±ä¸ä¼šå¾—åˆ°ç»“æœ.</li>\n</ol>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/42730787-1d531df2-8830-11e8-8514-0a810d945440.png\" alt=\"image\"></p>\n<div class=\"tip\"> åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€, å…¶ä»–æ“ä½œéƒ½ä¸ä¼šå½±å“çŠ¶æ€æ”¹å˜, è¿™ä¹Ÿæ˜¯ Promise æœ€æœ¬è´¨çš„ç‰¹æ€§, å¯¹äºè°ƒç”¨è€…çš„ä¸€ç§æ‰¿è¯º </div>\n\n<h3 id=\"Promise-ä¼˜ç¼ºç‚¹\"><a href=\"#Promise-ä¼˜ç¼ºç‚¹\" class=\"headerlink\" title=\"Promise ä¼˜ç¼ºç‚¹\"></a>Promise ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹:</p>\n<ul>\n<li>å¯ä»¥å°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥æ“ä½œçš„æµç¨‹è¡¨è¾¾å‡ºæ¥, é¿å…äº†å±‚å±‚åµŒå¥—çš„å›è°ƒå‡½æ•° Promise</li>\n<li>å¯¹è±¡æä¾›ç»Ÿä¸€çš„æ¥å£, ä½¿å¾—æ§åˆ¶å¼‚æ­¥æ“ä½œæ›´åŠ å®¹æ˜“</li>\n</ul>\n<p>ç¼ºç‚¹:</p>\n<ul>\n<li>æ— æ³•å–æ¶ˆ Promise, ä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œ, æ— æ³•ä¸­é€”å–æ¶ˆ</li>\n<li>å¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°, Promise å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯, ä¸ä¼šååº”åˆ°å¤–éƒ¨</li>\n<li>å½“å¤„äº <code>Pending</code> çŠ¶æ€æ—¶, æ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€ä¸ªé˜¶æ®µï¼ˆåˆšåˆšå¼€å§‹æˆ–è€…å³å°†å®Œæˆï¼‰</li>\n</ul>\n<h3 id=\"Promise-prototype-then\"><a href=\"#Promise-prototype-then\" class=\"headerlink\" title=\"Promise.prototype.then\"></a>Promise.prototype.then</h3><p>Promise.prototype.then æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡, å› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ajax(<span class=\"string\">'http://some.api.com/'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">json</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> json.post;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">post</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// post å¤„ç†</span></span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<p>ğŸ‘† ä»£ç ä¸­ä½¿ç”¨äº†ä¸¤ä¸ª then æ–¹æ³•, åˆ†åˆ«æŒ‡å®šäº†å¯¹åº”çš„å›è°ƒå‚æ•°. ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°å®Œæˆå, ä¼šå°†è¿”å›ç»“æœä½œä¸ºå‚æ•°, ä¼ å…¥ç¬¬äºŒä¸ª then ä¸­çš„å›è°ƒå‡½æ•°æ‰§è¡Œ.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ajax(<span class=\"string\">'http://some.api.com/'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">jsonURL</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ajax(jsonURL);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">post</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// post å¤„ç†</span></span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<p>ğŸ‘† å¦‚æœç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°è¿”å›çš„æ˜¯ Promise å¯¹è±¡, åä¸€ä¸ªå›è°ƒå‡½æ•°ä¼šç­‰å¾…è¯¥ Promise å¯¹è±¡çš„è¿è¡Œç»“æœ, ç­‰ Promise è¿è¡Œç»“æœè¿”å›, å†è¿›ä¸€æ­¥è°ƒç”¨. è¿™ç§è®¾è®¡ä½¿å¾—åµŒå¥—çš„å¼‚æ­¥æ“ä½œ, å¯ä»¥è¢«å¾ˆå®¹æ˜“å¾—æ”¹å†™, æŠŠå›è°ƒå‡½æ•°çš„ â€œæ¨ªå‘å‘å±•â€ æ”¹ä¸ºäº† â€œå‘ä¸‹å‘å±•â€.</p>\n<h3 id=\"Promise-prototype-catch\"><a href=\"#Promise-prototype-catch\" class=\"headerlink\" title=\"Promise.prototype.catch\"></a>Promise.prototype.catch</h3><p>Promise.prototype.catch é”™è¯¯æ•æ‰æ–¹æ³•æ˜¯ <code>Promise.prototype.then(null, rejection)</code> çš„åˆ«å, ç”¨æ¥æŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å¤„ç†å‡½æ•°.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ajax(<span class=\"string\">'http://some.api.com/'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">post</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"built_in\">Error</span>();</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// æ•æ‰å›è°ƒå‡½æ•°è¿è¡Œæ—¶å‘ç”Ÿçš„é”™è¯¯è¿›è¡Œå¤„ç†</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'error:'</span> + error);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<p>Promise å¯¹è±¡çš„é”™è¯¯å…·æœ‰ â€œå†’æ³¡â€ æ€§è´¨, ä¼šä¸€ç›´å‘åä¼ é€’, ç›´åˆ°è¢«æ•è·ä¸ºæ­¢.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ajax(<span class=\"string\">'http://some.api.com/'</span>)</span><br><span class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">jsonURL</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ajax(jsonURL);</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .then(<span class=\"function\">(<span class=\"params\">comments</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"built_in\">Error</span>();</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  .catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å¤„ç†å‰ä¸¤ä¸ªå›è°ƒå‡½æ•°çš„é”™è¯¯</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'error:'</span> + error);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"Promise-resolve\"><a href=\"#Promise-resolve\" class=\"headerlink\" title=\"Promise.resolve\"></a>Promise.resolve</h3><p>Promise.resolve æ–¹æ³•å¯ä»¥å°†ç°æœ‰å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡. å¦‚æœ Promise.resolve æ–¹æ³•çš„å‚æ•°, ä¸æ˜¯ thenable å¯¹è±¡ (å…·æœ‰ then æ–¹æ³•çš„å¯¹è±¡), åˆ™è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡, ä¸”å®ƒçš„çŠ¶æ€ä¸º <code>fulfilled</code>.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> resolve = <span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'promise resolve'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">resolve.then(<span class=\"function\">(<span class=\"params\">s</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(s);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output ğŸ‘‡</span></span><br><span class=\"line\">promise resolve</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœ Promise å¯¹è±¡çš„å®ä¾‹çŠ¶æ€ä¸º <code>fulfilled</code>, å›è°ƒå‡½æ•°ä¼šç«‹å³æ‰§è¡Œ, Promise.resolve æ–¹æ³•çš„å‚æ•°å°±æ˜¯å›è°ƒå‡½æ•°çš„å‚æ•°. å¦‚æœ Promise.resolve æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ª Promise å¯¹è±¡çš„å®ä¾‹, åˆ™ä¼šè¿”å›è¯¥ Promise å®ä¾‹.</p>\n<h3 id=\"Promise-reject\"><a href=\"#Promise-reject\" class=\"headerlink\" title=\"Promise.reject\"></a>Promise.reject</h3><p>Promise.reject(reason) æ–¹æ³•ä¸ resolve æ–¹æ³•ç±»ä¼¼, ä¹Ÿä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹, ä½†è¯¥å®ä¾‹çš„çŠ¶æ€ä¸º <code>rejected</code>. Promise.reject æ–¹æ³•çš„å‚æ•°, ä¼šè¢«ä¼ é€’ç»™å®ä¾‹çš„å›è°ƒå‡½æ•°.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> reject = <span class=\"built_in\">Promise</span>.reject(<span class=\"string\">'promise reject'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">reject.then(<span class=\"literal\">null</span>, (err) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output ğŸ‘‡</span></span><br><span class=\"line\">promise reject</span><br></pre></td></tr></table></figure>\n<h3 id=\"Promise-all\"><a href=\"#Promise-all\" class=\"headerlink\" title=\"Promise.all\"></a>Promise.all</h3><p>Promise.all æ–¹æ³•ç”¨äºå°†å¤šä¸ª Promise å®ä¾‹, åŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹, è¯¥æ–¹æ³•ä¸€èˆ¬æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°, ä½†ä¸ä¸€å®šæ˜¯æ•°ç»„, åªè¦å…·æœ‰ iterator æ¥å£. ä¸”è¿”å›çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ Promise å®ä¾‹.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> getRandom = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> +(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">1000</span>).toFixed(<span class=\"number\">0</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ajax = <span class=\"function\">(<span class=\"params\">taskID</span>) =&gt;</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> timeout = getRandom();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`taskID=<span class=\"subst\">$&#123;taskID&#125;</span> start.`</span>);</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`taskID=<span class=\"subst\">$&#123;taskID&#125;</span> finished in time=<span class=\"subst\">$&#123;timeout&#125;</span>.`</span>);</span><br><span class=\"line\">    resolve(taskID)</span><br><span class=\"line\">  &#125;, timeout);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.all([ajax(<span class=\"number\">1</span>), ajax(<span class=\"number\">2</span>), ajax(<span class=\"number\">3</span>)])</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">resultList</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'results:'</span>, resultList);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<p>è¾“å‡ºç»“æœ ğŸ‘‡:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">taskID=1 start.</span><br><span class=\"line\">taskID=2 start.</span><br><span class=\"line\">taskID=3 start.</span><br><span class=\"line\">taskID=2 finished in time=27.</span><br><span class=\"line\">taskID=3 finished in time=257.</span><br><span class=\"line\">taskID=1 finished in time=876.</span><br><span class=\"line\">results: [1, 2, 3]</span><br></pre></td></tr></table></figure>\n<p>Promise.all çŠ¶æ€åˆ†ä¸ºä¸¤ç§:</p>\n<ul>\n<li>åªæœ‰ ajax(1)ã€ajax(2)ã€ajax(3) çš„çŠ¶æ€éƒ½å˜æˆ <code>fulfilled</code>, Promise.all è¿”å›çš„çŠ¶æ€æ‰ä¼šå˜æˆ <code>fulfilled</code>, æ­¤æ—¶ ajax(1)ã€ajax(2)ã€ajax(3) çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„, ä¼ é€’ç»™ Promise.all çš„å›è°ƒå‡½æ•°.</li>\n<li>åªè¦ ajax(1)ã€ajax(2)ã€ajax(3) ä¹‹ä¸­æœ‰ä¸€ä¸ªæ˜¯ <code>rejected</code>, Promise.all è¿”å›çš„çŠ¶æ€å°±å˜æˆ <code>rejected</code>, æ­¤æ—¶ç¬¬ä¸€ä¸ªè¢« reject çš„å®ä¾‹çš„è¿”å›å€¼, ä¼šä¼ é€’ç»™ Promise.all çš„å›è°ƒå‡½æ•°.</li>\n</ul>\n<h3 id=\"Promise-race\"><a href=\"#Promise-race\" class=\"headerlink\" title=\"Promise.race\"></a>Promise.race</h3><p>Promise.race æ–¹æ³•ä¹Ÿæ˜¯å°†å¤šä¸ª Promise å®ä¾‹, åŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹, ä¸ Promise.all ä¸åŒçš„æ˜¯ä¸€æ—¦æœ‰çŠ¶æ€æ”¹å˜, å°±ä¼šè¿”å›ç¬¬ä¸€ä¸ªçŠ¶æ€æ”¹å˜çš„ Promise å®ä¾‹è¿”å›å€¼.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> getRandom = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> +(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">1000</span>).toFixed(<span class=\"number\">0</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ajax = <span class=\"function\">(<span class=\"params\">taskID</span>) =&gt;</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> timeout = getRandom();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`taskID=<span class=\"subst\">$&#123;taskID&#125;</span> start.`</span>);</span><br><span class=\"line\">  setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`taskID=<span class=\"subst\">$&#123;taskID&#125;</span> finished in time=<span class=\"subst\">$&#123;timeout&#125;</span>.`</span>);</span><br><span class=\"line\">    resolve(taskID)</span><br><span class=\"line\">  &#125;, timeout);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.race([ajax(<span class=\"number\">1</span>), ajax(<span class=\"number\">2</span>), ajax(<span class=\"number\">3</span>)])</span><br><span class=\"line\">  .then(<span class=\"function\"><span class=\"params\">result</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'results:'</span>, result);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<p>è¾“å‡ºç»“æœ ğŸ‘‡:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">taskID=1 start.</span><br><span class=\"line\">taskID=2 start.</span><br><span class=\"line\">taskID=3 start.</span><br><span class=\"line\">taskID=2 finished in time=59.</span><br><span class=\"line\">results: 2</span><br><span class=\"line\">taskID=3 finished in time=707.</span><br><span class=\"line\">taskID=1 finished in time=854.</span><br></pre></td></tr></table></figure>\n<p>Promise.race è™½ç„¶ <strong>è¿”å›ç¬¬ä¸€ä¸ªçŠ¶æ€æ”¹å˜çš„ Promise å®ä¾‹</strong>, ä½†ä¸èƒ½é˜»æ­¢å…¶ä»– Promise å®ä¾‹çŠ¶æ€æ”¹å˜.</p>\n<p>å¦‚æœ <code>Promise.all</code> å’Œ <code>Promise.race</code> çš„å‚æ•°ä¸æ˜¯ Promise å®ä¾‹, å®ƒä»¬å°±ä¼šè°ƒç”¨ Promise.resolve æ–¹æ³•, å°†å‚æ•°è½¬ä¸º Promise å®ä¾‹, å†è¿›ä¸€æ­¥å¤„ç†.</p>\n<h3 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h3><ul>\n<li><a href=\"https://github.com/wangfupeng1988/js-async-tutorial\" target=\"_blank\" rel=\"noopener\">js-async-tutorial @GitHub</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise\" target=\"_blank\" rel=\"noopener\">Promise constructor @MDN</a></li>\n</ul>"},{"title":"Node.JS å­¦ä¹ ç¬”è®° [04] -- HTTP","date":"2015-01-05T07:05:10.000Z","comments":0,"_content":"\næœ¬æ¬¡çš„å­¦ä¹ å†…å®¹æ˜¯ Node.js Web æ¨¡å—ï¼Œä»‹ç»äº†ä»€ä¹ˆæ˜¯ web æœåŠ¡å™¨ï¼Œä»¥åŠå¸¸è§çš„å‡ ç§æ¨¡å¼ï¼Œæ¯”å¦‚ B/S æ¨¡å¼ï¼ˆBrowser/Serverï¼Œæµè§ˆå™¨/æœåŠ¡å™¨æ¨¡å¼ï¼‰ï¼ŒC/S æ¨¡å¼ï¼ˆClient/Serverï¼Œå®¢æˆ·ç«¯/æœåŠ¡å™¨æ¨¡å¼ï¼‰ç­‰ã€‚Web å®¢æˆ·ç«¯é€šè¿‡ä½¿ç”¨ HTTP åè®®å°±èƒ½è®¿é—®åˆ° Web æœåŠ¡å™¨ä¸Šçš„æ•°æ®ï¼ŒWeb æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚\n<!-- more -->\n### HTTP\n#### HTTP åè®®\n***HTTP***  åè®®æ˜¯ Hyper Text Transfer Protocolï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰çš„ç¼©å†™,æ˜¯ç”¨äºä»ä¸‡ç»´ç½‘æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ é€åè®®ã€‚ç”¨äºå®šä¹‰ Web æµè§ˆå™¨ä¸ Web æœåŠ¡å™¨ä¹‹é—´äº¤æ¢æ•°æ®çš„è¿‡ç¨‹ä»¥åŠæ•°æ®æœ¬èº«çš„æ ¼å¼ã€‚\n\nç®€å•ç†è§£å…¶å®å°±æ˜¯ä¸€ç§è§„èŒƒï¼Œä»¥ä½•ç§æ–¹å¼è¯·æ±‚ï¼Œä»¥ä½•ç§æ–¹å¼åº”ç­”ã€‚ç‰¹ç‚¹å˜›ï¼Œ***ä¸€æ¬¡è¯·æ±‚ï¼ˆRequestï¼‰å¯¹åº”ä¸€æ¬¡å“åº”ï¼ˆResponseï¼‰***ã€‚æ¥çœ‹ä¸€ä¸ªç®€å•ä¾‹å­ï¼Œè®¿é—® Google é¦–é¡µçš„è¯·æ±‚å’Œåº”ç­”ã€‚\n![](http://ww3.sinaimg.cn/large/6057861cgw1fbb9dlv1ylj20xy0ts7ct.jpg)\n\nåœ¨ç¬¬ä¸€æ  General ä¸­å¯ä»¥çœ‹åˆ°æœ¬æ¬¡çš„è¯·æ±‚ç›®æ ‡ï¼Œæ¥è§£é‡Šä¸€ä¸‹è¿™å‡ ä¸ªå‚æ•°ä»£è¡¨å•¥æ„æ€ã€‚\n\n- Request URL:https://www.google.com/  è¯·æ±‚çš„ URLï¼Œè¿™é‡Œæˆ‘ä»¬è®¿é—®çš„æ˜¯ Google é¦–é¡µã€‚\n- Request Method:GET è¯·æ±‚æ–¹å¼ï¼Œè¿™é‡Œé‡‡ç”¨çš„æ˜¯ GET æ–¹å¼è¯·æ±‚ã€‚\n- Status Code:200  çŠ¶æ€ç  200 ï¼Œè¡¨ç¤º OKã€‚\n- Remote Address:127.0.0.1:1080 è¿™é‡Œè¡¨ç¤ºè¯·æ±‚çš„è¿œç«¯ IP åœ°å€åŠç«¯å£ï¼Œå› ä¸ºæˆ‘æ˜¯ç§‘å­¦ä¸Šç½‘ï¼Œè¿™é‡Œæ‰æ˜¾ç¤ºäº†ä¸€ä¸ªå›è·¯åœ°å€ã€‚\n\n#### Node.js æ­å»º http æœåŠ¡å™¨\nNode.js æä¾›äº† http æ¨¡å—ï¼Œä½¿ç”¨ HTTP æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯åŠŸèƒ½å¿…é¡»è°ƒç”¨ http æ¨¡å—ï¼ŒNode.js æ­å»ºä¸€ä¸ª http æœåŠ¡å™¨éå¸¸ç®€å•ï¼Œåªéœ€è¦å‡ è¡Œä»£ç ï¼Œæ¥çœ‹çœ‹æŠŠã€‚:P\n```js\n// å¼•å…¥ http æ¨¡å—\nvar http = require('http');\n\n// åˆ›å»ºæœåŠ¡ï¼Œå›è°ƒå‡½æ•°å¤„ç†è¯·æ±‚ï¼ˆRequestï¼‰å’Œå“åº”ï¼ˆResponseï¼‰ï¼Œç›‘å¬8080ç«¯å£\nhttp.createServer(function (req, res) {\n    res.write('hello,world!');\n    res.end();\n}).listen(8080, function () {\n    console.log('Server running at http://127.0.0.1:8080/');\n});\n```\næ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ http://127.0.0.1:8080/ å°±å¯ä»¥çœ‹åˆ°åˆšåˆšåˆ›å»ºçš„æœåŠ¡æˆåŠŸå•¦ã€‚\n![](http://ww4.sinaimg.cn/large/6057861cgw1fbbabbplavj20tg08mmyp.jpg)\n\n#### HTTP å“åº”å†…å®¹\né—®é¢˜æ¥äº†ï¼Œé‚£ä¹ˆå¦‚ä½•æ ¹æ®ä¸åŒçš„ URL æ¥å“åº”ä¸åŒçš„å†…å®¹å‘¢ï¼Ÿç­”æ¡ˆå¾ˆç®€å•ï¼Œhttp æœåŠ¡å™¨åœ¨å¤„ç† URL çš„æ—¶å€™ï¼Œä¼šæ ¹æ® URL çš„å‚æ•°æ¥åˆ†è¾¨ä¸åŒçš„è¯·æ±‚å†…å®¹ï¼Œæ ¹æ®è¯·æ±‚çš„å†…å®¹æ¥å“åº”ä¸ä¹‹å¯¹åº”çš„å†…å®¹ã€‚ä¸€ä¸ªå®Œæ•´çš„ URL é•¿è¿™ä¸ªæ ·å­ã€‚\n```Text\nscheme://host.domain:port/path/filename?queryName=queryValue\n```\n- schemeï¼šå®šä¹‰æœåŠ¡ç±»å‹ï¼Œå¸¸è§çš„å¦‚ http\n- hostï¼šå®šä¹‰åŸŸä¸»æœºï¼Œhttp é€šå¸¸æ˜¯ www\n- domainï¼šå®šä¹‰åŸŸåï¼Œæ¯”å¦‚ google.com\n- :portï¼šå®šä¹‰ä¸»æœºçš„ç«¯å£å·ï¼Œé»˜è®¤æ˜¯ 80\n- pathï¼šå®šä¹‰è·¯å¾„ï¼Œçœç•¥ `/` è¡¨ç¤ºæ ¹ç›®å½•\n- filenameï¼šå®šä¹‰æ–‡ä»¶å\n- ?queryName=queryValueï¼šæŸ¥è¯¢å­—ç¬¦ä¸²\n\nå¯ä»¥çœ‹å‡ºï¼Œæƒ³è¦å“åº”ä¸åŒçš„å†…å®¹ï¼Œå°±éœ€è¦åˆ†æå‡º URL ä¸­çš„ `path` å’Œ `filename` ä»¥åŠå¯¹åº”çš„æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚æ¥çœ‹ä¸ªç®€å•çš„ä¾‹å­ã€‚\n```js\nvar http = require('http');\nvar fs = require('fs');\nvar url = require('url');// å¼•å…¥ url æ¨¡å—ç”¨äºå¤„ç†åœ°å€\nvar querystring = require('querystring'); // å¼•å…¥ querystring æ¨¡å—\n\nhttp.createServer(function (req, res) {\n    // é¦–é¡µ\n    var path = url.parse(req.url).pathname;\n    if (path == '/') {\n        fs.readFile('./html/index.html', 'utf-8', function (err, result) {\n            if (!err) {\n                res.write(result);\n                res.end();\n            }\n        });\n    }\n    // ç™»å½•\n    if (path == '/login'){\n        //{...}\n    }\n    // ç™»å½•éªŒè¯\n    if (path == '/checkLogin') {\n        var queryObj = querystring.parse(url.parse(req.url).query);\n        // querystring.parse() æŠŠæŸ¥è¯¢å­—ç¬¦ä¸²è½¬æˆå¯¹è±¡ï¼Œ{ usr: 'admin', pwd: '123' }\n        if (queryObj.usr == 'admin' && queryObj.pwd == '123') {\n            res.write('Login Success!');\n            res.end();\n        }\n    }\n}).listen(8080, function () {\n    console.log('Server running at http://127.0.0.1:8080/');\n});\n```\n\n#### HTTP å“åº”çŠ¶æ€ç \nHTTP çŠ¶æ€ç ç”±ä¸‰ä¸ªåè¿›åˆ¶æ•°å­—ç»„æˆï¼Œç¬¬ä¸€ä¸ªåè¿›åˆ¶æ•°å­—å®šä¹‰äº†çŠ¶æ€ç çš„ç±»å‹ï¼Œåä¸¤ä¸ªæ•°å­—æ²¡æœ‰åˆ†ç±»çš„ä½œç”¨ã€‚HTTP çŠ¶æ€ç å…±åˆ†ä¸º 5 ç§ç±»å‹ï¼š\n\n|åˆ†ç±»   |åˆ†ç±»æè¿°                                   |\n|:-----|:------------------------------------------|\n|1**   |ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œéœ€è¦è¯·æ±‚è€…ç»§ç»­æ‰§è¡Œæ“ä½œ   |\n|2**   |æˆåŠŸï¼Œæ“ä½œè¢«æˆåŠŸæ¥æ”¶å¹¶å¤„ç†                   |\n|3**   |é‡å®šå‘ï¼Œéœ€è¦è¿›ä¸€æ­¥çš„æ“ä½œä»¥å®Œæˆè¯·æ±‚            |\n|4**   |å®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–æ— æ³•å®Œæˆè¯·æ±‚     |\n|5**   |æœåŠ¡å™¨é”™è¯¯ï¼ŒæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ |\n\néœ€è¦è®°ä½å¸¸è§çš„å‡ ç§å°±å¯ä»¥äº†ï¼Œå¦å¤–çš„å¯ä»¥[æŸ¥æ‰‹å†Œ](http://tools.jb51.net/table/http_status_code)æ‰¾åˆ°éå¸¸è¯¦ç»†çš„è§£é‡Šã€‚\n- 200\tOK\tè¯·æ±‚æˆåŠŸã€‚ä¸€èˆ¬ç”¨äº GET ä¸ POST è¯·æ±‚ã€‚\n- 304\tNot Modified\tæœªä¿®æ”¹ã€‚æ‰€è¯·æ±‚çš„èµ„æºæœªä¿®æ”¹ï¼ŒæœåŠ¡å™¨è¿”å›æ­¤çŠ¶æ€ç æ—¶ï¼Œä¸ä¼šè¿”å›ä»»ä½•èµ„æºã€‚\n- 404\tNot Found\tæœåŠ¡å™¨æ— æ³•æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚æ‰¾åˆ°èµ„æºï¼ˆç½‘é¡µï¼‰ã€‚\n- 500\tInternal Server Error\tæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚ã€‚\n\n#### HTTP å“åº”ä¸åŒçš„æ•°æ®ç±»å‹\næœåŠ¡å™¨å…·æœ‰è¿”å›å„ç§æ•°æ®çš„èƒ½åŠ›ï¼Œä½†æ˜¯è¿”å›æ•°æ®æ—¶ï¼Œåº”å‘Šè¯‰æµè§ˆå™¨è¿”å›çš„æ˜¯ä¸€ä¸ªä»€ä¹ˆæ–‡ä»¶ã€‚é€šè¿‡ `Content-Type` å¯ä»¥è®¾ç½®ï¼Œå“åº”çš„æ•°æ®ç±»å‹ã€‚æ¥çœ‹ä¸ªç®€å•çš„ä¾‹å­ã€‚\n```js\nvar http = require('http');\nvar fs = require('fs');\n\nhttp.createServer(function (req, res) {\n    // è®¾ç½®å“åº”çš„çŠ¶æ€ç ï¼Œæ•°æ®ç±»å‹\n    res.writeHeader('200', {'Content-Type': 'image/png;charset=utf-8'});\n    fs.readFile('./hello.png', function (err, result) {\n        if (!err) {\n            res.write(result);\n            res.end();\n        }\n    })\n}).listen(8080, function () {\n    console.log('Server running at http://127.0.0.1:8080/');\n});\n```\nå¯ä»¥é€šè¿‡ [node-mime](https://github.com/broofa/node-mime) æ¥æŸ¥è¯¢å„ç§æ–‡ä»¶çš„æ•°æ®ç±»å‹ã€‚å…ˆç”¨ npm å®‰è£…ã€‚\n```bash\nnpm install mime --save\n```\n```js\nvar mime = require('mime');\n\nconsole.log(mime.lookup('test.txt'));   // text/plain\nconsole.log(mime.lookup('test.html'));  // text/html\nconsole.log(mime.lookup('test.css'));   // text/css\nconsole.log(mime.lookup('test.js'));    // application/javascript\nconsole.log(mime.lookup('test.mp3'));   // audio/mpeg\n```\n### Web å®¢æˆ·ç«¯æ•°æ®ä¼ é€’\n\n#### é€šè¿‡ URL ä¼ é€’\n```Text\nscheme://host.domain:port/path/filename?queryName=queryValue\n```\nå…¶ä¸­ `?queryName=queryValue` å°±æ˜¯é€šè¿‡ URL ä¼ é€’çš„æ•°æ®ï¼Œä¸¾ä¸ªä¾‹å­ï¼š`?usr=admin&pwd=123` å°±è¡¨ç¤ºä¼ é€’ä¸€ä¸ª `usr` ä¸º `admin` ï¼Œ`pwd` ä¸º `123` çš„æ•°æ®åˆ°åå°ã€‚\n#### é€šè¿‡è¡¨å•ä¼ é€’\n```html\n<form action=\"/user\" method=\"get\">\n    ç”¨æˆ·åï¼š<input type=\"text\" name=\"username\"/><br/>\n    å¯† ç ï¼š<input type=\"password\" name=\"password\"><br/>\n    <input type=\"submit\" value=\"æäº¤\"/>\n</form>\n```\n- actionï¼šæäº¤åˆ°æœåŠ¡å™¨å¤„ç†ç¨‹åºçš„ url åœ°å€\n- methodï¼šæäº¤æ–¹å¼æœ‰ `GET` å’Œ `POST`\n- GETï¼šä¼šæŠŠè¡¨å•æ•°æ®ä½œä¸º URL çš„ä¸€éƒ¨åˆ†æ˜¾ç¤ºåœ¨åœ°å€æ ä¸­ï¼ŒURL é•¿åº¦æœ‰é™åˆ¶ä¸èƒ½æäº¤å¤§é‡æ•°æ®\n- POSTï¼šä¼šæŠŠè¡¨å•æ•°æ®æ”¾åˆ° HTTP è¯·æ±‚ä½“ä¸­ï¼Œç›¸å¯¹å®‰å…¨ï¼Œè€Œä¸”å¯ä»¥æäº¤å¤§é‡æ•°æ®ï¼ˆæ¯”å¦‚æ–‡ä»¶ï¼‰\n\n#### æ•°æ®ç±»å‹\nå‰é¢è®²äº†ï¼Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œè¿”å›ç»™æµè§ˆå™¨æ•°æ®æ—¶ï¼Œä¼šé€šè¿‡ `Content-Type` æŒ‡å®šæ•°æ®ç±»å‹ï¼ŒåŒæ ·çš„ï¼Œæµè§ˆå™¨å‘æœåŠ¡å™¨ä¼ é€’æ•°æ®æ—¶ï¼Œä¹Ÿéœ€è¦æŒ‡å®šæ•°æ®ç±»å‹ã€‚åœ¨è¿™ä¸¤ç§æ•°æ®ä¼ é€’æ–¹å¼ä¸­ï¼Œè¡¨å•ä¼ é€’æ•°æ®æ—¶ï¼Œ`POST` æ–¹å¼ï¼Œå¿…é¡»æŒ‡å®šæ•°æ®ç±»å‹ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ã€‚\n```html\n<form action=\"/user\" method=\"post\" enctype=\"multipart/form-data\">\n    <input type=\"file\">\n    <input type=\"submit\" value=\"ä¸Šä¼ \">\n</form>\n```\n`enctype` æŒ‡å®š POST çš„æ•°æ®ç±»å‹ï¼Œé»˜è®¤æ˜¯ `application/x-www-form-urlencoded`ï¼Œä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œå°±éœ€è¦ `multipart/form-data` ç±»å‹äº†ã€‚\n","source":"_posts/Node.JS-å­¦ä¹ ç¬”è®°-[04]----HTTP.md","raw":"---\ntitle: 'Node.JS å­¦ä¹ ç¬”è®° [04] -- HTTP'\ndate: 2015-01-05 15:05:10\ntags:\ncomments: false\n---\n\næœ¬æ¬¡çš„å­¦ä¹ å†…å®¹æ˜¯ Node.js Web æ¨¡å—ï¼Œä»‹ç»äº†ä»€ä¹ˆæ˜¯ web æœåŠ¡å™¨ï¼Œä»¥åŠå¸¸è§çš„å‡ ç§æ¨¡å¼ï¼Œæ¯”å¦‚ B/S æ¨¡å¼ï¼ˆBrowser/Serverï¼Œæµè§ˆå™¨/æœåŠ¡å™¨æ¨¡å¼ï¼‰ï¼ŒC/S æ¨¡å¼ï¼ˆClient/Serverï¼Œå®¢æˆ·ç«¯/æœåŠ¡å™¨æ¨¡å¼ï¼‰ç­‰ã€‚Web å®¢æˆ·ç«¯é€šè¿‡ä½¿ç”¨ HTTP åè®®å°±èƒ½è®¿é—®åˆ° Web æœåŠ¡å™¨ä¸Šçš„æ•°æ®ï¼ŒWeb æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚\n<!-- more -->\n### HTTP\n#### HTTP åè®®\n***HTTP***  åè®®æ˜¯ Hyper Text Transfer Protocolï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰çš„ç¼©å†™,æ˜¯ç”¨äºä»ä¸‡ç»´ç½‘æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ é€åè®®ã€‚ç”¨äºå®šä¹‰ Web æµè§ˆå™¨ä¸ Web æœåŠ¡å™¨ä¹‹é—´äº¤æ¢æ•°æ®çš„è¿‡ç¨‹ä»¥åŠæ•°æ®æœ¬èº«çš„æ ¼å¼ã€‚\n\nç®€å•ç†è§£å…¶å®å°±æ˜¯ä¸€ç§è§„èŒƒï¼Œä»¥ä½•ç§æ–¹å¼è¯·æ±‚ï¼Œä»¥ä½•ç§æ–¹å¼åº”ç­”ã€‚ç‰¹ç‚¹å˜›ï¼Œ***ä¸€æ¬¡è¯·æ±‚ï¼ˆRequestï¼‰å¯¹åº”ä¸€æ¬¡å“åº”ï¼ˆResponseï¼‰***ã€‚æ¥çœ‹ä¸€ä¸ªç®€å•ä¾‹å­ï¼Œè®¿é—® Google é¦–é¡µçš„è¯·æ±‚å’Œåº”ç­”ã€‚\n![](http://ww3.sinaimg.cn/large/6057861cgw1fbb9dlv1ylj20xy0ts7ct.jpg)\n\nåœ¨ç¬¬ä¸€æ  General ä¸­å¯ä»¥çœ‹åˆ°æœ¬æ¬¡çš„è¯·æ±‚ç›®æ ‡ï¼Œæ¥è§£é‡Šä¸€ä¸‹è¿™å‡ ä¸ªå‚æ•°ä»£è¡¨å•¥æ„æ€ã€‚\n\n- Request URL:https://www.google.com/  è¯·æ±‚çš„ URLï¼Œè¿™é‡Œæˆ‘ä»¬è®¿é—®çš„æ˜¯ Google é¦–é¡µã€‚\n- Request Method:GET è¯·æ±‚æ–¹å¼ï¼Œè¿™é‡Œé‡‡ç”¨çš„æ˜¯ GET æ–¹å¼è¯·æ±‚ã€‚\n- Status Code:200  çŠ¶æ€ç  200 ï¼Œè¡¨ç¤º OKã€‚\n- Remote Address:127.0.0.1:1080 è¿™é‡Œè¡¨ç¤ºè¯·æ±‚çš„è¿œç«¯ IP åœ°å€åŠç«¯å£ï¼Œå› ä¸ºæˆ‘æ˜¯ç§‘å­¦ä¸Šç½‘ï¼Œè¿™é‡Œæ‰æ˜¾ç¤ºäº†ä¸€ä¸ªå›è·¯åœ°å€ã€‚\n\n#### Node.js æ­å»º http æœåŠ¡å™¨\nNode.js æä¾›äº† http æ¨¡å—ï¼Œä½¿ç”¨ HTTP æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯åŠŸèƒ½å¿…é¡»è°ƒç”¨ http æ¨¡å—ï¼ŒNode.js æ­å»ºä¸€ä¸ª http æœåŠ¡å™¨éå¸¸ç®€å•ï¼Œåªéœ€è¦å‡ è¡Œä»£ç ï¼Œæ¥çœ‹çœ‹æŠŠã€‚:P\n```js\n// å¼•å…¥ http æ¨¡å—\nvar http = require('http');\n\n// åˆ›å»ºæœåŠ¡ï¼Œå›è°ƒå‡½æ•°å¤„ç†è¯·æ±‚ï¼ˆRequestï¼‰å’Œå“åº”ï¼ˆResponseï¼‰ï¼Œç›‘å¬8080ç«¯å£\nhttp.createServer(function (req, res) {\n    res.write('hello,world!');\n    res.end();\n}).listen(8080, function () {\n    console.log('Server running at http://127.0.0.1:8080/');\n});\n```\næ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ http://127.0.0.1:8080/ å°±å¯ä»¥çœ‹åˆ°åˆšåˆšåˆ›å»ºçš„æœåŠ¡æˆåŠŸå•¦ã€‚\n![](http://ww4.sinaimg.cn/large/6057861cgw1fbbabbplavj20tg08mmyp.jpg)\n\n#### HTTP å“åº”å†…å®¹\né—®é¢˜æ¥äº†ï¼Œé‚£ä¹ˆå¦‚ä½•æ ¹æ®ä¸åŒçš„ URL æ¥å“åº”ä¸åŒçš„å†…å®¹å‘¢ï¼Ÿç­”æ¡ˆå¾ˆç®€å•ï¼Œhttp æœåŠ¡å™¨åœ¨å¤„ç† URL çš„æ—¶å€™ï¼Œä¼šæ ¹æ® URL çš„å‚æ•°æ¥åˆ†è¾¨ä¸åŒçš„è¯·æ±‚å†…å®¹ï¼Œæ ¹æ®è¯·æ±‚çš„å†…å®¹æ¥å“åº”ä¸ä¹‹å¯¹åº”çš„å†…å®¹ã€‚ä¸€ä¸ªå®Œæ•´çš„ URL é•¿è¿™ä¸ªæ ·å­ã€‚\n```Text\nscheme://host.domain:port/path/filename?queryName=queryValue\n```\n- schemeï¼šå®šä¹‰æœåŠ¡ç±»å‹ï¼Œå¸¸è§çš„å¦‚ http\n- hostï¼šå®šä¹‰åŸŸä¸»æœºï¼Œhttp é€šå¸¸æ˜¯ www\n- domainï¼šå®šä¹‰åŸŸåï¼Œæ¯”å¦‚ google.com\n- :portï¼šå®šä¹‰ä¸»æœºçš„ç«¯å£å·ï¼Œé»˜è®¤æ˜¯ 80\n- pathï¼šå®šä¹‰è·¯å¾„ï¼Œçœç•¥ `/` è¡¨ç¤ºæ ¹ç›®å½•\n- filenameï¼šå®šä¹‰æ–‡ä»¶å\n- ?queryName=queryValueï¼šæŸ¥è¯¢å­—ç¬¦ä¸²\n\nå¯ä»¥çœ‹å‡ºï¼Œæƒ³è¦å“åº”ä¸åŒçš„å†…å®¹ï¼Œå°±éœ€è¦åˆ†æå‡º URL ä¸­çš„ `path` å’Œ `filename` ä»¥åŠå¯¹åº”çš„æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚æ¥çœ‹ä¸ªç®€å•çš„ä¾‹å­ã€‚\n```js\nvar http = require('http');\nvar fs = require('fs');\nvar url = require('url');// å¼•å…¥ url æ¨¡å—ç”¨äºå¤„ç†åœ°å€\nvar querystring = require('querystring'); // å¼•å…¥ querystring æ¨¡å—\n\nhttp.createServer(function (req, res) {\n    // é¦–é¡µ\n    var path = url.parse(req.url).pathname;\n    if (path == '/') {\n        fs.readFile('./html/index.html', 'utf-8', function (err, result) {\n            if (!err) {\n                res.write(result);\n                res.end();\n            }\n        });\n    }\n    // ç™»å½•\n    if (path == '/login'){\n        //{...}\n    }\n    // ç™»å½•éªŒè¯\n    if (path == '/checkLogin') {\n        var queryObj = querystring.parse(url.parse(req.url).query);\n        // querystring.parse() æŠŠæŸ¥è¯¢å­—ç¬¦ä¸²è½¬æˆå¯¹è±¡ï¼Œ{ usr: 'admin', pwd: '123' }\n        if (queryObj.usr == 'admin' && queryObj.pwd == '123') {\n            res.write('Login Success!');\n            res.end();\n        }\n    }\n}).listen(8080, function () {\n    console.log('Server running at http://127.0.0.1:8080/');\n});\n```\n\n#### HTTP å“åº”çŠ¶æ€ç \nHTTP çŠ¶æ€ç ç”±ä¸‰ä¸ªåè¿›åˆ¶æ•°å­—ç»„æˆï¼Œç¬¬ä¸€ä¸ªåè¿›åˆ¶æ•°å­—å®šä¹‰äº†çŠ¶æ€ç çš„ç±»å‹ï¼Œåä¸¤ä¸ªæ•°å­—æ²¡æœ‰åˆ†ç±»çš„ä½œç”¨ã€‚HTTP çŠ¶æ€ç å…±åˆ†ä¸º 5 ç§ç±»å‹ï¼š\n\n|åˆ†ç±»   |åˆ†ç±»æè¿°                                   |\n|:-----|:------------------------------------------|\n|1**   |ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œéœ€è¦è¯·æ±‚è€…ç»§ç»­æ‰§è¡Œæ“ä½œ   |\n|2**   |æˆåŠŸï¼Œæ“ä½œè¢«æˆåŠŸæ¥æ”¶å¹¶å¤„ç†                   |\n|3**   |é‡å®šå‘ï¼Œéœ€è¦è¿›ä¸€æ­¥çš„æ“ä½œä»¥å®Œæˆè¯·æ±‚            |\n|4**   |å®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–æ— æ³•å®Œæˆè¯·æ±‚     |\n|5**   |æœåŠ¡å™¨é”™è¯¯ï¼ŒæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ |\n\néœ€è¦è®°ä½å¸¸è§çš„å‡ ç§å°±å¯ä»¥äº†ï¼Œå¦å¤–çš„å¯ä»¥[æŸ¥æ‰‹å†Œ](http://tools.jb51.net/table/http_status_code)æ‰¾åˆ°éå¸¸è¯¦ç»†çš„è§£é‡Šã€‚\n- 200\tOK\tè¯·æ±‚æˆåŠŸã€‚ä¸€èˆ¬ç”¨äº GET ä¸ POST è¯·æ±‚ã€‚\n- 304\tNot Modified\tæœªä¿®æ”¹ã€‚æ‰€è¯·æ±‚çš„èµ„æºæœªä¿®æ”¹ï¼ŒæœåŠ¡å™¨è¿”å›æ­¤çŠ¶æ€ç æ—¶ï¼Œä¸ä¼šè¿”å›ä»»ä½•èµ„æºã€‚\n- 404\tNot Found\tæœåŠ¡å™¨æ— æ³•æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚æ‰¾åˆ°èµ„æºï¼ˆç½‘é¡µï¼‰ã€‚\n- 500\tInternal Server Error\tæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚ã€‚\n\n#### HTTP å“åº”ä¸åŒçš„æ•°æ®ç±»å‹\næœåŠ¡å™¨å…·æœ‰è¿”å›å„ç§æ•°æ®çš„èƒ½åŠ›ï¼Œä½†æ˜¯è¿”å›æ•°æ®æ—¶ï¼Œåº”å‘Šè¯‰æµè§ˆå™¨è¿”å›çš„æ˜¯ä¸€ä¸ªä»€ä¹ˆæ–‡ä»¶ã€‚é€šè¿‡ `Content-Type` å¯ä»¥è®¾ç½®ï¼Œå“åº”çš„æ•°æ®ç±»å‹ã€‚æ¥çœ‹ä¸ªç®€å•çš„ä¾‹å­ã€‚\n```js\nvar http = require('http');\nvar fs = require('fs');\n\nhttp.createServer(function (req, res) {\n    // è®¾ç½®å“åº”çš„çŠ¶æ€ç ï¼Œæ•°æ®ç±»å‹\n    res.writeHeader('200', {'Content-Type': 'image/png;charset=utf-8'});\n    fs.readFile('./hello.png', function (err, result) {\n        if (!err) {\n            res.write(result);\n            res.end();\n        }\n    })\n}).listen(8080, function () {\n    console.log('Server running at http://127.0.0.1:8080/');\n});\n```\nå¯ä»¥é€šè¿‡ [node-mime](https://github.com/broofa/node-mime) æ¥æŸ¥è¯¢å„ç§æ–‡ä»¶çš„æ•°æ®ç±»å‹ã€‚å…ˆç”¨ npm å®‰è£…ã€‚\n```bash\nnpm install mime --save\n```\n```js\nvar mime = require('mime');\n\nconsole.log(mime.lookup('test.txt'));   // text/plain\nconsole.log(mime.lookup('test.html'));  // text/html\nconsole.log(mime.lookup('test.css'));   // text/css\nconsole.log(mime.lookup('test.js'));    // application/javascript\nconsole.log(mime.lookup('test.mp3'));   // audio/mpeg\n```\n### Web å®¢æˆ·ç«¯æ•°æ®ä¼ é€’\n\n#### é€šè¿‡ URL ä¼ é€’\n```Text\nscheme://host.domain:port/path/filename?queryName=queryValue\n```\nå…¶ä¸­ `?queryName=queryValue` å°±æ˜¯é€šè¿‡ URL ä¼ é€’çš„æ•°æ®ï¼Œä¸¾ä¸ªä¾‹å­ï¼š`?usr=admin&pwd=123` å°±è¡¨ç¤ºä¼ é€’ä¸€ä¸ª `usr` ä¸º `admin` ï¼Œ`pwd` ä¸º `123` çš„æ•°æ®åˆ°åå°ã€‚\n#### é€šè¿‡è¡¨å•ä¼ é€’\n```html\n<form action=\"/user\" method=\"get\">\n    ç”¨æˆ·åï¼š<input type=\"text\" name=\"username\"/><br/>\n    å¯† ç ï¼š<input type=\"password\" name=\"password\"><br/>\n    <input type=\"submit\" value=\"æäº¤\"/>\n</form>\n```\n- actionï¼šæäº¤åˆ°æœåŠ¡å™¨å¤„ç†ç¨‹åºçš„ url åœ°å€\n- methodï¼šæäº¤æ–¹å¼æœ‰ `GET` å’Œ `POST`\n- GETï¼šä¼šæŠŠè¡¨å•æ•°æ®ä½œä¸º URL çš„ä¸€éƒ¨åˆ†æ˜¾ç¤ºåœ¨åœ°å€æ ä¸­ï¼ŒURL é•¿åº¦æœ‰é™åˆ¶ä¸èƒ½æäº¤å¤§é‡æ•°æ®\n- POSTï¼šä¼šæŠŠè¡¨å•æ•°æ®æ”¾åˆ° HTTP è¯·æ±‚ä½“ä¸­ï¼Œç›¸å¯¹å®‰å…¨ï¼Œè€Œä¸”å¯ä»¥æäº¤å¤§é‡æ•°æ®ï¼ˆæ¯”å¦‚æ–‡ä»¶ï¼‰\n\n#### æ•°æ®ç±»å‹\nå‰é¢è®²äº†ï¼Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œè¿”å›ç»™æµè§ˆå™¨æ•°æ®æ—¶ï¼Œä¼šé€šè¿‡ `Content-Type` æŒ‡å®šæ•°æ®ç±»å‹ï¼ŒåŒæ ·çš„ï¼Œæµè§ˆå™¨å‘æœåŠ¡å™¨ä¼ é€’æ•°æ®æ—¶ï¼Œä¹Ÿéœ€è¦æŒ‡å®šæ•°æ®ç±»å‹ã€‚åœ¨è¿™ä¸¤ç§æ•°æ®ä¼ é€’æ–¹å¼ä¸­ï¼Œè¡¨å•ä¼ é€’æ•°æ®æ—¶ï¼Œ`POST` æ–¹å¼ï¼Œå¿…é¡»æŒ‡å®šæ•°æ®ç±»å‹ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ã€‚\n```html\n<form action=\"/user\" method=\"post\" enctype=\"multipart/form-data\">\n    <input type=\"file\">\n    <input type=\"submit\" value=\"ä¸Šä¼ \">\n</form>\n```\n`enctype` æŒ‡å®š POST çš„æ•°æ®ç±»å‹ï¼Œé»˜è®¤æ˜¯ `application/x-www-form-urlencoded`ï¼Œä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œå°±éœ€è¦ `multipart/form-data` ç±»å‹äº†ã€‚\n","slug":"Node.JS-å­¦ä¹ ç¬”è®°-[04]----HTTP","published":1,"updated":"2019-12-07T04:59:34.172Z","layout":"post","photos":[],"link":"","_id":"ck3v60jte000dr9q910rmytsz","content":"<p>æœ¬æ¬¡çš„å­¦ä¹ å†…å®¹æ˜¯ Node.js Web æ¨¡å—ï¼Œä»‹ç»äº†ä»€ä¹ˆæ˜¯ web æœåŠ¡å™¨ï¼Œä»¥åŠå¸¸è§çš„å‡ ç§æ¨¡å¼ï¼Œæ¯”å¦‚ B/S æ¨¡å¼ï¼ˆBrowser/Serverï¼Œæµè§ˆå™¨/æœåŠ¡å™¨æ¨¡å¼ï¼‰ï¼ŒC/S æ¨¡å¼ï¼ˆClient/Serverï¼Œå®¢æˆ·ç«¯/æœåŠ¡å™¨æ¨¡å¼ï¼‰ç­‰ã€‚Web å®¢æˆ·ç«¯é€šè¿‡ä½¿ç”¨ HTTP åè®®å°±èƒ½è®¿é—®åˆ° Web æœåŠ¡å™¨ä¸Šçš„æ•°æ®ï¼ŒWeb æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚<br><a id=\"more\"></a></p>\n<h3 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h3><h4 id=\"HTTP-åè®®\"><a href=\"#HTTP-åè®®\" class=\"headerlink\" title=\"HTTP åè®®\"></a>HTTP åè®®</h4><p><strong><em>HTTP</em></strong>  åè®®æ˜¯ Hyper Text Transfer Protocolï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰çš„ç¼©å†™,æ˜¯ç”¨äºä»ä¸‡ç»´ç½‘æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ é€åè®®ã€‚ç”¨äºå®šä¹‰ Web æµè§ˆå™¨ä¸ Web æœåŠ¡å™¨ä¹‹é—´äº¤æ¢æ•°æ®çš„è¿‡ç¨‹ä»¥åŠæ•°æ®æœ¬èº«çš„æ ¼å¼ã€‚</p>\n<p>ç®€å•ç†è§£å…¶å®å°±æ˜¯ä¸€ç§è§„èŒƒï¼Œä»¥ä½•ç§æ–¹å¼è¯·æ±‚ï¼Œä»¥ä½•ç§æ–¹å¼åº”ç­”ã€‚ç‰¹ç‚¹å˜›ï¼Œ<strong><em>ä¸€æ¬¡è¯·æ±‚ï¼ˆRequestï¼‰å¯¹åº”ä¸€æ¬¡å“åº”ï¼ˆResponseï¼‰</em></strong>ã€‚æ¥çœ‹ä¸€ä¸ªç®€å•ä¾‹å­ï¼Œè®¿é—® Google é¦–é¡µçš„è¯·æ±‚å’Œåº”ç­”ã€‚<br><img src=\"http://ww3.sinaimg.cn/large/6057861cgw1fbb9dlv1ylj20xy0ts7ct.jpg\" alt=\"\"></p>\n<p>åœ¨ç¬¬ä¸€æ  General ä¸­å¯ä»¥çœ‹åˆ°æœ¬æ¬¡çš„è¯·æ±‚ç›®æ ‡ï¼Œæ¥è§£é‡Šä¸€ä¸‹è¿™å‡ ä¸ªå‚æ•°ä»£è¡¨å•¥æ„æ€ã€‚</p>\n<ul>\n<li>Request URL:<a href=\"https://www.google.com/\" target=\"_blank\" rel=\"noopener\">https://www.google.com/</a>  è¯·æ±‚çš„ URLï¼Œè¿™é‡Œæˆ‘ä»¬è®¿é—®çš„æ˜¯ Google é¦–é¡µã€‚</li>\n<li>Request Method:GET è¯·æ±‚æ–¹å¼ï¼Œè¿™é‡Œé‡‡ç”¨çš„æ˜¯ GET æ–¹å¼è¯·æ±‚ã€‚</li>\n<li>Status Code:200  çŠ¶æ€ç  200 ï¼Œè¡¨ç¤º OKã€‚</li>\n<li>Remote Address:127.0.0.1:1080 è¿™é‡Œè¡¨ç¤ºè¯·æ±‚çš„è¿œç«¯ IP åœ°å€åŠç«¯å£ï¼Œå› ä¸ºæˆ‘æ˜¯ç§‘å­¦ä¸Šç½‘ï¼Œè¿™é‡Œæ‰æ˜¾ç¤ºäº†ä¸€ä¸ªå›è·¯åœ°å€ã€‚</li>\n</ul>\n<h4 id=\"Node-js-æ­å»º-http-æœåŠ¡å™¨\"><a href=\"#Node-js-æ­å»º-http-æœåŠ¡å™¨\" class=\"headerlink\" title=\"Node.js æ­å»º http æœåŠ¡å™¨\"></a>Node.js æ­å»º http æœåŠ¡å™¨</h4><p>Node.js æä¾›äº† http æ¨¡å—ï¼Œä½¿ç”¨ HTTP æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯åŠŸèƒ½å¿…é¡»è°ƒç”¨ http æ¨¡å—ï¼ŒNode.js æ­å»ºä¸€ä¸ª http æœåŠ¡å™¨éå¸¸ç®€å•ï¼Œåªéœ€è¦å‡ è¡Œä»£ç ï¼Œæ¥çœ‹çœ‹æŠŠã€‚:P<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¼•å…¥ http æ¨¡å—</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åˆ›å»ºæœåŠ¡ï¼Œå›è°ƒå‡½æ•°å¤„ç†è¯·æ±‚ï¼ˆRequestï¼‰å’Œå“åº”ï¼ˆResponseï¼‰ï¼Œç›‘å¬8080ç«¯å£</span></span><br><span class=\"line\">http.createServer(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    res.write(<span class=\"string\">'hello,world!'</span>);</span><br><span class=\"line\">    res.end();</span><br><span class=\"line\">&#125;).listen(<span class=\"number\">8080</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Server running at http://127.0.0.1:8080/'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ <a href=\"http://127.0.0.1:8080/\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1:8080/</a> å°±å¯ä»¥çœ‹åˆ°åˆšåˆšåˆ›å»ºçš„æœåŠ¡æˆåŠŸå•¦ã€‚<br><img src=\"http://ww4.sinaimg.cn/large/6057861cgw1fbbabbplavj20tg08mmyp.jpg\" alt=\"\"></p>\n<h4 id=\"HTTP-å“åº”å†…å®¹\"><a href=\"#HTTP-å“åº”å†…å®¹\" class=\"headerlink\" title=\"HTTP å“åº”å†…å®¹\"></a>HTTP å“åº”å†…å®¹</h4><p>é—®é¢˜æ¥äº†ï¼Œé‚£ä¹ˆå¦‚ä½•æ ¹æ®ä¸åŒçš„ URL æ¥å“åº”ä¸åŒçš„å†…å®¹å‘¢ï¼Ÿç­”æ¡ˆå¾ˆç®€å•ï¼Œhttp æœåŠ¡å™¨åœ¨å¤„ç† URL çš„æ—¶å€™ï¼Œä¼šæ ¹æ® URL çš„å‚æ•°æ¥åˆ†è¾¨ä¸åŒçš„è¯·æ±‚å†…å®¹ï¼Œæ ¹æ®è¯·æ±‚çš„å†…å®¹æ¥å“åº”ä¸ä¹‹å¯¹åº”çš„å†…å®¹ã€‚ä¸€ä¸ªå®Œæ•´çš„ URL é•¿è¿™ä¸ªæ ·å­ã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scheme://host.domain:port/path/filename?queryName=queryValue</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>schemeï¼šå®šä¹‰æœåŠ¡ç±»å‹ï¼Œå¸¸è§çš„å¦‚ http</li>\n<li>hostï¼šå®šä¹‰åŸŸä¸»æœºï¼Œhttp é€šå¸¸æ˜¯ www</li>\n<li>domainï¼šå®šä¹‰åŸŸåï¼Œæ¯”å¦‚ google.com</li>\n<li>:portï¼šå®šä¹‰ä¸»æœºçš„ç«¯å£å·ï¼Œé»˜è®¤æ˜¯ 80</li>\n<li>pathï¼šå®šä¹‰è·¯å¾„ï¼Œçœç•¥ <code>/</code> è¡¨ç¤ºæ ¹ç›®å½•</li>\n<li>filenameï¼šå®šä¹‰æ–‡ä»¶å</li>\n<li>?queryName=queryValueï¼šæŸ¥è¯¢å­—ç¬¦ä¸²</li>\n</ul>\n<p>å¯ä»¥çœ‹å‡ºï¼Œæƒ³è¦å“åº”ä¸åŒçš„å†…å®¹ï¼Œå°±éœ€è¦åˆ†æå‡º URL ä¸­çš„ <code>path</code> å’Œ <code>filename</code> ä»¥åŠå¯¹åº”çš„æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚æ¥çœ‹ä¸ªç®€å•çš„ä¾‹å­ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">'url'</span>);<span class=\"comment\">// å¼•å…¥ url æ¨¡å—ç”¨äºå¤„ç†åœ°å€</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> querystring = <span class=\"built_in\">require</span>(<span class=\"string\">'querystring'</span>); <span class=\"comment\">// å¼•å…¥ querystring æ¨¡å—</span></span><br><span class=\"line\"></span><br><span class=\"line\">http.createServer(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// é¦–é¡µ</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> path = url.parse(req.url).pathname;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (path == <span class=\"string\">'/'</span>) &#123;</span><br><span class=\"line\">        fs.readFile(<span class=\"string\">'./html/index.html'</span>, <span class=\"string\">'utf-8'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, result</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!err) &#123;</span><br><span class=\"line\">                res.write(result);</span><br><span class=\"line\">                res.end();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ç™»å½•</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (path == <span class=\"string\">'/login'</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//&#123;...&#125;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ç™»å½•éªŒè¯</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (path == <span class=\"string\">'/checkLogin'</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> queryObj = querystring.parse(url.parse(req.url).query);</span><br><span class=\"line\">        <span class=\"comment\">// querystring.parse() æŠŠæŸ¥è¯¢å­—ç¬¦ä¸²è½¬æˆå¯¹è±¡ï¼Œ&#123; usr: 'admin', pwd: '123' &#125;</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (queryObj.usr == <span class=\"string\">'admin'</span> &amp;&amp; queryObj.pwd == <span class=\"string\">'123'</span>) &#123;</span><br><span class=\"line\">            res.write(<span class=\"string\">'Login Success!'</span>);</span><br><span class=\"line\">            res.end();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;).listen(<span class=\"number\">8080</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Server running at http://127.0.0.1:8080/'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"HTTP-å“åº”çŠ¶æ€ç \"><a href=\"#HTTP-å“åº”çŠ¶æ€ç \" class=\"headerlink\" title=\"HTTP å“åº”çŠ¶æ€ç \"></a>HTTP å“åº”çŠ¶æ€ç </h4><p>HTTP çŠ¶æ€ç ç”±ä¸‰ä¸ªåè¿›åˆ¶æ•°å­—ç»„æˆï¼Œç¬¬ä¸€ä¸ªåè¿›åˆ¶æ•°å­—å®šä¹‰äº†çŠ¶æ€ç çš„ç±»å‹ï¼Œåä¸¤ä¸ªæ•°å­—æ²¡æœ‰åˆ†ç±»çš„ä½œç”¨ã€‚HTTP çŠ¶æ€ç å…±åˆ†ä¸º 5 ç§ç±»å‹ï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">åˆ†ç±»</th>\n<th style=\"text-align:left\">åˆ†ç±»æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">1**</td>\n<td style=\"text-align:left\">ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œéœ€è¦è¯·æ±‚è€…ç»§ç»­æ‰§è¡Œæ“ä½œ</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">2**</td>\n<td style=\"text-align:left\">æˆåŠŸï¼Œæ“ä½œè¢«æˆåŠŸæ¥æ”¶å¹¶å¤„ç†</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">3**</td>\n<td style=\"text-align:left\">é‡å®šå‘ï¼Œéœ€è¦è¿›ä¸€æ­¥çš„æ“ä½œä»¥å®Œæˆè¯·æ±‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">4**</td>\n<td style=\"text-align:left\">å®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–æ— æ³•å®Œæˆè¯·æ±‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">5**</td>\n<td style=\"text-align:left\">æœåŠ¡å™¨é”™è¯¯ï¼ŒæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯</td>\n</tr>\n</tbody>\n</table>\n<p>éœ€è¦è®°ä½å¸¸è§çš„å‡ ç§å°±å¯ä»¥äº†ï¼Œå¦å¤–çš„å¯ä»¥<a href=\"http://tools.jb51.net/table/http_status_code\" target=\"_blank\" rel=\"noopener\">æŸ¥æ‰‹å†Œ</a>æ‰¾åˆ°éå¸¸è¯¦ç»†çš„è§£é‡Šã€‚</p>\n<ul>\n<li>200    OK    è¯·æ±‚æˆåŠŸã€‚ä¸€èˆ¬ç”¨äº GET ä¸ POST è¯·æ±‚ã€‚</li>\n<li>304    Not Modified    æœªä¿®æ”¹ã€‚æ‰€è¯·æ±‚çš„èµ„æºæœªä¿®æ”¹ï¼ŒæœåŠ¡å™¨è¿”å›æ­¤çŠ¶æ€ç æ—¶ï¼Œä¸ä¼šè¿”å›ä»»ä½•èµ„æºã€‚</li>\n<li>404    Not Found    æœåŠ¡å™¨æ— æ³•æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚æ‰¾åˆ°èµ„æºï¼ˆç½‘é¡µï¼‰ã€‚</li>\n<li>500    Internal Server Error    æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚ã€‚</li>\n</ul>\n<h4 id=\"HTTP-å“åº”ä¸åŒçš„æ•°æ®ç±»å‹\"><a href=\"#HTTP-å“åº”ä¸åŒçš„æ•°æ®ç±»å‹\" class=\"headerlink\" title=\"HTTP å“åº”ä¸åŒçš„æ•°æ®ç±»å‹\"></a>HTTP å“åº”ä¸åŒçš„æ•°æ®ç±»å‹</h4><p>æœåŠ¡å™¨å…·æœ‰è¿”å›å„ç§æ•°æ®çš„èƒ½åŠ›ï¼Œä½†æ˜¯è¿”å›æ•°æ®æ—¶ï¼Œåº”å‘Šè¯‰æµè§ˆå™¨è¿”å›çš„æ˜¯ä¸€ä¸ªä»€ä¹ˆæ–‡ä»¶ã€‚é€šè¿‡ <code>Content-Type</code> å¯ä»¥è®¾ç½®ï¼Œå“åº”çš„æ•°æ®ç±»å‹ã€‚æ¥çœ‹ä¸ªç®€å•çš„ä¾‹å­ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">http.createServer(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®å“åº”çš„çŠ¶æ€ç ï¼Œæ•°æ®ç±»å‹</span></span><br><span class=\"line\">    res.writeHeader(<span class=\"string\">'200'</span>, &#123;<span class=\"string\">'Content-Type'</span>: <span class=\"string\">'image/png;charset=utf-8'</span>&#125;);</span><br><span class=\"line\">    fs.readFile(<span class=\"string\">'./hello.png'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, result</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!err) &#123;</span><br><span class=\"line\">            res.write(result);</span><br><span class=\"line\">            res.end();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;).listen(<span class=\"number\">8080</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Server running at http://127.0.0.1:8080/'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>å¯ä»¥é€šè¿‡ <a href=\"https://github.com/broofa/node-mime\" target=\"_blank\" rel=\"noopener\">node-mime</a> æ¥æŸ¥è¯¢å„ç§æ–‡ä»¶çš„æ•°æ®ç±»å‹ã€‚å…ˆç”¨ npm å®‰è£…ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install mime --save</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> mime = <span class=\"built_in\">require</span>(<span class=\"string\">'mime'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(mime.lookup(<span class=\"string\">'test.txt'</span>));   <span class=\"comment\">// text/plain</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(mime.lookup(<span class=\"string\">'test.html'</span>));  <span class=\"comment\">// text/html</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(mime.lookup(<span class=\"string\">'test.css'</span>));   <span class=\"comment\">// text/css</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(mime.lookup(<span class=\"string\">'test.js'</span>));    <span class=\"comment\">// application/javascript</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(mime.lookup(<span class=\"string\">'test.mp3'</span>));   <span class=\"comment\">// audio/mpeg</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"Web-å®¢æˆ·ç«¯æ•°æ®ä¼ é€’\"><a href=\"#Web-å®¢æˆ·ç«¯æ•°æ®ä¼ é€’\" class=\"headerlink\" title=\"Web å®¢æˆ·ç«¯æ•°æ®ä¼ é€’\"></a>Web å®¢æˆ·ç«¯æ•°æ®ä¼ é€’</h3><h4 id=\"é€šè¿‡-URL-ä¼ é€’\"><a href=\"#é€šè¿‡-URL-ä¼ é€’\" class=\"headerlink\" title=\"é€šè¿‡ URL ä¼ é€’\"></a>é€šè¿‡ URL ä¼ é€’</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scheme://host.domain:port/path/filename?queryName=queryValue</span><br></pre></td></tr></table></figure>\n<p>å…¶ä¸­ <code>?queryName=queryValue</code> å°±æ˜¯é€šè¿‡ URL ä¼ é€’çš„æ•°æ®ï¼Œä¸¾ä¸ªä¾‹å­ï¼š<code>?usr=admin&amp;pwd=123</code> å°±è¡¨ç¤ºä¼ é€’ä¸€ä¸ª <code>usr</code> ä¸º <code>admin</code> ï¼Œ<code>pwd</code> ä¸º <code>123</code> çš„æ•°æ®åˆ°åå°ã€‚</p>\n<h4 id=\"é€šè¿‡è¡¨å•ä¼ é€’\"><a href=\"#é€šè¿‡è¡¨å•ä¼ é€’\" class=\"headerlink\" title=\"é€šè¿‡è¡¨å•ä¼ é€’\"></a>é€šè¿‡è¡¨å•ä¼ é€’</h4><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">\"/user\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"get\"</span>&gt;</span></span><br><span class=\"line\">    ç”¨æˆ·åï¼š<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span>/&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></span><br><span class=\"line\">    å¯† ç ï¼š<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"submit\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"æäº¤\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>actionï¼šæäº¤åˆ°æœåŠ¡å™¨å¤„ç†ç¨‹åºçš„ url åœ°å€</li>\n<li>methodï¼šæäº¤æ–¹å¼æœ‰ <code>GET</code> å’Œ <code>POST</code></li>\n<li>GETï¼šä¼šæŠŠè¡¨å•æ•°æ®ä½œä¸º URL çš„ä¸€éƒ¨åˆ†æ˜¾ç¤ºåœ¨åœ°å€æ ä¸­ï¼ŒURL é•¿åº¦æœ‰é™åˆ¶ä¸èƒ½æäº¤å¤§é‡æ•°æ®</li>\n<li>POSTï¼šä¼šæŠŠè¡¨å•æ•°æ®æ”¾åˆ° HTTP è¯·æ±‚ä½“ä¸­ï¼Œç›¸å¯¹å®‰å…¨ï¼Œè€Œä¸”å¯ä»¥æäº¤å¤§é‡æ•°æ®ï¼ˆæ¯”å¦‚æ–‡ä»¶ï¼‰</li>\n</ul>\n<h4 id=\"æ•°æ®ç±»å‹\"><a href=\"#æ•°æ®ç±»å‹\" class=\"headerlink\" title=\"æ•°æ®ç±»å‹\"></a>æ•°æ®ç±»å‹</h4><p>å‰é¢è®²äº†ï¼Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œè¿”å›ç»™æµè§ˆå™¨æ•°æ®æ—¶ï¼Œä¼šé€šè¿‡ <code>Content-Type</code> æŒ‡å®šæ•°æ®ç±»å‹ï¼ŒåŒæ ·çš„ï¼Œæµè§ˆå™¨å‘æœåŠ¡å™¨ä¼ é€’æ•°æ®æ—¶ï¼Œä¹Ÿéœ€è¦æŒ‡å®šæ•°æ®ç±»å‹ã€‚åœ¨è¿™ä¸¤ç§æ•°æ®ä¼ é€’æ–¹å¼ä¸­ï¼Œè¡¨å•ä¼ é€’æ•°æ®æ—¶ï¼Œ<code>POST</code> æ–¹å¼ï¼Œå¿…é¡»æŒ‡å®šæ•°æ®ç±»å‹ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ã€‚<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">\"/user\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"post\"</span> <span class=\"attr\">enctype</span>=<span class=\"string\">\"multipart/form-data\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"file\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"submit\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"ä¸Šä¼ \"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p><code>enctype</code> æŒ‡å®š POST çš„æ•°æ®ç±»å‹ï¼Œé»˜è®¤æ˜¯ <code>application/x-www-form-urlencoded</code>ï¼Œä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œå°±éœ€è¦ <code>multipart/form-data</code> ç±»å‹äº†ã€‚</p>\n","site":{"data":{}},"excerpt":"<p>æœ¬æ¬¡çš„å­¦ä¹ å†…å®¹æ˜¯ Node.js Web æ¨¡å—ï¼Œä»‹ç»äº†ä»€ä¹ˆæ˜¯ web æœåŠ¡å™¨ï¼Œä»¥åŠå¸¸è§çš„å‡ ç§æ¨¡å¼ï¼Œæ¯”å¦‚ B/S æ¨¡å¼ï¼ˆBrowser/Serverï¼Œæµè§ˆå™¨/æœåŠ¡å™¨æ¨¡å¼ï¼‰ï¼ŒC/S æ¨¡å¼ï¼ˆClient/Serverï¼Œå®¢æˆ·ç«¯/æœåŠ¡å™¨æ¨¡å¼ï¼‰ç­‰ã€‚Web å®¢æˆ·ç«¯é€šè¿‡ä½¿ç”¨ HTTP åè®®å°±èƒ½è®¿é—®åˆ° Web æœåŠ¡å™¨ä¸Šçš„æ•°æ®ï¼ŒWeb æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚<br>","more":"</p>\n<h3 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h3><h4 id=\"HTTP-åè®®\"><a href=\"#HTTP-åè®®\" class=\"headerlink\" title=\"HTTP åè®®\"></a>HTTP åè®®</h4><p><strong><em>HTTP</em></strong>  åè®®æ˜¯ Hyper Text Transfer Protocolï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰çš„ç¼©å†™,æ˜¯ç”¨äºä»ä¸‡ç»´ç½‘æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ é€åè®®ã€‚ç”¨äºå®šä¹‰ Web æµè§ˆå™¨ä¸ Web æœåŠ¡å™¨ä¹‹é—´äº¤æ¢æ•°æ®çš„è¿‡ç¨‹ä»¥åŠæ•°æ®æœ¬èº«çš„æ ¼å¼ã€‚</p>\n<p>ç®€å•ç†è§£å…¶å®å°±æ˜¯ä¸€ç§è§„èŒƒï¼Œä»¥ä½•ç§æ–¹å¼è¯·æ±‚ï¼Œä»¥ä½•ç§æ–¹å¼åº”ç­”ã€‚ç‰¹ç‚¹å˜›ï¼Œ<strong><em>ä¸€æ¬¡è¯·æ±‚ï¼ˆRequestï¼‰å¯¹åº”ä¸€æ¬¡å“åº”ï¼ˆResponseï¼‰</em></strong>ã€‚æ¥çœ‹ä¸€ä¸ªç®€å•ä¾‹å­ï¼Œè®¿é—® Google é¦–é¡µçš„è¯·æ±‚å’Œåº”ç­”ã€‚<br><img src=\"http://ww3.sinaimg.cn/large/6057861cgw1fbb9dlv1ylj20xy0ts7ct.jpg\" alt=\"\"></p>\n<p>åœ¨ç¬¬ä¸€æ  General ä¸­å¯ä»¥çœ‹åˆ°æœ¬æ¬¡çš„è¯·æ±‚ç›®æ ‡ï¼Œæ¥è§£é‡Šä¸€ä¸‹è¿™å‡ ä¸ªå‚æ•°ä»£è¡¨å•¥æ„æ€ã€‚</p>\n<ul>\n<li>Request URL:<a href=\"https://www.google.com/\" target=\"_blank\" rel=\"noopener\">https://www.google.com/</a>  è¯·æ±‚çš„ URLï¼Œè¿™é‡Œæˆ‘ä»¬è®¿é—®çš„æ˜¯ Google é¦–é¡µã€‚</li>\n<li>Request Method:GET è¯·æ±‚æ–¹å¼ï¼Œè¿™é‡Œé‡‡ç”¨çš„æ˜¯ GET æ–¹å¼è¯·æ±‚ã€‚</li>\n<li>Status Code:200  çŠ¶æ€ç  200 ï¼Œè¡¨ç¤º OKã€‚</li>\n<li>Remote Address:127.0.0.1:1080 è¿™é‡Œè¡¨ç¤ºè¯·æ±‚çš„è¿œç«¯ IP åœ°å€åŠç«¯å£ï¼Œå› ä¸ºæˆ‘æ˜¯ç§‘å­¦ä¸Šç½‘ï¼Œè¿™é‡Œæ‰æ˜¾ç¤ºäº†ä¸€ä¸ªå›è·¯åœ°å€ã€‚</li>\n</ul>\n<h4 id=\"Node-js-æ­å»º-http-æœåŠ¡å™¨\"><a href=\"#Node-js-æ­å»º-http-æœåŠ¡å™¨\" class=\"headerlink\" title=\"Node.js æ­å»º http æœåŠ¡å™¨\"></a>Node.js æ­å»º http æœåŠ¡å™¨</h4><p>Node.js æä¾›äº† http æ¨¡å—ï¼Œä½¿ç”¨ HTTP æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯åŠŸèƒ½å¿…é¡»è°ƒç”¨ http æ¨¡å—ï¼ŒNode.js æ­å»ºä¸€ä¸ª http æœåŠ¡å™¨éå¸¸ç®€å•ï¼Œåªéœ€è¦å‡ è¡Œä»£ç ï¼Œæ¥çœ‹çœ‹æŠŠã€‚:P<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¼•å…¥ http æ¨¡å—</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åˆ›å»ºæœåŠ¡ï¼Œå›è°ƒå‡½æ•°å¤„ç†è¯·æ±‚ï¼ˆRequestï¼‰å’Œå“åº”ï¼ˆResponseï¼‰ï¼Œç›‘å¬8080ç«¯å£</span></span><br><span class=\"line\">http.createServer(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    res.write(<span class=\"string\">'hello,world!'</span>);</span><br><span class=\"line\">    res.end();</span><br><span class=\"line\">&#125;).listen(<span class=\"number\">8080</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Server running at http://127.0.0.1:8080/'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ <a href=\"http://127.0.0.1:8080/\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1:8080/</a> å°±å¯ä»¥çœ‹åˆ°åˆšåˆšåˆ›å»ºçš„æœåŠ¡æˆåŠŸå•¦ã€‚<br><img src=\"http://ww4.sinaimg.cn/large/6057861cgw1fbbabbplavj20tg08mmyp.jpg\" alt=\"\"></p>\n<h4 id=\"HTTP-å“åº”å†…å®¹\"><a href=\"#HTTP-å“åº”å†…å®¹\" class=\"headerlink\" title=\"HTTP å“åº”å†…å®¹\"></a>HTTP å“åº”å†…å®¹</h4><p>é—®é¢˜æ¥äº†ï¼Œé‚£ä¹ˆå¦‚ä½•æ ¹æ®ä¸åŒçš„ URL æ¥å“åº”ä¸åŒçš„å†…å®¹å‘¢ï¼Ÿç­”æ¡ˆå¾ˆç®€å•ï¼Œhttp æœåŠ¡å™¨åœ¨å¤„ç† URL çš„æ—¶å€™ï¼Œä¼šæ ¹æ® URL çš„å‚æ•°æ¥åˆ†è¾¨ä¸åŒçš„è¯·æ±‚å†…å®¹ï¼Œæ ¹æ®è¯·æ±‚çš„å†…å®¹æ¥å“åº”ä¸ä¹‹å¯¹åº”çš„å†…å®¹ã€‚ä¸€ä¸ªå®Œæ•´çš„ URL é•¿è¿™ä¸ªæ ·å­ã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scheme://host.domain:port/path/filename?queryName=queryValue</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>schemeï¼šå®šä¹‰æœåŠ¡ç±»å‹ï¼Œå¸¸è§çš„å¦‚ http</li>\n<li>hostï¼šå®šä¹‰åŸŸä¸»æœºï¼Œhttp é€šå¸¸æ˜¯ www</li>\n<li>domainï¼šå®šä¹‰åŸŸåï¼Œæ¯”å¦‚ google.com</li>\n<li>:portï¼šå®šä¹‰ä¸»æœºçš„ç«¯å£å·ï¼Œé»˜è®¤æ˜¯ 80</li>\n<li>pathï¼šå®šä¹‰è·¯å¾„ï¼Œçœç•¥ <code>/</code> è¡¨ç¤ºæ ¹ç›®å½•</li>\n<li>filenameï¼šå®šä¹‰æ–‡ä»¶å</li>\n<li>?queryName=queryValueï¼šæŸ¥è¯¢å­—ç¬¦ä¸²</li>\n</ul>\n<p>å¯ä»¥çœ‹å‡ºï¼Œæƒ³è¦å“åº”ä¸åŒçš„å†…å®¹ï¼Œå°±éœ€è¦åˆ†æå‡º URL ä¸­çš„ <code>path</code> å’Œ <code>filename</code> ä»¥åŠå¯¹åº”çš„æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚æ¥çœ‹ä¸ªç®€å•çš„ä¾‹å­ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">'url'</span>);<span class=\"comment\">// å¼•å…¥ url æ¨¡å—ç”¨äºå¤„ç†åœ°å€</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> querystring = <span class=\"built_in\">require</span>(<span class=\"string\">'querystring'</span>); <span class=\"comment\">// å¼•å…¥ querystring æ¨¡å—</span></span><br><span class=\"line\"></span><br><span class=\"line\">http.createServer(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// é¦–é¡µ</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> path = url.parse(req.url).pathname;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (path == <span class=\"string\">'/'</span>) &#123;</span><br><span class=\"line\">        fs.readFile(<span class=\"string\">'./html/index.html'</span>, <span class=\"string\">'utf-8'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, result</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!err) &#123;</span><br><span class=\"line\">                res.write(result);</span><br><span class=\"line\">                res.end();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ç™»å½•</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (path == <span class=\"string\">'/login'</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//&#123;...&#125;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ç™»å½•éªŒè¯</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (path == <span class=\"string\">'/checkLogin'</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> queryObj = querystring.parse(url.parse(req.url).query);</span><br><span class=\"line\">        <span class=\"comment\">// querystring.parse() æŠŠæŸ¥è¯¢å­—ç¬¦ä¸²è½¬æˆå¯¹è±¡ï¼Œ&#123; usr: 'admin', pwd: '123' &#125;</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (queryObj.usr == <span class=\"string\">'admin'</span> &amp;&amp; queryObj.pwd == <span class=\"string\">'123'</span>) &#123;</span><br><span class=\"line\">            res.write(<span class=\"string\">'Login Success!'</span>);</span><br><span class=\"line\">            res.end();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;).listen(<span class=\"number\">8080</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Server running at http://127.0.0.1:8080/'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"HTTP-å“åº”çŠ¶æ€ç \"><a href=\"#HTTP-å“åº”çŠ¶æ€ç \" class=\"headerlink\" title=\"HTTP å“åº”çŠ¶æ€ç \"></a>HTTP å“åº”çŠ¶æ€ç </h4><p>HTTP çŠ¶æ€ç ç”±ä¸‰ä¸ªåè¿›åˆ¶æ•°å­—ç»„æˆï¼Œç¬¬ä¸€ä¸ªåè¿›åˆ¶æ•°å­—å®šä¹‰äº†çŠ¶æ€ç çš„ç±»å‹ï¼Œåä¸¤ä¸ªæ•°å­—æ²¡æœ‰åˆ†ç±»çš„ä½œç”¨ã€‚HTTP çŠ¶æ€ç å…±åˆ†ä¸º 5 ç§ç±»å‹ï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">åˆ†ç±»</th>\n<th style=\"text-align:left\">åˆ†ç±»æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">1**</td>\n<td style=\"text-align:left\">ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œéœ€è¦è¯·æ±‚è€…ç»§ç»­æ‰§è¡Œæ“ä½œ</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">2**</td>\n<td style=\"text-align:left\">æˆåŠŸï¼Œæ“ä½œè¢«æˆåŠŸæ¥æ”¶å¹¶å¤„ç†</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">3**</td>\n<td style=\"text-align:left\">é‡å®šå‘ï¼Œéœ€è¦è¿›ä¸€æ­¥çš„æ“ä½œä»¥å®Œæˆè¯·æ±‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">4**</td>\n<td style=\"text-align:left\">å®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–æ— æ³•å®Œæˆè¯·æ±‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">5**</td>\n<td style=\"text-align:left\">æœåŠ¡å™¨é”™è¯¯ï¼ŒæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯</td>\n</tr>\n</tbody>\n</table>\n<p>éœ€è¦è®°ä½å¸¸è§çš„å‡ ç§å°±å¯ä»¥äº†ï¼Œå¦å¤–çš„å¯ä»¥<a href=\"http://tools.jb51.net/table/http_status_code\" target=\"_blank\" rel=\"noopener\">æŸ¥æ‰‹å†Œ</a>æ‰¾åˆ°éå¸¸è¯¦ç»†çš„è§£é‡Šã€‚</p>\n<ul>\n<li>200    OK    è¯·æ±‚æˆåŠŸã€‚ä¸€èˆ¬ç”¨äº GET ä¸ POST è¯·æ±‚ã€‚</li>\n<li>304    Not Modified    æœªä¿®æ”¹ã€‚æ‰€è¯·æ±‚çš„èµ„æºæœªä¿®æ”¹ï¼ŒæœåŠ¡å™¨è¿”å›æ­¤çŠ¶æ€ç æ—¶ï¼Œä¸ä¼šè¿”å›ä»»ä½•èµ„æºã€‚</li>\n<li>404    Not Found    æœåŠ¡å™¨æ— æ³•æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚æ‰¾åˆ°èµ„æºï¼ˆç½‘é¡µï¼‰ã€‚</li>\n<li>500    Internal Server Error    æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚ã€‚</li>\n</ul>\n<h4 id=\"HTTP-å“åº”ä¸åŒçš„æ•°æ®ç±»å‹\"><a href=\"#HTTP-å“åº”ä¸åŒçš„æ•°æ®ç±»å‹\" class=\"headerlink\" title=\"HTTP å“åº”ä¸åŒçš„æ•°æ®ç±»å‹\"></a>HTTP å“åº”ä¸åŒçš„æ•°æ®ç±»å‹</h4><p>æœåŠ¡å™¨å…·æœ‰è¿”å›å„ç§æ•°æ®çš„èƒ½åŠ›ï¼Œä½†æ˜¯è¿”å›æ•°æ®æ—¶ï¼Œåº”å‘Šè¯‰æµè§ˆå™¨è¿”å›çš„æ˜¯ä¸€ä¸ªä»€ä¹ˆæ–‡ä»¶ã€‚é€šè¿‡ <code>Content-Type</code> å¯ä»¥è®¾ç½®ï¼Œå“åº”çš„æ•°æ®ç±»å‹ã€‚æ¥çœ‹ä¸ªç®€å•çš„ä¾‹å­ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">http.createServer(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®å“åº”çš„çŠ¶æ€ç ï¼Œæ•°æ®ç±»å‹</span></span><br><span class=\"line\">    res.writeHeader(<span class=\"string\">'200'</span>, &#123;<span class=\"string\">'Content-Type'</span>: <span class=\"string\">'image/png;charset=utf-8'</span>&#125;);</span><br><span class=\"line\">    fs.readFile(<span class=\"string\">'./hello.png'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, result</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!err) &#123;</span><br><span class=\"line\">            res.write(result);</span><br><span class=\"line\">            res.end();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;).listen(<span class=\"number\">8080</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Server running at http://127.0.0.1:8080/'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>å¯ä»¥é€šè¿‡ <a href=\"https://github.com/broofa/node-mime\" target=\"_blank\" rel=\"noopener\">node-mime</a> æ¥æŸ¥è¯¢å„ç§æ–‡ä»¶çš„æ•°æ®ç±»å‹ã€‚å…ˆç”¨ npm å®‰è£…ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install mime --save</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> mime = <span class=\"built_in\">require</span>(<span class=\"string\">'mime'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(mime.lookup(<span class=\"string\">'test.txt'</span>));   <span class=\"comment\">// text/plain</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(mime.lookup(<span class=\"string\">'test.html'</span>));  <span class=\"comment\">// text/html</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(mime.lookup(<span class=\"string\">'test.css'</span>));   <span class=\"comment\">// text/css</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(mime.lookup(<span class=\"string\">'test.js'</span>));    <span class=\"comment\">// application/javascript</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(mime.lookup(<span class=\"string\">'test.mp3'</span>));   <span class=\"comment\">// audio/mpeg</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"Web-å®¢æˆ·ç«¯æ•°æ®ä¼ é€’\"><a href=\"#Web-å®¢æˆ·ç«¯æ•°æ®ä¼ é€’\" class=\"headerlink\" title=\"Web å®¢æˆ·ç«¯æ•°æ®ä¼ é€’\"></a>Web å®¢æˆ·ç«¯æ•°æ®ä¼ é€’</h3><h4 id=\"é€šè¿‡-URL-ä¼ é€’\"><a href=\"#é€šè¿‡-URL-ä¼ é€’\" class=\"headerlink\" title=\"é€šè¿‡ URL ä¼ é€’\"></a>é€šè¿‡ URL ä¼ é€’</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scheme://host.domain:port/path/filename?queryName=queryValue</span><br></pre></td></tr></table></figure>\n<p>å…¶ä¸­ <code>?queryName=queryValue</code> å°±æ˜¯é€šè¿‡ URL ä¼ é€’çš„æ•°æ®ï¼Œä¸¾ä¸ªä¾‹å­ï¼š<code>?usr=admin&amp;pwd=123</code> å°±è¡¨ç¤ºä¼ é€’ä¸€ä¸ª <code>usr</code> ä¸º <code>admin</code> ï¼Œ<code>pwd</code> ä¸º <code>123</code> çš„æ•°æ®åˆ°åå°ã€‚</p>\n<h4 id=\"é€šè¿‡è¡¨å•ä¼ é€’\"><a href=\"#é€šè¿‡è¡¨å•ä¼ é€’\" class=\"headerlink\" title=\"é€šè¿‡è¡¨å•ä¼ é€’\"></a>é€šè¿‡è¡¨å•ä¼ é€’</h4><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">\"/user\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"get\"</span>&gt;</span></span><br><span class=\"line\">    ç”¨æˆ·åï¼š<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"username\"</span>/&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></span><br><span class=\"line\">    å¯† ç ï¼š<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"password\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"submit\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"æäº¤\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>actionï¼šæäº¤åˆ°æœåŠ¡å™¨å¤„ç†ç¨‹åºçš„ url åœ°å€</li>\n<li>methodï¼šæäº¤æ–¹å¼æœ‰ <code>GET</code> å’Œ <code>POST</code></li>\n<li>GETï¼šä¼šæŠŠè¡¨å•æ•°æ®ä½œä¸º URL çš„ä¸€éƒ¨åˆ†æ˜¾ç¤ºåœ¨åœ°å€æ ä¸­ï¼ŒURL é•¿åº¦æœ‰é™åˆ¶ä¸èƒ½æäº¤å¤§é‡æ•°æ®</li>\n<li>POSTï¼šä¼šæŠŠè¡¨å•æ•°æ®æ”¾åˆ° HTTP è¯·æ±‚ä½“ä¸­ï¼Œç›¸å¯¹å®‰å…¨ï¼Œè€Œä¸”å¯ä»¥æäº¤å¤§é‡æ•°æ®ï¼ˆæ¯”å¦‚æ–‡ä»¶ï¼‰</li>\n</ul>\n<h4 id=\"æ•°æ®ç±»å‹\"><a href=\"#æ•°æ®ç±»å‹\" class=\"headerlink\" title=\"æ•°æ®ç±»å‹\"></a>æ•°æ®ç±»å‹</h4><p>å‰é¢è®²äº†ï¼Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œè¿”å›ç»™æµè§ˆå™¨æ•°æ®æ—¶ï¼Œä¼šé€šè¿‡ <code>Content-Type</code> æŒ‡å®šæ•°æ®ç±»å‹ï¼ŒåŒæ ·çš„ï¼Œæµè§ˆå™¨å‘æœåŠ¡å™¨ä¼ é€’æ•°æ®æ—¶ï¼Œä¹Ÿéœ€è¦æŒ‡å®šæ•°æ®ç±»å‹ã€‚åœ¨è¿™ä¸¤ç§æ•°æ®ä¼ é€’æ–¹å¼ä¸­ï¼Œè¡¨å•ä¼ é€’æ•°æ®æ—¶ï¼Œ<code>POST</code> æ–¹å¼ï¼Œå¿…é¡»æŒ‡å®šæ•°æ®ç±»å‹ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ã€‚<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">\"/user\"</span> <span class=\"attr\">method</span>=<span class=\"string\">\"post\"</span> <span class=\"attr\">enctype</span>=<span class=\"string\">\"multipart/form-data\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"file\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"submit\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"ä¸Šä¼ \"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n<p><code>enctype</code> æŒ‡å®š POST çš„æ•°æ®ç±»å‹ï¼Œé»˜è®¤æ˜¯ <code>application/x-www-form-urlencoded</code>ï¼Œä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œå°±éœ€è¦ <code>multipart/form-data</code> ç±»å‹äº†ã€‚</p>"},{"title":"Node.JS å­¦ä¹ ç¬”è®° [03] -- Buffer fs path","date":"2015-01-04T13:57:05.000Z","comments":0,"_content":"\nä»Šå¤©å­¦ä¹ äº† Node.js çš„ç¼“å†²åŒºï¼ˆBufferï¼‰ã€æ–‡ä»¶ç³»ç»Ÿï¼ˆfsï¼‰ã€è·¯å¾„ï¼ˆpathï¼‰æ¨¡å—ï¼Œæ„Ÿå—äº†ä¸€ä¸‹ Node.js ä½œä¸º JavaScript çš„æ‰©å±•åœ¨åå°æ–¹é¢çš„ä¸€äº›åŠŸèƒ½ã€‚ç»™æˆ‘æœ€å¤šçš„æ„Ÿå—æ˜¯ï¼Œå¤§é‡çš„å¼‚æ­¥ä»£ç å’Œå›è°ƒå‡½æ•°ï¼Œè®© Node.js æ€§èƒ½éå¸¸å‡ºè‰²ã€‚æ¥æ€»ç»“ä¸‹ä»Šå¤©å­¦ä¹ çš„å†…å®¹å§ã€‚\n<!-- more -->\n### ç¼“å†²åŒº (Buffer)\nJavaScript è¯­è¨€è‡ªèº«åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ã€‚ä½†åœ¨å¤„ç†åƒ TCP æµæˆ–æ–‡ä»¶æµæ—¶ï¼Œå¿…é¡»ä½¿ç”¨åˆ°äºŒè¿›åˆ¶æ•°æ®ã€‚å› æ­¤åœ¨ Node.js ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ª Buffer ç±»ï¼Œè¯¥ç±»ç”¨æ¥åˆ›å»ºä¸€ä¸ªä¸“é—¨å­˜æ”¾äºŒè¿›åˆ¶æ•°æ®çš„ç¼“å­˜åŒºã€‚æŒ‰ç…§æˆ‘çš„ç†è§£ï¼ŒBuffer ç±»å¾ˆåƒæˆ‘ä»¬çš„æ•´æ•°æ•°ç»„ã€‚æœ‰å¯¹åº”çš„ç´¢å¼•ï¼Œå­˜å‚¨æ–¹å¼ä¹Ÿå’Œæ•°ç»„ç±»ä¼¼ã€‚æ¥çœ‹çœ‹ Buffer ç±»æ˜¯å¦‚ä½•åˆ›å»ºçš„ã€‚\n#### åˆ›å»º Buffer ç±»\n```js\n// æ–¹æ³•1\n// åˆ›å»ºé•¿åº¦ä¸º10å­—èŠ‚çš„ Buffer ç±»\nvar buf = new Buffer(10); // æ„é€ å‡½æ•°ï¼Œæ³¨æ„è¿™ç§åˆ›å»ºå½¢å¼\n\n// æ–¹æ³•2\n// ç›´æ¥é€šè¿‡æ•°ç»„èµ‹å€¼çš„å½¢å¼åˆ›å»º\nvar buf2 = new Buffer([1,2,3,4,5]);\n\n// æ–¹æ³•3\n// é€šè¿‡å­—ç¬¦ä¸²æ¥åˆ›å»º\nvar buf3 = new Buffer('ifyour','utf-8');// utf-8 é»˜è®¤ç¼–ç ï¼Œå¯ä»¥çœç•¥\n```\nä»ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹å‡ºè¿™ä¸ª Buffer ç±»æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œé€šè¿‡å®ä¾‹åŒ–ä¸€ä¸ª Buffer å¯¹è±¡ï¼Œè®©å®ƒå…·æœ‰ä¸€äº› Buffer ç±»çš„æ–¹æ³•ï¼Œæ€»å¾—æ¥è¯´å¸¸ç”¨çš„æ–¹æ³•æœ‰ä¸‹é¢ä¸‰ç§ã€‚\n#### å†™å…¥ç¼“å†²åŒº\n```js\n// è¯­æ³•ï¼š  buf.write(string[, offset[, length]][, encoding])\n// å®ä¾‹ï¼š\n\nvar b4 = new Buffer(14);\nlen = b4.write('this is buffer');\nconsole.log('Buffer å†™å…¥äº† ' + len + ' å­—èŠ‚ï¼Œå†…å®¹ä¸ºï¼š' + b4.toString());\n// Buffer å†™å…¥äº† 14å­—èŠ‚ï¼Œå†…å®¹ä¸ºï¼šthis is buffer\n```\n#### ç¼“å†²åŒºè¯»å–\n```js\n// è¯­æ³•ï¼š buf.toString([encoding[, start[, end]]])\n// å®ä¾‹ï¼š\nbuf = new Buffer(26);\nfor (var i = 0 ; i < 26 ; i++) {\n  buf[i] = i + 97;\n}\n\nconsole.log( buf.toString('ascii'));       // è¾“å‡º: abcdefghijklmnopqrstuvwxyz\nconsole.log( buf.toString('ascii',0,5));   // è¾“å‡º: abcde\nconsole.log( buf.toString('utf8',0,5));    // è¾“å‡º: abcde\nconsole.log( buf.toString(undefined,0,5)); // ä½¿ç”¨ 'utf8' ç¼–ç , å¹¶è¾“å‡º: abcde\n```\n\n#### ç¼“å†²åŒºæ‹·è´\n```js\n//è¯­æ³•ï¼š buf.copy(targetBuffer[, targetStart[, sourceStart[, sourceEnd]]])\n//å®ä¾‹ï¼š\nvar b5 = new Buffer([1,2,3,4,5]);\nvar b6 = new  Buffer(5);\n\nb5.copy(b6,1,0,2);// æŠŠ b5 ä¸­çš„ç´¢å¼• 0-2 ï¼ˆä¸åŒ…æ‹¬2ï¼‰ çš„å€¼å¤åˆ¶ç»™ b6 çš„ç¬¬ 1 ä½ç½®\nconsole.log(b6);\n```\n### æ–‡ä»¶ç³»ç»Ÿ (fs)\nNode.js æ–‡ä»¶ç³»ç»Ÿï¼ˆfs æ¨¡å—ï¼‰æ¨¡å—ä¸­çš„æ–¹æ³•å‡æœ‰å¼‚æ­¥å’ŒåŒæ­¥ç‰ˆæœ¬ï¼Œä¾‹å¦‚è¯»å–æ–‡ä»¶å†…å®¹çš„å‡½æ•°æœ‰å¼‚æ­¥çš„ `fs.readFile()` å’ŒåŒæ­¥çš„ `fs.readFileSync()`ã€‚å¼‚æ­¥çš„æ–¹æ³•å‡½æ•°æœ€åä¸€ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°åŒ…å«äº†é”™è¯¯ä¿¡æ¯ (error)ã€‚ç›¸æ¯”åŒæ­¥ï¼Œå¼‚æ­¥æ•ˆç‡æ›´é«˜ï¼Œæ€§èƒ½æ›´å¥½ï¼Œæ²¡æœ‰é˜»å¡ï¼Œä½†æ˜¯åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œä¸€å®šè¦å¤„ç†å¥½å…ˆåé¡ºåºã€‚\n\n#### æ–‡ä»¶è¯»å†™æ–¹å¼\næ–‡ä»¶è¯»å–æ–¹å¼ï¼Œä¸¾ä¸ªç®€å•ä¾‹å­ï¼Œå¥½æ¯”å…ˆæŠŠæ•´ä¸ªæ•°æ®æºå®Œæ•´æ‹¿å‡ºæ¥æ”¾åˆ°å†…å­˜ä¸­ï¼Œå†ä½¿ç”¨ `writeFile` æ–¹æ³•æˆ– `writeFileSync` æ–¹æ³•å†™å…¥æ–‡ä»¶å†…å®¹ã€‚æ˜¾ç„¶ï¼Œå¦‚æœæ•°æ®æºéå¸¸å¤§ï¼ˆ10GBï¼‰ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œæ•ˆç‡å°±å¾ˆä½äº†ã€‚è¯´ä¸å®šå°±æ­»æœºäº†ã€‚:) è¿™æ—¶å€™ï¼Œå°±éœ€è¦ä¸‹ä¸€èŠ‚è®²åˆ°çš„ ***æµè¯»å–***ã€‚\n\n```Text\n// data.txt\nHello,Node.js!\n```\n```js\nvar fs = require(\"fs\");\n\n// å¼‚æ­¥è¯»å–\nfs.readFile('data.txt', function (err, data) {\n   if (err) {\n       return console.error(err);\n   }\n   console.log(\"å¼‚æ­¥è¯»å–: \" + data.toString());\n});\n\n// åŒæ­¥è¯»å–\nvar data = fs.readFileSync('data.txt');\nconsole.log(\"åŒæ­¥è¯»å–: \" + data.toString());\n\nconsole.log(\"ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚\");\n```\n\n```Text\nåŒæ­¥è¯»å–: Hello,Node.js!\nç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚\n\nå¼‚æ­¥è¯»å–: Hello,Node.js!\n```\n\n<div class=\"tip\">\nNode.js ä¸­ï¼Œå…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œåæ‰§è¡Œå¼‚æ­¥ä»£ç ï¼Œå¼‚æ­¥ä»£ç ä¼šå°†å›è°ƒå‡½æ•°æ”¾å…¥è°ƒç”¨ ***é˜Ÿåˆ—***ï¼Œä»¥ ***å…ˆè¿›å…ˆå‡º*** çš„å½¢å¼ä¾æ¬¡è°ƒç”¨ã€‚\n</div>\n\n```js\nvar fs = require('fs');\n// å¼‚æ­¥å†™å…¥\nfs.writeFile('./data/d2.txt','æˆ‘æ˜¯ä¸€æ¡æ•°æ®',function (err) {\n    if (!err){\n        console.log('æ–‡ä»¶å†™å…¥æˆåŠŸ');\n    }else {\n        console.log('å†™å…¥å¤±è´¥');\n    }\n});\n\n// åŒæ­¥å†™å…¥\nfs.writeFileSync('./data/d3','æˆ‘æ˜¯ä¸€æ¡æ•°æ®');\n\nvar data = fs.readFileSync('./data/d3');\n\nconsole.log(data.toString());// æˆ‘æ˜¯ä¸€æ¡æ•°æ®\n```\n\n\n#### æµè¯»å†™æ–¹å¼\nåº”ç”¨ç¨‹åºä¸­ï¼Œæµæ˜¯ä¸€ç»„æœ‰åºçš„ã€æœ‰èµ·ç‚¹å’Œç»ˆç‚¹çš„ ***å­—èŠ‚æ•°æ®çš„ä¼ è¾“æ–¹å¼***ã€‚åœ¨åº”ç”¨ç¨‹åºä¸­å„ç§å¯¹è±¡ä¹‹é—´äº¤æ¢ä¸ä¼ è¾“æ•°æ®çš„æ—¶å€™ï¼Œæ€»æ˜¯å…ˆå°†è¯¥å¯¹è±¡ä¸­æ‰€åŒ…å«çš„æ•°æ®è½¬æ¢ä¸ºå„ç§å½¢å¼çš„æµæ•°æ®ï¼ˆå³å­—èŠ‚æ•°æ®ï¼‰ï¼Œå†é€šè¿‡æµçš„ä¼ è¾“ï¼Œåˆ°è¾¾ç›®çš„å¯¹è±¡åå†å°†æµæ•°æ®è½¬æ¢ä¸ºè¯¥å¯¹è±¡ä¸­å¯ä»¥ä½¿ç”¨çš„æ•°æ®ã€‚\n\n```js\nvar fs = require('fs');\nvar data = '';\n// æµè¯»å–\nvar stream = fs.createReadStream('./data/d1.txt','utf-8');\nstream.on('data',function (result) {\n    data += result;\n});\n// data end äº‹ä»¶è¡¨ç¤ºè¿è´¯çš„è¡Œä¸ºï¼Œå­—èŠ‚æµéœ€è¦èµ·ç‚¹å’Œç»ˆç‚¹ã€‚\nstream.on('end',function () {\n    console.log(data);\n});\n\nstream.on('error',function (err) {\n    console.log(err.stack);\n});\n\n// æµå†™å…¥\nvar stream = fs.createWriteStream('./data/123.txt','utf-8');\nstream.write('hello','utf-8');\n\nstream.end();\n\nstream.on('finish',function () {// finish äº‹ä»¶è§¦å‘ï¼Œå¿…é¡»ç­‰ end äº‹ä»¶ç»“æŸæ‰å¯ä»¥\n   console.log('å†™å…¥å®Œæˆï¼');\n});\n\nstream.on('error', function(err){\n    console.log(err.stack);\n});\n```\n<div class=\"tip\">\næµè¯»å–ä¼šä¾æ¬¡è§¦å‘äº‹ä»¶ï¼š data -> end -> error ,æ¯ä¸ªäº‹ä»¶å‘ç”Ÿä¼šæœ‰å¯¹åº”çš„å›è°ƒå‡½æ•°å¤„ç†ã€‚\næµå†™å…¥ä¼šä¾æ¬¡è§¦å‘äº‹ä»¶ï¼š end -> finish -> error ,æ¯ä¸ªäº‹ä»¶å‘ç”Ÿä¼šæœ‰å¯¹åº”çš„å›è°ƒå‡½æ•°å¤„ç†ã€‚\n</div>\n\n#### ç®¡é“æµè¯»å†™\nç®¡é“(pipe) æä¾›äº†ä¸€ä¸ªè¾“å‡ºæµåˆ°è¾“å…¥æµçš„æœºåˆ¶ã€‚é€šå¸¸æˆ‘ä»¬ç”¨äºä»ä¸€ä¸ªæµä¸­è·å–æ•°æ®å¹¶å°†æ•°æ®ä¼ é€’åˆ°å¦å¤–ä¸€ä¸ªæµä¸­ã€‚é€šè¿‡ç®¡é“ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°å¤§æ–‡ä»¶æµå…¥å¦å¤–ä¸€ä¸ªæ–‡ä»¶çš„å¤åˆ¶è¿‡ç¨‹ã€‚\n```js\nvar fs = require('fs');\n\nvar readStream = fs.createReadStream('./data/d1.txt');\n\nvar writeStrem = fs.createWriteStream('./data/d3.txt');\n\nreadStream.pipe(writeStrem);// å®ç°äº† d1.txt åˆ° d3.txt çš„ä¼ è¾“è¿‡ç¨‹\n```\n\n#### é“¾å¼æµè¯»å†™\né“¾å¼æ˜¯é€šè¿‡è¿æ¥è¾“å‡ºæµåˆ°å¦å¤–ä¸€ä¸ªæµå¹¶åˆ›å»ºå¤šä¸ªå¯¹ä¸ªæµæ“ä½œé“¾çš„æœºåˆ¶ã€‚é“¾å¼æµä¸€èˆ¬ç”¨äºç®¡é“æ“ä½œã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ˜¯ç”¨ç®¡é“å’Œé“¾å¼æ¥å‹ç¼©å’Œè§£å‹æ–‡ä»¶ã€‚\n```js\n// compress.js\nvar fs = require('fs');\nvar zlib = require('zlib'); // å¼•å…¥å‹ç¼©æ¨¡å—\n\nfs.createReadStream('./data/123.txt')\n    .pipe(zlib.createGzip())\n    .pipe(fs.createWriteStream('./data/123.txt.gz'));// é“¾å¼æ“ä½œ\nconsole.log('æ–‡ä»¶å‹ç¼©å®Œæˆ');\n```\n#### æ–‡ä»¶ã€æ–‡ä»¶å¤¹åˆ é™¤\n```js\nvar fs = require(\"fs\");\n// æ–‡ä»¶ç›®å½•è¯»å–ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ–‡ä»¶åŠæ–‡ä»¶å¤¹\nfs.readdir(\"./testdir\",function(err,files){\n    if (!err){\n        console.log(files);// [ 'index.html', 'main.css', 'subdir' ]\n    }else {\n        console.log(err);\n    }\n});\n\n// æ–‡ä»¶åˆ é™¤\nconsole.log(\"å‡†å¤‡åˆ é™¤æ–‡ä»¶ï¼\");\nfs.unlink('./data/123.txt.gz', function(err) {\n    if (err) {\n        return err;\n    }\n    console.log(\"æ–‡ä»¶åˆ é™¤æˆåŠŸï¼\");\n});\n\n// ç©ºæ–‡ä»¶å¤¹åˆ é™¤\nfs.rmdir('./data',function (err) {\n    if (!err){\n        console.log('åˆ é™¤æˆåŠŸï¼');\n    }else {\n        console.log(err);\n    }\n});\n\n```\nä¸€ä¸ªé€’å½’åˆ é™¤çš„å°ç»ƒä¹ ï¼ŒæŠŠå‰é¢çš„ç»¼åˆè¿ç”¨ä¸€ä¸‹ã€‚\n```js\ndelDir('./testdir');\n\n// ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶å¤¹è·¯å¾„ï¼Œåˆ é™¤æ‰è¯¥æ–‡ä»¶å¤¹æ‰€æœ‰å†…å®¹\n// @param pathStr string ä¼ å…¥ä¸€ä¸ªè·¯å¾„\nfunction delDir(pathStr) {\n    var fs = require('fs');\n    if (fs.existsSync(pathStr)){\n        var files = fs.readdirSync(pathStr);\n        for (var i = 0; i < files.length; i++) {\n            var curPath = pathStr + '/' + files[i];\n            var stats = fs.statSync(curPath);\n            if (stats.isFile()){\n                fs.unlink(curPath);\n            }else if(stats.isDirectory()){\n                delDir(curPath);// é€’å½’è°ƒç”¨ï¼Œæœ€ç»ˆåˆ é™¤æ‰æ‰€æœ‰æ–‡ä»¶ï¼Œåªå‰©ç©ºç›®å½•\n            }\n        }\n        fs.rmdirSync(pathStr);// æ”¶å°¾ï¼Œåˆ æ‰ç©ºç›®å½•\n    }else {\n        console.log('æ–‡ä»¶å¤¹ä¸å­˜åœ¨');\n    }\n}\n```\n<div class=\"tip\">\næ–‡ä»¶ã€æ–‡ä»¶å¤¹çš„æ“ä½œï¼Œéƒ½æœ‰åŒæ­¥å’Œå¼‚æ­¥çš„ä»£ç ï¼Œæ¯”å¦‚ `fs.unlink()` å’Œ `fs.unlinkSync()`,é»˜è®¤éƒ½æ˜¯å¼‚æ­¥ä»£ç ï¼Œå¼‚æ­¥ä»£ç ä¼šè°ƒç”¨å›è°ƒå‡½æ•°è¿›è¡Œæ“ä½œï¼ŒåŒæ­¥ä»£ç ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿›è¡Œåç»­çš„æ“ä½œï¼Œå¯ä»¥è®¤çœŸè§‚å¯Ÿä¸Šé¢ä»£ç çš„åŒºåˆ«ã€‚ä½¿ç”¨å¼‚æ­¥ä»£ç çš„æ—¶å€™ï¼Œä¸€å®šæ³¨æ„æ‰§è¡Œé¡ºåºã€‚\n</div>\n\n\n### è·¯å¾„ (path)\npath æ¨¡å—åŒ…å«ä¸€å¥—ç”¨äº ***å¤„ç†å’Œè½¬æ¢æ–‡ä»¶è·¯å¾„*** çš„å·¥å…·é›†ï¼Œç”¨äºå¤„ç†ç›®å½•çš„å¯¹è±¡ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚ç”¨ Node.js çš„ path å‘½ä»¤ï¼Œä¸ä½¿ç”¨ Linux ä¸‹çš„ shell è„šæœ¬å‘½ä»¤ç›¸ä¼¼ã€‚å‡ ä¹æ‰€æœ‰çš„æ–¹æ³•ä»…å¯¹å­—ç¬¦ä¸²è¿›è¡Œè½¬æ¢ï¼Œæ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸ä¼šæ£€æŸ¥è·¯å¾„æ˜¯å¦çœŸå®æœ‰æ•ˆã€‚\n```js\n// å¼•å…¥pathå¯¹è±¡\nvar path = require('path');\n\n/*\n* æ ¼å¼åŒ–è·¯å¾„  path.normalize(p)\n* ç‰¹ç‚¹ï¼šå°†ä¸ç¬¦åˆè§„èŒƒçš„è·¯å¾„æ ¼å¼åŒ–ï¼Œç®€åŒ–å¼€å‘äººå‘˜ä¸­å¤„ç†å„ç§å¤æ‚çš„è·¯å¾„åˆ¤æ–­\n* */\npath.normalize('/foo/bar//baz/asdf/quux/..');\n// returns\n'/foo/bar/baz/asdf'\n\n/*\n* è·¯å¾„è”åˆ path.join([path1], [path2], [...])\n* ç‰¹ç‚¹ï¼šå°†æ‰€æœ‰åç§°ç”¨path.seqä¸²è”èµ·æ¥ï¼Œç„¶åç”¨normailzeæ ¼å¼åŒ–\n* */\npath.join('///foo', 'bar', '//baz/asdf', 'quux', '..');\n// returns\n'/foo/bar/baz/asdf'\n\n/*\n* è·¯å¾„å¯»èˆª path.resolve([from ...], to)\n* ç‰¹ç‚¹ï¼šç›¸å½“äºä¸æ–­çš„è°ƒç”¨ç³»ç»Ÿçš„cdå‘½ä»¤\n* */\npath.resolve('foo/bar', '/tmp/file/', '..', 'a/../subfile');\n// ç›¸å½“äºç»ˆç«¯å‘½ä»¤ï¼š\n// cd foo/bar\n// cd /tmp/file/\n// cd ..\n// cd a/../subfile\n// pwd\n\n/*\n* ç›¸å¯¹è·¯å¾„ path.relative(from, to)\n* ç‰¹ç‚¹ï¼šè¿”å›æŸä¸ªè·¯å¾„ä¸‹ç›¸å¯¹äºå¦ä¸€ä¸ªè·¯å¾„çš„ç›¸å¯¹ä½ç½®ä¸²ï¼Œ\n* ç›¸å½“äºï¼špath.resolve(from, path.relative(from, to)) == path.resolve(to)\n* */\n//ç®€å•ç†è§£ï¼š åœ°å€ä¸€æ‰§è¡Œæ€æ ·çš„ shell å‘½ä»¤ï¼Œåˆ°è¾¾åœ°å€äºŒ\npath.relative('/data/orandea/test/aaa', '/data/orandea/impl/bbb')\n// returns\n'../../impl/bbb'\n\n/*\n* æ–‡ä»¶å¤¹åç§° path.dirname(p)\n* ç‰¹ç‚¹ï¼šè¿”å›è·¯å¾„çš„ä¸Šçº§è·¯å¾„\n* */\npath.dirname('/foo/bar/baz/asdf/quux')\n// returns\n'/foo/bar/baz/asdf'\n\n/*\n* æ–‡ä»¶åç§° path.basename(p, [ext])\n* ç‰¹ç‚¹ï¼šè¿”å›æŒ‡å®šçš„æ–‡ä»¶åï¼Œè¿”å›ç»“æœå¯å»æ‰[ext]åç¼€å­—ç¬¦ä¸²\n* */\npath.basename('/foo/bar/baz/asdf/quux.html')\n// returns\n'quux.html'\n\npath.basename('/foo/bar/baz/asdf/quux.html', '.html')\n// returns\n'quux'\n\n/*\n* æ‰©å±•åç§° path.extname(p)\n* ç‰¹ç‚¹ï¼šè¿”å›æŒ‡å®šæ–‡ä»¶åçš„æ‰©å±•åç§°\n* */\npath.extname('index.html')\n// returns\n'.html'\n\npath.extname('index.')\n// returns\n'.'\n\npath.extname('index')\n// returns\n''\n\n/*\n* è·¯å¾„åˆ†éš”ç¬¦ path.sep\n* ç‰¹ç‚¹ï¼šè·å–æ–‡ä»¶è·¯å¾„çš„åˆ†éš”ç¬¦ï¼Œä¸»è¦æ˜¯ä¸æ“ä½œç³»ç»Ÿç›¸å…³\n* æ³¨æ„è°ƒç”¨æ–¹å¼\n* */\n'foo/bar/baz'.split(path.sep)\n// returns\n['foo', 'bar', 'baz']\n```\n","source":"_posts/Node.JS-å­¦ä¹ ç¬”è®°-[03]----Buffer-fs-path.md","raw":"---\ntitle: 'Node.JS å­¦ä¹ ç¬”è®° [03] -- Buffer fs path'\ndate: 2015-1-4 21:57:05\ntags:\ncomments: false\n---\n\nä»Šå¤©å­¦ä¹ äº† Node.js çš„ç¼“å†²åŒºï¼ˆBufferï¼‰ã€æ–‡ä»¶ç³»ç»Ÿï¼ˆfsï¼‰ã€è·¯å¾„ï¼ˆpathï¼‰æ¨¡å—ï¼Œæ„Ÿå—äº†ä¸€ä¸‹ Node.js ä½œä¸º JavaScript çš„æ‰©å±•åœ¨åå°æ–¹é¢çš„ä¸€äº›åŠŸèƒ½ã€‚ç»™æˆ‘æœ€å¤šçš„æ„Ÿå—æ˜¯ï¼Œå¤§é‡çš„å¼‚æ­¥ä»£ç å’Œå›è°ƒå‡½æ•°ï¼Œè®© Node.js æ€§èƒ½éå¸¸å‡ºè‰²ã€‚æ¥æ€»ç»“ä¸‹ä»Šå¤©å­¦ä¹ çš„å†…å®¹å§ã€‚\n<!-- more -->\n### ç¼“å†²åŒº (Buffer)\nJavaScript è¯­è¨€è‡ªèº«åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ã€‚ä½†åœ¨å¤„ç†åƒ TCP æµæˆ–æ–‡ä»¶æµæ—¶ï¼Œå¿…é¡»ä½¿ç”¨åˆ°äºŒè¿›åˆ¶æ•°æ®ã€‚å› æ­¤åœ¨ Node.js ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ª Buffer ç±»ï¼Œè¯¥ç±»ç”¨æ¥åˆ›å»ºä¸€ä¸ªä¸“é—¨å­˜æ”¾äºŒè¿›åˆ¶æ•°æ®çš„ç¼“å­˜åŒºã€‚æŒ‰ç…§æˆ‘çš„ç†è§£ï¼ŒBuffer ç±»å¾ˆåƒæˆ‘ä»¬çš„æ•´æ•°æ•°ç»„ã€‚æœ‰å¯¹åº”çš„ç´¢å¼•ï¼Œå­˜å‚¨æ–¹å¼ä¹Ÿå’Œæ•°ç»„ç±»ä¼¼ã€‚æ¥çœ‹çœ‹ Buffer ç±»æ˜¯å¦‚ä½•åˆ›å»ºçš„ã€‚\n#### åˆ›å»º Buffer ç±»\n```js\n// æ–¹æ³•1\n// åˆ›å»ºé•¿åº¦ä¸º10å­—èŠ‚çš„ Buffer ç±»\nvar buf = new Buffer(10); // æ„é€ å‡½æ•°ï¼Œæ³¨æ„è¿™ç§åˆ›å»ºå½¢å¼\n\n// æ–¹æ³•2\n// ç›´æ¥é€šè¿‡æ•°ç»„èµ‹å€¼çš„å½¢å¼åˆ›å»º\nvar buf2 = new Buffer([1,2,3,4,5]);\n\n// æ–¹æ³•3\n// é€šè¿‡å­—ç¬¦ä¸²æ¥åˆ›å»º\nvar buf3 = new Buffer('ifyour','utf-8');// utf-8 é»˜è®¤ç¼–ç ï¼Œå¯ä»¥çœç•¥\n```\nä»ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹å‡ºè¿™ä¸ª Buffer ç±»æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œé€šè¿‡å®ä¾‹åŒ–ä¸€ä¸ª Buffer å¯¹è±¡ï¼Œè®©å®ƒå…·æœ‰ä¸€äº› Buffer ç±»çš„æ–¹æ³•ï¼Œæ€»å¾—æ¥è¯´å¸¸ç”¨çš„æ–¹æ³•æœ‰ä¸‹é¢ä¸‰ç§ã€‚\n#### å†™å…¥ç¼“å†²åŒº\n```js\n// è¯­æ³•ï¼š  buf.write(string[, offset[, length]][, encoding])\n// å®ä¾‹ï¼š\n\nvar b4 = new Buffer(14);\nlen = b4.write('this is buffer');\nconsole.log('Buffer å†™å…¥äº† ' + len + ' å­—èŠ‚ï¼Œå†…å®¹ä¸ºï¼š' + b4.toString());\n// Buffer å†™å…¥äº† 14å­—èŠ‚ï¼Œå†…å®¹ä¸ºï¼šthis is buffer\n```\n#### ç¼“å†²åŒºè¯»å–\n```js\n// è¯­æ³•ï¼š buf.toString([encoding[, start[, end]]])\n// å®ä¾‹ï¼š\nbuf = new Buffer(26);\nfor (var i = 0 ; i < 26 ; i++) {\n  buf[i] = i + 97;\n}\n\nconsole.log( buf.toString('ascii'));       // è¾“å‡º: abcdefghijklmnopqrstuvwxyz\nconsole.log( buf.toString('ascii',0,5));   // è¾“å‡º: abcde\nconsole.log( buf.toString('utf8',0,5));    // è¾“å‡º: abcde\nconsole.log( buf.toString(undefined,0,5)); // ä½¿ç”¨ 'utf8' ç¼–ç , å¹¶è¾“å‡º: abcde\n```\n\n#### ç¼“å†²åŒºæ‹·è´\n```js\n//è¯­æ³•ï¼š buf.copy(targetBuffer[, targetStart[, sourceStart[, sourceEnd]]])\n//å®ä¾‹ï¼š\nvar b5 = new Buffer([1,2,3,4,5]);\nvar b6 = new  Buffer(5);\n\nb5.copy(b6,1,0,2);// æŠŠ b5 ä¸­çš„ç´¢å¼• 0-2 ï¼ˆä¸åŒ…æ‹¬2ï¼‰ çš„å€¼å¤åˆ¶ç»™ b6 çš„ç¬¬ 1 ä½ç½®\nconsole.log(b6);\n```\n### æ–‡ä»¶ç³»ç»Ÿ (fs)\nNode.js æ–‡ä»¶ç³»ç»Ÿï¼ˆfs æ¨¡å—ï¼‰æ¨¡å—ä¸­çš„æ–¹æ³•å‡æœ‰å¼‚æ­¥å’ŒåŒæ­¥ç‰ˆæœ¬ï¼Œä¾‹å¦‚è¯»å–æ–‡ä»¶å†…å®¹çš„å‡½æ•°æœ‰å¼‚æ­¥çš„ `fs.readFile()` å’ŒåŒæ­¥çš„ `fs.readFileSync()`ã€‚å¼‚æ­¥çš„æ–¹æ³•å‡½æ•°æœ€åä¸€ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°åŒ…å«äº†é”™è¯¯ä¿¡æ¯ (error)ã€‚ç›¸æ¯”åŒæ­¥ï¼Œå¼‚æ­¥æ•ˆç‡æ›´é«˜ï¼Œæ€§èƒ½æ›´å¥½ï¼Œæ²¡æœ‰é˜»å¡ï¼Œä½†æ˜¯åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œä¸€å®šè¦å¤„ç†å¥½å…ˆåé¡ºåºã€‚\n\n#### æ–‡ä»¶è¯»å†™æ–¹å¼\næ–‡ä»¶è¯»å–æ–¹å¼ï¼Œä¸¾ä¸ªç®€å•ä¾‹å­ï¼Œå¥½æ¯”å…ˆæŠŠæ•´ä¸ªæ•°æ®æºå®Œæ•´æ‹¿å‡ºæ¥æ”¾åˆ°å†…å­˜ä¸­ï¼Œå†ä½¿ç”¨ `writeFile` æ–¹æ³•æˆ– `writeFileSync` æ–¹æ³•å†™å…¥æ–‡ä»¶å†…å®¹ã€‚æ˜¾ç„¶ï¼Œå¦‚æœæ•°æ®æºéå¸¸å¤§ï¼ˆ10GBï¼‰ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œæ•ˆç‡å°±å¾ˆä½äº†ã€‚è¯´ä¸å®šå°±æ­»æœºäº†ã€‚:) è¿™æ—¶å€™ï¼Œå°±éœ€è¦ä¸‹ä¸€èŠ‚è®²åˆ°çš„ ***æµè¯»å–***ã€‚\n\n```Text\n// data.txt\nHello,Node.js!\n```\n```js\nvar fs = require(\"fs\");\n\n// å¼‚æ­¥è¯»å–\nfs.readFile('data.txt', function (err, data) {\n   if (err) {\n       return console.error(err);\n   }\n   console.log(\"å¼‚æ­¥è¯»å–: \" + data.toString());\n});\n\n// åŒæ­¥è¯»å–\nvar data = fs.readFileSync('data.txt');\nconsole.log(\"åŒæ­¥è¯»å–: \" + data.toString());\n\nconsole.log(\"ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚\");\n```\n\n```Text\nåŒæ­¥è¯»å–: Hello,Node.js!\nç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚\n\nå¼‚æ­¥è¯»å–: Hello,Node.js!\n```\n\n<div class=\"tip\">\nNode.js ä¸­ï¼Œå…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œåæ‰§è¡Œå¼‚æ­¥ä»£ç ï¼Œå¼‚æ­¥ä»£ç ä¼šå°†å›è°ƒå‡½æ•°æ”¾å…¥è°ƒç”¨ ***é˜Ÿåˆ—***ï¼Œä»¥ ***å…ˆè¿›å…ˆå‡º*** çš„å½¢å¼ä¾æ¬¡è°ƒç”¨ã€‚\n</div>\n\n```js\nvar fs = require('fs');\n// å¼‚æ­¥å†™å…¥\nfs.writeFile('./data/d2.txt','æˆ‘æ˜¯ä¸€æ¡æ•°æ®',function (err) {\n    if (!err){\n        console.log('æ–‡ä»¶å†™å…¥æˆåŠŸ');\n    }else {\n        console.log('å†™å…¥å¤±è´¥');\n    }\n});\n\n// åŒæ­¥å†™å…¥\nfs.writeFileSync('./data/d3','æˆ‘æ˜¯ä¸€æ¡æ•°æ®');\n\nvar data = fs.readFileSync('./data/d3');\n\nconsole.log(data.toString());// æˆ‘æ˜¯ä¸€æ¡æ•°æ®\n```\n\n\n#### æµè¯»å†™æ–¹å¼\nåº”ç”¨ç¨‹åºä¸­ï¼Œæµæ˜¯ä¸€ç»„æœ‰åºçš„ã€æœ‰èµ·ç‚¹å’Œç»ˆç‚¹çš„ ***å­—èŠ‚æ•°æ®çš„ä¼ è¾“æ–¹å¼***ã€‚åœ¨åº”ç”¨ç¨‹åºä¸­å„ç§å¯¹è±¡ä¹‹é—´äº¤æ¢ä¸ä¼ è¾“æ•°æ®çš„æ—¶å€™ï¼Œæ€»æ˜¯å…ˆå°†è¯¥å¯¹è±¡ä¸­æ‰€åŒ…å«çš„æ•°æ®è½¬æ¢ä¸ºå„ç§å½¢å¼çš„æµæ•°æ®ï¼ˆå³å­—èŠ‚æ•°æ®ï¼‰ï¼Œå†é€šè¿‡æµçš„ä¼ è¾“ï¼Œåˆ°è¾¾ç›®çš„å¯¹è±¡åå†å°†æµæ•°æ®è½¬æ¢ä¸ºè¯¥å¯¹è±¡ä¸­å¯ä»¥ä½¿ç”¨çš„æ•°æ®ã€‚\n\n```js\nvar fs = require('fs');\nvar data = '';\n// æµè¯»å–\nvar stream = fs.createReadStream('./data/d1.txt','utf-8');\nstream.on('data',function (result) {\n    data += result;\n});\n// data end äº‹ä»¶è¡¨ç¤ºè¿è´¯çš„è¡Œä¸ºï¼Œå­—èŠ‚æµéœ€è¦èµ·ç‚¹å’Œç»ˆç‚¹ã€‚\nstream.on('end',function () {\n    console.log(data);\n});\n\nstream.on('error',function (err) {\n    console.log(err.stack);\n});\n\n// æµå†™å…¥\nvar stream = fs.createWriteStream('./data/123.txt','utf-8');\nstream.write('hello','utf-8');\n\nstream.end();\n\nstream.on('finish',function () {// finish äº‹ä»¶è§¦å‘ï¼Œå¿…é¡»ç­‰ end äº‹ä»¶ç»“æŸæ‰å¯ä»¥\n   console.log('å†™å…¥å®Œæˆï¼');\n});\n\nstream.on('error', function(err){\n    console.log(err.stack);\n});\n```\n<div class=\"tip\">\næµè¯»å–ä¼šä¾æ¬¡è§¦å‘äº‹ä»¶ï¼š data -> end -> error ,æ¯ä¸ªäº‹ä»¶å‘ç”Ÿä¼šæœ‰å¯¹åº”çš„å›è°ƒå‡½æ•°å¤„ç†ã€‚\næµå†™å…¥ä¼šä¾æ¬¡è§¦å‘äº‹ä»¶ï¼š end -> finish -> error ,æ¯ä¸ªäº‹ä»¶å‘ç”Ÿä¼šæœ‰å¯¹åº”çš„å›è°ƒå‡½æ•°å¤„ç†ã€‚\n</div>\n\n#### ç®¡é“æµè¯»å†™\nç®¡é“(pipe) æä¾›äº†ä¸€ä¸ªè¾“å‡ºæµåˆ°è¾“å…¥æµçš„æœºåˆ¶ã€‚é€šå¸¸æˆ‘ä»¬ç”¨äºä»ä¸€ä¸ªæµä¸­è·å–æ•°æ®å¹¶å°†æ•°æ®ä¼ é€’åˆ°å¦å¤–ä¸€ä¸ªæµä¸­ã€‚é€šè¿‡ç®¡é“ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°å¤§æ–‡ä»¶æµå…¥å¦å¤–ä¸€ä¸ªæ–‡ä»¶çš„å¤åˆ¶è¿‡ç¨‹ã€‚\n```js\nvar fs = require('fs');\n\nvar readStream = fs.createReadStream('./data/d1.txt');\n\nvar writeStrem = fs.createWriteStream('./data/d3.txt');\n\nreadStream.pipe(writeStrem);// å®ç°äº† d1.txt åˆ° d3.txt çš„ä¼ è¾“è¿‡ç¨‹\n```\n\n#### é“¾å¼æµè¯»å†™\né“¾å¼æ˜¯é€šè¿‡è¿æ¥è¾“å‡ºæµåˆ°å¦å¤–ä¸€ä¸ªæµå¹¶åˆ›å»ºå¤šä¸ªå¯¹ä¸ªæµæ“ä½œé“¾çš„æœºåˆ¶ã€‚é“¾å¼æµä¸€èˆ¬ç”¨äºç®¡é“æ“ä½œã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ˜¯ç”¨ç®¡é“å’Œé“¾å¼æ¥å‹ç¼©å’Œè§£å‹æ–‡ä»¶ã€‚\n```js\n// compress.js\nvar fs = require('fs');\nvar zlib = require('zlib'); // å¼•å…¥å‹ç¼©æ¨¡å—\n\nfs.createReadStream('./data/123.txt')\n    .pipe(zlib.createGzip())\n    .pipe(fs.createWriteStream('./data/123.txt.gz'));// é“¾å¼æ“ä½œ\nconsole.log('æ–‡ä»¶å‹ç¼©å®Œæˆ');\n```\n#### æ–‡ä»¶ã€æ–‡ä»¶å¤¹åˆ é™¤\n```js\nvar fs = require(\"fs\");\n// æ–‡ä»¶ç›®å½•è¯»å–ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ–‡ä»¶åŠæ–‡ä»¶å¤¹\nfs.readdir(\"./testdir\",function(err,files){\n    if (!err){\n        console.log(files);// [ 'index.html', 'main.css', 'subdir' ]\n    }else {\n        console.log(err);\n    }\n});\n\n// æ–‡ä»¶åˆ é™¤\nconsole.log(\"å‡†å¤‡åˆ é™¤æ–‡ä»¶ï¼\");\nfs.unlink('./data/123.txt.gz', function(err) {\n    if (err) {\n        return err;\n    }\n    console.log(\"æ–‡ä»¶åˆ é™¤æˆåŠŸï¼\");\n});\n\n// ç©ºæ–‡ä»¶å¤¹åˆ é™¤\nfs.rmdir('./data',function (err) {\n    if (!err){\n        console.log('åˆ é™¤æˆåŠŸï¼');\n    }else {\n        console.log(err);\n    }\n});\n\n```\nä¸€ä¸ªé€’å½’åˆ é™¤çš„å°ç»ƒä¹ ï¼ŒæŠŠå‰é¢çš„ç»¼åˆè¿ç”¨ä¸€ä¸‹ã€‚\n```js\ndelDir('./testdir');\n\n// ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶å¤¹è·¯å¾„ï¼Œåˆ é™¤æ‰è¯¥æ–‡ä»¶å¤¹æ‰€æœ‰å†…å®¹\n// @param pathStr string ä¼ å…¥ä¸€ä¸ªè·¯å¾„\nfunction delDir(pathStr) {\n    var fs = require('fs');\n    if (fs.existsSync(pathStr)){\n        var files = fs.readdirSync(pathStr);\n        for (var i = 0; i < files.length; i++) {\n            var curPath = pathStr + '/' + files[i];\n            var stats = fs.statSync(curPath);\n            if (stats.isFile()){\n                fs.unlink(curPath);\n            }else if(stats.isDirectory()){\n                delDir(curPath);// é€’å½’è°ƒç”¨ï¼Œæœ€ç»ˆåˆ é™¤æ‰æ‰€æœ‰æ–‡ä»¶ï¼Œåªå‰©ç©ºç›®å½•\n            }\n        }\n        fs.rmdirSync(pathStr);// æ”¶å°¾ï¼Œåˆ æ‰ç©ºç›®å½•\n    }else {\n        console.log('æ–‡ä»¶å¤¹ä¸å­˜åœ¨');\n    }\n}\n```\n<div class=\"tip\">\næ–‡ä»¶ã€æ–‡ä»¶å¤¹çš„æ“ä½œï¼Œéƒ½æœ‰åŒæ­¥å’Œå¼‚æ­¥çš„ä»£ç ï¼Œæ¯”å¦‚ `fs.unlink()` å’Œ `fs.unlinkSync()`,é»˜è®¤éƒ½æ˜¯å¼‚æ­¥ä»£ç ï¼Œå¼‚æ­¥ä»£ç ä¼šè°ƒç”¨å›è°ƒå‡½æ•°è¿›è¡Œæ“ä½œï¼ŒåŒæ­¥ä»£ç ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿›è¡Œåç»­çš„æ“ä½œï¼Œå¯ä»¥è®¤çœŸè§‚å¯Ÿä¸Šé¢ä»£ç çš„åŒºåˆ«ã€‚ä½¿ç”¨å¼‚æ­¥ä»£ç çš„æ—¶å€™ï¼Œä¸€å®šæ³¨æ„æ‰§è¡Œé¡ºåºã€‚\n</div>\n\n\n### è·¯å¾„ (path)\npath æ¨¡å—åŒ…å«ä¸€å¥—ç”¨äº ***å¤„ç†å’Œè½¬æ¢æ–‡ä»¶è·¯å¾„*** çš„å·¥å…·é›†ï¼Œç”¨äºå¤„ç†ç›®å½•çš„å¯¹è±¡ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚ç”¨ Node.js çš„ path å‘½ä»¤ï¼Œä¸ä½¿ç”¨ Linux ä¸‹çš„ shell è„šæœ¬å‘½ä»¤ç›¸ä¼¼ã€‚å‡ ä¹æ‰€æœ‰çš„æ–¹æ³•ä»…å¯¹å­—ç¬¦ä¸²è¿›è¡Œè½¬æ¢ï¼Œæ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸ä¼šæ£€æŸ¥è·¯å¾„æ˜¯å¦çœŸå®æœ‰æ•ˆã€‚\n```js\n// å¼•å…¥pathå¯¹è±¡\nvar path = require('path');\n\n/*\n* æ ¼å¼åŒ–è·¯å¾„  path.normalize(p)\n* ç‰¹ç‚¹ï¼šå°†ä¸ç¬¦åˆè§„èŒƒçš„è·¯å¾„æ ¼å¼åŒ–ï¼Œç®€åŒ–å¼€å‘äººå‘˜ä¸­å¤„ç†å„ç§å¤æ‚çš„è·¯å¾„åˆ¤æ–­\n* */\npath.normalize('/foo/bar//baz/asdf/quux/..');\n// returns\n'/foo/bar/baz/asdf'\n\n/*\n* è·¯å¾„è”åˆ path.join([path1], [path2], [...])\n* ç‰¹ç‚¹ï¼šå°†æ‰€æœ‰åç§°ç”¨path.seqä¸²è”èµ·æ¥ï¼Œç„¶åç”¨normailzeæ ¼å¼åŒ–\n* */\npath.join('///foo', 'bar', '//baz/asdf', 'quux', '..');\n// returns\n'/foo/bar/baz/asdf'\n\n/*\n* è·¯å¾„å¯»èˆª path.resolve([from ...], to)\n* ç‰¹ç‚¹ï¼šç›¸å½“äºä¸æ–­çš„è°ƒç”¨ç³»ç»Ÿçš„cdå‘½ä»¤\n* */\npath.resolve('foo/bar', '/tmp/file/', '..', 'a/../subfile');\n// ç›¸å½“äºç»ˆç«¯å‘½ä»¤ï¼š\n// cd foo/bar\n// cd /tmp/file/\n// cd ..\n// cd a/../subfile\n// pwd\n\n/*\n* ç›¸å¯¹è·¯å¾„ path.relative(from, to)\n* ç‰¹ç‚¹ï¼šè¿”å›æŸä¸ªè·¯å¾„ä¸‹ç›¸å¯¹äºå¦ä¸€ä¸ªè·¯å¾„çš„ç›¸å¯¹ä½ç½®ä¸²ï¼Œ\n* ç›¸å½“äºï¼špath.resolve(from, path.relative(from, to)) == path.resolve(to)\n* */\n//ç®€å•ç†è§£ï¼š åœ°å€ä¸€æ‰§è¡Œæ€æ ·çš„ shell å‘½ä»¤ï¼Œåˆ°è¾¾åœ°å€äºŒ\npath.relative('/data/orandea/test/aaa', '/data/orandea/impl/bbb')\n// returns\n'../../impl/bbb'\n\n/*\n* æ–‡ä»¶å¤¹åç§° path.dirname(p)\n* ç‰¹ç‚¹ï¼šè¿”å›è·¯å¾„çš„ä¸Šçº§è·¯å¾„\n* */\npath.dirname('/foo/bar/baz/asdf/quux')\n// returns\n'/foo/bar/baz/asdf'\n\n/*\n* æ–‡ä»¶åç§° path.basename(p, [ext])\n* ç‰¹ç‚¹ï¼šè¿”å›æŒ‡å®šçš„æ–‡ä»¶åï¼Œè¿”å›ç»“æœå¯å»æ‰[ext]åç¼€å­—ç¬¦ä¸²\n* */\npath.basename('/foo/bar/baz/asdf/quux.html')\n// returns\n'quux.html'\n\npath.basename('/foo/bar/baz/asdf/quux.html', '.html')\n// returns\n'quux'\n\n/*\n* æ‰©å±•åç§° path.extname(p)\n* ç‰¹ç‚¹ï¼šè¿”å›æŒ‡å®šæ–‡ä»¶åçš„æ‰©å±•åç§°\n* */\npath.extname('index.html')\n// returns\n'.html'\n\npath.extname('index.')\n// returns\n'.'\n\npath.extname('index')\n// returns\n''\n\n/*\n* è·¯å¾„åˆ†éš”ç¬¦ path.sep\n* ç‰¹ç‚¹ï¼šè·å–æ–‡ä»¶è·¯å¾„çš„åˆ†éš”ç¬¦ï¼Œä¸»è¦æ˜¯ä¸æ“ä½œç³»ç»Ÿç›¸å…³\n* æ³¨æ„è°ƒç”¨æ–¹å¼\n* */\n'foo/bar/baz'.split(path.sep)\n// returns\n['foo', 'bar', 'baz']\n```\n","slug":"Node.JS-å­¦ä¹ ç¬”è®°-[03]----Buffer-fs-path","published":1,"updated":"2018-12-26T16:01:04.000Z","layout":"post","photos":[],"link":"","_id":"ck3v60jtf000er9q99ta0j9h9","content":"<p>ä»Šå¤©å­¦ä¹ äº† Node.js çš„ç¼“å†²åŒºï¼ˆBufferï¼‰ã€æ–‡ä»¶ç³»ç»Ÿï¼ˆfsï¼‰ã€è·¯å¾„ï¼ˆpathï¼‰æ¨¡å—ï¼Œæ„Ÿå—äº†ä¸€ä¸‹ Node.js ä½œä¸º JavaScript çš„æ‰©å±•åœ¨åå°æ–¹é¢çš„ä¸€äº›åŠŸèƒ½ã€‚ç»™æˆ‘æœ€å¤šçš„æ„Ÿå—æ˜¯ï¼Œå¤§é‡çš„å¼‚æ­¥ä»£ç å’Œå›è°ƒå‡½æ•°ï¼Œè®© Node.js æ€§èƒ½éå¸¸å‡ºè‰²ã€‚æ¥æ€»ç»“ä¸‹ä»Šå¤©å­¦ä¹ çš„å†…å®¹å§ã€‚<br><a id=\"more\"></a></p>\n<h3 id=\"ç¼“å†²åŒº-Buffer\"><a href=\"#ç¼“å†²åŒº-Buffer\" class=\"headerlink\" title=\"ç¼“å†²åŒº (Buffer)\"></a>ç¼“å†²åŒº (Buffer)</h3><p>JavaScript è¯­è¨€è‡ªèº«åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ã€‚ä½†åœ¨å¤„ç†åƒ TCP æµæˆ–æ–‡ä»¶æµæ—¶ï¼Œå¿…é¡»ä½¿ç”¨åˆ°äºŒè¿›åˆ¶æ•°æ®ã€‚å› æ­¤åœ¨ Node.js ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ª Buffer ç±»ï¼Œè¯¥ç±»ç”¨æ¥åˆ›å»ºä¸€ä¸ªä¸“é—¨å­˜æ”¾äºŒè¿›åˆ¶æ•°æ®çš„ç¼“å­˜åŒºã€‚æŒ‰ç…§æˆ‘çš„ç†è§£ï¼ŒBuffer ç±»å¾ˆåƒæˆ‘ä»¬çš„æ•´æ•°æ•°ç»„ã€‚æœ‰å¯¹åº”çš„ç´¢å¼•ï¼Œå­˜å‚¨æ–¹å¼ä¹Ÿå’Œæ•°ç»„ç±»ä¼¼ã€‚æ¥çœ‹çœ‹ Buffer ç±»æ˜¯å¦‚ä½•åˆ›å»ºçš„ã€‚</p>\n<h4 id=\"åˆ›å»º-Buffer-ç±»\"><a href=\"#åˆ›å»º-Buffer-ç±»\" class=\"headerlink\" title=\"åˆ›å»º Buffer ç±»\"></a>åˆ›å»º Buffer ç±»</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ–¹æ³•1</span></span><br><span class=\"line\"><span class=\"comment\">// åˆ›å»ºé•¿åº¦ä¸º10å­—èŠ‚çš„ Buffer ç±»</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> buf = <span class=\"keyword\">new</span> Buffer(<span class=\"number\">10</span>); <span class=\"comment\">// æ„é€ å‡½æ•°ï¼Œæ³¨æ„è¿™ç§åˆ›å»ºå½¢å¼</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–¹æ³•2</span></span><br><span class=\"line\"><span class=\"comment\">// ç›´æ¥é€šè¿‡æ•°ç»„èµ‹å€¼çš„å½¢å¼åˆ›å»º</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> buf2 = <span class=\"keyword\">new</span> Buffer([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>]);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–¹æ³•3</span></span><br><span class=\"line\"><span class=\"comment\">// é€šè¿‡å­—ç¬¦ä¸²æ¥åˆ›å»º</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> buf3 = <span class=\"keyword\">new</span> Buffer(<span class=\"string\">'ifyour'</span>,<span class=\"string\">'utf-8'</span>);<span class=\"comment\">// utf-8 é»˜è®¤ç¼–ç ï¼Œå¯ä»¥çœç•¥</span></span><br></pre></td></tr></table></figure>\n<p>ä»ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹å‡ºè¿™ä¸ª Buffer ç±»æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œé€šè¿‡å®ä¾‹åŒ–ä¸€ä¸ª Buffer å¯¹è±¡ï¼Œè®©å®ƒå…·æœ‰ä¸€äº› Buffer ç±»çš„æ–¹æ³•ï¼Œæ€»å¾—æ¥è¯´å¸¸ç”¨çš„æ–¹æ³•æœ‰ä¸‹é¢ä¸‰ç§ã€‚</p>\n<h4 id=\"å†™å…¥ç¼“å†²åŒº\"><a href=\"#å†™å…¥ç¼“å†²åŒº\" class=\"headerlink\" title=\"å†™å…¥ç¼“å†²åŒº\"></a>å†™å…¥ç¼“å†²åŒº</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¯­æ³•ï¼š  buf.write(string[, offset[, length]][, encoding])</span></span><br><span class=\"line\"><span class=\"comment\">// å®ä¾‹ï¼š</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> b4 = <span class=\"keyword\">new</span> Buffer(<span class=\"number\">14</span>);</span><br><span class=\"line\">len = b4.write(<span class=\"string\">'this is buffer'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'Buffer å†™å…¥äº† '</span> + len + <span class=\"string\">' å­—èŠ‚ï¼Œå†…å®¹ä¸ºï¼š'</span> + b4.toString());</span><br><span class=\"line\"><span class=\"comment\">// Buffer å†™å…¥äº† 14å­—èŠ‚ï¼Œå†…å®¹ä¸ºï¼šthis is buffer</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"ç¼“å†²åŒºè¯»å–\"><a href=\"#ç¼“å†²åŒºè¯»å–\" class=\"headerlink\" title=\"ç¼“å†²åŒºè¯»å–\"></a>ç¼“å†²åŒºè¯»å–</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¯­æ³•ï¼š buf.toString([encoding[, start[, end]]])</span></span><br><span class=\"line\"><span class=\"comment\">// å®ä¾‹ï¼š</span></span><br><span class=\"line\">buf = <span class=\"keyword\">new</span> Buffer(<span class=\"number\">26</span>);</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span> ; i &lt; <span class=\"number\">26</span> ; i++) &#123;</span><br><span class=\"line\">  buf[i] = i + <span class=\"number\">97</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( buf.toString(<span class=\"string\">'ascii'</span>));       <span class=\"comment\">// è¾“å‡º: abcdefghijklmnopqrstuvwxyz</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( buf.toString(<span class=\"string\">'ascii'</span>,<span class=\"number\">0</span>,<span class=\"number\">5</span>));   <span class=\"comment\">// è¾“å‡º: abcde</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( buf.toString(<span class=\"string\">'utf8'</span>,<span class=\"number\">0</span>,<span class=\"number\">5</span>));    <span class=\"comment\">// è¾“å‡º: abcde</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( buf.toString(<span class=\"literal\">undefined</span>,<span class=\"number\">0</span>,<span class=\"number\">5</span>)); <span class=\"comment\">// ä½¿ç”¨ 'utf8' ç¼–ç , å¹¶è¾“å‡º: abcde</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"ç¼“å†²åŒºæ‹·è´\"><a href=\"#ç¼“å†²åŒºæ‹·è´\" class=\"headerlink\" title=\"ç¼“å†²åŒºæ‹·è´\"></a>ç¼“å†²åŒºæ‹·è´</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//è¯­æ³•ï¼š buf.copy(targetBuffer[, targetStart[, sourceStart[, sourceEnd]]])</span></span><br><span class=\"line\"><span class=\"comment\">//å®ä¾‹ï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> b5 = <span class=\"keyword\">new</span> Buffer([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>]);</span><br><span class=\"line\"><span class=\"keyword\">var</span> b6 = <span class=\"keyword\">new</span>  Buffer(<span class=\"number\">5</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">b5.copy(b6,<span class=\"number\">1</span>,<span class=\"number\">0</span>,<span class=\"number\">2</span>);<span class=\"comment\">// æŠŠ b5 ä¸­çš„ç´¢å¼• 0-2 ï¼ˆä¸åŒ…æ‹¬2ï¼‰ çš„å€¼å¤åˆ¶ç»™ b6 çš„ç¬¬ 1 ä½ç½®</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(b6);</span><br></pre></td></tr></table></figure>\n<h3 id=\"æ–‡ä»¶ç³»ç»Ÿ-fs\"><a href=\"#æ–‡ä»¶ç³»ç»Ÿ-fs\" class=\"headerlink\" title=\"æ–‡ä»¶ç³»ç»Ÿ (fs)\"></a>æ–‡ä»¶ç³»ç»Ÿ (fs)</h3><p>Node.js æ–‡ä»¶ç³»ç»Ÿï¼ˆfs æ¨¡å—ï¼‰æ¨¡å—ä¸­çš„æ–¹æ³•å‡æœ‰å¼‚æ­¥å’ŒåŒæ­¥ç‰ˆæœ¬ï¼Œä¾‹å¦‚è¯»å–æ–‡ä»¶å†…å®¹çš„å‡½æ•°æœ‰å¼‚æ­¥çš„ <code>fs.readFile()</code> å’ŒåŒæ­¥çš„ <code>fs.readFileSync()</code>ã€‚å¼‚æ­¥çš„æ–¹æ³•å‡½æ•°æœ€åä¸€ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°åŒ…å«äº†é”™è¯¯ä¿¡æ¯ (error)ã€‚ç›¸æ¯”åŒæ­¥ï¼Œå¼‚æ­¥æ•ˆç‡æ›´é«˜ï¼Œæ€§èƒ½æ›´å¥½ï¼Œæ²¡æœ‰é˜»å¡ï¼Œä½†æ˜¯åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œä¸€å®šè¦å¤„ç†å¥½å…ˆåé¡ºåºã€‚</p>\n<h4 id=\"æ–‡ä»¶è¯»å†™æ–¹å¼\"><a href=\"#æ–‡ä»¶è¯»å†™æ–¹å¼\" class=\"headerlink\" title=\"æ–‡ä»¶è¯»å†™æ–¹å¼\"></a>æ–‡ä»¶è¯»å†™æ–¹å¼</h4><p>æ–‡ä»¶è¯»å–æ–¹å¼ï¼Œä¸¾ä¸ªç®€å•ä¾‹å­ï¼Œå¥½æ¯”å…ˆæŠŠæ•´ä¸ªæ•°æ®æºå®Œæ•´æ‹¿å‡ºæ¥æ”¾åˆ°å†…å­˜ä¸­ï¼Œå†ä½¿ç”¨ <code>writeFile</code> æ–¹æ³•æˆ– <code>writeFileSync</code> æ–¹æ³•å†™å…¥æ–‡ä»¶å†…å®¹ã€‚æ˜¾ç„¶ï¼Œå¦‚æœæ•°æ®æºéå¸¸å¤§ï¼ˆ10GBï¼‰ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œæ•ˆç‡å°±å¾ˆä½äº†ã€‚è¯´ä¸å®šå°±æ­»æœºäº†ã€‚:) è¿™æ—¶å€™ï¼Œå°±éœ€è¦ä¸‹ä¸€èŠ‚è®²åˆ°çš„ <strong><em>æµè¯»å–</em></strong>ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// data.txt</span><br><span class=\"line\">Hello,Node.js!</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">\"fs\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å¼‚æ­¥è¯»å–</span></span><br><span class=\"line\">fs.readFile(<span class=\"string\">'data.txt'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, data</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.error(err);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">\"å¼‚æ­¥è¯»å–: \"</span> + data.toString());</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åŒæ­¥è¯»å–</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> data = fs.readFileSync(<span class=\"string\">'data.txt'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"åŒæ­¥è¯»å–: \"</span> + data.toString());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚\"</span>);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">åŒæ­¥è¯»å–: Hello,Node.js!</span><br><span class=\"line\">ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">å¼‚æ­¥è¯»å–: Hello,Node.js!</span><br></pre></td></tr></table></figure>\n<div class=\"tip\"><br>Node.js ä¸­ï¼Œå…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œåæ‰§è¡Œå¼‚æ­¥ä»£ç ï¼Œå¼‚æ­¥ä»£ç ä¼šå°†å›è°ƒå‡½æ•°æ”¾å…¥è°ƒç”¨ <strong><em>é˜Ÿåˆ—</em></strong>ï¼Œä»¥ <strong><em>å…ˆè¿›å…ˆå‡º</em></strong> çš„å½¢å¼ä¾æ¬¡è°ƒç”¨ã€‚<br></div>\n\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"comment\">// å¼‚æ­¥å†™å…¥</span></span><br><span class=\"line\">fs.writeFile(<span class=\"string\">'./data/d2.txt'</span>,<span class=\"string\">'æˆ‘æ˜¯ä¸€æ¡æ•°æ®'</span>,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!err)&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'æ–‡ä»¶å†™å…¥æˆåŠŸ'</span>);</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'å†™å…¥å¤±è´¥'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åŒæ­¥å†™å…¥</span></span><br><span class=\"line\">fs.writeFileSync(<span class=\"string\">'./data/d3'</span>,<span class=\"string\">'æˆ‘æ˜¯ä¸€æ¡æ•°æ®'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> data = fs.readFileSync(<span class=\"string\">'./data/d3'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(data.toString());<span class=\"comment\">// æˆ‘æ˜¯ä¸€æ¡æ•°æ®</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"æµè¯»å†™æ–¹å¼\"><a href=\"#æµè¯»å†™æ–¹å¼\" class=\"headerlink\" title=\"æµè¯»å†™æ–¹å¼\"></a>æµè¯»å†™æ–¹å¼</h4><p>åº”ç”¨ç¨‹åºä¸­ï¼Œæµæ˜¯ä¸€ç»„æœ‰åºçš„ã€æœ‰èµ·ç‚¹å’Œç»ˆç‚¹çš„ <strong><em>å­—èŠ‚æ•°æ®çš„ä¼ è¾“æ–¹å¼</em></strong>ã€‚åœ¨åº”ç”¨ç¨‹åºä¸­å„ç§å¯¹è±¡ä¹‹é—´äº¤æ¢ä¸ä¼ è¾“æ•°æ®çš„æ—¶å€™ï¼Œæ€»æ˜¯å…ˆå°†è¯¥å¯¹è±¡ä¸­æ‰€åŒ…å«çš„æ•°æ®è½¬æ¢ä¸ºå„ç§å½¢å¼çš„æµæ•°æ®ï¼ˆå³å­—èŠ‚æ•°æ®ï¼‰ï¼Œå†é€šè¿‡æµçš„ä¼ è¾“ï¼Œåˆ°è¾¾ç›®çš„å¯¹è±¡åå†å°†æµæ•°æ®è½¬æ¢ä¸ºè¯¥å¯¹è±¡ä¸­å¯ä»¥ä½¿ç”¨çš„æ•°æ®ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"string\">''</span>;</span><br><span class=\"line\"><span class=\"comment\">// æµè¯»å–</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> stream = fs.createReadStream(<span class=\"string\">'./data/d1.txt'</span>,<span class=\"string\">'utf-8'</span>);</span><br><span class=\"line\">stream.on(<span class=\"string\">'data'</span>,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</span><br><span class=\"line\">    data += result;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// data end äº‹ä»¶è¡¨ç¤ºè¿è´¯çš„è¡Œä¸ºï¼Œå­—èŠ‚æµéœ€è¦èµ·ç‚¹å’Œç»ˆç‚¹ã€‚</span></span><br><span class=\"line\">stream.on(<span class=\"string\">'end'</span>,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">stream.on(<span class=\"string\">'error'</span>,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err.stack);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æµå†™å…¥</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> stream = fs.createWriteStream(<span class=\"string\">'./data/123.txt'</span>,<span class=\"string\">'utf-8'</span>);</span><br><span class=\"line\">stream.write(<span class=\"string\">'hello'</span>,<span class=\"string\">'utf-8'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">stream.end();</span><br><span class=\"line\"></span><br><span class=\"line\">stream.on(<span class=\"string\">'finish'</span>,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;<span class=\"comment\">// finish äº‹ä»¶è§¦å‘ï¼Œå¿…é¡»ç­‰ end äº‹ä»¶ç»“æŸæ‰å¯ä»¥</span></span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'å†™å…¥å®Œæˆï¼'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">stream.on(<span class=\"string\">'error'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err.stack);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<div class=\"tip\"><br>æµè¯»å–ä¼šä¾æ¬¡è§¦å‘äº‹ä»¶ï¼š data -&gt; end -&gt; error ,æ¯ä¸ªäº‹ä»¶å‘ç”Ÿä¼šæœ‰å¯¹åº”çš„å›è°ƒå‡½æ•°å¤„ç†ã€‚<br>æµå†™å…¥ä¼šä¾æ¬¡è§¦å‘äº‹ä»¶ï¼š end -&gt; finish -&gt; error ,æ¯ä¸ªäº‹ä»¶å‘ç”Ÿä¼šæœ‰å¯¹åº”çš„å›è°ƒå‡½æ•°å¤„ç†ã€‚<br></div>\n\n<h4 id=\"ç®¡é“æµè¯»å†™\"><a href=\"#ç®¡é“æµè¯»å†™\" class=\"headerlink\" title=\"ç®¡é“æµè¯»å†™\"></a>ç®¡é“æµè¯»å†™</h4><p>ç®¡é“(pipe) æä¾›äº†ä¸€ä¸ªè¾“å‡ºæµåˆ°è¾“å…¥æµçš„æœºåˆ¶ã€‚é€šå¸¸æˆ‘ä»¬ç”¨äºä»ä¸€ä¸ªæµä¸­è·å–æ•°æ®å¹¶å°†æ•°æ®ä¼ é€’åˆ°å¦å¤–ä¸€ä¸ªæµä¸­ã€‚é€šè¿‡ç®¡é“ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°å¤§æ–‡ä»¶æµå…¥å¦å¤–ä¸€ä¸ªæ–‡ä»¶çš„å¤åˆ¶è¿‡ç¨‹ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> readStream = fs.createReadStream(<span class=\"string\">'./data/d1.txt'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> writeStrem = fs.createWriteStream(<span class=\"string\">'./data/d3.txt'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">readStream.pipe(writeStrem);<span class=\"comment\">// å®ç°äº† d1.txt åˆ° d3.txt çš„ä¼ è¾“è¿‡ç¨‹</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"é“¾å¼æµè¯»å†™\"><a href=\"#é“¾å¼æµè¯»å†™\" class=\"headerlink\" title=\"é“¾å¼æµè¯»å†™\"></a>é“¾å¼æµè¯»å†™</h4><p>é“¾å¼æ˜¯é€šè¿‡è¿æ¥è¾“å‡ºæµåˆ°å¦å¤–ä¸€ä¸ªæµå¹¶åˆ›å»ºå¤šä¸ªå¯¹ä¸ªæµæ“ä½œé“¾çš„æœºåˆ¶ã€‚é“¾å¼æµä¸€èˆ¬ç”¨äºç®¡é“æ“ä½œã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ˜¯ç”¨ç®¡é“å’Œé“¾å¼æ¥å‹ç¼©å’Œè§£å‹æ–‡ä»¶ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// compress.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> zlib = <span class=\"built_in\">require</span>(<span class=\"string\">'zlib'</span>); <span class=\"comment\">// å¼•å…¥å‹ç¼©æ¨¡å—</span></span><br><span class=\"line\"></span><br><span class=\"line\">fs.createReadStream(<span class=\"string\">'./data/123.txt'</span>)</span><br><span class=\"line\">    .pipe(zlib.createGzip())</span><br><span class=\"line\">    .pipe(fs.createWriteStream(<span class=\"string\">'./data/123.txt.gz'</span>));<span class=\"comment\">// é“¾å¼æ“ä½œ</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'æ–‡ä»¶å‹ç¼©å®Œæˆ'</span>);</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"æ–‡ä»¶ã€æ–‡ä»¶å¤¹åˆ é™¤\"><a href=\"#æ–‡ä»¶ã€æ–‡ä»¶å¤¹åˆ é™¤\" class=\"headerlink\" title=\"æ–‡ä»¶ã€æ–‡ä»¶å¤¹åˆ é™¤\"></a>æ–‡ä»¶ã€æ–‡ä»¶å¤¹åˆ é™¤</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">\"fs\"</span>);</span><br><span class=\"line\"><span class=\"comment\">// æ–‡ä»¶ç›®å½•è¯»å–ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ–‡ä»¶åŠæ–‡ä»¶å¤¹</span></span><br><span class=\"line\">fs.readdir(<span class=\"string\">\"./testdir\"</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err,files</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!err)&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(files);<span class=\"comment\">// [ 'index.html', 'main.css', 'subdir' ]</span></span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–‡ä»¶åˆ é™¤</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"å‡†å¤‡åˆ é™¤æ–‡ä»¶ï¼\"</span>);</span><br><span class=\"line\">fs.unlink(<span class=\"string\">'./data/123.txt.gz'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> err;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"æ–‡ä»¶åˆ é™¤æˆåŠŸï¼\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç©ºæ–‡ä»¶å¤¹åˆ é™¤</span></span><br><span class=\"line\">fs.rmdir(<span class=\"string\">'./data'</span>,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!err)&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'åˆ é™¤æˆåŠŸï¼'</span>);</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>ä¸€ä¸ªé€’å½’åˆ é™¤çš„å°ç»ƒä¹ ï¼ŒæŠŠå‰é¢çš„ç»¼åˆè¿ç”¨ä¸€ä¸‹ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">delDir(<span class=\"string\">'./testdir'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶å¤¹è·¯å¾„ï¼Œåˆ é™¤æ‰è¯¥æ–‡ä»¶å¤¹æ‰€æœ‰å†…å®¹</span></span><br><span class=\"line\"><span class=\"comment\">// @param pathStr string ä¼ å…¥ä¸€ä¸ªè·¯å¾„</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">delDir</span>(<span class=\"params\">pathStr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (fs.existsSync(pathStr))&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> files = fs.readdirSync(pathStr);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; files.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> curPath = pathStr + <span class=\"string\">'/'</span> + files[i];</span><br><span class=\"line\">            <span class=\"keyword\">var</span> stats = fs.statSync(curPath);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (stats.isFile())&#123;</span><br><span class=\"line\">                fs.unlink(curPath);</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(stats.isDirectory())&#123;</span><br><span class=\"line\">                delDir(curPath);<span class=\"comment\">// é€’å½’è°ƒç”¨ï¼Œæœ€ç»ˆåˆ é™¤æ‰æ‰€æœ‰æ–‡ä»¶ï¼Œåªå‰©ç©ºç›®å½•</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        fs.rmdirSync(pathStr);<span class=\"comment\">// æ”¶å°¾ï¼Œåˆ æ‰ç©ºç›®å½•</span></span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'æ–‡ä»¶å¤¹ä¸å­˜åœ¨'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<div class=\"tip\"><br>æ–‡ä»¶ã€æ–‡ä»¶å¤¹çš„æ“ä½œï¼Œéƒ½æœ‰åŒæ­¥å’Œå¼‚æ­¥çš„ä»£ç ï¼Œæ¯”å¦‚ <code>fs.unlink()</code> å’Œ <code>fs.unlinkSync()</code>,é»˜è®¤éƒ½æ˜¯å¼‚æ­¥ä»£ç ï¼Œå¼‚æ­¥ä»£ç ä¼šè°ƒç”¨å›è°ƒå‡½æ•°è¿›è¡Œæ“ä½œï¼ŒåŒæ­¥ä»£ç ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿›è¡Œåç»­çš„æ“ä½œï¼Œå¯ä»¥è®¤çœŸè§‚å¯Ÿä¸Šé¢ä»£ç çš„åŒºåˆ«ã€‚ä½¿ç”¨å¼‚æ­¥ä»£ç çš„æ—¶å€™ï¼Œä¸€å®šæ³¨æ„æ‰§è¡Œé¡ºåºã€‚<br></div>\n\n\n<h3 id=\"è·¯å¾„-path\"><a href=\"#è·¯å¾„-path\" class=\"headerlink\" title=\"è·¯å¾„ (path)\"></a>è·¯å¾„ (path)</h3><p>path æ¨¡å—åŒ…å«ä¸€å¥—ç”¨äº <strong><em>å¤„ç†å’Œè½¬æ¢æ–‡ä»¶è·¯å¾„</em></strong> çš„å·¥å…·é›†ï¼Œç”¨äºå¤„ç†ç›®å½•çš„å¯¹è±¡ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚ç”¨ Node.js çš„ path å‘½ä»¤ï¼Œä¸ä½¿ç”¨ Linux ä¸‹çš„ shell è„šæœ¬å‘½ä»¤ç›¸ä¼¼ã€‚å‡ ä¹æ‰€æœ‰çš„æ–¹æ³•ä»…å¯¹å­—ç¬¦ä¸²è¿›è¡Œè½¬æ¢ï¼Œæ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸ä¼šæ£€æŸ¥è·¯å¾„æ˜¯å¦çœŸå®æœ‰æ•ˆã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¼•å…¥pathå¯¹è±¡</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* æ ¼å¼åŒ–è·¯å¾„  path.normalize(p)</span></span><br><span class=\"line\"><span class=\"comment\">* ç‰¹ç‚¹ï¼šå°†ä¸ç¬¦åˆè§„èŒƒçš„è·¯å¾„æ ¼å¼åŒ–ï¼Œç®€åŒ–å¼€å‘äººå‘˜ä¸­å¤„ç†å„ç§å¤æ‚çš„è·¯å¾„åˆ¤æ–­</span></span><br><span class=\"line\"><span class=\"comment\">* */</span></span><br><span class=\"line\">path.normalize(<span class=\"string\">'/foo/bar//baz/asdf/quux/..'</span>);</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">'/foo/bar/baz/asdf'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* è·¯å¾„è”åˆ path.join([path1], [path2], [...])</span></span><br><span class=\"line\"><span class=\"comment\">* ç‰¹ç‚¹ï¼šå°†æ‰€æœ‰åç§°ç”¨path.seqä¸²è”èµ·æ¥ï¼Œç„¶åç”¨normailzeæ ¼å¼åŒ–</span></span><br><span class=\"line\"><span class=\"comment\">* */</span></span><br><span class=\"line\">path.join(<span class=\"string\">'///foo'</span>, <span class=\"string\">'bar'</span>, <span class=\"string\">'//baz/asdf'</span>, <span class=\"string\">'quux'</span>, <span class=\"string\">'..'</span>);</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">'/foo/bar/baz/asdf'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* è·¯å¾„å¯»èˆª path.resolve([from ...], to)</span></span><br><span class=\"line\"><span class=\"comment\">* ç‰¹ç‚¹ï¼šç›¸å½“äºä¸æ–­çš„è°ƒç”¨ç³»ç»Ÿçš„cdå‘½ä»¤</span></span><br><span class=\"line\"><span class=\"comment\">* */</span></span><br><span class=\"line\">path.resolve(<span class=\"string\">'foo/bar'</span>, <span class=\"string\">'/tmp/file/'</span>, <span class=\"string\">'..'</span>, <span class=\"string\">'a/../subfile'</span>);</span><br><span class=\"line\"><span class=\"comment\">// ç›¸å½“äºç»ˆç«¯å‘½ä»¤ï¼š</span></span><br><span class=\"line\"><span class=\"comment\">// cd foo/bar</span></span><br><span class=\"line\"><span class=\"comment\">// cd /tmp/file/</span></span><br><span class=\"line\"><span class=\"comment\">// cd ..</span></span><br><span class=\"line\"><span class=\"comment\">// cd a/../subfile</span></span><br><span class=\"line\"><span class=\"comment\">// pwd</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* ç›¸å¯¹è·¯å¾„ path.relative(from, to)</span></span><br><span class=\"line\"><span class=\"comment\">* ç‰¹ç‚¹ï¼šè¿”å›æŸä¸ªè·¯å¾„ä¸‹ç›¸å¯¹äºå¦ä¸€ä¸ªè·¯å¾„çš„ç›¸å¯¹ä½ç½®ä¸²ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">* ç›¸å½“äºï¼špath.resolve(from, path.relative(from, to)) == path.resolve(to)</span></span><br><span class=\"line\"><span class=\"comment\">* */</span></span><br><span class=\"line\"><span class=\"comment\">//ç®€å•ç†è§£ï¼š åœ°å€ä¸€æ‰§è¡Œæ€æ ·çš„ shell å‘½ä»¤ï¼Œåˆ°è¾¾åœ°å€äºŒ</span></span><br><span class=\"line\">path.relative(<span class=\"string\">'/data/orandea/test/aaa'</span>, <span class=\"string\">'/data/orandea/impl/bbb'</span>)</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">'../../impl/bbb'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* æ–‡ä»¶å¤¹åç§° path.dirname(p)</span></span><br><span class=\"line\"><span class=\"comment\">* ç‰¹ç‚¹ï¼šè¿”å›è·¯å¾„çš„ä¸Šçº§è·¯å¾„</span></span><br><span class=\"line\"><span class=\"comment\">* */</span></span><br><span class=\"line\">path.dirname(<span class=\"string\">'/foo/bar/baz/asdf/quux'</span>)</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">'/foo/bar/baz/asdf'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* æ–‡ä»¶åç§° path.basename(p, [ext])</span></span><br><span class=\"line\"><span class=\"comment\">* ç‰¹ç‚¹ï¼šè¿”å›æŒ‡å®šçš„æ–‡ä»¶åï¼Œè¿”å›ç»“æœå¯å»æ‰[ext]åç¼€å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">* */</span></span><br><span class=\"line\">path.basename(<span class=\"string\">'/foo/bar/baz/asdf/quux.html'</span>)</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">'quux.html'</span></span><br><span class=\"line\"></span><br><span class=\"line\">path.basename(<span class=\"string\">'/foo/bar/baz/asdf/quux.html'</span>, <span class=\"string\">'.html'</span>)</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">'quux'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* æ‰©å±•åç§° path.extname(p)</span></span><br><span class=\"line\"><span class=\"comment\">* ç‰¹ç‚¹ï¼šè¿”å›æŒ‡å®šæ–‡ä»¶åçš„æ‰©å±•åç§°</span></span><br><span class=\"line\"><span class=\"comment\">* */</span></span><br><span class=\"line\">path.extname(<span class=\"string\">'index.html'</span>)</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">'.html'</span></span><br><span class=\"line\"></span><br><span class=\"line\">path.extname(<span class=\"string\">'index.'</span>)</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">'.'</span></span><br><span class=\"line\"></span><br><span class=\"line\">path.extname(<span class=\"string\">'index'</span>)</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">''</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* è·¯å¾„åˆ†éš”ç¬¦ path.sep</span></span><br><span class=\"line\"><span class=\"comment\">* ç‰¹ç‚¹ï¼šè·å–æ–‡ä»¶è·¯å¾„çš„åˆ†éš”ç¬¦ï¼Œä¸»è¦æ˜¯ä¸æ“ä½œç³»ç»Ÿç›¸å…³</span></span><br><span class=\"line\"><span class=\"comment\">* æ³¨æ„è°ƒç”¨æ–¹å¼</span></span><br><span class=\"line\"><span class=\"comment\">* */</span></span><br><span class=\"line\"><span class=\"string\">'foo/bar/baz'</span>.split(path.sep)</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\">[<span class=\"string\">'foo'</span>, <span class=\"string\">'bar'</span>, <span class=\"string\">'baz'</span>]</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"<p>ä»Šå¤©å­¦ä¹ äº† Node.js çš„ç¼“å†²åŒºï¼ˆBufferï¼‰ã€æ–‡ä»¶ç³»ç»Ÿï¼ˆfsï¼‰ã€è·¯å¾„ï¼ˆpathï¼‰æ¨¡å—ï¼Œæ„Ÿå—äº†ä¸€ä¸‹ Node.js ä½œä¸º JavaScript çš„æ‰©å±•åœ¨åå°æ–¹é¢çš„ä¸€äº›åŠŸèƒ½ã€‚ç»™æˆ‘æœ€å¤šçš„æ„Ÿå—æ˜¯ï¼Œå¤§é‡çš„å¼‚æ­¥ä»£ç å’Œå›è°ƒå‡½æ•°ï¼Œè®© Node.js æ€§èƒ½éå¸¸å‡ºè‰²ã€‚æ¥æ€»ç»“ä¸‹ä»Šå¤©å­¦ä¹ çš„å†…å®¹å§ã€‚<br>","more":"</p>\n<h3 id=\"ç¼“å†²åŒº-Buffer\"><a href=\"#ç¼“å†²åŒº-Buffer\" class=\"headerlink\" title=\"ç¼“å†²åŒº (Buffer)\"></a>ç¼“å†²åŒº (Buffer)</h3><p>JavaScript è¯­è¨€è‡ªèº«åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ã€‚ä½†åœ¨å¤„ç†åƒ TCP æµæˆ–æ–‡ä»¶æµæ—¶ï¼Œå¿…é¡»ä½¿ç”¨åˆ°äºŒè¿›åˆ¶æ•°æ®ã€‚å› æ­¤åœ¨ Node.js ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ª Buffer ç±»ï¼Œè¯¥ç±»ç”¨æ¥åˆ›å»ºä¸€ä¸ªä¸“é—¨å­˜æ”¾äºŒè¿›åˆ¶æ•°æ®çš„ç¼“å­˜åŒºã€‚æŒ‰ç…§æˆ‘çš„ç†è§£ï¼ŒBuffer ç±»å¾ˆåƒæˆ‘ä»¬çš„æ•´æ•°æ•°ç»„ã€‚æœ‰å¯¹åº”çš„ç´¢å¼•ï¼Œå­˜å‚¨æ–¹å¼ä¹Ÿå’Œæ•°ç»„ç±»ä¼¼ã€‚æ¥çœ‹çœ‹ Buffer ç±»æ˜¯å¦‚ä½•åˆ›å»ºçš„ã€‚</p>\n<h4 id=\"åˆ›å»º-Buffer-ç±»\"><a href=\"#åˆ›å»º-Buffer-ç±»\" class=\"headerlink\" title=\"åˆ›å»º Buffer ç±»\"></a>åˆ›å»º Buffer ç±»</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ–¹æ³•1</span></span><br><span class=\"line\"><span class=\"comment\">// åˆ›å»ºé•¿åº¦ä¸º10å­—èŠ‚çš„ Buffer ç±»</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> buf = <span class=\"keyword\">new</span> Buffer(<span class=\"number\">10</span>); <span class=\"comment\">// æ„é€ å‡½æ•°ï¼Œæ³¨æ„è¿™ç§åˆ›å»ºå½¢å¼</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–¹æ³•2</span></span><br><span class=\"line\"><span class=\"comment\">// ç›´æ¥é€šè¿‡æ•°ç»„èµ‹å€¼çš„å½¢å¼åˆ›å»º</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> buf2 = <span class=\"keyword\">new</span> Buffer([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>]);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–¹æ³•3</span></span><br><span class=\"line\"><span class=\"comment\">// é€šè¿‡å­—ç¬¦ä¸²æ¥åˆ›å»º</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> buf3 = <span class=\"keyword\">new</span> Buffer(<span class=\"string\">'ifyour'</span>,<span class=\"string\">'utf-8'</span>);<span class=\"comment\">// utf-8 é»˜è®¤ç¼–ç ï¼Œå¯ä»¥çœç•¥</span></span><br></pre></td></tr></table></figure>\n<p>ä»ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹å‡ºè¿™ä¸ª Buffer ç±»æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œé€šè¿‡å®ä¾‹åŒ–ä¸€ä¸ª Buffer å¯¹è±¡ï¼Œè®©å®ƒå…·æœ‰ä¸€äº› Buffer ç±»çš„æ–¹æ³•ï¼Œæ€»å¾—æ¥è¯´å¸¸ç”¨çš„æ–¹æ³•æœ‰ä¸‹é¢ä¸‰ç§ã€‚</p>\n<h4 id=\"å†™å…¥ç¼“å†²åŒº\"><a href=\"#å†™å…¥ç¼“å†²åŒº\" class=\"headerlink\" title=\"å†™å…¥ç¼“å†²åŒº\"></a>å†™å…¥ç¼“å†²åŒº</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¯­æ³•ï¼š  buf.write(string[, offset[, length]][, encoding])</span></span><br><span class=\"line\"><span class=\"comment\">// å®ä¾‹ï¼š</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> b4 = <span class=\"keyword\">new</span> Buffer(<span class=\"number\">14</span>);</span><br><span class=\"line\">len = b4.write(<span class=\"string\">'this is buffer'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'Buffer å†™å…¥äº† '</span> + len + <span class=\"string\">' å­—èŠ‚ï¼Œå†…å®¹ä¸ºï¼š'</span> + b4.toString());</span><br><span class=\"line\"><span class=\"comment\">// Buffer å†™å…¥äº† 14å­—èŠ‚ï¼Œå†…å®¹ä¸ºï¼šthis is buffer</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"ç¼“å†²åŒºè¯»å–\"><a href=\"#ç¼“å†²åŒºè¯»å–\" class=\"headerlink\" title=\"ç¼“å†²åŒºè¯»å–\"></a>ç¼“å†²åŒºè¯»å–</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¯­æ³•ï¼š buf.toString([encoding[, start[, end]]])</span></span><br><span class=\"line\"><span class=\"comment\">// å®ä¾‹ï¼š</span></span><br><span class=\"line\">buf = <span class=\"keyword\">new</span> Buffer(<span class=\"number\">26</span>);</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span> ; i &lt; <span class=\"number\">26</span> ; i++) &#123;</span><br><span class=\"line\">  buf[i] = i + <span class=\"number\">97</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( buf.toString(<span class=\"string\">'ascii'</span>));       <span class=\"comment\">// è¾“å‡º: abcdefghijklmnopqrstuvwxyz</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( buf.toString(<span class=\"string\">'ascii'</span>,<span class=\"number\">0</span>,<span class=\"number\">5</span>));   <span class=\"comment\">// è¾“å‡º: abcde</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( buf.toString(<span class=\"string\">'utf8'</span>,<span class=\"number\">0</span>,<span class=\"number\">5</span>));    <span class=\"comment\">// è¾“å‡º: abcde</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log( buf.toString(<span class=\"literal\">undefined</span>,<span class=\"number\">0</span>,<span class=\"number\">5</span>)); <span class=\"comment\">// ä½¿ç”¨ 'utf8' ç¼–ç , å¹¶è¾“å‡º: abcde</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"ç¼“å†²åŒºæ‹·è´\"><a href=\"#ç¼“å†²åŒºæ‹·è´\" class=\"headerlink\" title=\"ç¼“å†²åŒºæ‹·è´\"></a>ç¼“å†²åŒºæ‹·è´</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//è¯­æ³•ï¼š buf.copy(targetBuffer[, targetStart[, sourceStart[, sourceEnd]]])</span></span><br><span class=\"line\"><span class=\"comment\">//å®ä¾‹ï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> b5 = <span class=\"keyword\">new</span> Buffer([<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>]);</span><br><span class=\"line\"><span class=\"keyword\">var</span> b6 = <span class=\"keyword\">new</span>  Buffer(<span class=\"number\">5</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">b5.copy(b6,<span class=\"number\">1</span>,<span class=\"number\">0</span>,<span class=\"number\">2</span>);<span class=\"comment\">// æŠŠ b5 ä¸­çš„ç´¢å¼• 0-2 ï¼ˆä¸åŒ…æ‹¬2ï¼‰ çš„å€¼å¤åˆ¶ç»™ b6 çš„ç¬¬ 1 ä½ç½®</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(b6);</span><br></pre></td></tr></table></figure>\n<h3 id=\"æ–‡ä»¶ç³»ç»Ÿ-fs\"><a href=\"#æ–‡ä»¶ç³»ç»Ÿ-fs\" class=\"headerlink\" title=\"æ–‡ä»¶ç³»ç»Ÿ (fs)\"></a>æ–‡ä»¶ç³»ç»Ÿ (fs)</h3><p>Node.js æ–‡ä»¶ç³»ç»Ÿï¼ˆfs æ¨¡å—ï¼‰æ¨¡å—ä¸­çš„æ–¹æ³•å‡æœ‰å¼‚æ­¥å’ŒåŒæ­¥ç‰ˆæœ¬ï¼Œä¾‹å¦‚è¯»å–æ–‡ä»¶å†…å®¹çš„å‡½æ•°æœ‰å¼‚æ­¥çš„ <code>fs.readFile()</code> å’ŒåŒæ­¥çš„ <code>fs.readFileSync()</code>ã€‚å¼‚æ­¥çš„æ–¹æ³•å‡½æ•°æœ€åä¸€ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°åŒ…å«äº†é”™è¯¯ä¿¡æ¯ (error)ã€‚ç›¸æ¯”åŒæ­¥ï¼Œå¼‚æ­¥æ•ˆç‡æ›´é«˜ï¼Œæ€§èƒ½æ›´å¥½ï¼Œæ²¡æœ‰é˜»å¡ï¼Œä½†æ˜¯åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œä¸€å®šè¦å¤„ç†å¥½å…ˆåé¡ºåºã€‚</p>\n<h4 id=\"æ–‡ä»¶è¯»å†™æ–¹å¼\"><a href=\"#æ–‡ä»¶è¯»å†™æ–¹å¼\" class=\"headerlink\" title=\"æ–‡ä»¶è¯»å†™æ–¹å¼\"></a>æ–‡ä»¶è¯»å†™æ–¹å¼</h4><p>æ–‡ä»¶è¯»å–æ–¹å¼ï¼Œä¸¾ä¸ªç®€å•ä¾‹å­ï¼Œå¥½æ¯”å…ˆæŠŠæ•´ä¸ªæ•°æ®æºå®Œæ•´æ‹¿å‡ºæ¥æ”¾åˆ°å†…å­˜ä¸­ï¼Œå†ä½¿ç”¨ <code>writeFile</code> æ–¹æ³•æˆ– <code>writeFileSync</code> æ–¹æ³•å†™å…¥æ–‡ä»¶å†…å®¹ã€‚æ˜¾ç„¶ï¼Œå¦‚æœæ•°æ®æºéå¸¸å¤§ï¼ˆ10GBï¼‰ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œæ•ˆç‡å°±å¾ˆä½äº†ã€‚è¯´ä¸å®šå°±æ­»æœºäº†ã€‚:) è¿™æ—¶å€™ï¼Œå°±éœ€è¦ä¸‹ä¸€èŠ‚è®²åˆ°çš„ <strong><em>æµè¯»å–</em></strong>ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// data.txt</span><br><span class=\"line\">Hello,Node.js!</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">\"fs\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å¼‚æ­¥è¯»å–</span></span><br><span class=\"line\">fs.readFile(<span class=\"string\">'data.txt'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, data</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.error(err);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">\"å¼‚æ­¥è¯»å–: \"</span> + data.toString());</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åŒæ­¥è¯»å–</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> data = fs.readFileSync(<span class=\"string\">'data.txt'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"åŒæ­¥è¯»å–: \"</span> + data.toString());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚\"</span>);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">åŒæ­¥è¯»å–: Hello,Node.js!</span><br><span class=\"line\">ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\">å¼‚æ­¥è¯»å–: Hello,Node.js!</span><br></pre></td></tr></table></figure>\n<div class=\"tip\"><br>Node.js ä¸­ï¼Œå…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œåæ‰§è¡Œå¼‚æ­¥ä»£ç ï¼Œå¼‚æ­¥ä»£ç ä¼šå°†å›è°ƒå‡½æ•°æ”¾å…¥è°ƒç”¨ <strong><em>é˜Ÿåˆ—</em></strong>ï¼Œä»¥ <strong><em>å…ˆè¿›å…ˆå‡º</em></strong> çš„å½¢å¼ä¾æ¬¡è°ƒç”¨ã€‚<br></div>\n\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"comment\">// å¼‚æ­¥å†™å…¥</span></span><br><span class=\"line\">fs.writeFile(<span class=\"string\">'./data/d2.txt'</span>,<span class=\"string\">'æˆ‘æ˜¯ä¸€æ¡æ•°æ®'</span>,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!err)&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'æ–‡ä»¶å†™å…¥æˆåŠŸ'</span>);</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'å†™å…¥å¤±è´¥'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åŒæ­¥å†™å…¥</span></span><br><span class=\"line\">fs.writeFileSync(<span class=\"string\">'./data/d3'</span>,<span class=\"string\">'æˆ‘æ˜¯ä¸€æ¡æ•°æ®'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> data = fs.readFileSync(<span class=\"string\">'./data/d3'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(data.toString());<span class=\"comment\">// æˆ‘æ˜¯ä¸€æ¡æ•°æ®</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"æµè¯»å†™æ–¹å¼\"><a href=\"#æµè¯»å†™æ–¹å¼\" class=\"headerlink\" title=\"æµè¯»å†™æ–¹å¼\"></a>æµè¯»å†™æ–¹å¼</h4><p>åº”ç”¨ç¨‹åºä¸­ï¼Œæµæ˜¯ä¸€ç»„æœ‰åºçš„ã€æœ‰èµ·ç‚¹å’Œç»ˆç‚¹çš„ <strong><em>å­—èŠ‚æ•°æ®çš„ä¼ è¾“æ–¹å¼</em></strong>ã€‚åœ¨åº”ç”¨ç¨‹åºä¸­å„ç§å¯¹è±¡ä¹‹é—´äº¤æ¢ä¸ä¼ è¾“æ•°æ®çš„æ—¶å€™ï¼Œæ€»æ˜¯å…ˆå°†è¯¥å¯¹è±¡ä¸­æ‰€åŒ…å«çš„æ•°æ®è½¬æ¢ä¸ºå„ç§å½¢å¼çš„æµæ•°æ®ï¼ˆå³å­—èŠ‚æ•°æ®ï¼‰ï¼Œå†é€šè¿‡æµçš„ä¼ è¾“ï¼Œåˆ°è¾¾ç›®çš„å¯¹è±¡åå†å°†æµæ•°æ®è½¬æ¢ä¸ºè¯¥å¯¹è±¡ä¸­å¯ä»¥ä½¿ç”¨çš„æ•°æ®ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> data = <span class=\"string\">''</span>;</span><br><span class=\"line\"><span class=\"comment\">// æµè¯»å–</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> stream = fs.createReadStream(<span class=\"string\">'./data/d1.txt'</span>,<span class=\"string\">'utf-8'</span>);</span><br><span class=\"line\">stream.on(<span class=\"string\">'data'</span>,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</span><br><span class=\"line\">    data += result;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// data end äº‹ä»¶è¡¨ç¤ºè¿è´¯çš„è¡Œä¸ºï¼Œå­—èŠ‚æµéœ€è¦èµ·ç‚¹å’Œç»ˆç‚¹ã€‚</span></span><br><span class=\"line\">stream.on(<span class=\"string\">'end'</span>,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">stream.on(<span class=\"string\">'error'</span>,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err.stack);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æµå†™å…¥</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> stream = fs.createWriteStream(<span class=\"string\">'./data/123.txt'</span>,<span class=\"string\">'utf-8'</span>);</span><br><span class=\"line\">stream.write(<span class=\"string\">'hello'</span>,<span class=\"string\">'utf-8'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">stream.end();</span><br><span class=\"line\"></span><br><span class=\"line\">stream.on(<span class=\"string\">'finish'</span>,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;<span class=\"comment\">// finish äº‹ä»¶è§¦å‘ï¼Œå¿…é¡»ç­‰ end äº‹ä»¶ç»“æŸæ‰å¯ä»¥</span></span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'å†™å…¥å®Œæˆï¼'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">stream.on(<span class=\"string\">'error'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err.stack);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<div class=\"tip\"><br>æµè¯»å–ä¼šä¾æ¬¡è§¦å‘äº‹ä»¶ï¼š data -&gt; end -&gt; error ,æ¯ä¸ªäº‹ä»¶å‘ç”Ÿä¼šæœ‰å¯¹åº”çš„å›è°ƒå‡½æ•°å¤„ç†ã€‚<br>æµå†™å…¥ä¼šä¾æ¬¡è§¦å‘äº‹ä»¶ï¼š end -&gt; finish -&gt; error ,æ¯ä¸ªäº‹ä»¶å‘ç”Ÿä¼šæœ‰å¯¹åº”çš„å›è°ƒå‡½æ•°å¤„ç†ã€‚<br></div>\n\n<h4 id=\"ç®¡é“æµè¯»å†™\"><a href=\"#ç®¡é“æµè¯»å†™\" class=\"headerlink\" title=\"ç®¡é“æµè¯»å†™\"></a>ç®¡é“æµè¯»å†™</h4><p>ç®¡é“(pipe) æä¾›äº†ä¸€ä¸ªè¾“å‡ºæµåˆ°è¾“å…¥æµçš„æœºåˆ¶ã€‚é€šå¸¸æˆ‘ä»¬ç”¨äºä»ä¸€ä¸ªæµä¸­è·å–æ•°æ®å¹¶å°†æ•°æ®ä¼ é€’åˆ°å¦å¤–ä¸€ä¸ªæµä¸­ã€‚é€šè¿‡ç®¡é“ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°å¤§æ–‡ä»¶æµå…¥å¦å¤–ä¸€ä¸ªæ–‡ä»¶çš„å¤åˆ¶è¿‡ç¨‹ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> readStream = fs.createReadStream(<span class=\"string\">'./data/d1.txt'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> writeStrem = fs.createWriteStream(<span class=\"string\">'./data/d3.txt'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">readStream.pipe(writeStrem);<span class=\"comment\">// å®ç°äº† d1.txt åˆ° d3.txt çš„ä¼ è¾“è¿‡ç¨‹</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"é“¾å¼æµè¯»å†™\"><a href=\"#é“¾å¼æµè¯»å†™\" class=\"headerlink\" title=\"é“¾å¼æµè¯»å†™\"></a>é“¾å¼æµè¯»å†™</h4><p>é“¾å¼æ˜¯é€šè¿‡è¿æ¥è¾“å‡ºæµåˆ°å¦å¤–ä¸€ä¸ªæµå¹¶åˆ›å»ºå¤šä¸ªå¯¹ä¸ªæµæ“ä½œé“¾çš„æœºåˆ¶ã€‚é“¾å¼æµä¸€èˆ¬ç”¨äºç®¡é“æ“ä½œã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ˜¯ç”¨ç®¡é“å’Œé“¾å¼æ¥å‹ç¼©å’Œè§£å‹æ–‡ä»¶ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// compress.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> zlib = <span class=\"built_in\">require</span>(<span class=\"string\">'zlib'</span>); <span class=\"comment\">// å¼•å…¥å‹ç¼©æ¨¡å—</span></span><br><span class=\"line\"></span><br><span class=\"line\">fs.createReadStream(<span class=\"string\">'./data/123.txt'</span>)</span><br><span class=\"line\">    .pipe(zlib.createGzip())</span><br><span class=\"line\">    .pipe(fs.createWriteStream(<span class=\"string\">'./data/123.txt.gz'</span>));<span class=\"comment\">// é“¾å¼æ“ä½œ</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'æ–‡ä»¶å‹ç¼©å®Œæˆ'</span>);</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"æ–‡ä»¶ã€æ–‡ä»¶å¤¹åˆ é™¤\"><a href=\"#æ–‡ä»¶ã€æ–‡ä»¶å¤¹åˆ é™¤\" class=\"headerlink\" title=\"æ–‡ä»¶ã€æ–‡ä»¶å¤¹åˆ é™¤\"></a>æ–‡ä»¶ã€æ–‡ä»¶å¤¹åˆ é™¤</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">\"fs\"</span>);</span><br><span class=\"line\"><span class=\"comment\">// æ–‡ä»¶ç›®å½•è¯»å–ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ–‡ä»¶åŠæ–‡ä»¶å¤¹</span></span><br><span class=\"line\">fs.readdir(<span class=\"string\">\"./testdir\"</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err,files</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!err)&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(files);<span class=\"comment\">// [ 'index.html', 'main.css', 'subdir' ]</span></span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–‡ä»¶åˆ é™¤</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"å‡†å¤‡åˆ é™¤æ–‡ä»¶ï¼\"</span>);</span><br><span class=\"line\">fs.unlink(<span class=\"string\">'./data/123.txt.gz'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> err;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"æ–‡ä»¶åˆ é™¤æˆåŠŸï¼\"</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç©ºæ–‡ä»¶å¤¹åˆ é™¤</span></span><br><span class=\"line\">fs.rmdir(<span class=\"string\">'./data'</span>,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!err)&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'åˆ é™¤æˆåŠŸï¼'</span>);</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>ä¸€ä¸ªé€’å½’åˆ é™¤çš„å°ç»ƒä¹ ï¼ŒæŠŠå‰é¢çš„ç»¼åˆè¿ç”¨ä¸€ä¸‹ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">delDir(<span class=\"string\">'./testdir'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶å¤¹è·¯å¾„ï¼Œåˆ é™¤æ‰è¯¥æ–‡ä»¶å¤¹æ‰€æœ‰å†…å®¹</span></span><br><span class=\"line\"><span class=\"comment\">// @param pathStr string ä¼ å…¥ä¸€ä¸ªè·¯å¾„</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">delDir</span>(<span class=\"params\">pathStr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (fs.existsSync(pathStr))&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> files = fs.readdirSync(pathStr);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; files.length; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> curPath = pathStr + <span class=\"string\">'/'</span> + files[i];</span><br><span class=\"line\">            <span class=\"keyword\">var</span> stats = fs.statSync(curPath);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (stats.isFile())&#123;</span><br><span class=\"line\">                fs.unlink(curPath);</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(stats.isDirectory())&#123;</span><br><span class=\"line\">                delDir(curPath);<span class=\"comment\">// é€’å½’è°ƒç”¨ï¼Œæœ€ç»ˆåˆ é™¤æ‰æ‰€æœ‰æ–‡ä»¶ï¼Œåªå‰©ç©ºç›®å½•</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        fs.rmdirSync(pathStr);<span class=\"comment\">// æ”¶å°¾ï¼Œåˆ æ‰ç©ºç›®å½•</span></span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'æ–‡ä»¶å¤¹ä¸å­˜åœ¨'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<div class=\"tip\"><br>æ–‡ä»¶ã€æ–‡ä»¶å¤¹çš„æ“ä½œï¼Œéƒ½æœ‰åŒæ­¥å’Œå¼‚æ­¥çš„ä»£ç ï¼Œæ¯”å¦‚ <code>fs.unlink()</code> å’Œ <code>fs.unlinkSync()</code>,é»˜è®¤éƒ½æ˜¯å¼‚æ­¥ä»£ç ï¼Œå¼‚æ­¥ä»£ç ä¼šè°ƒç”¨å›è°ƒå‡½æ•°è¿›è¡Œæ“ä½œï¼ŒåŒæ­¥ä»£ç ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿›è¡Œåç»­çš„æ“ä½œï¼Œå¯ä»¥è®¤çœŸè§‚å¯Ÿä¸Šé¢ä»£ç çš„åŒºåˆ«ã€‚ä½¿ç”¨å¼‚æ­¥ä»£ç çš„æ—¶å€™ï¼Œä¸€å®šæ³¨æ„æ‰§è¡Œé¡ºåºã€‚<br></div>\n\n\n<h3 id=\"è·¯å¾„-path\"><a href=\"#è·¯å¾„-path\" class=\"headerlink\" title=\"è·¯å¾„ (path)\"></a>è·¯å¾„ (path)</h3><p>path æ¨¡å—åŒ…å«ä¸€å¥—ç”¨äº <strong><em>å¤„ç†å’Œè½¬æ¢æ–‡ä»¶è·¯å¾„</em></strong> çš„å·¥å…·é›†ï¼Œç”¨äºå¤„ç†ç›®å½•çš„å¯¹è±¡ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚ç”¨ Node.js çš„ path å‘½ä»¤ï¼Œä¸ä½¿ç”¨ Linux ä¸‹çš„ shell è„šæœ¬å‘½ä»¤ç›¸ä¼¼ã€‚å‡ ä¹æ‰€æœ‰çš„æ–¹æ³•ä»…å¯¹å­—ç¬¦ä¸²è¿›è¡Œè½¬æ¢ï¼Œæ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸ä¼šæ£€æŸ¥è·¯å¾„æ˜¯å¦çœŸå®æœ‰æ•ˆã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¼•å…¥pathå¯¹è±¡</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* æ ¼å¼åŒ–è·¯å¾„  path.normalize(p)</span></span><br><span class=\"line\"><span class=\"comment\">* ç‰¹ç‚¹ï¼šå°†ä¸ç¬¦åˆè§„èŒƒçš„è·¯å¾„æ ¼å¼åŒ–ï¼Œç®€åŒ–å¼€å‘äººå‘˜ä¸­å¤„ç†å„ç§å¤æ‚çš„è·¯å¾„åˆ¤æ–­</span></span><br><span class=\"line\"><span class=\"comment\">* */</span></span><br><span class=\"line\">path.normalize(<span class=\"string\">'/foo/bar//baz/asdf/quux/..'</span>);</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">'/foo/bar/baz/asdf'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* è·¯å¾„è”åˆ path.join([path1], [path2], [...])</span></span><br><span class=\"line\"><span class=\"comment\">* ç‰¹ç‚¹ï¼šå°†æ‰€æœ‰åç§°ç”¨path.seqä¸²è”èµ·æ¥ï¼Œç„¶åç”¨normailzeæ ¼å¼åŒ–</span></span><br><span class=\"line\"><span class=\"comment\">* */</span></span><br><span class=\"line\">path.join(<span class=\"string\">'///foo'</span>, <span class=\"string\">'bar'</span>, <span class=\"string\">'//baz/asdf'</span>, <span class=\"string\">'quux'</span>, <span class=\"string\">'..'</span>);</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">'/foo/bar/baz/asdf'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* è·¯å¾„å¯»èˆª path.resolve([from ...], to)</span></span><br><span class=\"line\"><span class=\"comment\">* ç‰¹ç‚¹ï¼šç›¸å½“äºä¸æ–­çš„è°ƒç”¨ç³»ç»Ÿçš„cdå‘½ä»¤</span></span><br><span class=\"line\"><span class=\"comment\">* */</span></span><br><span class=\"line\">path.resolve(<span class=\"string\">'foo/bar'</span>, <span class=\"string\">'/tmp/file/'</span>, <span class=\"string\">'..'</span>, <span class=\"string\">'a/../subfile'</span>);</span><br><span class=\"line\"><span class=\"comment\">// ç›¸å½“äºç»ˆç«¯å‘½ä»¤ï¼š</span></span><br><span class=\"line\"><span class=\"comment\">// cd foo/bar</span></span><br><span class=\"line\"><span class=\"comment\">// cd /tmp/file/</span></span><br><span class=\"line\"><span class=\"comment\">// cd ..</span></span><br><span class=\"line\"><span class=\"comment\">// cd a/../subfile</span></span><br><span class=\"line\"><span class=\"comment\">// pwd</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* ç›¸å¯¹è·¯å¾„ path.relative(from, to)</span></span><br><span class=\"line\"><span class=\"comment\">* ç‰¹ç‚¹ï¼šè¿”å›æŸä¸ªè·¯å¾„ä¸‹ç›¸å¯¹äºå¦ä¸€ä¸ªè·¯å¾„çš„ç›¸å¯¹ä½ç½®ä¸²ï¼Œ</span></span><br><span class=\"line\"><span class=\"comment\">* ç›¸å½“äºï¼špath.resolve(from, path.relative(from, to)) == path.resolve(to)</span></span><br><span class=\"line\"><span class=\"comment\">* */</span></span><br><span class=\"line\"><span class=\"comment\">//ç®€å•ç†è§£ï¼š åœ°å€ä¸€æ‰§è¡Œæ€æ ·çš„ shell å‘½ä»¤ï¼Œåˆ°è¾¾åœ°å€äºŒ</span></span><br><span class=\"line\">path.relative(<span class=\"string\">'/data/orandea/test/aaa'</span>, <span class=\"string\">'/data/orandea/impl/bbb'</span>)</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">'../../impl/bbb'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* æ–‡ä»¶å¤¹åç§° path.dirname(p)</span></span><br><span class=\"line\"><span class=\"comment\">* ç‰¹ç‚¹ï¼šè¿”å›è·¯å¾„çš„ä¸Šçº§è·¯å¾„</span></span><br><span class=\"line\"><span class=\"comment\">* */</span></span><br><span class=\"line\">path.dirname(<span class=\"string\">'/foo/bar/baz/asdf/quux'</span>)</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">'/foo/bar/baz/asdf'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* æ–‡ä»¶åç§° path.basename(p, [ext])</span></span><br><span class=\"line\"><span class=\"comment\">* ç‰¹ç‚¹ï¼šè¿”å›æŒ‡å®šçš„æ–‡ä»¶åï¼Œè¿”å›ç»“æœå¯å»æ‰[ext]åç¼€å­—ç¬¦ä¸²</span></span><br><span class=\"line\"><span class=\"comment\">* */</span></span><br><span class=\"line\">path.basename(<span class=\"string\">'/foo/bar/baz/asdf/quux.html'</span>)</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">'quux.html'</span></span><br><span class=\"line\"></span><br><span class=\"line\">path.basename(<span class=\"string\">'/foo/bar/baz/asdf/quux.html'</span>, <span class=\"string\">'.html'</span>)</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">'quux'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* æ‰©å±•åç§° path.extname(p)</span></span><br><span class=\"line\"><span class=\"comment\">* ç‰¹ç‚¹ï¼šè¿”å›æŒ‡å®šæ–‡ä»¶åçš„æ‰©å±•åç§°</span></span><br><span class=\"line\"><span class=\"comment\">* */</span></span><br><span class=\"line\">path.extname(<span class=\"string\">'index.html'</span>)</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">'.html'</span></span><br><span class=\"line\"></span><br><span class=\"line\">path.extname(<span class=\"string\">'index.'</span>)</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">'.'</span></span><br><span class=\"line\"></span><br><span class=\"line\">path.extname(<span class=\"string\">'index'</span>)</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\"><span class=\"string\">''</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* è·¯å¾„åˆ†éš”ç¬¦ path.sep</span></span><br><span class=\"line\"><span class=\"comment\">* ç‰¹ç‚¹ï¼šè·å–æ–‡ä»¶è·¯å¾„çš„åˆ†éš”ç¬¦ï¼Œä¸»è¦æ˜¯ä¸æ“ä½œç³»ç»Ÿç›¸å…³</span></span><br><span class=\"line\"><span class=\"comment\">* æ³¨æ„è°ƒç”¨æ–¹å¼</span></span><br><span class=\"line\"><span class=\"comment\">* */</span></span><br><span class=\"line\"><span class=\"string\">'foo/bar/baz'</span>.split(path.sep)</span><br><span class=\"line\"><span class=\"comment\">// returns</span></span><br><span class=\"line\">[<span class=\"string\">'foo'</span>, <span class=\"string\">'bar'</span>, <span class=\"string\">'baz'</span>]</span><br></pre></td></tr></table></figure></p>"},{"title":"Node.JS å­¦ä¹ ç¬”è®° [05] -- Express","date":"2015-01-06T13:24:40.000Z","comments":0,"_content":"\n***Express*** æ˜¯ä¸€ä¸ªåŸºäº Node.js å¹³å°çš„æç®€ã€çµæ´»çš„ Web åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œå®ƒæä¾›ä¸€ç³»åˆ—å¼ºå¤§çš„ç‰¹æ€§ï¼Œå¸®åŠ©ä½ åˆ›å»ºå„ç§ Web å’Œç§»åŠ¨è®¾å¤‡åº”ç”¨ã€‚Express çš„æ ¸å¿ƒç‰¹æ€§å¯ä»¥æ¦‚æ‹¬ä»¥ä¸‹ä¸‰ç‚¹ã€‚\n<!-- more -->\n\n- å¯ä»¥è®¾ç½®ä¸­é—´ä»¶æ¥å“åº” HTTP è¯·æ±‚ã€‚\n- å®šä¹‰äº†è·¯ç”±è¡¨ç”¨äºæ‰§è¡Œä¸åŒçš„ HTTP è¯·æ±‚åŠ¨ä½œã€‚\n- å¯ä»¥é€šè¿‡å‘æ¨¡æ¿ä¼ é€’å‚æ•°æ¥åŠ¨æ€æ¸²æŸ“ HTML é¡µé¢ã€‚\n\nä¸‹é¢å­¦ä¹ çš„çŸ¥è¯†ç‚¹ï¼Œéƒ½ä¼šå›´ç»•è¿™å‡ ä¸ªç‰¹æ€§å±•å¼€ã€‚\n\n### Express å®‰è£…\n#### åœ¨é¡¹ç›®ä¸­å¼•å…¥ Express\n```bash\ncd projectName              # è¿›å…¥æ–°å»ºçš„ Node.js é¡¹ç›®\nnpm init                    # åˆå§‹åŒ–é¡¹ç›®é…ç½®æ–‡ä»¶\nnpm install express --save  # å®‰è£… Express æ¨¡å—åˆ°é¡¹ç›®é…ç½®æ–‡ä»¶ä¸­\n```\né€šè¿‡ä¸Šé—¨çš„å‘½ä»¤ï¼Œå°±å¯ä»¥å®Œæˆ Express çš„å®‰è£…ï¼Œä¸‹é¢åœ¨ `app.js` ä¸­ä½¿ç”¨ Express å§ï¼\n```js\nvar express = require('express');\nvar app = express();\n\napp.get('/', function (req, res) {\n    res.send('Hello,Express!');\n});\n\napp.listen(8080, function () {\n    console.log('Express running at http://127.0.0.1:8080/');\n});\n```\n\n#### ä½¿ç”¨ Express-generator\nä¸ºäº†æ–¹ä¾¿å¼€å‘è€…ï¼Œæ›´ä¾¿æ·çš„ä½¿ç”¨ Express ç”Ÿæˆé¡¹ç›®ï¼Œå®˜æ–¹æä¾›çš„å¿«é€Ÿçš„ç”Ÿæˆå·¥å…· `Express-generator`ï¼Œè™½ç„¶ç”Ÿæˆéå¸¸å¿«é€Ÿæ–¹ä¾¿ï¼Œä½†æ˜¯ä½œä¸ºåˆå­¦è€…ï¼Œè¿˜æ˜¯è¦å¼„æ¸…æ¥šé‡Œé¢æ¯æ¡å‘½ä»¤æ‰€ä»£è¡¨çš„å«ä¹‰ï¼Œæœ€åå†ä½¿ç”¨å®˜æ–¹æä¾›çš„å·¥å…·å¿«é€Ÿç”Ÿæˆã€‚æ‰“å¼€ç»ˆç«¯ï¼Œå› ä¸ºæˆ‘æ˜¯ MacOSï¼Œæ‰€ä»¥å®‰è£…çš„æ—¶å€™è¦åŠ ä¸Š `sudo` å¦åˆ™ä¼šæŠ¥é”™æç¤ºæƒé™ä¸å¤Ÿã€‚\n```bash\nsudo npm install express-generator -g  # å…¨å±€å®‰è£…\nexpress mywebapp                       # åˆ›å»º mywebapp é¡¹ç›®\ncd mywebapp && npm install             # å®‰è£…ä¾èµ–æ–‡ä»¶\nnpm start                              # å¯åŠ¨é¡¹ç›®\n```\nå¯åŠ¨é¡¹ç›®åï¼Œå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­é¢„è§ˆäº†ï¼Œè®¿é—®åœ°å€ï¼šhttp://127.0.0.1:3000/ ã€‚\n\n<div class=\"tip\">\nå¯åŠ¨å‰éœ€è¦å…³é—­å…¶å®ƒå·²ç»å¯ç”¨çš„ Web æœåŠ¡ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´ç«¯å£å ç”¨å¯åŠ¨ä¸æˆåŠŸã€‚\n</div>\n\n### Express è·¯ç”±\n> è·¯ç”±æ˜¯æŒ‡å¦‚ä½•å®šä¹‰åº”ç”¨çš„ç«¯ç‚¹ï¼ˆURLsï¼‰ä»¥åŠå¦‚ä½•å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚\n\n#### åŸºç¡€ç”¨æ³•\nç®€å•ç†è§£ï¼Œå…¶å®å°±æ˜¯æ ¹æ®ä¸åŒçš„è¯·æ±‚ï¼Œæ¥å“åº”ä¸ä¹‹å¯¹åº”çš„é¡µé¢ã€‚æ¯”å¦‚ï¼Œå½“ç”¨æˆ·è®¿é—® http://localhost/images/ æ—¶ï¼Œæ ¹æ® URL å¯ä»¥çœ‹å‡ºï¼Œè¯·æ±‚çš„æ˜¯ `/images` è¿™ä¸ªç›®å½•ï¼Œé‚£ä¹ˆé€šè¿‡è·¯ç”±ï¼Œæ‰¾åˆ°è¿™ä¸ªé¡µé¢å¹¶è¿”å›ç»™è¯·æ±‚çš„ç”¨æˆ·ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«è·¯ç”±ã€‚æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚\n```js\nvar express = require('express');\nvar app = express();\n\n// å½“ç”¨æˆ·è¯·æ±‚è®¿é—® / æ—¶ï¼Œå“åº”ä¸€ä¸ª Hello,Express! å­—ç¬¦ä¸²ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªç®€å•è·¯ç”±\napp.get('/', function (req, res) {\n    res.send('Hello,Express!');\n});\n```\nè¿™é‡Œéœ€è¦æ³¨æ„ `app.all()` ,å®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è·¯ç”±æ–¹æ³•ï¼Œæ²¡æœ‰ä»»ä½• HTTP æ–¹æ³•ä¸å…¶å¯¹åº”ï¼Œå®ƒçš„ä½œç”¨æ˜¯å¯¹äºä¸€ä¸ªè·¯å¾„ä¸Šçš„æ‰€æœ‰è¯·æ±‚åŠ è½½ä¸­é—´ä»¶ã€‚ all ç›¸å½“äºæ—¢å¯ä»¥å¤„ç† `GET`ï¼Œä¹Ÿå¯ä»¥å¤„ç† `POST` ã€‚\n\n#### Router æ–¹æ³•\né€šè¿‡ `express.Router` ç±»å¯ä»¥åˆ›å»ºç‹¬ç«‹æ¨¡å—çš„è·¯ç”±æ¨¡å—ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯ä»¥æŒ‚è½½çš„è·¯ç”±å¯¹è±¡ï¼ŒæŠŠè·¯ç”±æ¨¡å—åˆ†ç¦»å‡ºé¡¹ç›®ï¼Œè®©æ•´ä¸ªé¡¹ç›®ç»“æ„æ¸…æ™°ã€æ–¹ä¾¿ç®¡ç†ï¼Œè¿™é‡Œå…‰è¯´è¿˜æ˜¯æŒºæŠ½è±¡ï¼Œä¸¾ä¸ªä¾‹å­ã€‚\n```bash\n# ç›®å½•ç»“æ„\n.\nâ”œâ”€â”€ index.js\nâ”œâ”€â”€ node_modules\nâ”‚Â Â  â”œâ”€â”€ body-parser\nâ”‚Â Â  â””â”€â”€ express\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ router\nâ”‚Â Â  â”œâ”€â”€ admin.js\nâ”‚Â Â  â””â”€â”€ home.js\nâ””â”€â”€ views\n    â”œâ”€â”€ admin\n    â””â”€â”€ home\n```\n```js\n// index.js\nvar express = require('express');\nvar bodyparser = require('body-parser');\n// å¼•å…¥å¤–éƒ¨è·¯ç”±æ¨¡å—\nvar home = require('./router/home');\nvar admin = require('./router/admin');\nvar app = express();\n\n// ä½¿ç”¨ä¸­é—´ä»¶ bodyparser ï¼Œåé¢å¯ä»¥åœ¨ req.body ä¸­åˆ†æå‡º POST è¯·æ±‚ä½“çš„å†…å®¹\napp.use(bodyparser.urlencoded({extended:false}));\n\n// ä½¿ç”¨å¤–éƒ¨è·¯ç”±æ¨¡å—\napp.use('/',home);\napp.use('/admin',admin);\n\napp.listen(8080,function () {\n   console.log('visit http://127.0.0.1:8080/');\n});\n```\n\n```js\n// admin.js\nvar express = require('express');\nvar router = express.Router();// ç”¨ Router æ„é€ å‡½æ•°å®ä¾‹åŒ– router å¯¹è±¡\nvar path = require('path');\n\nrouter.get('/login.html', function (req, res) {\n    res.sendFile(path.resolve(__dirname + '/../views/admin/' + 'login.html'));\n});\n\nrouter.get('/user.html', function (req, res) {\n    res.sendFile(path.resolve(__dirname + '/../views/admin/' + 'user.html'));\n});\n\nrouter.post('/login.html', function (req, res) {// /admin/login.html\n    res.sendFile(path.resolve(__dirname + '/../views/admin/' + 'login.html'));\n});\n\nmodule.exports = router;// æš´éœ²ç»™å¤–éƒ¨è°ƒç”¨è¯¥è·¯ç”±\n```\n\n### Express å“åº”å¯¹è±¡\né€šè¿‡å“åº”ï¼ˆResponseï¼‰å¯¹è±¡ï¼ŒæœåŠ¡å™¨å¯ä»¥è¿”å›ä¸€ä¸ªæ¥è‡ªå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰çš„ `Request` ,æœ€ç»ˆè¿”å›ç»™ç”¨æˆ·çš„å…¶å®å°±æ˜¯ä¸€ä¸ªç»è¿‡ä¸šåŠ¡é€»è¾‘å±‚å¤„ç†çš„ `res` å¯¹è±¡ã€‚æ¥äº†è§£ä¸‹ Express çš„å“åº”å¯¹è±¡å§ã€‚\n\n#### send()\nExpress å·²ç»å°è£…è¿‡äº†åŸç”Ÿ Node.js çš„å“åº”æ–¹æ³•ï¼Œåœ¨åŸç”Ÿ Node.js ä¸­ï¼Œé€šè¿‡ `res.write()` æ–¹æ³•å¯ä»¥è¿”å›å­—ç¬¦ä¸²å’Œ Bufferã€‚è€Œ Express ä¸­çš„ `send()` å¯ä»¥è¿”å›ä»»æ„æ•°æ®ç±»å‹ï¼Œå¦‚æµã€æ•°æ®ã€æ™®é€šæ–‡æœ¬ç­‰ï¼Œæ¥çœ‹ä¸ªä¾‹å­ã€‚\n```js\nres.send(new Buffer('ifyour')); // Buffer\nres.send({\"name\": \"ifyour\"});   // JSON\nres.send('<p>some html</p>');   // HTML\nres.status(404).send('404 Not Find'); // è®¾ç½®çŠ¶æ€ç å¹¶è¿”å›æç¤º\n//...\n```\n\n#### json()\né€šè¿‡ `json()` æ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ª `JSON` å¯¹è±¡ï¼Œç”¨äº Ajax ç­‰ã€‚\n```js\nres.json(null);\nres.json({\"user\": \"ifyour\"});\nres.status(500).json({\"error\": \"message\"});\n```\n\n#### render()\n`render` ç”¨äºæ¸²æŸ“æ¨¡æ¿å¼•æ“ï¼Œæ¯”å¦‚åœ¨ä½¿ç”¨ [ejs](https://github.com/tj/ejs) æ¨¡æ¿å¼•æ“æ—¶ï¼Œå“åº”ç”¨æˆ·è¯·æ±‚å°±å¯ä»¥ä½¿ç”¨ `res.render()` è¿”å›ç»™ç”¨æˆ·ä¸€ä¸ªæ¸²æŸ“å¥½çš„é¡µé¢ã€‚è¿™ä¸ªç”¨çš„æ¯”è¾ƒå¤šï¼Œæˆ‘æ¥ä¸¾ä¸ªä¾‹å­ã€‚\n```bash\n# ç›®å½•ç»“æ„\n.\nâ”œâ”€â”€ index.js\nâ”œâ”€â”€ node_modules\nâ”‚Â Â  â”œâ”€â”€ ejs\nâ”‚Â Â  â””â”€â”€ express\nâ”œâ”€â”€ package.json\nâ””â”€â”€ views\n    â””â”€â”€ login.html\n```\n```html\n<!-- ejs æ¨¡æ¿å¼•æ“ï¼Œå®šä¹‰äº† /login.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\n<!-- æ³¨æ„ ejs æ¨¡æ¿ä¸­å˜é‡çš„å†™æ³• -->\n<h1>æ¬¢è¿ä½ ï¼Œ<%=name%></h1>\n</body>\n</html>\n```\n```js\n// index.js\nvar express = require('express');\nvar ejs = require('ejs'); // å¼•å…¥ ejs æ¨¡æ¿å¼•æ“\nvar path = require('path');\nvar app = express();\n\nvar viewsPath = path.join(__dirname, 'views');// views æ˜¯æ¨¡æ¿ç›®å½•\n// è®¾ç½® express views å±‚ï¼Œæ¨¡æ¿æ ¹è·¯å¾„\napp.set('views', viewsPath);\n\n// è®¾ç½® express å®ä¾‹çš„æ¨¡æ¿è¯­è¨€\napp.set('view engine', 'html');\n\n// æŠŠ express å®ä¾‹çš„æ¨¡æ¿å¼•æ“å’Œ ejs æ¨¡æ¿å¼•æ“å…³è”\napp.engine('html', ejs.__express);\n\napp.get('/login.html', function (req, res) {\n    res.render('login', {name: \"ifyour\"});// æ›¿æ¢åˆ°æ¨¡æ¿å˜é‡ä¸­çš„ name ä¸º ifyour\n});\n\napp.listen(8080, function () {\n    console.log('visit http://127.0.0.1:8080/');\n});\n```\n<div class=\"tip\">\n`__dirname` æ˜¯ Node.js ä¸­å®šä¹‰çš„ `global` å…¨å±€å˜é‡ï¼Œè·å–å½“å‰æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œè¿”å› `string` ç±»å‹ã€‚\n</div>\n\n#### download()\n```js\nres.download('./123.doc'); // ä¸‹è½½å½“å‰ç›®å½•ä¸‹é¢çš„123.docæ–‡ä»¶ã€‚\nres.download('./123.doc','books.doc'); // ä¸‹è½½å½“å‰ç›®å½•ä¸‹é¢çš„123.docæ–‡ä»¶ï¼Œé‡å‘½åä¸º books.doc\n```\n#### redirect()\n```js\n// é‡å®šå‘åˆ°æŒ‡å®šçš„ URL è·¯å¾„\nres.redirect('/404.html');\nres.redirect('https://www.google.com/');\n```\n\næ›´å¤šå“åº”å¯¹è±¡çš„æ–¹æ³•ï¼Œå‚è€ƒ [Express å®˜æ–¹ API](http://www.expressjs.com.cn/4x/api.html#res)ã€‚\n### Express è¯·æ±‚å¯¹è±¡\nExpress ä¸­çš„ `Request` å¯¹è±¡ï¼ŒåŒ…å«äº†ä¸€æ¬¡è¯·æ±‚ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œæ¯”å¦‚è¯·æ±‚å¤´ã€è·¯å¾„ã€Cookies ç­‰ï¼Œè·å–è¯·æ±‚å¤´ä¸­çš„ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ ¹æ®è¿™äº›ä¿¡æ¯å¤„ç†ä¸šåŠ¡é€»è¾‘å±‚ï¼Œæœ€ç»ˆå°†å¤„ç†è¿‡åçš„æ•°æ®è¿”å›ç»™ç”¨æˆ·ã€‚è¿™é‡Œæ€»ç»“äº†å¸¸ç”¨çš„è¯·æ±‚å¯¹è±¡æ–¹æ³•ã€‚\n\n#### URL ä¸­çš„å‚æ•°\n```js\n// æ–¹å¼ä¸€ï¼š req.query.å‚æ•°å\n// e.g.  http://localhost:3000/user?name=ifyour\nconsole.log(req.query.name);\n// => ifyour\n\n// æ–¹å¼äºŒï¼šreq.params.å‚æ•°å\n//e.g.  http://localhost/post/123123\nrouter.get('/post/:id', function (req, res) {\n    console.log(req.params.id);\n    // => 123123\n});\n```\n\n#### è¡¨å•ä¸­çš„å‚æ•°\n```js\n// æ–¹å¼ä¸€ï¼šè¯­æ³•ï¼šreq.param.å‚æ•°å  æ³¨æ„è¿™é‡Œæ²¡åŠ  s\n// e.g. <input type=\"text\" name=\"user\">\nconsole.log(req.param('user'));\n\n\n// æ–¹å¼äºŒï¼šä½¿ç”¨ body-parser ä¸­é—´ä»¶\n// e.g. <input type=\"text\" name=\"user\">\nvar bodyparser = require('body-parser');\nconsole.console.log(req.boy.user);\n```\n\n### Express ä¸­é—´ä»¶\nExpress æ˜¯ä¸€ä¸ªè‡ªèº«åŠŸèƒ½æç®€ï¼Œå®Œå…¨æ˜¯ç”±è·¯ç”±å’Œä¸­é—´ä»¶æ„æˆä¸€ä¸ªçš„ Web å¼€å‘æ¡†æ¶ï¼šä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œä¸€ä¸ª Express åº”ç”¨å°±æ˜¯åœ¨è°ƒç”¨å„ç§ä¸­é—´ä»¶ã€‚\n![](http://ww3.sinaimg.cn/large/6057861cgw1fbcrpk71zxj20sg03kaaa.jpg)\nå¦‚å›¾ï¼Œä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰ä½äºå®¢æˆ·ç«¯å’Œè·¯ç”±ä¹‹é—´ï¼Œå®ƒå¥½æ¯”æ˜¯ä¸€ä¸ªæ¼æ–—ï¼Œç»è¿‡è¿™ä¸ªæ¼æ–—çš„ `Request` å¯¹è±¡å’Œ `Response` å¯¹è±¡ä»¥åŠå¾ªç¯æµç¨‹ä¸­çš„ `Next` ä¼šè¢«å¤„ç†ï¼Œæ¯”å¦‚æ­£ç¡®æ€§æ ¡éªŒã€ä¸šåŠ¡é€»è¾‘å¤„ç†ç­‰ã€‚\n\n- æ‰§è¡Œä»»ä½•ä»£ç \n- ä¿®æ”¹è¯·æ±‚å’Œå“åº”å¯¹è±¡\n- ç»ˆç»“è¯·æ±‚-å“åº”å¾ªç¯\n- è°ƒç”¨å †æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶\n\n<div class=\"tip\">\nå¦‚æœå½“å‰ä¸­é—´ä»¶æ²¡æœ‰ç»ˆç»“è¯·æ±‚-å“åº”å¾ªç¯ï¼Œåˆ™å¿…é¡»è°ƒç”¨ next() æ–¹æ³•å°†æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå¦åˆ™è¯·æ±‚å°±ä¼šæŒ‚èµ·ã€‚\n</div>\nä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ï¼Œå¦‚ä½•é€šè¿‡ `next()` æ–¹æ³•æŠŠæ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚\n```js\nvar app = express();\napp.use(function (req, res, next) {\n   var accessToken = req.query.accessToken;\n   //æ£€æŸ¥è¯·æ±‚ä¸­æ˜¯å¦å«æœ‰â€œè®¤è¯ç‰Œâ€ï¼Œå­˜åœ¨å°±ç»§ç»­æ‰§è¡Œã€‚\n   if(accessToken){\n       next(); // æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶\n       }else{\n          res.send(â€œè¯·æ±‚å¿…é¡»åŒ…å«tokenâ€);\n        }\n});\n// ...\n```\n\n#### åº”ç”¨çº§ä¸­é—´ä»¶\nåº”ç”¨çº§ä¸­é—´ä»¶å°±æ˜¯ç»‘å®šåˆ°ç”¨ `express()` ç”Ÿæˆçš„å¯¹è±¡ `app` èº«ä¸Šçš„ï¼Œæ¯”å¦‚ `app.use()` ä¸­çš„ `use` æ–¹æ³•ï¼Œä»¥åŠ `app.post()` ã€`app.get()` ä¸­çš„ `POST` å’Œ `GET` æ–¹æ³•ç­‰ã€‚\n#### å†…ç½®ä¸­é—´ä»¶\n```js\n// è®¾ç½®å…¬å…±é™æ€ç›®å½•ï¼Œç”¨äºå­˜æ”¾ css js image ç­‰æ–‡ä»¶ï¼Œé¡¹ç›®ç›®å½•é‡Œæœ‰ images ç›®å½•å­˜æ”¾ 1.png\n// é‚£ä¹ˆè®¿é—®ï¼šhttp://localhost/images/1.png è·å–\napp.use(express.static('public'));\n```\n#### ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶\nä¸­é—´ä»¶å¯ä»¥è¯´æ˜¯æ•´ä¸ª Express çš„ç²¾åæ‰€åœ¨äº†ï¼Œä½¿ç”¨ä¸­é—´ä»¶å¯ä»¥å‡ å¤§çš„æ‰©å±•é¡¹ç›®çš„åŠŸèƒ½ã€‚ä½¿ç”¨æ–¹æ³•éƒ½å·®ä¸å¤šï¼Œè¿™é‡Œä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„ï¼Œå…·ä½“ä½¿ç”¨æ–¹å¼éœ€è¦çœ‹å®˜æ–¹çš„æ–‡æ¡£äº†ã€‚\n- è§£æå®¢æˆ·ç«¯è¯·æ±‚çš„ body ä¸­çš„å†…å®¹ï¼šbody-parser\n- cookie è§£æä¸­é—´ä»¶ï¼šcookie-parser\n- æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶ï¼šmulter\n\nä½¿ç”¨å‘½ä»¤ `npm i åŒ…åç§° --save` å®‰è£…åˆ°é¡¹ç›®ä¸­ï¼Œç„¶åå¼•å…¥é¡¹ç›®ä½¿ç”¨å³å¯ã€‚\n","source":"_posts/Node.JS-å­¦ä¹ ç¬”è®°-[05]----Express.md","raw":"---\ntitle: 'Node.JS å­¦ä¹ ç¬”è®° [05] -- Express'\ndate: 2015-01-06 21:24:40\ntags:\ncomments: false\n---\n\n***Express*** æ˜¯ä¸€ä¸ªåŸºäº Node.js å¹³å°çš„æç®€ã€çµæ´»çš„ Web åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œå®ƒæä¾›ä¸€ç³»åˆ—å¼ºå¤§çš„ç‰¹æ€§ï¼Œå¸®åŠ©ä½ åˆ›å»ºå„ç§ Web å’Œç§»åŠ¨è®¾å¤‡åº”ç”¨ã€‚Express çš„æ ¸å¿ƒç‰¹æ€§å¯ä»¥æ¦‚æ‹¬ä»¥ä¸‹ä¸‰ç‚¹ã€‚\n<!-- more -->\n\n- å¯ä»¥è®¾ç½®ä¸­é—´ä»¶æ¥å“åº” HTTP è¯·æ±‚ã€‚\n- å®šä¹‰äº†è·¯ç”±è¡¨ç”¨äºæ‰§è¡Œä¸åŒçš„ HTTP è¯·æ±‚åŠ¨ä½œã€‚\n- å¯ä»¥é€šè¿‡å‘æ¨¡æ¿ä¼ é€’å‚æ•°æ¥åŠ¨æ€æ¸²æŸ“ HTML é¡µé¢ã€‚\n\nä¸‹é¢å­¦ä¹ çš„çŸ¥è¯†ç‚¹ï¼Œéƒ½ä¼šå›´ç»•è¿™å‡ ä¸ªç‰¹æ€§å±•å¼€ã€‚\n\n### Express å®‰è£…\n#### åœ¨é¡¹ç›®ä¸­å¼•å…¥ Express\n```bash\ncd projectName              # è¿›å…¥æ–°å»ºçš„ Node.js é¡¹ç›®\nnpm init                    # åˆå§‹åŒ–é¡¹ç›®é…ç½®æ–‡ä»¶\nnpm install express --save  # å®‰è£… Express æ¨¡å—åˆ°é¡¹ç›®é…ç½®æ–‡ä»¶ä¸­\n```\né€šè¿‡ä¸Šé—¨çš„å‘½ä»¤ï¼Œå°±å¯ä»¥å®Œæˆ Express çš„å®‰è£…ï¼Œä¸‹é¢åœ¨ `app.js` ä¸­ä½¿ç”¨ Express å§ï¼\n```js\nvar express = require('express');\nvar app = express();\n\napp.get('/', function (req, res) {\n    res.send('Hello,Express!');\n});\n\napp.listen(8080, function () {\n    console.log('Express running at http://127.0.0.1:8080/');\n});\n```\n\n#### ä½¿ç”¨ Express-generator\nä¸ºäº†æ–¹ä¾¿å¼€å‘è€…ï¼Œæ›´ä¾¿æ·çš„ä½¿ç”¨ Express ç”Ÿæˆé¡¹ç›®ï¼Œå®˜æ–¹æä¾›çš„å¿«é€Ÿçš„ç”Ÿæˆå·¥å…· `Express-generator`ï¼Œè™½ç„¶ç”Ÿæˆéå¸¸å¿«é€Ÿæ–¹ä¾¿ï¼Œä½†æ˜¯ä½œä¸ºåˆå­¦è€…ï¼Œè¿˜æ˜¯è¦å¼„æ¸…æ¥šé‡Œé¢æ¯æ¡å‘½ä»¤æ‰€ä»£è¡¨çš„å«ä¹‰ï¼Œæœ€åå†ä½¿ç”¨å®˜æ–¹æä¾›çš„å·¥å…·å¿«é€Ÿç”Ÿæˆã€‚æ‰“å¼€ç»ˆç«¯ï¼Œå› ä¸ºæˆ‘æ˜¯ MacOSï¼Œæ‰€ä»¥å®‰è£…çš„æ—¶å€™è¦åŠ ä¸Š `sudo` å¦åˆ™ä¼šæŠ¥é”™æç¤ºæƒé™ä¸å¤Ÿã€‚\n```bash\nsudo npm install express-generator -g  # å…¨å±€å®‰è£…\nexpress mywebapp                       # åˆ›å»º mywebapp é¡¹ç›®\ncd mywebapp && npm install             # å®‰è£…ä¾èµ–æ–‡ä»¶\nnpm start                              # å¯åŠ¨é¡¹ç›®\n```\nå¯åŠ¨é¡¹ç›®åï¼Œå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­é¢„è§ˆäº†ï¼Œè®¿é—®åœ°å€ï¼šhttp://127.0.0.1:3000/ ã€‚\n\n<div class=\"tip\">\nå¯åŠ¨å‰éœ€è¦å…³é—­å…¶å®ƒå·²ç»å¯ç”¨çš„ Web æœåŠ¡ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´ç«¯å£å ç”¨å¯åŠ¨ä¸æˆåŠŸã€‚\n</div>\n\n### Express è·¯ç”±\n> è·¯ç”±æ˜¯æŒ‡å¦‚ä½•å®šä¹‰åº”ç”¨çš„ç«¯ç‚¹ï¼ˆURLsï¼‰ä»¥åŠå¦‚ä½•å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚\n\n#### åŸºç¡€ç”¨æ³•\nç®€å•ç†è§£ï¼Œå…¶å®å°±æ˜¯æ ¹æ®ä¸åŒçš„è¯·æ±‚ï¼Œæ¥å“åº”ä¸ä¹‹å¯¹åº”çš„é¡µé¢ã€‚æ¯”å¦‚ï¼Œå½“ç”¨æˆ·è®¿é—® http://localhost/images/ æ—¶ï¼Œæ ¹æ® URL å¯ä»¥çœ‹å‡ºï¼Œè¯·æ±‚çš„æ˜¯ `/images` è¿™ä¸ªç›®å½•ï¼Œé‚£ä¹ˆé€šè¿‡è·¯ç”±ï¼Œæ‰¾åˆ°è¿™ä¸ªé¡µé¢å¹¶è¿”å›ç»™è¯·æ±‚çš„ç”¨æˆ·ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«è·¯ç”±ã€‚æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚\n```js\nvar express = require('express');\nvar app = express();\n\n// å½“ç”¨æˆ·è¯·æ±‚è®¿é—® / æ—¶ï¼Œå“åº”ä¸€ä¸ª Hello,Express! å­—ç¬¦ä¸²ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªç®€å•è·¯ç”±\napp.get('/', function (req, res) {\n    res.send('Hello,Express!');\n});\n```\nè¿™é‡Œéœ€è¦æ³¨æ„ `app.all()` ,å®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è·¯ç”±æ–¹æ³•ï¼Œæ²¡æœ‰ä»»ä½• HTTP æ–¹æ³•ä¸å…¶å¯¹åº”ï¼Œå®ƒçš„ä½œç”¨æ˜¯å¯¹äºä¸€ä¸ªè·¯å¾„ä¸Šçš„æ‰€æœ‰è¯·æ±‚åŠ è½½ä¸­é—´ä»¶ã€‚ all ç›¸å½“äºæ—¢å¯ä»¥å¤„ç† `GET`ï¼Œä¹Ÿå¯ä»¥å¤„ç† `POST` ã€‚\n\n#### Router æ–¹æ³•\né€šè¿‡ `express.Router` ç±»å¯ä»¥åˆ›å»ºç‹¬ç«‹æ¨¡å—çš„è·¯ç”±æ¨¡å—ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯ä»¥æŒ‚è½½çš„è·¯ç”±å¯¹è±¡ï¼ŒæŠŠè·¯ç”±æ¨¡å—åˆ†ç¦»å‡ºé¡¹ç›®ï¼Œè®©æ•´ä¸ªé¡¹ç›®ç»“æ„æ¸…æ™°ã€æ–¹ä¾¿ç®¡ç†ï¼Œè¿™é‡Œå…‰è¯´è¿˜æ˜¯æŒºæŠ½è±¡ï¼Œä¸¾ä¸ªä¾‹å­ã€‚\n```bash\n# ç›®å½•ç»“æ„\n.\nâ”œâ”€â”€ index.js\nâ”œâ”€â”€ node_modules\nâ”‚Â Â  â”œâ”€â”€ body-parser\nâ”‚Â Â  â””â”€â”€ express\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ router\nâ”‚Â Â  â”œâ”€â”€ admin.js\nâ”‚Â Â  â””â”€â”€ home.js\nâ””â”€â”€ views\n    â”œâ”€â”€ admin\n    â””â”€â”€ home\n```\n```js\n// index.js\nvar express = require('express');\nvar bodyparser = require('body-parser');\n// å¼•å…¥å¤–éƒ¨è·¯ç”±æ¨¡å—\nvar home = require('./router/home');\nvar admin = require('./router/admin');\nvar app = express();\n\n// ä½¿ç”¨ä¸­é—´ä»¶ bodyparser ï¼Œåé¢å¯ä»¥åœ¨ req.body ä¸­åˆ†æå‡º POST è¯·æ±‚ä½“çš„å†…å®¹\napp.use(bodyparser.urlencoded({extended:false}));\n\n// ä½¿ç”¨å¤–éƒ¨è·¯ç”±æ¨¡å—\napp.use('/',home);\napp.use('/admin',admin);\n\napp.listen(8080,function () {\n   console.log('visit http://127.0.0.1:8080/');\n});\n```\n\n```js\n// admin.js\nvar express = require('express');\nvar router = express.Router();// ç”¨ Router æ„é€ å‡½æ•°å®ä¾‹åŒ– router å¯¹è±¡\nvar path = require('path');\n\nrouter.get('/login.html', function (req, res) {\n    res.sendFile(path.resolve(__dirname + '/../views/admin/' + 'login.html'));\n});\n\nrouter.get('/user.html', function (req, res) {\n    res.sendFile(path.resolve(__dirname + '/../views/admin/' + 'user.html'));\n});\n\nrouter.post('/login.html', function (req, res) {// /admin/login.html\n    res.sendFile(path.resolve(__dirname + '/../views/admin/' + 'login.html'));\n});\n\nmodule.exports = router;// æš´éœ²ç»™å¤–éƒ¨è°ƒç”¨è¯¥è·¯ç”±\n```\n\n### Express å“åº”å¯¹è±¡\né€šè¿‡å“åº”ï¼ˆResponseï¼‰å¯¹è±¡ï¼ŒæœåŠ¡å™¨å¯ä»¥è¿”å›ä¸€ä¸ªæ¥è‡ªå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰çš„ `Request` ,æœ€ç»ˆè¿”å›ç»™ç”¨æˆ·çš„å…¶å®å°±æ˜¯ä¸€ä¸ªç»è¿‡ä¸šåŠ¡é€»è¾‘å±‚å¤„ç†çš„ `res` å¯¹è±¡ã€‚æ¥äº†è§£ä¸‹ Express çš„å“åº”å¯¹è±¡å§ã€‚\n\n#### send()\nExpress å·²ç»å°è£…è¿‡äº†åŸç”Ÿ Node.js çš„å“åº”æ–¹æ³•ï¼Œåœ¨åŸç”Ÿ Node.js ä¸­ï¼Œé€šè¿‡ `res.write()` æ–¹æ³•å¯ä»¥è¿”å›å­—ç¬¦ä¸²å’Œ Bufferã€‚è€Œ Express ä¸­çš„ `send()` å¯ä»¥è¿”å›ä»»æ„æ•°æ®ç±»å‹ï¼Œå¦‚æµã€æ•°æ®ã€æ™®é€šæ–‡æœ¬ç­‰ï¼Œæ¥çœ‹ä¸ªä¾‹å­ã€‚\n```js\nres.send(new Buffer('ifyour')); // Buffer\nres.send({\"name\": \"ifyour\"});   // JSON\nres.send('<p>some html</p>');   // HTML\nres.status(404).send('404 Not Find'); // è®¾ç½®çŠ¶æ€ç å¹¶è¿”å›æç¤º\n//...\n```\n\n#### json()\né€šè¿‡ `json()` æ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ª `JSON` å¯¹è±¡ï¼Œç”¨äº Ajax ç­‰ã€‚\n```js\nres.json(null);\nres.json({\"user\": \"ifyour\"});\nres.status(500).json({\"error\": \"message\"});\n```\n\n#### render()\n`render` ç”¨äºæ¸²æŸ“æ¨¡æ¿å¼•æ“ï¼Œæ¯”å¦‚åœ¨ä½¿ç”¨ [ejs](https://github.com/tj/ejs) æ¨¡æ¿å¼•æ“æ—¶ï¼Œå“åº”ç”¨æˆ·è¯·æ±‚å°±å¯ä»¥ä½¿ç”¨ `res.render()` è¿”å›ç»™ç”¨æˆ·ä¸€ä¸ªæ¸²æŸ“å¥½çš„é¡µé¢ã€‚è¿™ä¸ªç”¨çš„æ¯”è¾ƒå¤šï¼Œæˆ‘æ¥ä¸¾ä¸ªä¾‹å­ã€‚\n```bash\n# ç›®å½•ç»“æ„\n.\nâ”œâ”€â”€ index.js\nâ”œâ”€â”€ node_modules\nâ”‚Â Â  â”œâ”€â”€ ejs\nâ”‚Â Â  â””â”€â”€ express\nâ”œâ”€â”€ package.json\nâ””â”€â”€ views\n    â””â”€â”€ login.html\n```\n```html\n<!-- ejs æ¨¡æ¿å¼•æ“ï¼Œå®šä¹‰äº† /login.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\n<!-- æ³¨æ„ ejs æ¨¡æ¿ä¸­å˜é‡çš„å†™æ³• -->\n<h1>æ¬¢è¿ä½ ï¼Œ<%=name%></h1>\n</body>\n</html>\n```\n```js\n// index.js\nvar express = require('express');\nvar ejs = require('ejs'); // å¼•å…¥ ejs æ¨¡æ¿å¼•æ“\nvar path = require('path');\nvar app = express();\n\nvar viewsPath = path.join(__dirname, 'views');// views æ˜¯æ¨¡æ¿ç›®å½•\n// è®¾ç½® express views å±‚ï¼Œæ¨¡æ¿æ ¹è·¯å¾„\napp.set('views', viewsPath);\n\n// è®¾ç½® express å®ä¾‹çš„æ¨¡æ¿è¯­è¨€\napp.set('view engine', 'html');\n\n// æŠŠ express å®ä¾‹çš„æ¨¡æ¿å¼•æ“å’Œ ejs æ¨¡æ¿å¼•æ“å…³è”\napp.engine('html', ejs.__express);\n\napp.get('/login.html', function (req, res) {\n    res.render('login', {name: \"ifyour\"});// æ›¿æ¢åˆ°æ¨¡æ¿å˜é‡ä¸­çš„ name ä¸º ifyour\n});\n\napp.listen(8080, function () {\n    console.log('visit http://127.0.0.1:8080/');\n});\n```\n<div class=\"tip\">\n`__dirname` æ˜¯ Node.js ä¸­å®šä¹‰çš„ `global` å…¨å±€å˜é‡ï¼Œè·å–å½“å‰æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œè¿”å› `string` ç±»å‹ã€‚\n</div>\n\n#### download()\n```js\nres.download('./123.doc'); // ä¸‹è½½å½“å‰ç›®å½•ä¸‹é¢çš„123.docæ–‡ä»¶ã€‚\nres.download('./123.doc','books.doc'); // ä¸‹è½½å½“å‰ç›®å½•ä¸‹é¢çš„123.docæ–‡ä»¶ï¼Œé‡å‘½åä¸º books.doc\n```\n#### redirect()\n```js\n// é‡å®šå‘åˆ°æŒ‡å®šçš„ URL è·¯å¾„\nres.redirect('/404.html');\nres.redirect('https://www.google.com/');\n```\n\næ›´å¤šå“åº”å¯¹è±¡çš„æ–¹æ³•ï¼Œå‚è€ƒ [Express å®˜æ–¹ API](http://www.expressjs.com.cn/4x/api.html#res)ã€‚\n### Express è¯·æ±‚å¯¹è±¡\nExpress ä¸­çš„ `Request` å¯¹è±¡ï¼ŒåŒ…å«äº†ä¸€æ¬¡è¯·æ±‚ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œæ¯”å¦‚è¯·æ±‚å¤´ã€è·¯å¾„ã€Cookies ç­‰ï¼Œè·å–è¯·æ±‚å¤´ä¸­çš„ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ ¹æ®è¿™äº›ä¿¡æ¯å¤„ç†ä¸šåŠ¡é€»è¾‘å±‚ï¼Œæœ€ç»ˆå°†å¤„ç†è¿‡åçš„æ•°æ®è¿”å›ç»™ç”¨æˆ·ã€‚è¿™é‡Œæ€»ç»“äº†å¸¸ç”¨çš„è¯·æ±‚å¯¹è±¡æ–¹æ³•ã€‚\n\n#### URL ä¸­çš„å‚æ•°\n```js\n// æ–¹å¼ä¸€ï¼š req.query.å‚æ•°å\n// e.g.  http://localhost:3000/user?name=ifyour\nconsole.log(req.query.name);\n// => ifyour\n\n// æ–¹å¼äºŒï¼šreq.params.å‚æ•°å\n//e.g.  http://localhost/post/123123\nrouter.get('/post/:id', function (req, res) {\n    console.log(req.params.id);\n    // => 123123\n});\n```\n\n#### è¡¨å•ä¸­çš„å‚æ•°\n```js\n// æ–¹å¼ä¸€ï¼šè¯­æ³•ï¼šreq.param.å‚æ•°å  æ³¨æ„è¿™é‡Œæ²¡åŠ  s\n// e.g. <input type=\"text\" name=\"user\">\nconsole.log(req.param('user'));\n\n\n// æ–¹å¼äºŒï¼šä½¿ç”¨ body-parser ä¸­é—´ä»¶\n// e.g. <input type=\"text\" name=\"user\">\nvar bodyparser = require('body-parser');\nconsole.console.log(req.boy.user);\n```\n\n### Express ä¸­é—´ä»¶\nExpress æ˜¯ä¸€ä¸ªè‡ªèº«åŠŸèƒ½æç®€ï¼Œå®Œå…¨æ˜¯ç”±è·¯ç”±å’Œä¸­é—´ä»¶æ„æˆä¸€ä¸ªçš„ Web å¼€å‘æ¡†æ¶ï¼šä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œä¸€ä¸ª Express åº”ç”¨å°±æ˜¯åœ¨è°ƒç”¨å„ç§ä¸­é—´ä»¶ã€‚\n![](http://ww3.sinaimg.cn/large/6057861cgw1fbcrpk71zxj20sg03kaaa.jpg)\nå¦‚å›¾ï¼Œä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰ä½äºå®¢æˆ·ç«¯å’Œè·¯ç”±ä¹‹é—´ï¼Œå®ƒå¥½æ¯”æ˜¯ä¸€ä¸ªæ¼æ–—ï¼Œç»è¿‡è¿™ä¸ªæ¼æ–—çš„ `Request` å¯¹è±¡å’Œ `Response` å¯¹è±¡ä»¥åŠå¾ªç¯æµç¨‹ä¸­çš„ `Next` ä¼šè¢«å¤„ç†ï¼Œæ¯”å¦‚æ­£ç¡®æ€§æ ¡éªŒã€ä¸šåŠ¡é€»è¾‘å¤„ç†ç­‰ã€‚\n\n- æ‰§è¡Œä»»ä½•ä»£ç \n- ä¿®æ”¹è¯·æ±‚å’Œå“åº”å¯¹è±¡\n- ç»ˆç»“è¯·æ±‚-å“åº”å¾ªç¯\n- è°ƒç”¨å †æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶\n\n<div class=\"tip\">\nå¦‚æœå½“å‰ä¸­é—´ä»¶æ²¡æœ‰ç»ˆç»“è¯·æ±‚-å“åº”å¾ªç¯ï¼Œåˆ™å¿…é¡»è°ƒç”¨ next() æ–¹æ³•å°†æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå¦åˆ™è¯·æ±‚å°±ä¼šæŒ‚èµ·ã€‚\n</div>\nä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ï¼Œå¦‚ä½•é€šè¿‡ `next()` æ–¹æ³•æŠŠæ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚\n```js\nvar app = express();\napp.use(function (req, res, next) {\n   var accessToken = req.query.accessToken;\n   //æ£€æŸ¥è¯·æ±‚ä¸­æ˜¯å¦å«æœ‰â€œè®¤è¯ç‰Œâ€ï¼Œå­˜åœ¨å°±ç»§ç»­æ‰§è¡Œã€‚\n   if(accessToken){\n       next(); // æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶\n       }else{\n          res.send(â€œè¯·æ±‚å¿…é¡»åŒ…å«tokenâ€);\n        }\n});\n// ...\n```\n\n#### åº”ç”¨çº§ä¸­é—´ä»¶\nåº”ç”¨çº§ä¸­é—´ä»¶å°±æ˜¯ç»‘å®šåˆ°ç”¨ `express()` ç”Ÿæˆçš„å¯¹è±¡ `app` èº«ä¸Šçš„ï¼Œæ¯”å¦‚ `app.use()` ä¸­çš„ `use` æ–¹æ³•ï¼Œä»¥åŠ `app.post()` ã€`app.get()` ä¸­çš„ `POST` å’Œ `GET` æ–¹æ³•ç­‰ã€‚\n#### å†…ç½®ä¸­é—´ä»¶\n```js\n// è®¾ç½®å…¬å…±é™æ€ç›®å½•ï¼Œç”¨äºå­˜æ”¾ css js image ç­‰æ–‡ä»¶ï¼Œé¡¹ç›®ç›®å½•é‡Œæœ‰ images ç›®å½•å­˜æ”¾ 1.png\n// é‚£ä¹ˆè®¿é—®ï¼šhttp://localhost/images/1.png è·å–\napp.use(express.static('public'));\n```\n#### ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶\nä¸­é—´ä»¶å¯ä»¥è¯´æ˜¯æ•´ä¸ª Express çš„ç²¾åæ‰€åœ¨äº†ï¼Œä½¿ç”¨ä¸­é—´ä»¶å¯ä»¥å‡ å¤§çš„æ‰©å±•é¡¹ç›®çš„åŠŸèƒ½ã€‚ä½¿ç”¨æ–¹æ³•éƒ½å·®ä¸å¤šï¼Œè¿™é‡Œä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„ï¼Œå…·ä½“ä½¿ç”¨æ–¹å¼éœ€è¦çœ‹å®˜æ–¹çš„æ–‡æ¡£äº†ã€‚\n- è§£æå®¢æˆ·ç«¯è¯·æ±‚çš„ body ä¸­çš„å†…å®¹ï¼šbody-parser\n- cookie è§£æä¸­é—´ä»¶ï¼šcookie-parser\n- æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶ï¼šmulter\n\nä½¿ç”¨å‘½ä»¤ `npm i åŒ…åç§° --save` å®‰è£…åˆ°é¡¹ç›®ä¸­ï¼Œç„¶åå¼•å…¥é¡¹ç›®ä½¿ç”¨å³å¯ã€‚\n","slug":"Node.JS-å­¦ä¹ ç¬”è®°-[05]----Express","published":1,"updated":"2019-12-07T04:59:34.226Z","layout":"post","photos":[],"link":"","_id":"ck3v60jtg000fr9q9o5bovpy9","content":"<p><strong><em>Express</em></strong> æ˜¯ä¸€ä¸ªåŸºäº Node.js å¹³å°çš„æç®€ã€çµæ´»çš„ Web åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œå®ƒæä¾›ä¸€ç³»åˆ—å¼ºå¤§çš„ç‰¹æ€§ï¼Œå¸®åŠ©ä½ åˆ›å»ºå„ç§ Web å’Œç§»åŠ¨è®¾å¤‡åº”ç”¨ã€‚Express çš„æ ¸å¿ƒç‰¹æ€§å¯ä»¥æ¦‚æ‹¬ä»¥ä¸‹ä¸‰ç‚¹ã€‚<br><a id=\"more\"></a></p>\n<ul>\n<li>å¯ä»¥è®¾ç½®ä¸­é—´ä»¶æ¥å“åº” HTTP è¯·æ±‚ã€‚</li>\n<li>å®šä¹‰äº†è·¯ç”±è¡¨ç”¨äºæ‰§è¡Œä¸åŒçš„ HTTP è¯·æ±‚åŠ¨ä½œã€‚</li>\n<li>å¯ä»¥é€šè¿‡å‘æ¨¡æ¿ä¼ é€’å‚æ•°æ¥åŠ¨æ€æ¸²æŸ“ HTML é¡µé¢ã€‚</li>\n</ul>\n<p>ä¸‹é¢å­¦ä¹ çš„çŸ¥è¯†ç‚¹ï¼Œéƒ½ä¼šå›´ç»•è¿™å‡ ä¸ªç‰¹æ€§å±•å¼€ã€‚</p>\n<h3 id=\"Express-å®‰è£…\"><a href=\"#Express-å®‰è£…\" class=\"headerlink\" title=\"Express å®‰è£…\"></a>Express å®‰è£…</h3><h4 id=\"åœ¨é¡¹ç›®ä¸­å¼•å…¥-Express\"><a href=\"#åœ¨é¡¹ç›®ä¸­å¼•å…¥-Express\" class=\"headerlink\" title=\"åœ¨é¡¹ç›®ä¸­å¼•å…¥ Express\"></a>åœ¨é¡¹ç›®ä¸­å¼•å…¥ Express</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> projectName              <span class=\"comment\"># è¿›å…¥æ–°å»ºçš„ Node.js é¡¹ç›®</span></span><br><span class=\"line\">npm init                    <span class=\"comment\"># åˆå§‹åŒ–é¡¹ç›®é…ç½®æ–‡ä»¶</span></span><br><span class=\"line\">npm install express --save  <span class=\"comment\"># å®‰è£… Express æ¨¡å—åˆ°é¡¹ç›®é…ç½®æ–‡ä»¶ä¸­</span></span><br></pre></td></tr></table></figure>\n<p>é€šè¿‡ä¸Šé—¨çš„å‘½ä»¤ï¼Œå°±å¯ä»¥å®Œæˆ Express çš„å®‰è£…ï¼Œä¸‹é¢åœ¨ <code>app.js</code> ä¸­ä½¿ç”¨ Express å§ï¼<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">'/'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    res.send(<span class=\"string\">'Hello,Express!'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(<span class=\"number\">8080</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Express running at http://127.0.0.1:8080/'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"ä½¿ç”¨-Express-generator\"><a href=\"#ä½¿ç”¨-Express-generator\" class=\"headerlink\" title=\"ä½¿ç”¨ Express-generator\"></a>ä½¿ç”¨ Express-generator</h4><p>ä¸ºäº†æ–¹ä¾¿å¼€å‘è€…ï¼Œæ›´ä¾¿æ·çš„ä½¿ç”¨ Express ç”Ÿæˆé¡¹ç›®ï¼Œå®˜æ–¹æä¾›çš„å¿«é€Ÿçš„ç”Ÿæˆå·¥å…· <code>Express-generator</code>ï¼Œè™½ç„¶ç”Ÿæˆéå¸¸å¿«é€Ÿæ–¹ä¾¿ï¼Œä½†æ˜¯ä½œä¸ºåˆå­¦è€…ï¼Œè¿˜æ˜¯è¦å¼„æ¸…æ¥šé‡Œé¢æ¯æ¡å‘½ä»¤æ‰€ä»£è¡¨çš„å«ä¹‰ï¼Œæœ€åå†ä½¿ç”¨å®˜æ–¹æä¾›çš„å·¥å…·å¿«é€Ÿç”Ÿæˆã€‚æ‰“å¼€ç»ˆç«¯ï¼Œå› ä¸ºæˆ‘æ˜¯ MacOSï¼Œæ‰€ä»¥å®‰è£…çš„æ—¶å€™è¦åŠ ä¸Š <code>sudo</code> å¦åˆ™ä¼šæŠ¥é”™æç¤ºæƒé™ä¸å¤Ÿã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo npm install express-generator -g  <span class=\"comment\"># å…¨å±€å®‰è£…</span></span><br><span class=\"line\">express mywebapp                       <span class=\"comment\"># åˆ›å»º mywebapp é¡¹ç›®</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> mywebapp &amp;&amp; npm install             <span class=\"comment\"># å®‰è£…ä¾èµ–æ–‡ä»¶</span></span><br><span class=\"line\">npm start                              <span class=\"comment\"># å¯åŠ¨é¡¹ç›®</span></span><br></pre></td></tr></table></figure></p>\n<p>å¯åŠ¨é¡¹ç›®åï¼Œå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­é¢„è§ˆäº†ï¼Œè®¿é—®åœ°å€ï¼š<a href=\"http://127.0.0.1:3000/\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1:3000/</a> ã€‚</p>\n<div class=\"tip\"><br>å¯åŠ¨å‰éœ€è¦å…³é—­å…¶å®ƒå·²ç»å¯ç”¨çš„ Web æœåŠ¡ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´ç«¯å£å ç”¨å¯åŠ¨ä¸æˆåŠŸã€‚<br></div>\n\n<h3 id=\"Express-è·¯ç”±\"><a href=\"#Express-è·¯ç”±\" class=\"headerlink\" title=\"Express è·¯ç”±\"></a>Express è·¯ç”±</h3><blockquote>\n<p>è·¯ç”±æ˜¯æŒ‡å¦‚ä½•å®šä¹‰åº”ç”¨çš„ç«¯ç‚¹ï¼ˆURLsï¼‰ä»¥åŠå¦‚ä½•å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</p>\n</blockquote>\n<h4 id=\"åŸºç¡€ç”¨æ³•\"><a href=\"#åŸºç¡€ç”¨æ³•\" class=\"headerlink\" title=\"åŸºç¡€ç”¨æ³•\"></a>åŸºç¡€ç”¨æ³•</h4><p>ç®€å•ç†è§£ï¼Œå…¶å®å°±æ˜¯æ ¹æ®ä¸åŒçš„è¯·æ±‚ï¼Œæ¥å“åº”ä¸ä¹‹å¯¹åº”çš„é¡µé¢ã€‚æ¯”å¦‚ï¼Œå½“ç”¨æˆ·è®¿é—® <a href=\"http://localhost/images/\" target=\"_blank\" rel=\"noopener\">http://localhost/images/</a> æ—¶ï¼Œæ ¹æ® URL å¯ä»¥çœ‹å‡ºï¼Œè¯·æ±‚çš„æ˜¯ <code>/images</code> è¿™ä¸ªç›®å½•ï¼Œé‚£ä¹ˆé€šè¿‡è·¯ç”±ï¼Œæ‰¾åˆ°è¿™ä¸ªé¡µé¢å¹¶è¿”å›ç»™è¯·æ±‚çš„ç”¨æˆ·ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«è·¯ç”±ã€‚æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å½“ç”¨æˆ·è¯·æ±‚è®¿é—® / æ—¶ï¼Œå“åº”ä¸€ä¸ª Hello,Express! å­—ç¬¦ä¸²ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªç®€å•è·¯ç”±</span></span><br><span class=\"line\">app.get(<span class=\"string\">'/'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    res.send(<span class=\"string\">'Hello,Express!'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>è¿™é‡Œéœ€è¦æ³¨æ„ <code>app.all()</code> ,å®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è·¯ç”±æ–¹æ³•ï¼Œæ²¡æœ‰ä»»ä½• HTTP æ–¹æ³•ä¸å…¶å¯¹åº”ï¼Œå®ƒçš„ä½œç”¨æ˜¯å¯¹äºä¸€ä¸ªè·¯å¾„ä¸Šçš„æ‰€æœ‰è¯·æ±‚åŠ è½½ä¸­é—´ä»¶ã€‚ all ç›¸å½“äºæ—¢å¯ä»¥å¤„ç† <code>GET</code>ï¼Œä¹Ÿå¯ä»¥å¤„ç† <code>POST</code> ã€‚</p>\n<h4 id=\"Router-æ–¹æ³•\"><a href=\"#Router-æ–¹æ³•\" class=\"headerlink\" title=\"Router æ–¹æ³•\"></a>Router æ–¹æ³•</h4><p>é€šè¿‡ <code>express.Router</code> ç±»å¯ä»¥åˆ›å»ºç‹¬ç«‹æ¨¡å—çš„è·¯ç”±æ¨¡å—ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯ä»¥æŒ‚è½½çš„è·¯ç”±å¯¹è±¡ï¼ŒæŠŠè·¯ç”±æ¨¡å—åˆ†ç¦»å‡ºé¡¹ç›®ï¼Œè®©æ•´ä¸ªé¡¹ç›®ç»“æ„æ¸…æ™°ã€æ–¹ä¾¿ç®¡ç†ï¼Œè¿™é‡Œå…‰è¯´è¿˜æ˜¯æŒºæŠ½è±¡ï¼Œä¸¾ä¸ªä¾‹å­ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ç›®å½•ç»“æ„</span></span><br><span class=\"line\">.</span><br><span class=\"line\">â”œâ”€â”€ index.js</span><br><span class=\"line\">â”œâ”€â”€ node_modules</span><br><span class=\"line\">â”‚Â Â  â”œâ”€â”€ body-parser</span><br><span class=\"line\">â”‚Â Â  â””â”€â”€ express</span><br><span class=\"line\">â”œâ”€â”€ package.json</span><br><span class=\"line\">â”œâ”€â”€ router</span><br><span class=\"line\">â”‚Â Â  â”œâ”€â”€ admin.js</span><br><span class=\"line\">â”‚Â Â  â””â”€â”€ home.js</span><br><span class=\"line\">â””â”€â”€ views</span><br><span class=\"line\">    â”œâ”€â”€ admin</span><br><span class=\"line\">    â””â”€â”€ home</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> bodyparser = <span class=\"built_in\">require</span>(<span class=\"string\">'body-parser'</span>);</span><br><span class=\"line\"><span class=\"comment\">// å¼•å…¥å¤–éƒ¨è·¯ç”±æ¨¡å—</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> home = <span class=\"built_in\">require</span>(<span class=\"string\">'./router/home'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> admin = <span class=\"built_in\">require</span>(<span class=\"string\">'./router/admin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨ä¸­é—´ä»¶ bodyparser ï¼Œåé¢å¯ä»¥åœ¨ req.body ä¸­åˆ†æå‡º POST è¯·æ±‚ä½“çš„å†…å®¹</span></span><br><span class=\"line\">app.use(bodyparser.urlencoded(&#123;<span class=\"attr\">extended</span>:<span class=\"literal\">false</span>&#125;));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨å¤–éƒ¨è·¯ç”±æ¨¡å—</span></span><br><span class=\"line\">app.use(<span class=\"string\">'/'</span>,home);</span><br><span class=\"line\">app.use(<span class=\"string\">'/admin'</span>,admin);</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(<span class=\"number\">8080</span>,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'visit http://127.0.0.1:8080/'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// admin.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> router = express.Router();<span class=\"comment\">// ç”¨ Router æ„é€ å‡½æ•°å®ä¾‹åŒ– router å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">'/login.html'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    res.sendFile(path.resolve(__dirname + <span class=\"string\">'/../views/admin/'</span> + <span class=\"string\">'login.html'</span>));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">'/user.html'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    res.sendFile(path.resolve(__dirname + <span class=\"string\">'/../views/admin/'</span> + <span class=\"string\">'user.html'</span>));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">router.post(<span class=\"string\">'/login.html'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;<span class=\"comment\">// /admin/login.html</span></span><br><span class=\"line\">    res.sendFile(path.resolve(__dirname + <span class=\"string\">'/../views/admin/'</span> + <span class=\"string\">'login.html'</span>));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = router;<span class=\"comment\">// æš´éœ²ç»™å¤–éƒ¨è°ƒç”¨è¯¥è·¯ç”±</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"Express-å“åº”å¯¹è±¡\"><a href=\"#Express-å“åº”å¯¹è±¡\" class=\"headerlink\" title=\"Express å“åº”å¯¹è±¡\"></a>Express å“åº”å¯¹è±¡</h3><p>é€šè¿‡å“åº”ï¼ˆResponseï¼‰å¯¹è±¡ï¼ŒæœåŠ¡å™¨å¯ä»¥è¿”å›ä¸€ä¸ªæ¥è‡ªå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰çš„ <code>Request</code> ,æœ€ç»ˆè¿”å›ç»™ç”¨æˆ·çš„å…¶å®å°±æ˜¯ä¸€ä¸ªç»è¿‡ä¸šåŠ¡é€»è¾‘å±‚å¤„ç†çš„ <code>res</code> å¯¹è±¡ã€‚æ¥äº†è§£ä¸‹ Express çš„å“åº”å¯¹è±¡å§ã€‚</p>\n<h4 id=\"send\"><a href=\"#send\" class=\"headerlink\" title=\"send()\"></a>send()</h4><p>Express å·²ç»å°è£…è¿‡äº†åŸç”Ÿ Node.js çš„å“åº”æ–¹æ³•ï¼Œåœ¨åŸç”Ÿ Node.js ä¸­ï¼Œé€šè¿‡ <code>res.write()</code> æ–¹æ³•å¯ä»¥è¿”å›å­—ç¬¦ä¸²å’Œ Bufferã€‚è€Œ Express ä¸­çš„ <code>send()</code> å¯ä»¥è¿”å›ä»»æ„æ•°æ®ç±»å‹ï¼Œå¦‚æµã€æ•°æ®ã€æ™®é€šæ–‡æœ¬ç­‰ï¼Œæ¥çœ‹ä¸ªä¾‹å­ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">res.send(<span class=\"keyword\">new</span> Buffer(<span class=\"string\">'ifyour'</span>)); <span class=\"comment\">// Buffer</span></span><br><span class=\"line\">res.send(&#123;<span class=\"string\">\"name\"</span>: <span class=\"string\">\"ifyour\"</span>&#125;);   <span class=\"comment\">// JSON</span></span><br><span class=\"line\">res.send(<span class=\"string\">'&lt;p&gt;some html&lt;/p&gt;'</span>);   <span class=\"comment\">// HTML</span></span><br><span class=\"line\">res.status(<span class=\"number\">404</span>).send(<span class=\"string\">'404 Not Find'</span>); <span class=\"comment\">// è®¾ç½®çŠ¶æ€ç å¹¶è¿”å›æç¤º</span></span><br><span class=\"line\"><span class=\"comment\">//...</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"json\"><a href=\"#json\" class=\"headerlink\" title=\"json()\"></a>json()</h4><p>é€šè¿‡ <code>json()</code> æ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ª <code>JSON</code> å¯¹è±¡ï¼Œç”¨äº Ajax ç­‰ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">res.json(<span class=\"literal\">null</span>);</span><br><span class=\"line\">res.json(&#123;<span class=\"string\">\"user\"</span>: <span class=\"string\">\"ifyour\"</span>&#125;);</span><br><span class=\"line\">res.status(<span class=\"number\">500</span>).json(&#123;<span class=\"string\">\"error\"</span>: <span class=\"string\">\"message\"</span>&#125;);</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"render\"><a href=\"#render\" class=\"headerlink\" title=\"render()\"></a>render()</h4><p><code>render</code> ç”¨äºæ¸²æŸ“æ¨¡æ¿å¼•æ“ï¼Œæ¯”å¦‚åœ¨ä½¿ç”¨ <a href=\"https://github.com/tj/ejs\" target=\"_blank\" rel=\"noopener\">ejs</a> æ¨¡æ¿å¼•æ“æ—¶ï¼Œå“åº”ç”¨æˆ·è¯·æ±‚å°±å¯ä»¥ä½¿ç”¨ <code>res.render()</code> è¿”å›ç»™ç”¨æˆ·ä¸€ä¸ªæ¸²æŸ“å¥½çš„é¡µé¢ã€‚è¿™ä¸ªç”¨çš„æ¯”è¾ƒå¤šï¼Œæˆ‘æ¥ä¸¾ä¸ªä¾‹å­ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ç›®å½•ç»“æ„</span></span><br><span class=\"line\">.</span><br><span class=\"line\">â”œâ”€â”€ index.js</span><br><span class=\"line\">â”œâ”€â”€ node_modules</span><br><span class=\"line\">â”‚Â Â  â”œâ”€â”€ ejs</span><br><span class=\"line\">â”‚Â Â  â””â”€â”€ express</span><br><span class=\"line\">â”œâ”€â”€ package.json</span><br><span class=\"line\">â””â”€â”€ views</span><br><span class=\"line\">    â””â”€â”€ login.html</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ejs æ¨¡æ¿å¼•æ“ï¼Œå®šä¹‰äº† /login.html --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Title<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- æ³¨æ„ ejs æ¨¡æ¿ä¸­å˜é‡çš„å†™æ³• --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>æ¬¢è¿ä½ ï¼Œ<span class=\"tag\">&lt;<span class=\"name\">%=name%</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> ejs = <span class=\"built_in\">require</span>(<span class=\"string\">'ejs'</span>); <span class=\"comment\">// å¼•å…¥ ejs æ¨¡æ¿å¼•æ“</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> viewsPath = path.join(__dirname, <span class=\"string\">'views'</span>);<span class=\"comment\">// views æ˜¯æ¨¡æ¿ç›®å½•</span></span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½® express views å±‚ï¼Œæ¨¡æ¿æ ¹è·¯å¾„</span></span><br><span class=\"line\">app.set(<span class=\"string\">'views'</span>, viewsPath);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½® express å®ä¾‹çš„æ¨¡æ¿è¯­è¨€</span></span><br><span class=\"line\">app.set(<span class=\"string\">'view engine'</span>, <span class=\"string\">'html'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æŠŠ express å®ä¾‹çš„æ¨¡æ¿å¼•æ“å’Œ ejs æ¨¡æ¿å¼•æ“å…³è”</span></span><br><span class=\"line\">app.engine(<span class=\"string\">'html'</span>, ejs.__express);</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">'/login.html'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    res.render(<span class=\"string\">'login'</span>, &#123;<span class=\"attr\">name</span>: <span class=\"string\">\"ifyour\"</span>&#125;);<span class=\"comment\">// æ›¿æ¢åˆ°æ¨¡æ¿å˜é‡ä¸­çš„ name ä¸º ifyour</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(<span class=\"number\">8080</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'visit http://127.0.0.1:8080/'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<div class=\"tip\"><br><code>__dirname</code> æ˜¯ Node.js ä¸­å®šä¹‰çš„ <code>global</code> å…¨å±€å˜é‡ï¼Œè·å–å½“å‰æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œè¿”å› <code>string</code> ç±»å‹ã€‚<br></div>\n\n<h4 id=\"download\"><a href=\"#download\" class=\"headerlink\" title=\"download()\"></a>download()</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">res.download(<span class=\"string\">'./123.doc'</span>); <span class=\"comment\">// ä¸‹è½½å½“å‰ç›®å½•ä¸‹é¢çš„123.docæ–‡ä»¶ã€‚</span></span><br><span class=\"line\">res.download(<span class=\"string\">'./123.doc'</span>,<span class=\"string\">'books.doc'</span>); <span class=\"comment\">// ä¸‹è½½å½“å‰ç›®å½•ä¸‹é¢çš„123.docæ–‡ä»¶ï¼Œé‡å‘½åä¸º books.doc</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"redirect\"><a href=\"#redirect\" class=\"headerlink\" title=\"redirect()\"></a>redirect()</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// é‡å®šå‘åˆ°æŒ‡å®šçš„ URL è·¯å¾„</span></span><br><span class=\"line\">res.redirect(<span class=\"string\">'/404.html'</span>);</span><br><span class=\"line\">res.redirect(<span class=\"string\">'https://www.google.com/'</span>);</span><br></pre></td></tr></table></figure>\n<p>æ›´å¤šå“åº”å¯¹è±¡çš„æ–¹æ³•ï¼Œå‚è€ƒ <a href=\"http://www.expressjs.com.cn/4x/api.html#res\" target=\"_blank\" rel=\"noopener\">Express å®˜æ–¹ API</a>ã€‚</p>\n<h3 id=\"Express-è¯·æ±‚å¯¹è±¡\"><a href=\"#Express-è¯·æ±‚å¯¹è±¡\" class=\"headerlink\" title=\"Express è¯·æ±‚å¯¹è±¡\"></a>Express è¯·æ±‚å¯¹è±¡</h3><p>Express ä¸­çš„ <code>Request</code> å¯¹è±¡ï¼ŒåŒ…å«äº†ä¸€æ¬¡è¯·æ±‚ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œæ¯”å¦‚è¯·æ±‚å¤´ã€è·¯å¾„ã€Cookies ç­‰ï¼Œè·å–è¯·æ±‚å¤´ä¸­çš„ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ ¹æ®è¿™äº›ä¿¡æ¯å¤„ç†ä¸šåŠ¡é€»è¾‘å±‚ï¼Œæœ€ç»ˆå°†å¤„ç†è¿‡åçš„æ•°æ®è¿”å›ç»™ç”¨æˆ·ã€‚è¿™é‡Œæ€»ç»“äº†å¸¸ç”¨çš„è¯·æ±‚å¯¹è±¡æ–¹æ³•ã€‚</p>\n<h4 id=\"URL-ä¸­çš„å‚æ•°\"><a href=\"#URL-ä¸­çš„å‚æ•°\" class=\"headerlink\" title=\"URL ä¸­çš„å‚æ•°\"></a>URL ä¸­çš„å‚æ•°</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ–¹å¼ä¸€ï¼š req.query.å‚æ•°å</span></span><br><span class=\"line\"><span class=\"comment\">// e.g.  http://localhost:3000/user?name=ifyour</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(req.query.name);</span><br><span class=\"line\"><span class=\"comment\">// =&gt; ifyour</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–¹å¼äºŒï¼šreq.params.å‚æ•°å</span></span><br><span class=\"line\"><span class=\"comment\">//e.g.  http://localhost/post/123123</span></span><br><span class=\"line\">router.get(<span class=\"string\">'/post/:id'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(req.params.id);</span><br><span class=\"line\">    <span class=\"comment\">// =&gt; 123123</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"è¡¨å•ä¸­çš„å‚æ•°\"><a href=\"#è¡¨å•ä¸­çš„å‚æ•°\" class=\"headerlink\" title=\"è¡¨å•ä¸­çš„å‚æ•°\"></a>è¡¨å•ä¸­çš„å‚æ•°</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ–¹å¼ä¸€ï¼šè¯­æ³•ï¼šreq.param.å‚æ•°å  æ³¨æ„è¿™é‡Œæ²¡åŠ  s</span></span><br><span class=\"line\"><span class=\"comment\">// e.g. &lt;input type=\"text\" name=\"user\"&gt;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(req.param(<span class=\"string\">'user'</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–¹å¼äºŒï¼šä½¿ç”¨ body-parser ä¸­é—´ä»¶</span></span><br><span class=\"line\"><span class=\"comment\">// e.g. &lt;input type=\"text\" name=\"user\"&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> bodyparser = <span class=\"built_in\">require</span>(<span class=\"string\">'body-parser'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.console.log(req.boy.user);</span><br></pre></td></tr></table></figure>\n<h3 id=\"Express-ä¸­é—´ä»¶\"><a href=\"#Express-ä¸­é—´ä»¶\" class=\"headerlink\" title=\"Express ä¸­é—´ä»¶\"></a>Express ä¸­é—´ä»¶</h3><p>Express æ˜¯ä¸€ä¸ªè‡ªèº«åŠŸèƒ½æç®€ï¼Œå®Œå…¨æ˜¯ç”±è·¯ç”±å’Œä¸­é—´ä»¶æ„æˆä¸€ä¸ªçš„ Web å¼€å‘æ¡†æ¶ï¼šä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œä¸€ä¸ª Express åº”ç”¨å°±æ˜¯åœ¨è°ƒç”¨å„ç§ä¸­é—´ä»¶ã€‚<br><img src=\"http://ww3.sinaimg.cn/large/6057861cgw1fbcrpk71zxj20sg03kaaa.jpg\" alt=\"\"><br>å¦‚å›¾ï¼Œä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰ä½äºå®¢æˆ·ç«¯å’Œè·¯ç”±ä¹‹é—´ï¼Œå®ƒå¥½æ¯”æ˜¯ä¸€ä¸ªæ¼æ–—ï¼Œç»è¿‡è¿™ä¸ªæ¼æ–—çš„ <code>Request</code> å¯¹è±¡å’Œ <code>Response</code> å¯¹è±¡ä»¥åŠå¾ªç¯æµç¨‹ä¸­çš„ <code>Next</code> ä¼šè¢«å¤„ç†ï¼Œæ¯”å¦‚æ­£ç¡®æ€§æ ¡éªŒã€ä¸šåŠ¡é€»è¾‘å¤„ç†ç­‰ã€‚</p>\n<ul>\n<li>æ‰§è¡Œä»»ä½•ä»£ç </li>\n<li>ä¿®æ”¹è¯·æ±‚å’Œå“åº”å¯¹è±¡</li>\n<li>ç»ˆç»“è¯·æ±‚-å“åº”å¾ªç¯</li>\n<li>è°ƒç”¨å †æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶</li>\n</ul>\n<p><div class=\"tip\"><br>å¦‚æœå½“å‰ä¸­é—´ä»¶æ²¡æœ‰ç»ˆç»“è¯·æ±‚-å“åº”å¾ªç¯ï¼Œåˆ™å¿…é¡»è°ƒç”¨ next() æ–¹æ³•å°†æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå¦åˆ™è¯·æ±‚å°±ä¼šæŒ‚èµ·ã€‚<br></div><br>ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ï¼Œå¦‚ä½•é€šè¿‡ <code>next()</code> æ–¹æ³•æŠŠæ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> app = express();</span><br><span class=\"line\">app.use(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> accessToken = req.query.accessToken;</span><br><span class=\"line\">   <span class=\"comment\">//æ£€æŸ¥è¯·æ±‚ä¸­æ˜¯å¦å«æœ‰â€œè®¤è¯ç‰Œâ€ï¼Œå­˜åœ¨å°±ç»§ç»­æ‰§è¡Œã€‚</span></span><br><span class=\"line\">   <span class=\"keyword\">if</span>(accessToken)&#123;</span><br><span class=\"line\">       next(); <span class=\"comment\">// æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶</span></span><br><span class=\"line\">       &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">          res.send(â€œè¯·æ±‚å¿…é¡»åŒ…å«tokenâ€);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"åº”ç”¨çº§ä¸­é—´ä»¶\"><a href=\"#åº”ç”¨çº§ä¸­é—´ä»¶\" class=\"headerlink\" title=\"åº”ç”¨çº§ä¸­é—´ä»¶\"></a>åº”ç”¨çº§ä¸­é—´ä»¶</h4><p>åº”ç”¨çº§ä¸­é—´ä»¶å°±æ˜¯ç»‘å®šåˆ°ç”¨ <code>express()</code> ç”Ÿæˆçš„å¯¹è±¡ <code>app</code> èº«ä¸Šçš„ï¼Œæ¯”å¦‚ <code>app.use()</code> ä¸­çš„ <code>use</code> æ–¹æ³•ï¼Œä»¥åŠ <code>app.post()</code> ã€<code>app.get()</code> ä¸­çš„ <code>POST</code> å’Œ <code>GET</code> æ–¹æ³•ç­‰ã€‚</p>\n<h4 id=\"å†…ç½®ä¸­é—´ä»¶\"><a href=\"#å†…ç½®ä¸­é—´ä»¶\" class=\"headerlink\" title=\"å†…ç½®ä¸­é—´ä»¶\"></a>å†…ç½®ä¸­é—´ä»¶</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è®¾ç½®å…¬å…±é™æ€ç›®å½•ï¼Œç”¨äºå­˜æ”¾ css js image ç­‰æ–‡ä»¶ï¼Œé¡¹ç›®ç›®å½•é‡Œæœ‰ images ç›®å½•å­˜æ”¾ 1.png</span></span><br><span class=\"line\"><span class=\"comment\">// é‚£ä¹ˆè®¿é—®ï¼šhttp://localhost/images/1.png è·å–</span></span><br><span class=\"line\">app.use(express.static(<span class=\"string\">'public'</span>));</span><br></pre></td></tr></table></figure>\n<h4 id=\"ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶\"><a href=\"#ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶\" class=\"headerlink\" title=\"ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶\"></a>ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶</h4><p>ä¸­é—´ä»¶å¯ä»¥è¯´æ˜¯æ•´ä¸ª Express çš„ç²¾åæ‰€åœ¨äº†ï¼Œä½¿ç”¨ä¸­é—´ä»¶å¯ä»¥å‡ å¤§çš„æ‰©å±•é¡¹ç›®çš„åŠŸèƒ½ã€‚ä½¿ç”¨æ–¹æ³•éƒ½å·®ä¸å¤šï¼Œè¿™é‡Œä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„ï¼Œå…·ä½“ä½¿ç”¨æ–¹å¼éœ€è¦çœ‹å®˜æ–¹çš„æ–‡æ¡£äº†ã€‚</p>\n<ul>\n<li>è§£æå®¢æˆ·ç«¯è¯·æ±‚çš„ body ä¸­çš„å†…å®¹ï¼šbody-parser</li>\n<li>cookie è§£æä¸­é—´ä»¶ï¼šcookie-parser</li>\n<li>æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶ï¼šmulter</li>\n</ul>\n<p>ä½¿ç”¨å‘½ä»¤ <code>npm i åŒ…åç§° --save</code> å®‰è£…åˆ°é¡¹ç›®ä¸­ï¼Œç„¶åå¼•å…¥é¡¹ç›®ä½¿ç”¨å³å¯ã€‚</p>\n","site":{"data":{}},"excerpt":"<p><strong><em>Express</em></strong> æ˜¯ä¸€ä¸ªåŸºäº Node.js å¹³å°çš„æç®€ã€çµæ´»çš„ Web åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œå®ƒæä¾›ä¸€ç³»åˆ—å¼ºå¤§çš„ç‰¹æ€§ï¼Œå¸®åŠ©ä½ åˆ›å»ºå„ç§ Web å’Œç§»åŠ¨è®¾å¤‡åº”ç”¨ã€‚Express çš„æ ¸å¿ƒç‰¹æ€§å¯ä»¥æ¦‚æ‹¬ä»¥ä¸‹ä¸‰ç‚¹ã€‚<br>","more":"</p>\n<ul>\n<li>å¯ä»¥è®¾ç½®ä¸­é—´ä»¶æ¥å“åº” HTTP è¯·æ±‚ã€‚</li>\n<li>å®šä¹‰äº†è·¯ç”±è¡¨ç”¨äºæ‰§è¡Œä¸åŒçš„ HTTP è¯·æ±‚åŠ¨ä½œã€‚</li>\n<li>å¯ä»¥é€šè¿‡å‘æ¨¡æ¿ä¼ é€’å‚æ•°æ¥åŠ¨æ€æ¸²æŸ“ HTML é¡µé¢ã€‚</li>\n</ul>\n<p>ä¸‹é¢å­¦ä¹ çš„çŸ¥è¯†ç‚¹ï¼Œéƒ½ä¼šå›´ç»•è¿™å‡ ä¸ªç‰¹æ€§å±•å¼€ã€‚</p>\n<h3 id=\"Express-å®‰è£…\"><a href=\"#Express-å®‰è£…\" class=\"headerlink\" title=\"Express å®‰è£…\"></a>Express å®‰è£…</h3><h4 id=\"åœ¨é¡¹ç›®ä¸­å¼•å…¥-Express\"><a href=\"#åœ¨é¡¹ç›®ä¸­å¼•å…¥-Express\" class=\"headerlink\" title=\"åœ¨é¡¹ç›®ä¸­å¼•å…¥ Express\"></a>åœ¨é¡¹ç›®ä¸­å¼•å…¥ Express</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> projectName              <span class=\"comment\"># è¿›å…¥æ–°å»ºçš„ Node.js é¡¹ç›®</span></span><br><span class=\"line\">npm init                    <span class=\"comment\"># åˆå§‹åŒ–é¡¹ç›®é…ç½®æ–‡ä»¶</span></span><br><span class=\"line\">npm install express --save  <span class=\"comment\"># å®‰è£… Express æ¨¡å—åˆ°é¡¹ç›®é…ç½®æ–‡ä»¶ä¸­</span></span><br></pre></td></tr></table></figure>\n<p>é€šè¿‡ä¸Šé—¨çš„å‘½ä»¤ï¼Œå°±å¯ä»¥å®Œæˆ Express çš„å®‰è£…ï¼Œä¸‹é¢åœ¨ <code>app.js</code> ä¸­ä½¿ç”¨ Express å§ï¼<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">'/'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    res.send(<span class=\"string\">'Hello,Express!'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(<span class=\"number\">8080</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Express running at http://127.0.0.1:8080/'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"ä½¿ç”¨-Express-generator\"><a href=\"#ä½¿ç”¨-Express-generator\" class=\"headerlink\" title=\"ä½¿ç”¨ Express-generator\"></a>ä½¿ç”¨ Express-generator</h4><p>ä¸ºäº†æ–¹ä¾¿å¼€å‘è€…ï¼Œæ›´ä¾¿æ·çš„ä½¿ç”¨ Express ç”Ÿæˆé¡¹ç›®ï¼Œå®˜æ–¹æä¾›çš„å¿«é€Ÿçš„ç”Ÿæˆå·¥å…· <code>Express-generator</code>ï¼Œè™½ç„¶ç”Ÿæˆéå¸¸å¿«é€Ÿæ–¹ä¾¿ï¼Œä½†æ˜¯ä½œä¸ºåˆå­¦è€…ï¼Œè¿˜æ˜¯è¦å¼„æ¸…æ¥šé‡Œé¢æ¯æ¡å‘½ä»¤æ‰€ä»£è¡¨çš„å«ä¹‰ï¼Œæœ€åå†ä½¿ç”¨å®˜æ–¹æä¾›çš„å·¥å…·å¿«é€Ÿç”Ÿæˆã€‚æ‰“å¼€ç»ˆç«¯ï¼Œå› ä¸ºæˆ‘æ˜¯ MacOSï¼Œæ‰€ä»¥å®‰è£…çš„æ—¶å€™è¦åŠ ä¸Š <code>sudo</code> å¦åˆ™ä¼šæŠ¥é”™æç¤ºæƒé™ä¸å¤Ÿã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo npm install express-generator -g  <span class=\"comment\"># å…¨å±€å®‰è£…</span></span><br><span class=\"line\">express mywebapp                       <span class=\"comment\"># åˆ›å»º mywebapp é¡¹ç›®</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> mywebapp &amp;&amp; npm install             <span class=\"comment\"># å®‰è£…ä¾èµ–æ–‡ä»¶</span></span><br><span class=\"line\">npm start                              <span class=\"comment\"># å¯åŠ¨é¡¹ç›®</span></span><br></pre></td></tr></table></figure></p>\n<p>å¯åŠ¨é¡¹ç›®åï¼Œå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­é¢„è§ˆäº†ï¼Œè®¿é—®åœ°å€ï¼š<a href=\"http://127.0.0.1:3000/\" target=\"_blank\" rel=\"noopener\">http://127.0.0.1:3000/</a> ã€‚</p>\n<div class=\"tip\"><br>å¯åŠ¨å‰éœ€è¦å…³é—­å…¶å®ƒå·²ç»å¯ç”¨çš„ Web æœåŠ¡ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´ç«¯å£å ç”¨å¯åŠ¨ä¸æˆåŠŸã€‚<br></div>\n\n<h3 id=\"Express-è·¯ç”±\"><a href=\"#Express-è·¯ç”±\" class=\"headerlink\" title=\"Express è·¯ç”±\"></a>Express è·¯ç”±</h3><blockquote>\n<p>è·¯ç”±æ˜¯æŒ‡å¦‚ä½•å®šä¹‰åº”ç”¨çš„ç«¯ç‚¹ï¼ˆURLsï¼‰ä»¥åŠå¦‚ä½•å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</p>\n</blockquote>\n<h4 id=\"åŸºç¡€ç”¨æ³•\"><a href=\"#åŸºç¡€ç”¨æ³•\" class=\"headerlink\" title=\"åŸºç¡€ç”¨æ³•\"></a>åŸºç¡€ç”¨æ³•</h4><p>ç®€å•ç†è§£ï¼Œå…¶å®å°±æ˜¯æ ¹æ®ä¸åŒçš„è¯·æ±‚ï¼Œæ¥å“åº”ä¸ä¹‹å¯¹åº”çš„é¡µé¢ã€‚æ¯”å¦‚ï¼Œå½“ç”¨æˆ·è®¿é—® <a href=\"http://localhost/images/\" target=\"_blank\" rel=\"noopener\">http://localhost/images/</a> æ—¶ï¼Œæ ¹æ® URL å¯ä»¥çœ‹å‡ºï¼Œè¯·æ±‚çš„æ˜¯ <code>/images</code> è¿™ä¸ªç›®å½•ï¼Œé‚£ä¹ˆé€šè¿‡è·¯ç”±ï¼Œæ‰¾åˆ°è¿™ä¸ªé¡µé¢å¹¶è¿”å›ç»™è¯·æ±‚çš„ç”¨æˆ·ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«è·¯ç”±ã€‚æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å½“ç”¨æˆ·è¯·æ±‚è®¿é—® / æ—¶ï¼Œå“åº”ä¸€ä¸ª Hello,Express! å­—ç¬¦ä¸²ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªç®€å•è·¯ç”±</span></span><br><span class=\"line\">app.get(<span class=\"string\">'/'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    res.send(<span class=\"string\">'Hello,Express!'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></p>\n<p>è¿™é‡Œéœ€è¦æ³¨æ„ <code>app.all()</code> ,å®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è·¯ç”±æ–¹æ³•ï¼Œæ²¡æœ‰ä»»ä½• HTTP æ–¹æ³•ä¸å…¶å¯¹åº”ï¼Œå®ƒçš„ä½œç”¨æ˜¯å¯¹äºä¸€ä¸ªè·¯å¾„ä¸Šçš„æ‰€æœ‰è¯·æ±‚åŠ è½½ä¸­é—´ä»¶ã€‚ all ç›¸å½“äºæ—¢å¯ä»¥å¤„ç† <code>GET</code>ï¼Œä¹Ÿå¯ä»¥å¤„ç† <code>POST</code> ã€‚</p>\n<h4 id=\"Router-æ–¹æ³•\"><a href=\"#Router-æ–¹æ³•\" class=\"headerlink\" title=\"Router æ–¹æ³•\"></a>Router æ–¹æ³•</h4><p>é€šè¿‡ <code>express.Router</code> ç±»å¯ä»¥åˆ›å»ºç‹¬ç«‹æ¨¡å—çš„è·¯ç”±æ¨¡å—ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯ä»¥æŒ‚è½½çš„è·¯ç”±å¯¹è±¡ï¼ŒæŠŠè·¯ç”±æ¨¡å—åˆ†ç¦»å‡ºé¡¹ç›®ï¼Œè®©æ•´ä¸ªé¡¹ç›®ç»“æ„æ¸…æ™°ã€æ–¹ä¾¿ç®¡ç†ï¼Œè¿™é‡Œå…‰è¯´è¿˜æ˜¯æŒºæŠ½è±¡ï¼Œä¸¾ä¸ªä¾‹å­ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ç›®å½•ç»“æ„</span></span><br><span class=\"line\">.</span><br><span class=\"line\">â”œâ”€â”€ index.js</span><br><span class=\"line\">â”œâ”€â”€ node_modules</span><br><span class=\"line\">â”‚Â Â  â”œâ”€â”€ body-parser</span><br><span class=\"line\">â”‚Â Â  â””â”€â”€ express</span><br><span class=\"line\">â”œâ”€â”€ package.json</span><br><span class=\"line\">â”œâ”€â”€ router</span><br><span class=\"line\">â”‚Â Â  â”œâ”€â”€ admin.js</span><br><span class=\"line\">â”‚Â Â  â””â”€â”€ home.js</span><br><span class=\"line\">â””â”€â”€ views</span><br><span class=\"line\">    â”œâ”€â”€ admin</span><br><span class=\"line\">    â””â”€â”€ home</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> bodyparser = <span class=\"built_in\">require</span>(<span class=\"string\">'body-parser'</span>);</span><br><span class=\"line\"><span class=\"comment\">// å¼•å…¥å¤–éƒ¨è·¯ç”±æ¨¡å—</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> home = <span class=\"built_in\">require</span>(<span class=\"string\">'./router/home'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> admin = <span class=\"built_in\">require</span>(<span class=\"string\">'./router/admin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨ä¸­é—´ä»¶ bodyparser ï¼Œåé¢å¯ä»¥åœ¨ req.body ä¸­åˆ†æå‡º POST è¯·æ±‚ä½“çš„å†…å®¹</span></span><br><span class=\"line\">app.use(bodyparser.urlencoded(&#123;<span class=\"attr\">extended</span>:<span class=\"literal\">false</span>&#125;));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨å¤–éƒ¨è·¯ç”±æ¨¡å—</span></span><br><span class=\"line\">app.use(<span class=\"string\">'/'</span>,home);</span><br><span class=\"line\">app.use(<span class=\"string\">'/admin'</span>,admin);</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(<span class=\"number\">8080</span>,<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"built_in\">console</span>.log(<span class=\"string\">'visit http://127.0.0.1:8080/'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// admin.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> router = express.Router();<span class=\"comment\">// ç”¨ Router æ„é€ å‡½æ•°å®ä¾‹åŒ– router å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">'/login.html'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    res.sendFile(path.resolve(__dirname + <span class=\"string\">'/../views/admin/'</span> + <span class=\"string\">'login.html'</span>));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">router.get(<span class=\"string\">'/user.html'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    res.sendFile(path.resolve(__dirname + <span class=\"string\">'/../views/admin/'</span> + <span class=\"string\">'user.html'</span>));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">router.post(<span class=\"string\">'/login.html'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;<span class=\"comment\">// /admin/login.html</span></span><br><span class=\"line\">    res.sendFile(path.resolve(__dirname + <span class=\"string\">'/../views/admin/'</span> + <span class=\"string\">'login.html'</span>));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = router;<span class=\"comment\">// æš´éœ²ç»™å¤–éƒ¨è°ƒç”¨è¯¥è·¯ç”±</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"Express-å“åº”å¯¹è±¡\"><a href=\"#Express-å“åº”å¯¹è±¡\" class=\"headerlink\" title=\"Express å“åº”å¯¹è±¡\"></a>Express å“åº”å¯¹è±¡</h3><p>é€šè¿‡å“åº”ï¼ˆResponseï¼‰å¯¹è±¡ï¼ŒæœåŠ¡å™¨å¯ä»¥è¿”å›ä¸€ä¸ªæ¥è‡ªå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰çš„ <code>Request</code> ,æœ€ç»ˆè¿”å›ç»™ç”¨æˆ·çš„å…¶å®å°±æ˜¯ä¸€ä¸ªç»è¿‡ä¸šåŠ¡é€»è¾‘å±‚å¤„ç†çš„ <code>res</code> å¯¹è±¡ã€‚æ¥äº†è§£ä¸‹ Express çš„å“åº”å¯¹è±¡å§ã€‚</p>\n<h4 id=\"send\"><a href=\"#send\" class=\"headerlink\" title=\"send()\"></a>send()</h4><p>Express å·²ç»å°è£…è¿‡äº†åŸç”Ÿ Node.js çš„å“åº”æ–¹æ³•ï¼Œåœ¨åŸç”Ÿ Node.js ä¸­ï¼Œé€šè¿‡ <code>res.write()</code> æ–¹æ³•å¯ä»¥è¿”å›å­—ç¬¦ä¸²å’Œ Bufferã€‚è€Œ Express ä¸­çš„ <code>send()</code> å¯ä»¥è¿”å›ä»»æ„æ•°æ®ç±»å‹ï¼Œå¦‚æµã€æ•°æ®ã€æ™®é€šæ–‡æœ¬ç­‰ï¼Œæ¥çœ‹ä¸ªä¾‹å­ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">res.send(<span class=\"keyword\">new</span> Buffer(<span class=\"string\">'ifyour'</span>)); <span class=\"comment\">// Buffer</span></span><br><span class=\"line\">res.send(&#123;<span class=\"string\">\"name\"</span>: <span class=\"string\">\"ifyour\"</span>&#125;);   <span class=\"comment\">// JSON</span></span><br><span class=\"line\">res.send(<span class=\"string\">'&lt;p&gt;some html&lt;/p&gt;'</span>);   <span class=\"comment\">// HTML</span></span><br><span class=\"line\">res.status(<span class=\"number\">404</span>).send(<span class=\"string\">'404 Not Find'</span>); <span class=\"comment\">// è®¾ç½®çŠ¶æ€ç å¹¶è¿”å›æç¤º</span></span><br><span class=\"line\"><span class=\"comment\">//...</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"json\"><a href=\"#json\" class=\"headerlink\" title=\"json()\"></a>json()</h4><p>é€šè¿‡ <code>json()</code> æ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ª <code>JSON</code> å¯¹è±¡ï¼Œç”¨äº Ajax ç­‰ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">res.json(<span class=\"literal\">null</span>);</span><br><span class=\"line\">res.json(&#123;<span class=\"string\">\"user\"</span>: <span class=\"string\">\"ifyour\"</span>&#125;);</span><br><span class=\"line\">res.status(<span class=\"number\">500</span>).json(&#123;<span class=\"string\">\"error\"</span>: <span class=\"string\">\"message\"</span>&#125;);</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"render\"><a href=\"#render\" class=\"headerlink\" title=\"render()\"></a>render()</h4><p><code>render</code> ç”¨äºæ¸²æŸ“æ¨¡æ¿å¼•æ“ï¼Œæ¯”å¦‚åœ¨ä½¿ç”¨ <a href=\"https://github.com/tj/ejs\" target=\"_blank\" rel=\"noopener\">ejs</a> æ¨¡æ¿å¼•æ“æ—¶ï¼Œå“åº”ç”¨æˆ·è¯·æ±‚å°±å¯ä»¥ä½¿ç”¨ <code>res.render()</code> è¿”å›ç»™ç”¨æˆ·ä¸€ä¸ªæ¸²æŸ“å¥½çš„é¡µé¢ã€‚è¿™ä¸ªç”¨çš„æ¯”è¾ƒå¤šï¼Œæˆ‘æ¥ä¸¾ä¸ªä¾‹å­ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ç›®å½•ç»“æ„</span></span><br><span class=\"line\">.</span><br><span class=\"line\">â”œâ”€â”€ index.js</span><br><span class=\"line\">â”œâ”€â”€ node_modules</span><br><span class=\"line\">â”‚Â Â  â”œâ”€â”€ ejs</span><br><span class=\"line\">â”‚Â Â  â””â”€â”€ express</span><br><span class=\"line\">â”œâ”€â”€ package.json</span><br><span class=\"line\">â””â”€â”€ views</span><br><span class=\"line\">    â””â”€â”€ login.html</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- ejs æ¨¡æ¿å¼•æ“ï¼Œå®šä¹‰äº† /login.html --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Title<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- æ³¨æ„ ejs æ¨¡æ¿ä¸­å˜é‡çš„å†™æ³• --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>æ¬¢è¿ä½ ï¼Œ<span class=\"tag\">&lt;<span class=\"name\">%=name%</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> ejs = <span class=\"built_in\">require</span>(<span class=\"string\">'ejs'</span>); <span class=\"comment\">// å¼•å…¥ ejs æ¨¡æ¿å¼•æ“</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> viewsPath = path.join(__dirname, <span class=\"string\">'views'</span>);<span class=\"comment\">// views æ˜¯æ¨¡æ¿ç›®å½•</span></span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½® express views å±‚ï¼Œæ¨¡æ¿æ ¹è·¯å¾„</span></span><br><span class=\"line\">app.set(<span class=\"string\">'views'</span>, viewsPath);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½® express å®ä¾‹çš„æ¨¡æ¿è¯­è¨€</span></span><br><span class=\"line\">app.set(<span class=\"string\">'view engine'</span>, <span class=\"string\">'html'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æŠŠ express å®ä¾‹çš„æ¨¡æ¿å¼•æ“å’Œ ejs æ¨¡æ¿å¼•æ“å…³è”</span></span><br><span class=\"line\">app.engine(<span class=\"string\">'html'</span>, ejs.__express);</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">'/login.html'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    res.render(<span class=\"string\">'login'</span>, &#123;<span class=\"attr\">name</span>: <span class=\"string\">\"ifyour\"</span>&#125;);<span class=\"comment\">// æ›¿æ¢åˆ°æ¨¡æ¿å˜é‡ä¸­çš„ name ä¸º ifyour</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(<span class=\"number\">8080</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'visit http://127.0.0.1:8080/'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<div class=\"tip\"><br><code>__dirname</code> æ˜¯ Node.js ä¸­å®šä¹‰çš„ <code>global</code> å…¨å±€å˜é‡ï¼Œè·å–å½“å‰æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œè¿”å› <code>string</code> ç±»å‹ã€‚<br></div>\n\n<h4 id=\"download\"><a href=\"#download\" class=\"headerlink\" title=\"download()\"></a>download()</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">res.download(<span class=\"string\">'./123.doc'</span>); <span class=\"comment\">// ä¸‹è½½å½“å‰ç›®å½•ä¸‹é¢çš„123.docæ–‡ä»¶ã€‚</span></span><br><span class=\"line\">res.download(<span class=\"string\">'./123.doc'</span>,<span class=\"string\">'books.doc'</span>); <span class=\"comment\">// ä¸‹è½½å½“å‰ç›®å½•ä¸‹é¢çš„123.docæ–‡ä»¶ï¼Œé‡å‘½åä¸º books.doc</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"redirect\"><a href=\"#redirect\" class=\"headerlink\" title=\"redirect()\"></a>redirect()</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// é‡å®šå‘åˆ°æŒ‡å®šçš„ URL è·¯å¾„</span></span><br><span class=\"line\">res.redirect(<span class=\"string\">'/404.html'</span>);</span><br><span class=\"line\">res.redirect(<span class=\"string\">'https://www.google.com/'</span>);</span><br></pre></td></tr></table></figure>\n<p>æ›´å¤šå“åº”å¯¹è±¡çš„æ–¹æ³•ï¼Œå‚è€ƒ <a href=\"http://www.expressjs.com.cn/4x/api.html#res\" target=\"_blank\" rel=\"noopener\">Express å®˜æ–¹ API</a>ã€‚</p>\n<h3 id=\"Express-è¯·æ±‚å¯¹è±¡\"><a href=\"#Express-è¯·æ±‚å¯¹è±¡\" class=\"headerlink\" title=\"Express è¯·æ±‚å¯¹è±¡\"></a>Express è¯·æ±‚å¯¹è±¡</h3><p>Express ä¸­çš„ <code>Request</code> å¯¹è±¡ï¼ŒåŒ…å«äº†ä¸€æ¬¡è¯·æ±‚ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œæ¯”å¦‚è¯·æ±‚å¤´ã€è·¯å¾„ã€Cookies ç­‰ï¼Œè·å–è¯·æ±‚å¤´ä¸­çš„ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ ¹æ®è¿™äº›ä¿¡æ¯å¤„ç†ä¸šåŠ¡é€»è¾‘å±‚ï¼Œæœ€ç»ˆå°†å¤„ç†è¿‡åçš„æ•°æ®è¿”å›ç»™ç”¨æˆ·ã€‚è¿™é‡Œæ€»ç»“äº†å¸¸ç”¨çš„è¯·æ±‚å¯¹è±¡æ–¹æ³•ã€‚</p>\n<h4 id=\"URL-ä¸­çš„å‚æ•°\"><a href=\"#URL-ä¸­çš„å‚æ•°\" class=\"headerlink\" title=\"URL ä¸­çš„å‚æ•°\"></a>URL ä¸­çš„å‚æ•°</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ–¹å¼ä¸€ï¼š req.query.å‚æ•°å</span></span><br><span class=\"line\"><span class=\"comment\">// e.g.  http://localhost:3000/user?name=ifyour</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(req.query.name);</span><br><span class=\"line\"><span class=\"comment\">// =&gt; ifyour</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–¹å¼äºŒï¼šreq.params.å‚æ•°å</span></span><br><span class=\"line\"><span class=\"comment\">//e.g.  http://localhost/post/123123</span></span><br><span class=\"line\">router.get(<span class=\"string\">'/post/:id'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(req.params.id);</span><br><span class=\"line\">    <span class=\"comment\">// =&gt; 123123</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"è¡¨å•ä¸­çš„å‚æ•°\"><a href=\"#è¡¨å•ä¸­çš„å‚æ•°\" class=\"headerlink\" title=\"è¡¨å•ä¸­çš„å‚æ•°\"></a>è¡¨å•ä¸­çš„å‚æ•°</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ–¹å¼ä¸€ï¼šè¯­æ³•ï¼šreq.param.å‚æ•°å  æ³¨æ„è¿™é‡Œæ²¡åŠ  s</span></span><br><span class=\"line\"><span class=\"comment\">// e.g. &lt;input type=\"text\" name=\"user\"&gt;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(req.param(<span class=\"string\">'user'</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–¹å¼äºŒï¼šä½¿ç”¨ body-parser ä¸­é—´ä»¶</span></span><br><span class=\"line\"><span class=\"comment\">// e.g. &lt;input type=\"text\" name=\"user\"&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> bodyparser = <span class=\"built_in\">require</span>(<span class=\"string\">'body-parser'</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.console.log(req.boy.user);</span><br></pre></td></tr></table></figure>\n<h3 id=\"Express-ä¸­é—´ä»¶\"><a href=\"#Express-ä¸­é—´ä»¶\" class=\"headerlink\" title=\"Express ä¸­é—´ä»¶\"></a>Express ä¸­é—´ä»¶</h3><p>Express æ˜¯ä¸€ä¸ªè‡ªèº«åŠŸèƒ½æç®€ï¼Œå®Œå…¨æ˜¯ç”±è·¯ç”±å’Œä¸­é—´ä»¶æ„æˆä¸€ä¸ªçš„ Web å¼€å‘æ¡†æ¶ï¼šä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œä¸€ä¸ª Express åº”ç”¨å°±æ˜¯åœ¨è°ƒç”¨å„ç§ä¸­é—´ä»¶ã€‚<br><img src=\"http://ww3.sinaimg.cn/large/6057861cgw1fbcrpk71zxj20sg03kaaa.jpg\" alt=\"\"><br>å¦‚å›¾ï¼Œä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰ä½äºå®¢æˆ·ç«¯å’Œè·¯ç”±ä¹‹é—´ï¼Œå®ƒå¥½æ¯”æ˜¯ä¸€ä¸ªæ¼æ–—ï¼Œç»è¿‡è¿™ä¸ªæ¼æ–—çš„ <code>Request</code> å¯¹è±¡å’Œ <code>Response</code> å¯¹è±¡ä»¥åŠå¾ªç¯æµç¨‹ä¸­çš„ <code>Next</code> ä¼šè¢«å¤„ç†ï¼Œæ¯”å¦‚æ­£ç¡®æ€§æ ¡éªŒã€ä¸šåŠ¡é€»è¾‘å¤„ç†ç­‰ã€‚</p>\n<ul>\n<li>æ‰§è¡Œä»»ä½•ä»£ç </li>\n<li>ä¿®æ”¹è¯·æ±‚å’Œå“åº”å¯¹è±¡</li>\n<li>ç»ˆç»“è¯·æ±‚-å“åº”å¾ªç¯</li>\n<li>è°ƒç”¨å †æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶</li>\n</ul>\n<p><div class=\"tip\"><br>å¦‚æœå½“å‰ä¸­é—´ä»¶æ²¡æœ‰ç»ˆç»“è¯·æ±‚-å“åº”å¾ªç¯ï¼Œåˆ™å¿…é¡»è°ƒç”¨ next() æ–¹æ³•å°†æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå¦åˆ™è¯·æ±‚å°±ä¼šæŒ‚èµ·ã€‚<br></div><br>ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ï¼Œå¦‚ä½•é€šè¿‡ <code>next()</code> æ–¹æ³•æŠŠæ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> app = express();</span><br><span class=\"line\">app.use(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> accessToken = req.query.accessToken;</span><br><span class=\"line\">   <span class=\"comment\">//æ£€æŸ¥è¯·æ±‚ä¸­æ˜¯å¦å«æœ‰â€œè®¤è¯ç‰Œâ€ï¼Œå­˜åœ¨å°±ç»§ç»­æ‰§è¡Œã€‚</span></span><br><span class=\"line\">   <span class=\"keyword\">if</span>(accessToken)&#123;</span><br><span class=\"line\">       next(); <span class=\"comment\">// æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶</span></span><br><span class=\"line\">       &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">          res.send(â€œè¯·æ±‚å¿…é¡»åŒ…å«tokenâ€);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"åº”ç”¨çº§ä¸­é—´ä»¶\"><a href=\"#åº”ç”¨çº§ä¸­é—´ä»¶\" class=\"headerlink\" title=\"åº”ç”¨çº§ä¸­é—´ä»¶\"></a>åº”ç”¨çº§ä¸­é—´ä»¶</h4><p>åº”ç”¨çº§ä¸­é—´ä»¶å°±æ˜¯ç»‘å®šåˆ°ç”¨ <code>express()</code> ç”Ÿæˆçš„å¯¹è±¡ <code>app</code> èº«ä¸Šçš„ï¼Œæ¯”å¦‚ <code>app.use()</code> ä¸­çš„ <code>use</code> æ–¹æ³•ï¼Œä»¥åŠ <code>app.post()</code> ã€<code>app.get()</code> ä¸­çš„ <code>POST</code> å’Œ <code>GET</code> æ–¹æ³•ç­‰ã€‚</p>\n<h4 id=\"å†…ç½®ä¸­é—´ä»¶\"><a href=\"#å†…ç½®ä¸­é—´ä»¶\" class=\"headerlink\" title=\"å†…ç½®ä¸­é—´ä»¶\"></a>å†…ç½®ä¸­é—´ä»¶</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è®¾ç½®å…¬å…±é™æ€ç›®å½•ï¼Œç”¨äºå­˜æ”¾ css js image ç­‰æ–‡ä»¶ï¼Œé¡¹ç›®ç›®å½•é‡Œæœ‰ images ç›®å½•å­˜æ”¾ 1.png</span></span><br><span class=\"line\"><span class=\"comment\">// é‚£ä¹ˆè®¿é—®ï¼šhttp://localhost/images/1.png è·å–</span></span><br><span class=\"line\">app.use(express.static(<span class=\"string\">'public'</span>));</span><br></pre></td></tr></table></figure>\n<h4 id=\"ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶\"><a href=\"#ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶\" class=\"headerlink\" title=\"ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶\"></a>ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶</h4><p>ä¸­é—´ä»¶å¯ä»¥è¯´æ˜¯æ•´ä¸ª Express çš„ç²¾åæ‰€åœ¨äº†ï¼Œä½¿ç”¨ä¸­é—´ä»¶å¯ä»¥å‡ å¤§çš„æ‰©å±•é¡¹ç›®çš„åŠŸèƒ½ã€‚ä½¿ç”¨æ–¹æ³•éƒ½å·®ä¸å¤šï¼Œè¿™é‡Œä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„ï¼Œå…·ä½“ä½¿ç”¨æ–¹å¼éœ€è¦çœ‹å®˜æ–¹çš„æ–‡æ¡£äº†ã€‚</p>\n<ul>\n<li>è§£æå®¢æˆ·ç«¯è¯·æ±‚çš„ body ä¸­çš„å†…å®¹ï¼šbody-parser</li>\n<li>cookie è§£æä¸­é—´ä»¶ï¼šcookie-parser</li>\n<li>æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶ï¼šmulter</li>\n</ul>\n<p>ä½¿ç”¨å‘½ä»¤ <code>npm i åŒ…åç§° --save</code> å®‰è£…åˆ°é¡¹ç›®ä¸­ï¼Œç„¶åå¼•å…¥é¡¹ç›®ä½¿ç”¨å³å¯ã€‚</p>"},{"title":"ProxyChains-NG + ShadowSocks å®ç°ç»ˆç«¯ä»£ç†","date":"2016-03-23T00:25:31.000Z","comments":0,"_content":"\nç»å¸¸åœ¨ç»ˆç«¯ä¸‹æ‰§è¡Œä¸€äº›ç½‘ç»œå‘½ä»¤ï¼Œä¾‹å¦‚ `wget` ã€`git`ã€`ssh` ç­‰å‘½ä»¤ï¼Œé€Ÿåº¦æ…¢çš„ä¸è¡Œï¼Œè¯´ç™½äº†ï¼Œæœ‰äº›æ˜¯å› ä¸º GFW çš„åŸå› ï¼Œæœ‰äº›åˆ™æ˜¯è®¿é—®å›½å¤–çš„æœåŠ¡å™¨æœ¬æ¥é€Ÿåº¦å°±å¾ˆæ…¢ï¼Œè€Œæˆ‘ä»¬çš„ ShadowSocks æä¾›çš„æ˜¯ `socks5` ä»£ç†ï¼Œç»ˆç«¯æ— æ³•äº«ç”¨ã€‚è¿™ä¸ªæ—¶å€™ **ProxyChains-NG** åº”åŠ¿è€Œç”Ÿã€‚\n<!-- more -->\n### å®‰è£…\nä½¿ç”¨ [brew](http://brew.sh/index_zh-cn.html) å¿«é€Ÿå®‰è£… ProxyChains-NGï¼Œæƒ³è¯¦ç»†äº†è§£ ProxyChains-NG å¯ä»¥å»ä»–ä»¬[é¡¹ç›®ä¸»é¡µ](https://github.com/rofl0r/proxychains-ng)ã€‚\n```bash\nbrew install proxychains-ng\n```\n\né…ç½®\n```bash\nvi /usr/local/etc/proxychains.conf\n```\n\næ·»åŠ ä»£ç†\n```bash\nsocks5  127.0.0.1 1080\n```\n\n### ä½¿ç”¨\nåˆ°æ­¤ä¸ºæ­¢ï¼Œæ•´ä¸ªå‘½ä»¤å®‰è£…å®Œæˆï¼Œç”¨æ³• `proxychains4 éœ€è¦æ‰§è¡Œçš„å‘½ä»¤`ã€‚ä¸¾ä¸ªä¾‹å­ï¼šæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤åï¼Œå¯ä»¥çœ‹åˆ°æ˜¯ ss çš„ IP äº†ã€‚\n```bash\nproxychains4 curl ip.cn\n```\n\n\n### ä¼˜åŒ–\nè¿™ä¸ªå‘½ä»¤å¤ªé•¿äº†ï¼Œæˆ‘æƒ³æ¢ä¸€ä¸ªï¼æˆ‘ä½¿ç”¨çš„æ˜¯ zshï¼Œæ¥ç»™ `proxychains4` é…ç½®ä¸€ä¸ªåˆ«åå§ï¼:P\nç¼–è¾‘ zsh é…ç½®æ–‡ä»¶\n```bash\nvi ~/.zshrc\n```\n\næ·»åŠ åˆ«å\n```bash\nalias myss='proxychains4'\n```\n\nè®©é…ç½®ç”Ÿæ•ˆ\n```bash\nsource ~/.zshrc\n```\n\nå†æ‰§è¡Œä¹‹å‰æŸ¥çœ‹ ip çš„å‘½ä»¤\n```bash\nmyss curl ip.cn\n```\n\nHave done! :)\n\n### æµ‹é€Ÿ\nä½¿ç”¨ speedtest çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ¥æµ‹ä¸Šè¡Œå®½å¸¦å’Œä¸‹è¡Œå®½åº¦ã€‚\n```bash\n# ä¸‹è½½ speedtest-cli\nwget -O speedtest-cli https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py\n\n# ç»™æ‰§è¡Œæƒé™\nchmod +x speedtest-cli\n\n# è¿è¡Œ\n./speedtest-cli\n\n# æµ‹è¯•ä¸‹ä»£ç†çš„é€Ÿåº¦\nmyss ./speedtest-cli\n```\n\n#### é™„ï¼šbrew å¸¸ç”¨å‘½ä»¤\n\n|å‘½ä»¤          |å«ä¹‰                       |\n|:------------|:--------------------------|\n|å®‰è£…åŒ…        |brew install `<PackageName>`|\n|æœç´¢åŒ…        |brew search `<PackageName>` |\n|æŸ¥è¯¢åŒ…ä¿¡æ¯    |brew info `<PackageName>`   |\n|å‡çº§æŒ‡å®šåŒ…    |brew upgrade `<PackageName>`|\n|æ›´æ–°è‡ªå·±      |brew update                |\n|æ£€æŸ¥è¿‡æ—¶åŒ…    |brew outdated              |\n|å‡çº§æ‰€æœ‰åŒ…    |brew upgrade               |\n|æ¸…ç†ç¼“å­˜      |brew cleanup               |\n","source":"_posts/ProxyChains-NG-ShadowSocks-å®ç°ç»ˆç«¯ä»£ç†.md","raw":"---\ntitle: ProxyChains-NG + ShadowSocks å®ç°ç»ˆç«¯ä»£ç†\ndate: 2016-03-23 08:25:31\ntags:\ncomments: false\n---\n\nç»å¸¸åœ¨ç»ˆç«¯ä¸‹æ‰§è¡Œä¸€äº›ç½‘ç»œå‘½ä»¤ï¼Œä¾‹å¦‚ `wget` ã€`git`ã€`ssh` ç­‰å‘½ä»¤ï¼Œé€Ÿåº¦æ…¢çš„ä¸è¡Œï¼Œè¯´ç™½äº†ï¼Œæœ‰äº›æ˜¯å› ä¸º GFW çš„åŸå› ï¼Œæœ‰äº›åˆ™æ˜¯è®¿é—®å›½å¤–çš„æœåŠ¡å™¨æœ¬æ¥é€Ÿåº¦å°±å¾ˆæ…¢ï¼Œè€Œæˆ‘ä»¬çš„ ShadowSocks æä¾›çš„æ˜¯ `socks5` ä»£ç†ï¼Œç»ˆç«¯æ— æ³•äº«ç”¨ã€‚è¿™ä¸ªæ—¶å€™ **ProxyChains-NG** åº”åŠ¿è€Œç”Ÿã€‚\n<!-- more -->\n### å®‰è£…\nä½¿ç”¨ [brew](http://brew.sh/index_zh-cn.html) å¿«é€Ÿå®‰è£… ProxyChains-NGï¼Œæƒ³è¯¦ç»†äº†è§£ ProxyChains-NG å¯ä»¥å»ä»–ä»¬[é¡¹ç›®ä¸»é¡µ](https://github.com/rofl0r/proxychains-ng)ã€‚\n```bash\nbrew install proxychains-ng\n```\n\né…ç½®\n```bash\nvi /usr/local/etc/proxychains.conf\n```\n\næ·»åŠ ä»£ç†\n```bash\nsocks5  127.0.0.1 1080\n```\n\n### ä½¿ç”¨\nåˆ°æ­¤ä¸ºæ­¢ï¼Œæ•´ä¸ªå‘½ä»¤å®‰è£…å®Œæˆï¼Œç”¨æ³• `proxychains4 éœ€è¦æ‰§è¡Œçš„å‘½ä»¤`ã€‚ä¸¾ä¸ªä¾‹å­ï¼šæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤åï¼Œå¯ä»¥çœ‹åˆ°æ˜¯ ss çš„ IP äº†ã€‚\n```bash\nproxychains4 curl ip.cn\n```\n\n\n### ä¼˜åŒ–\nè¿™ä¸ªå‘½ä»¤å¤ªé•¿äº†ï¼Œæˆ‘æƒ³æ¢ä¸€ä¸ªï¼æˆ‘ä½¿ç”¨çš„æ˜¯ zshï¼Œæ¥ç»™ `proxychains4` é…ç½®ä¸€ä¸ªåˆ«åå§ï¼:P\nç¼–è¾‘ zsh é…ç½®æ–‡ä»¶\n```bash\nvi ~/.zshrc\n```\n\næ·»åŠ åˆ«å\n```bash\nalias myss='proxychains4'\n```\n\nè®©é…ç½®ç”Ÿæ•ˆ\n```bash\nsource ~/.zshrc\n```\n\nå†æ‰§è¡Œä¹‹å‰æŸ¥çœ‹ ip çš„å‘½ä»¤\n```bash\nmyss curl ip.cn\n```\n\nHave done! :)\n\n### æµ‹é€Ÿ\nä½¿ç”¨ speedtest çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ¥æµ‹ä¸Šè¡Œå®½å¸¦å’Œä¸‹è¡Œå®½åº¦ã€‚\n```bash\n# ä¸‹è½½ speedtest-cli\nwget -O speedtest-cli https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py\n\n# ç»™æ‰§è¡Œæƒé™\nchmod +x speedtest-cli\n\n# è¿è¡Œ\n./speedtest-cli\n\n# æµ‹è¯•ä¸‹ä»£ç†çš„é€Ÿåº¦\nmyss ./speedtest-cli\n```\n\n#### é™„ï¼šbrew å¸¸ç”¨å‘½ä»¤\n\n|å‘½ä»¤          |å«ä¹‰                       |\n|:------------|:--------------------------|\n|å®‰è£…åŒ…        |brew install `<PackageName>`|\n|æœç´¢åŒ…        |brew search `<PackageName>` |\n|æŸ¥è¯¢åŒ…ä¿¡æ¯    |brew info `<PackageName>`   |\n|å‡çº§æŒ‡å®šåŒ…    |brew upgrade `<PackageName>`|\n|æ›´æ–°è‡ªå·±      |brew update                |\n|æ£€æŸ¥è¿‡æ—¶åŒ…    |brew outdated              |\n|å‡çº§æ‰€æœ‰åŒ…    |brew upgrade               |\n|æ¸…ç†ç¼“å­˜      |brew cleanup               |\n","slug":"ProxyChains-NG-ShadowSocks-å®ç°ç»ˆç«¯ä»£ç†","published":1,"updated":"2019-12-07T05:22:37.267Z","layout":"post","photos":[],"link":"","_id":"ck3v60jth000gr9q9nomcyr0c","content":"<p>ç»å¸¸åœ¨ç»ˆç«¯ä¸‹æ‰§è¡Œä¸€äº›ç½‘ç»œå‘½ä»¤ï¼Œä¾‹å¦‚ <code>wget</code> ã€<code>git</code>ã€<code>ssh</code> ç­‰å‘½ä»¤ï¼Œé€Ÿåº¦æ…¢çš„ä¸è¡Œï¼Œè¯´ç™½äº†ï¼Œæœ‰äº›æ˜¯å› ä¸º GFW çš„åŸå› ï¼Œæœ‰äº›åˆ™æ˜¯è®¿é—®å›½å¤–çš„æœåŠ¡å™¨æœ¬æ¥é€Ÿåº¦å°±å¾ˆæ…¢ï¼Œè€Œæˆ‘ä»¬çš„ ShadowSocks æä¾›çš„æ˜¯ <code>socks5</code> ä»£ç†ï¼Œç»ˆç«¯æ— æ³•äº«ç”¨ã€‚è¿™ä¸ªæ—¶å€™ <strong>ProxyChains-NG</strong> åº”åŠ¿è€Œç”Ÿã€‚<br><a id=\"more\"></a></p>\n<h3 id=\"å®‰è£…\"><a href=\"#å®‰è£…\" class=\"headerlink\" title=\"å®‰è£…\"></a>å®‰è£…</h3><p>ä½¿ç”¨ <a href=\"http://brew.sh/index_zh-cn.html\" target=\"_blank\" rel=\"noopener\">brew</a> å¿«é€Ÿå®‰è£… ProxyChains-NGï¼Œæƒ³è¯¦ç»†äº†è§£ ProxyChains-NG å¯ä»¥å»ä»–ä»¬<a href=\"https://github.com/rofl0r/proxychains-ng\" target=\"_blank\" rel=\"noopener\">é¡¹ç›®ä¸»é¡µ</a>ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install proxychains-ng</span><br></pre></td></tr></table></figure></p>\n<p>é…ç½®<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /usr/<span class=\"built_in\">local</span>/etc/proxychains.conf</span><br></pre></td></tr></table></figure></p>\n<p>æ·»åŠ ä»£ç†<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">socks5  127.0.0.1 1080</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"ä½¿ç”¨\"><a href=\"#ä½¿ç”¨\" class=\"headerlink\" title=\"ä½¿ç”¨\"></a>ä½¿ç”¨</h3><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæ•´ä¸ªå‘½ä»¤å®‰è£…å®Œæˆï¼Œç”¨æ³• <code>proxychains4 éœ€è¦æ‰§è¡Œçš„å‘½ä»¤</code>ã€‚ä¸¾ä¸ªä¾‹å­ï¼šæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤åï¼Œå¯ä»¥çœ‹åˆ°æ˜¯ ss çš„ IP äº†ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">proxychains4 curl ip.cn</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"ä¼˜åŒ–\"><a href=\"#ä¼˜åŒ–\" class=\"headerlink\" title=\"ä¼˜åŒ–\"></a>ä¼˜åŒ–</h3><p>è¿™ä¸ªå‘½ä»¤å¤ªé•¿äº†ï¼Œæˆ‘æƒ³æ¢ä¸€ä¸ªï¼æˆ‘ä½¿ç”¨çš„æ˜¯ zshï¼Œæ¥ç»™ <code>proxychains4</code> é…ç½®ä¸€ä¸ªåˆ«åå§ï¼:P<br>ç¼–è¾‘ zsh é…ç½®æ–‡ä»¶<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi ~/.zshrc</span><br></pre></td></tr></table></figure></p>\n<p>æ·»åŠ åˆ«å<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">alias</span> myss=<span class=\"string\">'proxychains4'</span></span><br></pre></td></tr></table></figure></p>\n<p>è®©é…ç½®ç”Ÿæ•ˆ<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure></p>\n<p>å†æ‰§è¡Œä¹‹å‰æŸ¥çœ‹ ip çš„å‘½ä»¤<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">myss curl ip.cn</span><br></pre></td></tr></table></figure></p>\n<p>Have done! :)</p>\n<h3 id=\"æµ‹é€Ÿ\"><a href=\"#æµ‹é€Ÿ\" class=\"headerlink\" title=\"æµ‹é€Ÿ\"></a>æµ‹é€Ÿ</h3><p>ä½¿ç”¨ speedtest çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ¥æµ‹ä¸Šè¡Œå®½å¸¦å’Œä¸‹è¡Œå®½åº¦ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ä¸‹è½½ speedtest-cli</span></span><br><span class=\"line\">wget -O speedtest-cli https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç»™æ‰§è¡Œæƒé™</span></span><br><span class=\"line\">chmod +x speedtest-cli</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è¿è¡Œ</span></span><br><span class=\"line\">./speedtest-cli</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æµ‹è¯•ä¸‹ä»£ç†çš„é€Ÿåº¦</span></span><br><span class=\"line\">myss ./speedtest-cli</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"é™„ï¼šbrew-å¸¸ç”¨å‘½ä»¤\"><a href=\"#é™„ï¼šbrew-å¸¸ç”¨å‘½ä»¤\" class=\"headerlink\" title=\"é™„ï¼šbrew å¸¸ç”¨å‘½ä»¤\"></a>é™„ï¼šbrew å¸¸ç”¨å‘½ä»¤</h4><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">å‘½ä»¤</th>\n<th style=\"text-align:left\">å«ä¹‰</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">å®‰è£…åŒ…</td>\n<td style=\"text-align:left\">brew install <code>&lt;PackageName&gt;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">æœç´¢åŒ…</td>\n<td style=\"text-align:left\">brew search <code>&lt;PackageName&gt;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">æŸ¥è¯¢åŒ…ä¿¡æ¯</td>\n<td style=\"text-align:left\">brew info <code>&lt;PackageName&gt;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">å‡çº§æŒ‡å®šåŒ…</td>\n<td style=\"text-align:left\">brew upgrade <code>&lt;PackageName&gt;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">æ›´æ–°è‡ªå·±</td>\n<td style=\"text-align:left\">brew update</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">æ£€æŸ¥è¿‡æ—¶åŒ…</td>\n<td style=\"text-align:left\">brew outdated</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">å‡çº§æ‰€æœ‰åŒ…</td>\n<td style=\"text-align:left\">brew upgrade</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">æ¸…ç†ç¼“å­˜</td>\n<td style=\"text-align:left\">brew cleanup</td>\n</tr>\n</tbody>\n</table>\n","site":{"data":{}},"excerpt":"<p>ç»å¸¸åœ¨ç»ˆç«¯ä¸‹æ‰§è¡Œä¸€äº›ç½‘ç»œå‘½ä»¤ï¼Œä¾‹å¦‚ <code>wget</code> ã€<code>git</code>ã€<code>ssh</code> ç­‰å‘½ä»¤ï¼Œé€Ÿåº¦æ…¢çš„ä¸è¡Œï¼Œè¯´ç™½äº†ï¼Œæœ‰äº›æ˜¯å› ä¸º GFW çš„åŸå› ï¼Œæœ‰äº›åˆ™æ˜¯è®¿é—®å›½å¤–çš„æœåŠ¡å™¨æœ¬æ¥é€Ÿåº¦å°±å¾ˆæ…¢ï¼Œè€Œæˆ‘ä»¬çš„ ShadowSocks æä¾›çš„æ˜¯ <code>socks5</code> ä»£ç†ï¼Œç»ˆç«¯æ— æ³•äº«ç”¨ã€‚è¿™ä¸ªæ—¶å€™ <strong>ProxyChains-NG</strong> åº”åŠ¿è€Œç”Ÿã€‚<br>","more":"</p>\n<h3 id=\"å®‰è£…\"><a href=\"#å®‰è£…\" class=\"headerlink\" title=\"å®‰è£…\"></a>å®‰è£…</h3><p>ä½¿ç”¨ <a href=\"http://brew.sh/index_zh-cn.html\" target=\"_blank\" rel=\"noopener\">brew</a> å¿«é€Ÿå®‰è£… ProxyChains-NGï¼Œæƒ³è¯¦ç»†äº†è§£ ProxyChains-NG å¯ä»¥å»ä»–ä»¬<a href=\"https://github.com/rofl0r/proxychains-ng\" target=\"_blank\" rel=\"noopener\">é¡¹ç›®ä¸»é¡µ</a>ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install proxychains-ng</span><br></pre></td></tr></table></figure></p>\n<p>é…ç½®<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /usr/<span class=\"built_in\">local</span>/etc/proxychains.conf</span><br></pre></td></tr></table></figure></p>\n<p>æ·»åŠ ä»£ç†<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">socks5  127.0.0.1 1080</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"ä½¿ç”¨\"><a href=\"#ä½¿ç”¨\" class=\"headerlink\" title=\"ä½¿ç”¨\"></a>ä½¿ç”¨</h3><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæ•´ä¸ªå‘½ä»¤å®‰è£…å®Œæˆï¼Œç”¨æ³• <code>proxychains4 éœ€è¦æ‰§è¡Œçš„å‘½ä»¤</code>ã€‚ä¸¾ä¸ªä¾‹å­ï¼šæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤åï¼Œå¯ä»¥çœ‹åˆ°æ˜¯ ss çš„ IP äº†ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">proxychains4 curl ip.cn</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"ä¼˜åŒ–\"><a href=\"#ä¼˜åŒ–\" class=\"headerlink\" title=\"ä¼˜åŒ–\"></a>ä¼˜åŒ–</h3><p>è¿™ä¸ªå‘½ä»¤å¤ªé•¿äº†ï¼Œæˆ‘æƒ³æ¢ä¸€ä¸ªï¼æˆ‘ä½¿ç”¨çš„æ˜¯ zshï¼Œæ¥ç»™ <code>proxychains4</code> é…ç½®ä¸€ä¸ªåˆ«åå§ï¼:P<br>ç¼–è¾‘ zsh é…ç½®æ–‡ä»¶<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi ~/.zshrc</span><br></pre></td></tr></table></figure></p>\n<p>æ·»åŠ åˆ«å<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">alias</span> myss=<span class=\"string\">'proxychains4'</span></span><br></pre></td></tr></table></figure></p>\n<p>è®©é…ç½®ç”Ÿæ•ˆ<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure></p>\n<p>å†æ‰§è¡Œä¹‹å‰æŸ¥çœ‹ ip çš„å‘½ä»¤<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">myss curl ip.cn</span><br></pre></td></tr></table></figure></p>\n<p>Have done! :)</p>\n<h3 id=\"æµ‹é€Ÿ\"><a href=\"#æµ‹é€Ÿ\" class=\"headerlink\" title=\"æµ‹é€Ÿ\"></a>æµ‹é€Ÿ</h3><p>ä½¿ç”¨ speedtest çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ¥æµ‹ä¸Šè¡Œå®½å¸¦å’Œä¸‹è¡Œå®½åº¦ã€‚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ä¸‹è½½ speedtest-cli</span></span><br><span class=\"line\">wget -O speedtest-cli https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç»™æ‰§è¡Œæƒé™</span></span><br><span class=\"line\">chmod +x speedtest-cli</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è¿è¡Œ</span></span><br><span class=\"line\">./speedtest-cli</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æµ‹è¯•ä¸‹ä»£ç†çš„é€Ÿåº¦</span></span><br><span class=\"line\">myss ./speedtest-cli</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"é™„ï¼šbrew-å¸¸ç”¨å‘½ä»¤\"><a href=\"#é™„ï¼šbrew-å¸¸ç”¨å‘½ä»¤\" class=\"headerlink\" title=\"é™„ï¼šbrew å¸¸ç”¨å‘½ä»¤\"></a>é™„ï¼šbrew å¸¸ç”¨å‘½ä»¤</h4><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">å‘½ä»¤</th>\n<th style=\"text-align:left\">å«ä¹‰</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">å®‰è£…åŒ…</td>\n<td style=\"text-align:left\">brew install <code>&lt;PackageName&gt;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">æœç´¢åŒ…</td>\n<td style=\"text-align:left\">brew search <code>&lt;PackageName&gt;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">æŸ¥è¯¢åŒ…ä¿¡æ¯</td>\n<td style=\"text-align:left\">brew info <code>&lt;PackageName&gt;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">å‡çº§æŒ‡å®šåŒ…</td>\n<td style=\"text-align:left\">brew upgrade <code>&lt;PackageName&gt;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">æ›´æ–°è‡ªå·±</td>\n<td style=\"text-align:left\">brew update</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">æ£€æŸ¥è¿‡æ—¶åŒ…</td>\n<td style=\"text-align:left\">brew outdated</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">å‡çº§æ‰€æœ‰åŒ…</td>\n<td style=\"text-align:left\">brew upgrade</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">æ¸…ç†ç¼“å­˜</td>\n<td style=\"text-align:left\">brew cleanup</td>\n</tr>\n</tbody>\n</table>"},{"title":"React ç»„ä»¶æ¨¡å¼","comments":1,"date":"2018-05-14T16:33:40.000Z","from":"https://levelup.gitconnected.com/react-component-patterns-ab1f09be2c82","_content":"\nä½¿ç”¨ React å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œ React æ˜¯ Facebook å…¬å¸å¼€å‘çš„ç”¨äºæ„å»ºç½‘é¡µç•Œé¢çš„ UI åº“ã€‚æœ¬æ–‡è¯•å›¾æ€»ç»“å®è·µä¸­æ‰€å­¦åˆ°çš„ä¸€äº›æ¨¡å¼ï¼ŒåŒæ—¶å¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åˆ°å³å°†è¿ˆå…¥ç»„ä»¶ä¸–ç•Œçš„å¼€å‘è€…ã€‚\n\n<!-- more -->\n\n### æ¦‚è¦\n\n- æœ‰çŠ¶æ€ç»„ä»¶ vs æ— çŠ¶æ€ç»„ä»¶\n- å®¹å™¨ç»„ä»¶ vs å±•ç¤ºç»„ä»¶\n- é«˜é˜¶ç»„ä»¶ vs å›è°ƒæ¸²æŸ“ç»„ä»¶\n\n![image](https://user-images.githubusercontent.com/15377484/40128970-a333542c-5965-11e8-8505-d1284d2759b1.png)\n\n### æœ‰çŠ¶æ€ç»„ä»¶ vs æ— çŠ¶æ€ç»„ä»¶\n\næ­£å¦‚ WEB æœåŠ¡æœ‰é™æ€å’ŒåŠ¨æ€ä¹‹åˆ†ï¼ŒReact ç»„ä»¶ä¹Ÿæœ‰æœ‰çŠ¶æ€å’Œæ— çŠ¶æ€çš„åŒºåˆ†ã€‚\n\n- æœ‰çŠ¶æ€ç»„ä»¶ï¼šåœ¨åº”ç”¨ä¸­ç»„ä»¶å¯ä»¥æ‹¥æœ‰è‡ªèº«çŠ¶æ€å¹¶æ“çºµå®ƒï¼›\n- æ— çŠ¶æ€ç»„ä»¶ï¼šåªæ¥æ”¶å±æ€§è¿›è¡Œæ•ˆæœå‘ˆç°ã€‚\n\nä¸€ä¸ªç®€å•çš„æ— çŠ¶æ€ç»„ä»¶ï¼Œåªå—å±æ€§æ§åˆ¶:\n\n```jsx\nconst Button = props => <button onClick={props.onClick}>{props.text}</button>;\n```\n\nä¸€ä¸ªå…·æœ‰è®¡æ•°åŠŸèƒ½çš„æŒ‰é’®ç»„ä»¶ (å¤ç”¨ä¸Šé¢ Button ç»„ä»¶)\n\n```jsx\nclass ButtonCounter extends React.Component {\n  constructor() {\n    super();\n    this.state = { clicks: 0 };\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick() {\n    this.setState({ clicks: this.state.clicks + 1 });\n  }\n\n  render() {\n    return (\n      <Button\n        onClick={this.handleClick}\n        text={`You've clicked me ${this.state.clicks} times!`}\n      />\n    );\n  }\n}\n```\n\næ­£å¦‚ä¸Šé¢ä¸¤ä¸ª Demo æ‰€ç¤ºï¼Œç¬¬äºŒä¸ªç»„ä»¶çš„ `constructor` å…·æœ‰çŠ¶æ€çš„å®šä¹‰ï¼Œç¬¬ä¸€ä¸ªç»„ä»¶åªæ˜¯å•çº¯åœ°æ¸²æŸ“å±æ€§æ–‡å­—ã€‚æœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶çš„åˆ’åˆ†çœ‹èµ·æ¥éå¸¸ç®€å•ï¼Œä½†æ˜¯å®ƒå¯¹äºç»„ä»¶å¤ç”¨å…·æœ‰é‡å¤§æ„ä¹‰ã€‚\n\n### å®¹å™¨ç»„ä»¶ vs å±•ç¤ºç»„ä»¶\n\nå½“ç»„ä»¶éœ€è¦è·å–å¤–éƒ¨æ•°æ®æ—¶ï¼Œæˆ‘ä»¬åˆå¯ä»¥å°†ç»„ä»¶åˆ’åˆ†ä¸ºä¸¤ç§æ–°çš„ç±»å‹ã€‚å®¹å™¨ç»„ä»¶è´Ÿè´£è·å–æ•°æ®ï¼Œå®ƒå¸¸å¸¸æ˜¯è¶…å‡ºäº† React èŒƒç•´çš„ï¼Œå¦‚ä½¿ç”¨ Redux æˆ– Relay è¿›è¡Œäº†ç»‘å®šã€‚å¯¹æ¯”è€Œè¨€ï¼Œå±•ç¤ºå‹ç»„ä»¶ä¸ä¾èµ–äºç¨‹åºå…¶ä»–éƒ¨åˆ†ï¼Œå®ƒåªå’Œè‡ªèº«çŠ¶æ€æˆ–å±æ€§æœ‰å…³ã€‚ä¸‹é¢æˆ‘ä»¬å®ç°ä¸€ä¸ªç”¨æˆ·åˆ—è¡¨çš„å±•ç¤ºç»„ä»¶:\n\n```jsx\nconst UserList = props => (\n  <ul>\n    {props.users.map(u => (\n      <li>\n        {u.name} â€” {u.age} years old\n      </li>\n    ))}\n  </ul>\n);\n```\n\nå®¹å™¨ç»„ä»¶å¯ä»¥ç”¨æ¥æ›´æ–°ç”¨æˆ·åˆ—è¡¨çš„å±•ç¤º:\n\n```jsx\nclass UserListContainer extends React.Component {\n  constructor() {\n    super();\n    this.state = { users: [] };\n  }\n\n  componentDidMount() {\n    fetchUsers(users => this.setState({ users }));\n  }\n\n  render() {\n    return <UserList users={this.state.users} />;\n  }\n}\n```\n\nè¿™ç§åˆ†ç±»å°†æ•°æ®è·å–å’Œæ¸²æŸ“çš„é€»è¾‘åˆ†å¼€ï¼Œè¿›è€Œä½¿ç”¨æˆ·åˆ—è¡¨ç»„ä»¶å¯ä»¥å¤ç”¨ã€‚\n\nå¦‚æœä½ æƒ³äº†è§£æ›´å¤šè¯¥æ¨¡å¼çš„ä¿¡æ¯ï¼Œ[è¿™ç¯‡æ–‡ç« ](https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0)å¯¹å®ƒè¿›è¡Œäº†è¯¦ç»†çš„è§£é‡Šã€‚\n\n### é«˜é˜¶ç»„ä»¶\n\nå½“ä½ æƒ³å¤ç”¨ç»„ä»¶é€»è¾‘æ—¶ï¼Œé«˜é˜¶ç»„ä»¶éå¸¸æœ‰ç”¨ã€‚é«˜é˜¶ç»„ä»¶ï¼šæ˜¯å°†ç»„ä»¶ä½œä¸ºå‚æ•°å¹¶è¿”å›æ–°ç»„ä»¶çš„ JS å‡½æ•°ã€‚\n\nå‡è®¾ä½ éœ€è¦æ„å»ºä¸€ä¸ªå¯æ‰©å±•èœå•ç»„ä»¶ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æ—¶ï¼Œå®ƒä¼šæ˜¾ç¤ºéšè—å­ç»„ä»¶å†…å®¹ã€‚å› æ­¤ï¼Œä½ å¯ä»¥ä½¿ç”¨é«˜é˜¶ç»„ä»¶æ¥å®ç°:\n\n```jsx\nfunction makeToggleable(Clickable) {\n  return class extends React.Component {\n    constructor() {\n      super();\n      this.toggle = this.toggle.bind(this);\n      this.state = { show: false };\n    }\n\n    toggle() {\n      this.setState(prevState => ({ show: !prevState.show }));\n    }\n\n    render() {\n      return (\n        <div>\n          <Clickable {...this.props} onClick={this.toggle} />\n          {this.state.show && this.props.children}\n        </div>\n      );\n    }\n  };\n}\n```\n\nè¿™ç§æ–¹æ³•å…è®¸æˆ‘ä»¬ä½¿ç”¨ ES7 è£…é¥°å™¨è¯­æ³•å°†é€»è¾‘åº”ç”¨äº ToggleableMenu ç»„ä»¶:\n\n```jsx\n@makeToggleable\nclass ToggleableMenu extends React.Component {\n  render() {\n    return (\n      <div onClick={this.props.onClick}>\n        <h1>{this.props.title}</h1>\n      </div>\n    );\n  }\n}\n```\n\nç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»»ä½•å­ç»„ä»¶ä¼ é€’ç»™ ToggleableMenu ç»„ä»¶:\n\n```jsx\nclass Menu extends React.Component {\n  render() {\n    return (\n      <div>\n        <ToggleableMenu title=\"First Menu\">\n          <p>Some content</p>\n        </ToggleableMenu>\n        <ToggleableMenu title=\"Second Menu\">\n          <p>Another content</p>\n        </ToggleableMenu>\n        <ToggleableMenu title=\"Third Menu\">\n          <p>More content</p>\n        </ToggleableMenu>\n      </div>\n    );\n  }\n}\n```\n\nå¦‚æœä½ ç†Ÿæ‚‰ Redux çš„ connect å‡½æ•°æˆ–è€… React Router çš„ withRouter å‡½æ•°ï¼Œé‚£ä¹ˆä½ å·²ç»ä½¿ç”¨è¿‡é«˜é˜¶ç»„ä»¶äº†ã€‚\n\n### å›è°ƒæ¸²æŸ“ç»„ä»¶\n\nå¦ä¸€ä¸ªæ¯”è¾ƒé«˜ç«¯çš„å¤ç”¨ç»„ä»¶é€»è¾‘çš„æ–¹æ³•æ˜¯å°†å‡½æ•°ä½œä¸ºç»„ä»¶çš„ `props.children`ï¼Œè¯¥æ–¹æ³•ä¹Ÿç§°ä¸º **Function as Child Components**ã€‚æˆ‘ä»¬å°†ä½¿ç”¨**æ¸²æŸ“å›è°ƒ**æ¥é‡æ–°å®ç°ä¸Šé¢çš„å¯æ‰©å±• Menu:\n\n```jsx\nclass Toggleable extends React.Component {\n  constructor() {\n    super();\n    this.toggle = this.toggle.bind(this);\n    this.state = { show: false };\n  }\n\n  toggle() {\n    this.setState(prevState => ({ show: !prevState.show }));\n  }\n\n  render() {\n    return this.props.children(this.state.show, this.toggle);\n  }\n}\n```\n\nç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†å‡½æ•°ä½œä¸ºç»„ä»¶çš„å­çº§è¿›è¡Œä¼ é€’:\n\n```jsx\n<Toggleable>\n  {(show, onClick) => (\n    <div>\n      <div onClick={onClick}>\n        <h1>{props.title}</h1>\n      </div>\n      {show && props.children}\n    </div>\n  )}\n</Toggleable>\n```\n\nä¸Šé¢çš„ä»£ç å·²ç»å°†ä¸€ä¸ªå‡½æ•°ä½œä¸º**å­ç»„ä»¶**ï¼Œä½†æ˜¯ï¼Œè‹¥æˆ‘ä»¬æƒ³å¤ç”¨ä¸Šè¿°é€»è¾‘ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªè½¬æ¢é€»è¾‘çš„æ–°ç»„ä»¶ï¼š\n\n```jsx\nconst ToggleableMenu = props => (\n  <Toggleable>\n    {(show, onClick) => (\n      <div>\n        <div onClick={onClick}>\n          <h1>{props.title}</h1>\n        </div>\n        {show && props.children}\n      </div>\n    )}\n  </Toggleable>\n);\n```\n\næˆ‘ä»¬ä½¿ç”¨ Render Callbacks å®ç°çš„å¯æ‰©å±•çš„ Menu ç»„ä»¶å¦‚ä¸‹:\n\n```jsx\nclass Menu extends React.Component {\n  render() {\n    return (\n      <div>\n        <ToggleableMenu title=\"First Menu\">\n          <p>Some content</p>\n        </ToggleableMenu>\n        <ToggleableMenu title=\"Second Menu\">\n          <p>Another content</p>\n        </ToggleableMenu>\n        <ToggleableMenu title=\"Third Menu\">\n          <p>More content</p>\n        </ToggleableMenu>\n      </div>\n    );\n  }\n}\n```\n\nå›è°ƒæ¸²æŸ“ç»„ä»¶ (Render Callbacks) å’Œé«˜é˜¶å‡½æ•°ä½¿æˆ‘ä»¬çš„ç»„ä»¶æ›´åŠ çµæ´»ï¼ŒæŒæ¡å’Œé€‚åº”èµ·æ¥å…·æœ‰ä¸€å®šçš„éš¾åº¦ï¼Œéœ€è¦åå¤å­¦ä¹ å’Œæ¶ˆåŒ–ã€‚\n","source":"_posts/React-ç»„ä»¶æ¨¡å¼.md","raw":"---\ntitle: React ç»„ä»¶æ¨¡å¼\ncomments: true\ndate: 2018-05-15 00:33:40\ntags:\nfrom: https://levelup.gitconnected.com/react-component-patterns-ab1f09be2c82\n---\n\nä½¿ç”¨ React å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œ React æ˜¯ Facebook å…¬å¸å¼€å‘çš„ç”¨äºæ„å»ºç½‘é¡µç•Œé¢çš„ UI åº“ã€‚æœ¬æ–‡è¯•å›¾æ€»ç»“å®è·µä¸­æ‰€å­¦åˆ°çš„ä¸€äº›æ¨¡å¼ï¼ŒåŒæ—¶å¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åˆ°å³å°†è¿ˆå…¥ç»„ä»¶ä¸–ç•Œçš„å¼€å‘è€…ã€‚\n\n<!-- more -->\n\n### æ¦‚è¦\n\n- æœ‰çŠ¶æ€ç»„ä»¶ vs æ— çŠ¶æ€ç»„ä»¶\n- å®¹å™¨ç»„ä»¶ vs å±•ç¤ºç»„ä»¶\n- é«˜é˜¶ç»„ä»¶ vs å›è°ƒæ¸²æŸ“ç»„ä»¶\n\n![image](https://user-images.githubusercontent.com/15377484/40128970-a333542c-5965-11e8-8505-d1284d2759b1.png)\n\n### æœ‰çŠ¶æ€ç»„ä»¶ vs æ— çŠ¶æ€ç»„ä»¶\n\næ­£å¦‚ WEB æœåŠ¡æœ‰é™æ€å’ŒåŠ¨æ€ä¹‹åˆ†ï¼ŒReact ç»„ä»¶ä¹Ÿæœ‰æœ‰çŠ¶æ€å’Œæ— çŠ¶æ€çš„åŒºåˆ†ã€‚\n\n- æœ‰çŠ¶æ€ç»„ä»¶ï¼šåœ¨åº”ç”¨ä¸­ç»„ä»¶å¯ä»¥æ‹¥æœ‰è‡ªèº«çŠ¶æ€å¹¶æ“çºµå®ƒï¼›\n- æ— çŠ¶æ€ç»„ä»¶ï¼šåªæ¥æ”¶å±æ€§è¿›è¡Œæ•ˆæœå‘ˆç°ã€‚\n\nä¸€ä¸ªç®€å•çš„æ— çŠ¶æ€ç»„ä»¶ï¼Œåªå—å±æ€§æ§åˆ¶:\n\n```jsx\nconst Button = props => <button onClick={props.onClick}>{props.text}</button>;\n```\n\nä¸€ä¸ªå…·æœ‰è®¡æ•°åŠŸèƒ½çš„æŒ‰é’®ç»„ä»¶ (å¤ç”¨ä¸Šé¢ Button ç»„ä»¶)\n\n```jsx\nclass ButtonCounter extends React.Component {\n  constructor() {\n    super();\n    this.state = { clicks: 0 };\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick() {\n    this.setState({ clicks: this.state.clicks + 1 });\n  }\n\n  render() {\n    return (\n      <Button\n        onClick={this.handleClick}\n        text={`You've clicked me ${this.state.clicks} times!`}\n      />\n    );\n  }\n}\n```\n\næ­£å¦‚ä¸Šé¢ä¸¤ä¸ª Demo æ‰€ç¤ºï¼Œç¬¬äºŒä¸ªç»„ä»¶çš„ `constructor` å…·æœ‰çŠ¶æ€çš„å®šä¹‰ï¼Œç¬¬ä¸€ä¸ªç»„ä»¶åªæ˜¯å•çº¯åœ°æ¸²æŸ“å±æ€§æ–‡å­—ã€‚æœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶çš„åˆ’åˆ†çœ‹èµ·æ¥éå¸¸ç®€å•ï¼Œä½†æ˜¯å®ƒå¯¹äºç»„ä»¶å¤ç”¨å…·æœ‰é‡å¤§æ„ä¹‰ã€‚\n\n### å®¹å™¨ç»„ä»¶ vs å±•ç¤ºç»„ä»¶\n\nå½“ç»„ä»¶éœ€è¦è·å–å¤–éƒ¨æ•°æ®æ—¶ï¼Œæˆ‘ä»¬åˆå¯ä»¥å°†ç»„ä»¶åˆ’åˆ†ä¸ºä¸¤ç§æ–°çš„ç±»å‹ã€‚å®¹å™¨ç»„ä»¶è´Ÿè´£è·å–æ•°æ®ï¼Œå®ƒå¸¸å¸¸æ˜¯è¶…å‡ºäº† React èŒƒç•´çš„ï¼Œå¦‚ä½¿ç”¨ Redux æˆ– Relay è¿›è¡Œäº†ç»‘å®šã€‚å¯¹æ¯”è€Œè¨€ï¼Œå±•ç¤ºå‹ç»„ä»¶ä¸ä¾èµ–äºç¨‹åºå…¶ä»–éƒ¨åˆ†ï¼Œå®ƒåªå’Œè‡ªèº«çŠ¶æ€æˆ–å±æ€§æœ‰å…³ã€‚ä¸‹é¢æˆ‘ä»¬å®ç°ä¸€ä¸ªç”¨æˆ·åˆ—è¡¨çš„å±•ç¤ºç»„ä»¶:\n\n```jsx\nconst UserList = props => (\n  <ul>\n    {props.users.map(u => (\n      <li>\n        {u.name} â€” {u.age} years old\n      </li>\n    ))}\n  </ul>\n);\n```\n\nå®¹å™¨ç»„ä»¶å¯ä»¥ç”¨æ¥æ›´æ–°ç”¨æˆ·åˆ—è¡¨çš„å±•ç¤º:\n\n```jsx\nclass UserListContainer extends React.Component {\n  constructor() {\n    super();\n    this.state = { users: [] };\n  }\n\n  componentDidMount() {\n    fetchUsers(users => this.setState({ users }));\n  }\n\n  render() {\n    return <UserList users={this.state.users} />;\n  }\n}\n```\n\nè¿™ç§åˆ†ç±»å°†æ•°æ®è·å–å’Œæ¸²æŸ“çš„é€»è¾‘åˆ†å¼€ï¼Œè¿›è€Œä½¿ç”¨æˆ·åˆ—è¡¨ç»„ä»¶å¯ä»¥å¤ç”¨ã€‚\n\nå¦‚æœä½ æƒ³äº†è§£æ›´å¤šè¯¥æ¨¡å¼çš„ä¿¡æ¯ï¼Œ[è¿™ç¯‡æ–‡ç« ](https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0)å¯¹å®ƒè¿›è¡Œäº†è¯¦ç»†çš„è§£é‡Šã€‚\n\n### é«˜é˜¶ç»„ä»¶\n\nå½“ä½ æƒ³å¤ç”¨ç»„ä»¶é€»è¾‘æ—¶ï¼Œé«˜é˜¶ç»„ä»¶éå¸¸æœ‰ç”¨ã€‚é«˜é˜¶ç»„ä»¶ï¼šæ˜¯å°†ç»„ä»¶ä½œä¸ºå‚æ•°å¹¶è¿”å›æ–°ç»„ä»¶çš„ JS å‡½æ•°ã€‚\n\nå‡è®¾ä½ éœ€è¦æ„å»ºä¸€ä¸ªå¯æ‰©å±•èœå•ç»„ä»¶ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æ—¶ï¼Œå®ƒä¼šæ˜¾ç¤ºéšè—å­ç»„ä»¶å†…å®¹ã€‚å› æ­¤ï¼Œä½ å¯ä»¥ä½¿ç”¨é«˜é˜¶ç»„ä»¶æ¥å®ç°:\n\n```jsx\nfunction makeToggleable(Clickable) {\n  return class extends React.Component {\n    constructor() {\n      super();\n      this.toggle = this.toggle.bind(this);\n      this.state = { show: false };\n    }\n\n    toggle() {\n      this.setState(prevState => ({ show: !prevState.show }));\n    }\n\n    render() {\n      return (\n        <div>\n          <Clickable {...this.props} onClick={this.toggle} />\n          {this.state.show && this.props.children}\n        </div>\n      );\n    }\n  };\n}\n```\n\nè¿™ç§æ–¹æ³•å…è®¸æˆ‘ä»¬ä½¿ç”¨ ES7 è£…é¥°å™¨è¯­æ³•å°†é€»è¾‘åº”ç”¨äº ToggleableMenu ç»„ä»¶:\n\n```jsx\n@makeToggleable\nclass ToggleableMenu extends React.Component {\n  render() {\n    return (\n      <div onClick={this.props.onClick}>\n        <h1>{this.props.title}</h1>\n      </div>\n    );\n  }\n}\n```\n\nç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»»ä½•å­ç»„ä»¶ä¼ é€’ç»™ ToggleableMenu ç»„ä»¶:\n\n```jsx\nclass Menu extends React.Component {\n  render() {\n    return (\n      <div>\n        <ToggleableMenu title=\"First Menu\">\n          <p>Some content</p>\n        </ToggleableMenu>\n        <ToggleableMenu title=\"Second Menu\">\n          <p>Another content</p>\n        </ToggleableMenu>\n        <ToggleableMenu title=\"Third Menu\">\n          <p>More content</p>\n        </ToggleableMenu>\n      </div>\n    );\n  }\n}\n```\n\nå¦‚æœä½ ç†Ÿæ‚‰ Redux çš„ connect å‡½æ•°æˆ–è€… React Router çš„ withRouter å‡½æ•°ï¼Œé‚£ä¹ˆä½ å·²ç»ä½¿ç”¨è¿‡é«˜é˜¶ç»„ä»¶äº†ã€‚\n\n### å›è°ƒæ¸²æŸ“ç»„ä»¶\n\nå¦ä¸€ä¸ªæ¯”è¾ƒé«˜ç«¯çš„å¤ç”¨ç»„ä»¶é€»è¾‘çš„æ–¹æ³•æ˜¯å°†å‡½æ•°ä½œä¸ºç»„ä»¶çš„ `props.children`ï¼Œè¯¥æ–¹æ³•ä¹Ÿç§°ä¸º **Function as Child Components**ã€‚æˆ‘ä»¬å°†ä½¿ç”¨**æ¸²æŸ“å›è°ƒ**æ¥é‡æ–°å®ç°ä¸Šé¢çš„å¯æ‰©å±• Menu:\n\n```jsx\nclass Toggleable extends React.Component {\n  constructor() {\n    super();\n    this.toggle = this.toggle.bind(this);\n    this.state = { show: false };\n  }\n\n  toggle() {\n    this.setState(prevState => ({ show: !prevState.show }));\n  }\n\n  render() {\n    return this.props.children(this.state.show, this.toggle);\n  }\n}\n```\n\nç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†å‡½æ•°ä½œä¸ºç»„ä»¶çš„å­çº§è¿›è¡Œä¼ é€’:\n\n```jsx\n<Toggleable>\n  {(show, onClick) => (\n    <div>\n      <div onClick={onClick}>\n        <h1>{props.title}</h1>\n      </div>\n      {show && props.children}\n    </div>\n  )}\n</Toggleable>\n```\n\nä¸Šé¢çš„ä»£ç å·²ç»å°†ä¸€ä¸ªå‡½æ•°ä½œä¸º**å­ç»„ä»¶**ï¼Œä½†æ˜¯ï¼Œè‹¥æˆ‘ä»¬æƒ³å¤ç”¨ä¸Šè¿°é€»è¾‘ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªè½¬æ¢é€»è¾‘çš„æ–°ç»„ä»¶ï¼š\n\n```jsx\nconst ToggleableMenu = props => (\n  <Toggleable>\n    {(show, onClick) => (\n      <div>\n        <div onClick={onClick}>\n          <h1>{props.title}</h1>\n        </div>\n        {show && props.children}\n      </div>\n    )}\n  </Toggleable>\n);\n```\n\næˆ‘ä»¬ä½¿ç”¨ Render Callbacks å®ç°çš„å¯æ‰©å±•çš„ Menu ç»„ä»¶å¦‚ä¸‹:\n\n```jsx\nclass Menu extends React.Component {\n  render() {\n    return (\n      <div>\n        <ToggleableMenu title=\"First Menu\">\n          <p>Some content</p>\n        </ToggleableMenu>\n        <ToggleableMenu title=\"Second Menu\">\n          <p>Another content</p>\n        </ToggleableMenu>\n        <ToggleableMenu title=\"Third Menu\">\n          <p>More content</p>\n        </ToggleableMenu>\n      </div>\n    );\n  }\n}\n```\n\nå›è°ƒæ¸²æŸ“ç»„ä»¶ (Render Callbacks) å’Œé«˜é˜¶å‡½æ•°ä½¿æˆ‘ä»¬çš„ç»„ä»¶æ›´åŠ çµæ´»ï¼ŒæŒæ¡å’Œé€‚åº”èµ·æ¥å…·æœ‰ä¸€å®šçš„éš¾åº¦ï¼Œéœ€è¦åå¤å­¦ä¹ å’Œæ¶ˆåŒ–ã€‚\n","slug":"React-ç»„ä»¶æ¨¡å¼","published":1,"updated":"2019-12-07T04:59:34.371Z","layout":"post","photos":[],"link":"","_id":"ck3v60jti000hr9q9bu4g0xyd","content":"<p>ä½¿ç”¨ React å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œ React æ˜¯ Facebook å…¬å¸å¼€å‘çš„ç”¨äºæ„å»ºç½‘é¡µç•Œé¢çš„ UI åº“ã€‚æœ¬æ–‡è¯•å›¾æ€»ç»“å®è·µä¸­æ‰€å­¦åˆ°çš„ä¸€äº›æ¨¡å¼ï¼ŒåŒæ—¶å¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åˆ°å³å°†è¿ˆå…¥ç»„ä»¶ä¸–ç•Œçš„å¼€å‘è€…ã€‚</p>\n<a id=\"more\"></a>\n<h3 id=\"æ¦‚è¦\"><a href=\"#æ¦‚è¦\" class=\"headerlink\" title=\"æ¦‚è¦\"></a>æ¦‚è¦</h3><ul>\n<li>æœ‰çŠ¶æ€ç»„ä»¶ vs æ— çŠ¶æ€ç»„ä»¶</li>\n<li>å®¹å™¨ç»„ä»¶ vs å±•ç¤ºç»„ä»¶</li>\n<li>é«˜é˜¶ç»„ä»¶ vs å›è°ƒæ¸²æŸ“ç»„ä»¶</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/40128970-a333542c-5965-11e8-8505-d1284d2759b1.png\" alt=\"image\"></p>\n<h3 id=\"æœ‰çŠ¶æ€ç»„ä»¶-vs-æ— çŠ¶æ€ç»„ä»¶\"><a href=\"#æœ‰çŠ¶æ€ç»„ä»¶-vs-æ— çŠ¶æ€ç»„ä»¶\" class=\"headerlink\" title=\"æœ‰çŠ¶æ€ç»„ä»¶ vs æ— çŠ¶æ€ç»„ä»¶\"></a>æœ‰çŠ¶æ€ç»„ä»¶ vs æ— çŠ¶æ€ç»„ä»¶</h3><p>æ­£å¦‚ WEB æœåŠ¡æœ‰é™æ€å’ŒåŠ¨æ€ä¹‹åˆ†ï¼ŒReact ç»„ä»¶ä¹Ÿæœ‰æœ‰çŠ¶æ€å’Œæ— çŠ¶æ€çš„åŒºåˆ†ã€‚</p>\n<ul>\n<li>æœ‰çŠ¶æ€ç»„ä»¶ï¼šåœ¨åº”ç”¨ä¸­ç»„ä»¶å¯ä»¥æ‹¥æœ‰è‡ªèº«çŠ¶æ€å¹¶æ“çºµå®ƒï¼›</li>\n<li>æ— çŠ¶æ€ç»„ä»¶ï¼šåªæ¥æ”¶å±æ€§è¿›è¡Œæ•ˆæœå‘ˆç°ã€‚</li>\n</ul>\n<p>ä¸€ä¸ªç®€å•çš„æ— çŠ¶æ€ç»„ä»¶ï¼Œåªå—å±æ€§æ§åˆ¶:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> Button = <span class=\"function\"><span class=\"params\">props</span> =&gt;</span> &lt;button onClick=&#123;props.onClick&#125;&gt;&#123;props.text&#125;&lt;<span class=\"regexp\">/button&gt;;</span></span><br></pre></td></tr></table></figure>\n<p>ä¸€ä¸ªå…·æœ‰è®¡æ•°åŠŸèƒ½çš„æŒ‰é’®ç»„ä»¶ (å¤ç”¨ä¸Šé¢ Button ç»„ä»¶)</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ButtonCounter</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.state = &#123; <span class=\"attr\">clicks</span>: <span class=\"number\">0</span> &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.handleClick = <span class=\"keyword\">this</span>.handleClick.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  handleClick() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setState(&#123; <span class=\"attr\">clicks</span>: <span class=\"keyword\">this</span>.state.clicks + <span class=\"number\">1</span> &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;Button</span><br><span class=\"line\">        onClick=&#123;<span class=\"keyword\">this</span>.handleClick&#125;</span><br><span class=\"line\">        text=&#123;<span class=\"string\">`You've clicked me <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.state.clicks&#125;</span> times!`</span>&#125;</span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ­£å¦‚ä¸Šé¢ä¸¤ä¸ª Demo æ‰€ç¤ºï¼Œç¬¬äºŒä¸ªç»„ä»¶çš„ <code>constructor</code> å…·æœ‰çŠ¶æ€çš„å®šä¹‰ï¼Œç¬¬ä¸€ä¸ªç»„ä»¶åªæ˜¯å•çº¯åœ°æ¸²æŸ“å±æ€§æ–‡å­—ã€‚æœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶çš„åˆ’åˆ†çœ‹èµ·æ¥éå¸¸ç®€å•ï¼Œä½†æ˜¯å®ƒå¯¹äºç»„ä»¶å¤ç”¨å…·æœ‰é‡å¤§æ„ä¹‰ã€‚</p>\n<h3 id=\"å®¹å™¨ç»„ä»¶-vs-å±•ç¤ºç»„ä»¶\"><a href=\"#å®¹å™¨ç»„ä»¶-vs-å±•ç¤ºç»„ä»¶\" class=\"headerlink\" title=\"å®¹å™¨ç»„ä»¶ vs å±•ç¤ºç»„ä»¶\"></a>å®¹å™¨ç»„ä»¶ vs å±•ç¤ºç»„ä»¶</h3><p>å½“ç»„ä»¶éœ€è¦è·å–å¤–éƒ¨æ•°æ®æ—¶ï¼Œæˆ‘ä»¬åˆå¯ä»¥å°†ç»„ä»¶åˆ’åˆ†ä¸ºä¸¤ç§æ–°çš„ç±»å‹ã€‚å®¹å™¨ç»„ä»¶è´Ÿè´£è·å–æ•°æ®ï¼Œå®ƒå¸¸å¸¸æ˜¯è¶…å‡ºäº† React èŒƒç•´çš„ï¼Œå¦‚ä½¿ç”¨ Redux æˆ– Relay è¿›è¡Œäº†ç»‘å®šã€‚å¯¹æ¯”è€Œè¨€ï¼Œå±•ç¤ºå‹ç»„ä»¶ä¸ä¾èµ–äºç¨‹åºå…¶ä»–éƒ¨åˆ†ï¼Œå®ƒåªå’Œè‡ªèº«çŠ¶æ€æˆ–å±æ€§æœ‰å…³ã€‚ä¸‹é¢æˆ‘ä»¬å®ç°ä¸€ä¸ªç”¨æˆ·åˆ—è¡¨çš„å±•ç¤ºç»„ä»¶:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> UserList = <span class=\"function\"><span class=\"params\">props</span> =&gt;</span> (</span><br><span class=\"line\">  &lt;ul&gt;</span><br><span class=\"line\">    &#123;props.users.map(<span class=\"function\"><span class=\"params\">u</span> =&gt;</span> (</span><br><span class=\"line\">      &lt;li&gt;</span><br><span class=\"line\">        &#123;u.name&#125; â€” &#123;u.age&#125; years old</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/li&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    ))&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;/u</span>l&gt;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>å®¹å™¨ç»„ä»¶å¯ä»¥ç”¨æ¥æ›´æ–°ç”¨æˆ·åˆ—è¡¨çš„å±•ç¤º:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserListContainer</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.state = &#123; <span class=\"attr\">users</span>: [] &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  componentDidMount() &#123;</span><br><span class=\"line\">    fetchUsers(<span class=\"function\"><span class=\"params\">users</span> =&gt;</span> <span class=\"keyword\">this</span>.setState(&#123; users &#125;));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">UserList</span> <span class=\"attr\">users</span>=<span class=\"string\">&#123;this.state.users&#125;</span> /&gt;</span>;</span></span><br><span class=\"line\"><span class=\"xml\">  &#125;</span></span><br><span class=\"line\"><span class=\"xml\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>è¿™ç§åˆ†ç±»å°†æ•°æ®è·å–å’Œæ¸²æŸ“çš„é€»è¾‘åˆ†å¼€ï¼Œè¿›è€Œä½¿ç”¨æˆ·åˆ—è¡¨ç»„ä»¶å¯ä»¥å¤ç”¨ã€‚</p>\n<p>å¦‚æœä½ æƒ³äº†è§£æ›´å¤šè¯¥æ¨¡å¼çš„ä¿¡æ¯ï¼Œ<a href=\"https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0\" target=\"_blank\" rel=\"noopener\">è¿™ç¯‡æ–‡ç« </a>å¯¹å®ƒè¿›è¡Œäº†è¯¦ç»†çš„è§£é‡Šã€‚</p>\n<h3 id=\"é«˜é˜¶ç»„ä»¶\"><a href=\"#é«˜é˜¶ç»„ä»¶\" class=\"headerlink\" title=\"é«˜é˜¶ç»„ä»¶\"></a>é«˜é˜¶ç»„ä»¶</h3><p>å½“ä½ æƒ³å¤ç”¨ç»„ä»¶é€»è¾‘æ—¶ï¼Œé«˜é˜¶ç»„ä»¶éå¸¸æœ‰ç”¨ã€‚é«˜é˜¶ç»„ä»¶ï¼šæ˜¯å°†ç»„ä»¶ä½œä¸ºå‚æ•°å¹¶è¿”å›æ–°ç»„ä»¶çš„ JS å‡½æ•°ã€‚</p>\n<p>å‡è®¾ä½ éœ€è¦æ„å»ºä¸€ä¸ªå¯æ‰©å±•èœå•ç»„ä»¶ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æ—¶ï¼Œå®ƒä¼šæ˜¾ç¤ºéšè—å­ç»„ä»¶å†…å®¹ã€‚å› æ­¤ï¼Œä½ å¯ä»¥ä½¿ç”¨é«˜é˜¶ç»„ä»¶æ¥å®ç°:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">makeToggleable</span>(<span class=\"params\">Clickable</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">super</span>();</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.toggle = <span class=\"keyword\">this</span>.toggle.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.state = &#123; <span class=\"attr\">show</span>: <span class=\"literal\">false</span> &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    toggle() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.setState(<span class=\"function\"><span class=\"params\">prevState</span> =&gt;</span> (&#123; <span class=\"attr\">show</span>: !prevState.show &#125;));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    render() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">          &lt;Clickable &#123;...this.props&#125; onClick=&#123;<span class=\"keyword\">this</span>.toggle&#125; /&gt;</span><br><span class=\"line\">          &#123;<span class=\"keyword\">this</span>.state.show &amp;&amp; <span class=\"keyword\">this</span>.props.children&#125;</span><br><span class=\"line\">        &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      );</span></span><br><span class=\"line\"><span class=\"regexp\">    &#125;</span></span><br><span class=\"line\"><span class=\"regexp\">  &#125;;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>è¿™ç§æ–¹æ³•å…è®¸æˆ‘ä»¬ä½¿ç”¨ ES7 è£…é¥°å™¨è¯­æ³•å°†é€»è¾‘åº”ç”¨äº ToggleableMenu ç»„ä»¶:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@makeToggleable</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ToggleableMenu</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div onClick=&#123;<span class=\"keyword\">this</span>.props.onClick&#125;&gt;</span><br><span class=\"line\">        &lt;h1&gt;&#123;<span class=\"keyword\">this</span>.props.title&#125;&lt;<span class=\"regexp\">/h1&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;/</span>div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»»ä½•å­ç»„ä»¶ä¼ é€’ç»™ ToggleableMenu ç»„ä»¶:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Menu</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;ToggleableMenu title=<span class=\"string\">\"First Menu\"</span>&gt;</span><br><span class=\"line\">          &lt;p&gt;Some content&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>ToggleableMenu&gt;</span><br><span class=\"line\">        &lt;ToggleableMenu title=<span class=\"string\">\"Second Menu\"</span>&gt;</span><br><span class=\"line\">          &lt;p&gt;Another content&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>ToggleableMenu&gt;</span><br><span class=\"line\">        &lt;ToggleableMenu title=<span class=\"string\">\"Third Menu\"</span>&gt;</span><br><span class=\"line\">          &lt;p&gt;More content&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>ToggleableMenu&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    );</span></span><br><span class=\"line\"><span class=\"regexp\">  &#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>å¦‚æœä½ ç†Ÿæ‚‰ Redux çš„ connect å‡½æ•°æˆ–è€… React Router çš„ withRouter å‡½æ•°ï¼Œé‚£ä¹ˆä½ å·²ç»ä½¿ç”¨è¿‡é«˜é˜¶ç»„ä»¶äº†ã€‚</p>\n<h3 id=\"å›è°ƒæ¸²æŸ“ç»„ä»¶\"><a href=\"#å›è°ƒæ¸²æŸ“ç»„ä»¶\" class=\"headerlink\" title=\"å›è°ƒæ¸²æŸ“ç»„ä»¶\"></a>å›è°ƒæ¸²æŸ“ç»„ä»¶</h3><p>å¦ä¸€ä¸ªæ¯”è¾ƒé«˜ç«¯çš„å¤ç”¨ç»„ä»¶é€»è¾‘çš„æ–¹æ³•æ˜¯å°†å‡½æ•°ä½œä¸ºç»„ä»¶çš„ <code>props.children</code>ï¼Œè¯¥æ–¹æ³•ä¹Ÿç§°ä¸º <strong>Function as Child Components</strong>ã€‚æˆ‘ä»¬å°†ä½¿ç”¨<strong>æ¸²æŸ“å›è°ƒ</strong>æ¥é‡æ–°å®ç°ä¸Šé¢çš„å¯æ‰©å±• Menu:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Toggleable</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.toggle = <span class=\"keyword\">this</span>.toggle.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.state = &#123; <span class=\"attr\">show</span>: <span class=\"literal\">false</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  toggle() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setState(<span class=\"function\"><span class=\"params\">prevState</span> =&gt;</span> (&#123; <span class=\"attr\">show</span>: !prevState.show &#125;));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.props.children(<span class=\"keyword\">this</span>.state.show, <span class=\"keyword\">this</span>.toggle);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†å‡½æ•°ä½œä¸ºç»„ä»¶çš„å­çº§è¿›è¡Œä¼ é€’:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Toggleable&gt;</span><br><span class=\"line\">  &#123;(show, onClick) =&gt; (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;div onClick=&#123;onClick&#125;&gt;</span><br><span class=\"line\">        &lt;h1&gt;&#123;props.title&#125;&lt;<span class=\"regexp\">/h1&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;/</span>div&gt;</span><br><span class=\"line\">      &#123;show &amp;&amp; props.children&#125;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>Toggleable&gt;</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢çš„ä»£ç å·²ç»å°†ä¸€ä¸ªå‡½æ•°ä½œä¸º<strong>å­ç»„ä»¶</strong>ï¼Œä½†æ˜¯ï¼Œè‹¥æˆ‘ä»¬æƒ³å¤ç”¨ä¸Šè¿°é€»è¾‘ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªè½¬æ¢é€»è¾‘çš„æ–°ç»„ä»¶ï¼š</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ToggleableMenu = <span class=\"function\"><span class=\"params\">props</span> =&gt;</span> (</span><br><span class=\"line\">  &lt;Toggleable&gt;</span><br><span class=\"line\">    &#123;(show, onClick) =&gt; (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;div onClick=&#123;onClick&#125;&gt;</span><br><span class=\"line\">          &lt;h1&gt;&#123;props.title&#125;&lt;<span class=\"regexp\">/h1&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>div&gt;</span><br><span class=\"line\">        &#123;show &amp;&amp; props.children&#125;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    )&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;/</span>Toggleable&gt;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬ä½¿ç”¨ Render Callbacks å®ç°çš„å¯æ‰©å±•çš„ Menu ç»„ä»¶å¦‚ä¸‹:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Menu</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;ToggleableMenu title=<span class=\"string\">\"First Menu\"</span>&gt;</span><br><span class=\"line\">          &lt;p&gt;Some content&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>ToggleableMenu&gt;</span><br><span class=\"line\">        &lt;ToggleableMenu title=<span class=\"string\">\"Second Menu\"</span>&gt;</span><br><span class=\"line\">          &lt;p&gt;Another content&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>ToggleableMenu&gt;</span><br><span class=\"line\">        &lt;ToggleableMenu title=<span class=\"string\">\"Third Menu\"</span>&gt;</span><br><span class=\"line\">          &lt;p&gt;More content&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>ToggleableMenu&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    );</span></span><br><span class=\"line\"><span class=\"regexp\">  &#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>å›è°ƒæ¸²æŸ“ç»„ä»¶ (Render Callbacks) å’Œé«˜é˜¶å‡½æ•°ä½¿æˆ‘ä»¬çš„ç»„ä»¶æ›´åŠ çµæ´»ï¼ŒæŒæ¡å’Œé€‚åº”èµ·æ¥å…·æœ‰ä¸€å®šçš„éš¾åº¦ï¼Œéœ€è¦åå¤å­¦ä¹ å’Œæ¶ˆåŒ–ã€‚</p>\n","site":{"data":{}},"excerpt":"<p>ä½¿ç”¨ React å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œ React æ˜¯ Facebook å…¬å¸å¼€å‘çš„ç”¨äºæ„å»ºç½‘é¡µç•Œé¢çš„ UI åº“ã€‚æœ¬æ–‡è¯•å›¾æ€»ç»“å®è·µä¸­æ‰€å­¦åˆ°çš„ä¸€äº›æ¨¡å¼ï¼ŒåŒæ—¶å¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åˆ°å³å°†è¿ˆå…¥ç»„ä»¶ä¸–ç•Œçš„å¼€å‘è€…ã€‚</p>","more":"<h3 id=\"æ¦‚è¦\"><a href=\"#æ¦‚è¦\" class=\"headerlink\" title=\"æ¦‚è¦\"></a>æ¦‚è¦</h3><ul>\n<li>æœ‰çŠ¶æ€ç»„ä»¶ vs æ— çŠ¶æ€ç»„ä»¶</li>\n<li>å®¹å™¨ç»„ä»¶ vs å±•ç¤ºç»„ä»¶</li>\n<li>é«˜é˜¶ç»„ä»¶ vs å›è°ƒæ¸²æŸ“ç»„ä»¶</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/40128970-a333542c-5965-11e8-8505-d1284d2759b1.png\" alt=\"image\"></p>\n<h3 id=\"æœ‰çŠ¶æ€ç»„ä»¶-vs-æ— çŠ¶æ€ç»„ä»¶\"><a href=\"#æœ‰çŠ¶æ€ç»„ä»¶-vs-æ— çŠ¶æ€ç»„ä»¶\" class=\"headerlink\" title=\"æœ‰çŠ¶æ€ç»„ä»¶ vs æ— çŠ¶æ€ç»„ä»¶\"></a>æœ‰çŠ¶æ€ç»„ä»¶ vs æ— çŠ¶æ€ç»„ä»¶</h3><p>æ­£å¦‚ WEB æœåŠ¡æœ‰é™æ€å’ŒåŠ¨æ€ä¹‹åˆ†ï¼ŒReact ç»„ä»¶ä¹Ÿæœ‰æœ‰çŠ¶æ€å’Œæ— çŠ¶æ€çš„åŒºåˆ†ã€‚</p>\n<ul>\n<li>æœ‰çŠ¶æ€ç»„ä»¶ï¼šåœ¨åº”ç”¨ä¸­ç»„ä»¶å¯ä»¥æ‹¥æœ‰è‡ªèº«çŠ¶æ€å¹¶æ“çºµå®ƒï¼›</li>\n<li>æ— çŠ¶æ€ç»„ä»¶ï¼šåªæ¥æ”¶å±æ€§è¿›è¡Œæ•ˆæœå‘ˆç°ã€‚</li>\n</ul>\n<p>ä¸€ä¸ªç®€å•çš„æ— çŠ¶æ€ç»„ä»¶ï¼Œåªå—å±æ€§æ§åˆ¶:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> Button = <span class=\"function\"><span class=\"params\">props</span> =&gt;</span> &lt;button onClick=&#123;props.onClick&#125;&gt;&#123;props.text&#125;&lt;<span class=\"regexp\">/button&gt;;</span></span><br></pre></td></tr></table></figure>\n<p>ä¸€ä¸ªå…·æœ‰è®¡æ•°åŠŸèƒ½çš„æŒ‰é’®ç»„ä»¶ (å¤ç”¨ä¸Šé¢ Button ç»„ä»¶)</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ButtonCounter</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.state = &#123; <span class=\"attr\">clicks</span>: <span class=\"number\">0</span> &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.handleClick = <span class=\"keyword\">this</span>.handleClick.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  handleClick() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setState(&#123; <span class=\"attr\">clicks</span>: <span class=\"keyword\">this</span>.state.clicks + <span class=\"number\">1</span> &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;Button</span><br><span class=\"line\">        onClick=&#123;<span class=\"keyword\">this</span>.handleClick&#125;</span><br><span class=\"line\">        text=&#123;<span class=\"string\">`You've clicked me <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.state.clicks&#125;</span> times!`</span>&#125;</span><br><span class=\"line\">      /&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ­£å¦‚ä¸Šé¢ä¸¤ä¸ª Demo æ‰€ç¤ºï¼Œç¬¬äºŒä¸ªç»„ä»¶çš„ <code>constructor</code> å…·æœ‰çŠ¶æ€çš„å®šä¹‰ï¼Œç¬¬ä¸€ä¸ªç»„ä»¶åªæ˜¯å•çº¯åœ°æ¸²æŸ“å±æ€§æ–‡å­—ã€‚æœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶çš„åˆ’åˆ†çœ‹èµ·æ¥éå¸¸ç®€å•ï¼Œä½†æ˜¯å®ƒå¯¹äºç»„ä»¶å¤ç”¨å…·æœ‰é‡å¤§æ„ä¹‰ã€‚</p>\n<h3 id=\"å®¹å™¨ç»„ä»¶-vs-å±•ç¤ºç»„ä»¶\"><a href=\"#å®¹å™¨ç»„ä»¶-vs-å±•ç¤ºç»„ä»¶\" class=\"headerlink\" title=\"å®¹å™¨ç»„ä»¶ vs å±•ç¤ºç»„ä»¶\"></a>å®¹å™¨ç»„ä»¶ vs å±•ç¤ºç»„ä»¶</h3><p>å½“ç»„ä»¶éœ€è¦è·å–å¤–éƒ¨æ•°æ®æ—¶ï¼Œæˆ‘ä»¬åˆå¯ä»¥å°†ç»„ä»¶åˆ’åˆ†ä¸ºä¸¤ç§æ–°çš„ç±»å‹ã€‚å®¹å™¨ç»„ä»¶è´Ÿè´£è·å–æ•°æ®ï¼Œå®ƒå¸¸å¸¸æ˜¯è¶…å‡ºäº† React èŒƒç•´çš„ï¼Œå¦‚ä½¿ç”¨ Redux æˆ– Relay è¿›è¡Œäº†ç»‘å®šã€‚å¯¹æ¯”è€Œè¨€ï¼Œå±•ç¤ºå‹ç»„ä»¶ä¸ä¾èµ–äºç¨‹åºå…¶ä»–éƒ¨åˆ†ï¼Œå®ƒåªå’Œè‡ªèº«çŠ¶æ€æˆ–å±æ€§æœ‰å…³ã€‚ä¸‹é¢æˆ‘ä»¬å®ç°ä¸€ä¸ªç”¨æˆ·åˆ—è¡¨çš„å±•ç¤ºç»„ä»¶:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> UserList = <span class=\"function\"><span class=\"params\">props</span> =&gt;</span> (</span><br><span class=\"line\">  &lt;ul&gt;</span><br><span class=\"line\">    &#123;props.users.map(<span class=\"function\"><span class=\"params\">u</span> =&gt;</span> (</span><br><span class=\"line\">      &lt;li&gt;</span><br><span class=\"line\">        &#123;u.name&#125; â€” &#123;u.age&#125; years old</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/li&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    ))&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;/u</span>l&gt;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>å®¹å™¨ç»„ä»¶å¯ä»¥ç”¨æ¥æ›´æ–°ç”¨æˆ·åˆ—è¡¨çš„å±•ç¤º:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserListContainer</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.state = &#123; <span class=\"attr\">users</span>: [] &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  componentDidMount() &#123;</span><br><span class=\"line\">    fetchUsers(<span class=\"function\"><span class=\"params\">users</span> =&gt;</span> <span class=\"keyword\">this</span>.setState(&#123; users &#125;));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">UserList</span> <span class=\"attr\">users</span>=<span class=\"string\">&#123;this.state.users&#125;</span> /&gt;</span>;</span></span><br><span class=\"line\"><span class=\"xml\">  &#125;</span></span><br><span class=\"line\"><span class=\"xml\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>è¿™ç§åˆ†ç±»å°†æ•°æ®è·å–å’Œæ¸²æŸ“çš„é€»è¾‘åˆ†å¼€ï¼Œè¿›è€Œä½¿ç”¨æˆ·åˆ—è¡¨ç»„ä»¶å¯ä»¥å¤ç”¨ã€‚</p>\n<p>å¦‚æœä½ æƒ³äº†è§£æ›´å¤šè¯¥æ¨¡å¼çš„ä¿¡æ¯ï¼Œ<a href=\"https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0\" target=\"_blank\" rel=\"noopener\">è¿™ç¯‡æ–‡ç« </a>å¯¹å®ƒè¿›è¡Œäº†è¯¦ç»†çš„è§£é‡Šã€‚</p>\n<h3 id=\"é«˜é˜¶ç»„ä»¶\"><a href=\"#é«˜é˜¶ç»„ä»¶\" class=\"headerlink\" title=\"é«˜é˜¶ç»„ä»¶\"></a>é«˜é˜¶ç»„ä»¶</h3><p>å½“ä½ æƒ³å¤ç”¨ç»„ä»¶é€»è¾‘æ—¶ï¼Œé«˜é˜¶ç»„ä»¶éå¸¸æœ‰ç”¨ã€‚é«˜é˜¶ç»„ä»¶ï¼šæ˜¯å°†ç»„ä»¶ä½œä¸ºå‚æ•°å¹¶è¿”å›æ–°ç»„ä»¶çš„ JS å‡½æ•°ã€‚</p>\n<p>å‡è®¾ä½ éœ€è¦æ„å»ºä¸€ä¸ªå¯æ‰©å±•èœå•ç»„ä»¶ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æ—¶ï¼Œå®ƒä¼šæ˜¾ç¤ºéšè—å­ç»„ä»¶å†…å®¹ã€‚å› æ­¤ï¼Œä½ å¯ä»¥ä½¿ç”¨é«˜é˜¶ç»„ä»¶æ¥å®ç°:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">makeToggleable</span>(<span class=\"params\">Clickable</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">super</span>();</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.toggle = <span class=\"keyword\">this</span>.toggle.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.state = &#123; <span class=\"attr\">show</span>: <span class=\"literal\">false</span> &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    toggle() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.setState(<span class=\"function\"><span class=\"params\">prevState</span> =&gt;</span> (&#123; <span class=\"attr\">show</span>: !prevState.show &#125;));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    render() &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">          &lt;Clickable &#123;...this.props&#125; onClick=&#123;<span class=\"keyword\">this</span>.toggle&#125; /&gt;</span><br><span class=\"line\">          &#123;<span class=\"keyword\">this</span>.state.show &amp;&amp; <span class=\"keyword\">this</span>.props.children&#125;</span><br><span class=\"line\">        &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      );</span></span><br><span class=\"line\"><span class=\"regexp\">    &#125;</span></span><br><span class=\"line\"><span class=\"regexp\">  &#125;;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>è¿™ç§æ–¹æ³•å…è®¸æˆ‘ä»¬ä½¿ç”¨ ES7 è£…é¥°å™¨è¯­æ³•å°†é€»è¾‘åº”ç”¨äº ToggleableMenu ç»„ä»¶:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@makeToggleable</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ToggleableMenu</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div onClick=&#123;<span class=\"keyword\">this</span>.props.onClick&#125;&gt;</span><br><span class=\"line\">        &lt;h1&gt;&#123;<span class=\"keyword\">this</span>.props.title&#125;&lt;<span class=\"regexp\">/h1&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;/</span>div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»»ä½•å­ç»„ä»¶ä¼ é€’ç»™ ToggleableMenu ç»„ä»¶:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Menu</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;ToggleableMenu title=<span class=\"string\">\"First Menu\"</span>&gt;</span><br><span class=\"line\">          &lt;p&gt;Some content&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>ToggleableMenu&gt;</span><br><span class=\"line\">        &lt;ToggleableMenu title=<span class=\"string\">\"Second Menu\"</span>&gt;</span><br><span class=\"line\">          &lt;p&gt;Another content&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>ToggleableMenu&gt;</span><br><span class=\"line\">        &lt;ToggleableMenu title=<span class=\"string\">\"Third Menu\"</span>&gt;</span><br><span class=\"line\">          &lt;p&gt;More content&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>ToggleableMenu&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    );</span></span><br><span class=\"line\"><span class=\"regexp\">  &#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>å¦‚æœä½ ç†Ÿæ‚‰ Redux çš„ connect å‡½æ•°æˆ–è€… React Router çš„ withRouter å‡½æ•°ï¼Œé‚£ä¹ˆä½ å·²ç»ä½¿ç”¨è¿‡é«˜é˜¶ç»„ä»¶äº†ã€‚</p>\n<h3 id=\"å›è°ƒæ¸²æŸ“ç»„ä»¶\"><a href=\"#å›è°ƒæ¸²æŸ“ç»„ä»¶\" class=\"headerlink\" title=\"å›è°ƒæ¸²æŸ“ç»„ä»¶\"></a>å›è°ƒæ¸²æŸ“ç»„ä»¶</h3><p>å¦ä¸€ä¸ªæ¯”è¾ƒé«˜ç«¯çš„å¤ç”¨ç»„ä»¶é€»è¾‘çš„æ–¹æ³•æ˜¯å°†å‡½æ•°ä½œä¸ºç»„ä»¶çš„ <code>props.children</code>ï¼Œè¯¥æ–¹æ³•ä¹Ÿç§°ä¸º <strong>Function as Child Components</strong>ã€‚æˆ‘ä»¬å°†ä½¿ç”¨<strong>æ¸²æŸ“å›è°ƒ</strong>æ¥é‡æ–°å®ç°ä¸Šé¢çš„å¯æ‰©å±• Menu:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Toggleable</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.toggle = <span class=\"keyword\">this</span>.toggle.bind(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.state = &#123; <span class=\"attr\">show</span>: <span class=\"literal\">false</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  toggle() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setState(<span class=\"function\"><span class=\"params\">prevState</span> =&gt;</span> (&#123; <span class=\"attr\">show</span>: !prevState.show &#125;));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.props.children(<span class=\"keyword\">this</span>.state.show, <span class=\"keyword\">this</span>.toggle);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†å‡½æ•°ä½œä¸ºç»„ä»¶çš„å­çº§è¿›è¡Œä¼ é€’:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Toggleable&gt;</span><br><span class=\"line\">  &#123;(show, onClick) =&gt; (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;div onClick=&#123;onClick&#125;&gt;</span><br><span class=\"line\">        &lt;h1&gt;&#123;props.title&#125;&lt;<span class=\"regexp\">/h1&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">      &lt;/</span>div&gt;</span><br><span class=\"line\">      &#123;show &amp;&amp; props.children&#125;</span><br><span class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">  )&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>Toggleable&gt;</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢çš„ä»£ç å·²ç»å°†ä¸€ä¸ªå‡½æ•°ä½œä¸º<strong>å­ç»„ä»¶</strong>ï¼Œä½†æ˜¯ï¼Œè‹¥æˆ‘ä»¬æƒ³å¤ç”¨ä¸Šè¿°é€»è¾‘ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªè½¬æ¢é€»è¾‘çš„æ–°ç»„ä»¶ï¼š</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ToggleableMenu = <span class=\"function\"><span class=\"params\">props</span> =&gt;</span> (</span><br><span class=\"line\">  &lt;Toggleable&gt;</span><br><span class=\"line\">    &#123;(show, onClick) =&gt; (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;div onClick=&#123;onClick&#125;&gt;</span><br><span class=\"line\">          &lt;h1&gt;&#123;props.title&#125;&lt;<span class=\"regexp\">/h1&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>div&gt;</span><br><span class=\"line\">        &#123;show &amp;&amp; props.children&#125;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    )&#125;</span></span><br><span class=\"line\"><span class=\"regexp\">  &lt;/</span>Toggleable&gt;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬ä½¿ç”¨ Render Callbacks å®ç°çš„å¯æ‰©å±•çš„ Menu ç»„ä»¶å¦‚ä¸‹:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Menu</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;ToggleableMenu title=<span class=\"string\">\"First Menu\"</span>&gt;</span><br><span class=\"line\">          &lt;p&gt;Some content&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>ToggleableMenu&gt;</span><br><span class=\"line\">        &lt;ToggleableMenu title=<span class=\"string\">\"Second Menu\"</span>&gt;</span><br><span class=\"line\">          &lt;p&gt;Another content&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>ToggleableMenu&gt;</span><br><span class=\"line\">        &lt;ToggleableMenu title=<span class=\"string\">\"Third Menu\"</span>&gt;</span><br><span class=\"line\">          &lt;p&gt;More content&lt;<span class=\"regexp\">/p&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">        &lt;/</span>ToggleableMenu&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    );</span></span><br><span class=\"line\"><span class=\"regexp\">  &#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure>\n<p>å›è°ƒæ¸²æŸ“ç»„ä»¶ (Render Callbacks) å’Œé«˜é˜¶å‡½æ•°ä½¿æˆ‘ä»¬çš„ç»„ä»¶æ›´åŠ çµæ´»ï¼ŒæŒæ¡å’Œé€‚åº”èµ·æ¥å…·æœ‰ä¸€å®šçš„éš¾åº¦ï¼Œéœ€è¦åå¤å­¦ä¹ å’Œæ¶ˆåŒ–ã€‚</p>"},{"title":"Why Immutable Data?","date":"2018-05-05T13:14:23.000Z","comments":1,"_content":"ä»€ä¹ˆæ˜¯ä¸å¯å˜æ•°æ®, å¦‚ä½•ç†è§£ä¸å¯å˜æ•°æ®, ä¸å¯å˜æ•°æ®åœ¨é¡¹ç›®ä¸­çš„å®è·µ. å¼„æ¸…æ¥šäº†è¿™äº›é—®é¢˜, ä½ æ‰èƒ½æ›´å¥½çš„å¤„ç†é¡¹ç›®ä¸­ä¸€äº›è°ƒä¼˜é—®é¢˜. æ¯”å¦‚ React æ€§èƒ½ä¼˜åŒ–ç­‰. ä¸€èµ·æ¥å­¦ä¹ ä¸‹å§! ğŸ‘¨ğŸ¼â€ğŸ’»\n\n<!-- more -->\n## What\n\n> ***Immutable Data*** æ˜¯æŒ‡ä¸€æ—¦è¢«åˆ›é€ åå°±ä¸å¯ä»¥è¢«æ”¹å˜çš„æ•°æ®, é€šè¿‡ä½¿ç”¨ Immutable Data, å¯ä»¥è®©æˆ‘ä»¬æ›´å®¹æ˜“çš„å»å¤„ç†ç¼“å­˜ã€å›é€€ã€æ•°æ®å˜åŒ–æ£€æµ‹ç­‰é—®é¢˜, ç®€åŒ–æˆ‘ä»¬çš„å¼€å‘.\n\n\n![image](https://user-images.githubusercontent.com/15377484/39663322-c4bb61ae-50a3-11e8-8267-4c2a80c00af7.png)\n\n\n## Why\nåœ¨åŸç”Ÿ JS ä¸­, å­˜åœ¨ä¸¤ç§æ•°æ®ç±»å‹:\n\n- é™æ€æ•°æ®ç±»å‹\n- å¼•ç”¨æ•°æ®ç±»å‹\n\nå¼•ç”¨ç±»å‹æ•°æ®ç»“æ„éå¸¸çµæ´», èŠ‚çº¦å†…å­˜, èƒ½ç»™å¼€å‘å¸¦æ¥ä¸å°‘ä¾¿åˆ©. ä½†ä¸æ­¤åŒæ—¶ä¹Ÿäº§ç”Ÿäº†ä¸€äº›å‰¯ä½œç”¨:\n\n#### Case 1\n```js\nlet obj = { count: 1 };\nlet copyObj = obj;\ncopyObj.count = 2;\n\nconsole.log(copyObj.count); // => 2\nconsole.log(obj.count); // => 2, è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„\n```\n#### Case 2\n```js\nlet obj2 = { count: 1 };\n\n// å›¢é˜Ÿåä½œ, å¤§å®¶éƒ½åœ¨ç”¨è¿™ä¸ª obj2\nunKnowFunction(obj2);\nconsole.log(obj2.count); // èƒ½ä¿è¯è¿™ä¸ªç»“æœä¸€å®šæ˜¯1å—?\n```\n\né’ˆå¯¹ä»¥ä¸Šå¼•ç”¨ç±»å‹äº§ç”Ÿçš„å‰¯ä½œç”¨, æœ‰äººæå‡ºäº† ***æ·±åº¦æ‹·è´*** (Deep Clone)çš„æ–¹æ³•, å®ç°ä»£ç å¦‚ä¸‹:\n```js\nfunction isObject(obj) {\n  return typeof obj === 'object';\n}\n\nfunction isArray(arr) {\n  return Array.isArray(arr);\n}\n\nfunction deepClone(obj) {\n  if (!isObject(obj))  return obj;\n  var cloneObj = isArray(obj) ? [] : {};\n\n  for(var key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      var value = obj[key];\n      var copy = value;\n\n      if (isObject(value)) {\n        // è¿™é‡Œä½¿ç”¨äº†é€’å½’\n        cloneObj[key] = deepClone(value);\n      } else {\n        cloneObj[key] = value;\n      }\n    }\n  }\n  return cloneObj;\n}\n```\n\nç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `deepClone` è¿™ä¸ªæ–¹æ³•æ¥è§£å†³æ–‡ç« ä¸€å¼€å¤´çš„é—®é¢˜äº†:\n```js\nlet obj = {\n  age: 5,\n  list: [1, 2, 3]\n}\n\n// æ·±æ‹·è´ä¸€ä¸ªæ–°çš„å¯¹è±¡, ä¸¤è€…äº’ç›¸ç‹¬ç«‹, ä¸å­˜åœ¨å¼•ç”¨å…³ç³»\nlet trueCopyObj = deepClone(obj);\nconsole.log(obj.list === trueCopyObj.list); // => false, è¿™æ˜¯æˆ‘ä»¬æœŸæœ›çš„\n\n// ä½†æ˜¯åˆæœ‰ä¸€ä¸ªé—®é¢˜, æˆ‘åªæ˜¯æƒ³æ‹·è´ä¸€ä¸ªæ–°çš„å¯¹è±¡, æ”¹ä¸€ä¸‹ `age`\nlet obj2 = deepClone(obj);\nobj2.age = 6;\n// éš¾ä¸æˆå‰©ä¸‹çš„ä¸€å †å¼•ç”¨ç±»å‹çš„å±æ€§éƒ½è¦é€’å½’åšä¸€æ¬¡æ·±æ‹·è´?\n// æ‰€ä»¥è¿™æ˜æ˜¾æ˜¯å¤šä½™çš„, å¹¶ä¸”å­˜åœ¨ä¸¥é‡çš„æ€§èƒ½é—®é¢˜\n```\n\nåœ¨åŸç”Ÿ JavaScript ä¸­å®ç°æ•°æ®ä¸å¯å˜, æœ‰ 2 ä¸ªåŠæ³•:\n\n- ES6: `const`\n- ES5: `Object.freeze`\n\nä½†æ˜¯è¿™ä¸¤ç§éƒ½æ˜¯æµ…å¤„ç†, é‡åˆ°æ·±å±‚æ¬¡çš„æ•°æ®ç»“æ„, å°±éœ€è¦é€’å½’å¤„ç†, åˆä¼šå­˜åœ¨æ€§èƒ½ä¸Šçš„é—®é¢˜.\n\n### How\n\né’ˆå¯¹ä»¥ä¸Šä¸€ç³»åˆ—éœ€æ±‚, æˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨ä¸å¯å˜æ•°æ®ç»“æ„æ¥å¤„ç†, å¯¹åº”çš„å®ç°åº“æœ‰:\n- [facebook/immutable-js](https://github.com/facebook/immutable-js)\n- [rtfeldman/seamless-immutable](https://github.com/rtfeldman/seamless-immutable)\n\nImmutable.js ä¸»è¦ç‰¹ç‚¹:\n- ç¨³å®šæ•°æ®ç»“æ„ (Persistent Data Structure), æ¯æ¬¡è¿”å›æ–°çš„å¯¹è±¡, ä¸å­˜åœ¨å¼•ç”¨\n- ç»“æ„å…±äº« (Structural Sharing), åŸºäºå“ˆå¸Œæ˜ å°„æ ‘, å¯ä»¥å®ç°éƒ¨åˆ†ç»“æ„å…±äº«\n- æ”¯æŒå»¶è¿Ÿæ“ä½œ (Support Lazy Operation)\n- å¼ºå¤§çš„ API (Power API)\n\né’ˆå¯¹ä»¥ä¸Šç‰¹ç‚¹, æˆ‘ä»¬ç”¨ä¸€äº›ä»£ç å®ä¾‹æ¥è¯´æ˜ä¸€ä¸‹:\n```js\n// ç¨³å®šæ•°æ®ç»“æ„\nlet obj = {count: 1};\nlet map = Immutable.fromJS(obj);\nlet map2 = map.set('count', 2);\n\nconsole.log(map.get('count')); // => 1\nconsole.log(map2.get('count')); // => 2\n```\n\n```js\n// ç»“æ„å…±äº«\n\nlet obj = {\n  count: 1,\n  list: [1, 2, 3, 4, 5]\n}\nlet map1 = Immutable.fromJS(obj);\nlet map2 = map1.set('count', 2);\n\nconsole.log(map1.list === map2.list); // true\n```\n\n<div style=\"width: 300px; \">![image](https://user-images.githubusercontent.com/15377484/39665040-d92a0764-50bf-11e8-84e3-ad83cf758acd.gif)</div>\n\nè¿™å¼  GIF å¾ˆå½¢è±¡çš„è§£é‡Šäº† `ç»“æ„å…±äº«` ğŸ‘\n\n```js\n// å¼ºå¤§çš„ API\n\nlet obj = {\n  a: {\n    b: {\n      list: [1, 2, 3]\n    }\n  }\n};\nlet map = Immutable.fromJS(obj);\nlet map2 = Immutable.updateIn(['a', 'b', 'list'], (list) => {\n  return list.push(4);\n});\n\nconsole.log(map2.getIn(['a', 'b', 'list'])); // => List [ 1, 2, 3, 4 ]\n```\n\nè¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹å°±ä¸ä¸¾ä¾‹å­äº†, è¶…çº²! ğŸ˜\n\n### å‚è€ƒ\n- [Immutable è¯¦è§£åŠ React ä¸­å®è·µ](https://github.com/camsong/blog/issues/3)\n- [æµ…åˆå¹¶ (shallow merge) ä¾‹å­](https://stackoverflow.com/questions/27936772/how-to-deep-merge-instead-of-shallow-merge/28248548)\n- [Lodash merge æ–¹æ³•](https://lodash.com/docs/4.17.10#merge)\n","source":"_posts/Why-Immutable-Data.md","raw":"---\ntitle: Why Immutable Data?\ndate: 2018-05-05 21:14:23\ntags:\ncomments: true\n---\nä»€ä¹ˆæ˜¯ä¸å¯å˜æ•°æ®, å¦‚ä½•ç†è§£ä¸å¯å˜æ•°æ®, ä¸å¯å˜æ•°æ®åœ¨é¡¹ç›®ä¸­çš„å®è·µ. å¼„æ¸…æ¥šäº†è¿™äº›é—®é¢˜, ä½ æ‰èƒ½æ›´å¥½çš„å¤„ç†é¡¹ç›®ä¸­ä¸€äº›è°ƒä¼˜é—®é¢˜. æ¯”å¦‚ React æ€§èƒ½ä¼˜åŒ–ç­‰. ä¸€èµ·æ¥å­¦ä¹ ä¸‹å§! ğŸ‘¨ğŸ¼â€ğŸ’»\n\n<!-- more -->\n## What\n\n> ***Immutable Data*** æ˜¯æŒ‡ä¸€æ—¦è¢«åˆ›é€ åå°±ä¸å¯ä»¥è¢«æ”¹å˜çš„æ•°æ®, é€šè¿‡ä½¿ç”¨ Immutable Data, å¯ä»¥è®©æˆ‘ä»¬æ›´å®¹æ˜“çš„å»å¤„ç†ç¼“å­˜ã€å›é€€ã€æ•°æ®å˜åŒ–æ£€æµ‹ç­‰é—®é¢˜, ç®€åŒ–æˆ‘ä»¬çš„å¼€å‘.\n\n\n![image](https://user-images.githubusercontent.com/15377484/39663322-c4bb61ae-50a3-11e8-8267-4c2a80c00af7.png)\n\n\n## Why\nåœ¨åŸç”Ÿ JS ä¸­, å­˜åœ¨ä¸¤ç§æ•°æ®ç±»å‹:\n\n- é™æ€æ•°æ®ç±»å‹\n- å¼•ç”¨æ•°æ®ç±»å‹\n\nå¼•ç”¨ç±»å‹æ•°æ®ç»“æ„éå¸¸çµæ´», èŠ‚çº¦å†…å­˜, èƒ½ç»™å¼€å‘å¸¦æ¥ä¸å°‘ä¾¿åˆ©. ä½†ä¸æ­¤åŒæ—¶ä¹Ÿäº§ç”Ÿäº†ä¸€äº›å‰¯ä½œç”¨:\n\n#### Case 1\n```js\nlet obj = { count: 1 };\nlet copyObj = obj;\ncopyObj.count = 2;\n\nconsole.log(copyObj.count); // => 2\nconsole.log(obj.count); // => 2, è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„\n```\n#### Case 2\n```js\nlet obj2 = { count: 1 };\n\n// å›¢é˜Ÿåä½œ, å¤§å®¶éƒ½åœ¨ç”¨è¿™ä¸ª obj2\nunKnowFunction(obj2);\nconsole.log(obj2.count); // èƒ½ä¿è¯è¿™ä¸ªç»“æœä¸€å®šæ˜¯1å—?\n```\n\né’ˆå¯¹ä»¥ä¸Šå¼•ç”¨ç±»å‹äº§ç”Ÿçš„å‰¯ä½œç”¨, æœ‰äººæå‡ºäº† ***æ·±åº¦æ‹·è´*** (Deep Clone)çš„æ–¹æ³•, å®ç°ä»£ç å¦‚ä¸‹:\n```js\nfunction isObject(obj) {\n  return typeof obj === 'object';\n}\n\nfunction isArray(arr) {\n  return Array.isArray(arr);\n}\n\nfunction deepClone(obj) {\n  if (!isObject(obj))  return obj;\n  var cloneObj = isArray(obj) ? [] : {};\n\n  for(var key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      var value = obj[key];\n      var copy = value;\n\n      if (isObject(value)) {\n        // è¿™é‡Œä½¿ç”¨äº†é€’å½’\n        cloneObj[key] = deepClone(value);\n      } else {\n        cloneObj[key] = value;\n      }\n    }\n  }\n  return cloneObj;\n}\n```\n\nç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `deepClone` è¿™ä¸ªæ–¹æ³•æ¥è§£å†³æ–‡ç« ä¸€å¼€å¤´çš„é—®é¢˜äº†:\n```js\nlet obj = {\n  age: 5,\n  list: [1, 2, 3]\n}\n\n// æ·±æ‹·è´ä¸€ä¸ªæ–°çš„å¯¹è±¡, ä¸¤è€…äº’ç›¸ç‹¬ç«‹, ä¸å­˜åœ¨å¼•ç”¨å…³ç³»\nlet trueCopyObj = deepClone(obj);\nconsole.log(obj.list === trueCopyObj.list); // => false, è¿™æ˜¯æˆ‘ä»¬æœŸæœ›çš„\n\n// ä½†æ˜¯åˆæœ‰ä¸€ä¸ªé—®é¢˜, æˆ‘åªæ˜¯æƒ³æ‹·è´ä¸€ä¸ªæ–°çš„å¯¹è±¡, æ”¹ä¸€ä¸‹ `age`\nlet obj2 = deepClone(obj);\nobj2.age = 6;\n// éš¾ä¸æˆå‰©ä¸‹çš„ä¸€å †å¼•ç”¨ç±»å‹çš„å±æ€§éƒ½è¦é€’å½’åšä¸€æ¬¡æ·±æ‹·è´?\n// æ‰€ä»¥è¿™æ˜æ˜¾æ˜¯å¤šä½™çš„, å¹¶ä¸”å­˜åœ¨ä¸¥é‡çš„æ€§èƒ½é—®é¢˜\n```\n\nåœ¨åŸç”Ÿ JavaScript ä¸­å®ç°æ•°æ®ä¸å¯å˜, æœ‰ 2 ä¸ªåŠæ³•:\n\n- ES6: `const`\n- ES5: `Object.freeze`\n\nä½†æ˜¯è¿™ä¸¤ç§éƒ½æ˜¯æµ…å¤„ç†, é‡åˆ°æ·±å±‚æ¬¡çš„æ•°æ®ç»“æ„, å°±éœ€è¦é€’å½’å¤„ç†, åˆä¼šå­˜åœ¨æ€§èƒ½ä¸Šçš„é—®é¢˜.\n\n### How\n\né’ˆå¯¹ä»¥ä¸Šä¸€ç³»åˆ—éœ€æ±‚, æˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨ä¸å¯å˜æ•°æ®ç»“æ„æ¥å¤„ç†, å¯¹åº”çš„å®ç°åº“æœ‰:\n- [facebook/immutable-js](https://github.com/facebook/immutable-js)\n- [rtfeldman/seamless-immutable](https://github.com/rtfeldman/seamless-immutable)\n\nImmutable.js ä¸»è¦ç‰¹ç‚¹:\n- ç¨³å®šæ•°æ®ç»“æ„ (Persistent Data Structure), æ¯æ¬¡è¿”å›æ–°çš„å¯¹è±¡, ä¸å­˜åœ¨å¼•ç”¨\n- ç»“æ„å…±äº« (Structural Sharing), åŸºäºå“ˆå¸Œæ˜ å°„æ ‘, å¯ä»¥å®ç°éƒ¨åˆ†ç»“æ„å…±äº«\n- æ”¯æŒå»¶è¿Ÿæ“ä½œ (Support Lazy Operation)\n- å¼ºå¤§çš„ API (Power API)\n\né’ˆå¯¹ä»¥ä¸Šç‰¹ç‚¹, æˆ‘ä»¬ç”¨ä¸€äº›ä»£ç å®ä¾‹æ¥è¯´æ˜ä¸€ä¸‹:\n```js\n// ç¨³å®šæ•°æ®ç»“æ„\nlet obj = {count: 1};\nlet map = Immutable.fromJS(obj);\nlet map2 = map.set('count', 2);\n\nconsole.log(map.get('count')); // => 1\nconsole.log(map2.get('count')); // => 2\n```\n\n```js\n// ç»“æ„å…±äº«\n\nlet obj = {\n  count: 1,\n  list: [1, 2, 3, 4, 5]\n}\nlet map1 = Immutable.fromJS(obj);\nlet map2 = map1.set('count', 2);\n\nconsole.log(map1.list === map2.list); // true\n```\n\n<div style=\"width: 300px; \">![image](https://user-images.githubusercontent.com/15377484/39665040-d92a0764-50bf-11e8-84e3-ad83cf758acd.gif)</div>\n\nè¿™å¼  GIF å¾ˆå½¢è±¡çš„è§£é‡Šäº† `ç»“æ„å…±äº«` ğŸ‘\n\n```js\n// å¼ºå¤§çš„ API\n\nlet obj = {\n  a: {\n    b: {\n      list: [1, 2, 3]\n    }\n  }\n};\nlet map = Immutable.fromJS(obj);\nlet map2 = Immutable.updateIn(['a', 'b', 'list'], (list) => {\n  return list.push(4);\n});\n\nconsole.log(map2.getIn(['a', 'b', 'list'])); // => List [ 1, 2, 3, 4 ]\n```\n\nè¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹å°±ä¸ä¸¾ä¾‹å­äº†, è¶…çº²! ğŸ˜\n\n### å‚è€ƒ\n- [Immutable è¯¦è§£åŠ React ä¸­å®è·µ](https://github.com/camsong/blog/issues/3)\n- [æµ…åˆå¹¶ (shallow merge) ä¾‹å­](https://stackoverflow.com/questions/27936772/how-to-deep-merge-instead-of-shallow-merge/28248548)\n- [Lodash merge æ–¹æ³•](https://lodash.com/docs/4.17.10#merge)\n","slug":"Why-Immutable-Data","published":1,"updated":"2019-12-07T05:45:26.498Z","layout":"post","photos":[],"link":"","_id":"ck3v60jti000ir9q9h2tsgqct","content":"<p>ä»€ä¹ˆæ˜¯ä¸å¯å˜æ•°æ®, å¦‚ä½•ç†è§£ä¸å¯å˜æ•°æ®, ä¸å¯å˜æ•°æ®åœ¨é¡¹ç›®ä¸­çš„å®è·µ. å¼„æ¸…æ¥šäº†è¿™äº›é—®é¢˜, ä½ æ‰èƒ½æ›´å¥½çš„å¤„ç†é¡¹ç›®ä¸­ä¸€äº›è°ƒä¼˜é—®é¢˜. æ¯”å¦‚ React æ€§èƒ½ä¼˜åŒ–ç­‰. ä¸€èµ·æ¥å­¦ä¹ ä¸‹å§! ğŸ‘¨ğŸ¼â€ğŸ’»</p>\n<a id=\"more\"></a>\n<h2 id=\"What\"><a href=\"#What\" class=\"headerlink\" title=\"What\"></a>What</h2><blockquote>\n<p><strong><em>Immutable Data</em></strong> æ˜¯æŒ‡ä¸€æ—¦è¢«åˆ›é€ åå°±ä¸å¯ä»¥è¢«æ”¹å˜çš„æ•°æ®, é€šè¿‡ä½¿ç”¨ Immutable Data, å¯ä»¥è®©æˆ‘ä»¬æ›´å®¹æ˜“çš„å»å¤„ç†ç¼“å­˜ã€å›é€€ã€æ•°æ®å˜åŒ–æ£€æµ‹ç­‰é—®é¢˜, ç®€åŒ–æˆ‘ä»¬çš„å¼€å‘.</p>\n</blockquote>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/39663322-c4bb61ae-50a3-11e8-8267-4c2a80c00af7.png\" alt=\"image\"></p>\n<h2 id=\"Why\"><a href=\"#Why\" class=\"headerlink\" title=\"Why\"></a>Why</h2><p>åœ¨åŸç”Ÿ JS ä¸­, å­˜åœ¨ä¸¤ç§æ•°æ®ç±»å‹:</p>\n<ul>\n<li>é™æ€æ•°æ®ç±»å‹</li>\n<li>å¼•ç”¨æ•°æ®ç±»å‹</li>\n</ul>\n<p>å¼•ç”¨ç±»å‹æ•°æ®ç»“æ„éå¸¸çµæ´», èŠ‚çº¦å†…å­˜, èƒ½ç»™å¼€å‘å¸¦æ¥ä¸å°‘ä¾¿åˆ©. ä½†ä¸æ­¤åŒæ—¶ä¹Ÿäº§ç”Ÿäº†ä¸€äº›å‰¯ä½œç”¨:</p>\n<h4 id=\"Case-1\"><a href=\"#Case-1\" class=\"headerlink\" title=\"Case 1\"></a>Case 1</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123; <span class=\"attr\">count</span>: <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> copyObj = obj;</span><br><span class=\"line\">copyObj.count = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(copyObj.count); <span class=\"comment\">// =&gt; 2</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.count); <span class=\"comment\">// =&gt; 2, è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"Case-2\"><a href=\"#Case-2\" class=\"headerlink\" title=\"Case 2\"></a>Case 2</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj2 = &#123; <span class=\"attr\">count</span>: <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å›¢é˜Ÿåä½œ, å¤§å®¶éƒ½åœ¨ç”¨è¿™ä¸ª obj2</span></span><br><span class=\"line\">unKnowFunction(obj2);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj2.count); <span class=\"comment\">// èƒ½ä¿è¯è¿™ä¸ªç»“æœä¸€å®šæ˜¯1å—?</span></span><br></pre></td></tr></table></figure>\n<p>é’ˆå¯¹ä»¥ä¸Šå¼•ç”¨ç±»å‹äº§ç”Ÿçš„å‰¯ä½œç”¨, æœ‰äººæå‡ºäº† <strong><em>æ·±åº¦æ‹·è´</em></strong> (Deep Clone)çš„æ–¹æ³•, å®ç°ä»£ç å¦‚ä¸‹:<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isObject</span>(<span class=\"params\">obj</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">typeof</span> obj === <span class=\"string\">'object'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isArray</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Array</span>.isArray(arr);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">deepClone</span>(<span class=\"params\">obj</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!isObject(obj))  <span class=\"keyword\">return</span> obj;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> cloneObj = isArray(obj) ? [] : &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> obj) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> value = obj[key];</span><br><span class=\"line\">      <span class=\"keyword\">var</span> copy = value;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (isObject(value)) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// è¿™é‡Œä½¿ç”¨äº†é€’å½’</span></span><br><span class=\"line\">        cloneObj[key] = deepClone(value);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        cloneObj[key] = value;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> cloneObj;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>deepClone</code> è¿™ä¸ªæ–¹æ³•æ¥è§£å†³æ–‡ç« ä¸€å¼€å¤´çš„é—®é¢˜äº†:<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">  age: <span class=\"number\">5</span>,</span><br><span class=\"line\">  list: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ·±æ‹·è´ä¸€ä¸ªæ–°çš„å¯¹è±¡, ä¸¤è€…äº’ç›¸ç‹¬ç«‹, ä¸å­˜åœ¨å¼•ç”¨å…³ç³»</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> trueCopyObj = deepClone(obj);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.list === trueCopyObj.list); <span class=\"comment\">// =&gt; false, è¿™æ˜¯æˆ‘ä»¬æœŸæœ›çš„</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½†æ˜¯åˆæœ‰ä¸€ä¸ªé—®é¢˜, æˆ‘åªæ˜¯æƒ³æ‹·è´ä¸€ä¸ªæ–°çš„å¯¹è±¡, æ”¹ä¸€ä¸‹ `age`</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> obj2 = deepClone(obj);</span><br><span class=\"line\">obj2.age = <span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"comment\">// éš¾ä¸æˆå‰©ä¸‹çš„ä¸€å †å¼•ç”¨ç±»å‹çš„å±æ€§éƒ½è¦é€’å½’åšä¸€æ¬¡æ·±æ‹·è´?</span></span><br><span class=\"line\"><span class=\"comment\">// æ‰€ä»¥è¿™æ˜æ˜¾æ˜¯å¤šä½™çš„, å¹¶ä¸”å­˜åœ¨ä¸¥é‡çš„æ€§èƒ½é—®é¢˜</span></span><br></pre></td></tr></table></figure></p>\n<p>åœ¨åŸç”Ÿ JavaScript ä¸­å®ç°æ•°æ®ä¸å¯å˜, æœ‰ 2 ä¸ªåŠæ³•:</p>\n<ul>\n<li>ES6: <code>const</code></li>\n<li>ES5: <code>Object.freeze</code></li>\n</ul>\n<p>ä½†æ˜¯è¿™ä¸¤ç§éƒ½æ˜¯æµ…å¤„ç†, é‡åˆ°æ·±å±‚æ¬¡çš„æ•°æ®ç»“æ„, å°±éœ€è¦é€’å½’å¤„ç†, åˆä¼šå­˜åœ¨æ€§èƒ½ä¸Šçš„é—®é¢˜.</p>\n<h3 id=\"How\"><a href=\"#How\" class=\"headerlink\" title=\"How\"></a>How</h3><p>é’ˆå¯¹ä»¥ä¸Šä¸€ç³»åˆ—éœ€æ±‚, æˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨ä¸å¯å˜æ•°æ®ç»“æ„æ¥å¤„ç†, å¯¹åº”çš„å®ç°åº“æœ‰:</p>\n<ul>\n<li><a href=\"https://github.com/facebook/immutable-js\" target=\"_blank\" rel=\"noopener\">facebook/immutable-js</a></li>\n<li><a href=\"https://github.com/rtfeldman/seamless-immutable\" target=\"_blank\" rel=\"noopener\">rtfeldman/seamless-immutable</a></li>\n</ul>\n<p>Immutable.js ä¸»è¦ç‰¹ç‚¹:</p>\n<ul>\n<li>ç¨³å®šæ•°æ®ç»“æ„ (Persistent Data Structure), æ¯æ¬¡è¿”å›æ–°çš„å¯¹è±¡, ä¸å­˜åœ¨å¼•ç”¨</li>\n<li>ç»“æ„å…±äº« (Structural Sharing), åŸºäºå“ˆå¸Œæ˜ å°„æ ‘, å¯ä»¥å®ç°éƒ¨åˆ†ç»“æ„å…±äº«</li>\n<li>æ”¯æŒå»¶è¿Ÿæ“ä½œ (Support Lazy Operation)</li>\n<li>å¼ºå¤§çš„ API (Power API)</li>\n</ul>\n<p>é’ˆå¯¹ä»¥ä¸Šç‰¹ç‚¹, æˆ‘ä»¬ç”¨ä¸€äº›ä»£ç å®ä¾‹æ¥è¯´æ˜ä¸€ä¸‹:<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ç¨³å®šæ•°æ®ç»“æ„</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">count</span>: <span class=\"number\">1</span>&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> map = Immutable.fromJS(obj);</span><br><span class=\"line\"><span class=\"keyword\">let</span> map2 = map.set(<span class=\"string\">'count'</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(map.get(<span class=\"string\">'count'</span>)); <span class=\"comment\">// =&gt; 1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(map2.get(<span class=\"string\">'count'</span>)); <span class=\"comment\">// =&gt; 2</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ç»“æ„å…±äº«</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">  count: <span class=\"number\">1</span>,</span><br><span class=\"line\">  list: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> map1 = Immutable.fromJS(obj);</span><br><span class=\"line\"><span class=\"keyword\">let</span> map2 = map1.set(<span class=\"string\">'count'</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(map1.list === map2.list); <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<div style=\"width: 300px; \"><img src=\"https://user-images.githubusercontent.com/15377484/39665040-d92a0764-50bf-11e8-84e3-ad83cf758acd.gif\" alt=\"image\"></div>\n\n<p>è¿™å¼  GIF å¾ˆå½¢è±¡çš„è§£é‡Šäº† <code>ç»“æ„å…±äº«</code> ğŸ‘</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¼ºå¤§çš„ API</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">  a: &#123;</span><br><span class=\"line\">    b: &#123;</span><br><span class=\"line\">      list: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> map = Immutable.fromJS(obj);</span><br><span class=\"line\"><span class=\"keyword\">let</span> map2 = Immutable.updateIn([<span class=\"string\">'a'</span>, <span class=\"string\">'b'</span>, <span class=\"string\">'list'</span>], (list) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> list.push(<span class=\"number\">4</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(map2.getIn([<span class=\"string\">'a'</span>, <span class=\"string\">'b'</span>, <span class=\"string\">'list'</span>])); <span class=\"comment\">// =&gt; List [ 1, 2, 3, 4 ]</span></span><br></pre></td></tr></table></figure>\n<p>è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹å°±ä¸ä¸¾ä¾‹å­äº†, è¶…çº²! ğŸ˜</p>\n<h3 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h3><ul>\n<li><a href=\"https://github.com/camsong/blog/issues/3\" target=\"_blank\" rel=\"noopener\">Immutable è¯¦è§£åŠ React ä¸­å®è·µ</a></li>\n<li><a href=\"https://stackoverflow.com/questions/27936772/how-to-deep-merge-instead-of-shallow-merge/28248548\" target=\"_blank\" rel=\"noopener\">æµ…åˆå¹¶ (shallow merge) ä¾‹å­</a></li>\n<li><a href=\"https://lodash.com/docs/4.17.10#merge\" target=\"_blank\" rel=\"noopener\">Lodash merge æ–¹æ³•</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>ä»€ä¹ˆæ˜¯ä¸å¯å˜æ•°æ®, å¦‚ä½•ç†è§£ä¸å¯å˜æ•°æ®, ä¸å¯å˜æ•°æ®åœ¨é¡¹ç›®ä¸­çš„å®è·µ. å¼„æ¸…æ¥šäº†è¿™äº›é—®é¢˜, ä½ æ‰èƒ½æ›´å¥½çš„å¤„ç†é¡¹ç›®ä¸­ä¸€äº›è°ƒä¼˜é—®é¢˜. æ¯”å¦‚ React æ€§èƒ½ä¼˜åŒ–ç­‰. ä¸€èµ·æ¥å­¦ä¹ ä¸‹å§! ğŸ‘¨ğŸ¼â€ğŸ’»</p>","more":"<h2 id=\"What\"><a href=\"#What\" class=\"headerlink\" title=\"What\"></a>What</h2><blockquote>\n<p><strong><em>Immutable Data</em></strong> æ˜¯æŒ‡ä¸€æ—¦è¢«åˆ›é€ åå°±ä¸å¯ä»¥è¢«æ”¹å˜çš„æ•°æ®, é€šè¿‡ä½¿ç”¨ Immutable Data, å¯ä»¥è®©æˆ‘ä»¬æ›´å®¹æ˜“çš„å»å¤„ç†ç¼“å­˜ã€å›é€€ã€æ•°æ®å˜åŒ–æ£€æµ‹ç­‰é—®é¢˜, ç®€åŒ–æˆ‘ä»¬çš„å¼€å‘.</p>\n</blockquote>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/39663322-c4bb61ae-50a3-11e8-8267-4c2a80c00af7.png\" alt=\"image\"></p>\n<h2 id=\"Why\"><a href=\"#Why\" class=\"headerlink\" title=\"Why\"></a>Why</h2><p>åœ¨åŸç”Ÿ JS ä¸­, å­˜åœ¨ä¸¤ç§æ•°æ®ç±»å‹:</p>\n<ul>\n<li>é™æ€æ•°æ®ç±»å‹</li>\n<li>å¼•ç”¨æ•°æ®ç±»å‹</li>\n</ul>\n<p>å¼•ç”¨ç±»å‹æ•°æ®ç»“æ„éå¸¸çµæ´», èŠ‚çº¦å†…å­˜, èƒ½ç»™å¼€å‘å¸¦æ¥ä¸å°‘ä¾¿åˆ©. ä½†ä¸æ­¤åŒæ—¶ä¹Ÿäº§ç”Ÿäº†ä¸€äº›å‰¯ä½œç”¨:</p>\n<h4 id=\"Case-1\"><a href=\"#Case-1\" class=\"headerlink\" title=\"Case 1\"></a>Case 1</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123; <span class=\"attr\">count</span>: <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> copyObj = obj;</span><br><span class=\"line\">copyObj.count = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(copyObj.count); <span class=\"comment\">// =&gt; 2</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.count); <span class=\"comment\">// =&gt; 2, è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"Case-2\"><a href=\"#Case-2\" class=\"headerlink\" title=\"Case 2\"></a>Case 2</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj2 = &#123; <span class=\"attr\">count</span>: <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å›¢é˜Ÿåä½œ, å¤§å®¶éƒ½åœ¨ç”¨è¿™ä¸ª obj2</span></span><br><span class=\"line\">unKnowFunction(obj2);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj2.count); <span class=\"comment\">// èƒ½ä¿è¯è¿™ä¸ªç»“æœä¸€å®šæ˜¯1å—?</span></span><br></pre></td></tr></table></figure>\n<p>é’ˆå¯¹ä»¥ä¸Šå¼•ç”¨ç±»å‹äº§ç”Ÿçš„å‰¯ä½œç”¨, æœ‰äººæå‡ºäº† <strong><em>æ·±åº¦æ‹·è´</em></strong> (Deep Clone)çš„æ–¹æ³•, å®ç°ä»£ç å¦‚ä¸‹:<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isObject</span>(<span class=\"params\">obj</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">typeof</span> obj === <span class=\"string\">'object'</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isArray</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Array</span>.isArray(arr);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">deepClone</span>(<span class=\"params\">obj</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!isObject(obj))  <span class=\"keyword\">return</span> obj;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> cloneObj = isArray(obj) ? [] : &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> obj) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> value = obj[key];</span><br><span class=\"line\">      <span class=\"keyword\">var</span> copy = value;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (isObject(value)) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// è¿™é‡Œä½¿ç”¨äº†é€’å½’</span></span><br><span class=\"line\">        cloneObj[key] = deepClone(value);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        cloneObj[key] = value;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> cloneObj;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>deepClone</code> è¿™ä¸ªæ–¹æ³•æ¥è§£å†³æ–‡ç« ä¸€å¼€å¤´çš„é—®é¢˜äº†:<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">  age: <span class=\"number\">5</span>,</span><br><span class=\"line\">  list: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ·±æ‹·è´ä¸€ä¸ªæ–°çš„å¯¹è±¡, ä¸¤è€…äº’ç›¸ç‹¬ç«‹, ä¸å­˜åœ¨å¼•ç”¨å…³ç³»</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> trueCopyObj = deepClone(obj);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj.list === trueCopyObj.list); <span class=\"comment\">// =&gt; false, è¿™æ˜¯æˆ‘ä»¬æœŸæœ›çš„</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½†æ˜¯åˆæœ‰ä¸€ä¸ªé—®é¢˜, æˆ‘åªæ˜¯æƒ³æ‹·è´ä¸€ä¸ªæ–°çš„å¯¹è±¡, æ”¹ä¸€ä¸‹ `age`</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> obj2 = deepClone(obj);</span><br><span class=\"line\">obj2.age = <span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"comment\">// éš¾ä¸æˆå‰©ä¸‹çš„ä¸€å †å¼•ç”¨ç±»å‹çš„å±æ€§éƒ½è¦é€’å½’åšä¸€æ¬¡æ·±æ‹·è´?</span></span><br><span class=\"line\"><span class=\"comment\">// æ‰€ä»¥è¿™æ˜æ˜¾æ˜¯å¤šä½™çš„, å¹¶ä¸”å­˜åœ¨ä¸¥é‡çš„æ€§èƒ½é—®é¢˜</span></span><br></pre></td></tr></table></figure></p>\n<p>åœ¨åŸç”Ÿ JavaScript ä¸­å®ç°æ•°æ®ä¸å¯å˜, æœ‰ 2 ä¸ªåŠæ³•:</p>\n<ul>\n<li>ES6: <code>const</code></li>\n<li>ES5: <code>Object.freeze</code></li>\n</ul>\n<p>ä½†æ˜¯è¿™ä¸¤ç§éƒ½æ˜¯æµ…å¤„ç†, é‡åˆ°æ·±å±‚æ¬¡çš„æ•°æ®ç»“æ„, å°±éœ€è¦é€’å½’å¤„ç†, åˆä¼šå­˜åœ¨æ€§èƒ½ä¸Šçš„é—®é¢˜.</p>\n<h3 id=\"How\"><a href=\"#How\" class=\"headerlink\" title=\"How\"></a>How</h3><p>é’ˆå¯¹ä»¥ä¸Šä¸€ç³»åˆ—éœ€æ±‚, æˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨ä¸å¯å˜æ•°æ®ç»“æ„æ¥å¤„ç†, å¯¹åº”çš„å®ç°åº“æœ‰:</p>\n<ul>\n<li><a href=\"https://github.com/facebook/immutable-js\" target=\"_blank\" rel=\"noopener\">facebook/immutable-js</a></li>\n<li><a href=\"https://github.com/rtfeldman/seamless-immutable\" target=\"_blank\" rel=\"noopener\">rtfeldman/seamless-immutable</a></li>\n</ul>\n<p>Immutable.js ä¸»è¦ç‰¹ç‚¹:</p>\n<ul>\n<li>ç¨³å®šæ•°æ®ç»“æ„ (Persistent Data Structure), æ¯æ¬¡è¿”å›æ–°çš„å¯¹è±¡, ä¸å­˜åœ¨å¼•ç”¨</li>\n<li>ç»“æ„å…±äº« (Structural Sharing), åŸºäºå“ˆå¸Œæ˜ å°„æ ‘, å¯ä»¥å®ç°éƒ¨åˆ†ç»“æ„å…±äº«</li>\n<li>æ”¯æŒå»¶è¿Ÿæ“ä½œ (Support Lazy Operation)</li>\n<li>å¼ºå¤§çš„ API (Power API)</li>\n</ul>\n<p>é’ˆå¯¹ä»¥ä¸Šç‰¹ç‚¹, æˆ‘ä»¬ç”¨ä¸€äº›ä»£ç å®ä¾‹æ¥è¯´æ˜ä¸€ä¸‹:<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ç¨³å®šæ•°æ®ç»“æ„</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;<span class=\"attr\">count</span>: <span class=\"number\">1</span>&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> map = Immutable.fromJS(obj);</span><br><span class=\"line\"><span class=\"keyword\">let</span> map2 = map.set(<span class=\"string\">'count'</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(map.get(<span class=\"string\">'count'</span>)); <span class=\"comment\">// =&gt; 1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(map2.get(<span class=\"string\">'count'</span>)); <span class=\"comment\">// =&gt; 2</span></span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ç»“æ„å…±äº«</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">  count: <span class=\"number\">1</span>,</span><br><span class=\"line\">  list: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> map1 = Immutable.fromJS(obj);</span><br><span class=\"line\"><span class=\"keyword\">let</span> map2 = map1.set(<span class=\"string\">'count'</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(map1.list === map2.list); <span class=\"comment\">// true</span></span><br></pre></td></tr></table></figure>\n<div style=\"width: 300px; \"><img src=\"https://user-images.githubusercontent.com/15377484/39665040-d92a0764-50bf-11e8-84e3-ad83cf758acd.gif\" alt=\"image\"></div>\n\n<p>è¿™å¼  GIF å¾ˆå½¢è±¡çš„è§£é‡Šäº† <code>ç»“æ„å…±äº«</code> ğŸ‘</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¼ºå¤§çš„ API</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">  a: &#123;</span><br><span class=\"line\">    b: &#123;</span><br><span class=\"line\">      list: [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> map = Immutable.fromJS(obj);</span><br><span class=\"line\"><span class=\"keyword\">let</span> map2 = Immutable.updateIn([<span class=\"string\">'a'</span>, <span class=\"string\">'b'</span>, <span class=\"string\">'list'</span>], (list) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> list.push(<span class=\"number\">4</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(map2.getIn([<span class=\"string\">'a'</span>, <span class=\"string\">'b'</span>, <span class=\"string\">'list'</span>])); <span class=\"comment\">// =&gt; List [ 1, 2, 3, 4 ]</span></span><br></pre></td></tr></table></figure>\n<p>è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹å°±ä¸ä¸¾ä¾‹å­äº†, è¶…çº²! ğŸ˜</p>\n<h3 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h3><ul>\n<li><a href=\"https://github.com/camsong/blog/issues/3\" target=\"_blank\" rel=\"noopener\">Immutable è¯¦è§£åŠ React ä¸­å®è·µ</a></li>\n<li><a href=\"https://stackoverflow.com/questions/27936772/how-to-deep-merge-instead-of-shallow-merge/28248548\" target=\"_blank\" rel=\"noopener\">æµ…åˆå¹¶ (shallow merge) ä¾‹å­</a></li>\n<li><a href=\"https://lodash.com/docs/4.17.10#merge\" target=\"_blank\" rel=\"noopener\">Lodash merge æ–¹æ³•</a></li>\n</ul>"},{"title":"callã€applyã€bind çš„åŒºåˆ«åŠåº”ç”¨","date":"2016-03-26T10:14:16.000Z","comments":0,"_content":"\nåœ¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ä¸­ï¼Œç»å¸¸ä¼šå¤„ç† `this` çš„æŒ‡å‘é—®é¢˜ï¼Œæ”¹å˜ this çš„æŒ‡å‘å°±ä¸å¾—ä¸è°ˆè°ˆä»Šå¤©çš„ä¸»è§’â€”â€” `call`ã€`apply`ã€`bind`ã€‚ä¸ªäººæ„Ÿè§‰ `this` çš„é—®é¢˜åˆå­¦è€…ä¸åŒå®¹æ˜“ä¸€ä¸‹ç†è§£é€å½»ï¼Œä»Šå¤©å†æ¥å¥½å¥½æ‹ä¸€æ‹åŠ æ·±ç†è§£ã€‚\n<!-- more -->\n### ä½œç”¨\n`call`ã€`apply`ã€`bind` çš„ä½œç”¨å°±æ˜¯æ”¹å˜å‡½æ•°æ‰§è¡Œæ—¶çš„ä¸Šä¸‹æ–‡ï¼Œå³æ”¹å˜ `this` æŒ‡å‘ã€‚\n\n`this` çš„æŒ‡å‘å…¶å®ä¹Ÿå°±[ä¸å¤–ä¹è¿™å››ç§æƒ…å†µ](https://ifyour.github.io/2016/02/19/JavaScript-%E4%B8%AD%E7%9A%84-this-%E7%94%A8%E6%B3%95%E6%80%BB%E7%BB%93/)ï¼Œå…¶å®ç†è§£èµ·æ¥è¿˜æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œç†è§£ä¸äº†ä¹Ÿæ²¡å…³ç³»ï¼Œå…ˆè®°ä½ï¼Œåé¢åœ¨å·¥ä½œä¸­å¤§é‡ç¼–ç åº”ç”¨ï¼Œå†™å¤šäº†å°±çŸ¥é“ä¸ºå•¥è¦è¿™æ ·ç”¨äº†ã€‚å…ˆæ¥ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚\n```js\n// å®šä¹‰äººç±»æ„é€ å‡½æ•°ï¼Œå±æ€§æ˜¯å§“åï¼Œæ–¹æ³•æ˜¯è¾“å‡ºè‡ªå·±çš„å§“å\nfunction Person(name) {\n    this.name = name;\n}\n\nPerson.prototype = {\n    constructor: Person,\n    showName: function() {\n        console.log(this.name);\n    }\n};\n\nvar p1 = new Person('ifyour');\np1.showName(); // => ifyour\n\n// å®šä¹‰ä¸€ä¸ªåŠ¨ç‰©å¯¹è±¡ï¼Œå®ƒæœ‰ä¸ªä¸€å§“åå±æ€§\nvar animal = {\n    name: 'cat'\n};\n\n```\näººç±»å®ä¾‹ `p1` æƒ³è¦æ‰“å°è‡ªå·±çš„å§“åï¼Œåªè¦è°ƒç”¨è‡ªèº«çš„ `showName` æ–¹æ³•å³å¯ï¼Œä½†æ˜¯åŠ¨ç‰©å‘¢ï¼Ÿæˆ‘ä¹Ÿæƒ³è¦åŠ¨ç‰©å®ä¾‹ `animal` æ‰“å°è‡ªå·±çš„åå­—ï¼Œå¦‚ä½•åšå‘¢ï¼Ÿå½“ç„¶æ”¹å˜ this å’¯ï¼ŒæŠŠäººç±»çš„ `showName` æ–¹æ³•å€Ÿç»™åŠ¨ç‰©ç”¨ã€‚\n\n```js\n// å¯ä»¥ç›´æ¥å»åŸå‹ä¸Šå€Ÿç”¨\nPerson.prototype.showName.call(animal);//=>cat\n\n// ä¹Ÿå¯ä»¥ä»äººç±»ä¸Šç”Ÿæˆçš„å®ä¾‹ p1 å»å€Ÿç”¨\np1.showName.call(animal);//  => cat\np1.showName.apply(animal);// => cat\np1.showName.bind(animal)();//=> cat\n```\n\n### åŒºåˆ«\n#### callã€apply ä¸ bind\n- `call`ã€`apply` æ”¹å˜ `this` æŒ‡å‘åä¼š ***ç«‹å³æ‰§è¡Œ***\n- `bind` å¹¶ä¸ä¼šæ‰§è¡Œ\n\nåœ¨ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬ä¹Ÿçœ‹åˆ°äº†ï¼Œ`bind` æ–¹æ³•æ”¹å˜ this æ—¶ï¼Œè¿˜éœ€è¦åŠ ä¸€ä¸ª `()` æ‰èƒ½æ‰§è¡Œè¾“å‡º `cat`ã€‚\n\n#### call ä¸ apply\n\n- `call` æŠŠå‚æ•°æŒ‰é¡ºåºä¼ å…¥ï¼Œå³ï¼š`fn.call(obj, arg1, arg2, arg3...);`\n- `apply` æŠŠå‚æ•°æ‰“åŒ…æˆ `Array` åä¼ å…¥ï¼Œå³ï¼š `fn.apply(obj, [arg1, arg2, arg3...]);`\n\n\nå®ƒä»¬ä¿©ä¹‹é—´çš„å·®åˆ«åœ¨äº ***å‚æ•°***ï¼Œ`call` å’Œ `aplly` çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯è¦æ”¹å˜ä¸Šä¸‹æ–‡çš„å¯¹è±¡ï¼Œè€Œ `call` ä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ä»¥å‚æ•°åˆ—è¡¨çš„å½¢å¼å±•ç°ï¼Œ`apply` åˆ™æ˜¯æŠŠé™¤äº†æ”¹å˜ä¸Šä¸‹æ–‡å¯¹è±¡çš„å‚æ•°æ”¾åœ¨ä¸€ä¸ªæ•°ç»„é‡Œé¢ä½œä¸ºå®ƒçš„ç¬¬äºŒä¸ªå‚æ•°ã€‚\n\n### åº”ç”¨\nçŸ¥é“äº†æ€ä¹ˆä½¿ç”¨å’Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹ä½¿ç”¨ `call`ã€`apply`ã€`bind` çš„å¸¸è§åº”ç”¨åœºæ™¯ã€‚\n\n#### æ±‚æ•°ç»„ä¸­çš„æœ€å¤§ã€æœ€å°å€¼\n```js\nvar arr = [34,5,3,6,54,6,-67,5,7,6,-8,687];\n\nMath.max.call(Math, 34,5,3,6,54,6,-67,5,7,6,-8,687);\nMath.max.apply(Math, arr);\n\nMath.min.call(Math, 34,5,3,6,54,6,-67,5,7,6,-8,687);\nMath.min.apply(Math, arr);\n```\n#### å°†ä¼ªæ•°ç»„è½¬åŒ–ä¸ºæ•°ç»„\nJavaScript ä¸­çš„ä¼ªæ•°ç»„(ä¾‹å¦‚é€šè¿‡ `document.getElementsByTagName` è·å–çš„å…ƒç´ )å…·æœ‰ `length` å±æ€§ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ 0ã€1ã€2â€¦â€¦ä¸‹æ ‡æ¥è®¿é—®å…¶ä¸­çš„å…ƒç´ ï¼Œä½†æ˜¯æ²¡æœ‰ `Array` ä¸­çš„ `push`ã€`pop` ç­‰æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ `call`ã€`apply` æ¥å°†å…¶è½¬åŒ–ä¸ºçœŸæ­£çš„æ•°ç»„è¿™æ ·ä¾¿å¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨æ•°ç»„æ–¹æ³•äº†ã€‚\n\n```js\n// è¿™æ˜¯ä¸€ä¸ªä¼ªæ•°ç»„\nvar arrayLike = {\n    0: 'aaaa',\n    1: 'bbbb',\n    2: 'cccc',\n    length: 3\n}\n// é€šè¿‡è¿™ä¸ªæ–¹æ³•è½¬æ¢\nvar arr = Array.prototype.slice.call(arrayLike);\n```\n<div class='tip'>ä¸Šé¢ `arr` ä¾¿æ˜¯ä¸€ä¸ªåŒ…å« `arrayLike` å…ƒç´ çš„çœŸæ­£çš„æ•°ç»„å•¦( æ³¨æ„æ•°æ®ç»“æ„å¿…é¡»æ˜¯ä»¥æ•°å­—ä¸ºä¸‹æ ‡è€Œä¸”ä¸€å®šè¦æœ‰ `length` å±æ€§ )\n</div>\n\n#### æ•°ç»„è¿½åŠ \n```js\nvar arr1 = [1,2,3];\nvar arr2 = [4,5,6];\n[].push.apply(arr1, arr2);\n\nconsole.log(arr1);// => [1, 2, 3, 4, 5, 6]\nconsole.log(arr2);// => [1, 2, 3]\n```\n\n#### å˜é‡ç±»å‹åˆ¤æ–­\n```js\nfunction isArray(obj){\n    return Object.prototype.toString.call(obj) == '[object Array]'\n}\nvar arr1 = [1,2,3];\nvar arr2 = '[1,2,3]';\n\nisArray(arr1);//   => true\nisArray(arr2);//   => false\n```\n\n#### ç»§æ‰¿\n```js\n// åŸºç¡€ç±»\nvar Person = function (name, age) {\n  this.name = name;\n  this.age = age;\n};\n\n// å¥³å­©ç±»ç»§æ‰¿åŸºç¡€äººç±»\nvar Girl = function (name) {\n  Person.call(this, name);\n};\n// ç”·å­©ç±»ç»§æ‰¿åŸºç¡€äººç±»\nvar Boy = function (name, age) {\n  Person.apply(this, arguments);\n};\n\nvar g1 = new Girl ('Jilly');\nvar b1 = new Boy('ifyour', 18);\n```\n","source":"_posts/callã€applyã€bind-çš„åŒºåˆ«åŠåº”ç”¨.md","raw":"---\ntitle: callã€applyã€bind çš„åŒºåˆ«åŠåº”ç”¨\ndate: 2016-03-26 18:14:16\ntags:\ncomments: false\n---\n\nåœ¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ä¸­ï¼Œç»å¸¸ä¼šå¤„ç† `this` çš„æŒ‡å‘é—®é¢˜ï¼Œæ”¹å˜ this çš„æŒ‡å‘å°±ä¸å¾—ä¸è°ˆè°ˆä»Šå¤©çš„ä¸»è§’â€”â€” `call`ã€`apply`ã€`bind`ã€‚ä¸ªäººæ„Ÿè§‰ `this` çš„é—®é¢˜åˆå­¦è€…ä¸åŒå®¹æ˜“ä¸€ä¸‹ç†è§£é€å½»ï¼Œä»Šå¤©å†æ¥å¥½å¥½æ‹ä¸€æ‹åŠ æ·±ç†è§£ã€‚\n<!-- more -->\n### ä½œç”¨\n`call`ã€`apply`ã€`bind` çš„ä½œç”¨å°±æ˜¯æ”¹å˜å‡½æ•°æ‰§è¡Œæ—¶çš„ä¸Šä¸‹æ–‡ï¼Œå³æ”¹å˜ `this` æŒ‡å‘ã€‚\n\n`this` çš„æŒ‡å‘å…¶å®ä¹Ÿå°±[ä¸å¤–ä¹è¿™å››ç§æƒ…å†µ](https://ifyour.github.io/2016/02/19/JavaScript-%E4%B8%AD%E7%9A%84-this-%E7%94%A8%E6%B3%95%E6%80%BB%E7%BB%93/)ï¼Œå…¶å®ç†è§£èµ·æ¥è¿˜æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œç†è§£ä¸äº†ä¹Ÿæ²¡å…³ç³»ï¼Œå…ˆè®°ä½ï¼Œåé¢åœ¨å·¥ä½œä¸­å¤§é‡ç¼–ç åº”ç”¨ï¼Œå†™å¤šäº†å°±çŸ¥é“ä¸ºå•¥è¦è¿™æ ·ç”¨äº†ã€‚å…ˆæ¥ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚\n```js\n// å®šä¹‰äººç±»æ„é€ å‡½æ•°ï¼Œå±æ€§æ˜¯å§“åï¼Œæ–¹æ³•æ˜¯è¾“å‡ºè‡ªå·±çš„å§“å\nfunction Person(name) {\n    this.name = name;\n}\n\nPerson.prototype = {\n    constructor: Person,\n    showName: function() {\n        console.log(this.name);\n    }\n};\n\nvar p1 = new Person('ifyour');\np1.showName(); // => ifyour\n\n// å®šä¹‰ä¸€ä¸ªåŠ¨ç‰©å¯¹è±¡ï¼Œå®ƒæœ‰ä¸ªä¸€å§“åå±æ€§\nvar animal = {\n    name: 'cat'\n};\n\n```\näººç±»å®ä¾‹ `p1` æƒ³è¦æ‰“å°è‡ªå·±çš„å§“åï¼Œåªè¦è°ƒç”¨è‡ªèº«çš„ `showName` æ–¹æ³•å³å¯ï¼Œä½†æ˜¯åŠ¨ç‰©å‘¢ï¼Ÿæˆ‘ä¹Ÿæƒ³è¦åŠ¨ç‰©å®ä¾‹ `animal` æ‰“å°è‡ªå·±çš„åå­—ï¼Œå¦‚ä½•åšå‘¢ï¼Ÿå½“ç„¶æ”¹å˜ this å’¯ï¼ŒæŠŠäººç±»çš„ `showName` æ–¹æ³•å€Ÿç»™åŠ¨ç‰©ç”¨ã€‚\n\n```js\n// å¯ä»¥ç›´æ¥å»åŸå‹ä¸Šå€Ÿç”¨\nPerson.prototype.showName.call(animal);//=>cat\n\n// ä¹Ÿå¯ä»¥ä»äººç±»ä¸Šç”Ÿæˆçš„å®ä¾‹ p1 å»å€Ÿç”¨\np1.showName.call(animal);//  => cat\np1.showName.apply(animal);// => cat\np1.showName.bind(animal)();//=> cat\n```\n\n### åŒºåˆ«\n#### callã€apply ä¸ bind\n- `call`ã€`apply` æ”¹å˜ `this` æŒ‡å‘åä¼š ***ç«‹å³æ‰§è¡Œ***\n- `bind` å¹¶ä¸ä¼šæ‰§è¡Œ\n\nåœ¨ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬ä¹Ÿçœ‹åˆ°äº†ï¼Œ`bind` æ–¹æ³•æ”¹å˜ this æ—¶ï¼Œè¿˜éœ€è¦åŠ ä¸€ä¸ª `()` æ‰èƒ½æ‰§è¡Œè¾“å‡º `cat`ã€‚\n\n#### call ä¸ apply\n\n- `call` æŠŠå‚æ•°æŒ‰é¡ºåºä¼ å…¥ï¼Œå³ï¼š`fn.call(obj, arg1, arg2, arg3...);`\n- `apply` æŠŠå‚æ•°æ‰“åŒ…æˆ `Array` åä¼ å…¥ï¼Œå³ï¼š `fn.apply(obj, [arg1, arg2, arg3...]);`\n\n\nå®ƒä»¬ä¿©ä¹‹é—´çš„å·®åˆ«åœ¨äº ***å‚æ•°***ï¼Œ`call` å’Œ `aplly` çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯è¦æ”¹å˜ä¸Šä¸‹æ–‡çš„å¯¹è±¡ï¼Œè€Œ `call` ä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ä»¥å‚æ•°åˆ—è¡¨çš„å½¢å¼å±•ç°ï¼Œ`apply` åˆ™æ˜¯æŠŠé™¤äº†æ”¹å˜ä¸Šä¸‹æ–‡å¯¹è±¡çš„å‚æ•°æ”¾åœ¨ä¸€ä¸ªæ•°ç»„é‡Œé¢ä½œä¸ºå®ƒçš„ç¬¬äºŒä¸ªå‚æ•°ã€‚\n\n### åº”ç”¨\nçŸ¥é“äº†æ€ä¹ˆä½¿ç”¨å’Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹ä½¿ç”¨ `call`ã€`apply`ã€`bind` çš„å¸¸è§åº”ç”¨åœºæ™¯ã€‚\n\n#### æ±‚æ•°ç»„ä¸­çš„æœ€å¤§ã€æœ€å°å€¼\n```js\nvar arr = [34,5,3,6,54,6,-67,5,7,6,-8,687];\n\nMath.max.call(Math, 34,5,3,6,54,6,-67,5,7,6,-8,687);\nMath.max.apply(Math, arr);\n\nMath.min.call(Math, 34,5,3,6,54,6,-67,5,7,6,-8,687);\nMath.min.apply(Math, arr);\n```\n#### å°†ä¼ªæ•°ç»„è½¬åŒ–ä¸ºæ•°ç»„\nJavaScript ä¸­çš„ä¼ªæ•°ç»„(ä¾‹å¦‚é€šè¿‡ `document.getElementsByTagName` è·å–çš„å…ƒç´ )å…·æœ‰ `length` å±æ€§ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ 0ã€1ã€2â€¦â€¦ä¸‹æ ‡æ¥è®¿é—®å…¶ä¸­çš„å…ƒç´ ï¼Œä½†æ˜¯æ²¡æœ‰ `Array` ä¸­çš„ `push`ã€`pop` ç­‰æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ `call`ã€`apply` æ¥å°†å…¶è½¬åŒ–ä¸ºçœŸæ­£çš„æ•°ç»„è¿™æ ·ä¾¿å¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨æ•°ç»„æ–¹æ³•äº†ã€‚\n\n```js\n// è¿™æ˜¯ä¸€ä¸ªä¼ªæ•°ç»„\nvar arrayLike = {\n    0: 'aaaa',\n    1: 'bbbb',\n    2: 'cccc',\n    length: 3\n}\n// é€šè¿‡è¿™ä¸ªæ–¹æ³•è½¬æ¢\nvar arr = Array.prototype.slice.call(arrayLike);\n```\n<div class='tip'>ä¸Šé¢ `arr` ä¾¿æ˜¯ä¸€ä¸ªåŒ…å« `arrayLike` å…ƒç´ çš„çœŸæ­£çš„æ•°ç»„å•¦( æ³¨æ„æ•°æ®ç»“æ„å¿…é¡»æ˜¯ä»¥æ•°å­—ä¸ºä¸‹æ ‡è€Œä¸”ä¸€å®šè¦æœ‰ `length` å±æ€§ )\n</div>\n\n#### æ•°ç»„è¿½åŠ \n```js\nvar arr1 = [1,2,3];\nvar arr2 = [4,5,6];\n[].push.apply(arr1, arr2);\n\nconsole.log(arr1);// => [1, 2, 3, 4, 5, 6]\nconsole.log(arr2);// => [1, 2, 3]\n```\n\n#### å˜é‡ç±»å‹åˆ¤æ–­\n```js\nfunction isArray(obj){\n    return Object.prototype.toString.call(obj) == '[object Array]'\n}\nvar arr1 = [1,2,3];\nvar arr2 = '[1,2,3]';\n\nisArray(arr1);//   => true\nisArray(arr2);//   => false\n```\n\n#### ç»§æ‰¿\n```js\n// åŸºç¡€ç±»\nvar Person = function (name, age) {\n  this.name = name;\n  this.age = age;\n};\n\n// å¥³å­©ç±»ç»§æ‰¿åŸºç¡€äººç±»\nvar Girl = function (name) {\n  Person.call(this, name);\n};\n// ç”·å­©ç±»ç»§æ‰¿åŸºç¡€äººç±»\nvar Boy = function (name, age) {\n  Person.apply(this, arguments);\n};\n\nvar g1 = new Girl ('Jilly');\nvar b1 = new Boy('ifyour', 18);\n```\n","slug":"callã€applyã€bind-çš„åŒºåˆ«åŠåº”ç”¨","published":1,"updated":"2019-12-07T04:59:33.620Z","layout":"post","photos":[],"link":"","_id":"ck3v60jtj000jr9q9cc1xqsg9","content":"<p>åœ¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ä¸­ï¼Œç»å¸¸ä¼šå¤„ç† <code>this</code> çš„æŒ‡å‘é—®é¢˜ï¼Œæ”¹å˜ this çš„æŒ‡å‘å°±ä¸å¾—ä¸è°ˆè°ˆä»Šå¤©çš„ä¸»è§’â€”â€” <code>call</code>ã€<code>apply</code>ã€<code>bind</code>ã€‚ä¸ªäººæ„Ÿè§‰ <code>this</code> çš„é—®é¢˜åˆå­¦è€…ä¸åŒå®¹æ˜“ä¸€ä¸‹ç†è§£é€å½»ï¼Œä»Šå¤©å†æ¥å¥½å¥½æ‹ä¸€æ‹åŠ æ·±ç†è§£ã€‚<br><a id=\"more\"></a></p>\n<h3 id=\"ä½œç”¨\"><a href=\"#ä½œç”¨\" class=\"headerlink\" title=\"ä½œç”¨\"></a>ä½œç”¨</h3><p><code>call</code>ã€<code>apply</code>ã€<code>bind</code> çš„ä½œç”¨å°±æ˜¯æ”¹å˜å‡½æ•°æ‰§è¡Œæ—¶çš„ä¸Šä¸‹æ–‡ï¼Œå³æ”¹å˜ <code>this</code> æŒ‡å‘ã€‚</p>\n<p><code>this</code> çš„æŒ‡å‘å…¶å®ä¹Ÿå°±<a href=\"https://ifyour.github.io/2016/02/19/JavaScript-%E4%B8%AD%E7%9A%84-this-%E7%94%A8%E6%B3%95%E6%80%BB%E7%BB%93/\">ä¸å¤–ä¹è¿™å››ç§æƒ…å†µ</a>ï¼Œå…¶å®ç†è§£èµ·æ¥è¿˜æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œç†è§£ä¸äº†ä¹Ÿæ²¡å…³ç³»ï¼Œå…ˆè®°ä½ï¼Œåé¢åœ¨å·¥ä½œä¸­å¤§é‡ç¼–ç åº”ç”¨ï¼Œå†™å¤šäº†å°±çŸ¥é“ä¸ºå•¥è¦è¿™æ ·ç”¨äº†ã€‚å…ˆæ¥ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å®šä¹‰äººç±»æ„é€ å‡½æ•°ï¼Œå±æ€§æ˜¯å§“åï¼Œæ–¹æ³•æ˜¯è¾“å‡ºè‡ªå·±çš„å§“å</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Person.prototype = &#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>: Person,</span><br><span class=\"line\">    showName: function() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> p1 = <span class=\"keyword\">new</span> Person(<span class=\"string\">'ifyour'</span>);</span><br><span class=\"line\">p1.showName(); <span class=\"comment\">// =&gt; ifyour</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å®šä¹‰ä¸€ä¸ªåŠ¨ç‰©å¯¹è±¡ï¼Œå®ƒæœ‰ä¸ªä¸€å§“åå±æ€§</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> animal = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'cat'</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>äººç±»å®ä¾‹ <code>p1</code> æƒ³è¦æ‰“å°è‡ªå·±çš„å§“åï¼Œåªè¦è°ƒç”¨è‡ªèº«çš„ <code>showName</code> æ–¹æ³•å³å¯ï¼Œä½†æ˜¯åŠ¨ç‰©å‘¢ï¼Ÿæˆ‘ä¹Ÿæƒ³è¦åŠ¨ç‰©å®ä¾‹ <code>animal</code> æ‰“å°è‡ªå·±çš„åå­—ï¼Œå¦‚ä½•åšå‘¢ï¼Ÿå½“ç„¶æ”¹å˜ this å’¯ï¼ŒæŠŠäººç±»çš„ <code>showName</code> æ–¹æ³•å€Ÿç»™åŠ¨ç‰©ç”¨ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¯ä»¥ç›´æ¥å»åŸå‹ä¸Šå€Ÿç”¨</span></span><br><span class=\"line\">Person.prototype.showName.call(animal);<span class=\"comment\">//=&gt;cat</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¹Ÿå¯ä»¥ä»äººç±»ä¸Šç”Ÿæˆçš„å®ä¾‹ p1 å»å€Ÿç”¨</span></span><br><span class=\"line\">p1.showName.call(animal);<span class=\"comment\">//  =&gt; cat</span></span><br><span class=\"line\">p1.showName.apply(animal);<span class=\"comment\">// =&gt; cat</span></span><br><span class=\"line\">p1.showName.bind(animal)();<span class=\"comment\">//=&gt; cat</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"åŒºåˆ«\"><a href=\"#åŒºåˆ«\" class=\"headerlink\" title=\"åŒºåˆ«\"></a>åŒºåˆ«</h3><h4 id=\"callã€apply-ä¸-bind\"><a href=\"#callã€apply-ä¸-bind\" class=\"headerlink\" title=\"callã€apply ä¸ bind\"></a>callã€apply ä¸ bind</h4><ul>\n<li><code>call</code>ã€<code>apply</code> æ”¹å˜ <code>this</code> æŒ‡å‘åä¼š <strong><em>ç«‹å³æ‰§è¡Œ</em></strong></li>\n<li><code>bind</code> å¹¶ä¸ä¼šæ‰§è¡Œ</li>\n</ul>\n<p>åœ¨ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬ä¹Ÿçœ‹åˆ°äº†ï¼Œ<code>bind</code> æ–¹æ³•æ”¹å˜ this æ—¶ï¼Œè¿˜éœ€è¦åŠ ä¸€ä¸ª <code>()</code> æ‰èƒ½æ‰§è¡Œè¾“å‡º <code>cat</code>ã€‚</p>\n<h4 id=\"call-ä¸-apply\"><a href=\"#call-ä¸-apply\" class=\"headerlink\" title=\"call ä¸ apply\"></a>call ä¸ apply</h4><ul>\n<li><code>call</code> æŠŠå‚æ•°æŒ‰é¡ºåºä¼ å…¥ï¼Œå³ï¼š<code>fn.call(obj, arg1, arg2, arg3...);</code></li>\n<li><code>apply</code> æŠŠå‚æ•°æ‰“åŒ…æˆ <code>Array</code> åä¼ å…¥ï¼Œå³ï¼š <code>fn.apply(obj, [arg1, arg2, arg3...]);</code></li>\n</ul>\n<p>å®ƒä»¬ä¿©ä¹‹é—´çš„å·®åˆ«åœ¨äº <strong><em>å‚æ•°</em></strong>ï¼Œ<code>call</code> å’Œ <code>aplly</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯è¦æ”¹å˜ä¸Šä¸‹æ–‡çš„å¯¹è±¡ï¼Œè€Œ <code>call</code> ä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ä»¥å‚æ•°åˆ—è¡¨çš„å½¢å¼å±•ç°ï¼Œ<code>apply</code> åˆ™æ˜¯æŠŠé™¤äº†æ”¹å˜ä¸Šä¸‹æ–‡å¯¹è±¡çš„å‚æ•°æ”¾åœ¨ä¸€ä¸ªæ•°ç»„é‡Œé¢ä½œä¸ºå®ƒçš„ç¬¬äºŒä¸ªå‚æ•°ã€‚</p>\n<h3 id=\"åº”ç”¨\"><a href=\"#åº”ç”¨\" class=\"headerlink\" title=\"åº”ç”¨\"></a>åº”ç”¨</h3><p>çŸ¥é“äº†æ€ä¹ˆä½¿ç”¨å’Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹ä½¿ç”¨ <code>call</code>ã€<code>apply</code>ã€<code>bind</code> çš„å¸¸è§åº”ç”¨åœºæ™¯ã€‚</p>\n<h4 id=\"æ±‚æ•°ç»„ä¸­çš„æœ€å¤§ã€æœ€å°å€¼\"><a href=\"#æ±‚æ•°ç»„ä¸­çš„æœ€å¤§ã€æœ€å°å€¼\" class=\"headerlink\" title=\"æ±‚æ•°ç»„ä¸­çš„æœ€å¤§ã€æœ€å°å€¼\"></a>æ±‚æ•°ç»„ä¸­çš„æœ€å¤§ã€æœ€å°å€¼</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">34</span>,<span class=\"number\">5</span>,<span class=\"number\">3</span>,<span class=\"number\">6</span>,<span class=\"number\">54</span>,<span class=\"number\">6</span>,<span class=\"number\">-67</span>,<span class=\"number\">5</span>,<span class=\"number\">7</span>,<span class=\"number\">6</span>,<span class=\"number\">-8</span>,<span class=\"number\">687</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Math</span>.max.call(<span class=\"built_in\">Math</span>, <span class=\"number\">34</span>,<span class=\"number\">5</span>,<span class=\"number\">3</span>,<span class=\"number\">6</span>,<span class=\"number\">54</span>,<span class=\"number\">6</span>,<span class=\"number\">-67</span>,<span class=\"number\">5</span>,<span class=\"number\">7</span>,<span class=\"number\">6</span>,<span class=\"number\">-8</span>,<span class=\"number\">687</span>);</span><br><span class=\"line\"><span class=\"built_in\">Math</span>.max.apply(<span class=\"built_in\">Math</span>, arr);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Math</span>.min.call(<span class=\"built_in\">Math</span>, <span class=\"number\">34</span>,<span class=\"number\">5</span>,<span class=\"number\">3</span>,<span class=\"number\">6</span>,<span class=\"number\">54</span>,<span class=\"number\">6</span>,<span class=\"number\">-67</span>,<span class=\"number\">5</span>,<span class=\"number\">7</span>,<span class=\"number\">6</span>,<span class=\"number\">-8</span>,<span class=\"number\">687</span>);</span><br><span class=\"line\"><span class=\"built_in\">Math</span>.min.apply(<span class=\"built_in\">Math</span>, arr);</span><br></pre></td></tr></table></figure>\n<h4 id=\"å°†ä¼ªæ•°ç»„è½¬åŒ–ä¸ºæ•°ç»„\"><a href=\"#å°†ä¼ªæ•°ç»„è½¬åŒ–ä¸ºæ•°ç»„\" class=\"headerlink\" title=\"å°†ä¼ªæ•°ç»„è½¬åŒ–ä¸ºæ•°ç»„\"></a>å°†ä¼ªæ•°ç»„è½¬åŒ–ä¸ºæ•°ç»„</h4><p>JavaScript ä¸­çš„ä¼ªæ•°ç»„(ä¾‹å¦‚é€šè¿‡ <code>document.getElementsByTagName</code> è·å–çš„å…ƒç´ )å…·æœ‰ <code>length</code> å±æ€§ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ 0ã€1ã€2â€¦â€¦ä¸‹æ ‡æ¥è®¿é—®å…¶ä¸­çš„å…ƒç´ ï¼Œä½†æ˜¯æ²¡æœ‰ <code>Array</code> ä¸­çš„ <code>push</code>ã€<code>pop</code> ç­‰æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>call</code>ã€<code>apply</code> æ¥å°†å…¶è½¬åŒ–ä¸ºçœŸæ­£çš„æ•°ç»„è¿™æ ·ä¾¿å¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨æ•°ç»„æ–¹æ³•äº†ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿™æ˜¯ä¸€ä¸ªä¼ªæ•°ç»„</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arrayLike = &#123;</span><br><span class=\"line\">    <span class=\"number\">0</span>: <span class=\"string\">'aaaa'</span>,</span><br><span class=\"line\">    <span class=\"number\">1</span>: <span class=\"string\">'bbbb'</span>,</span><br><span class=\"line\">    <span class=\"number\">2</span>: <span class=\"string\">'cccc'</span>,</span><br><span class=\"line\">    length: <span class=\"number\">3</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// é€šè¿‡è¿™ä¸ªæ–¹æ³•è½¬æ¢</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = <span class=\"built_in\">Array</span>.prototype.slice.call(arrayLike);</span><br></pre></td></tr></table></figure>\n<div class=\"tip\">ä¸Šé¢ <code>arr</code> ä¾¿æ˜¯ä¸€ä¸ªåŒ…å« <code>arrayLike</code> å…ƒç´ çš„çœŸæ­£çš„æ•°ç»„å•¦( æ³¨æ„æ•°æ®ç»“æ„å¿…é¡»æ˜¯ä»¥æ•°å­—ä¸ºä¸‹æ ‡è€Œä¸”ä¸€å®šè¦æœ‰ <code>length</code> å±æ€§ )<br></div>\n\n<h4 id=\"æ•°ç»„è¿½åŠ \"><a href=\"#æ•°ç»„è¿½åŠ \" class=\"headerlink\" title=\"æ•°ç»„è¿½åŠ \"></a>æ•°ç»„è¿½åŠ </h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr1 = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>];</span><br><span class=\"line\"><span class=\"keyword\">var</span> arr2 = [<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">6</span>];</span><br><span class=\"line\">[].push.apply(arr1, arr2);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr1);<span class=\"comment\">// =&gt; [1, 2, 3, 4, 5, 6]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr2);<span class=\"comment\">// =&gt; [1, 2, 3]</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"å˜é‡ç±»å‹åˆ¤æ–­\"><a href=\"#å˜é‡ç±»å‹åˆ¤æ–­\" class=\"headerlink\" title=\"å˜é‡ç±»å‹åˆ¤æ–­\"></a>å˜é‡ç±»å‹åˆ¤æ–­</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isArray</span>(<span class=\"params\">obj</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.prototype.toString.call(obj) == <span class=\"string\">'[object Array]'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> arr1 = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>];</span><br><span class=\"line\"><span class=\"keyword\">var</span> arr2 = <span class=\"string\">'[1,2,3]'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">isArray(arr1);<span class=\"comment\">//   =&gt; true</span></span><br><span class=\"line\">isArray(arr2);<span class=\"comment\">//   =&gt; false</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"ç»§æ‰¿\"><a href=\"#ç»§æ‰¿\" class=\"headerlink\" title=\"ç»§æ‰¿\"></a>ç»§æ‰¿</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// åŸºç¡€ç±»</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> Person = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å¥³å­©ç±»ç»§æ‰¿åŸºç¡€äººç±»</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> Girl = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">  Person.call(<span class=\"keyword\">this</span>, name);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">// ç”·å­©ç±»ç»§æ‰¿åŸºç¡€äººç±»</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> Boy = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">  Person.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> g1 = <span class=\"keyword\">new</span> Girl (<span class=\"string\">'Jilly'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> b1 = <span class=\"keyword\">new</span> Boy(<span class=\"string\">'ifyour'</span>, <span class=\"number\">18</span>);</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p>åœ¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ä¸­ï¼Œç»å¸¸ä¼šå¤„ç† <code>this</code> çš„æŒ‡å‘é—®é¢˜ï¼Œæ”¹å˜ this çš„æŒ‡å‘å°±ä¸å¾—ä¸è°ˆè°ˆä»Šå¤©çš„ä¸»è§’â€”â€” <code>call</code>ã€<code>apply</code>ã€<code>bind</code>ã€‚ä¸ªäººæ„Ÿè§‰ <code>this</code> çš„é—®é¢˜åˆå­¦è€…ä¸åŒå®¹æ˜“ä¸€ä¸‹ç†è§£é€å½»ï¼Œä»Šå¤©å†æ¥å¥½å¥½æ‹ä¸€æ‹åŠ æ·±ç†è§£ã€‚<br>","more":"</p>\n<h3 id=\"ä½œç”¨\"><a href=\"#ä½œç”¨\" class=\"headerlink\" title=\"ä½œç”¨\"></a>ä½œç”¨</h3><p><code>call</code>ã€<code>apply</code>ã€<code>bind</code> çš„ä½œç”¨å°±æ˜¯æ”¹å˜å‡½æ•°æ‰§è¡Œæ—¶çš„ä¸Šä¸‹æ–‡ï¼Œå³æ”¹å˜ <code>this</code> æŒ‡å‘ã€‚</p>\n<p><code>this</code> çš„æŒ‡å‘å…¶å®ä¹Ÿå°±<a href=\"https://ifyour.github.io/2016/02/19/JavaScript-%E4%B8%AD%E7%9A%84-this-%E7%94%A8%E6%B3%95%E6%80%BB%E7%BB%93/\">ä¸å¤–ä¹è¿™å››ç§æƒ…å†µ</a>ï¼Œå…¶å®ç†è§£èµ·æ¥è¿˜æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œç†è§£ä¸äº†ä¹Ÿæ²¡å…³ç³»ï¼Œå…ˆè®°ä½ï¼Œåé¢åœ¨å·¥ä½œä¸­å¤§é‡ç¼–ç åº”ç”¨ï¼Œå†™å¤šäº†å°±çŸ¥é“ä¸ºå•¥è¦è¿™æ ·ç”¨äº†ã€‚å…ˆæ¥ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å®šä¹‰äººç±»æ„é€ å‡½æ•°ï¼Œå±æ€§æ˜¯å§“åï¼Œæ–¹æ³•æ˜¯è¾“å‡ºè‡ªå·±çš„å§“å</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Person.prototype = &#123;</span><br><span class=\"line\">    <span class=\"keyword\">constructor</span>: Person,</span><br><span class=\"line\">    showName: function() &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> p1 = <span class=\"keyword\">new</span> Person(<span class=\"string\">'ifyour'</span>);</span><br><span class=\"line\">p1.showName(); <span class=\"comment\">// =&gt; ifyour</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å®šä¹‰ä¸€ä¸ªåŠ¨ç‰©å¯¹è±¡ï¼Œå®ƒæœ‰ä¸ªä¸€å§“åå±æ€§</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> animal = &#123;</span><br><span class=\"line\">    name: <span class=\"string\">'cat'</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>äººç±»å®ä¾‹ <code>p1</code> æƒ³è¦æ‰“å°è‡ªå·±çš„å§“åï¼Œåªè¦è°ƒç”¨è‡ªèº«çš„ <code>showName</code> æ–¹æ³•å³å¯ï¼Œä½†æ˜¯åŠ¨ç‰©å‘¢ï¼Ÿæˆ‘ä¹Ÿæƒ³è¦åŠ¨ç‰©å®ä¾‹ <code>animal</code> æ‰“å°è‡ªå·±çš„åå­—ï¼Œå¦‚ä½•åšå‘¢ï¼Ÿå½“ç„¶æ”¹å˜ this å’¯ï¼ŒæŠŠäººç±»çš„ <code>showName</code> æ–¹æ³•å€Ÿç»™åŠ¨ç‰©ç”¨ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¯ä»¥ç›´æ¥å»åŸå‹ä¸Šå€Ÿç”¨</span></span><br><span class=\"line\">Person.prototype.showName.call(animal);<span class=\"comment\">//=&gt;cat</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¹Ÿå¯ä»¥ä»äººç±»ä¸Šç”Ÿæˆçš„å®ä¾‹ p1 å»å€Ÿç”¨</span></span><br><span class=\"line\">p1.showName.call(animal);<span class=\"comment\">//  =&gt; cat</span></span><br><span class=\"line\">p1.showName.apply(animal);<span class=\"comment\">// =&gt; cat</span></span><br><span class=\"line\">p1.showName.bind(animal)();<span class=\"comment\">//=&gt; cat</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"åŒºåˆ«\"><a href=\"#åŒºåˆ«\" class=\"headerlink\" title=\"åŒºåˆ«\"></a>åŒºåˆ«</h3><h4 id=\"callã€apply-ä¸-bind\"><a href=\"#callã€apply-ä¸-bind\" class=\"headerlink\" title=\"callã€apply ä¸ bind\"></a>callã€apply ä¸ bind</h4><ul>\n<li><code>call</code>ã€<code>apply</code> æ”¹å˜ <code>this</code> æŒ‡å‘åä¼š <strong><em>ç«‹å³æ‰§è¡Œ</em></strong></li>\n<li><code>bind</code> å¹¶ä¸ä¼šæ‰§è¡Œ</li>\n</ul>\n<p>åœ¨ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬ä¹Ÿçœ‹åˆ°äº†ï¼Œ<code>bind</code> æ–¹æ³•æ”¹å˜ this æ—¶ï¼Œè¿˜éœ€è¦åŠ ä¸€ä¸ª <code>()</code> æ‰èƒ½æ‰§è¡Œè¾“å‡º <code>cat</code>ã€‚</p>\n<h4 id=\"call-ä¸-apply\"><a href=\"#call-ä¸-apply\" class=\"headerlink\" title=\"call ä¸ apply\"></a>call ä¸ apply</h4><ul>\n<li><code>call</code> æŠŠå‚æ•°æŒ‰é¡ºåºä¼ å…¥ï¼Œå³ï¼š<code>fn.call(obj, arg1, arg2, arg3...);</code></li>\n<li><code>apply</code> æŠŠå‚æ•°æ‰“åŒ…æˆ <code>Array</code> åä¼ å…¥ï¼Œå³ï¼š <code>fn.apply(obj, [arg1, arg2, arg3...]);</code></li>\n</ul>\n<p>å®ƒä»¬ä¿©ä¹‹é—´çš„å·®åˆ«åœ¨äº <strong><em>å‚æ•°</em></strong>ï¼Œ<code>call</code> å’Œ <code>aplly</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯è¦æ”¹å˜ä¸Šä¸‹æ–‡çš„å¯¹è±¡ï¼Œè€Œ <code>call</code> ä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ä»¥å‚æ•°åˆ—è¡¨çš„å½¢å¼å±•ç°ï¼Œ<code>apply</code> åˆ™æ˜¯æŠŠé™¤äº†æ”¹å˜ä¸Šä¸‹æ–‡å¯¹è±¡çš„å‚æ•°æ”¾åœ¨ä¸€ä¸ªæ•°ç»„é‡Œé¢ä½œä¸ºå®ƒçš„ç¬¬äºŒä¸ªå‚æ•°ã€‚</p>\n<h3 id=\"åº”ç”¨\"><a href=\"#åº”ç”¨\" class=\"headerlink\" title=\"åº”ç”¨\"></a>åº”ç”¨</h3><p>çŸ¥é“äº†æ€ä¹ˆä½¿ç”¨å’Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹ä½¿ç”¨ <code>call</code>ã€<code>apply</code>ã€<code>bind</code> çš„å¸¸è§åº”ç”¨åœºæ™¯ã€‚</p>\n<h4 id=\"æ±‚æ•°ç»„ä¸­çš„æœ€å¤§ã€æœ€å°å€¼\"><a href=\"#æ±‚æ•°ç»„ä¸­çš„æœ€å¤§ã€æœ€å°å€¼\" class=\"headerlink\" title=\"æ±‚æ•°ç»„ä¸­çš„æœ€å¤§ã€æœ€å°å€¼\"></a>æ±‚æ•°ç»„ä¸­çš„æœ€å¤§ã€æœ€å°å€¼</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">34</span>,<span class=\"number\">5</span>,<span class=\"number\">3</span>,<span class=\"number\">6</span>,<span class=\"number\">54</span>,<span class=\"number\">6</span>,<span class=\"number\">-67</span>,<span class=\"number\">5</span>,<span class=\"number\">7</span>,<span class=\"number\">6</span>,<span class=\"number\">-8</span>,<span class=\"number\">687</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Math</span>.max.call(<span class=\"built_in\">Math</span>, <span class=\"number\">34</span>,<span class=\"number\">5</span>,<span class=\"number\">3</span>,<span class=\"number\">6</span>,<span class=\"number\">54</span>,<span class=\"number\">6</span>,<span class=\"number\">-67</span>,<span class=\"number\">5</span>,<span class=\"number\">7</span>,<span class=\"number\">6</span>,<span class=\"number\">-8</span>,<span class=\"number\">687</span>);</span><br><span class=\"line\"><span class=\"built_in\">Math</span>.max.apply(<span class=\"built_in\">Math</span>, arr);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Math</span>.min.call(<span class=\"built_in\">Math</span>, <span class=\"number\">34</span>,<span class=\"number\">5</span>,<span class=\"number\">3</span>,<span class=\"number\">6</span>,<span class=\"number\">54</span>,<span class=\"number\">6</span>,<span class=\"number\">-67</span>,<span class=\"number\">5</span>,<span class=\"number\">7</span>,<span class=\"number\">6</span>,<span class=\"number\">-8</span>,<span class=\"number\">687</span>);</span><br><span class=\"line\"><span class=\"built_in\">Math</span>.min.apply(<span class=\"built_in\">Math</span>, arr);</span><br></pre></td></tr></table></figure>\n<h4 id=\"å°†ä¼ªæ•°ç»„è½¬åŒ–ä¸ºæ•°ç»„\"><a href=\"#å°†ä¼ªæ•°ç»„è½¬åŒ–ä¸ºæ•°ç»„\" class=\"headerlink\" title=\"å°†ä¼ªæ•°ç»„è½¬åŒ–ä¸ºæ•°ç»„\"></a>å°†ä¼ªæ•°ç»„è½¬åŒ–ä¸ºæ•°ç»„</h4><p>JavaScript ä¸­çš„ä¼ªæ•°ç»„(ä¾‹å¦‚é€šè¿‡ <code>document.getElementsByTagName</code> è·å–çš„å…ƒç´ )å…·æœ‰ <code>length</code> å±æ€§ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ 0ã€1ã€2â€¦â€¦ä¸‹æ ‡æ¥è®¿é—®å…¶ä¸­çš„å…ƒç´ ï¼Œä½†æ˜¯æ²¡æœ‰ <code>Array</code> ä¸­çš„ <code>push</code>ã€<code>pop</code> ç­‰æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>call</code>ã€<code>apply</code> æ¥å°†å…¶è½¬åŒ–ä¸ºçœŸæ­£çš„æ•°ç»„è¿™æ ·ä¾¿å¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨æ•°ç»„æ–¹æ³•äº†ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿™æ˜¯ä¸€ä¸ªä¼ªæ•°ç»„</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arrayLike = &#123;</span><br><span class=\"line\">    <span class=\"number\">0</span>: <span class=\"string\">'aaaa'</span>,</span><br><span class=\"line\">    <span class=\"number\">1</span>: <span class=\"string\">'bbbb'</span>,</span><br><span class=\"line\">    <span class=\"number\">2</span>: <span class=\"string\">'cccc'</span>,</span><br><span class=\"line\">    length: <span class=\"number\">3</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// é€šè¿‡è¿™ä¸ªæ–¹æ³•è½¬æ¢</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = <span class=\"built_in\">Array</span>.prototype.slice.call(arrayLike);</span><br></pre></td></tr></table></figure>\n<div class=\"tip\">ä¸Šé¢ <code>arr</code> ä¾¿æ˜¯ä¸€ä¸ªåŒ…å« <code>arrayLike</code> å…ƒç´ çš„çœŸæ­£çš„æ•°ç»„å•¦( æ³¨æ„æ•°æ®ç»“æ„å¿…é¡»æ˜¯ä»¥æ•°å­—ä¸ºä¸‹æ ‡è€Œä¸”ä¸€å®šè¦æœ‰ <code>length</code> å±æ€§ )<br></div>\n\n<h4 id=\"æ•°ç»„è¿½åŠ \"><a href=\"#æ•°ç»„è¿½åŠ \" class=\"headerlink\" title=\"æ•°ç»„è¿½åŠ \"></a>æ•°ç»„è¿½åŠ </h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr1 = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>];</span><br><span class=\"line\"><span class=\"keyword\">var</span> arr2 = [<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">6</span>];</span><br><span class=\"line\">[].push.apply(arr1, arr2);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr1);<span class=\"comment\">// =&gt; [1, 2, 3, 4, 5, 6]</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr2);<span class=\"comment\">// =&gt; [1, 2, 3]</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"å˜é‡ç±»å‹åˆ¤æ–­\"><a href=\"#å˜é‡ç±»å‹åˆ¤æ–­\" class=\"headerlink\" title=\"å˜é‡ç±»å‹åˆ¤æ–­\"></a>å˜é‡ç±»å‹åˆ¤æ–­</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isArray</span>(<span class=\"params\">obj</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>.prototype.toString.call(obj) == <span class=\"string\">'[object Array]'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> arr1 = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>];</span><br><span class=\"line\"><span class=\"keyword\">var</span> arr2 = <span class=\"string\">'[1,2,3]'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">isArray(arr1);<span class=\"comment\">//   =&gt; true</span></span><br><span class=\"line\">isArray(arr2);<span class=\"comment\">//   =&gt; false</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"ç»§æ‰¿\"><a href=\"#ç»§æ‰¿\" class=\"headerlink\" title=\"ç»§æ‰¿\"></a>ç»§æ‰¿</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// åŸºç¡€ç±»</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> Person = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.age = age;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å¥³å­©ç±»ç»§æ‰¿åŸºç¡€äººç±»</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> Girl = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">  Person.call(<span class=\"keyword\">this</span>, name);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">// ç”·å­©ç±»ç»§æ‰¿åŸºç¡€äººç±»</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> Boy = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name, age</span>) </span>&#123;</span><br><span class=\"line\">  Person.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> g1 = <span class=\"keyword\">new</span> Girl (<span class=\"string\">'Jilly'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> b1 = <span class=\"keyword\">new</span> Boy(<span class=\"string\">'ifyour'</span>, <span class=\"number\">18</span>);</span><br></pre></td></tr></table></figure>"},{"title":"Git æ“ä½œè¯¦ç»†æ€»ç»“","date":"2018-05-11T15:25:56.000Z","from":null,"comments":1,"_content":"\nGit æ“ä½œè¯¦ç»†æ€»ç»“ï¼Œä»¥ä¾¿å›é¡¾å’ŒæŸ¥è¯¢ã€‚ç†è§£è¿™äº›æŒ‡ä»¤ï¼Œè§‰å¾—æœ€é‡è¦çš„æ˜¯ç†è§£ Git çš„å†…éƒ¨åŸç†ï¼Œæ¯”å¦‚ Git çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ï¼Œåˆ†æ¸…æ¥šå·¥ä½œåŒºã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“ï¼Œè¿˜æœ‰å°±æ˜¯ç†è§£ Git è·Ÿè¸ªå¹¶ç®¡ç†çš„æ˜¯ä¿®æ”¹ï¼Œè€Œéæ–‡ä»¶ã€‚\n\n<!-- more -->\n\n![image](https://user-images.githubusercontent.com/15377484/39952532-4c0c156e-55cb-11e8-8052-e62c448325fe.png)\n\n## è®¾ç½®\n\n```bash\ngit config --global user.name \"Your Name\"\ngit config --global user.email \"email@example.com\"\n```\n\n## æäº¤\n\nGit è¿½è¸ªçš„æ˜¯ä¿®æ”¹ï¼Œè€Œä¸æ˜¯æ–‡ä»¶ã€‚\n\n![image](https://user-images.githubusercontent.com/15377484/39952534-5c10f236-55cb-11e8-81bf-c4d369d07054.png)\n\n```bash\n# å°† â€œå½“å‰ä¿®æ”¹â€ ç§»åŠ¨åˆ°æš‚å­˜åŒº (stage)\ngit add filename.txt\n\n# å°†æš‚å­˜åŒºä¿®æ”¹æäº¤\ngit commit -m \"Add filename.txt.\"\n```\n\n## çŠ¶æ€\n\n```bash\ngit status\ngit diff\n```\n\n## å›é€€\n\n```bash\n# æ”¾å¼ƒå·¥ä½œåŒºä¿®æ”¹\ngit checkout -- file.name\ngit checkout -- .\n\n# å–æ¶ˆ commit(æ¯”å¦‚éœ€è¦é‡å†™ commit ä¿¡æ¯)\ngit reset --soft HEAD\n\n# å–æ¶ˆ commitã€add(é‡æ–°æäº¤ä»£ç å’Œ commit)\ngit reset HEAD\ngit reset --mixed HEAD\n\n# å–æ¶ˆ commitã€addã€å·¥ä½œåŒºä¿®æ”¹ (éœ€è¦å®Œå…¨é‡ç½®)\ngit reset --hard HEAD\n```\n\n## è®°å½•\n\n```bash\ngit reflog\ngit log\n```\n\n## åˆ é™¤\n\n```bash\nrm file.name\ngit rm file.name\ngit commit -m \"Del\"\n```\n\n## è¿œç¨‹æ“ä½œ\n\n```bash\ngit remote add origin git@github.com:ifyour/ifyour.github.io.git\n\n# ç¬¬ä¸€æ¬¡æ¨é€ï¼Œ-u(--set-upstream) æŒ‡å®šé»˜è®¤ä¸Šæ¸¸\ngit push -u origin master\ngit push origin master\n```\n\n## å…‹éš†\n\n```bash\ngit clone https://github.com/ifyour/ifyour.github.io.git path\ngit clone git@github.com:ifyour/ifyour.github.io.git path\n```\n\n## åˆ†æ”¯æ“ä½œ\n\n![image](https://user-images.githubusercontent.com/15377484/39952537-6b679758-55cb-11e8-9ff7-87440fcbb4d0.png)\n\n```bash\n# æŸ¥çœ‹å½“å‰åˆ†æ”¯\ngit branch\n\n# åˆ›å»ºåˆ†æ”¯\ngit branch dev\n\n# åˆ‡æ¢åˆ†æ”¯\ngit checkout dev\n\n# åˆ›å»ºå¹¶ checkout åˆ†æ”¯\ngit checkout -b dev\n\n# åˆå¹¶åˆ†æ”¯\ngit merge dev\n\n# åˆ é™¤åˆ†æ”¯\ngit branch -d dev\n```\n\n## æ ‡ç­¾\n\n```bash\ngit tag 0.1.1\ngit push origin --tags\n```\n\n## More\n\n- [Git - ç®€æ˜“æŒ‡å—](http://www.bootcss.com/p/git-guide/)\n","source":"_posts/Git-æ“ä½œè¯¦ç»†æ€»ç»“.md","raw":"---\ntitle: Git æ“ä½œè¯¦ç»†æ€»ç»“\ndate: 2018-05-11 23:25:56\ntags:\nfrom:\ncomments: true\n---\n\nGit æ“ä½œè¯¦ç»†æ€»ç»“ï¼Œä»¥ä¾¿å›é¡¾å’ŒæŸ¥è¯¢ã€‚ç†è§£è¿™äº›æŒ‡ä»¤ï¼Œè§‰å¾—æœ€é‡è¦çš„æ˜¯ç†è§£ Git çš„å†…éƒ¨åŸç†ï¼Œæ¯”å¦‚ Git çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ï¼Œåˆ†æ¸…æ¥šå·¥ä½œåŒºã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“ï¼Œè¿˜æœ‰å°±æ˜¯ç†è§£ Git è·Ÿè¸ªå¹¶ç®¡ç†çš„æ˜¯ä¿®æ”¹ï¼Œè€Œéæ–‡ä»¶ã€‚\n\n<!-- more -->\n\n![image](https://user-images.githubusercontent.com/15377484/39952532-4c0c156e-55cb-11e8-8052-e62c448325fe.png)\n\n## è®¾ç½®\n\n```bash\ngit config --global user.name \"Your Name\"\ngit config --global user.email \"email@example.com\"\n```\n\n## æäº¤\n\nGit è¿½è¸ªçš„æ˜¯ä¿®æ”¹ï¼Œè€Œä¸æ˜¯æ–‡ä»¶ã€‚\n\n![image](https://user-images.githubusercontent.com/15377484/39952534-5c10f236-55cb-11e8-81bf-c4d369d07054.png)\n\n```bash\n# å°† â€œå½“å‰ä¿®æ”¹â€ ç§»åŠ¨åˆ°æš‚å­˜åŒº (stage)\ngit add filename.txt\n\n# å°†æš‚å­˜åŒºä¿®æ”¹æäº¤\ngit commit -m \"Add filename.txt.\"\n```\n\n## çŠ¶æ€\n\n```bash\ngit status\ngit diff\n```\n\n## å›é€€\n\n```bash\n# æ”¾å¼ƒå·¥ä½œåŒºä¿®æ”¹\ngit checkout -- file.name\ngit checkout -- .\n\n# å–æ¶ˆ commit(æ¯”å¦‚éœ€è¦é‡å†™ commit ä¿¡æ¯)\ngit reset --soft HEAD\n\n# å–æ¶ˆ commitã€add(é‡æ–°æäº¤ä»£ç å’Œ commit)\ngit reset HEAD\ngit reset --mixed HEAD\n\n# å–æ¶ˆ commitã€addã€å·¥ä½œåŒºä¿®æ”¹ (éœ€è¦å®Œå…¨é‡ç½®)\ngit reset --hard HEAD\n```\n\n## è®°å½•\n\n```bash\ngit reflog\ngit log\n```\n\n## åˆ é™¤\n\n```bash\nrm file.name\ngit rm file.name\ngit commit -m \"Del\"\n```\n\n## è¿œç¨‹æ“ä½œ\n\n```bash\ngit remote add origin git@github.com:ifyour/ifyour.github.io.git\n\n# ç¬¬ä¸€æ¬¡æ¨é€ï¼Œ-u(--set-upstream) æŒ‡å®šé»˜è®¤ä¸Šæ¸¸\ngit push -u origin master\ngit push origin master\n```\n\n## å…‹éš†\n\n```bash\ngit clone https://github.com/ifyour/ifyour.github.io.git path\ngit clone git@github.com:ifyour/ifyour.github.io.git path\n```\n\n## åˆ†æ”¯æ“ä½œ\n\n![image](https://user-images.githubusercontent.com/15377484/39952537-6b679758-55cb-11e8-9ff7-87440fcbb4d0.png)\n\n```bash\n# æŸ¥çœ‹å½“å‰åˆ†æ”¯\ngit branch\n\n# åˆ›å»ºåˆ†æ”¯\ngit branch dev\n\n# åˆ‡æ¢åˆ†æ”¯\ngit checkout dev\n\n# åˆ›å»ºå¹¶ checkout åˆ†æ”¯\ngit checkout -b dev\n\n# åˆå¹¶åˆ†æ”¯\ngit merge dev\n\n# åˆ é™¤åˆ†æ”¯\ngit branch -d dev\n```\n\n## æ ‡ç­¾\n\n```bash\ngit tag 0.1.1\ngit push origin --tags\n```\n\n## More\n\n- [Git - ç®€æ˜“æŒ‡å—](http://www.bootcss.com/p/git-guide/)\n","slug":"Git-æ“ä½œè¯¦ç»†æ€»ç»“","published":1,"updated":"2018-12-26T16:01:04.000Z","layout":"post","photos":[],"link":"","_id":"ck3v60jtk000kr9q9tydvk7vq","content":"<p>Git æ“ä½œè¯¦ç»†æ€»ç»“ï¼Œä»¥ä¾¿å›é¡¾å’ŒæŸ¥è¯¢ã€‚ç†è§£è¿™äº›æŒ‡ä»¤ï¼Œè§‰å¾—æœ€é‡è¦çš„æ˜¯ç†è§£ Git çš„å†…éƒ¨åŸç†ï¼Œæ¯”å¦‚ Git çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ï¼Œåˆ†æ¸…æ¥šå·¥ä½œåŒºã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“ï¼Œè¿˜æœ‰å°±æ˜¯ç†è§£ Git è·Ÿè¸ªå¹¶ç®¡ç†çš„æ˜¯ä¿®æ”¹ï¼Œè€Œéæ–‡ä»¶ã€‚</p>\n<a id=\"more\"></a>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/39952532-4c0c156e-55cb-11e8-8052-e62c448325fe.png\" alt=\"image\"></p>\n<h2 id=\"è®¾ç½®\"><a href=\"#è®¾ç½®\" class=\"headerlink\" title=\"è®¾ç½®\"></a>è®¾ç½®</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global user.name <span class=\"string\">\"Your Name\"</span></span><br><span class=\"line\">git config --global user.email <span class=\"string\">\"email@example.com\"</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"æäº¤\"><a href=\"#æäº¤\" class=\"headerlink\" title=\"æäº¤\"></a>æäº¤</h2><p>Git è¿½è¸ªçš„æ˜¯ä¿®æ”¹ï¼Œè€Œä¸æ˜¯æ–‡ä»¶ã€‚</p>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/39952534-5c10f236-55cb-11e8-81bf-c4d369d07054.png\" alt=\"image\"></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å°† â€œå½“å‰ä¿®æ”¹â€ ç§»åŠ¨åˆ°æš‚å­˜åŒº (stage)</span></span><br><span class=\"line\">git add filename.txt</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å°†æš‚å­˜åŒºä¿®æ”¹æäº¤</span></span><br><span class=\"line\">git commit -m <span class=\"string\">\"Add filename.txt.\"</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"çŠ¶æ€\"><a href=\"#çŠ¶æ€\" class=\"headerlink\" title=\"çŠ¶æ€\"></a>çŠ¶æ€</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git status</span><br><span class=\"line\">git diff</span><br></pre></td></tr></table></figure>\n<h2 id=\"å›é€€\"><a href=\"#å›é€€\" class=\"headerlink\" title=\"å›é€€\"></a>å›é€€</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æ”¾å¼ƒå·¥ä½œåŒºä¿®æ”¹</span></span><br><span class=\"line\">git checkout -- file.name</span><br><span class=\"line\">git checkout -- .</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å–æ¶ˆ commit(æ¯”å¦‚éœ€è¦é‡å†™ commit ä¿¡æ¯)</span></span><br><span class=\"line\">git reset --soft HEAD</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å–æ¶ˆ commitã€add(é‡æ–°æäº¤ä»£ç å’Œ commit)</span></span><br><span class=\"line\">git reset HEAD</span><br><span class=\"line\">git reset --mixed HEAD</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å–æ¶ˆ commitã€addã€å·¥ä½œåŒºä¿®æ”¹ (éœ€è¦å®Œå…¨é‡ç½®)</span></span><br><span class=\"line\">git reset --hard HEAD</span><br></pre></td></tr></table></figure>\n<h2 id=\"è®°å½•\"><a href=\"#è®°å½•\" class=\"headerlink\" title=\"è®°å½•\"></a>è®°å½•</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git reflog</span><br><span class=\"line\">git <span class=\"built_in\">log</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"åˆ é™¤\"><a href=\"#åˆ é™¤\" class=\"headerlink\" title=\"åˆ é™¤\"></a>åˆ é™¤</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm file.name</span><br><span class=\"line\">git rm file.name</span><br><span class=\"line\">git commit -m <span class=\"string\">\"Del\"</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"è¿œç¨‹æ“ä½œ\"><a href=\"#è¿œç¨‹æ“ä½œ\" class=\"headerlink\" title=\"è¿œç¨‹æ“ä½œ\"></a>è¿œç¨‹æ“ä½œ</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add origin git@github.com:ifyour/ifyour.github.io.git</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç¬¬ä¸€æ¬¡æ¨é€ï¼Œ-u(--set-upstream) æŒ‡å®šé»˜è®¤ä¸Šæ¸¸</span></span><br><span class=\"line\">git push -u origin master</span><br><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure>\n<h2 id=\"å…‹éš†\"><a href=\"#å…‹éš†\" class=\"headerlink\" title=\"å…‹éš†\"></a>å…‹éš†</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/ifyour/ifyour.github.io.git path</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> git@github.com:ifyour/ifyour.github.io.git path</span><br></pre></td></tr></table></figure>\n<h2 id=\"åˆ†æ”¯æ“ä½œ\"><a href=\"#åˆ†æ”¯æ“ä½œ\" class=\"headerlink\" title=\"åˆ†æ”¯æ“ä½œ\"></a>åˆ†æ”¯æ“ä½œ</h2><p><img src=\"https://user-images.githubusercontent.com/15377484/39952537-6b679758-55cb-11e8-9ff7-87440fcbb4d0.png\" alt=\"image\"></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹å½“å‰åˆ†æ”¯</span></span><br><span class=\"line\">git branch</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºåˆ†æ”¯</span></span><br><span class=\"line\">git branch dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ‡æ¢åˆ†æ”¯</span></span><br><span class=\"line\">git checkout dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå¹¶ checkout åˆ†æ”¯</span></span><br><span class=\"line\">git checkout -b dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆå¹¶åˆ†æ”¯</span></span><br><span class=\"line\">git merge dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ é™¤åˆ†æ”¯</span></span><br><span class=\"line\">git branch -d dev</span><br></pre></td></tr></table></figure>\n<h2 id=\"æ ‡ç­¾\"><a href=\"#æ ‡ç­¾\" class=\"headerlink\" title=\"æ ‡ç­¾\"></a>æ ‡ç­¾</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git tag 0.1.1</span><br><span class=\"line\">git push origin --tags</span><br></pre></td></tr></table></figure>\n<h2 id=\"More\"><a href=\"#More\" class=\"headerlink\" title=\"More\"></a>More</h2><ul>\n<li><a href=\"http://www.bootcss.com/p/git-guide/\" target=\"_blank\" rel=\"noopener\">Git - ç®€æ˜“æŒ‡å—</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>Git æ“ä½œè¯¦ç»†æ€»ç»“ï¼Œä»¥ä¾¿å›é¡¾å’ŒæŸ¥è¯¢ã€‚ç†è§£è¿™äº›æŒ‡ä»¤ï¼Œè§‰å¾—æœ€é‡è¦çš„æ˜¯ç†è§£ Git çš„å†…éƒ¨åŸç†ï¼Œæ¯”å¦‚ Git çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ï¼Œåˆ†æ¸…æ¥šå·¥ä½œåŒºã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“ï¼Œè¿˜æœ‰å°±æ˜¯ç†è§£ Git è·Ÿè¸ªå¹¶ç®¡ç†çš„æ˜¯ä¿®æ”¹ï¼Œè€Œéæ–‡ä»¶ã€‚</p>","more":"<p><img src=\"https://user-images.githubusercontent.com/15377484/39952532-4c0c156e-55cb-11e8-8052-e62c448325fe.png\" alt=\"image\"></p>\n<h2 id=\"è®¾ç½®\"><a href=\"#è®¾ç½®\" class=\"headerlink\" title=\"è®¾ç½®\"></a>è®¾ç½®</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global user.name <span class=\"string\">\"Your Name\"</span></span><br><span class=\"line\">git config --global user.email <span class=\"string\">\"email@example.com\"</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"æäº¤\"><a href=\"#æäº¤\" class=\"headerlink\" title=\"æäº¤\"></a>æäº¤</h2><p>Git è¿½è¸ªçš„æ˜¯ä¿®æ”¹ï¼Œè€Œä¸æ˜¯æ–‡ä»¶ã€‚</p>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/39952534-5c10f236-55cb-11e8-81bf-c4d369d07054.png\" alt=\"image\"></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å°† â€œå½“å‰ä¿®æ”¹â€ ç§»åŠ¨åˆ°æš‚å­˜åŒº (stage)</span></span><br><span class=\"line\">git add filename.txt</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å°†æš‚å­˜åŒºä¿®æ”¹æäº¤</span></span><br><span class=\"line\">git commit -m <span class=\"string\">\"Add filename.txt.\"</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"çŠ¶æ€\"><a href=\"#çŠ¶æ€\" class=\"headerlink\" title=\"çŠ¶æ€\"></a>çŠ¶æ€</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git status</span><br><span class=\"line\">git diff</span><br></pre></td></tr></table></figure>\n<h2 id=\"å›é€€\"><a href=\"#å›é€€\" class=\"headerlink\" title=\"å›é€€\"></a>å›é€€</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æ”¾å¼ƒå·¥ä½œåŒºä¿®æ”¹</span></span><br><span class=\"line\">git checkout -- file.name</span><br><span class=\"line\">git checkout -- .</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å–æ¶ˆ commit(æ¯”å¦‚éœ€è¦é‡å†™ commit ä¿¡æ¯)</span></span><br><span class=\"line\">git reset --soft HEAD</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å–æ¶ˆ commitã€add(é‡æ–°æäº¤ä»£ç å’Œ commit)</span></span><br><span class=\"line\">git reset HEAD</span><br><span class=\"line\">git reset --mixed HEAD</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># å–æ¶ˆ commitã€addã€å·¥ä½œåŒºä¿®æ”¹ (éœ€è¦å®Œå…¨é‡ç½®)</span></span><br><span class=\"line\">git reset --hard HEAD</span><br></pre></td></tr></table></figure>\n<h2 id=\"è®°å½•\"><a href=\"#è®°å½•\" class=\"headerlink\" title=\"è®°å½•\"></a>è®°å½•</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git reflog</span><br><span class=\"line\">git <span class=\"built_in\">log</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"åˆ é™¤\"><a href=\"#åˆ é™¤\" class=\"headerlink\" title=\"åˆ é™¤\"></a>åˆ é™¤</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm file.name</span><br><span class=\"line\">git rm file.name</span><br><span class=\"line\">git commit -m <span class=\"string\">\"Del\"</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"è¿œç¨‹æ“ä½œ\"><a href=\"#è¿œç¨‹æ“ä½œ\" class=\"headerlink\" title=\"è¿œç¨‹æ“ä½œ\"></a>è¿œç¨‹æ“ä½œ</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add origin git@github.com:ifyour/ifyour.github.io.git</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç¬¬ä¸€æ¬¡æ¨é€ï¼Œ-u(--set-upstream) æŒ‡å®šé»˜è®¤ä¸Šæ¸¸</span></span><br><span class=\"line\">git push -u origin master</span><br><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure>\n<h2 id=\"å…‹éš†\"><a href=\"#å…‹éš†\" class=\"headerlink\" title=\"å…‹éš†\"></a>å…‹éš†</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/ifyour/ifyour.github.io.git path</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> git@github.com:ifyour/ifyour.github.io.git path</span><br></pre></td></tr></table></figure>\n<h2 id=\"åˆ†æ”¯æ“ä½œ\"><a href=\"#åˆ†æ”¯æ“ä½œ\" class=\"headerlink\" title=\"åˆ†æ”¯æ“ä½œ\"></a>åˆ†æ”¯æ“ä½œ</h2><p><img src=\"https://user-images.githubusercontent.com/15377484/39952537-6b679758-55cb-11e8-9ff7-87440fcbb4d0.png\" alt=\"image\"></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æŸ¥çœ‹å½“å‰åˆ†æ”¯</span></span><br><span class=\"line\">git branch</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºåˆ†æ”¯</span></span><br><span class=\"line\">git branch dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ‡æ¢åˆ†æ”¯</span></span><br><span class=\"line\">git checkout dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ›å»ºå¹¶ checkout åˆ†æ”¯</span></span><br><span class=\"line\">git checkout -b dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆå¹¶åˆ†æ”¯</span></span><br><span class=\"line\">git merge dev</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># åˆ é™¤åˆ†æ”¯</span></span><br><span class=\"line\">git branch -d dev</span><br></pre></td></tr></table></figure>\n<h2 id=\"æ ‡ç­¾\"><a href=\"#æ ‡ç­¾\" class=\"headerlink\" title=\"æ ‡ç­¾\"></a>æ ‡ç­¾</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git tag 0.1.1</span><br><span class=\"line\">git push origin --tags</span><br></pre></td></tr></table></figure>\n<h2 id=\"More\"><a href=\"#More\" class=\"headerlink\" title=\"More\"></a>More</h2><ul>\n<li><a href=\"http://www.bootcss.com/p/git-guide/\" target=\"_blank\" rel=\"noopener\">Git - ç®€æ˜“æŒ‡å—</a></li>\n</ul>"},{"title":"ä»£ç æ´ç™–å…»æˆæŒ‡å—","comments":1,"date":"2018-12-31T12:45:31.000Z","from":null,"_content":"\nè¿™ç¯‡æ–‡ç« æˆ‘ä»å‡ ä¸ªæ–¹é¢æ¥ä»‹ç»æˆ‘æ˜¯å¦‚ä½•é…ç½®å¼€å‘ç¯å¢ƒçš„ï¼Œå°½å¯èƒ½ä½¿ä»£ç ç¼–å†™é£æ ¼ç»Ÿä¸€ã€‚å…¶å®ä¸å…‰æ˜¯ä»£ç ï¼ŒåŒ…æ‹¬æ—¥å¸¸æ–‡å­—ï¼Œéƒ½æœ‰å¾ˆå¤šè§„èŒƒã€‚æ¯”å¦‚æœ€å¸¸è§çš„ä¸­è‹±æ–‡ä¹‹é—´æ·»åŠ ç©ºæ ¼ï¼Œå¯èƒ½å¾ˆå¤šäººå¹¶æ²¡æœ‰åœ¨æ„ã€‚ä½†æ˜¯çœ‹åˆ°åˆ«äººçš„æ–‡ç« é‡Œå‡ºç°è¿™æ ·çš„é—®é¢˜ï¼Œè‚¯å®šæ˜¯è¦å‡å°è±¡åˆ†çš„ã€‚\n\n<!-- more -->\n\nå› ä¸ºæˆ‘æ—¥å¸¸ä½¿ç”¨ **VSCode**ï¼Œæ‰€ä»¥è¿™é‡Œç›¸å…³é…ç½®éƒ½ä»¥è¿™ä¸ªå±•å¼€ã€‚\n\n### æ‰©å±•\n\n- [EditorConfig for VS Code](https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig)\n- [ESLint](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint)\n- [Prettier - Code formatter](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode)\n- [VSCode-Pangu](https://marketplace.visualstudio.com/items?itemName=baurine.vscode-pangu)\n- [Code Spell Checker](https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker)\n- [Indent-Rainbow](https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow)\n\nä¸‹é¢æ¥æˆ‘ç®€å•ä»‹ç»ä¸€ä¸‹æ¯ä¸ªæ’ä»¶çš„åŠŸèƒ½ã€‚\n\n- EditorConfigï¼šç”Ÿæˆ `.editorconfig` é…ç½®æ–‡ä»¶ï¼Œè§„å®šå½“å‰ç¼–è¾‘å™¨çš„ä¸€äº›è®¾å®šã€‚\n- ESLintï¼šé›†æˆ Eslint åˆ° VSCodeï¼Œå…·ä½“çœ‹ Eslint çš„å®˜æ–¹æ–‡æ¡£ã€‚\n- Prettierï¼šEslint ä¾§é‡äºé™æ€æ ¡éªŒï¼Œè€Œ Prettier åˆ™è´Ÿè´£æŒ‰ç…§ä¸€äº›è§„åˆ™ç¾åŒ–ä»£ç ã€‚\n- VSCode-Panguï¼šè‡ªåŠ¨åœ¨ä¸­è‹±æ–‡ä¹‹é—´æ·»åŠ ç©ºæ ¼ã€‚\n- Code Spell Checkerï¼šå•è¯æ‹¼å†™æ£€æŸ¥ã€‚\n- Indent-Rainbowï¼šå½©è™¹ç¼©è¿›ï¼Œç¼©è¿›ä¸è§„èŒƒæ—¶ä¼šæ ‡çº¢æç¤ºã€‚\n\n### åå¥½\n\n#### VSCode Settings\n\nå®‰è£…æ’ä»¶ï¼šESLintã€Prettier åï¼Œåœ¨ settings é…ç½®ä¸‹é¢çš„é€‰é¡¹ï¼Œå³å¯å®ç°ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ï¼š\n\n```js\n{\n  // ...\n\n  // å¼€å¯ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œè°ƒç”¨ Prettier æ—¶è‡ªåŠ¨ eslint -fix\n  \"editor.formatOnSave\": true,\n  // ä¸éœ€è¦ fix äº†ï¼ŒPrettier ä¼šè‡ªåŠ¨ fix\n  \"eslint.autoFixOnSave\": false,\n  // å‘Šè¯‰ Prettier ä½¿ç”¨ `prettier-eslint` æ¥ä»£æ›¿ Prettier\n  \"prettier.eslintIntegration\": true,\n\n  //...\n}\n```\n\n### Lint\n\n#### ä½¿ç”¨ Prettier æŒ‰ç…§ Eslint ç¾åŒ–ä»£ç \n\n- å®‰è£… `prettier-eslint-cli`\n\n```bash\nnpm i prettier-eslint-cli --save-dev\n```\n\n- é…ç½® `prettier`ï¼Œåœ¨ `package.json` æ·»åŠ \n\n```json\n{\n  \"scripts\": {\n    \"lint\": \"eslint *.js\",\n    \"format\": \"prettier-eslint --write *.js\"\n  },\n  \"eslintConfig\": {\n    \"extends\": \"some-config\"\n  },\n  \"prettier\": {\n    \"singleQuote\": true,\n    \"semi\": false\n  }\n}\n```\n\nç»è¿‡ä¸Šé¢é…ç½®åï¼Œç¼–è¾‘å™¨å°±å¯ä»¥åœ¨ä¿å­˜æ–‡ä»¶æ—¶ï¼Œè‡ªåŠ¨æŒ‰ç…§ Eslint æ ¼å¼åŒ–ã€‚\n\n#### ä½¿ç”¨ Standard è§„èŒƒ\n\n[Standard](https://github.com/standard) å…¶å®å¹¶ä¸æ˜¯æ ‡å‡†ç»„ç»‡å‡ºçš„è§„èŒƒï¼Œä½†æ˜¯è¡Œä¸šå†…ä½¿ç”¨çš„æ¯”è¾ƒå¤šã€‚çœ‹æ¥çœ‹å»ï¼Œå¥½åƒå„ç§å„æ ·çš„çº¦å®šéƒ½æ²¡æœ‰ä¸€ä¸ªæ ‡å‡†ã€‚æˆ‘çœ‹äº†ä¸€ä¸‹ï¼Œç›®å‰æ¥è¯´ `standard` è¿˜ç®—æœ‰å½±å“åŠ›ã€‚æ‰“ç®—ä»¥ååœ¨ä¸ªäººé¡¹ç›®ä¸­å…¨éƒ¨é‡‡ç”¨è¿™ç§é£æ ¼ï¼Œç„¶åæŠŠå‰©ä¸‹çš„æ—¶é—´å»åšç‚¹æœ‰æ„ä¹‰çš„äº‹ã€‚é…ç½®ä¸€å † `.eslintrc` `.jscsrc` `.jshintrc` çœŸçš„å¾ˆå¤´ç–¼ã€‚\n\nâ˜ï¸ **åˆå§‹åŒ–æ–°é¡¹ç›®**\n\n- å®‰è£…ä¾èµ–\n\n```bash\nnpm install eslint \\\n    eslint-config-standard \\\n    eslint-plugin-standard \\\n    eslint-plugin-promise \\\n    eslint-plugin-import \\\n    eslint-plugin-node \\\n    eslint-plugin-markdown \\\n    --save-dev\n```\n\n- æ·»åŠ  `.eslintrc`\n\n```json\n{\n  \"extends\": \"standard\"\n}\n```\n\nOKï¼Œç°åœ¨è®© Eslint æŒ‰ç…§ standard çš„è§„åˆ™æ¥çº¦æŸäº†ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¦å¤–çš„è§„åˆ™æ¥è¦†ç›–ã€‚\n\nâ˜ï¸ **å…¨å±€ä½¿ç”¨**\n\n```bash\n# å…¨å±€å®‰è£…\n$ npm i standard -g\n\n# æ ¡éªŒç›®å½•ä¸‹ *.js/*.jsx\n$ standard\n\n# ä¿®å¤\n$ standard --fix\n```\n\n### æ€»ç»“\n\nä»¥åçš„æ–°é¡¹ç›®æˆ‘ä¼šé‡‡ç”¨ Standard ä½œä¸ºçº¦æŸè§„èŒƒï¼Œå¯¹äºå·²æœ‰é¡¹ç›®æˆ‘ä½¿ç”¨ Prettier è‡ªåŠ¨æŒ‰ç…§ Eslint è§„åˆ™è‡ªåŠ¨ç¾åŒ–ï¼Œæ—¥å¸¸ä¸€äº›ä»£ç ç‰‡æ®µä½¿ç”¨ Standard å…¨å±€å‘½ä»¤ï¼Œç®€å•å®ç”¨ã€‚\n\nå‚è€ƒä»¥ä¸‹æ–‡æ¡£ã€‚\n\n- [standard/standard @Github](https://github.com/standard/standard/blob/master/docs/README-zhcn.md)\n- [standard/eslint-config-standard @Github](https://github.com/standard/eslint-config-standard)\n- [Standard Style Demo @Github](https://github.com/expressjs/body-parser)\n- [ESLint @ä¸­æ–‡å®˜ç½‘](https://cn.eslint.org/)\n- [ç”¨ ESLint å’Œ Prettier å†™å‡ºé«˜è´¨é‡ä»£ç  @EGOIST](https://egoist.moe/2017/12/11/write-better-code-with-eslint-and-prettier/)\n\n### é™„ï¼šEslint è§„åˆ™\n\n#### å…³é—­æ ¡éªŒ\n\n```js\n// å…³é—­å½“å‰æ–‡ä»¶\n/* eslint-disable */\n\n// å…³é—­å½“å‰è¡Œæ ¡éªŒ\nlet a = 1; // eslint-disable-line\n\n// å…³é—­ä¸‹ä¸€è¡Œæ ¡éªŒ\n// eslint-disable-next-line\nlet b = 2;\n```\n\n#### è¯¦ç»†è§„åˆ™\n\n- 0ï¼šå…³é—­\n- 1ï¼šè­¦å‘Šï¼Œä»…ç»™å‡ºè­¦å‘Š\n- 2ï¼šé”™è¯¯ï¼Œåœæ­¢æ‰§è¡Œ\n\n```js\n{\n    // ç¯å¢ƒå®šä¹‰äº†é¢„å®šä¹‰çš„å…¨å±€å˜é‡ã€‚\n    \"env\": {\n        // ç¯å¢ƒå®šä¹‰äº†é¢„å®šä¹‰çš„å…¨å±€å˜é‡ã€‚æ›´å¤šåœ¨å®˜ç½‘æŸ¥çœ‹\n        \"browser\": true,\n        \"node\": true,\n        \"commonjs\": true,\n        \"amd\": true,\n        \"es6\": true,\n        \"mocha\": true\n    },\n    // JavaScript è¯­è¨€é€‰é¡¹\n    \"parserOptions\": {\n        // ECMAScript ç‰ˆæœ¬\n        \"ecmaVersion\": 6,\n        \"sourceType\": \"module\", // è®¾ç½®ä¸º \"script\" (é»˜è®¤) æˆ– \"module\"ï¼ˆå¦‚æœä½ çš„ä»£ç æ˜¯ ECMAScript æ¨¡å—)ã€‚\n        // æƒ³ä½¿ç”¨çš„é¢å¤–çš„è¯­è¨€ç‰¹æ€§:\n        \"ecmaFeatures\": {\n            // å…è®¸åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ä½¿ç”¨ return è¯­å¥\n            \"globalReturn\": true,\n            // impliedStric\n            \"impliedStrict\": true,\n            // å¯ç”¨ JSX\n            \"jsx\": true,\n            \"modules\": true\n        }\n    },\n    // è®© eslint æ”¯æŒ JSX start\n    \"plugins\": [\n        \"react\"\n    ],\n    \"extends\": [\n        \"eslint:recommended\",\n        \"plugin:react/recommended\"\n    ],\n    // è®© eslint æ”¯æŒ JSX end\n\n    \"rules\": {\n\n        ////////////////\n        // å¯èƒ½çš„é”™è¯¯ //\n        ////////////////\n\n        // ç¦æ­¢æ¡ä»¶è¡¨è¾¾å¼ä¸­å‡ºç°èµ‹å€¼æ“ä½œç¬¦\n        \"no-cond-assign\": 2,\n        // ç¦ç”¨ console\n        \"no-console\": 0,\n        // ç¦æ­¢åœ¨æ¡ä»¶ä¸­ä½¿ç”¨å¸¸é‡è¡¨è¾¾å¼\n        // if (false) {\n        // doSomethingUnfinished();\n        // } //cuowu\n        \"no-constant-condition\": 2,\n        // ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ§åˆ¶å­—ç¬¦ ï¼šnew RegExp(\"\\x1f\")\n        \"no-control-regex\": 2,\n        // æ•°ç»„å’Œå¯¹è±¡é”®å€¼å¯¹æœ€åä¸€ä¸ªé€—å·ï¼Œ never å‚æ•°ï¼šä¸èƒ½å¸¦æœ«å°¾çš„é€—å·, always å‚æ•°ï¼šå¿…é¡»å¸¦æœ«å°¾çš„é€—å·ï¼Œ\n        // always-multilineï¼šå¤šè¡Œæ¨¡å¼å¿…é¡»å¸¦é€—å·ï¼Œå•è¡Œæ¨¡å¼ä¸èƒ½å¸¦é€—å·\n        \"comma-dangle\": [1, \"never\"],\n        // ç¦ç”¨ debugger\n        \"no-debugger\": 2,\n        // ç¦æ­¢ function å®šä¹‰ä¸­å‡ºç°é‡åå‚æ•°\n        \"no-dupe-args\": 2,\n        // ç¦æ­¢å¯¹è±¡å­—é¢é‡ä¸­å‡ºç°é‡å¤çš„ key\n        \"no-dupe-keys\": 2,\n        // ç¦æ­¢é‡å¤çš„ case æ ‡ç­¾\n        \"no-duplicate-case\": 2,\n        // ç¦æ­¢ç©ºè¯­å¥å—\n        \"no-empty\": 2,\n        // ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨ç©ºå­—ç¬¦é›† (/^abc[]/)\n        \"no-empty-character-class\": 2,\n        // ç¦æ­¢å¯¹ catch å­å¥çš„å‚æ•°é‡æ–°èµ‹å€¼\n        \"no-ex-assign\": 2,\n        // ç¦æ­¢ä¸å¿…è¦çš„å¸ƒå°”è½¬æ¢\n        \"no-extra-boolean-cast\": 2,\n        // ç¦æ­¢ä¸å¿…è¦çš„æ‹¬å· //(a * b) + c;// æŠ¥é”™\n        \"no-extra-parens\": 0,\n        // ç¦æ­¢ä¸å¿…è¦çš„åˆ†å·\n        \"no-extra-semi\": 2,\n        // ç¦æ­¢å¯¹ function å£°æ˜é‡æ–°èµ‹å€¼\n        \"no-func-assign\": 2,\n        // ç¦æ­¢åœ¨åµŒå¥—çš„å—ä¸­å‡ºç° function æˆ– var å£°æ˜\n        \"no-inner-declarations\": [2, \"functions\"],\n        // ç¦æ­¢ RegExp æ„é€ å‡½æ•°ä¸­æ— æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²\n        \"no-invalid-regexp\": 2,\n        // ç¦æ­¢åœ¨å­—ç¬¦ä¸²å’Œæ³¨é‡Šä¹‹å¤–ä¸è§„åˆ™çš„ç©ºç™½\n        \"no-irregular-whitespace\": 2,\n        // ç¦æ­¢åœ¨ in è¡¨è¾¾å¼ä¸­å‡ºç°å¦å®šçš„å·¦æ“ä½œæ•°\n        \"no-negated-in-lhs\": 2,\n        // ç¦æ­¢æŠŠå…¨å±€å¯¹è±¡ (Math å’Œ JSON) ä½œä¸ºå‡½æ•°è°ƒç”¨ é”™è¯¯ï¼švar math = Math();\n        \"no-obj-calls\": 2,\n        // ç¦æ­¢ç›´æ¥ä½¿ç”¨ Object.prototypes çš„å†…ç½®å±æ€§\n        \"no-prototype-builtins\": 0,\n        // ç¦æ­¢æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡ä¸­å‡ºç°å¤šä¸ªç©ºæ ¼\n        \"no-regex-spaces\": 2,\n        // ç¦ç”¨ç¨€ç–æ•°ç»„\n        \"no-sparse-arrays\": 2,\n        // ç¦æ­¢å‡ºç°ä»¤äººå›°æƒ‘çš„å¤šè¡Œè¡¨è¾¾å¼\n        \"no-unexpected-multiline\": 2,\n        // ç¦æ­¢åœ¨ returnã€throwã€continue å’Œ break è¯­å¥ä¹‹åå‡ºç°ä¸å¯è¾¾ä»£ç \n        \"no-unreachable\": 2,\n        // è¦æ±‚ä½¿ç”¨ isNaN() æ£€æŸ¥ NaN\n        \"use-isnan\": 2,\n        // å¼ºåˆ¶ä½¿ç”¨æœ‰æ•ˆçš„ JSDoc æ³¨é‡Š\n        \"valid-jsdoc\": 1,\n        // å¼ºåˆ¶ typeof è¡¨è¾¾å¼ä¸æœ‰æ•ˆçš„å­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒ\n        // typeof foo === \"undefimed\" é”™è¯¯\n        \"valid-typeof\": 2,\n\n\n        //////////////\n        // æœ€ä½³å®è·µ //\n        //////////////\n\n        // å®šä¹‰å¯¹è±¡çš„ set å­˜å–å™¨å±æ€§æ—¶ï¼Œå¼ºåˆ¶å®šä¹‰ get\n        \"accessor-pairs\": 2,\n        // å¼ºåˆ¶æ•°ç»„æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸­æœ‰ return è¯­å¥\n        \"array-callback-return\": 0,\n        // å¼ºåˆ¶æŠŠå˜é‡çš„ä½¿ç”¨é™åˆ¶åœ¨å…¶å®šä¹‰çš„ä½œç”¨åŸŸèŒƒå›´å†…\n        \"block-scoped-var\": 0,\n        // é™åˆ¶åœˆå¤æ‚åº¦ï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼ if else èƒ½è¿ç»­æ¥å¤šå°‘ä¸ª\n        \"complexity\": [2, 9],\n        // è¦æ±‚ return è¯­å¥è¦ä¹ˆæ€»æ˜¯æŒ‡å®šè¿”å›çš„å€¼ï¼Œè¦ä¹ˆä¸æŒ‡å®š\n        \"consistent-return\": 0,\n        // å¼ºåˆ¶æ‰€æœ‰æ§åˆ¶è¯­å¥ä½¿ç”¨ä¸€è‡´çš„æ‹¬å·é£æ ¼\n        \"curly\": [2, \"all\"],\n        // switch è¯­å¥å¼ºåˆ¶ default åˆ†æ”¯ï¼Œä¹Ÿå¯æ·»åŠ  // no default æ³¨é‡Šå–æ¶ˆæ­¤æ¬¡è­¦å‘Š\n        \"default-case\": 2,\n        // å¼ºåˆ¶ object.key ä¸­ . çš„ä½ç½®ï¼Œå‚æ•°:\n        // propertyï¼Œ'.'å·åº”ä¸å±æ€§åœ¨åŒä¸€è¡Œ\n        // object, '.' å·åº”ä¸å¯¹è±¡ååœ¨åŒä¸€è¡Œ\n        \"dot-location\": [2, \"property\"],\n        // å¼ºåˆ¶ä½¿ç”¨. å·å–å±æ€§\n        // å‚æ•°ï¼š allowKeywordsï¼štrue ä½¿ç”¨ä¿ç•™å­—åšå±æ€§åæ—¶ï¼Œåªèƒ½ä½¿ç”¨. æ–¹å¼å–å±æ€§\n        // false ä½¿ç”¨ä¿ç•™å­—åšå±æ€§åæ—¶, åªèƒ½ä½¿ç”¨ [] æ–¹å¼å–å±æ€§ e.g [2, {\"allowKeywords\": false}]\n        // allowPattern: å½“å±æ€§ååŒ¹é…æä¾›çš„æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œå…è®¸ä½¿ç”¨ [] æ–¹å¼å–å€¼, å¦åˆ™åªèƒ½ç”¨. å·å–å€¼ e.g [2, {\"allowPattern\": \"^[a-z]+(_[a-z]+)+$\"}]\n        \"dot-notation\": [2, {\n            \"allowKeywords\": false\n        }],\n        // ä½¿ç”¨ === æ›¿ä»£ == allow-null å…è®¸ null å’Œ undefined==\n        \"eqeqeq\": [2, \"allow-null\"],\n        // è¦æ±‚ for-in å¾ªç¯ä¸­æœ‰ä¸€ä¸ª if è¯­å¥\n        \"guard-for-in\": 2,\n        // ç¦ç”¨ alertã€confirm å’Œ prompt\n        \"no-alert\": 0,\n        // ç¦ç”¨ arguments.caller æˆ– arguments.callee\n        \"no-caller\": 2,\n        // ä¸å…è®¸åœ¨ case å­å¥ä¸­ä½¿ç”¨è¯æ³•å£°æ˜\n        \"no-case-declarations\": 2,\n        // ç¦æ­¢é™¤æ³•æ“ä½œç¬¦æ˜¾å¼çš„å‡ºç°åœ¨æ­£åˆ™è¡¨è¾¾å¼å¼€å§‹çš„ä½ç½®\n        \"no-div-regex\": 2,\n        // ç¦æ­¢ if è¯­å¥ä¸­æœ‰ return ä¹‹åæœ‰ else\n        \"no-else-return\": 0,\n        // ç¦æ­¢å‡ºç°ç©ºå‡½æ•°. å¦‚æœä¸€ä¸ªå‡½æ•°åŒ…å«äº†ä¸€æ¡æ³¨é‡Šï¼Œå®ƒå°†ä¸ä¼šè¢«è®¤ä¸ºæœ‰é—®é¢˜ã€‚\n        \"no-empty-function\": 2,\n        // ç¦æ­¢ä½¿ç”¨ç©ºè§£æ„æ¨¡å¼ no-empty-pattern\n        \"no-empty-pattern\": 2,\n        // ç¦æ­¢åœ¨æ²¡æœ‰ç±»å‹æ£€æŸ¥æ“ä½œç¬¦çš„æƒ…å†µä¸‹ä¸ null è¿›è¡Œæ¯”è¾ƒ\n        \"no-eq-null\": 1,\n        // ç¦ç”¨ eval()\n        \"no-eval\": 2,\n        // ç¦æ­¢æ‰©å±•åŸç”Ÿç±»å‹\n        \"no-extend-native\": 2,\n        // ç¦æ­¢ä¸å¿…è¦çš„ .bind() è°ƒç”¨\n        \"no-extra-bind\": 2,\n        // ç¦ç”¨ä¸å¿…è¦çš„æ ‡ç­¾\n        \"no-extra-label:\": 0,\n        // ç¦æ­¢ case è¯­å¥è½ç©º\n        \"no-fallthrough\": 2,\n        // ç¦æ­¢æ•°å­—å­—é¢é‡ä¸­ä½¿ç”¨å‰å¯¼å’Œæœ«å°¾å°æ•°ç‚¹\n        \"no-floating-decimal\": 2,\n        // ç¦æ­¢ä½¿ç”¨çŸ­ç¬¦å·è¿›è¡Œç±»å‹è½¬æ¢ (!!fOO)\n        \"no-implicit-coercion\": 0,\n        // ç¦æ­¢åœ¨å…¨å±€èŒƒå›´å†…ä½¿ç”¨ var å’Œå‘½åçš„ function å£°æ˜\n        \"no-implicit-globals\": 1,\n        // ç¦æ­¢ä½¿ç”¨ç±»ä¼¼ eval() çš„æ–¹æ³•\n        \"no-implied-eval\": 2,\n        // ç¦æ­¢ this å…³é”®å­—å‡ºç°åœ¨ç±»å’Œç±»å¯¹è±¡ä¹‹å¤–\n        \"no-invalid-this\": 0,\n        // ç¦ç”¨ __iterator__ å±æ€§\n        \"no-iterator\": 2,\n        // ç¦ç”¨æ ‡ç­¾è¯­å¥\n        \"no-labels\": 2,\n        // ç¦ç”¨ä¸å¿…è¦çš„åµŒå¥—å—\n        \"no-lone-blocks\": 2,\n        // ç¦æ­¢åœ¨å¾ªç¯ä¸­å‡ºç° function å£°æ˜å’Œè¡¨è¾¾å¼\n        \"no-loop-func\": 1,\n        // ç¦ç”¨é­”æœ¯æ•°å­— (3.14 ä»€ä¹ˆçš„ç”¨å¸¸é‡ä»£æ›¿)\n        \"no-magic-numbers\": [1, {\n            \"ignore\": [0, -1, 1]\n        }],\n        // ç¦æ­¢ä½¿ç”¨å¤šä¸ªç©ºæ ¼\n        \"no-multi-spaces\": 2,\n        // ç¦æ­¢ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²ï¼Œåœ¨ JavaScript ä¸­ï¼Œå¯ä»¥åœ¨æ–°è¡Œä¹‹å‰ä½¿ç”¨æ–œçº¿åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²\n        \"no-multi-str\": 2,\n        // ç¦æ­¢å¯¹åŸç”Ÿå¯¹è±¡èµ‹å€¼\n        \"no-native-reassign\": 2,\n        // ç¦æ­¢åœ¨éèµ‹å€¼æˆ–æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ new æ“ä½œç¬¦\n        \"no-new\": 2,\n        // ç¦æ­¢å¯¹ Function å¯¹è±¡ä½¿ç”¨ new æ“ä½œç¬¦\n        \"no-new-func\": 0,\n        // ç¦æ­¢å¯¹ Stringï¼ŒNumber å’Œ Boolean ä½¿ç”¨ new æ“ä½œç¬¦\n        \"no-new-wrappers\": 2,\n        // ç¦ç”¨å…«è¿›åˆ¶å­—é¢é‡\n        \"no-octal\": 2,\n        // ç¦æ­¢åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨å…«è¿›åˆ¶è½¬ä¹‰åºåˆ—\n        \"no-octal-escape\": 2,\n        // ä¸å…è®¸å¯¹ function çš„å‚æ•°è¿›è¡Œé‡æ–°èµ‹å€¼\n        \"no-param-reassign\": 0,\n        // ç¦ç”¨ __proto__ å±æ€§\n        \"no-proto\": 2,\n        // ç¦æ­¢ä½¿ç”¨ var å¤šæ¬¡å£°æ˜åŒä¸€å˜é‡\n        \"no-redeclare\": 2,\n        // ç¦ç”¨æŒ‡å®šçš„é€šè¿‡ require åŠ è½½çš„æ¨¡å—\n        \"no-return-assign\": 0,\n        // ç¦æ­¢ä½¿ç”¨ javascript: url\n        \"no-script-url\": 0,\n        // ç¦æ­¢è‡ªæˆ‘èµ‹å€¼\n        \"no-self-assign\": 2,\n        // ç¦æ­¢è‡ªèº«æ¯”è¾ƒ\n        \"no-self-compare\": 2,\n        // ç¦ç”¨é€—å·æ“ä½œç¬¦\n        \"no-sequences\": 2,\n        // ç¦æ­¢æŠ›å‡ºéå¼‚å¸¸å­—é¢é‡\n        \"no-throw-literal\": 2,\n        // ç¦ç”¨ä¸€æˆä¸å˜çš„å¾ªç¯æ¡ä»¶\n        \"no-unmodified-loop-condition\": 2,\n        // ç¦æ­¢å‡ºç°æœªä½¿ç”¨è¿‡çš„è¡¨è¾¾å¼\n        \"no-unused-expressions\": 0,\n        // ç¦ç”¨æœªä½¿ç”¨è¿‡çš„æ ‡ç­¾\n        \"no-unused-labels\": 2,\n        // ç¦æ­¢ä¸å¿…è¦çš„ .call() å’Œ .apply()\n        \"no-useless-call\": 2,\n        // ç¦æ­¢ä¸å¿…è¦çš„å­—ç¬¦ä¸²å­—é¢é‡æˆ–æ¨¡æ¿å­—é¢é‡çš„è¿æ¥\n        \"no-useless-concat\": 2,\n        // ç¦ç”¨ä¸å¿…è¦çš„è½¬ä¹‰å­—ç¬¦\n        \"no-useless-escape\": 0,\n        // ç¦ç”¨ void æ“ä½œç¬¦\n        \"no-void\": 0,\n        // ç¦æ­¢åœ¨æ³¨é‡Šä¸­ä½¿ç”¨ç‰¹å®šçš„è­¦å‘Šæœ¯è¯­\n        \"no-warning-comments\": 0,\n        // ç¦ç”¨ with è¯­å¥\n        \"no-with\": 2,\n        // å¼ºåˆ¶åœ¨ parseInt() ä½¿ç”¨åŸºæ•°å‚æ•°\n        \"radix\": 2,\n        // è¦æ±‚æ‰€æœ‰çš„ var å£°æ˜å‡ºç°åœ¨å®ƒä»¬æ‰€åœ¨çš„ä½œç”¨åŸŸé¡¶éƒ¨\n        \"vars-on-top\": 0,\n        // è¦æ±‚ IIFE ä½¿ç”¨æ‹¬å·æ‹¬èµ·æ¥\n        \"wrap-iife\": [2, \"any\"],\n        // è¦æ±‚æˆ–ç¦æ­¢ â€œYodaâ€ æ¡ä»¶\n        \"yoda\": [2, \"never\"],\n        // è¦æ±‚æˆ–ç¦æ­¢ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼æŒ‡ä»¤\n        \"strict\": 0,\n\n\n        //////////////\n        // å˜é‡å£°æ˜ //\n        //////////////\n\n        // è¦æ±‚æˆ–ç¦æ­¢ var å£°æ˜ä¸­çš„åˆå§‹åŒ– (åˆå€¼)\n        \"init-declarations\": 0,\n        // ä¸å…è®¸ catch å­å¥çš„å‚æ•°ä¸å¤–å±‚ä½œç”¨åŸŸä¸­çš„å˜é‡åŒå\n        \"no-catch-shadow\": 0,\n        // ç¦æ­¢åˆ é™¤å˜é‡\n        \"no-delete-var\": 2,\n        // ä¸å…è®¸æ ‡ç­¾ä¸å˜é‡åŒå\n        \"no-label-var\": 2,\n        // ç¦ç”¨ç‰¹å®šçš„å…¨å±€å˜é‡\n        \"no-restricted-globals\": 0,\n        // ç¦æ­¢ var å£°æ˜ ä¸å¤–å±‚ä½œç”¨åŸŸçš„å˜é‡åŒå\n        \"no-shadow\": 0,\n        // ç¦æ­¢è¦†ç›–å—é™åˆ¶çš„æ ‡è¯†ç¬¦\n        \"no-shadow-restricted-names\": 2,\n        // ç¦ç”¨æœªå£°æ˜çš„å˜é‡ï¼Œé™¤éå®ƒä»¬åœ¨ /*global */ æ³¨é‡Šä¸­è¢«æåˆ°\n        \"no-undef\": 2,\n        // ç¦æ­¢å°†å˜é‡åˆå§‹åŒ–ä¸º undefined\n        \"no-undef-init\": 2,\n        // ç¦æ­¢å°† undefined ä½œä¸ºæ ‡è¯†ç¬¦\n        \"no-undefined\": 0,\n        // ç¦æ­¢å‡ºç°æœªä½¿ç”¨è¿‡çš„å˜é‡\n        \"no-unused-vars\": [2, {\n            \"vars\": \"all\",\n            \"args\": \"none\"\n        }],\n        // ä¸å…è®¸åœ¨å˜é‡å®šä¹‰ä¹‹å‰ä½¿ç”¨å®ƒä»¬\n        \"no-use-before-define\": 0,\n\n        //////////////////////////\n        // Node.js and CommonJS //\n        //////////////////////////\n\n        // require return statements after callbacks\n        \"callback-return\": 0,\n        // è¦æ±‚ require() å‡ºç°åœ¨é¡¶å±‚æ¨¡å—ä½œç”¨åŸŸä¸­\n        \"global-require\": 1,\n        // è¦æ±‚å›è°ƒå‡½æ•°ä¸­æœ‰å®¹é”™å¤„ç†\n        \"handle-callback-err\": [2, \"^(err|error)$\"],\n        // ç¦æ­¢æ··åˆå¸¸è§„ var å£°æ˜å’Œ require è°ƒç”¨\n        \"no-mixed-requires\": 0,\n        // ç¦æ­¢è°ƒç”¨ require æ—¶ä½¿ç”¨ new æ“ä½œç¬¦\n        \"no-new-require\": 2,\n        // ç¦æ­¢å¯¹ __dirname å’Œ __filename è¿›è¡Œå­—ç¬¦ä¸²è¿æ¥\n        \"no-path-concat\": 0,\n        // ç¦ç”¨ process.env\n        \"no-process-env\": 0,\n        // ç¦ç”¨ process.exit()\n        \"no-process-exit\": 0,\n        // ç¦ç”¨åŒæ­¥æ–¹æ³•\n        \"no-sync\": 0,\n\n        //////////////\n        // é£æ ¼æŒ‡å— //\n        //////////////\n\n        // æŒ‡å®šæ•°ç»„çš„å…ƒç´ ä¹‹é—´è¦ä»¥ç©ºæ ¼éš”å¼€ (, åé¢)ï¼Œ never å‚æ•°ï¼š[ ä¹‹å‰å’Œ ] ä¹‹åä¸èƒ½å¸¦ç©ºæ ¼ï¼Œalways å‚æ•°ï¼š[ ä¹‹å‰å’Œ ] ä¹‹åå¿…é¡»å¸¦ç©ºæ ¼\n        \"array-bracket-spacing\": [2, \"never\"],\n        // ç¦æ­¢æˆ–å¼ºåˆ¶åœ¨å•è¡Œä»£ç å—ä¸­ä½¿ç”¨ç©ºæ ¼ (ç¦ç”¨)\n        \"block-spacing\": [1, \"never\"],\n        // å¼ºåˆ¶ä½¿ç”¨ä¸€è‡´çš„ç¼©è¿› ç¬¬äºŒä¸ªå‚æ•°ä¸º \"tab\" æ—¶ï¼Œä¼šä½¿ç”¨ tabï¼Œ\n        // if while function åé¢çš„ {å¿…é¡»ä¸ if åœ¨åŒä¸€è¡Œï¼Œjava é£æ ¼ã€‚\n        \"brace-style\": [2, \"1tbs\", {\n            \"allowSingleLine\": true\n        }],\n        // åŒå³°é©¼å‘½åæ ¼å¼\n        \"camelcase\": 2,\n        // æ§åˆ¶é€—å·å‰åçš„ç©ºæ ¼\n        \"comma-spacing\": [2, {\n            \"before\": false,\n            \"after\": true\n        }],\n        // æ§åˆ¶é€—å·åœ¨è¡Œå°¾å‡ºç°è¿˜æ˜¯åœ¨è¡Œé¦–å‡ºç° (é»˜è®¤è¡Œå°¾)\n        // http://eslint.org/docs/rules/comma-style\n        \"comma-style\": [2, \"last\"],\n        //\"SwitchCase\" (é»˜è®¤ï¼š0) å¼ºåˆ¶ switch è¯­å¥ä¸­çš„ case å­å¥çš„ç¼©è¿›æ°´å¹³\n        // ä»¥æ–¹æ‹¬å·å–å¯¹è±¡å±æ€§æ—¶ï¼Œ[åé¢å’Œ] å‰é¢æ˜¯å¦éœ€è¦ç©ºæ ¼, å¯é€‰å‚æ•° never, always\n        \"computed-property-spacing\": [2, \"never\"],\n        // ç”¨äºæŒ‡ç»Ÿä¸€åœ¨å›è°ƒå‡½æ•°ä¸­æŒ‡å‘ this çš„å˜é‡åï¼Œç®­å¤´å‡½æ•°ä¸­çš„ this å·²ç»å¯ä»¥æŒ‡å‘å¤–å±‚è°ƒç”¨è€…ï¼Œåº”è¯¥æ²¡åµç”¨äº†\n        // e.g [0,\"that\"] æŒ‡å®šåªèƒ½ var that = this. that ä¸èƒ½æŒ‡å‘å…¶ä»–ä»»ä½•å€¼ï¼Œthis ä¹Ÿä¸èƒ½èµ‹å€¼ç»™ that ä»¥å¤–çš„å…¶ä»–å€¼\n        \"consistent-this\": [1, \"that\"],\n        // å¼ºåˆ¶ä½¿ç”¨å‘½åçš„ function è¡¨è¾¾å¼\n        \"func-names\": 0,\n        // æ–‡ä»¶æœ«å°¾å¼ºåˆ¶æ¢è¡Œ\n        \"eol-last\": 2,\n        \"indent\": [2, 4, {\n            \"SwitchCase\": 1\n        }],\n        // å¼ºåˆ¶åœ¨å¯¹è±¡å­—é¢é‡çš„å±æ€§ä¸­é”®å’Œå€¼ä¹‹é—´ä½¿ç”¨ä¸€è‡´çš„é—´è·\n        \"key-spacing\": [2, {\n            \"beforeColon\": false,\n            \"afterColon\": true\n        }],\n        // å¼ºåˆ¶ä½¿ç”¨ä¸€è‡´çš„æ¢è¡Œé£æ ¼\n        \"linebreak-style\": [1, \"unix\"],\n        // è¦æ±‚åœ¨æ³¨é‡Šå‘¨å›´æœ‰ç©ºè¡Œ (è¦æ±‚åœ¨å—çº§æ³¨é‡Šä¹‹å‰æœ‰ä¸€ç©ºè¡Œ)\n        \"lines-around-comment\": [1, {\n            \"beforeBlockComment\": true\n        }],\n        // å¼ºåˆ¶ä¸€è‡´åœ°ä½¿ç”¨å‡½æ•°å£°æ˜æˆ–å‡½æ•°è¡¨è¾¾å¼ï¼Œæ–¹æ³•å®šä¹‰é£æ ¼ï¼Œå‚æ•°ï¼š\n        // declaration: å¼ºåˆ¶ä½¿ç”¨æ–¹æ³•å£°æ˜çš„æ–¹å¼ï¼Œfunction f(){} e.g [2, \"declaration\"]\n        // expressionï¼šå¼ºåˆ¶ä½¿ç”¨æ–¹æ³•è¡¨è¾¾å¼çš„æ–¹å¼ï¼Œvar f = function() {} e.g [2, \"expression\"]\n        // allowArrowFunctions: declaration é£æ ¼ä¸­å…è®¸ç®­å¤´å‡½æ•°ã€‚ e.g [2, \"declaration\", { \"allowArrowFunctions\": true}]\n        \"func-style\": 0,\n        // å¼ºåˆ¶å›è°ƒå‡½æ•°æœ€å¤§åµŒå¥—æ·±åº¦ 5 å±‚\n        \"max-nested-callbacks\": [1, 5],\n        // ç¦æ­¢ä½¿ç”¨æŒ‡å®šçš„æ ‡è¯†ç¬¦\n        \"id-blacklist\": 0,\n        // å¼ºåˆ¶æ ‡è¯†ç¬¦çš„æœ€æ–°å’Œæœ€å¤§é•¿åº¦\n        \"id-length\": 0,\n        // è¦æ±‚æ ‡è¯†ç¬¦åŒ¹é…ä¸€ä¸ªæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼\n        \"id-match\": 0,\n        // å¼ºåˆ¶åœ¨ JSX å±æ€§ä¸­ä¸€è‡´åœ°ä½¿ç”¨åŒå¼•å·æˆ–å•å¼•å·\n        \"jsx-quotes\": 0,\n        // å¼ºåˆ¶åœ¨å…³é”®å­—å‰åä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼ (å‰åè…°éœ€è¦)\n        \"keyword-spacing\": 2,\n        // å¼ºåˆ¶ä¸€è¡Œçš„æœ€å¤§é•¿åº¦\n        \"max-len\": [1, 200],\n        // å¼ºåˆ¶æœ€å¤§è¡Œæ•°\n        \"max-lines\": 0,\n        // å¼ºåˆ¶ function å®šä¹‰ä¸­æœ€å¤šå…è®¸çš„å‚æ•°æ•°é‡\n        \"max-params\": [1, 7],\n        // å¼ºåˆ¶ function å—æœ€å¤šå…è®¸çš„çš„è¯­å¥æ•°é‡\n        \"max-statements\": [1, 200],\n        // å¼ºåˆ¶æ¯ä¸€è¡Œä¸­æ‰€å…è®¸çš„æœ€å¤§è¯­å¥æ•°é‡\n        \"max-statements-per-line\": 0,\n        // è¦æ±‚æ„é€ å‡½æ•°é¦–å­—æ¯å¤§å†™ ï¼ˆè¦æ±‚è°ƒç”¨ new æ“ä½œç¬¦æ—¶æœ‰é¦–å­—æ¯å¤§å°çš„å‡½æ•°ï¼Œå…è®¸è°ƒç”¨é¦–å­—æ¯å¤§å†™çš„å‡½æ•°æ—¶æ²¡æœ‰ new æ“ä½œç¬¦ã€‚ï¼‰\n        \"new-cap\": [2, {\n            \"newIsCap\": true,\n            \"capIsNew\": false\n        }],\n        // è¦æ±‚è°ƒç”¨æ— å‚æ„é€ å‡½æ•°æ—¶æœ‰åœ†æ‹¬å·\n        \"new-parens\": 2,\n        // è¦æ±‚æˆ–ç¦æ­¢ var å£°æ˜è¯­å¥åæœ‰ä¸€è¡Œç©ºè¡Œ\n        \"newline-after-var\": 0,\n        // ç¦æ­¢ä½¿ç”¨ Array æ„é€ å‡½æ•°\n        \"no-array-constructor\": 2,\n        // ç¦ç”¨æŒ‰ä½è¿ç®—ç¬¦\n        \"no-bitwise\": 0,\n        // è¦æ±‚ return è¯­å¥ä¹‹å‰æœ‰ä¸€ç©ºè¡Œ\n        \"newline-before-return\": 0,\n        // è¦æ±‚æ–¹æ³•é“¾ä¸­æ¯ä¸ªè°ƒç”¨éƒ½æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦\n        \"newline-per-chained-call\": 1,\n        // ç¦ç”¨ continue è¯­å¥\n        \"no-continue\": 0,\n        // ç¦æ­¢åœ¨ä»£ç è¡Œåä½¿ç”¨å†…è”æ³¨é‡Š\n        \"no-inline-comments\": 0,\n        // ç¦æ­¢ if ä½œä¸ºå”¯ä¸€çš„è¯­å¥å‡ºç°åœ¨ else è¯­å¥ä¸­\n        \"no-lonely-if\": 0,\n        // ç¦æ­¢æ··åˆä½¿ç”¨ä¸åŒçš„æ“ä½œç¬¦\n        \"no-mixed-operators\": 0,\n        // ä¸å…è®¸ç©ºæ ¼å’Œ tab æ··åˆç¼©è¿›\n        \"no-mixed-spaces-and-tabs\": 2,\n        // ä¸å…è®¸å¤šä¸ªç©ºè¡Œ\n        \"no-multiple-empty-lines\": [2, {\n            \"max\": 2\n        }],\n        // ä¸å…è®¸å¦å®šçš„è¡¨è¾¾å¼\n        \"no-negated-condition\": 0,\n        // ä¸å…è®¸ä½¿ç”¨åµŒå¥—çš„ä¸‰å…ƒè¡¨è¾¾å¼\n        \"no-nested-ternary\": 0,\n        // ç¦æ­¢ä½¿ç”¨ Object çš„æ„é€ å‡½æ•°\n        \"no-new-object\": 2,\n        // ç¦æ­¢ä½¿ç”¨ä¸€å…ƒæ“ä½œç¬¦ ++ å’Œ --\n        \"no-plusplus\": 0,\n        // ç¦æ­¢ä½¿ç”¨ç‰¹å®šçš„è¯­æ³•\n        \"no-restricted-syntax\": 0,\n        // ç¦æ­¢ function æ ‡è¯†ç¬¦å’Œæ‹¬å·ä¹‹é—´å‡ºç°ç©ºæ ¼\n        \"no-spaced-func\": 2,\n        // ä¸å…è®¸ä½¿ç”¨ä¸‰å…ƒæ“ä½œç¬¦\n        \"no-ternary\": 0,\n        // ç¦ç”¨è¡Œå°¾ç©ºæ ¼\n        \"no-trailing-spaces\": 2,\n        // ç¦æ­¢æ ‡è¯†ç¬¦ä¸­æœ‰æ‚¬ç©ºä¸‹åˆ’çº¿_bar\n        \"no-underscore-dangle\": 0,\n        // ç¦æ­¢å¯ä»¥åœ¨æœ‰æ›´ç®€å•çš„å¯æ›¿ä»£çš„è¡¨è¾¾å¼æ—¶ä½¿ç”¨ä¸‰å…ƒæ“ä½œç¬¦\n        \"no-unneeded-ternary\": 2,\n        // ç¦æ­¢å±æ€§å‰æœ‰ç©ºç™½\n        \"no-whitespace-before-property\": 0,\n        // å¼ºåˆ¶èŠ±æ‹¬å·å†…æ¢è¡Œç¬¦çš„ä¸€è‡´æ€§\n        \"object-curly-newline\": 0,\n        // å¼ºåˆ¶åœ¨èŠ±æ‹¬å·ä¸­ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼\n        \"object-curly-spacing\": 0,\n        // å¼ºåˆ¶å°†å¯¹è±¡çš„å±æ€§æ”¾åœ¨ä¸åŒçš„è¡Œä¸Š\n        \"object-property-newline\": 0,\n        // å¼ºåˆ¶å‡½æ•°ä¸­çš„å˜é‡è¦ä¹ˆä¸€èµ·å£°æ˜è¦ä¹ˆåˆ†å¼€å£°æ˜\n        \"one-var\": [2, {\n            \"initialized\": \"never\"\n        }],\n        // è¦æ±‚æˆ–ç¦æ­¢åœ¨ var å£°æ˜å‘¨å›´æ¢è¡Œ\n        \"one-var-declaration-per-line\": 0,\n        // è¦æ±‚æˆ–ç¦æ­¢åœ¨å¯èƒ½çš„æƒ…å†µä¸‹è¦æ±‚ä½¿ç”¨ç®€åŒ–çš„èµ‹å€¼æ“ä½œç¬¦\n        \"operator-assignment\": 0,\n        // å¼ºåˆ¶æ“ä½œç¬¦ä½¿ç”¨ä¸€è‡´çš„æ¢è¡Œç¬¦\n        \"operator-linebreak\": [2, \"after\", {\n            \"overrides\": {\n                \"?\": \"before\",\n                \":\": \"before\"\n            }\n        }],\n        // è¦æ±‚æˆ–ç¦æ­¢å—å†…å¡«å……\n        \"padded-blocks\": 0,\n        // è¦æ±‚å¯¹è±¡å­—é¢é‡å±æ€§åç§°ç”¨å¼•å·æ‹¬èµ·æ¥\n        \"quote-props\": 0,\n        // å¼ºåˆ¶ä½¿ç”¨ä¸€è‡´çš„åå‹¾å·ã€åŒå¼•å·æˆ–å•å¼•å·\n        \"quotes\": [2, \"double\", \"avoid-escape\"],\n        // è¦æ±‚ä½¿ç”¨ JSDoc æ³¨é‡Š\n        \"require-jsdoc\": 1,\n        // è¦æ±‚æˆ–ç¦æ­¢ä½¿ç”¨åˆ†å·è€Œä¸æ˜¯ ASIï¼ˆè¿™ä¸ªæ‰æ˜¯æ§åˆ¶è¡Œå°¾éƒ¨åˆ†å·çš„ï¼Œï¼‰\n        \"semi\": [2, \"always\"],\n        // å¼ºåˆ¶åˆ†å·ä¹‹å‰å’Œä¹‹åä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼\n        \"semi-spacing\": 0,\n        // è¦æ±‚åŒä¸€ä¸ªå£°æ˜å—ä¸­çš„å˜é‡æŒ‰é¡ºåºæ’åˆ—\n        \"sort-vars\": 0,\n        // å¼ºåˆ¶åœ¨å—ä¹‹å‰ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼\n        \"space-before-blocks\": [2, \"always\"],\n        // å¼ºåˆ¶åœ¨ function çš„å·¦æ‹¬å·ä¹‹å‰ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼\n        \"space-before-function-paren\": [0, \"always\"],\n        // å¼ºåˆ¶åœ¨åœ†æ‹¬å·å†…ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼\n        \"space-in-parens\": [2, \"never\"],\n        // è¦æ±‚æ“ä½œç¬¦å‘¨å›´æœ‰ç©ºæ ¼\n        \"space-infix-ops\": 2,\n        // å¼ºåˆ¶åœ¨ä¸€å…ƒæ“ä½œç¬¦å‰åä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼\n        \"space-unary-ops\": [2, {\n            \"words\": true,\n            \"nonwords\": false\n        }],\n        // å¼ºåˆ¶åœ¨æ³¨é‡Šä¸­ // æˆ– /* ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼\n        \"spaced-comment\": [2, \"always\", {\n            \"markers\": [\"global\", \"globals\", \"eslint\", \"eslint-disable\", \"*package\", \"!\"]\n        }],\n        // è¦æ±‚æˆ–ç¦æ­¢ Unicode BOM\n        \"unicode-bom\": 0,\n        // è¦æ±‚æ­£åˆ™è¡¨è¾¾å¼è¢«æ‹¬å·æ‹¬èµ·æ¥\n        \"wrap-regex\": 0,\n\n        //////////////\n        // ES6. ç›¸å…³ //\n        //////////////\n\n        // è¦æ±‚ç®­å¤´å‡½æ•°ä½“ä½¿ç”¨å¤§æ‹¬å·\n        \"arrow-body-style\": 2,\n        // è¦æ±‚ç®­å¤´å‡½æ•°çš„å‚æ•°ä½¿ç”¨åœ†æ‹¬å·\n        \"arrow-parens\": 2,\n        \"arrow-spacing\": [2, {\n            \"before\": true,\n            \"after\": true\n        }],\n        // å¼ºåˆ¶åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­ç”¨ super() è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼ŒTypeScrip çš„ç¼–è¯‘å™¨ä¹Ÿä¼šæç¤º\n        \"constructor-super\": 0,\n        // å¼ºåˆ¶ generator å‡½æ•°ä¸­ * å·å‘¨å›´ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼\n        \"generator-star-spacing\": [2, {\n            \"before\": true,\n            \"after\": true\n        }],\n        // ç¦æ­¢ä¿®æ”¹ç±»å£°æ˜çš„å˜é‡\n        \"no-class-assign\": 2,\n        // ä¸å…è®¸ç®­å¤´åŠŸèƒ½ï¼Œåœ¨é‚£é‡Œä»–ä»¬å¯ä»¥æ··æ·†çš„æ¯”è¾ƒ\n        \"no-confusing-arrow\": 0,\n        // ç¦æ­¢ä¿®æ”¹ const å£°æ˜çš„å˜é‡\n        \"no-const-assign\": 2,\n        // ç¦æ­¢ç±»æˆå‘˜ä¸­å‡ºç°é‡å¤çš„åç§°\n        \"no-dupe-class-members\": 2,\n        // ä¸å…è®¸å¤åˆ¶æ¨¡å—çš„è¿›å£\n        \"no-duplicate-imports\": 0,\n        // ç¦æ­¢ Symbol çš„æ„é€ å‡½æ•°\n        \"no-new-symbol\": 2,\n        // å…è®¸æŒ‡å®šæ¨¡å—åŠ è½½æ—¶çš„è¿›å£\n        \"no-restricted-imports\": 0,\n        // ç¦æ­¢åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œåœ¨è°ƒç”¨ super() ä¹‹å‰ä½¿ç”¨ this æˆ– super\n        \"no-this-before-super\": 2,\n        // ç¦æ­¢ä¸å¿…è¦çš„è®¡ç®—æ€§èƒ½é”®å¯¹è±¡çš„æ–‡å­—\n        \"no-useless-computed-key\": 0,\n        // è¦æ±‚ä½¿ç”¨ let æˆ– const è€Œä¸æ˜¯ var\n        \"no-var\": 0,\n        // è¦æ±‚æˆ–ç¦æ­¢å¯¹è±¡å­—é¢é‡ä¸­æ–¹æ³•å’Œå±æ€§ä½¿ç”¨ç®€å†™è¯­æ³•\n        \"object-shorthand\": 0,\n        // è¦æ±‚ä½¿ç”¨ç®­å¤´å‡½æ•°ä½œä¸ºå›è°ƒ\n        \"prefer-arrow-callback\": 0,\n        // è¦æ±‚ä½¿ç”¨ const å£°æ˜é‚£äº›å£°æ˜åä¸å†è¢«ä¿®æ”¹çš„å˜é‡\n        \"prefer-const\": 0,\n        // è¦æ±‚åœ¨åˆé€‚çš„åœ°æ–¹ä½¿ç”¨ Reflect æ–¹æ³•\n        \"prefer-reflect\": 0,\n        // è¦æ±‚ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦è€Œé .apply()\n        \"prefer-spread\": 0,\n        // è¦æ±‚ä½¿ç”¨æ¨¡æ¿å­—é¢é‡è€Œéå­—ç¬¦ä¸²è¿æ¥\n        \"prefer-template\": 0,\n        // Suggest using the rest parameters instead of arguments\n        \"prefer-rest-params\": 0,\n        // è¦æ±‚ generator å‡½æ•°å†…æœ‰ yield\n        \"require-yield\": 0,\n        // enforce spacing between rest and spread operators and their expressions\n        \"rest-spread-spacing\": 0,\n        // å¼ºåˆ¶æ¨¡å—å†…çš„ import æ’åº\n        \"sort-imports\": 0,\n        // è¦æ±‚æˆ–ç¦æ­¢æ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„åµŒå…¥è¡¨è¾¾å¼å‘¨å›´ç©ºæ ¼çš„ä½¿ç”¨\n        \"template-curly-spacing\": 1,\n        // å¼ºåˆ¶åœ¨ yield* è¡¨è¾¾å¼ä¸­ * å‘¨å›´ä½¿ç”¨ç©ºæ ¼\n        \"yield-star-spacing\": 2\n    }\n}\n```\n","source":"_posts/ä»£ç æ´ç™–å…»æˆæŒ‡å—.md","raw":"---\ntitle: ä»£ç æ´ç™–å…»æˆæŒ‡å—\ncomments: true\ndate: 2018-12-31 20:45:31\ntags:\nfrom:\n---\n\nè¿™ç¯‡æ–‡ç« æˆ‘ä»å‡ ä¸ªæ–¹é¢æ¥ä»‹ç»æˆ‘æ˜¯å¦‚ä½•é…ç½®å¼€å‘ç¯å¢ƒçš„ï¼Œå°½å¯èƒ½ä½¿ä»£ç ç¼–å†™é£æ ¼ç»Ÿä¸€ã€‚å…¶å®ä¸å…‰æ˜¯ä»£ç ï¼ŒåŒ…æ‹¬æ—¥å¸¸æ–‡å­—ï¼Œéƒ½æœ‰å¾ˆå¤šè§„èŒƒã€‚æ¯”å¦‚æœ€å¸¸è§çš„ä¸­è‹±æ–‡ä¹‹é—´æ·»åŠ ç©ºæ ¼ï¼Œå¯èƒ½å¾ˆå¤šäººå¹¶æ²¡æœ‰åœ¨æ„ã€‚ä½†æ˜¯çœ‹åˆ°åˆ«äººçš„æ–‡ç« é‡Œå‡ºç°è¿™æ ·çš„é—®é¢˜ï¼Œè‚¯å®šæ˜¯è¦å‡å°è±¡åˆ†çš„ã€‚\n\n<!-- more -->\n\nå› ä¸ºæˆ‘æ—¥å¸¸ä½¿ç”¨ **VSCode**ï¼Œæ‰€ä»¥è¿™é‡Œç›¸å…³é…ç½®éƒ½ä»¥è¿™ä¸ªå±•å¼€ã€‚\n\n### æ‰©å±•\n\n- [EditorConfig for VS Code](https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig)\n- [ESLint](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint)\n- [Prettier - Code formatter](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode)\n- [VSCode-Pangu](https://marketplace.visualstudio.com/items?itemName=baurine.vscode-pangu)\n- [Code Spell Checker](https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker)\n- [Indent-Rainbow](https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow)\n\nä¸‹é¢æ¥æˆ‘ç®€å•ä»‹ç»ä¸€ä¸‹æ¯ä¸ªæ’ä»¶çš„åŠŸèƒ½ã€‚\n\n- EditorConfigï¼šç”Ÿæˆ `.editorconfig` é…ç½®æ–‡ä»¶ï¼Œè§„å®šå½“å‰ç¼–è¾‘å™¨çš„ä¸€äº›è®¾å®šã€‚\n- ESLintï¼šé›†æˆ Eslint åˆ° VSCodeï¼Œå…·ä½“çœ‹ Eslint çš„å®˜æ–¹æ–‡æ¡£ã€‚\n- Prettierï¼šEslint ä¾§é‡äºé™æ€æ ¡éªŒï¼Œè€Œ Prettier åˆ™è´Ÿè´£æŒ‰ç…§ä¸€äº›è§„åˆ™ç¾åŒ–ä»£ç ã€‚\n- VSCode-Panguï¼šè‡ªåŠ¨åœ¨ä¸­è‹±æ–‡ä¹‹é—´æ·»åŠ ç©ºæ ¼ã€‚\n- Code Spell Checkerï¼šå•è¯æ‹¼å†™æ£€æŸ¥ã€‚\n- Indent-Rainbowï¼šå½©è™¹ç¼©è¿›ï¼Œç¼©è¿›ä¸è§„èŒƒæ—¶ä¼šæ ‡çº¢æç¤ºã€‚\n\n### åå¥½\n\n#### VSCode Settings\n\nå®‰è£…æ’ä»¶ï¼šESLintã€Prettier åï¼Œåœ¨ settings é…ç½®ä¸‹é¢çš„é€‰é¡¹ï¼Œå³å¯å®ç°ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ï¼š\n\n```js\n{\n  // ...\n\n  // å¼€å¯ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œè°ƒç”¨ Prettier æ—¶è‡ªåŠ¨ eslint -fix\n  \"editor.formatOnSave\": true,\n  // ä¸éœ€è¦ fix äº†ï¼ŒPrettier ä¼šè‡ªåŠ¨ fix\n  \"eslint.autoFixOnSave\": false,\n  // å‘Šè¯‰ Prettier ä½¿ç”¨ `prettier-eslint` æ¥ä»£æ›¿ Prettier\n  \"prettier.eslintIntegration\": true,\n\n  //...\n}\n```\n\n### Lint\n\n#### ä½¿ç”¨ Prettier æŒ‰ç…§ Eslint ç¾åŒ–ä»£ç \n\n- å®‰è£… `prettier-eslint-cli`\n\n```bash\nnpm i prettier-eslint-cli --save-dev\n```\n\n- é…ç½® `prettier`ï¼Œåœ¨ `package.json` æ·»åŠ \n\n```json\n{\n  \"scripts\": {\n    \"lint\": \"eslint *.js\",\n    \"format\": \"prettier-eslint --write *.js\"\n  },\n  \"eslintConfig\": {\n    \"extends\": \"some-config\"\n  },\n  \"prettier\": {\n    \"singleQuote\": true,\n    \"semi\": false\n  }\n}\n```\n\nç»è¿‡ä¸Šé¢é…ç½®åï¼Œç¼–è¾‘å™¨å°±å¯ä»¥åœ¨ä¿å­˜æ–‡ä»¶æ—¶ï¼Œè‡ªåŠ¨æŒ‰ç…§ Eslint æ ¼å¼åŒ–ã€‚\n\n#### ä½¿ç”¨ Standard è§„èŒƒ\n\n[Standard](https://github.com/standard) å…¶å®å¹¶ä¸æ˜¯æ ‡å‡†ç»„ç»‡å‡ºçš„è§„èŒƒï¼Œä½†æ˜¯è¡Œä¸šå†…ä½¿ç”¨çš„æ¯”è¾ƒå¤šã€‚çœ‹æ¥çœ‹å»ï¼Œå¥½åƒå„ç§å„æ ·çš„çº¦å®šéƒ½æ²¡æœ‰ä¸€ä¸ªæ ‡å‡†ã€‚æˆ‘çœ‹äº†ä¸€ä¸‹ï¼Œç›®å‰æ¥è¯´ `standard` è¿˜ç®—æœ‰å½±å“åŠ›ã€‚æ‰“ç®—ä»¥ååœ¨ä¸ªäººé¡¹ç›®ä¸­å…¨éƒ¨é‡‡ç”¨è¿™ç§é£æ ¼ï¼Œç„¶åæŠŠå‰©ä¸‹çš„æ—¶é—´å»åšç‚¹æœ‰æ„ä¹‰çš„äº‹ã€‚é…ç½®ä¸€å † `.eslintrc` `.jscsrc` `.jshintrc` çœŸçš„å¾ˆå¤´ç–¼ã€‚\n\nâ˜ï¸ **åˆå§‹åŒ–æ–°é¡¹ç›®**\n\n- å®‰è£…ä¾èµ–\n\n```bash\nnpm install eslint \\\n    eslint-config-standard \\\n    eslint-plugin-standard \\\n    eslint-plugin-promise \\\n    eslint-plugin-import \\\n    eslint-plugin-node \\\n    eslint-plugin-markdown \\\n    --save-dev\n```\n\n- æ·»åŠ  `.eslintrc`\n\n```json\n{\n  \"extends\": \"standard\"\n}\n```\n\nOKï¼Œç°åœ¨è®© Eslint æŒ‰ç…§ standard çš„è§„åˆ™æ¥çº¦æŸäº†ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¦å¤–çš„è§„åˆ™æ¥è¦†ç›–ã€‚\n\nâ˜ï¸ **å…¨å±€ä½¿ç”¨**\n\n```bash\n# å…¨å±€å®‰è£…\n$ npm i standard -g\n\n# æ ¡éªŒç›®å½•ä¸‹ *.js/*.jsx\n$ standard\n\n# ä¿®å¤\n$ standard --fix\n```\n\n### æ€»ç»“\n\nä»¥åçš„æ–°é¡¹ç›®æˆ‘ä¼šé‡‡ç”¨ Standard ä½œä¸ºçº¦æŸè§„èŒƒï¼Œå¯¹äºå·²æœ‰é¡¹ç›®æˆ‘ä½¿ç”¨ Prettier è‡ªåŠ¨æŒ‰ç…§ Eslint è§„åˆ™è‡ªåŠ¨ç¾åŒ–ï¼Œæ—¥å¸¸ä¸€äº›ä»£ç ç‰‡æ®µä½¿ç”¨ Standard å…¨å±€å‘½ä»¤ï¼Œç®€å•å®ç”¨ã€‚\n\nå‚è€ƒä»¥ä¸‹æ–‡æ¡£ã€‚\n\n- [standard/standard @Github](https://github.com/standard/standard/blob/master/docs/README-zhcn.md)\n- [standard/eslint-config-standard @Github](https://github.com/standard/eslint-config-standard)\n- [Standard Style Demo @Github](https://github.com/expressjs/body-parser)\n- [ESLint @ä¸­æ–‡å®˜ç½‘](https://cn.eslint.org/)\n- [ç”¨ ESLint å’Œ Prettier å†™å‡ºé«˜è´¨é‡ä»£ç  @EGOIST](https://egoist.moe/2017/12/11/write-better-code-with-eslint-and-prettier/)\n\n### é™„ï¼šEslint è§„åˆ™\n\n#### å…³é—­æ ¡éªŒ\n\n```js\n// å…³é—­å½“å‰æ–‡ä»¶\n/* eslint-disable */\n\n// å…³é—­å½“å‰è¡Œæ ¡éªŒ\nlet a = 1; // eslint-disable-line\n\n// å…³é—­ä¸‹ä¸€è¡Œæ ¡éªŒ\n// eslint-disable-next-line\nlet b = 2;\n```\n\n#### è¯¦ç»†è§„åˆ™\n\n- 0ï¼šå…³é—­\n- 1ï¼šè­¦å‘Šï¼Œä»…ç»™å‡ºè­¦å‘Š\n- 2ï¼šé”™è¯¯ï¼Œåœæ­¢æ‰§è¡Œ\n\n```js\n{\n    // ç¯å¢ƒå®šä¹‰äº†é¢„å®šä¹‰çš„å…¨å±€å˜é‡ã€‚\n    \"env\": {\n        // ç¯å¢ƒå®šä¹‰äº†é¢„å®šä¹‰çš„å…¨å±€å˜é‡ã€‚æ›´å¤šåœ¨å®˜ç½‘æŸ¥çœ‹\n        \"browser\": true,\n        \"node\": true,\n        \"commonjs\": true,\n        \"amd\": true,\n        \"es6\": true,\n        \"mocha\": true\n    },\n    // JavaScript è¯­è¨€é€‰é¡¹\n    \"parserOptions\": {\n        // ECMAScript ç‰ˆæœ¬\n        \"ecmaVersion\": 6,\n        \"sourceType\": \"module\", // è®¾ç½®ä¸º \"script\" (é»˜è®¤) æˆ– \"module\"ï¼ˆå¦‚æœä½ çš„ä»£ç æ˜¯ ECMAScript æ¨¡å—)ã€‚\n        // æƒ³ä½¿ç”¨çš„é¢å¤–çš„è¯­è¨€ç‰¹æ€§:\n        \"ecmaFeatures\": {\n            // å…è®¸åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ä½¿ç”¨ return è¯­å¥\n            \"globalReturn\": true,\n            // impliedStric\n            \"impliedStrict\": true,\n            // å¯ç”¨ JSX\n            \"jsx\": true,\n            \"modules\": true\n        }\n    },\n    // è®© eslint æ”¯æŒ JSX start\n    \"plugins\": [\n        \"react\"\n    ],\n    \"extends\": [\n        \"eslint:recommended\",\n        \"plugin:react/recommended\"\n    ],\n    // è®© eslint æ”¯æŒ JSX end\n\n    \"rules\": {\n\n        ////////////////\n        // å¯èƒ½çš„é”™è¯¯ //\n        ////////////////\n\n        // ç¦æ­¢æ¡ä»¶è¡¨è¾¾å¼ä¸­å‡ºç°èµ‹å€¼æ“ä½œç¬¦\n        \"no-cond-assign\": 2,\n        // ç¦ç”¨ console\n        \"no-console\": 0,\n        // ç¦æ­¢åœ¨æ¡ä»¶ä¸­ä½¿ç”¨å¸¸é‡è¡¨è¾¾å¼\n        // if (false) {\n        // doSomethingUnfinished();\n        // } //cuowu\n        \"no-constant-condition\": 2,\n        // ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ§åˆ¶å­—ç¬¦ ï¼šnew RegExp(\"\\x1f\")\n        \"no-control-regex\": 2,\n        // æ•°ç»„å’Œå¯¹è±¡é”®å€¼å¯¹æœ€åä¸€ä¸ªé€—å·ï¼Œ never å‚æ•°ï¼šä¸èƒ½å¸¦æœ«å°¾çš„é€—å·, always å‚æ•°ï¼šå¿…é¡»å¸¦æœ«å°¾çš„é€—å·ï¼Œ\n        // always-multilineï¼šå¤šè¡Œæ¨¡å¼å¿…é¡»å¸¦é€—å·ï¼Œå•è¡Œæ¨¡å¼ä¸èƒ½å¸¦é€—å·\n        \"comma-dangle\": [1, \"never\"],\n        // ç¦ç”¨ debugger\n        \"no-debugger\": 2,\n        // ç¦æ­¢ function å®šä¹‰ä¸­å‡ºç°é‡åå‚æ•°\n        \"no-dupe-args\": 2,\n        // ç¦æ­¢å¯¹è±¡å­—é¢é‡ä¸­å‡ºç°é‡å¤çš„ key\n        \"no-dupe-keys\": 2,\n        // ç¦æ­¢é‡å¤çš„ case æ ‡ç­¾\n        \"no-duplicate-case\": 2,\n        // ç¦æ­¢ç©ºè¯­å¥å—\n        \"no-empty\": 2,\n        // ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨ç©ºå­—ç¬¦é›† (/^abc[]/)\n        \"no-empty-character-class\": 2,\n        // ç¦æ­¢å¯¹ catch å­å¥çš„å‚æ•°é‡æ–°èµ‹å€¼\n        \"no-ex-assign\": 2,\n        // ç¦æ­¢ä¸å¿…è¦çš„å¸ƒå°”è½¬æ¢\n        \"no-extra-boolean-cast\": 2,\n        // ç¦æ­¢ä¸å¿…è¦çš„æ‹¬å· //(a * b) + c;// æŠ¥é”™\n        \"no-extra-parens\": 0,\n        // ç¦æ­¢ä¸å¿…è¦çš„åˆ†å·\n        \"no-extra-semi\": 2,\n        // ç¦æ­¢å¯¹ function å£°æ˜é‡æ–°èµ‹å€¼\n        \"no-func-assign\": 2,\n        // ç¦æ­¢åœ¨åµŒå¥—çš„å—ä¸­å‡ºç° function æˆ– var å£°æ˜\n        \"no-inner-declarations\": [2, \"functions\"],\n        // ç¦æ­¢ RegExp æ„é€ å‡½æ•°ä¸­æ— æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²\n        \"no-invalid-regexp\": 2,\n        // ç¦æ­¢åœ¨å­—ç¬¦ä¸²å’Œæ³¨é‡Šä¹‹å¤–ä¸è§„åˆ™çš„ç©ºç™½\n        \"no-irregular-whitespace\": 2,\n        // ç¦æ­¢åœ¨ in è¡¨è¾¾å¼ä¸­å‡ºç°å¦å®šçš„å·¦æ“ä½œæ•°\n        \"no-negated-in-lhs\": 2,\n        // ç¦æ­¢æŠŠå…¨å±€å¯¹è±¡ (Math å’Œ JSON) ä½œä¸ºå‡½æ•°è°ƒç”¨ é”™è¯¯ï¼švar math = Math();\n        \"no-obj-calls\": 2,\n        // ç¦æ­¢ç›´æ¥ä½¿ç”¨ Object.prototypes çš„å†…ç½®å±æ€§\n        \"no-prototype-builtins\": 0,\n        // ç¦æ­¢æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡ä¸­å‡ºç°å¤šä¸ªç©ºæ ¼\n        \"no-regex-spaces\": 2,\n        // ç¦ç”¨ç¨€ç–æ•°ç»„\n        \"no-sparse-arrays\": 2,\n        // ç¦æ­¢å‡ºç°ä»¤äººå›°æƒ‘çš„å¤šè¡Œè¡¨è¾¾å¼\n        \"no-unexpected-multiline\": 2,\n        // ç¦æ­¢åœ¨ returnã€throwã€continue å’Œ break è¯­å¥ä¹‹åå‡ºç°ä¸å¯è¾¾ä»£ç \n        \"no-unreachable\": 2,\n        // è¦æ±‚ä½¿ç”¨ isNaN() æ£€æŸ¥ NaN\n        \"use-isnan\": 2,\n        // å¼ºåˆ¶ä½¿ç”¨æœ‰æ•ˆçš„ JSDoc æ³¨é‡Š\n        \"valid-jsdoc\": 1,\n        // å¼ºåˆ¶ typeof è¡¨è¾¾å¼ä¸æœ‰æ•ˆçš„å­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒ\n        // typeof foo === \"undefimed\" é”™è¯¯\n        \"valid-typeof\": 2,\n\n\n        //////////////\n        // æœ€ä½³å®è·µ //\n        //////////////\n\n        // å®šä¹‰å¯¹è±¡çš„ set å­˜å–å™¨å±æ€§æ—¶ï¼Œå¼ºåˆ¶å®šä¹‰ get\n        \"accessor-pairs\": 2,\n        // å¼ºåˆ¶æ•°ç»„æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸­æœ‰ return è¯­å¥\n        \"array-callback-return\": 0,\n        // å¼ºåˆ¶æŠŠå˜é‡çš„ä½¿ç”¨é™åˆ¶åœ¨å…¶å®šä¹‰çš„ä½œç”¨åŸŸèŒƒå›´å†…\n        \"block-scoped-var\": 0,\n        // é™åˆ¶åœˆå¤æ‚åº¦ï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼ if else èƒ½è¿ç»­æ¥å¤šå°‘ä¸ª\n        \"complexity\": [2, 9],\n        // è¦æ±‚ return è¯­å¥è¦ä¹ˆæ€»æ˜¯æŒ‡å®šè¿”å›çš„å€¼ï¼Œè¦ä¹ˆä¸æŒ‡å®š\n        \"consistent-return\": 0,\n        // å¼ºåˆ¶æ‰€æœ‰æ§åˆ¶è¯­å¥ä½¿ç”¨ä¸€è‡´çš„æ‹¬å·é£æ ¼\n        \"curly\": [2, \"all\"],\n        // switch è¯­å¥å¼ºåˆ¶ default åˆ†æ”¯ï¼Œä¹Ÿå¯æ·»åŠ  // no default æ³¨é‡Šå–æ¶ˆæ­¤æ¬¡è­¦å‘Š\n        \"default-case\": 2,\n        // å¼ºåˆ¶ object.key ä¸­ . çš„ä½ç½®ï¼Œå‚æ•°:\n        // propertyï¼Œ'.'å·åº”ä¸å±æ€§åœ¨åŒä¸€è¡Œ\n        // object, '.' å·åº”ä¸å¯¹è±¡ååœ¨åŒä¸€è¡Œ\n        \"dot-location\": [2, \"property\"],\n        // å¼ºåˆ¶ä½¿ç”¨. å·å–å±æ€§\n        // å‚æ•°ï¼š allowKeywordsï¼štrue ä½¿ç”¨ä¿ç•™å­—åšå±æ€§åæ—¶ï¼Œåªèƒ½ä½¿ç”¨. æ–¹å¼å–å±æ€§\n        // false ä½¿ç”¨ä¿ç•™å­—åšå±æ€§åæ—¶, åªèƒ½ä½¿ç”¨ [] æ–¹å¼å–å±æ€§ e.g [2, {\"allowKeywords\": false}]\n        // allowPattern: å½“å±æ€§ååŒ¹é…æä¾›çš„æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œå…è®¸ä½¿ç”¨ [] æ–¹å¼å–å€¼, å¦åˆ™åªèƒ½ç”¨. å·å–å€¼ e.g [2, {\"allowPattern\": \"^[a-z]+(_[a-z]+)+$\"}]\n        \"dot-notation\": [2, {\n            \"allowKeywords\": false\n        }],\n        // ä½¿ç”¨ === æ›¿ä»£ == allow-null å…è®¸ null å’Œ undefined==\n        \"eqeqeq\": [2, \"allow-null\"],\n        // è¦æ±‚ for-in å¾ªç¯ä¸­æœ‰ä¸€ä¸ª if è¯­å¥\n        \"guard-for-in\": 2,\n        // ç¦ç”¨ alertã€confirm å’Œ prompt\n        \"no-alert\": 0,\n        // ç¦ç”¨ arguments.caller æˆ– arguments.callee\n        \"no-caller\": 2,\n        // ä¸å…è®¸åœ¨ case å­å¥ä¸­ä½¿ç”¨è¯æ³•å£°æ˜\n        \"no-case-declarations\": 2,\n        // ç¦æ­¢é™¤æ³•æ“ä½œç¬¦æ˜¾å¼çš„å‡ºç°åœ¨æ­£åˆ™è¡¨è¾¾å¼å¼€å§‹çš„ä½ç½®\n        \"no-div-regex\": 2,\n        // ç¦æ­¢ if è¯­å¥ä¸­æœ‰ return ä¹‹åæœ‰ else\n        \"no-else-return\": 0,\n        // ç¦æ­¢å‡ºç°ç©ºå‡½æ•°. å¦‚æœä¸€ä¸ªå‡½æ•°åŒ…å«äº†ä¸€æ¡æ³¨é‡Šï¼Œå®ƒå°†ä¸ä¼šè¢«è®¤ä¸ºæœ‰é—®é¢˜ã€‚\n        \"no-empty-function\": 2,\n        // ç¦æ­¢ä½¿ç”¨ç©ºè§£æ„æ¨¡å¼ no-empty-pattern\n        \"no-empty-pattern\": 2,\n        // ç¦æ­¢åœ¨æ²¡æœ‰ç±»å‹æ£€æŸ¥æ“ä½œç¬¦çš„æƒ…å†µä¸‹ä¸ null è¿›è¡Œæ¯”è¾ƒ\n        \"no-eq-null\": 1,\n        // ç¦ç”¨ eval()\n        \"no-eval\": 2,\n        // ç¦æ­¢æ‰©å±•åŸç”Ÿç±»å‹\n        \"no-extend-native\": 2,\n        // ç¦æ­¢ä¸å¿…è¦çš„ .bind() è°ƒç”¨\n        \"no-extra-bind\": 2,\n        // ç¦ç”¨ä¸å¿…è¦çš„æ ‡ç­¾\n        \"no-extra-label:\": 0,\n        // ç¦æ­¢ case è¯­å¥è½ç©º\n        \"no-fallthrough\": 2,\n        // ç¦æ­¢æ•°å­—å­—é¢é‡ä¸­ä½¿ç”¨å‰å¯¼å’Œæœ«å°¾å°æ•°ç‚¹\n        \"no-floating-decimal\": 2,\n        // ç¦æ­¢ä½¿ç”¨çŸ­ç¬¦å·è¿›è¡Œç±»å‹è½¬æ¢ (!!fOO)\n        \"no-implicit-coercion\": 0,\n        // ç¦æ­¢åœ¨å…¨å±€èŒƒå›´å†…ä½¿ç”¨ var å’Œå‘½åçš„ function å£°æ˜\n        \"no-implicit-globals\": 1,\n        // ç¦æ­¢ä½¿ç”¨ç±»ä¼¼ eval() çš„æ–¹æ³•\n        \"no-implied-eval\": 2,\n        // ç¦æ­¢ this å…³é”®å­—å‡ºç°åœ¨ç±»å’Œç±»å¯¹è±¡ä¹‹å¤–\n        \"no-invalid-this\": 0,\n        // ç¦ç”¨ __iterator__ å±æ€§\n        \"no-iterator\": 2,\n        // ç¦ç”¨æ ‡ç­¾è¯­å¥\n        \"no-labels\": 2,\n        // ç¦ç”¨ä¸å¿…è¦çš„åµŒå¥—å—\n        \"no-lone-blocks\": 2,\n        // ç¦æ­¢åœ¨å¾ªç¯ä¸­å‡ºç° function å£°æ˜å’Œè¡¨è¾¾å¼\n        \"no-loop-func\": 1,\n        // ç¦ç”¨é­”æœ¯æ•°å­— (3.14 ä»€ä¹ˆçš„ç”¨å¸¸é‡ä»£æ›¿)\n        \"no-magic-numbers\": [1, {\n            \"ignore\": [0, -1, 1]\n        }],\n        // ç¦æ­¢ä½¿ç”¨å¤šä¸ªç©ºæ ¼\n        \"no-multi-spaces\": 2,\n        // ç¦æ­¢ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²ï¼Œåœ¨ JavaScript ä¸­ï¼Œå¯ä»¥åœ¨æ–°è¡Œä¹‹å‰ä½¿ç”¨æ–œçº¿åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²\n        \"no-multi-str\": 2,\n        // ç¦æ­¢å¯¹åŸç”Ÿå¯¹è±¡èµ‹å€¼\n        \"no-native-reassign\": 2,\n        // ç¦æ­¢åœ¨éèµ‹å€¼æˆ–æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ new æ“ä½œç¬¦\n        \"no-new\": 2,\n        // ç¦æ­¢å¯¹ Function å¯¹è±¡ä½¿ç”¨ new æ“ä½œç¬¦\n        \"no-new-func\": 0,\n        // ç¦æ­¢å¯¹ Stringï¼ŒNumber å’Œ Boolean ä½¿ç”¨ new æ“ä½œç¬¦\n        \"no-new-wrappers\": 2,\n        // ç¦ç”¨å…«è¿›åˆ¶å­—é¢é‡\n        \"no-octal\": 2,\n        // ç¦æ­¢åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨å…«è¿›åˆ¶è½¬ä¹‰åºåˆ—\n        \"no-octal-escape\": 2,\n        // ä¸å…è®¸å¯¹ function çš„å‚æ•°è¿›è¡Œé‡æ–°èµ‹å€¼\n        \"no-param-reassign\": 0,\n        // ç¦ç”¨ __proto__ å±æ€§\n        \"no-proto\": 2,\n        // ç¦æ­¢ä½¿ç”¨ var å¤šæ¬¡å£°æ˜åŒä¸€å˜é‡\n        \"no-redeclare\": 2,\n        // ç¦ç”¨æŒ‡å®šçš„é€šè¿‡ require åŠ è½½çš„æ¨¡å—\n        \"no-return-assign\": 0,\n        // ç¦æ­¢ä½¿ç”¨ javascript: url\n        \"no-script-url\": 0,\n        // ç¦æ­¢è‡ªæˆ‘èµ‹å€¼\n        \"no-self-assign\": 2,\n        // ç¦æ­¢è‡ªèº«æ¯”è¾ƒ\n        \"no-self-compare\": 2,\n        // ç¦ç”¨é€—å·æ“ä½œç¬¦\n        \"no-sequences\": 2,\n        // ç¦æ­¢æŠ›å‡ºéå¼‚å¸¸å­—é¢é‡\n        \"no-throw-literal\": 2,\n        // ç¦ç”¨ä¸€æˆä¸å˜çš„å¾ªç¯æ¡ä»¶\n        \"no-unmodified-loop-condition\": 2,\n        // ç¦æ­¢å‡ºç°æœªä½¿ç”¨è¿‡çš„è¡¨è¾¾å¼\n        \"no-unused-expressions\": 0,\n        // ç¦ç”¨æœªä½¿ç”¨è¿‡çš„æ ‡ç­¾\n        \"no-unused-labels\": 2,\n        // ç¦æ­¢ä¸å¿…è¦çš„ .call() å’Œ .apply()\n        \"no-useless-call\": 2,\n        // ç¦æ­¢ä¸å¿…è¦çš„å­—ç¬¦ä¸²å­—é¢é‡æˆ–æ¨¡æ¿å­—é¢é‡çš„è¿æ¥\n        \"no-useless-concat\": 2,\n        // ç¦ç”¨ä¸å¿…è¦çš„è½¬ä¹‰å­—ç¬¦\n        \"no-useless-escape\": 0,\n        // ç¦ç”¨ void æ“ä½œç¬¦\n        \"no-void\": 0,\n        // ç¦æ­¢åœ¨æ³¨é‡Šä¸­ä½¿ç”¨ç‰¹å®šçš„è­¦å‘Šæœ¯è¯­\n        \"no-warning-comments\": 0,\n        // ç¦ç”¨ with è¯­å¥\n        \"no-with\": 2,\n        // å¼ºåˆ¶åœ¨ parseInt() ä½¿ç”¨åŸºæ•°å‚æ•°\n        \"radix\": 2,\n        // è¦æ±‚æ‰€æœ‰çš„ var å£°æ˜å‡ºç°åœ¨å®ƒä»¬æ‰€åœ¨çš„ä½œç”¨åŸŸé¡¶éƒ¨\n        \"vars-on-top\": 0,\n        // è¦æ±‚ IIFE ä½¿ç”¨æ‹¬å·æ‹¬èµ·æ¥\n        \"wrap-iife\": [2, \"any\"],\n        // è¦æ±‚æˆ–ç¦æ­¢ â€œYodaâ€ æ¡ä»¶\n        \"yoda\": [2, \"never\"],\n        // è¦æ±‚æˆ–ç¦æ­¢ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼æŒ‡ä»¤\n        \"strict\": 0,\n\n\n        //////////////\n        // å˜é‡å£°æ˜ //\n        //////////////\n\n        // è¦æ±‚æˆ–ç¦æ­¢ var å£°æ˜ä¸­çš„åˆå§‹åŒ– (åˆå€¼)\n        \"init-declarations\": 0,\n        // ä¸å…è®¸ catch å­å¥çš„å‚æ•°ä¸å¤–å±‚ä½œç”¨åŸŸä¸­çš„å˜é‡åŒå\n        \"no-catch-shadow\": 0,\n        // ç¦æ­¢åˆ é™¤å˜é‡\n        \"no-delete-var\": 2,\n        // ä¸å…è®¸æ ‡ç­¾ä¸å˜é‡åŒå\n        \"no-label-var\": 2,\n        // ç¦ç”¨ç‰¹å®šçš„å…¨å±€å˜é‡\n        \"no-restricted-globals\": 0,\n        // ç¦æ­¢ var å£°æ˜ ä¸å¤–å±‚ä½œç”¨åŸŸçš„å˜é‡åŒå\n        \"no-shadow\": 0,\n        // ç¦æ­¢è¦†ç›–å—é™åˆ¶çš„æ ‡è¯†ç¬¦\n        \"no-shadow-restricted-names\": 2,\n        // ç¦ç”¨æœªå£°æ˜çš„å˜é‡ï¼Œé™¤éå®ƒä»¬åœ¨ /*global */ æ³¨é‡Šä¸­è¢«æåˆ°\n        \"no-undef\": 2,\n        // ç¦æ­¢å°†å˜é‡åˆå§‹åŒ–ä¸º undefined\n        \"no-undef-init\": 2,\n        // ç¦æ­¢å°† undefined ä½œä¸ºæ ‡è¯†ç¬¦\n        \"no-undefined\": 0,\n        // ç¦æ­¢å‡ºç°æœªä½¿ç”¨è¿‡çš„å˜é‡\n        \"no-unused-vars\": [2, {\n            \"vars\": \"all\",\n            \"args\": \"none\"\n        }],\n        // ä¸å…è®¸åœ¨å˜é‡å®šä¹‰ä¹‹å‰ä½¿ç”¨å®ƒä»¬\n        \"no-use-before-define\": 0,\n\n        //////////////////////////\n        // Node.js and CommonJS //\n        //////////////////////////\n\n        // require return statements after callbacks\n        \"callback-return\": 0,\n        // è¦æ±‚ require() å‡ºç°åœ¨é¡¶å±‚æ¨¡å—ä½œç”¨åŸŸä¸­\n        \"global-require\": 1,\n        // è¦æ±‚å›è°ƒå‡½æ•°ä¸­æœ‰å®¹é”™å¤„ç†\n        \"handle-callback-err\": [2, \"^(err|error)$\"],\n        // ç¦æ­¢æ··åˆå¸¸è§„ var å£°æ˜å’Œ require è°ƒç”¨\n        \"no-mixed-requires\": 0,\n        // ç¦æ­¢è°ƒç”¨ require æ—¶ä½¿ç”¨ new æ“ä½œç¬¦\n        \"no-new-require\": 2,\n        // ç¦æ­¢å¯¹ __dirname å’Œ __filename è¿›è¡Œå­—ç¬¦ä¸²è¿æ¥\n        \"no-path-concat\": 0,\n        // ç¦ç”¨ process.env\n        \"no-process-env\": 0,\n        // ç¦ç”¨ process.exit()\n        \"no-process-exit\": 0,\n        // ç¦ç”¨åŒæ­¥æ–¹æ³•\n        \"no-sync\": 0,\n\n        //////////////\n        // é£æ ¼æŒ‡å— //\n        //////////////\n\n        // æŒ‡å®šæ•°ç»„çš„å…ƒç´ ä¹‹é—´è¦ä»¥ç©ºæ ¼éš”å¼€ (, åé¢)ï¼Œ never å‚æ•°ï¼š[ ä¹‹å‰å’Œ ] ä¹‹åä¸èƒ½å¸¦ç©ºæ ¼ï¼Œalways å‚æ•°ï¼š[ ä¹‹å‰å’Œ ] ä¹‹åå¿…é¡»å¸¦ç©ºæ ¼\n        \"array-bracket-spacing\": [2, \"never\"],\n        // ç¦æ­¢æˆ–å¼ºåˆ¶åœ¨å•è¡Œä»£ç å—ä¸­ä½¿ç”¨ç©ºæ ¼ (ç¦ç”¨)\n        \"block-spacing\": [1, \"never\"],\n        // å¼ºåˆ¶ä½¿ç”¨ä¸€è‡´çš„ç¼©è¿› ç¬¬äºŒä¸ªå‚æ•°ä¸º \"tab\" æ—¶ï¼Œä¼šä½¿ç”¨ tabï¼Œ\n        // if while function åé¢çš„ {å¿…é¡»ä¸ if åœ¨åŒä¸€è¡Œï¼Œjava é£æ ¼ã€‚\n        \"brace-style\": [2, \"1tbs\", {\n            \"allowSingleLine\": true\n        }],\n        // åŒå³°é©¼å‘½åæ ¼å¼\n        \"camelcase\": 2,\n        // æ§åˆ¶é€—å·å‰åçš„ç©ºæ ¼\n        \"comma-spacing\": [2, {\n            \"before\": false,\n            \"after\": true\n        }],\n        // æ§åˆ¶é€—å·åœ¨è¡Œå°¾å‡ºç°è¿˜æ˜¯åœ¨è¡Œé¦–å‡ºç° (é»˜è®¤è¡Œå°¾)\n        // http://eslint.org/docs/rules/comma-style\n        \"comma-style\": [2, \"last\"],\n        //\"SwitchCase\" (é»˜è®¤ï¼š0) å¼ºåˆ¶ switch è¯­å¥ä¸­çš„ case å­å¥çš„ç¼©è¿›æ°´å¹³\n        // ä»¥æ–¹æ‹¬å·å–å¯¹è±¡å±æ€§æ—¶ï¼Œ[åé¢å’Œ] å‰é¢æ˜¯å¦éœ€è¦ç©ºæ ¼, å¯é€‰å‚æ•° never, always\n        \"computed-property-spacing\": [2, \"never\"],\n        // ç”¨äºæŒ‡ç»Ÿä¸€åœ¨å›è°ƒå‡½æ•°ä¸­æŒ‡å‘ this çš„å˜é‡åï¼Œç®­å¤´å‡½æ•°ä¸­çš„ this å·²ç»å¯ä»¥æŒ‡å‘å¤–å±‚è°ƒç”¨è€…ï¼Œåº”è¯¥æ²¡åµç”¨äº†\n        // e.g [0,\"that\"] æŒ‡å®šåªèƒ½ var that = this. that ä¸èƒ½æŒ‡å‘å…¶ä»–ä»»ä½•å€¼ï¼Œthis ä¹Ÿä¸èƒ½èµ‹å€¼ç»™ that ä»¥å¤–çš„å…¶ä»–å€¼\n        \"consistent-this\": [1, \"that\"],\n        // å¼ºåˆ¶ä½¿ç”¨å‘½åçš„ function è¡¨è¾¾å¼\n        \"func-names\": 0,\n        // æ–‡ä»¶æœ«å°¾å¼ºåˆ¶æ¢è¡Œ\n        \"eol-last\": 2,\n        \"indent\": [2, 4, {\n            \"SwitchCase\": 1\n        }],\n        // å¼ºåˆ¶åœ¨å¯¹è±¡å­—é¢é‡çš„å±æ€§ä¸­é”®å’Œå€¼ä¹‹é—´ä½¿ç”¨ä¸€è‡´çš„é—´è·\n        \"key-spacing\": [2, {\n            \"beforeColon\": false,\n            \"afterColon\": true\n        }],\n        // å¼ºåˆ¶ä½¿ç”¨ä¸€è‡´çš„æ¢è¡Œé£æ ¼\n        \"linebreak-style\": [1, \"unix\"],\n        // è¦æ±‚åœ¨æ³¨é‡Šå‘¨å›´æœ‰ç©ºè¡Œ (è¦æ±‚åœ¨å—çº§æ³¨é‡Šä¹‹å‰æœ‰ä¸€ç©ºè¡Œ)\n        \"lines-around-comment\": [1, {\n            \"beforeBlockComment\": true\n        }],\n        // å¼ºåˆ¶ä¸€è‡´åœ°ä½¿ç”¨å‡½æ•°å£°æ˜æˆ–å‡½æ•°è¡¨è¾¾å¼ï¼Œæ–¹æ³•å®šä¹‰é£æ ¼ï¼Œå‚æ•°ï¼š\n        // declaration: å¼ºåˆ¶ä½¿ç”¨æ–¹æ³•å£°æ˜çš„æ–¹å¼ï¼Œfunction f(){} e.g [2, \"declaration\"]\n        // expressionï¼šå¼ºåˆ¶ä½¿ç”¨æ–¹æ³•è¡¨è¾¾å¼çš„æ–¹å¼ï¼Œvar f = function() {} e.g [2, \"expression\"]\n        // allowArrowFunctions: declaration é£æ ¼ä¸­å…è®¸ç®­å¤´å‡½æ•°ã€‚ e.g [2, \"declaration\", { \"allowArrowFunctions\": true}]\n        \"func-style\": 0,\n        // å¼ºåˆ¶å›è°ƒå‡½æ•°æœ€å¤§åµŒå¥—æ·±åº¦ 5 å±‚\n        \"max-nested-callbacks\": [1, 5],\n        // ç¦æ­¢ä½¿ç”¨æŒ‡å®šçš„æ ‡è¯†ç¬¦\n        \"id-blacklist\": 0,\n        // å¼ºåˆ¶æ ‡è¯†ç¬¦çš„æœ€æ–°å’Œæœ€å¤§é•¿åº¦\n        \"id-length\": 0,\n        // è¦æ±‚æ ‡è¯†ç¬¦åŒ¹é…ä¸€ä¸ªæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼\n        \"id-match\": 0,\n        // å¼ºåˆ¶åœ¨ JSX å±æ€§ä¸­ä¸€è‡´åœ°ä½¿ç”¨åŒå¼•å·æˆ–å•å¼•å·\n        \"jsx-quotes\": 0,\n        // å¼ºåˆ¶åœ¨å…³é”®å­—å‰åä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼ (å‰åè…°éœ€è¦)\n        \"keyword-spacing\": 2,\n        // å¼ºåˆ¶ä¸€è¡Œçš„æœ€å¤§é•¿åº¦\n        \"max-len\": [1, 200],\n        // å¼ºåˆ¶æœ€å¤§è¡Œæ•°\n        \"max-lines\": 0,\n        // å¼ºåˆ¶ function å®šä¹‰ä¸­æœ€å¤šå…è®¸çš„å‚æ•°æ•°é‡\n        \"max-params\": [1, 7],\n        // å¼ºåˆ¶ function å—æœ€å¤šå…è®¸çš„çš„è¯­å¥æ•°é‡\n        \"max-statements\": [1, 200],\n        // å¼ºåˆ¶æ¯ä¸€è¡Œä¸­æ‰€å…è®¸çš„æœ€å¤§è¯­å¥æ•°é‡\n        \"max-statements-per-line\": 0,\n        // è¦æ±‚æ„é€ å‡½æ•°é¦–å­—æ¯å¤§å†™ ï¼ˆè¦æ±‚è°ƒç”¨ new æ“ä½œç¬¦æ—¶æœ‰é¦–å­—æ¯å¤§å°çš„å‡½æ•°ï¼Œå…è®¸è°ƒç”¨é¦–å­—æ¯å¤§å†™çš„å‡½æ•°æ—¶æ²¡æœ‰ new æ“ä½œç¬¦ã€‚ï¼‰\n        \"new-cap\": [2, {\n            \"newIsCap\": true,\n            \"capIsNew\": false\n        }],\n        // è¦æ±‚è°ƒç”¨æ— å‚æ„é€ å‡½æ•°æ—¶æœ‰åœ†æ‹¬å·\n        \"new-parens\": 2,\n        // è¦æ±‚æˆ–ç¦æ­¢ var å£°æ˜è¯­å¥åæœ‰ä¸€è¡Œç©ºè¡Œ\n        \"newline-after-var\": 0,\n        // ç¦æ­¢ä½¿ç”¨ Array æ„é€ å‡½æ•°\n        \"no-array-constructor\": 2,\n        // ç¦ç”¨æŒ‰ä½è¿ç®—ç¬¦\n        \"no-bitwise\": 0,\n        // è¦æ±‚ return è¯­å¥ä¹‹å‰æœ‰ä¸€ç©ºè¡Œ\n        \"newline-before-return\": 0,\n        // è¦æ±‚æ–¹æ³•é“¾ä¸­æ¯ä¸ªè°ƒç”¨éƒ½æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦\n        \"newline-per-chained-call\": 1,\n        // ç¦ç”¨ continue è¯­å¥\n        \"no-continue\": 0,\n        // ç¦æ­¢åœ¨ä»£ç è¡Œåä½¿ç”¨å†…è”æ³¨é‡Š\n        \"no-inline-comments\": 0,\n        // ç¦æ­¢ if ä½œä¸ºå”¯ä¸€çš„è¯­å¥å‡ºç°åœ¨ else è¯­å¥ä¸­\n        \"no-lonely-if\": 0,\n        // ç¦æ­¢æ··åˆä½¿ç”¨ä¸åŒçš„æ“ä½œç¬¦\n        \"no-mixed-operators\": 0,\n        // ä¸å…è®¸ç©ºæ ¼å’Œ tab æ··åˆç¼©è¿›\n        \"no-mixed-spaces-and-tabs\": 2,\n        // ä¸å…è®¸å¤šä¸ªç©ºè¡Œ\n        \"no-multiple-empty-lines\": [2, {\n            \"max\": 2\n        }],\n        // ä¸å…è®¸å¦å®šçš„è¡¨è¾¾å¼\n        \"no-negated-condition\": 0,\n        // ä¸å…è®¸ä½¿ç”¨åµŒå¥—çš„ä¸‰å…ƒè¡¨è¾¾å¼\n        \"no-nested-ternary\": 0,\n        // ç¦æ­¢ä½¿ç”¨ Object çš„æ„é€ å‡½æ•°\n        \"no-new-object\": 2,\n        // ç¦æ­¢ä½¿ç”¨ä¸€å…ƒæ“ä½œç¬¦ ++ å’Œ --\n        \"no-plusplus\": 0,\n        // ç¦æ­¢ä½¿ç”¨ç‰¹å®šçš„è¯­æ³•\n        \"no-restricted-syntax\": 0,\n        // ç¦æ­¢ function æ ‡è¯†ç¬¦å’Œæ‹¬å·ä¹‹é—´å‡ºç°ç©ºæ ¼\n        \"no-spaced-func\": 2,\n        // ä¸å…è®¸ä½¿ç”¨ä¸‰å…ƒæ“ä½œç¬¦\n        \"no-ternary\": 0,\n        // ç¦ç”¨è¡Œå°¾ç©ºæ ¼\n        \"no-trailing-spaces\": 2,\n        // ç¦æ­¢æ ‡è¯†ç¬¦ä¸­æœ‰æ‚¬ç©ºä¸‹åˆ’çº¿_bar\n        \"no-underscore-dangle\": 0,\n        // ç¦æ­¢å¯ä»¥åœ¨æœ‰æ›´ç®€å•çš„å¯æ›¿ä»£çš„è¡¨è¾¾å¼æ—¶ä½¿ç”¨ä¸‰å…ƒæ“ä½œç¬¦\n        \"no-unneeded-ternary\": 2,\n        // ç¦æ­¢å±æ€§å‰æœ‰ç©ºç™½\n        \"no-whitespace-before-property\": 0,\n        // å¼ºåˆ¶èŠ±æ‹¬å·å†…æ¢è¡Œç¬¦çš„ä¸€è‡´æ€§\n        \"object-curly-newline\": 0,\n        // å¼ºåˆ¶åœ¨èŠ±æ‹¬å·ä¸­ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼\n        \"object-curly-spacing\": 0,\n        // å¼ºåˆ¶å°†å¯¹è±¡çš„å±æ€§æ”¾åœ¨ä¸åŒçš„è¡Œä¸Š\n        \"object-property-newline\": 0,\n        // å¼ºåˆ¶å‡½æ•°ä¸­çš„å˜é‡è¦ä¹ˆä¸€èµ·å£°æ˜è¦ä¹ˆåˆ†å¼€å£°æ˜\n        \"one-var\": [2, {\n            \"initialized\": \"never\"\n        }],\n        // è¦æ±‚æˆ–ç¦æ­¢åœ¨ var å£°æ˜å‘¨å›´æ¢è¡Œ\n        \"one-var-declaration-per-line\": 0,\n        // è¦æ±‚æˆ–ç¦æ­¢åœ¨å¯èƒ½çš„æƒ…å†µä¸‹è¦æ±‚ä½¿ç”¨ç®€åŒ–çš„èµ‹å€¼æ“ä½œç¬¦\n        \"operator-assignment\": 0,\n        // å¼ºåˆ¶æ“ä½œç¬¦ä½¿ç”¨ä¸€è‡´çš„æ¢è¡Œç¬¦\n        \"operator-linebreak\": [2, \"after\", {\n            \"overrides\": {\n                \"?\": \"before\",\n                \":\": \"before\"\n            }\n        }],\n        // è¦æ±‚æˆ–ç¦æ­¢å—å†…å¡«å……\n        \"padded-blocks\": 0,\n        // è¦æ±‚å¯¹è±¡å­—é¢é‡å±æ€§åç§°ç”¨å¼•å·æ‹¬èµ·æ¥\n        \"quote-props\": 0,\n        // å¼ºåˆ¶ä½¿ç”¨ä¸€è‡´çš„åå‹¾å·ã€åŒå¼•å·æˆ–å•å¼•å·\n        \"quotes\": [2, \"double\", \"avoid-escape\"],\n        // è¦æ±‚ä½¿ç”¨ JSDoc æ³¨é‡Š\n        \"require-jsdoc\": 1,\n        // è¦æ±‚æˆ–ç¦æ­¢ä½¿ç”¨åˆ†å·è€Œä¸æ˜¯ ASIï¼ˆè¿™ä¸ªæ‰æ˜¯æ§åˆ¶è¡Œå°¾éƒ¨åˆ†å·çš„ï¼Œï¼‰\n        \"semi\": [2, \"always\"],\n        // å¼ºåˆ¶åˆ†å·ä¹‹å‰å’Œä¹‹åä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼\n        \"semi-spacing\": 0,\n        // è¦æ±‚åŒä¸€ä¸ªå£°æ˜å—ä¸­çš„å˜é‡æŒ‰é¡ºåºæ’åˆ—\n        \"sort-vars\": 0,\n        // å¼ºåˆ¶åœ¨å—ä¹‹å‰ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼\n        \"space-before-blocks\": [2, \"always\"],\n        // å¼ºåˆ¶åœ¨ function çš„å·¦æ‹¬å·ä¹‹å‰ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼\n        \"space-before-function-paren\": [0, \"always\"],\n        // å¼ºåˆ¶åœ¨åœ†æ‹¬å·å†…ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼\n        \"space-in-parens\": [2, \"never\"],\n        // è¦æ±‚æ“ä½œç¬¦å‘¨å›´æœ‰ç©ºæ ¼\n        \"space-infix-ops\": 2,\n        // å¼ºåˆ¶åœ¨ä¸€å…ƒæ“ä½œç¬¦å‰åä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼\n        \"space-unary-ops\": [2, {\n            \"words\": true,\n            \"nonwords\": false\n        }],\n        // å¼ºåˆ¶åœ¨æ³¨é‡Šä¸­ // æˆ– /* ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼\n        \"spaced-comment\": [2, \"always\", {\n            \"markers\": [\"global\", \"globals\", \"eslint\", \"eslint-disable\", \"*package\", \"!\"]\n        }],\n        // è¦æ±‚æˆ–ç¦æ­¢ Unicode BOM\n        \"unicode-bom\": 0,\n        // è¦æ±‚æ­£åˆ™è¡¨è¾¾å¼è¢«æ‹¬å·æ‹¬èµ·æ¥\n        \"wrap-regex\": 0,\n\n        //////////////\n        // ES6. ç›¸å…³ //\n        //////////////\n\n        // è¦æ±‚ç®­å¤´å‡½æ•°ä½“ä½¿ç”¨å¤§æ‹¬å·\n        \"arrow-body-style\": 2,\n        // è¦æ±‚ç®­å¤´å‡½æ•°çš„å‚æ•°ä½¿ç”¨åœ†æ‹¬å·\n        \"arrow-parens\": 2,\n        \"arrow-spacing\": [2, {\n            \"before\": true,\n            \"after\": true\n        }],\n        // å¼ºåˆ¶åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­ç”¨ super() è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼ŒTypeScrip çš„ç¼–è¯‘å™¨ä¹Ÿä¼šæç¤º\n        \"constructor-super\": 0,\n        // å¼ºåˆ¶ generator å‡½æ•°ä¸­ * å·å‘¨å›´ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼\n        \"generator-star-spacing\": [2, {\n            \"before\": true,\n            \"after\": true\n        }],\n        // ç¦æ­¢ä¿®æ”¹ç±»å£°æ˜çš„å˜é‡\n        \"no-class-assign\": 2,\n        // ä¸å…è®¸ç®­å¤´åŠŸèƒ½ï¼Œåœ¨é‚£é‡Œä»–ä»¬å¯ä»¥æ··æ·†çš„æ¯”è¾ƒ\n        \"no-confusing-arrow\": 0,\n        // ç¦æ­¢ä¿®æ”¹ const å£°æ˜çš„å˜é‡\n        \"no-const-assign\": 2,\n        // ç¦æ­¢ç±»æˆå‘˜ä¸­å‡ºç°é‡å¤çš„åç§°\n        \"no-dupe-class-members\": 2,\n        // ä¸å…è®¸å¤åˆ¶æ¨¡å—çš„è¿›å£\n        \"no-duplicate-imports\": 0,\n        // ç¦æ­¢ Symbol çš„æ„é€ å‡½æ•°\n        \"no-new-symbol\": 2,\n        // å…è®¸æŒ‡å®šæ¨¡å—åŠ è½½æ—¶çš„è¿›å£\n        \"no-restricted-imports\": 0,\n        // ç¦æ­¢åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œåœ¨è°ƒç”¨ super() ä¹‹å‰ä½¿ç”¨ this æˆ– super\n        \"no-this-before-super\": 2,\n        // ç¦æ­¢ä¸å¿…è¦çš„è®¡ç®—æ€§èƒ½é”®å¯¹è±¡çš„æ–‡å­—\n        \"no-useless-computed-key\": 0,\n        // è¦æ±‚ä½¿ç”¨ let æˆ– const è€Œä¸æ˜¯ var\n        \"no-var\": 0,\n        // è¦æ±‚æˆ–ç¦æ­¢å¯¹è±¡å­—é¢é‡ä¸­æ–¹æ³•å’Œå±æ€§ä½¿ç”¨ç®€å†™è¯­æ³•\n        \"object-shorthand\": 0,\n        // è¦æ±‚ä½¿ç”¨ç®­å¤´å‡½æ•°ä½œä¸ºå›è°ƒ\n        \"prefer-arrow-callback\": 0,\n        // è¦æ±‚ä½¿ç”¨ const å£°æ˜é‚£äº›å£°æ˜åä¸å†è¢«ä¿®æ”¹çš„å˜é‡\n        \"prefer-const\": 0,\n        // è¦æ±‚åœ¨åˆé€‚çš„åœ°æ–¹ä½¿ç”¨ Reflect æ–¹æ³•\n        \"prefer-reflect\": 0,\n        // è¦æ±‚ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦è€Œé .apply()\n        \"prefer-spread\": 0,\n        // è¦æ±‚ä½¿ç”¨æ¨¡æ¿å­—é¢é‡è€Œéå­—ç¬¦ä¸²è¿æ¥\n        \"prefer-template\": 0,\n        // Suggest using the rest parameters instead of arguments\n        \"prefer-rest-params\": 0,\n        // è¦æ±‚ generator å‡½æ•°å†…æœ‰ yield\n        \"require-yield\": 0,\n        // enforce spacing between rest and spread operators and their expressions\n        \"rest-spread-spacing\": 0,\n        // å¼ºåˆ¶æ¨¡å—å†…çš„ import æ’åº\n        \"sort-imports\": 0,\n        // è¦æ±‚æˆ–ç¦æ­¢æ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„åµŒå…¥è¡¨è¾¾å¼å‘¨å›´ç©ºæ ¼çš„ä½¿ç”¨\n        \"template-curly-spacing\": 1,\n        // å¼ºåˆ¶åœ¨ yield* è¡¨è¾¾å¼ä¸­ * å‘¨å›´ä½¿ç”¨ç©ºæ ¼\n        \"yield-star-spacing\": 2\n    }\n}\n```\n","slug":"ä»£ç æ´ç™–å…»æˆæŒ‡å—","published":1,"updated":"2019-12-07T04:53:18.094Z","layout":"post","photos":[],"link":"","_id":"ck3v60jtk000lr9q9t83gmtne","content":"<p>è¿™ç¯‡æ–‡ç« æˆ‘ä»å‡ ä¸ªæ–¹é¢æ¥ä»‹ç»æˆ‘æ˜¯å¦‚ä½•é…ç½®å¼€å‘ç¯å¢ƒçš„ï¼Œå°½å¯èƒ½ä½¿ä»£ç ç¼–å†™é£æ ¼ç»Ÿä¸€ã€‚å…¶å®ä¸å…‰æ˜¯ä»£ç ï¼ŒåŒ…æ‹¬æ—¥å¸¸æ–‡å­—ï¼Œéƒ½æœ‰å¾ˆå¤šè§„èŒƒã€‚æ¯”å¦‚æœ€å¸¸è§çš„ä¸­è‹±æ–‡ä¹‹é—´æ·»åŠ ç©ºæ ¼ï¼Œå¯èƒ½å¾ˆå¤šäººå¹¶æ²¡æœ‰åœ¨æ„ã€‚ä½†æ˜¯çœ‹åˆ°åˆ«äººçš„æ–‡ç« é‡Œå‡ºç°è¿™æ ·çš„é—®é¢˜ï¼Œè‚¯å®šæ˜¯è¦å‡å°è±¡åˆ†çš„ã€‚</p>\n<a id=\"more\"></a>\n<p>å› ä¸ºæˆ‘æ—¥å¸¸ä½¿ç”¨ <strong>VSCode</strong>ï¼Œæ‰€ä»¥è¿™é‡Œç›¸å…³é…ç½®éƒ½ä»¥è¿™ä¸ªå±•å¼€ã€‚</p>\n<h3 id=\"æ‰©å±•\"><a href=\"#æ‰©å±•\" class=\"headerlink\" title=\"æ‰©å±•\"></a>æ‰©å±•</h3><ul>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig\" target=\"_blank\" rel=\"noopener\">EditorConfig for VS Code</a></li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint\" target=\"_blank\" rel=\"noopener\">ESLint</a></li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode\" target=\"_blank\" rel=\"noopener\">Prettier - Code formatter</a></li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=baurine.vscode-pangu\" target=\"_blank\" rel=\"noopener\">VSCode-Pangu</a></li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker\" target=\"_blank\" rel=\"noopener\">Code Spell Checker</a></li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow\" target=\"_blank\" rel=\"noopener\">Indent-Rainbow</a></li>\n</ul>\n<p>ä¸‹é¢æ¥æˆ‘ç®€å•ä»‹ç»ä¸€ä¸‹æ¯ä¸ªæ’ä»¶çš„åŠŸèƒ½ã€‚</p>\n<ul>\n<li>EditorConfigï¼šç”Ÿæˆ <code>.editorconfig</code> é…ç½®æ–‡ä»¶ï¼Œè§„å®šå½“å‰ç¼–è¾‘å™¨çš„ä¸€äº›è®¾å®šã€‚</li>\n<li>ESLintï¼šé›†æˆ Eslint åˆ° VSCodeï¼Œå…·ä½“çœ‹ Eslint çš„å®˜æ–¹æ–‡æ¡£ã€‚</li>\n<li>Prettierï¼šEslint ä¾§é‡äºé™æ€æ ¡éªŒï¼Œè€Œ Prettier åˆ™è´Ÿè´£æŒ‰ç…§ä¸€äº›è§„åˆ™ç¾åŒ–ä»£ç ã€‚</li>\n<li>VSCode-Panguï¼šè‡ªåŠ¨åœ¨ä¸­è‹±æ–‡ä¹‹é—´æ·»åŠ ç©ºæ ¼ã€‚</li>\n<li>Code Spell Checkerï¼šå•è¯æ‹¼å†™æ£€æŸ¥ã€‚</li>\n<li>Indent-Rainbowï¼šå½©è™¹ç¼©è¿›ï¼Œç¼©è¿›ä¸è§„èŒƒæ—¶ä¼šæ ‡çº¢æç¤ºã€‚</li>\n</ul>\n<h3 id=\"åå¥½\"><a href=\"#åå¥½\" class=\"headerlink\" title=\"åå¥½\"></a>åå¥½</h3><h4 id=\"VSCode-Settings\"><a href=\"#VSCode-Settings\" class=\"headerlink\" title=\"VSCode Settings\"></a>VSCode Settings</h4><p>å®‰è£…æ’ä»¶ï¼šESLintã€Prettier åï¼Œåœ¨ settings é…ç½®ä¸‹é¢çš„é€‰é¡¹ï¼Œå³å¯å®ç°ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// å¼€å¯ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œè°ƒç”¨ Prettier æ—¶è‡ªåŠ¨ eslint -fix</span></span><br><span class=\"line\">  <span class=\"string\">\"editor.formatOnSave\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"comment\">// ä¸éœ€è¦ fix äº†ï¼ŒPrettier ä¼šè‡ªåŠ¨ fix</span></span><br><span class=\"line\">  <span class=\"string\">\"eslint.autoFixOnSave\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  <span class=\"comment\">// å‘Šè¯‰ Prettier ä½¿ç”¨ `prettier-eslint` æ¥ä»£æ›¿ Prettier</span></span><br><span class=\"line\">  <span class=\"string\">\"prettier.eslintIntegration\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Lint\"><a href=\"#Lint\" class=\"headerlink\" title=\"Lint\"></a>Lint</h3><h4 id=\"ä½¿ç”¨-Prettier-æŒ‰ç…§-Eslint-ç¾åŒ–ä»£ç \"><a href=\"#ä½¿ç”¨-Prettier-æŒ‰ç…§-Eslint-ç¾åŒ–ä»£ç \" class=\"headerlink\" title=\"ä½¿ç”¨ Prettier æŒ‰ç…§ Eslint ç¾åŒ–ä»£ç \"></a>ä½¿ç”¨ Prettier æŒ‰ç…§ Eslint ç¾åŒ–ä»£ç </h4><ul>\n<li>å®‰è£… <code>prettier-eslint-cli</code></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i prettier-eslint-cli --save-dev</span><br></pre></td></tr></table></figure>\n<ul>\n<li>é…ç½® <code>prettier</code>ï¼Œåœ¨ <code>package.json</code> æ·»åŠ </li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"lint\"</span>: <span class=\"string\">\"eslint *.js\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"format\"</span>: <span class=\"string\">\"prettier-eslint --write *.js\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"eslintConfig\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"extends\"</span>: <span class=\"string\">\"some-config\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"prettier\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"singleQuote\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"semi\"</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç»è¿‡ä¸Šé¢é…ç½®åï¼Œç¼–è¾‘å™¨å°±å¯ä»¥åœ¨ä¿å­˜æ–‡ä»¶æ—¶ï¼Œè‡ªåŠ¨æŒ‰ç…§ Eslint æ ¼å¼åŒ–ã€‚</p>\n<h4 id=\"ä½¿ç”¨-Standard-è§„èŒƒ\"><a href=\"#ä½¿ç”¨-Standard-è§„èŒƒ\" class=\"headerlink\" title=\"ä½¿ç”¨ Standard è§„èŒƒ\"></a>ä½¿ç”¨ Standard è§„èŒƒ</h4><p><a href=\"https://github.com/standard\" target=\"_blank\" rel=\"noopener\">Standard</a> å…¶å®å¹¶ä¸æ˜¯æ ‡å‡†ç»„ç»‡å‡ºçš„è§„èŒƒï¼Œä½†æ˜¯è¡Œä¸šå†…ä½¿ç”¨çš„æ¯”è¾ƒå¤šã€‚çœ‹æ¥çœ‹å»ï¼Œå¥½åƒå„ç§å„æ ·çš„çº¦å®šéƒ½æ²¡æœ‰ä¸€ä¸ªæ ‡å‡†ã€‚æˆ‘çœ‹äº†ä¸€ä¸‹ï¼Œç›®å‰æ¥è¯´ <code>standard</code> è¿˜ç®—æœ‰å½±å“åŠ›ã€‚æ‰“ç®—ä»¥ååœ¨ä¸ªäººé¡¹ç›®ä¸­å…¨éƒ¨é‡‡ç”¨è¿™ç§é£æ ¼ï¼Œç„¶åæŠŠå‰©ä¸‹çš„æ—¶é—´å»åšç‚¹æœ‰æ„ä¹‰çš„äº‹ã€‚é…ç½®ä¸€å † <code>.eslintrc</code> <code>.jscsrc</code> <code>.jshintrc</code> çœŸçš„å¾ˆå¤´ç–¼ã€‚</p>\n<p>â˜ï¸ <strong>åˆå§‹åŒ–æ–°é¡¹ç›®</strong></p>\n<ul>\n<li>å®‰è£…ä¾èµ–</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install eslint \\</span><br><span class=\"line\">    eslint-config-standard \\</span><br><span class=\"line\">    eslint-plugin-standard \\</span><br><span class=\"line\">    eslint-plugin-promise \\</span><br><span class=\"line\">    eslint-plugin-import \\</span><br><span class=\"line\">    eslint-plugin-node \\</span><br><span class=\"line\">    eslint-plugin-markdown \\</span><br><span class=\"line\">    --save-dev</span><br></pre></td></tr></table></figure>\n<ul>\n<li>æ·»åŠ  <code>.eslintrc</code></li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"extends\"</span>: <span class=\"string\">\"standard\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>OKï¼Œç°åœ¨è®© Eslint æŒ‰ç…§ standard çš„è§„åˆ™æ¥çº¦æŸäº†ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¦å¤–çš„è§„åˆ™æ¥è¦†ç›–ã€‚</p>\n<p>â˜ï¸ <strong>å…¨å±€ä½¿ç”¨</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å…¨å±€å®‰è£…</span></span><br><span class=\"line\">$ npm i standard -g</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ ¡éªŒç›®å½•ä¸‹ *.js/*.jsx</span></span><br><span class=\"line\">$ standard</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ä¿®å¤</span></span><br><span class=\"line\">$ standard --fix</span><br></pre></td></tr></table></figure>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>ä»¥åçš„æ–°é¡¹ç›®æˆ‘ä¼šé‡‡ç”¨ Standard ä½œä¸ºçº¦æŸè§„èŒƒï¼Œå¯¹äºå·²æœ‰é¡¹ç›®æˆ‘ä½¿ç”¨ Prettier è‡ªåŠ¨æŒ‰ç…§ Eslint è§„åˆ™è‡ªåŠ¨ç¾åŒ–ï¼Œæ—¥å¸¸ä¸€äº›ä»£ç ç‰‡æ®µä½¿ç”¨ Standard å…¨å±€å‘½ä»¤ï¼Œç®€å•å®ç”¨ã€‚</p>\n<p>å‚è€ƒä»¥ä¸‹æ–‡æ¡£ã€‚</p>\n<ul>\n<li><a href=\"https://github.com/standard/standard/blob/master/docs/README-zhcn.md\" target=\"_blank\" rel=\"noopener\">standard/standard @Github</a></li>\n<li><a href=\"https://github.com/standard/eslint-config-standard\" target=\"_blank\" rel=\"noopener\">standard/eslint-config-standard @Github</a></li>\n<li><a href=\"https://github.com/expressjs/body-parser\" target=\"_blank\" rel=\"noopener\">Standard Style Demo @Github</a></li>\n<li><a href=\"https://cn.eslint.org/\" target=\"_blank\" rel=\"noopener\">ESLint @ä¸­æ–‡å®˜ç½‘</a></li>\n<li><a href=\"https://egoist.moe/2017/12/11/write-better-code-with-eslint-and-prettier/\" target=\"_blank\" rel=\"noopener\">ç”¨ ESLint å’Œ Prettier å†™å‡ºé«˜è´¨é‡ä»£ç  @EGOIST</a></li>\n</ul>\n<h3 id=\"é™„ï¼šEslint-è§„åˆ™\"><a href=\"#é™„ï¼šEslint-è§„åˆ™\" class=\"headerlink\" title=\"é™„ï¼šEslint è§„åˆ™\"></a>é™„ï¼šEslint è§„åˆ™</h3><h4 id=\"å…³é—­æ ¡éªŒ\"><a href=\"#å…³é—­æ ¡éªŒ\" class=\"headerlink\" title=\"å…³é—­æ ¡éªŒ\"></a>å…³é—­æ ¡éªŒ</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å…³é—­å½“å‰æ–‡ä»¶</span></span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å…³é—­å½“å‰è¡Œæ ¡éªŒ</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">1</span>; <span class=\"comment\">// eslint-disable-line</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å…³é—­ä¸‹ä¸€è¡Œæ ¡éªŒ</span></span><br><span class=\"line\"><span class=\"comment\">// eslint-disable-next-line</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> b = <span class=\"number\">2</span>;</span><br></pre></td></tr></table></figure>\n<h4 id=\"è¯¦ç»†è§„åˆ™\"><a href=\"#è¯¦ç»†è§„åˆ™\" class=\"headerlink\" title=\"è¯¦ç»†è§„åˆ™\"></a>è¯¦ç»†è§„åˆ™</h4><ul>\n<li>0ï¼šå…³é—­</li>\n<li>1ï¼šè­¦å‘Šï¼Œä»…ç»™å‡ºè­¦å‘Š</li>\n<li>2ï¼šé”™è¯¯ï¼Œåœæ­¢æ‰§è¡Œ</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br><span class=\"line\">518</span><br><span class=\"line\">519</span><br><span class=\"line\">520</span><br><span class=\"line\">521</span><br><span class=\"line\">522</span><br><span class=\"line\">523</span><br><span class=\"line\">524</span><br><span class=\"line\">525</span><br><span class=\"line\">526</span><br><span class=\"line\">527</span><br><span class=\"line\">528</span><br><span class=\"line\">529</span><br><span class=\"line\">530</span><br><span class=\"line\">531</span><br><span class=\"line\">532</span><br><span class=\"line\">533</span><br><span class=\"line\">534</span><br><span class=\"line\">535</span><br><span class=\"line\">536</span><br><span class=\"line\">537</span><br><span class=\"line\">538</span><br><span class=\"line\">539</span><br><span class=\"line\">540</span><br><span class=\"line\">541</span><br><span class=\"line\">542</span><br><span class=\"line\">543</span><br><span class=\"line\">544</span><br><span class=\"line\">545</span><br><span class=\"line\">546</span><br><span class=\"line\">547</span><br><span class=\"line\">548</span><br><span class=\"line\">549</span><br><span class=\"line\">550</span><br><span class=\"line\">551</span><br><span class=\"line\">552</span><br><span class=\"line\">553</span><br><span class=\"line\">554</span><br><span class=\"line\">555</span><br><span class=\"line\">556</span><br><span class=\"line\">557</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ç¯å¢ƒå®šä¹‰äº†é¢„å®šä¹‰çš„å…¨å±€å˜é‡ã€‚</span></span><br><span class=\"line\">    <span class=\"string\">\"env\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ç¯å¢ƒå®šä¹‰äº†é¢„å®šä¹‰çš„å…¨å±€å˜é‡ã€‚æ›´å¤šåœ¨å®˜ç½‘æŸ¥çœ‹</span></span><br><span class=\"line\">        <span class=\"string\">\"browser\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"string\">\"node\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"string\">\"commonjs\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"string\">\"amd\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"string\">\"es6\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"string\">\"mocha\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// JavaScript è¯­è¨€é€‰é¡¹</span></span><br><span class=\"line\">    <span class=\"string\">\"parserOptions\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ECMAScript ç‰ˆæœ¬</span></span><br><span class=\"line\">        <span class=\"string\">\"ecmaVersion\"</span>: <span class=\"number\">6</span>,</span><br><span class=\"line\">        <span class=\"string\">\"sourceType\"</span>: <span class=\"string\">\"module\"</span>, <span class=\"comment\">// è®¾ç½®ä¸º \"script\" (é»˜è®¤) æˆ– \"module\"ï¼ˆå¦‚æœä½ çš„ä»£ç æ˜¯ ECMAScript æ¨¡å—)ã€‚</span></span><br><span class=\"line\">        <span class=\"comment\">// æƒ³ä½¿ç”¨çš„é¢å¤–çš„è¯­è¨€ç‰¹æ€§:</span></span><br><span class=\"line\">        <span class=\"string\">\"ecmaFeatures\"</span>: &#123;</span><br><span class=\"line\">            <span class=\"comment\">// å…è®¸åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ä½¿ç”¨ return è¯­å¥</span></span><br><span class=\"line\">            <span class=\"string\">\"globalReturn\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"comment\">// impliedStric</span></span><br><span class=\"line\">            <span class=\"string\">\"impliedStrict\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"comment\">// å¯ç”¨ JSX</span></span><br><span class=\"line\">            <span class=\"string\">\"jsx\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"string\">\"modules\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// è®© eslint æ”¯æŒ JSX start</span></span><br><span class=\"line\">    <span class=\"string\">\"plugins\"</span>: [</span><br><span class=\"line\">        <span class=\"string\">\"react\"</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">\"extends\"</span>: [</span><br><span class=\"line\">        <span class=\"string\">\"eslint:recommended\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"plugin:react/recommended\"</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"comment\">// è®© eslint æ”¯æŒ JSX end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">\"rules\"</span>: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">////////////////</span></span><br><span class=\"line\">        <span class=\"comment\">// å¯èƒ½çš„é”™è¯¯ //</span></span><br><span class=\"line\">        <span class=\"comment\">////////////////</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æ¡ä»¶è¡¨è¾¾å¼ä¸­å‡ºç°èµ‹å€¼æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-cond-assign\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ console</span></span><br><span class=\"line\">        <span class=\"string\">\"no-console\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨æ¡ä»¶ä¸­ä½¿ç”¨å¸¸é‡è¡¨è¾¾å¼</span></span><br><span class=\"line\">        <span class=\"comment\">// if (false) &#123;</span></span><br><span class=\"line\">        <span class=\"comment\">// doSomethingUnfinished();</span></span><br><span class=\"line\">        <span class=\"comment\">// &#125; //cuowu</span></span><br><span class=\"line\">        <span class=\"string\">\"no-constant-condition\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ§åˆ¶å­—ç¬¦ ï¼šnew RegExp(\"\\x1f\")</span></span><br><span class=\"line\">        <span class=\"string\">\"no-control-regex\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// æ•°ç»„å’Œå¯¹è±¡é”®å€¼å¯¹æœ€åä¸€ä¸ªé€—å·ï¼Œ never å‚æ•°ï¼šä¸èƒ½å¸¦æœ«å°¾çš„é€—å·, always å‚æ•°ï¼šå¿…é¡»å¸¦æœ«å°¾çš„é€—å·ï¼Œ</span></span><br><span class=\"line\">        <span class=\"comment\">// always-multilineï¼šå¤šè¡Œæ¨¡å¼å¿…é¡»å¸¦é€—å·ï¼Œå•è¡Œæ¨¡å¼ä¸èƒ½å¸¦é€—å·</span></span><br><span class=\"line\">        <span class=\"string\">\"comma-dangle\"</span>: [<span class=\"number\">1</span>, <span class=\"string\">\"never\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ debugger</span></span><br><span class=\"line\">        <span class=\"string\">\"no-debugger\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ function å®šä¹‰ä¸­å‡ºç°é‡åå‚æ•°</span></span><br><span class=\"line\">        <span class=\"string\">\"no-dupe-args\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å¯¹è±¡å­—é¢é‡ä¸­å‡ºç°é‡å¤çš„ key</span></span><br><span class=\"line\">        <span class=\"string\">\"no-dupe-keys\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢é‡å¤çš„ case æ ‡ç­¾</span></span><br><span class=\"line\">        <span class=\"string\">\"no-duplicate-case\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ç©ºè¯­å¥å—</span></span><br><span class=\"line\">        <span class=\"string\">\"no-empty\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨ç©ºå­—ç¬¦é›† (/^abc[]/)</span></span><br><span class=\"line\">        <span class=\"string\">\"no-empty-character-class\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å¯¹ catch å­å¥çš„å‚æ•°é‡æ–°èµ‹å€¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-ex-assign\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¸å¿…è¦çš„å¸ƒå°”è½¬æ¢</span></span><br><span class=\"line\">        <span class=\"string\">\"no-extra-boolean-cast\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¸å¿…è¦çš„æ‹¬å· //(a * b) + c;// æŠ¥é”™</span></span><br><span class=\"line\">        <span class=\"string\">\"no-extra-parens\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¸å¿…è¦çš„åˆ†å·</span></span><br><span class=\"line\">        <span class=\"string\">\"no-extra-semi\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å¯¹ function å£°æ˜é‡æ–°èµ‹å€¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-func-assign\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨åµŒå¥—çš„å—ä¸­å‡ºç° function æˆ– var å£°æ˜</span></span><br><span class=\"line\">        <span class=\"string\">\"no-inner-declarations\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"functions\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ RegExp æ„é€ å‡½æ•°ä¸­æ— æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²</span></span><br><span class=\"line\">        <span class=\"string\">\"no-invalid-regexp\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨å­—ç¬¦ä¸²å’Œæ³¨é‡Šä¹‹å¤–ä¸è§„åˆ™çš„ç©ºç™½</span></span><br><span class=\"line\">        <span class=\"string\">\"no-irregular-whitespace\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨ in è¡¨è¾¾å¼ä¸­å‡ºç°å¦å®šçš„å·¦æ“ä½œæ•°</span></span><br><span class=\"line\">        <span class=\"string\">\"no-negated-in-lhs\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æŠŠå…¨å±€å¯¹è±¡ (Math å’Œ JSON) ä½œä¸ºå‡½æ•°è°ƒç”¨ é”™è¯¯ï¼švar math = Math();</span></span><br><span class=\"line\">        <span class=\"string\">\"no-obj-calls\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ç›´æ¥ä½¿ç”¨ Object.prototypes çš„å†…ç½®å±æ€§</span></span><br><span class=\"line\">        <span class=\"string\">\"no-prototype-builtins\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡ä¸­å‡ºç°å¤šä¸ªç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-regex-spaces\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ç¨€ç–æ•°ç»„</span></span><br><span class=\"line\">        <span class=\"string\">\"no-sparse-arrays\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å‡ºç°ä»¤äººå›°æƒ‘çš„å¤šè¡Œè¡¨è¾¾å¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-unexpected-multiline\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨ returnã€throwã€continue å’Œ break è¯­å¥ä¹‹åå‡ºç°ä¸å¯è¾¾ä»£ç </span></span><br><span class=\"line\">        <span class=\"string\">\"no-unreachable\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ä½¿ç”¨ isNaN() æ£€æŸ¥ NaN</span></span><br><span class=\"line\">        <span class=\"string\">\"use-isnan\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ä½¿ç”¨æœ‰æ•ˆçš„ JSDoc æ³¨é‡Š</span></span><br><span class=\"line\">        <span class=\"string\">\"valid-jsdoc\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ typeof è¡¨è¾¾å¼ä¸æœ‰æ•ˆçš„å­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class=\"line\">        <span class=\"comment\">// typeof foo === \"undefimed\" é”™è¯¯</span></span><br><span class=\"line\">        <span class=\"string\">\"valid-typeof\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//////////////</span></span><br><span class=\"line\">        <span class=\"comment\">// æœ€ä½³å®è·µ //</span></span><br><span class=\"line\">        <span class=\"comment\">//////////////</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// å®šä¹‰å¯¹è±¡çš„ set å­˜å–å™¨å±æ€§æ—¶ï¼Œå¼ºåˆ¶å®šä¹‰ get</span></span><br><span class=\"line\">        <span class=\"string\">\"accessor-pairs\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶æ•°ç»„æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸­æœ‰ return è¯­å¥</span></span><br><span class=\"line\">        <span class=\"string\">\"array-callback-return\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶æŠŠå˜é‡çš„ä½¿ç”¨é™åˆ¶åœ¨å…¶å®šä¹‰çš„ä½œç”¨åŸŸèŒƒå›´å†…</span></span><br><span class=\"line\">        <span class=\"string\">\"block-scoped-var\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// é™åˆ¶åœˆå¤æ‚åº¦ï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼ if else èƒ½è¿ç»­æ¥å¤šå°‘ä¸ª</span></span><br><span class=\"line\">        <span class=\"string\">\"complexity\"</span>: [<span class=\"number\">2</span>, <span class=\"number\">9</span>],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ return è¯­å¥è¦ä¹ˆæ€»æ˜¯æŒ‡å®šè¿”å›çš„å€¼ï¼Œè¦ä¹ˆä¸æŒ‡å®š</span></span><br><span class=\"line\">        <span class=\"string\">\"consistent-return\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶æ‰€æœ‰æ§åˆ¶è¯­å¥ä½¿ç”¨ä¸€è‡´çš„æ‹¬å·é£æ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"curly\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"all\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// switch è¯­å¥å¼ºåˆ¶ default åˆ†æ”¯ï¼Œä¹Ÿå¯æ·»åŠ  // no default æ³¨é‡Šå–æ¶ˆæ­¤æ¬¡è­¦å‘Š</span></span><br><span class=\"line\">        <span class=\"string\">\"default-case\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ object.key ä¸­ . çš„ä½ç½®ï¼Œå‚æ•°:</span></span><br><span class=\"line\">        <span class=\"comment\">// propertyï¼Œ'.'å·åº”ä¸å±æ€§åœ¨åŒä¸€è¡Œ</span></span><br><span class=\"line\">        <span class=\"comment\">// object, '.' å·åº”ä¸å¯¹è±¡ååœ¨åŒä¸€è¡Œ</span></span><br><span class=\"line\">        <span class=\"string\">\"dot-location\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"property\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ä½¿ç”¨. å·å–å±æ€§</span></span><br><span class=\"line\">        <span class=\"comment\">// å‚æ•°ï¼š allowKeywordsï¼štrue ä½¿ç”¨ä¿ç•™å­—åšå±æ€§åæ—¶ï¼Œåªèƒ½ä½¿ç”¨. æ–¹å¼å–å±æ€§</span></span><br><span class=\"line\">        <span class=\"comment\">// false ä½¿ç”¨ä¿ç•™å­—åšå±æ€§åæ—¶, åªèƒ½ä½¿ç”¨ [] æ–¹å¼å–å±æ€§ e.g [2, &#123;\"allowKeywords\": false&#125;]</span></span><br><span class=\"line\">        <span class=\"comment\">// allowPattern: å½“å±æ€§ååŒ¹é…æä¾›çš„æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œå…è®¸ä½¿ç”¨ [] æ–¹å¼å–å€¼, å¦åˆ™åªèƒ½ç”¨. å·å–å€¼ e.g [2, &#123;\"allowPattern\": \"^[a-z]+(_[a-z]+)+$\"&#125;]</span></span><br><span class=\"line\">        <span class=\"string\">\"dot-notation\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"allowKeywords\"</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// ä½¿ç”¨ === æ›¿ä»£ == allow-null å…è®¸ null å’Œ undefined==</span></span><br><span class=\"line\">        <span class=\"string\">\"eqeqeq\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"allow-null\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ for-in å¾ªç¯ä¸­æœ‰ä¸€ä¸ª if è¯­å¥</span></span><br><span class=\"line\">        <span class=\"string\">\"guard-for-in\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ alertã€confirm å’Œ prompt</span></span><br><span class=\"line\">        <span class=\"string\">\"no-alert\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ arguments.caller æˆ– arguments.callee</span></span><br><span class=\"line\">        <span class=\"string\">\"no-caller\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸åœ¨ case å­å¥ä¸­ä½¿ç”¨è¯æ³•å£°æ˜</span></span><br><span class=\"line\">        <span class=\"string\">\"no-case-declarations\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢é™¤æ³•æ“ä½œç¬¦æ˜¾å¼çš„å‡ºç°åœ¨æ­£åˆ™è¡¨è¾¾å¼å¼€å§‹çš„ä½ç½®</span></span><br><span class=\"line\">        <span class=\"string\">\"no-div-regex\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ if è¯­å¥ä¸­æœ‰ return ä¹‹åæœ‰ else</span></span><br><span class=\"line\">        <span class=\"string\">\"no-else-return\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å‡ºç°ç©ºå‡½æ•°. å¦‚æœä¸€ä¸ªå‡½æ•°åŒ…å«äº†ä¸€æ¡æ³¨é‡Šï¼Œå®ƒå°†ä¸ä¼šè¢«è®¤ä¸ºæœ‰é—®é¢˜ã€‚</span></span><br><span class=\"line\">        <span class=\"string\">\"no-empty-function\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨ç©ºè§£æ„æ¨¡å¼ no-empty-pattern</span></span><br><span class=\"line\">        <span class=\"string\">\"no-empty-pattern\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨æ²¡æœ‰ç±»å‹æ£€æŸ¥æ“ä½œç¬¦çš„æƒ…å†µä¸‹ä¸ null è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class=\"line\">        <span class=\"string\">\"no-eq-null\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ eval()</span></span><br><span class=\"line\">        <span class=\"string\">\"no-eval\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æ‰©å±•åŸç”Ÿç±»å‹</span></span><br><span class=\"line\">        <span class=\"string\">\"no-extend-native\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¸å¿…è¦çš„ .bind() è°ƒç”¨</span></span><br><span class=\"line\">        <span class=\"string\">\"no-extra-bind\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ä¸å¿…è¦çš„æ ‡ç­¾</span></span><br><span class=\"line\">        <span class=\"string\">\"no-extra-label:\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ case è¯­å¥è½ç©º</span></span><br><span class=\"line\">        <span class=\"string\">\"no-fallthrough\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æ•°å­—å­—é¢é‡ä¸­ä½¿ç”¨å‰å¯¼å’Œæœ«å°¾å°æ•°ç‚¹</span></span><br><span class=\"line\">        <span class=\"string\">\"no-floating-decimal\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨çŸ­ç¬¦å·è¿›è¡Œç±»å‹è½¬æ¢ (!!fOO)</span></span><br><span class=\"line\">        <span class=\"string\">\"no-implicit-coercion\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨å…¨å±€èŒƒå›´å†…ä½¿ç”¨ var å’Œå‘½åçš„ function å£°æ˜</span></span><br><span class=\"line\">        <span class=\"string\">\"no-implicit-globals\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨ç±»ä¼¼ eval() çš„æ–¹æ³•</span></span><br><span class=\"line\">        <span class=\"string\">\"no-implied-eval\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ this å…³é”®å­—å‡ºç°åœ¨ç±»å’Œç±»å¯¹è±¡ä¹‹å¤–</span></span><br><span class=\"line\">        <span class=\"string\">\"no-invalid-this\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ __iterator__ å±æ€§</span></span><br><span class=\"line\">        <span class=\"string\">\"no-iterator\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨æ ‡ç­¾è¯­å¥</span></span><br><span class=\"line\">        <span class=\"string\">\"no-labels\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ä¸å¿…è¦çš„åµŒå¥—å—</span></span><br><span class=\"line\">        <span class=\"string\">\"no-lone-blocks\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨å¾ªç¯ä¸­å‡ºç° function å£°æ˜å’Œè¡¨è¾¾å¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-loop-func\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨é­”æœ¯æ•°å­— (3.14 ä»€ä¹ˆçš„ç”¨å¸¸é‡ä»£æ›¿)</span></span><br><span class=\"line\">        <span class=\"string\">\"no-magic-numbers\"</span>: [<span class=\"number\">1</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"ignore\"</span>: [<span class=\"number\">0</span>, <span class=\"number\">-1</span>, <span class=\"number\">1</span>]</span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨å¤šä¸ªç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-multi-spaces\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²ï¼Œåœ¨ JavaScript ä¸­ï¼Œå¯ä»¥åœ¨æ–°è¡Œä¹‹å‰ä½¿ç”¨æ–œçº¿åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²</span></span><br><span class=\"line\">        <span class=\"string\">\"no-multi-str\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å¯¹åŸç”Ÿå¯¹è±¡èµ‹å€¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-native-reassign\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨éèµ‹å€¼æˆ–æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ new æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-new\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å¯¹ Function å¯¹è±¡ä½¿ç”¨ new æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-new-func\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å¯¹ Stringï¼ŒNumber å’Œ Boolean ä½¿ç”¨ new æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-new-wrappers\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨å…«è¿›åˆ¶å­—é¢é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"no-octal\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨å…«è¿›åˆ¶è½¬ä¹‰åºåˆ—</span></span><br><span class=\"line\">        <span class=\"string\">\"no-octal-escape\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸å¯¹ function çš„å‚æ•°è¿›è¡Œé‡æ–°èµ‹å€¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-param-reassign\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ __proto__ å±æ€§</span></span><br><span class=\"line\">        <span class=\"string\">\"no-proto\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨ var å¤šæ¬¡å£°æ˜åŒä¸€å˜é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"no-redeclare\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨æŒ‡å®šçš„é€šè¿‡ require åŠ è½½çš„æ¨¡å—</span></span><br><span class=\"line\">        <span class=\"string\">\"no-return-assign\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨ javascript: url</span></span><br><span class=\"line\">        <span class=\"string\">\"no-script-url\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢è‡ªæˆ‘èµ‹å€¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-self-assign\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢è‡ªèº«æ¯”è¾ƒ</span></span><br><span class=\"line\">        <span class=\"string\">\"no-self-compare\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨é€—å·æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-sequences\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æŠ›å‡ºéå¼‚å¸¸å­—é¢é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"no-throw-literal\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ä¸€æˆä¸å˜çš„å¾ªç¯æ¡ä»¶</span></span><br><span class=\"line\">        <span class=\"string\">\"no-unmodified-loop-condition\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å‡ºç°æœªä½¿ç”¨è¿‡çš„è¡¨è¾¾å¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-unused-expressions\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨æœªä½¿ç”¨è¿‡çš„æ ‡ç­¾</span></span><br><span class=\"line\">        <span class=\"string\">\"no-unused-labels\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¸å¿…è¦çš„ .call() å’Œ .apply()</span></span><br><span class=\"line\">        <span class=\"string\">\"no-useless-call\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¸å¿…è¦çš„å­—ç¬¦ä¸²å­—é¢é‡æˆ–æ¨¡æ¿å­—é¢é‡çš„è¿æ¥</span></span><br><span class=\"line\">        <span class=\"string\">\"no-useless-concat\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ä¸å¿…è¦çš„è½¬ä¹‰å­—ç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-useless-escape\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ void æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-void\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨æ³¨é‡Šä¸­ä½¿ç”¨ç‰¹å®šçš„è­¦å‘Šæœ¯è¯­</span></span><br><span class=\"line\">        <span class=\"string\">\"no-warning-comments\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ with è¯­å¥</span></span><br><span class=\"line\">        <span class=\"string\">\"no-with\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨ parseInt() ä½¿ç”¨åŸºæ•°å‚æ•°</span></span><br><span class=\"line\">        <span class=\"string\">\"radix\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æ‰€æœ‰çš„ var å£°æ˜å‡ºç°åœ¨å®ƒä»¬æ‰€åœ¨çš„ä½œç”¨åŸŸé¡¶éƒ¨</span></span><br><span class=\"line\">        <span class=\"string\">\"vars-on-top\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ IIFE ä½¿ç”¨æ‹¬å·æ‹¬èµ·æ¥</span></span><br><span class=\"line\">        <span class=\"string\">\"wrap-iife\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"any\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢ â€œYodaâ€ æ¡ä»¶</span></span><br><span class=\"line\">        <span class=\"string\">\"yoda\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"never\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼æŒ‡ä»¤</span></span><br><span class=\"line\">        <span class=\"string\">\"strict\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//////////////</span></span><br><span class=\"line\">        <span class=\"comment\">// å˜é‡å£°æ˜ //</span></span><br><span class=\"line\">        <span class=\"comment\">//////////////</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢ var å£°æ˜ä¸­çš„åˆå§‹åŒ– (åˆå€¼)</span></span><br><span class=\"line\">        <span class=\"string\">\"init-declarations\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸ catch å­å¥çš„å‚æ•°ä¸å¤–å±‚ä½œç”¨åŸŸä¸­çš„å˜é‡åŒå</span></span><br><span class=\"line\">        <span class=\"string\">\"no-catch-shadow\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åˆ é™¤å˜é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"no-delete-var\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸æ ‡ç­¾ä¸å˜é‡åŒå</span></span><br><span class=\"line\">        <span class=\"string\">\"no-label-var\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ç‰¹å®šçš„å…¨å±€å˜é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"no-restricted-globals\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ var å£°æ˜ ä¸å¤–å±‚ä½œç”¨åŸŸçš„å˜é‡åŒå</span></span><br><span class=\"line\">        <span class=\"string\">\"no-shadow\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢è¦†ç›–å—é™åˆ¶çš„æ ‡è¯†ç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-shadow-restricted-names\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨æœªå£°æ˜çš„å˜é‡ï¼Œé™¤éå®ƒä»¬åœ¨ /*global */ æ³¨é‡Šä¸­è¢«æåˆ°</span></span><br><span class=\"line\">        <span class=\"string\">\"no-undef\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å°†å˜é‡åˆå§‹åŒ–ä¸º undefined</span></span><br><span class=\"line\">        <span class=\"string\">\"no-undef-init\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å°† undefined ä½œä¸ºæ ‡è¯†ç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-undefined\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å‡ºç°æœªä½¿ç”¨è¿‡çš„å˜é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"no-unused-vars\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"vars\"</span>: <span class=\"string\">\"all\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"args\"</span>: <span class=\"string\">\"none\"</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸åœ¨å˜é‡å®šä¹‰ä¹‹å‰ä½¿ç”¨å®ƒä»¬</span></span><br><span class=\"line\">        <span class=\"string\">\"no-use-before-define\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//////////////////////////</span></span><br><span class=\"line\">        <span class=\"comment\">// Node.js and CommonJS //</span></span><br><span class=\"line\">        <span class=\"comment\">//////////////////////////</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// require return statements after callbacks</span></span><br><span class=\"line\">        <span class=\"string\">\"callback-return\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ require() å‡ºç°åœ¨é¡¶å±‚æ¨¡å—ä½œç”¨åŸŸä¸­</span></span><br><span class=\"line\">        <span class=\"string\">\"global-require\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚å›è°ƒå‡½æ•°ä¸­æœ‰å®¹é”™å¤„ç†</span></span><br><span class=\"line\">        <span class=\"string\">\"handle-callback-err\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"^(err|error)$\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æ··åˆå¸¸è§„ var å£°æ˜å’Œ require è°ƒç”¨</span></span><br><span class=\"line\">        <span class=\"string\">\"no-mixed-requires\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢è°ƒç”¨ require æ—¶ä½¿ç”¨ new æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-new-require\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å¯¹ __dirname å’Œ __filename è¿›è¡Œå­—ç¬¦ä¸²è¿æ¥</span></span><br><span class=\"line\">        <span class=\"string\">\"no-path-concat\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ process.env</span></span><br><span class=\"line\">        <span class=\"string\">\"no-process-env\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ process.exit()</span></span><br><span class=\"line\">        <span class=\"string\">\"no-process-exit\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨åŒæ­¥æ–¹æ³•</span></span><br><span class=\"line\">        <span class=\"string\">\"no-sync\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//////////////</span></span><br><span class=\"line\">        <span class=\"comment\">// é£æ ¼æŒ‡å— //</span></span><br><span class=\"line\">        <span class=\"comment\">//////////////</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// æŒ‡å®šæ•°ç»„çš„å…ƒç´ ä¹‹é—´è¦ä»¥ç©ºæ ¼éš”å¼€ (, åé¢)ï¼Œ never å‚æ•°ï¼š[ ä¹‹å‰å’Œ ] ä¹‹åä¸èƒ½å¸¦ç©ºæ ¼ï¼Œalways å‚æ•°ï¼š[ ä¹‹å‰å’Œ ] ä¹‹åå¿…é¡»å¸¦ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"array-bracket-spacing\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"never\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æˆ–å¼ºåˆ¶åœ¨å•è¡Œä»£ç å—ä¸­ä½¿ç”¨ç©ºæ ¼ (ç¦ç”¨)</span></span><br><span class=\"line\">        <span class=\"string\">\"block-spacing\"</span>: [<span class=\"number\">1</span>, <span class=\"string\">\"never\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ä½¿ç”¨ä¸€è‡´çš„ç¼©è¿› ç¬¬äºŒä¸ªå‚æ•°ä¸º \"tab\" æ—¶ï¼Œä¼šä½¿ç”¨ tabï¼Œ</span></span><br><span class=\"line\">        <span class=\"comment\">// if while function åé¢çš„ &#123;å¿…é¡»ä¸ if åœ¨åŒä¸€è¡Œï¼Œjava é£æ ¼ã€‚</span></span><br><span class=\"line\">        <span class=\"string\">\"brace-style\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"1tbs\"</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"allowSingleLine\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// åŒå³°é©¼å‘½åæ ¼å¼</span></span><br><span class=\"line\">        <span class=\"string\">\"camelcase\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// æ§åˆ¶é€—å·å‰åçš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"comma-spacing\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"before\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            <span class=\"string\">\"after\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// æ§åˆ¶é€—å·åœ¨è¡Œå°¾å‡ºç°è¿˜æ˜¯åœ¨è¡Œé¦–å‡ºç° (é»˜è®¤è¡Œå°¾)</span></span><br><span class=\"line\">        <span class=\"comment\">// http://eslint.org/docs/rules/comma-style</span></span><br><span class=\"line\">        <span class=\"string\">\"comma-style\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"last\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">//\"SwitchCase\" (é»˜è®¤ï¼š0) å¼ºåˆ¶ switch è¯­å¥ä¸­çš„ case å­å¥çš„ç¼©è¿›æ°´å¹³</span></span><br><span class=\"line\">        <span class=\"comment\">// ä»¥æ–¹æ‹¬å·å–å¯¹è±¡å±æ€§æ—¶ï¼Œ[åé¢å’Œ] å‰é¢æ˜¯å¦éœ€è¦ç©ºæ ¼, å¯é€‰å‚æ•° never, always</span></span><br><span class=\"line\">        <span class=\"string\">\"computed-property-spacing\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"never\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// ç”¨äºæŒ‡ç»Ÿä¸€åœ¨å›è°ƒå‡½æ•°ä¸­æŒ‡å‘ this çš„å˜é‡åï¼Œç®­å¤´å‡½æ•°ä¸­çš„ this å·²ç»å¯ä»¥æŒ‡å‘å¤–å±‚è°ƒç”¨è€…ï¼Œåº”è¯¥æ²¡åµç”¨äº†</span></span><br><span class=\"line\">        <span class=\"comment\">// e.g [0,\"that\"] æŒ‡å®šåªèƒ½ var that = this. that ä¸èƒ½æŒ‡å‘å…¶ä»–ä»»ä½•å€¼ï¼Œthis ä¹Ÿä¸èƒ½èµ‹å€¼ç»™ that ä»¥å¤–çš„å…¶ä»–å€¼</span></span><br><span class=\"line\">        <span class=\"string\">\"consistent-this\"</span>: [<span class=\"number\">1</span>, <span class=\"string\">\"that\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ä½¿ç”¨å‘½åçš„ function è¡¨è¾¾å¼</span></span><br><span class=\"line\">        <span class=\"string\">\"func-names\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// æ–‡ä»¶æœ«å°¾å¼ºåˆ¶æ¢è¡Œ</span></span><br><span class=\"line\">        <span class=\"string\">\"eol-last\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"string\">\"indent\"</span>: [<span class=\"number\">2</span>, <span class=\"number\">4</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"SwitchCase\"</span>: <span class=\"number\">1</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨å¯¹è±¡å­—é¢é‡çš„å±æ€§ä¸­é”®å’Œå€¼ä¹‹é—´ä½¿ç”¨ä¸€è‡´çš„é—´è·</span></span><br><span class=\"line\">        <span class=\"string\">\"key-spacing\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"beforeColon\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            <span class=\"string\">\"afterColon\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ä½¿ç”¨ä¸€è‡´çš„æ¢è¡Œé£æ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"linebreak-style\"</span>: [<span class=\"number\">1</span>, <span class=\"string\">\"unix\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚åœ¨æ³¨é‡Šå‘¨å›´æœ‰ç©ºè¡Œ (è¦æ±‚åœ¨å—çº§æ³¨é‡Šä¹‹å‰æœ‰ä¸€ç©ºè¡Œ)</span></span><br><span class=\"line\">        <span class=\"string\">\"lines-around-comment\"</span>: [<span class=\"number\">1</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"beforeBlockComment\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ä¸€è‡´åœ°ä½¿ç”¨å‡½æ•°å£°æ˜æˆ–å‡½æ•°è¡¨è¾¾å¼ï¼Œæ–¹æ³•å®šä¹‰é£æ ¼ï¼Œå‚æ•°ï¼š</span></span><br><span class=\"line\">        <span class=\"comment\">// declaration: å¼ºåˆ¶ä½¿ç”¨æ–¹æ³•å£°æ˜çš„æ–¹å¼ï¼Œfunction f()&#123;&#125; e.g [2, \"declaration\"]</span></span><br><span class=\"line\">        <span class=\"comment\">// expressionï¼šå¼ºåˆ¶ä½¿ç”¨æ–¹æ³•è¡¨è¾¾å¼çš„æ–¹å¼ï¼Œvar f = function() &#123;&#125; e.g [2, \"expression\"]</span></span><br><span class=\"line\">        <span class=\"comment\">// allowArrowFunctions: declaration é£æ ¼ä¸­å…è®¸ç®­å¤´å‡½æ•°ã€‚ e.g [2, \"declaration\", &#123; \"allowArrowFunctions\": true&#125;]</span></span><br><span class=\"line\">        <span class=\"string\">\"func-style\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶å›è°ƒå‡½æ•°æœ€å¤§åµŒå¥—æ·±åº¦ 5 å±‚</span></span><br><span class=\"line\">        <span class=\"string\">\"max-nested-callbacks\"</span>: [<span class=\"number\">1</span>, <span class=\"number\">5</span>],</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨æŒ‡å®šçš„æ ‡è¯†ç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"id-blacklist\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶æ ‡è¯†ç¬¦çš„æœ€æ–°å’Œæœ€å¤§é•¿åº¦</span></span><br><span class=\"line\">        <span class=\"string\">\"id-length\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æ ‡è¯†ç¬¦åŒ¹é…ä¸€ä¸ªæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class=\"line\">        <span class=\"string\">\"id-match\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨ JSX å±æ€§ä¸­ä¸€è‡´åœ°ä½¿ç”¨åŒå¼•å·æˆ–å•å¼•å·</span></span><br><span class=\"line\">        <span class=\"string\">\"jsx-quotes\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨å…³é”®å­—å‰åä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼ (å‰åè…°éœ€è¦)</span></span><br><span class=\"line\">        <span class=\"string\">\"keyword-spacing\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ä¸€è¡Œçš„æœ€å¤§é•¿åº¦</span></span><br><span class=\"line\">        <span class=\"string\">\"max-len\"</span>: [<span class=\"number\">1</span>, <span class=\"number\">200</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶æœ€å¤§è¡Œæ•°</span></span><br><span class=\"line\">        <span class=\"string\">\"max-lines\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ function å®šä¹‰ä¸­æœ€å¤šå…è®¸çš„å‚æ•°æ•°é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"max-params\"</span>: [<span class=\"number\">1</span>, <span class=\"number\">7</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ function å—æœ€å¤šå…è®¸çš„çš„è¯­å¥æ•°é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"max-statements\"</span>: [<span class=\"number\">1</span>, <span class=\"number\">200</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶æ¯ä¸€è¡Œä¸­æ‰€å…è®¸çš„æœ€å¤§è¯­å¥æ•°é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"max-statements-per-line\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æ„é€ å‡½æ•°é¦–å­—æ¯å¤§å†™ ï¼ˆè¦æ±‚è°ƒç”¨ new æ“ä½œç¬¦æ—¶æœ‰é¦–å­—æ¯å¤§å°çš„å‡½æ•°ï¼Œå…è®¸è°ƒç”¨é¦–å­—æ¯å¤§å†™çš„å‡½æ•°æ—¶æ²¡æœ‰ new æ“ä½œç¬¦ã€‚ï¼‰</span></span><br><span class=\"line\">        <span class=\"string\">\"new-cap\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"newIsCap\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"string\">\"capIsNew\"</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚è°ƒç”¨æ— å‚æ„é€ å‡½æ•°æ—¶æœ‰åœ†æ‹¬å·</span></span><br><span class=\"line\">        <span class=\"string\">\"new-parens\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢ var å£°æ˜è¯­å¥åæœ‰ä¸€è¡Œç©ºè¡Œ</span></span><br><span class=\"line\">        <span class=\"string\">\"newline-after-var\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨ Array æ„é€ å‡½æ•°</span></span><br><span class=\"line\">        <span class=\"string\">\"no-array-constructor\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨æŒ‰ä½è¿ç®—ç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-bitwise\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ return è¯­å¥ä¹‹å‰æœ‰ä¸€ç©ºè¡Œ</span></span><br><span class=\"line\">        <span class=\"string\">\"newline-before-return\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æ–¹æ³•é“¾ä¸­æ¯ä¸ªè°ƒç”¨éƒ½æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"newline-per-chained-call\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ continue è¯­å¥</span></span><br><span class=\"line\">        <span class=\"string\">\"no-continue\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨ä»£ç è¡Œåä½¿ç”¨å†…è”æ³¨é‡Š</span></span><br><span class=\"line\">        <span class=\"string\">\"no-inline-comments\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ if ä½œä¸ºå”¯ä¸€çš„è¯­å¥å‡ºç°åœ¨ else è¯­å¥ä¸­</span></span><br><span class=\"line\">        <span class=\"string\">\"no-lonely-if\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æ··åˆä½¿ç”¨ä¸åŒçš„æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-mixed-operators\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸ç©ºæ ¼å’Œ tab æ··åˆç¼©è¿›</span></span><br><span class=\"line\">        <span class=\"string\">\"no-mixed-spaces-and-tabs\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸å¤šä¸ªç©ºè¡Œ</span></span><br><span class=\"line\">        <span class=\"string\">\"no-multiple-empty-lines\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"max\"</span>: <span class=\"number\">2</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸å¦å®šçš„è¡¨è¾¾å¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-negated-condition\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸ä½¿ç”¨åµŒå¥—çš„ä¸‰å…ƒè¡¨è¾¾å¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-nested-ternary\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨ Object çš„æ„é€ å‡½æ•°</span></span><br><span class=\"line\">        <span class=\"string\">\"no-new-object\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨ä¸€å…ƒæ“ä½œç¬¦ ++ å’Œ --</span></span><br><span class=\"line\">        <span class=\"string\">\"no-plusplus\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨ç‰¹å®šçš„è¯­æ³•</span></span><br><span class=\"line\">        <span class=\"string\">\"no-restricted-syntax\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ function æ ‡è¯†ç¬¦å’Œæ‹¬å·ä¹‹é—´å‡ºç°ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-spaced-func\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸ä½¿ç”¨ä¸‰å…ƒæ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-ternary\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨è¡Œå°¾ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-trailing-spaces\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æ ‡è¯†ç¬¦ä¸­æœ‰æ‚¬ç©ºä¸‹åˆ’çº¿_bar</span></span><br><span class=\"line\">        <span class=\"string\">\"no-underscore-dangle\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å¯ä»¥åœ¨æœ‰æ›´ç®€å•çš„å¯æ›¿ä»£çš„è¡¨è¾¾å¼æ—¶ä½¿ç”¨ä¸‰å…ƒæ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-unneeded-ternary\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å±æ€§å‰æœ‰ç©ºç™½</span></span><br><span class=\"line\">        <span class=\"string\">\"no-whitespace-before-property\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶èŠ±æ‹¬å·å†…æ¢è¡Œç¬¦çš„ä¸€è‡´æ€§</span></span><br><span class=\"line\">        <span class=\"string\">\"object-curly-newline\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨èŠ±æ‹¬å·ä¸­ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"object-curly-spacing\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶å°†å¯¹è±¡çš„å±æ€§æ”¾åœ¨ä¸åŒçš„è¡Œä¸Š</span></span><br><span class=\"line\">        <span class=\"string\">\"object-property-newline\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶å‡½æ•°ä¸­çš„å˜é‡è¦ä¹ˆä¸€èµ·å£°æ˜è¦ä¹ˆåˆ†å¼€å£°æ˜</span></span><br><span class=\"line\">        <span class=\"string\">\"one-var\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"initialized\"</span>: <span class=\"string\">\"never\"</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢åœ¨ var å£°æ˜å‘¨å›´æ¢è¡Œ</span></span><br><span class=\"line\">        <span class=\"string\">\"one-var-declaration-per-line\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢åœ¨å¯èƒ½çš„æƒ…å†µä¸‹è¦æ±‚ä½¿ç”¨ç®€åŒ–çš„èµ‹å€¼æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"operator-assignment\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶æ“ä½œç¬¦ä½¿ç”¨ä¸€è‡´çš„æ¢è¡Œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"operator-linebreak\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"after\"</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"overrides\"</span>: &#123;</span><br><span class=\"line\">                <span class=\"string\">\"?\"</span>: <span class=\"string\">\"before\"</span>,</span><br><span class=\"line\">                <span class=\"string\">\":\"</span>: <span class=\"string\">\"before\"</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢å—å†…å¡«å……</span></span><br><span class=\"line\">        <span class=\"string\">\"padded-blocks\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚å¯¹è±¡å­—é¢é‡å±æ€§åç§°ç”¨å¼•å·æ‹¬èµ·æ¥</span></span><br><span class=\"line\">        <span class=\"string\">\"quote-props\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ä½¿ç”¨ä¸€è‡´çš„åå‹¾å·ã€åŒå¼•å·æˆ–å•å¼•å·</span></span><br><span class=\"line\">        <span class=\"string\">\"quotes\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"double\"</span>, <span class=\"string\">\"avoid-escape\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ä½¿ç”¨ JSDoc æ³¨é‡Š</span></span><br><span class=\"line\">        <span class=\"string\">\"require-jsdoc\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢ä½¿ç”¨åˆ†å·è€Œä¸æ˜¯ ASIï¼ˆè¿™ä¸ªæ‰æ˜¯æ§åˆ¶è¡Œå°¾éƒ¨åˆ†å·çš„ï¼Œï¼‰</span></span><br><span class=\"line\">        <span class=\"string\">\"semi\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"always\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åˆ†å·ä¹‹å‰å’Œä¹‹åä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"semi-spacing\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚åŒä¸€ä¸ªå£°æ˜å—ä¸­çš„å˜é‡æŒ‰é¡ºåºæ’åˆ—</span></span><br><span class=\"line\">        <span class=\"string\">\"sort-vars\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨å—ä¹‹å‰ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"space-before-blocks\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"always\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨ function çš„å·¦æ‹¬å·ä¹‹å‰ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"space-before-function-paren\"</span>: [<span class=\"number\">0</span>, <span class=\"string\">\"always\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨åœ†æ‹¬å·å†…ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"space-in-parens\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"never\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æ“ä½œç¬¦å‘¨å›´æœ‰ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"space-infix-ops\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨ä¸€å…ƒæ“ä½œç¬¦å‰åä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"space-unary-ops\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"words\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"string\">\"nonwords\"</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨æ³¨é‡Šä¸­ // æˆ– /* ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"spaced-comment\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"always\"</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"markers\"</span>: [<span class=\"string\">\"global\"</span>, <span class=\"string\">\"globals\"</span>, <span class=\"string\">\"eslint\"</span>, <span class=\"string\">\"eslint-disable\"</span>, <span class=\"string\">\"*package\"</span>, <span class=\"string\">\"!\"</span>]</span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢ Unicode BOM</span></span><br><span class=\"line\">        <span class=\"string\">\"unicode-bom\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æ­£åˆ™è¡¨è¾¾å¼è¢«æ‹¬å·æ‹¬èµ·æ¥</span></span><br><span class=\"line\">        <span class=\"string\">\"wrap-regex\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//////////////</span></span><br><span class=\"line\">        <span class=\"comment\">// ES6. ç›¸å…³ //</span></span><br><span class=\"line\">        <span class=\"comment\">//////////////</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ç®­å¤´å‡½æ•°ä½“ä½¿ç”¨å¤§æ‹¬å·</span></span><br><span class=\"line\">        <span class=\"string\">\"arrow-body-style\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ç®­å¤´å‡½æ•°çš„å‚æ•°ä½¿ç”¨åœ†æ‹¬å·</span></span><br><span class=\"line\">        <span class=\"string\">\"arrow-parens\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"string\">\"arrow-spacing\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"before\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"string\">\"after\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­ç”¨ super() è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼ŒTypeScrip çš„ç¼–è¯‘å™¨ä¹Ÿä¼šæç¤º</span></span><br><span class=\"line\">        <span class=\"string\">\"constructor-super\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ generator å‡½æ•°ä¸­ * å·å‘¨å›´ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"generator-star-spacing\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"before\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"string\">\"after\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¿®æ”¹ç±»å£°æ˜çš„å˜é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"no-class-assign\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸ç®­å¤´åŠŸèƒ½ï¼Œåœ¨é‚£é‡Œä»–ä»¬å¯ä»¥æ··æ·†çš„æ¯”è¾ƒ</span></span><br><span class=\"line\">        <span class=\"string\">\"no-confusing-arrow\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¿®æ”¹ const å£°æ˜çš„å˜é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"no-const-assign\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ç±»æˆå‘˜ä¸­å‡ºç°é‡å¤çš„åç§°</span></span><br><span class=\"line\">        <span class=\"string\">\"no-dupe-class-members\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸å¤åˆ¶æ¨¡å—çš„è¿›å£</span></span><br><span class=\"line\">        <span class=\"string\">\"no-duplicate-imports\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ Symbol çš„æ„é€ å‡½æ•°</span></span><br><span class=\"line\">        <span class=\"string\">\"no-new-symbol\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å…è®¸æŒ‡å®šæ¨¡å—åŠ è½½æ—¶çš„è¿›å£</span></span><br><span class=\"line\">        <span class=\"string\">\"no-restricted-imports\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œåœ¨è°ƒç”¨ super() ä¹‹å‰ä½¿ç”¨ this æˆ– super</span></span><br><span class=\"line\">        <span class=\"string\">\"no-this-before-super\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¸å¿…è¦çš„è®¡ç®—æ€§èƒ½é”®å¯¹è±¡çš„æ–‡å­—</span></span><br><span class=\"line\">        <span class=\"string\">\"no-useless-computed-key\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ä½¿ç”¨ let æˆ– const è€Œä¸æ˜¯ var</span></span><br><span class=\"line\">        <span class=\"string\">\"no-var\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢å¯¹è±¡å­—é¢é‡ä¸­æ–¹æ³•å’Œå±æ€§ä½¿ç”¨ç®€å†™è¯­æ³•</span></span><br><span class=\"line\">        <span class=\"string\">\"object-shorthand\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ä½¿ç”¨ç®­å¤´å‡½æ•°ä½œä¸ºå›è°ƒ</span></span><br><span class=\"line\">        <span class=\"string\">\"prefer-arrow-callback\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ä½¿ç”¨ const å£°æ˜é‚£äº›å£°æ˜åä¸å†è¢«ä¿®æ”¹çš„å˜é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"prefer-const\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚åœ¨åˆé€‚çš„åœ°æ–¹ä½¿ç”¨ Reflect æ–¹æ³•</span></span><br><span class=\"line\">        <span class=\"string\">\"prefer-reflect\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦è€Œé .apply()</span></span><br><span class=\"line\">        <span class=\"string\">\"prefer-spread\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ä½¿ç”¨æ¨¡æ¿å­—é¢é‡è€Œéå­—ç¬¦ä¸²è¿æ¥</span></span><br><span class=\"line\">        <span class=\"string\">\"prefer-template\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// Suggest using the rest parameters instead of arguments</span></span><br><span class=\"line\">        <span class=\"string\">\"prefer-rest-params\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ generator å‡½æ•°å†…æœ‰ yield</span></span><br><span class=\"line\">        <span class=\"string\">\"require-yield\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// enforce spacing between rest and spread operators and their expressions</span></span><br><span class=\"line\">        <span class=\"string\">\"rest-spread-spacing\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶æ¨¡å—å†…çš„ import æ’åº</span></span><br><span class=\"line\">        <span class=\"string\">\"sort-imports\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢æ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„åµŒå…¥è¡¨è¾¾å¼å‘¨å›´ç©ºæ ¼çš„ä½¿ç”¨</span></span><br><span class=\"line\">        <span class=\"string\">\"template-curly-spacing\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨ yield* è¡¨è¾¾å¼ä¸­ * å‘¨å›´ä½¿ç”¨ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"yield-star-spacing\"</span>: <span class=\"number\">2</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p>è¿™ç¯‡æ–‡ç« æˆ‘ä»å‡ ä¸ªæ–¹é¢æ¥ä»‹ç»æˆ‘æ˜¯å¦‚ä½•é…ç½®å¼€å‘ç¯å¢ƒçš„ï¼Œå°½å¯èƒ½ä½¿ä»£ç ç¼–å†™é£æ ¼ç»Ÿä¸€ã€‚å…¶å®ä¸å…‰æ˜¯ä»£ç ï¼ŒåŒ…æ‹¬æ—¥å¸¸æ–‡å­—ï¼Œéƒ½æœ‰å¾ˆå¤šè§„èŒƒã€‚æ¯”å¦‚æœ€å¸¸è§çš„ä¸­è‹±æ–‡ä¹‹é—´æ·»åŠ ç©ºæ ¼ï¼Œå¯èƒ½å¾ˆå¤šäººå¹¶æ²¡æœ‰åœ¨æ„ã€‚ä½†æ˜¯çœ‹åˆ°åˆ«äººçš„æ–‡ç« é‡Œå‡ºç°è¿™æ ·çš„é—®é¢˜ï¼Œè‚¯å®šæ˜¯è¦å‡å°è±¡åˆ†çš„ã€‚</p>","more":"<p>å› ä¸ºæˆ‘æ—¥å¸¸ä½¿ç”¨ <strong>VSCode</strong>ï¼Œæ‰€ä»¥è¿™é‡Œç›¸å…³é…ç½®éƒ½ä»¥è¿™ä¸ªå±•å¼€ã€‚</p>\n<h3 id=\"æ‰©å±•\"><a href=\"#æ‰©å±•\" class=\"headerlink\" title=\"æ‰©å±•\"></a>æ‰©å±•</h3><ul>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig\" target=\"_blank\" rel=\"noopener\">EditorConfig for VS Code</a></li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint\" target=\"_blank\" rel=\"noopener\">ESLint</a></li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode\" target=\"_blank\" rel=\"noopener\">Prettier - Code formatter</a></li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=baurine.vscode-pangu\" target=\"_blank\" rel=\"noopener\">VSCode-Pangu</a></li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker\" target=\"_blank\" rel=\"noopener\">Code Spell Checker</a></li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow\" target=\"_blank\" rel=\"noopener\">Indent-Rainbow</a></li>\n</ul>\n<p>ä¸‹é¢æ¥æˆ‘ç®€å•ä»‹ç»ä¸€ä¸‹æ¯ä¸ªæ’ä»¶çš„åŠŸèƒ½ã€‚</p>\n<ul>\n<li>EditorConfigï¼šç”Ÿæˆ <code>.editorconfig</code> é…ç½®æ–‡ä»¶ï¼Œè§„å®šå½“å‰ç¼–è¾‘å™¨çš„ä¸€äº›è®¾å®šã€‚</li>\n<li>ESLintï¼šé›†æˆ Eslint åˆ° VSCodeï¼Œå…·ä½“çœ‹ Eslint çš„å®˜æ–¹æ–‡æ¡£ã€‚</li>\n<li>Prettierï¼šEslint ä¾§é‡äºé™æ€æ ¡éªŒï¼Œè€Œ Prettier åˆ™è´Ÿè´£æŒ‰ç…§ä¸€äº›è§„åˆ™ç¾åŒ–ä»£ç ã€‚</li>\n<li>VSCode-Panguï¼šè‡ªåŠ¨åœ¨ä¸­è‹±æ–‡ä¹‹é—´æ·»åŠ ç©ºæ ¼ã€‚</li>\n<li>Code Spell Checkerï¼šå•è¯æ‹¼å†™æ£€æŸ¥ã€‚</li>\n<li>Indent-Rainbowï¼šå½©è™¹ç¼©è¿›ï¼Œç¼©è¿›ä¸è§„èŒƒæ—¶ä¼šæ ‡çº¢æç¤ºã€‚</li>\n</ul>\n<h3 id=\"åå¥½\"><a href=\"#åå¥½\" class=\"headerlink\" title=\"åå¥½\"></a>åå¥½</h3><h4 id=\"VSCode-Settings\"><a href=\"#VSCode-Settings\" class=\"headerlink\" title=\"VSCode Settings\"></a>VSCode Settings</h4><p>å®‰è£…æ’ä»¶ï¼šESLintã€Prettier åï¼Œåœ¨ settings é…ç½®ä¸‹é¢çš„é€‰é¡¹ï¼Œå³å¯å®ç°ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// å¼€å¯ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œè°ƒç”¨ Prettier æ—¶è‡ªåŠ¨ eslint -fix</span></span><br><span class=\"line\">  <span class=\"string\">\"editor.formatOnSave\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"comment\">// ä¸éœ€è¦ fix äº†ï¼ŒPrettier ä¼šè‡ªåŠ¨ fix</span></span><br><span class=\"line\">  <span class=\"string\">\"eslint.autoFixOnSave\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  <span class=\"comment\">// å‘Šè¯‰ Prettier ä½¿ç”¨ `prettier-eslint` æ¥ä»£æ›¿ Prettier</span></span><br><span class=\"line\">  <span class=\"string\">\"prettier.eslintIntegration\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Lint\"><a href=\"#Lint\" class=\"headerlink\" title=\"Lint\"></a>Lint</h3><h4 id=\"ä½¿ç”¨-Prettier-æŒ‰ç…§-Eslint-ç¾åŒ–ä»£ç \"><a href=\"#ä½¿ç”¨-Prettier-æŒ‰ç…§-Eslint-ç¾åŒ–ä»£ç \" class=\"headerlink\" title=\"ä½¿ç”¨ Prettier æŒ‰ç…§ Eslint ç¾åŒ–ä»£ç \"></a>ä½¿ç”¨ Prettier æŒ‰ç…§ Eslint ç¾åŒ–ä»£ç </h4><ul>\n<li>å®‰è£… <code>prettier-eslint-cli</code></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i prettier-eslint-cli --save-dev</span><br></pre></td></tr></table></figure>\n<ul>\n<li>é…ç½® <code>prettier</code>ï¼Œåœ¨ <code>package.json</code> æ·»åŠ </li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"lint\"</span>: <span class=\"string\">\"eslint *.js\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"format\"</span>: <span class=\"string\">\"prettier-eslint --write *.js\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"eslintConfig\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"extends\"</span>: <span class=\"string\">\"some-config\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"prettier\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"singleQuote\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"semi\"</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç»è¿‡ä¸Šé¢é…ç½®åï¼Œç¼–è¾‘å™¨å°±å¯ä»¥åœ¨ä¿å­˜æ–‡ä»¶æ—¶ï¼Œè‡ªåŠ¨æŒ‰ç…§ Eslint æ ¼å¼åŒ–ã€‚</p>\n<h4 id=\"ä½¿ç”¨-Standard-è§„èŒƒ\"><a href=\"#ä½¿ç”¨-Standard-è§„èŒƒ\" class=\"headerlink\" title=\"ä½¿ç”¨ Standard è§„èŒƒ\"></a>ä½¿ç”¨ Standard è§„èŒƒ</h4><p><a href=\"https://github.com/standard\" target=\"_blank\" rel=\"noopener\">Standard</a> å…¶å®å¹¶ä¸æ˜¯æ ‡å‡†ç»„ç»‡å‡ºçš„è§„èŒƒï¼Œä½†æ˜¯è¡Œä¸šå†…ä½¿ç”¨çš„æ¯”è¾ƒå¤šã€‚çœ‹æ¥çœ‹å»ï¼Œå¥½åƒå„ç§å„æ ·çš„çº¦å®šéƒ½æ²¡æœ‰ä¸€ä¸ªæ ‡å‡†ã€‚æˆ‘çœ‹äº†ä¸€ä¸‹ï¼Œç›®å‰æ¥è¯´ <code>standard</code> è¿˜ç®—æœ‰å½±å“åŠ›ã€‚æ‰“ç®—ä»¥ååœ¨ä¸ªäººé¡¹ç›®ä¸­å…¨éƒ¨é‡‡ç”¨è¿™ç§é£æ ¼ï¼Œç„¶åæŠŠå‰©ä¸‹çš„æ—¶é—´å»åšç‚¹æœ‰æ„ä¹‰çš„äº‹ã€‚é…ç½®ä¸€å † <code>.eslintrc</code> <code>.jscsrc</code> <code>.jshintrc</code> çœŸçš„å¾ˆå¤´ç–¼ã€‚</p>\n<p>â˜ï¸ <strong>åˆå§‹åŒ–æ–°é¡¹ç›®</strong></p>\n<ul>\n<li>å®‰è£…ä¾èµ–</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install eslint \\</span><br><span class=\"line\">    eslint-config-standard \\</span><br><span class=\"line\">    eslint-plugin-standard \\</span><br><span class=\"line\">    eslint-plugin-promise \\</span><br><span class=\"line\">    eslint-plugin-import \\</span><br><span class=\"line\">    eslint-plugin-node \\</span><br><span class=\"line\">    eslint-plugin-markdown \\</span><br><span class=\"line\">    --save-dev</span><br></pre></td></tr></table></figure>\n<ul>\n<li>æ·»åŠ  <code>.eslintrc</code></li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"extends\"</span>: <span class=\"string\">\"standard\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>OKï¼Œç°åœ¨è®© Eslint æŒ‰ç…§ standard çš„è§„åˆ™æ¥çº¦æŸäº†ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¦å¤–çš„è§„åˆ™æ¥è¦†ç›–ã€‚</p>\n<p>â˜ï¸ <strong>å…¨å±€ä½¿ç”¨</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å…¨å±€å®‰è£…</span></span><br><span class=\"line\">$ npm i standard -g</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ ¡éªŒç›®å½•ä¸‹ *.js/*.jsx</span></span><br><span class=\"line\">$ standard</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ä¿®å¤</span></span><br><span class=\"line\">$ standard --fix</span><br></pre></td></tr></table></figure>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>ä»¥åçš„æ–°é¡¹ç›®æˆ‘ä¼šé‡‡ç”¨ Standard ä½œä¸ºçº¦æŸè§„èŒƒï¼Œå¯¹äºå·²æœ‰é¡¹ç›®æˆ‘ä½¿ç”¨ Prettier è‡ªåŠ¨æŒ‰ç…§ Eslint è§„åˆ™è‡ªåŠ¨ç¾åŒ–ï¼Œæ—¥å¸¸ä¸€äº›ä»£ç ç‰‡æ®µä½¿ç”¨ Standard å…¨å±€å‘½ä»¤ï¼Œç®€å•å®ç”¨ã€‚</p>\n<p>å‚è€ƒä»¥ä¸‹æ–‡æ¡£ã€‚</p>\n<ul>\n<li><a href=\"https://github.com/standard/standard/blob/master/docs/README-zhcn.md\" target=\"_blank\" rel=\"noopener\">standard/standard @Github</a></li>\n<li><a href=\"https://github.com/standard/eslint-config-standard\" target=\"_blank\" rel=\"noopener\">standard/eslint-config-standard @Github</a></li>\n<li><a href=\"https://github.com/expressjs/body-parser\" target=\"_blank\" rel=\"noopener\">Standard Style Demo @Github</a></li>\n<li><a href=\"https://cn.eslint.org/\" target=\"_blank\" rel=\"noopener\">ESLint @ä¸­æ–‡å®˜ç½‘</a></li>\n<li><a href=\"https://egoist.moe/2017/12/11/write-better-code-with-eslint-and-prettier/\" target=\"_blank\" rel=\"noopener\">ç”¨ ESLint å’Œ Prettier å†™å‡ºé«˜è´¨é‡ä»£ç  @EGOIST</a></li>\n</ul>\n<h3 id=\"é™„ï¼šEslint-è§„åˆ™\"><a href=\"#é™„ï¼šEslint-è§„åˆ™\" class=\"headerlink\" title=\"é™„ï¼šEslint è§„åˆ™\"></a>é™„ï¼šEslint è§„åˆ™</h3><h4 id=\"å…³é—­æ ¡éªŒ\"><a href=\"#å…³é—­æ ¡éªŒ\" class=\"headerlink\" title=\"å…³é—­æ ¡éªŒ\"></a>å…³é—­æ ¡éªŒ</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å…³é—­å½“å‰æ–‡ä»¶</span></span><br><span class=\"line\"><span class=\"comment\">/* eslint-disable */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å…³é—­å½“å‰è¡Œæ ¡éªŒ</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">1</span>; <span class=\"comment\">// eslint-disable-line</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å…³é—­ä¸‹ä¸€è¡Œæ ¡éªŒ</span></span><br><span class=\"line\"><span class=\"comment\">// eslint-disable-next-line</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> b = <span class=\"number\">2</span>;</span><br></pre></td></tr></table></figure>\n<h4 id=\"è¯¦ç»†è§„åˆ™\"><a href=\"#è¯¦ç»†è§„åˆ™\" class=\"headerlink\" title=\"è¯¦ç»†è§„åˆ™\"></a>è¯¦ç»†è§„åˆ™</h4><ul>\n<li>0ï¼šå…³é—­</li>\n<li>1ï¼šè­¦å‘Šï¼Œä»…ç»™å‡ºè­¦å‘Š</li>\n<li>2ï¼šé”™è¯¯ï¼Œåœæ­¢æ‰§è¡Œ</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br><span class=\"line\">518</span><br><span class=\"line\">519</span><br><span class=\"line\">520</span><br><span class=\"line\">521</span><br><span class=\"line\">522</span><br><span class=\"line\">523</span><br><span class=\"line\">524</span><br><span class=\"line\">525</span><br><span class=\"line\">526</span><br><span class=\"line\">527</span><br><span class=\"line\">528</span><br><span class=\"line\">529</span><br><span class=\"line\">530</span><br><span class=\"line\">531</span><br><span class=\"line\">532</span><br><span class=\"line\">533</span><br><span class=\"line\">534</span><br><span class=\"line\">535</span><br><span class=\"line\">536</span><br><span class=\"line\">537</span><br><span class=\"line\">538</span><br><span class=\"line\">539</span><br><span class=\"line\">540</span><br><span class=\"line\">541</span><br><span class=\"line\">542</span><br><span class=\"line\">543</span><br><span class=\"line\">544</span><br><span class=\"line\">545</span><br><span class=\"line\">546</span><br><span class=\"line\">547</span><br><span class=\"line\">548</span><br><span class=\"line\">549</span><br><span class=\"line\">550</span><br><span class=\"line\">551</span><br><span class=\"line\">552</span><br><span class=\"line\">553</span><br><span class=\"line\">554</span><br><span class=\"line\">555</span><br><span class=\"line\">556</span><br><span class=\"line\">557</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ç¯å¢ƒå®šä¹‰äº†é¢„å®šä¹‰çš„å…¨å±€å˜é‡ã€‚</span></span><br><span class=\"line\">    <span class=\"string\">\"env\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ç¯å¢ƒå®šä¹‰äº†é¢„å®šä¹‰çš„å…¨å±€å˜é‡ã€‚æ›´å¤šåœ¨å®˜ç½‘æŸ¥çœ‹</span></span><br><span class=\"line\">        <span class=\"string\">\"browser\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"string\">\"node\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"string\">\"commonjs\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"string\">\"amd\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"string\">\"es6\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"string\">\"mocha\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// JavaScript è¯­è¨€é€‰é¡¹</span></span><br><span class=\"line\">    <span class=\"string\">\"parserOptions\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ECMAScript ç‰ˆæœ¬</span></span><br><span class=\"line\">        <span class=\"string\">\"ecmaVersion\"</span>: <span class=\"number\">6</span>,</span><br><span class=\"line\">        <span class=\"string\">\"sourceType\"</span>: <span class=\"string\">\"module\"</span>, <span class=\"comment\">// è®¾ç½®ä¸º \"script\" (é»˜è®¤) æˆ– \"module\"ï¼ˆå¦‚æœä½ çš„ä»£ç æ˜¯ ECMAScript æ¨¡å—)ã€‚</span></span><br><span class=\"line\">        <span class=\"comment\">// æƒ³ä½¿ç”¨çš„é¢å¤–çš„è¯­è¨€ç‰¹æ€§:</span></span><br><span class=\"line\">        <span class=\"string\">\"ecmaFeatures\"</span>: &#123;</span><br><span class=\"line\">            <span class=\"comment\">// å…è®¸åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ä½¿ç”¨ return è¯­å¥</span></span><br><span class=\"line\">            <span class=\"string\">\"globalReturn\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"comment\">// impliedStric</span></span><br><span class=\"line\">            <span class=\"string\">\"impliedStrict\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"comment\">// å¯ç”¨ JSX</span></span><br><span class=\"line\">            <span class=\"string\">\"jsx\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"string\">\"modules\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// è®© eslint æ”¯æŒ JSX start</span></span><br><span class=\"line\">    <span class=\"string\">\"plugins\"</span>: [</span><br><span class=\"line\">        <span class=\"string\">\"react\"</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">\"extends\"</span>: [</span><br><span class=\"line\">        <span class=\"string\">\"eslint:recommended\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"plugin:react/recommended\"</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"comment\">// è®© eslint æ”¯æŒ JSX end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">\"rules\"</span>: &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">////////////////</span></span><br><span class=\"line\">        <span class=\"comment\">// å¯èƒ½çš„é”™è¯¯ //</span></span><br><span class=\"line\">        <span class=\"comment\">////////////////</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æ¡ä»¶è¡¨è¾¾å¼ä¸­å‡ºç°èµ‹å€¼æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-cond-assign\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ console</span></span><br><span class=\"line\">        <span class=\"string\">\"no-console\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨æ¡ä»¶ä¸­ä½¿ç”¨å¸¸é‡è¡¨è¾¾å¼</span></span><br><span class=\"line\">        <span class=\"comment\">// if (false) &#123;</span></span><br><span class=\"line\">        <span class=\"comment\">// doSomethingUnfinished();</span></span><br><span class=\"line\">        <span class=\"comment\">// &#125; //cuowu</span></span><br><span class=\"line\">        <span class=\"string\">\"no-constant-condition\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ§åˆ¶å­—ç¬¦ ï¼šnew RegExp(\"\\x1f\")</span></span><br><span class=\"line\">        <span class=\"string\">\"no-control-regex\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// æ•°ç»„å’Œå¯¹è±¡é”®å€¼å¯¹æœ€åä¸€ä¸ªé€—å·ï¼Œ never å‚æ•°ï¼šä¸èƒ½å¸¦æœ«å°¾çš„é€—å·, always å‚æ•°ï¼šå¿…é¡»å¸¦æœ«å°¾çš„é€—å·ï¼Œ</span></span><br><span class=\"line\">        <span class=\"comment\">// always-multilineï¼šå¤šè¡Œæ¨¡å¼å¿…é¡»å¸¦é€—å·ï¼Œå•è¡Œæ¨¡å¼ä¸èƒ½å¸¦é€—å·</span></span><br><span class=\"line\">        <span class=\"string\">\"comma-dangle\"</span>: [<span class=\"number\">1</span>, <span class=\"string\">\"never\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ debugger</span></span><br><span class=\"line\">        <span class=\"string\">\"no-debugger\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ function å®šä¹‰ä¸­å‡ºç°é‡åå‚æ•°</span></span><br><span class=\"line\">        <span class=\"string\">\"no-dupe-args\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å¯¹è±¡å­—é¢é‡ä¸­å‡ºç°é‡å¤çš„ key</span></span><br><span class=\"line\">        <span class=\"string\">\"no-dupe-keys\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢é‡å¤çš„ case æ ‡ç­¾</span></span><br><span class=\"line\">        <span class=\"string\">\"no-duplicate-case\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ç©ºè¯­å¥å—</span></span><br><span class=\"line\">        <span class=\"string\">\"no-empty\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨ç©ºå­—ç¬¦é›† (/^abc[]/)</span></span><br><span class=\"line\">        <span class=\"string\">\"no-empty-character-class\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å¯¹ catch å­å¥çš„å‚æ•°é‡æ–°èµ‹å€¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-ex-assign\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¸å¿…è¦çš„å¸ƒå°”è½¬æ¢</span></span><br><span class=\"line\">        <span class=\"string\">\"no-extra-boolean-cast\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¸å¿…è¦çš„æ‹¬å· //(a * b) + c;// æŠ¥é”™</span></span><br><span class=\"line\">        <span class=\"string\">\"no-extra-parens\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¸å¿…è¦çš„åˆ†å·</span></span><br><span class=\"line\">        <span class=\"string\">\"no-extra-semi\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å¯¹ function å£°æ˜é‡æ–°èµ‹å€¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-func-assign\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨åµŒå¥—çš„å—ä¸­å‡ºç° function æˆ– var å£°æ˜</span></span><br><span class=\"line\">        <span class=\"string\">\"no-inner-declarations\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"functions\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ RegExp æ„é€ å‡½æ•°ä¸­æ— æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²</span></span><br><span class=\"line\">        <span class=\"string\">\"no-invalid-regexp\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨å­—ç¬¦ä¸²å’Œæ³¨é‡Šä¹‹å¤–ä¸è§„åˆ™çš„ç©ºç™½</span></span><br><span class=\"line\">        <span class=\"string\">\"no-irregular-whitespace\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨ in è¡¨è¾¾å¼ä¸­å‡ºç°å¦å®šçš„å·¦æ“ä½œæ•°</span></span><br><span class=\"line\">        <span class=\"string\">\"no-negated-in-lhs\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æŠŠå…¨å±€å¯¹è±¡ (Math å’Œ JSON) ä½œä¸ºå‡½æ•°è°ƒç”¨ é”™è¯¯ï¼švar math = Math();</span></span><br><span class=\"line\">        <span class=\"string\">\"no-obj-calls\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ç›´æ¥ä½¿ç”¨ Object.prototypes çš„å†…ç½®å±æ€§</span></span><br><span class=\"line\">        <span class=\"string\">\"no-prototype-builtins\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡ä¸­å‡ºç°å¤šä¸ªç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-regex-spaces\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ç¨€ç–æ•°ç»„</span></span><br><span class=\"line\">        <span class=\"string\">\"no-sparse-arrays\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å‡ºç°ä»¤äººå›°æƒ‘çš„å¤šè¡Œè¡¨è¾¾å¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-unexpected-multiline\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨ returnã€throwã€continue å’Œ break è¯­å¥ä¹‹åå‡ºç°ä¸å¯è¾¾ä»£ç </span></span><br><span class=\"line\">        <span class=\"string\">\"no-unreachable\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ä½¿ç”¨ isNaN() æ£€æŸ¥ NaN</span></span><br><span class=\"line\">        <span class=\"string\">\"use-isnan\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ä½¿ç”¨æœ‰æ•ˆçš„ JSDoc æ³¨é‡Š</span></span><br><span class=\"line\">        <span class=\"string\">\"valid-jsdoc\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ typeof è¡¨è¾¾å¼ä¸æœ‰æ•ˆçš„å­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class=\"line\">        <span class=\"comment\">// typeof foo === \"undefimed\" é”™è¯¯</span></span><br><span class=\"line\">        <span class=\"string\">\"valid-typeof\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//////////////</span></span><br><span class=\"line\">        <span class=\"comment\">// æœ€ä½³å®è·µ //</span></span><br><span class=\"line\">        <span class=\"comment\">//////////////</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// å®šä¹‰å¯¹è±¡çš„ set å­˜å–å™¨å±æ€§æ—¶ï¼Œå¼ºåˆ¶å®šä¹‰ get</span></span><br><span class=\"line\">        <span class=\"string\">\"accessor-pairs\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶æ•°ç»„æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸­æœ‰ return è¯­å¥</span></span><br><span class=\"line\">        <span class=\"string\">\"array-callback-return\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶æŠŠå˜é‡çš„ä½¿ç”¨é™åˆ¶åœ¨å…¶å®šä¹‰çš„ä½œç”¨åŸŸèŒƒå›´å†…</span></span><br><span class=\"line\">        <span class=\"string\">\"block-scoped-var\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// é™åˆ¶åœˆå¤æ‚åº¦ï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼ if else èƒ½è¿ç»­æ¥å¤šå°‘ä¸ª</span></span><br><span class=\"line\">        <span class=\"string\">\"complexity\"</span>: [<span class=\"number\">2</span>, <span class=\"number\">9</span>],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ return è¯­å¥è¦ä¹ˆæ€»æ˜¯æŒ‡å®šè¿”å›çš„å€¼ï¼Œè¦ä¹ˆä¸æŒ‡å®š</span></span><br><span class=\"line\">        <span class=\"string\">\"consistent-return\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶æ‰€æœ‰æ§åˆ¶è¯­å¥ä½¿ç”¨ä¸€è‡´çš„æ‹¬å·é£æ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"curly\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"all\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// switch è¯­å¥å¼ºåˆ¶ default åˆ†æ”¯ï¼Œä¹Ÿå¯æ·»åŠ  // no default æ³¨é‡Šå–æ¶ˆæ­¤æ¬¡è­¦å‘Š</span></span><br><span class=\"line\">        <span class=\"string\">\"default-case\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ object.key ä¸­ . çš„ä½ç½®ï¼Œå‚æ•°:</span></span><br><span class=\"line\">        <span class=\"comment\">// propertyï¼Œ'.'å·åº”ä¸å±æ€§åœ¨åŒä¸€è¡Œ</span></span><br><span class=\"line\">        <span class=\"comment\">// object, '.' å·åº”ä¸å¯¹è±¡ååœ¨åŒä¸€è¡Œ</span></span><br><span class=\"line\">        <span class=\"string\">\"dot-location\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"property\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ä½¿ç”¨. å·å–å±æ€§</span></span><br><span class=\"line\">        <span class=\"comment\">// å‚æ•°ï¼š allowKeywordsï¼štrue ä½¿ç”¨ä¿ç•™å­—åšå±æ€§åæ—¶ï¼Œåªèƒ½ä½¿ç”¨. æ–¹å¼å–å±æ€§</span></span><br><span class=\"line\">        <span class=\"comment\">// false ä½¿ç”¨ä¿ç•™å­—åšå±æ€§åæ—¶, åªèƒ½ä½¿ç”¨ [] æ–¹å¼å–å±æ€§ e.g [2, &#123;\"allowKeywords\": false&#125;]</span></span><br><span class=\"line\">        <span class=\"comment\">// allowPattern: å½“å±æ€§ååŒ¹é…æä¾›çš„æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œå…è®¸ä½¿ç”¨ [] æ–¹å¼å–å€¼, å¦åˆ™åªèƒ½ç”¨. å·å–å€¼ e.g [2, &#123;\"allowPattern\": \"^[a-z]+(_[a-z]+)+$\"&#125;]</span></span><br><span class=\"line\">        <span class=\"string\">\"dot-notation\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"allowKeywords\"</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// ä½¿ç”¨ === æ›¿ä»£ == allow-null å…è®¸ null å’Œ undefined==</span></span><br><span class=\"line\">        <span class=\"string\">\"eqeqeq\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"allow-null\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ for-in å¾ªç¯ä¸­æœ‰ä¸€ä¸ª if è¯­å¥</span></span><br><span class=\"line\">        <span class=\"string\">\"guard-for-in\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ alertã€confirm å’Œ prompt</span></span><br><span class=\"line\">        <span class=\"string\">\"no-alert\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ arguments.caller æˆ– arguments.callee</span></span><br><span class=\"line\">        <span class=\"string\">\"no-caller\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸åœ¨ case å­å¥ä¸­ä½¿ç”¨è¯æ³•å£°æ˜</span></span><br><span class=\"line\">        <span class=\"string\">\"no-case-declarations\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢é™¤æ³•æ“ä½œç¬¦æ˜¾å¼çš„å‡ºç°åœ¨æ­£åˆ™è¡¨è¾¾å¼å¼€å§‹çš„ä½ç½®</span></span><br><span class=\"line\">        <span class=\"string\">\"no-div-regex\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ if è¯­å¥ä¸­æœ‰ return ä¹‹åæœ‰ else</span></span><br><span class=\"line\">        <span class=\"string\">\"no-else-return\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å‡ºç°ç©ºå‡½æ•°. å¦‚æœä¸€ä¸ªå‡½æ•°åŒ…å«äº†ä¸€æ¡æ³¨é‡Šï¼Œå®ƒå°†ä¸ä¼šè¢«è®¤ä¸ºæœ‰é—®é¢˜ã€‚</span></span><br><span class=\"line\">        <span class=\"string\">\"no-empty-function\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨ç©ºè§£æ„æ¨¡å¼ no-empty-pattern</span></span><br><span class=\"line\">        <span class=\"string\">\"no-empty-pattern\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨æ²¡æœ‰ç±»å‹æ£€æŸ¥æ“ä½œç¬¦çš„æƒ…å†µä¸‹ä¸ null è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class=\"line\">        <span class=\"string\">\"no-eq-null\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ eval()</span></span><br><span class=\"line\">        <span class=\"string\">\"no-eval\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æ‰©å±•åŸç”Ÿç±»å‹</span></span><br><span class=\"line\">        <span class=\"string\">\"no-extend-native\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¸å¿…è¦çš„ .bind() è°ƒç”¨</span></span><br><span class=\"line\">        <span class=\"string\">\"no-extra-bind\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ä¸å¿…è¦çš„æ ‡ç­¾</span></span><br><span class=\"line\">        <span class=\"string\">\"no-extra-label:\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ case è¯­å¥è½ç©º</span></span><br><span class=\"line\">        <span class=\"string\">\"no-fallthrough\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æ•°å­—å­—é¢é‡ä¸­ä½¿ç”¨å‰å¯¼å’Œæœ«å°¾å°æ•°ç‚¹</span></span><br><span class=\"line\">        <span class=\"string\">\"no-floating-decimal\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨çŸ­ç¬¦å·è¿›è¡Œç±»å‹è½¬æ¢ (!!fOO)</span></span><br><span class=\"line\">        <span class=\"string\">\"no-implicit-coercion\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨å…¨å±€èŒƒå›´å†…ä½¿ç”¨ var å’Œå‘½åçš„ function å£°æ˜</span></span><br><span class=\"line\">        <span class=\"string\">\"no-implicit-globals\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨ç±»ä¼¼ eval() çš„æ–¹æ³•</span></span><br><span class=\"line\">        <span class=\"string\">\"no-implied-eval\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ this å…³é”®å­—å‡ºç°åœ¨ç±»å’Œç±»å¯¹è±¡ä¹‹å¤–</span></span><br><span class=\"line\">        <span class=\"string\">\"no-invalid-this\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ __iterator__ å±æ€§</span></span><br><span class=\"line\">        <span class=\"string\">\"no-iterator\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨æ ‡ç­¾è¯­å¥</span></span><br><span class=\"line\">        <span class=\"string\">\"no-labels\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ä¸å¿…è¦çš„åµŒå¥—å—</span></span><br><span class=\"line\">        <span class=\"string\">\"no-lone-blocks\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨å¾ªç¯ä¸­å‡ºç° function å£°æ˜å’Œè¡¨è¾¾å¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-loop-func\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨é­”æœ¯æ•°å­— (3.14 ä»€ä¹ˆçš„ç”¨å¸¸é‡ä»£æ›¿)</span></span><br><span class=\"line\">        <span class=\"string\">\"no-magic-numbers\"</span>: [<span class=\"number\">1</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"ignore\"</span>: [<span class=\"number\">0</span>, <span class=\"number\">-1</span>, <span class=\"number\">1</span>]</span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨å¤šä¸ªç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-multi-spaces\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²ï¼Œåœ¨ JavaScript ä¸­ï¼Œå¯ä»¥åœ¨æ–°è¡Œä¹‹å‰ä½¿ç”¨æ–œçº¿åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²</span></span><br><span class=\"line\">        <span class=\"string\">\"no-multi-str\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å¯¹åŸç”Ÿå¯¹è±¡èµ‹å€¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-native-reassign\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨éèµ‹å€¼æˆ–æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ new æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-new\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å¯¹ Function å¯¹è±¡ä½¿ç”¨ new æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-new-func\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å¯¹ Stringï¼ŒNumber å’Œ Boolean ä½¿ç”¨ new æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-new-wrappers\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨å…«è¿›åˆ¶å­—é¢é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"no-octal\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨å…«è¿›åˆ¶è½¬ä¹‰åºåˆ—</span></span><br><span class=\"line\">        <span class=\"string\">\"no-octal-escape\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸å¯¹ function çš„å‚æ•°è¿›è¡Œé‡æ–°èµ‹å€¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-param-reassign\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ __proto__ å±æ€§</span></span><br><span class=\"line\">        <span class=\"string\">\"no-proto\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨ var å¤šæ¬¡å£°æ˜åŒä¸€å˜é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"no-redeclare\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨æŒ‡å®šçš„é€šè¿‡ require åŠ è½½çš„æ¨¡å—</span></span><br><span class=\"line\">        <span class=\"string\">\"no-return-assign\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨ javascript: url</span></span><br><span class=\"line\">        <span class=\"string\">\"no-script-url\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢è‡ªæˆ‘èµ‹å€¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-self-assign\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢è‡ªèº«æ¯”è¾ƒ</span></span><br><span class=\"line\">        <span class=\"string\">\"no-self-compare\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨é€—å·æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-sequences\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æŠ›å‡ºéå¼‚å¸¸å­—é¢é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"no-throw-literal\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ä¸€æˆä¸å˜çš„å¾ªç¯æ¡ä»¶</span></span><br><span class=\"line\">        <span class=\"string\">\"no-unmodified-loop-condition\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å‡ºç°æœªä½¿ç”¨è¿‡çš„è¡¨è¾¾å¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-unused-expressions\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨æœªä½¿ç”¨è¿‡çš„æ ‡ç­¾</span></span><br><span class=\"line\">        <span class=\"string\">\"no-unused-labels\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¸å¿…è¦çš„ .call() å’Œ .apply()</span></span><br><span class=\"line\">        <span class=\"string\">\"no-useless-call\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¸å¿…è¦çš„å­—ç¬¦ä¸²å­—é¢é‡æˆ–æ¨¡æ¿å­—é¢é‡çš„è¿æ¥</span></span><br><span class=\"line\">        <span class=\"string\">\"no-useless-concat\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ä¸å¿…è¦çš„è½¬ä¹‰å­—ç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-useless-escape\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ void æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-void\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨æ³¨é‡Šä¸­ä½¿ç”¨ç‰¹å®šçš„è­¦å‘Šæœ¯è¯­</span></span><br><span class=\"line\">        <span class=\"string\">\"no-warning-comments\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ with è¯­å¥</span></span><br><span class=\"line\">        <span class=\"string\">\"no-with\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨ parseInt() ä½¿ç”¨åŸºæ•°å‚æ•°</span></span><br><span class=\"line\">        <span class=\"string\">\"radix\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æ‰€æœ‰çš„ var å£°æ˜å‡ºç°åœ¨å®ƒä»¬æ‰€åœ¨çš„ä½œç”¨åŸŸé¡¶éƒ¨</span></span><br><span class=\"line\">        <span class=\"string\">\"vars-on-top\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ IIFE ä½¿ç”¨æ‹¬å·æ‹¬èµ·æ¥</span></span><br><span class=\"line\">        <span class=\"string\">\"wrap-iife\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"any\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢ â€œYodaâ€ æ¡ä»¶</span></span><br><span class=\"line\">        <span class=\"string\">\"yoda\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"never\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼æŒ‡ä»¤</span></span><br><span class=\"line\">        <span class=\"string\">\"strict\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//////////////</span></span><br><span class=\"line\">        <span class=\"comment\">// å˜é‡å£°æ˜ //</span></span><br><span class=\"line\">        <span class=\"comment\">//////////////</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢ var å£°æ˜ä¸­çš„åˆå§‹åŒ– (åˆå€¼)</span></span><br><span class=\"line\">        <span class=\"string\">\"init-declarations\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸ catch å­å¥çš„å‚æ•°ä¸å¤–å±‚ä½œç”¨åŸŸä¸­çš„å˜é‡åŒå</span></span><br><span class=\"line\">        <span class=\"string\">\"no-catch-shadow\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åˆ é™¤å˜é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"no-delete-var\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸æ ‡ç­¾ä¸å˜é‡åŒå</span></span><br><span class=\"line\">        <span class=\"string\">\"no-label-var\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ç‰¹å®šçš„å…¨å±€å˜é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"no-restricted-globals\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ var å£°æ˜ ä¸å¤–å±‚ä½œç”¨åŸŸçš„å˜é‡åŒå</span></span><br><span class=\"line\">        <span class=\"string\">\"no-shadow\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢è¦†ç›–å—é™åˆ¶çš„æ ‡è¯†ç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-shadow-restricted-names\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨æœªå£°æ˜çš„å˜é‡ï¼Œé™¤éå®ƒä»¬åœ¨ /*global */ æ³¨é‡Šä¸­è¢«æåˆ°</span></span><br><span class=\"line\">        <span class=\"string\">\"no-undef\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å°†å˜é‡åˆå§‹åŒ–ä¸º undefined</span></span><br><span class=\"line\">        <span class=\"string\">\"no-undef-init\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å°† undefined ä½œä¸ºæ ‡è¯†ç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-undefined\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å‡ºç°æœªä½¿ç”¨è¿‡çš„å˜é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"no-unused-vars\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"vars\"</span>: <span class=\"string\">\"all\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"args\"</span>: <span class=\"string\">\"none\"</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸åœ¨å˜é‡å®šä¹‰ä¹‹å‰ä½¿ç”¨å®ƒä»¬</span></span><br><span class=\"line\">        <span class=\"string\">\"no-use-before-define\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//////////////////////////</span></span><br><span class=\"line\">        <span class=\"comment\">// Node.js and CommonJS //</span></span><br><span class=\"line\">        <span class=\"comment\">//////////////////////////</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// require return statements after callbacks</span></span><br><span class=\"line\">        <span class=\"string\">\"callback-return\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ require() å‡ºç°åœ¨é¡¶å±‚æ¨¡å—ä½œç”¨åŸŸä¸­</span></span><br><span class=\"line\">        <span class=\"string\">\"global-require\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚å›è°ƒå‡½æ•°ä¸­æœ‰å®¹é”™å¤„ç†</span></span><br><span class=\"line\">        <span class=\"string\">\"handle-callback-err\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"^(err|error)$\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æ··åˆå¸¸è§„ var å£°æ˜å’Œ require è°ƒç”¨</span></span><br><span class=\"line\">        <span class=\"string\">\"no-mixed-requires\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢è°ƒç”¨ require æ—¶ä½¿ç”¨ new æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-new-require\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å¯¹ __dirname å’Œ __filename è¿›è¡Œå­—ç¬¦ä¸²è¿æ¥</span></span><br><span class=\"line\">        <span class=\"string\">\"no-path-concat\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ process.env</span></span><br><span class=\"line\">        <span class=\"string\">\"no-process-env\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ process.exit()</span></span><br><span class=\"line\">        <span class=\"string\">\"no-process-exit\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨åŒæ­¥æ–¹æ³•</span></span><br><span class=\"line\">        <span class=\"string\">\"no-sync\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//////////////</span></span><br><span class=\"line\">        <span class=\"comment\">// é£æ ¼æŒ‡å— //</span></span><br><span class=\"line\">        <span class=\"comment\">//////////////</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// æŒ‡å®šæ•°ç»„çš„å…ƒç´ ä¹‹é—´è¦ä»¥ç©ºæ ¼éš”å¼€ (, åé¢)ï¼Œ never å‚æ•°ï¼š[ ä¹‹å‰å’Œ ] ä¹‹åä¸èƒ½å¸¦ç©ºæ ¼ï¼Œalways å‚æ•°ï¼š[ ä¹‹å‰å’Œ ] ä¹‹åå¿…é¡»å¸¦ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"array-bracket-spacing\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"never\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æˆ–å¼ºåˆ¶åœ¨å•è¡Œä»£ç å—ä¸­ä½¿ç”¨ç©ºæ ¼ (ç¦ç”¨)</span></span><br><span class=\"line\">        <span class=\"string\">\"block-spacing\"</span>: [<span class=\"number\">1</span>, <span class=\"string\">\"never\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ä½¿ç”¨ä¸€è‡´çš„ç¼©è¿› ç¬¬äºŒä¸ªå‚æ•°ä¸º \"tab\" æ—¶ï¼Œä¼šä½¿ç”¨ tabï¼Œ</span></span><br><span class=\"line\">        <span class=\"comment\">// if while function åé¢çš„ &#123;å¿…é¡»ä¸ if åœ¨åŒä¸€è¡Œï¼Œjava é£æ ¼ã€‚</span></span><br><span class=\"line\">        <span class=\"string\">\"brace-style\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"1tbs\"</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"allowSingleLine\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// åŒå³°é©¼å‘½åæ ¼å¼</span></span><br><span class=\"line\">        <span class=\"string\">\"camelcase\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// æ§åˆ¶é€—å·å‰åçš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"comma-spacing\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"before\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            <span class=\"string\">\"after\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// æ§åˆ¶é€—å·åœ¨è¡Œå°¾å‡ºç°è¿˜æ˜¯åœ¨è¡Œé¦–å‡ºç° (é»˜è®¤è¡Œå°¾)</span></span><br><span class=\"line\">        <span class=\"comment\">// http://eslint.org/docs/rules/comma-style</span></span><br><span class=\"line\">        <span class=\"string\">\"comma-style\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"last\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">//\"SwitchCase\" (é»˜è®¤ï¼š0) å¼ºåˆ¶ switch è¯­å¥ä¸­çš„ case å­å¥çš„ç¼©è¿›æ°´å¹³</span></span><br><span class=\"line\">        <span class=\"comment\">// ä»¥æ–¹æ‹¬å·å–å¯¹è±¡å±æ€§æ—¶ï¼Œ[åé¢å’Œ] å‰é¢æ˜¯å¦éœ€è¦ç©ºæ ¼, å¯é€‰å‚æ•° never, always</span></span><br><span class=\"line\">        <span class=\"string\">\"computed-property-spacing\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"never\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// ç”¨äºæŒ‡ç»Ÿä¸€åœ¨å›è°ƒå‡½æ•°ä¸­æŒ‡å‘ this çš„å˜é‡åï¼Œç®­å¤´å‡½æ•°ä¸­çš„ this å·²ç»å¯ä»¥æŒ‡å‘å¤–å±‚è°ƒç”¨è€…ï¼Œåº”è¯¥æ²¡åµç”¨äº†</span></span><br><span class=\"line\">        <span class=\"comment\">// e.g [0,\"that\"] æŒ‡å®šåªèƒ½ var that = this. that ä¸èƒ½æŒ‡å‘å…¶ä»–ä»»ä½•å€¼ï¼Œthis ä¹Ÿä¸èƒ½èµ‹å€¼ç»™ that ä»¥å¤–çš„å…¶ä»–å€¼</span></span><br><span class=\"line\">        <span class=\"string\">\"consistent-this\"</span>: [<span class=\"number\">1</span>, <span class=\"string\">\"that\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ä½¿ç”¨å‘½åçš„ function è¡¨è¾¾å¼</span></span><br><span class=\"line\">        <span class=\"string\">\"func-names\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// æ–‡ä»¶æœ«å°¾å¼ºåˆ¶æ¢è¡Œ</span></span><br><span class=\"line\">        <span class=\"string\">\"eol-last\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"string\">\"indent\"</span>: [<span class=\"number\">2</span>, <span class=\"number\">4</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"SwitchCase\"</span>: <span class=\"number\">1</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨å¯¹è±¡å­—é¢é‡çš„å±æ€§ä¸­é”®å’Œå€¼ä¹‹é—´ä½¿ç”¨ä¸€è‡´çš„é—´è·</span></span><br><span class=\"line\">        <span class=\"string\">\"key-spacing\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"beforeColon\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">            <span class=\"string\">\"afterColon\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ä½¿ç”¨ä¸€è‡´çš„æ¢è¡Œé£æ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"linebreak-style\"</span>: [<span class=\"number\">1</span>, <span class=\"string\">\"unix\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚åœ¨æ³¨é‡Šå‘¨å›´æœ‰ç©ºè¡Œ (è¦æ±‚åœ¨å—çº§æ³¨é‡Šä¹‹å‰æœ‰ä¸€ç©ºè¡Œ)</span></span><br><span class=\"line\">        <span class=\"string\">\"lines-around-comment\"</span>: [<span class=\"number\">1</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"beforeBlockComment\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ä¸€è‡´åœ°ä½¿ç”¨å‡½æ•°å£°æ˜æˆ–å‡½æ•°è¡¨è¾¾å¼ï¼Œæ–¹æ³•å®šä¹‰é£æ ¼ï¼Œå‚æ•°ï¼š</span></span><br><span class=\"line\">        <span class=\"comment\">// declaration: å¼ºåˆ¶ä½¿ç”¨æ–¹æ³•å£°æ˜çš„æ–¹å¼ï¼Œfunction f()&#123;&#125; e.g [2, \"declaration\"]</span></span><br><span class=\"line\">        <span class=\"comment\">// expressionï¼šå¼ºåˆ¶ä½¿ç”¨æ–¹æ³•è¡¨è¾¾å¼çš„æ–¹å¼ï¼Œvar f = function() &#123;&#125; e.g [2, \"expression\"]</span></span><br><span class=\"line\">        <span class=\"comment\">// allowArrowFunctions: declaration é£æ ¼ä¸­å…è®¸ç®­å¤´å‡½æ•°ã€‚ e.g [2, \"declaration\", &#123; \"allowArrowFunctions\": true&#125;]</span></span><br><span class=\"line\">        <span class=\"string\">\"func-style\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶å›è°ƒå‡½æ•°æœ€å¤§åµŒå¥—æ·±åº¦ 5 å±‚</span></span><br><span class=\"line\">        <span class=\"string\">\"max-nested-callbacks\"</span>: [<span class=\"number\">1</span>, <span class=\"number\">5</span>],</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨æŒ‡å®šçš„æ ‡è¯†ç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"id-blacklist\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶æ ‡è¯†ç¬¦çš„æœ€æ–°å’Œæœ€å¤§é•¿åº¦</span></span><br><span class=\"line\">        <span class=\"string\">\"id-length\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æ ‡è¯†ç¬¦åŒ¹é…ä¸€ä¸ªæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class=\"line\">        <span class=\"string\">\"id-match\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨ JSX å±æ€§ä¸­ä¸€è‡´åœ°ä½¿ç”¨åŒå¼•å·æˆ–å•å¼•å·</span></span><br><span class=\"line\">        <span class=\"string\">\"jsx-quotes\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨å…³é”®å­—å‰åä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼ (å‰åè…°éœ€è¦)</span></span><br><span class=\"line\">        <span class=\"string\">\"keyword-spacing\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ä¸€è¡Œçš„æœ€å¤§é•¿åº¦</span></span><br><span class=\"line\">        <span class=\"string\">\"max-len\"</span>: [<span class=\"number\">1</span>, <span class=\"number\">200</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶æœ€å¤§è¡Œæ•°</span></span><br><span class=\"line\">        <span class=\"string\">\"max-lines\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ function å®šä¹‰ä¸­æœ€å¤šå…è®¸çš„å‚æ•°æ•°é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"max-params\"</span>: [<span class=\"number\">1</span>, <span class=\"number\">7</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ function å—æœ€å¤šå…è®¸çš„çš„è¯­å¥æ•°é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"max-statements\"</span>: [<span class=\"number\">1</span>, <span class=\"number\">200</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶æ¯ä¸€è¡Œä¸­æ‰€å…è®¸çš„æœ€å¤§è¯­å¥æ•°é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"max-statements-per-line\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æ„é€ å‡½æ•°é¦–å­—æ¯å¤§å†™ ï¼ˆè¦æ±‚è°ƒç”¨ new æ“ä½œç¬¦æ—¶æœ‰é¦–å­—æ¯å¤§å°çš„å‡½æ•°ï¼Œå…è®¸è°ƒç”¨é¦–å­—æ¯å¤§å†™çš„å‡½æ•°æ—¶æ²¡æœ‰ new æ“ä½œç¬¦ã€‚ï¼‰</span></span><br><span class=\"line\">        <span class=\"string\">\"new-cap\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"newIsCap\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"string\">\"capIsNew\"</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚è°ƒç”¨æ— å‚æ„é€ å‡½æ•°æ—¶æœ‰åœ†æ‹¬å·</span></span><br><span class=\"line\">        <span class=\"string\">\"new-parens\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢ var å£°æ˜è¯­å¥åæœ‰ä¸€è¡Œç©ºè¡Œ</span></span><br><span class=\"line\">        <span class=\"string\">\"newline-after-var\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨ Array æ„é€ å‡½æ•°</span></span><br><span class=\"line\">        <span class=\"string\">\"no-array-constructor\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨æŒ‰ä½è¿ç®—ç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-bitwise\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ return è¯­å¥ä¹‹å‰æœ‰ä¸€ç©ºè¡Œ</span></span><br><span class=\"line\">        <span class=\"string\">\"newline-before-return\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æ–¹æ³•é“¾ä¸­æ¯ä¸ªè°ƒç”¨éƒ½æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"newline-per-chained-call\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨ continue è¯­å¥</span></span><br><span class=\"line\">        <span class=\"string\">\"no-continue\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨ä»£ç è¡Œåä½¿ç”¨å†…è”æ³¨é‡Š</span></span><br><span class=\"line\">        <span class=\"string\">\"no-inline-comments\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ if ä½œä¸ºå”¯ä¸€çš„è¯­å¥å‡ºç°åœ¨ else è¯­å¥ä¸­</span></span><br><span class=\"line\">        <span class=\"string\">\"no-lonely-if\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æ··åˆä½¿ç”¨ä¸åŒçš„æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-mixed-operators\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸ç©ºæ ¼å’Œ tab æ··åˆç¼©è¿›</span></span><br><span class=\"line\">        <span class=\"string\">\"no-mixed-spaces-and-tabs\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸å¤šä¸ªç©ºè¡Œ</span></span><br><span class=\"line\">        <span class=\"string\">\"no-multiple-empty-lines\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"max\"</span>: <span class=\"number\">2</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸å¦å®šçš„è¡¨è¾¾å¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-negated-condition\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸ä½¿ç”¨åµŒå¥—çš„ä¸‰å…ƒè¡¨è¾¾å¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-nested-ternary\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨ Object çš„æ„é€ å‡½æ•°</span></span><br><span class=\"line\">        <span class=\"string\">\"no-new-object\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨ä¸€å…ƒæ“ä½œç¬¦ ++ å’Œ --</span></span><br><span class=\"line\">        <span class=\"string\">\"no-plusplus\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä½¿ç”¨ç‰¹å®šçš„è¯­æ³•</span></span><br><span class=\"line\">        <span class=\"string\">\"no-restricted-syntax\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ function æ ‡è¯†ç¬¦å’Œæ‹¬å·ä¹‹é—´å‡ºç°ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-spaced-func\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸ä½¿ç”¨ä¸‰å…ƒæ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-ternary\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦ç”¨è¡Œå°¾ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"no-trailing-spaces\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢æ ‡è¯†ç¬¦ä¸­æœ‰æ‚¬ç©ºä¸‹åˆ’çº¿_bar</span></span><br><span class=\"line\">        <span class=\"string\">\"no-underscore-dangle\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å¯ä»¥åœ¨æœ‰æ›´ç®€å•çš„å¯æ›¿ä»£çš„è¡¨è¾¾å¼æ—¶ä½¿ç”¨ä¸‰å…ƒæ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"no-unneeded-ternary\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢å±æ€§å‰æœ‰ç©ºç™½</span></span><br><span class=\"line\">        <span class=\"string\">\"no-whitespace-before-property\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶èŠ±æ‹¬å·å†…æ¢è¡Œç¬¦çš„ä¸€è‡´æ€§</span></span><br><span class=\"line\">        <span class=\"string\">\"object-curly-newline\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨èŠ±æ‹¬å·ä¸­ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"object-curly-spacing\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶å°†å¯¹è±¡çš„å±æ€§æ”¾åœ¨ä¸åŒçš„è¡Œä¸Š</span></span><br><span class=\"line\">        <span class=\"string\">\"object-property-newline\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶å‡½æ•°ä¸­çš„å˜é‡è¦ä¹ˆä¸€èµ·å£°æ˜è¦ä¹ˆåˆ†å¼€å£°æ˜</span></span><br><span class=\"line\">        <span class=\"string\">\"one-var\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"initialized\"</span>: <span class=\"string\">\"never\"</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢åœ¨ var å£°æ˜å‘¨å›´æ¢è¡Œ</span></span><br><span class=\"line\">        <span class=\"string\">\"one-var-declaration-per-line\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢åœ¨å¯èƒ½çš„æƒ…å†µä¸‹è¦æ±‚ä½¿ç”¨ç®€åŒ–çš„èµ‹å€¼æ“ä½œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"operator-assignment\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶æ“ä½œç¬¦ä½¿ç”¨ä¸€è‡´çš„æ¢è¡Œç¬¦</span></span><br><span class=\"line\">        <span class=\"string\">\"operator-linebreak\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"after\"</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"overrides\"</span>: &#123;</span><br><span class=\"line\">                <span class=\"string\">\"?\"</span>: <span class=\"string\">\"before\"</span>,</span><br><span class=\"line\">                <span class=\"string\">\":\"</span>: <span class=\"string\">\"before\"</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢å—å†…å¡«å……</span></span><br><span class=\"line\">        <span class=\"string\">\"padded-blocks\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚å¯¹è±¡å­—é¢é‡å±æ€§åç§°ç”¨å¼•å·æ‹¬èµ·æ¥</span></span><br><span class=\"line\">        <span class=\"string\">\"quote-props\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ä½¿ç”¨ä¸€è‡´çš„åå‹¾å·ã€åŒå¼•å·æˆ–å•å¼•å·</span></span><br><span class=\"line\">        <span class=\"string\">\"quotes\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"double\"</span>, <span class=\"string\">\"avoid-escape\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ä½¿ç”¨ JSDoc æ³¨é‡Š</span></span><br><span class=\"line\">        <span class=\"string\">\"require-jsdoc\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢ä½¿ç”¨åˆ†å·è€Œä¸æ˜¯ ASIï¼ˆè¿™ä¸ªæ‰æ˜¯æ§åˆ¶è¡Œå°¾éƒ¨åˆ†å·çš„ï¼Œï¼‰</span></span><br><span class=\"line\">        <span class=\"string\">\"semi\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"always\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åˆ†å·ä¹‹å‰å’Œä¹‹åä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"semi-spacing\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚åŒä¸€ä¸ªå£°æ˜å—ä¸­çš„å˜é‡æŒ‰é¡ºåºæ’åˆ—</span></span><br><span class=\"line\">        <span class=\"string\">\"sort-vars\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨å—ä¹‹å‰ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"space-before-blocks\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"always\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨ function çš„å·¦æ‹¬å·ä¹‹å‰ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"space-before-function-paren\"</span>: [<span class=\"number\">0</span>, <span class=\"string\">\"always\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨åœ†æ‹¬å·å†…ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"space-in-parens\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"never\"</span>],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æ“ä½œç¬¦å‘¨å›´æœ‰ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"space-infix-ops\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨ä¸€å…ƒæ“ä½œç¬¦å‰åä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"space-unary-ops\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"words\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"string\">\"nonwords\"</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨æ³¨é‡Šä¸­ // æˆ– /* ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"spaced-comment\"</span>: [<span class=\"number\">2</span>, <span class=\"string\">\"always\"</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"markers\"</span>: [<span class=\"string\">\"global\"</span>, <span class=\"string\">\"globals\"</span>, <span class=\"string\">\"eslint\"</span>, <span class=\"string\">\"eslint-disable\"</span>, <span class=\"string\">\"*package\"</span>, <span class=\"string\">\"!\"</span>]</span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢ Unicode BOM</span></span><br><span class=\"line\">        <span class=\"string\">\"unicode-bom\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æ­£åˆ™è¡¨è¾¾å¼è¢«æ‹¬å·æ‹¬èµ·æ¥</span></span><br><span class=\"line\">        <span class=\"string\">\"wrap-regex\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//////////////</span></span><br><span class=\"line\">        <span class=\"comment\">// ES6. ç›¸å…³ //</span></span><br><span class=\"line\">        <span class=\"comment\">//////////////</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ç®­å¤´å‡½æ•°ä½“ä½¿ç”¨å¤§æ‹¬å·</span></span><br><span class=\"line\">        <span class=\"string\">\"arrow-body-style\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ç®­å¤´å‡½æ•°çš„å‚æ•°ä½¿ç”¨åœ†æ‹¬å·</span></span><br><span class=\"line\">        <span class=\"string\">\"arrow-parens\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"string\">\"arrow-spacing\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"before\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"string\">\"after\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­ç”¨ super() è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼ŒTypeScrip çš„ç¼–è¯‘å™¨ä¹Ÿä¼šæç¤º</span></span><br><span class=\"line\">        <span class=\"string\">\"constructor-super\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶ generator å‡½æ•°ä¸­ * å·å‘¨å›´ä½¿ç”¨ä¸€è‡´çš„ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"generator-star-spacing\"</span>: [<span class=\"number\">2</span>, &#123;</span><br><span class=\"line\">            <span class=\"string\">\"before\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            <span class=\"string\">\"after\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;],</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¿®æ”¹ç±»å£°æ˜çš„å˜é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"no-class-assign\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸ç®­å¤´åŠŸèƒ½ï¼Œåœ¨é‚£é‡Œä»–ä»¬å¯ä»¥æ··æ·†çš„æ¯”è¾ƒ</span></span><br><span class=\"line\">        <span class=\"string\">\"no-confusing-arrow\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¿®æ”¹ const å£°æ˜çš„å˜é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"no-const-assign\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ç±»æˆå‘˜ä¸­å‡ºç°é‡å¤çš„åç§°</span></span><br><span class=\"line\">        <span class=\"string\">\"no-dupe-class-members\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ä¸å…è®¸å¤åˆ¶æ¨¡å—çš„è¿›å£</span></span><br><span class=\"line\">        <span class=\"string\">\"no-duplicate-imports\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ Symbol çš„æ„é€ å‡½æ•°</span></span><br><span class=\"line\">        <span class=\"string\">\"no-new-symbol\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å…è®¸æŒ‡å®šæ¨¡å—åŠ è½½æ—¶çš„è¿›å£</span></span><br><span class=\"line\">        <span class=\"string\">\"no-restricted-imports\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œåœ¨è°ƒç”¨ super() ä¹‹å‰ä½¿ç”¨ this æˆ– super</span></span><br><span class=\"line\">        <span class=\"string\">\"no-this-before-super\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">        <span class=\"comment\">// ç¦æ­¢ä¸å¿…è¦çš„è®¡ç®—æ€§èƒ½é”®å¯¹è±¡çš„æ–‡å­—</span></span><br><span class=\"line\">        <span class=\"string\">\"no-useless-computed-key\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ä½¿ç”¨ let æˆ– const è€Œä¸æ˜¯ var</span></span><br><span class=\"line\">        <span class=\"string\">\"no-var\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢å¯¹è±¡å­—é¢é‡ä¸­æ–¹æ³•å’Œå±æ€§ä½¿ç”¨ç®€å†™è¯­æ³•</span></span><br><span class=\"line\">        <span class=\"string\">\"object-shorthand\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ä½¿ç”¨ç®­å¤´å‡½æ•°ä½œä¸ºå›è°ƒ</span></span><br><span class=\"line\">        <span class=\"string\">\"prefer-arrow-callback\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ä½¿ç”¨ const å£°æ˜é‚£äº›å£°æ˜åä¸å†è¢«ä¿®æ”¹çš„å˜é‡</span></span><br><span class=\"line\">        <span class=\"string\">\"prefer-const\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚åœ¨åˆé€‚çš„åœ°æ–¹ä½¿ç”¨ Reflect æ–¹æ³•</span></span><br><span class=\"line\">        <span class=\"string\">\"prefer-reflect\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦è€Œé .apply()</span></span><br><span class=\"line\">        <span class=\"string\">\"prefer-spread\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ä½¿ç”¨æ¨¡æ¿å­—é¢é‡è€Œéå­—ç¬¦ä¸²è¿æ¥</span></span><br><span class=\"line\">        <span class=\"string\">\"prefer-template\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// Suggest using the rest parameters instead of arguments</span></span><br><span class=\"line\">        <span class=\"string\">\"prefer-rest-params\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚ generator å‡½æ•°å†…æœ‰ yield</span></span><br><span class=\"line\">        <span class=\"string\">\"require-yield\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// enforce spacing between rest and spread operators and their expressions</span></span><br><span class=\"line\">        <span class=\"string\">\"rest-spread-spacing\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶æ¨¡å—å†…çš„ import æ’åº</span></span><br><span class=\"line\">        <span class=\"string\">\"sort-imports\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"comment\">// è¦æ±‚æˆ–ç¦æ­¢æ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„åµŒå…¥è¡¨è¾¾å¼å‘¨å›´ç©ºæ ¼çš„ä½¿ç”¨</span></span><br><span class=\"line\">        <span class=\"string\">\"template-curly-spacing\"</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å¼ºåˆ¶åœ¨ yield* è¡¨è¾¾å¼ä¸­ * å‘¨å›´ä½¿ç”¨ç©ºæ ¼</span></span><br><span class=\"line\">        <span class=\"string\">\"yield-star-spacing\"</span>: <span class=\"number\">2</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"ä»£ç é‡æ„","comments":1,"date":"2018-06-16T14:46:36.000Z","from":null,"_content":"\nä»Šå¤©è¯»äº†æ›¾æ¢çš„[ã€Šè®¾è®¡æ¨¡å¼ã€‹](https://book.douban.com/subject/26382780/)ä¸­çš„ä»£ç é‡æ„è¿™ä¸€ç« èŠ‚, çŸ¥è¯†ç‚¹ä¸å¤šå´éå¸¸å®ç”¨, åœ¨å®é™…é¡¹ç›®ä¸­é™¤äº†ä½¿ç”¨è®¾è®¡æ¨¡å¼é‡æ„ä»£ç å¤–, è¿˜æœ‰ä¸€äº›å®¹æ˜“å¿½ç•¥çš„ç»†èŠ‚. è¿™äº›ç»†èŠ‚ä¹Ÿæ˜¯é‡æ„çš„é‡è¦æ‰‹æ®µ. å†™è¿™ç¯‡æ–‡ç« æ€»ç»“ä¸€ä¸‹.\n\n<!-- more -->\n\n> ä»£ç æ˜¯å†™ç»™äººçœ‹çš„, é¡ºä¾¿ç»™æœºå™¨è¿è¡Œ. ä¼˜é›…çš„ä»£ç åº”è¯¥æ˜¯ç®€å•ã€æ˜“ç»´æŠ¤ã€å¯æ‰©å±•çš„.\n\n### æç‚¼å‡½æ•°\n\nå¦‚æœä¸€ä¸ªå‡½æ•°è¿‡é•¿, è€Œä¸”éœ€è¦æ³¨é‡Šæ‰æ¸…æ¥šå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„, é‚£ä¹ˆéœ€è¦è€ƒè™‘æŠŠå®ƒç‹¬ç«‹å‡ºæ¥. è¿™æ ·åšçš„å¥½å¤„æ˜¯:\n\n* é¿å…è¶…å¤§å‡½æ•°, ä½œç”¨åŸŸè¿‡å¤§å˜é‡ä¸å¥½ç»´æŠ¤\n* æŠ½ç¦»å…¬å…±é€»è¾‘, æ˜“äºå¤ç”¨å’Œè¦†å†™\n* è‰¯å¥½çš„å‘½åèµ·åˆ°äº†æ³¨é‡Šä½œç”¨\n\n**ä¾‹å­:**\n\n```js\nconst getUserInfo = () => {\n  fetch('https://xxx.com/userInfo', (data) => {\n    console.log(`\n      userId: ${data.userId}\\n\n      userName: ${data.userName}\\n\n      nickName: ${data.NickName}\n    `);\n  });\n};\n```\n\né‡æ„å¦‚ä¸‹:\n\n```js\nconst printDetail = (data) => {\n    console.log(`\n    userId: ${data.userId}\\n\n    userName: ${data.userName}\\n\n    nickName: ${data.NickName}\n  `);\n}\n\nconst getUserInfo = () => {\n  fetch('https://xxx.com/userInfo', (data) => {\n    printDetail(data);\n  });\n};\n```\n\n[â¤´ï¸Go Top](#)\n\n### åˆå¹¶é‡å¤çš„æ¡ä»¶ç‰‡æ®µ\n\nå¦‚æœä¸€ä¸ªå‡½æ•°ä½“å†…æœ‰ä¸€äº›æ¡ä»¶åˆ†æ”¯, è€Œä¸”è¿™äº›æ¡ä»¶åˆ†æ”¯å†…æ•£å¸ƒäº†ä¸€äº›é‡å¤çš„ä»£ç , è¿™ä¸ªæ—¶å€™å°±æœ‰å¿…è¦è¿›è¡Œåˆå¹¶å»é‡æ“ä½œ.\n\n**ä¾‹å­:**\n\n```js\nconst paging = (currPage) => {\n  if (currPage <= 0) {\n    currPage = 0;\n    jump(currPage); // è·³è½¬\n  } else if (currPage >= totalPage) {\n    currPage = totalPage;\n    jump(currPage); // è·³è½¬\n  } else {\n    jump(currPage); // è·³è½¬\n  }\n};\n```\n\nå¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ `jump(currPage)` é‡å¤äº†, å®Œå…¨å¯ä»¥æŠŠå®ƒç‹¬ç«‹å‡ºæ¥:\n\n```js\nconst paging = (currPage) => {\n  if (currPage <= 0) {\n    currPage = 0;\n  } else if (currPage >= totalPage) {\n    currPage = totalPage;\n  }\n  jump(currPage);\n}\n```\n\n[â¤´ï¸Go Top](#)\n\n### æŠŠæ¡ä»¶åˆ†æ”¯è¯­å¥æç‚¼æˆå‡½æ•°\n\nå¤æ‚çš„æ¡ä»¶åˆ†æ”¯è¯­å¥æ˜¯å¯¼è‡´ç¨‹åºéš¾ä»¥é˜…è¯»å’Œç†è§£çš„é‡è¦åŸå› , è€Œä¸”å¾ˆå®¹æ˜“å¯¼è‡´ä¸€ä¸ªåºå¤§çš„å‡½æ•°. è¿™ç§æƒ…å†µä¸‹å°±éœ€è¦æŠŠæ¡ä»¶åˆ†æ”¯è¯­å¥æç‚¼å‡ºæ¥.\n\n**ä¾‹å­:**\n\n```js\n// éœ€æ±‚: å¦‚æœå½“å­£æ˜¯å¤„äºå¤å­£, é‚£ä¹ˆæ‰€æœ‰çš„å•†å“ 8 æŠ˜å‡ºå”®\n\nconst getPrice = (price) => {\n  const date = new Date();\n  if (date.getMonth() >= 6 && date.getMonth() <= 9) { // å¤å­£\n    return price * 0.8;\n  }\n  return price;\n};\n```\n\nè§‚å¯Ÿè¿™æ®µä»£ç :\n\n```js\nif (date.getMonth() >= 6 && date.getMonth() <= 9) { // å¤å­£\n  // ...\n}\n```\n\næˆ‘ä»¬éœ€è¦è®©å®ƒæ›´ç¬¦åˆè¯­ä¹‰, è¿™æ ·è¯»ä»£ç çš„äººèƒ½å¾ˆè½»æ¾ç†è§£æ„å›¾, è¿™é‡Œå°±å¯ä»¥æç‚¼æˆä¸€ä¸ªå•ç‹¬å‡½æ•°.\n\n```js\nconst isSummer = () => {\n  const date = new Date();\n  return date.getMonth() >= 6 && date.getMonth() <= 9;\n};\n\nconst getPrice = (price) => {\n  const date = new Date();\n  if (isSummer()) {\n    return price * 0.8;\n  }\n  return price;\n};\n```\n\n[â¤´ï¸Go Top](#)\n\n### åˆç†çš„ä½¿ç”¨å¾ªç¯\n\nåœ¨å‡½æ•°ä½“å†…, å¦‚æœä¸€äº›ä»£ç åªæ˜¯å®Œæˆä¸€äº›é‡å¤çš„å·¥ä½œ, é‚£ä¹ˆå¯ä»¥åˆç†åˆ©ç”¨å¾ªç¯å®ŒæˆåŒæ ·çš„åŠŸèƒ½, è¿™æ ·å¯ä»¥ä¿æŒä»£ç é‡æ›´å°‘.\n\n**ä¾‹å­:**\n\n```js\n// éœ€æ±‚: IE9 ä»¥ä¸‹åˆ›å»ºä¸€ä¸ª XHR å¯¹è±¡\n\nvar createXHR = function() {\n  var xhr;\n  try {\n    xhr = new ActiveXObject('MSXML2.XMLHttp.6.0');\n  } catch(e) {\n    try {\n      xhr = new ActiveXObject('MSXML2.XMLHttp.3.0')\n    } catch(e) {\n      xhr = new ActiveXObject('MSXML2.XMLHttp');\n    }\n  }\n  return xhr;\n};\n\nvar xhr = createXHR();\n```\n\nè¿™ä¸ªæ—¶å€™, ä½¿ç”¨å¾ªç¯æ¥ä¼˜åŒ–ä¸Šé¢çš„ä»£ç :\n\n```js\n// è¿™æ®µä»£ç å°±çœ‹ç€ç¬¦åˆè¯­ä¹‰äº†, è€Œä¸”å¥½ç†è§£ ğŸ¤¡\n\nvar createXHR = function() {\n  var versions = ['MSXML2.XMLHttp.6.0', 'MSXML2.XMLHttp.3.0', 'MSXML2.XMLHttp'];\n  for (var i = 0, version; version = versions[i++];) {\n    try {\n      return new ActiveXObject(version);\n    } catch(e) {};\n  }\n};\n\nvar xhr = createXHR();\n```\n\n[â¤´ï¸Go Top](#)\n\n### æå‰è®©å‡½æ•°é€€å‡ºä»£æ›¿åµŒå¥—æ¡ä»¶åˆ†æ”¯\n\nå¾ˆå¤šç¨‹åºå‘˜ğŸ‘¨â€ğŸ’»â€éƒ½æœ‰è¿™ç§è§‚å¿µ \"æ¯ä¸ªå‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªå…¥å£å’Œä¸€ä¸ªå‡ºå£\", ä½†æ˜¯å…³äº \"å‡½æ•°åªæœ‰ä¸€ä¸ªå‡ºå£\" å¾€å¾€æœ‰ä¸€äº›ä¸åŒçš„çœ‹æ³•, ä¸‹é¢ç”¨ä»£ç æ¥è¯´æ˜ä¸€ä¸‹, å…‰è®²æ¦‚å¿µæœ‰ç‚¹æ™¦æ¶©.\n\n**ä¾‹å­:**\n\n```js\n// ä¸‹é¢æ˜¯ \"å‡½æ•°åªæœ‰ä¸€ä¸ªå‡ºå£\" çš„å…¸å‹ä»£ç \n\nconst del = (obj) => {\n  let ret;\n  if (!obj.isReadOnly) {\n    if (obj.isFolder) {\n      ret = delFolder(obj);\n    } else if (obj.isFile) {\n      ret = delFile(obj);\n    }\n  }\n  return ret;\n};\n```\n\nåµŒå¥—çš„æ¡ä»¶åˆ†æ”¯ç»å¯¹æ˜¯ä»£ç ç»´æŠ¤è€…çš„å™©æ¢¦, å¤šå±‚åµŒå¥—çš„æ¡ä»¶æ›´åŠ ä¸å®¹æ˜“ç†è§£, æœ‰æ—¶å€™å¦‚æœä»£ç è¿‡é•¿, ä¸Šä¸€ä¸ª `if ()` è¯­å¥å¯èƒ½ç›¸éš”å¾ˆè¿œ. ä¸¥é‡å½±å“äº†é˜…è¯»ä½“éªŒå•Š. é‡æ„çš„ `del` å‡½æ•°å¦‚ä¸‹:\n\n```js\nconst del = (obj) => {\n  if (obj.isReadOnly) { // åè½¬ if\n    return;\n  }\n  if (obj.isFolder) {\n    return delFolder(obj);\n  }\n  if (obj.isFile) {\n    return delFile(obj);\n  }\n};\n\n// ç¬é—´æ¸…çˆ½ ğŸ‘Œ\n```\n\n[â¤´ï¸Go Top](#)\n\n### ä¼ é€’å¯¹è±¡å‚æ•°ä»£æ›¿è¿‡é•¿çš„å‚æ•°åˆ—è¡¨\n\næœ‰æ—¶å€™ä¸€ä¸ªå‡½æ•°å¯èƒ½æ¥æ”¶å¤šä¸ªå‚æ•°, è€Œä¸”å‚æ•°è¶Šå¤š, å°±è¶Šéš¾ç†è§£å’Œä½¿ç”¨. æœ€é‡è¦çš„ä¸€ç‚¹éœ€è¦æ³¨æ„å‚æ•°çš„é¡ºåº, å¦‚æœä¸ä¼ çš„æƒ…å†µè¦ä½¿ç”¨å ä½ç¬¦ä»£æ›¿. å¦‚æœå‚æ•°è¶…è¿‡ 3 ä¸ª, è¯·ä½¿ç”¨å¯¹è±¡å§.\n\n**ä¾‹å­:**\n\n```js\nconst setUserInfo = (id, name, address, sex, mobile, qq) => {\n  // ...\n}\n\n// è°ƒç”¨ â˜¹ï¸:\nsetUserInfo(1, 'ifyour', undefined, 'male', undefined, '123456');\n\n\n// é‡æ„ ğŸ˜:\nsetUserInfo({\n  id: 1,\n  name: 'ifyour',\n  sex: 'male',\n  qq: '123456',\n})\n```\n\n[â¤´ï¸Go Top](#)\n\n### å°½é‡å‡å°‘å‚æ•°æ•°é‡\n\nå¦‚æœè°ƒç”¨ä¸€ä¸ªå‡½æ•°, éœ€è¦ä¼ é€’å¾ˆå¤šå‚æ•°, è¿™æ ·çš„å‡½æ•°ç”¨èµ·æ¥å°±è¦å°å¿ƒäº†, å¿…é¡»ææ¸…æ¥šæ¯ä¸ªå‚æ•°çš„å«ä¹‰, æ‰€ä»¥, å¦‚æœèƒ½å°½é‡å°‘ä¼ å‚æ•°å°±å°‘ä¼ å‚æ•°. æŠŠå¤æ‚çš„é€»è¾‘å°è£…åˆ°å‡½æ•°å†…éƒ¨.\n\n**ä¾‹å­:**\n\n```js\n// éœ€æ±‚: æœ‰ä¸€ä¸ªç”»å›¾å‡½æ•° draw\n\nconst draw = (width, height, square) => {\n  // ...\n};\n\n// ä¼˜åŒ–å¦‚ä¸‹:\nconst draw = (width, height) => {\n  const square = width * height;\n  // ...\n}\n```\n\nè¿™é‡Œçš„ `square` å‚æ•°æ²¡å¿…è¦, å¯ä»¥é€šè¿‡ `width` å’Œ `height` è®¡ç®—è·å¾—, è¿˜æœ‰ä¸€ç§æƒ…å†µ, è¿™ä¸ªç”»å›¾å‡½æ•°, å¦‚æœå¯ä»¥ç”»å¤šç§å›¾å½¢å‘¢? æ‰€ä»¥éœ€è¦åœ¨å†…éƒ¨å»å¤„ç†, ä»€ä¹ˆæ—¶å€™éœ€è¦ `square` ä»€ä¹ˆæ—¶å€™éœ€è¦ `radius`, ç„¶åå¯ä»¥ä½¿ç”¨ **ç­–ç•¥æ¨¡å¼** è®©å®ƒæ”¯æŒç”»å¤šç§å›¾å½¢.\n\n[â¤´ï¸Go Top](#)\n\n### å°‘ç”¨ä¸‰ç›®è¿ç®—\n\nä¸‰ç›®è¿ç®—èƒ½å‡å°‘ä»£ç é‡, ä½†æ˜¯ä¸èƒ½æ»¥ç”¨, å¦‚æœä»¥ç‰ºç‰²ä»£ç å¯è¯»æ€§ä¸ºä»£ä»·, é‚£å°±å¾—ä¸å¿å¤±äº†.\n\n```js\nconst global = typeof window !== 'undefined' ? window : this;\n\n// ä½†æ˜¯è¿™ç§æƒ…å†µå°±å®Œå…¨æ²¡å¿…è¦äº†, è€å®å†™ if..else...\n\nif (!aup || !bup) {\n  return a === doc ? -1 :\n    b === doc ? 1 :\n    aup ? -1 :\n    bup ? 1 :\n    sortInput ?\n    (indexOf.call(sortInput, a) - indexOf.call(sortInput, b)) :\n    0;\n}\n\n// ğŸ˜¡ è¿™æ˜¯äººçœ‹çš„å—\n```\n\n[â¤´ï¸Go Top](#)\n\n### åˆç†ä½¿ç”¨é“¾å¼è°ƒç”¨\n\njQuery ä¸­çš„é“¾å¼è°ƒç”¨ç”¨èµ·æ¥è¿˜æ˜¯å¾ˆçˆ½çš„, å®ƒçš„å®ç°ä¹Ÿéå¸¸ç®€å•, æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°ä¸€ä¸ªé“¾å¼è°ƒç”¨. ä½¿ç”¨çš„å‰æå°±æ˜¯é“¾æ¡çš„ç»“æ„ç›¸å¯¹æ¥è¯´ç¨³å®š, ä¸å®¹æ˜“å‘ç”Ÿä¿®æ”¹, å¦‚æœæ˜¯ç»å¸¸å‘ç”Ÿä¿®æ”¹çš„è¯, è¿˜æ˜¯å»ºè®®ä½¿ç”¨æ™®é€šçš„è°ƒç”¨. å› ä¸ºå®ƒè°ƒè¯•çš„æ—¶å€™éœ€è¦æŠŠè¿™ä¸ªé“¾å­æ‹†å¼€, æ‰çŸ¥é“æ˜¯å“ªä¸ªç¯èŠ‚æœ‰ Bug.\n\n**ä¾‹å­:**\n\n```js\n// ES5\n\nvar User = function() {\n  this.id = null;\n  this.name = null;\n};\n\nUser.prototype.setId = function (id) {\n  this.id = id;\n  return this; // è¿”å›å®ä¾‹æœ¬èº«\n}\n\nUser.prototype.setName = function (name) {\n  this.name = name;\n  return this;\n}\n\n// é“¾å¼è°ƒç”¨\nnew User()\n  .setId(1)\n  .setNmae('ifyour');\n```\n\næˆ–è€…è¿™æ ·:\n\n```js\nvar User = {\n  id: null,\n  name: null,\n  setId: function(id) {\n    this.id = id;\n    return this;\n  },\n  setName: function(name) {\n    this.name = name;\n    return this;\n  }\n};\n\nUser.setId(1).setName('ifyour');\n```\n\n[â¤´ï¸Go Top](#)\n\n### åˆ†è§£å¤§å‹ç±»\n\nä»å­—é¢æ„æ€æˆ‘ä»¬å°±èƒ½ç†è§£, å¦‚æœä¸€ä¸ªç±»é‡Œé¢æœ‰å¤ªå¤šçš„æ–¹æ³•, æˆ‘ä»¬è¦è€ƒè™‘æŠŠå…¶ä¸­åŒä¸€ç±»å‹ç›¸å…³çš„æ–¹æ³•æŠ½ç¦»å‡ºæ¥. æ¨¡å—åŒ–çš„å¥½å¤„ä¸è¨€è€Œå–», æŠŠé€»è¾‘å¤æ‚çš„åˆ†ç¦»æˆå°çš„å•å…ƒ, è¿™æ ·æ›´ä¾¿äºç»´æŠ¤, å‡ºç° bug äº†ä¹Ÿå¥½å®šä½é—®é¢˜. æ¥çœ‹ä¸€æ®µä»£ç .\n\n**ä¾‹å­:**\n\n```js\n// è‹±é›„ç±»\nvar Spirit = function() {\n  this.name = name;\n};\n\n// åŸå‹ä¸Šçš„æ”»å‡»æ–¹æ³•\nSpirit.prototype.attack = function (type) {\n  if (type === 'waveBoxing') {\n    console.log(this.name + ': ä½¿ç”¨æ³¢åŠ¨æ‹³');\n  } else if (type === 'whirlKick') {\n    console.log(this.name + ': ä½¿ç”¨æ—‹é£è…¿');\n  }\n  // ... è¿˜æœ‰å¾ˆå¤šæ”»å‡»æ–¹æ³•\n}\n\nvar spirit = new Spirit('RYU');\nspirit.attack('waveBoxing'); // RYU: ä½¿ç”¨æ³¢åŠ¨æ‹³\nspirit.attack('whirlKick'); // RYU: ä½¿ç”¨æ—‹é£è…¿\n```\n\né¢å‘å¯¹è±¡çš„è®¾è®¡é¼“åŠ±å°† **è¡Œä¸º** åˆ†è§£åˆ°åˆç†æ•°é‡çš„æ›´å°çš„å¯¹è±¡ä¸­:\n\n```js\nvar Attack = function (spirit) {\n  this.spirit = spirit;\n};\n\nAttack.prototype.start = function (type) {\n  return this.list[type].call(this);\n}\n\nAttack.prototype.list = {\n  waveBoxing: function () {\n    console.log(this.sprite.name + ': ä½¿ç”¨æ³¢åŠ¨æ‹³')\n  },\n  whirlKick: function () {\n    console.log(this.sprite.name + ': ä½¿ç”¨æ—‹é£è…¿')\n  }\n}\n```\n\nç°åœ¨ Sprite ç±»ç²¾ç®€äº†å¾ˆå¤š, ä¸å†ç›´æ¥åŒ…å«æ”»å‡»ç›¸å…³çš„æ–¹æ³•, è€Œæ˜¯æŠŠæ–¹æ³•å§”æ‰˜ç»™ Attack ç±»æ¥æ‰§è¡Œ. è¿™æ®µä»£ç ä¹Ÿæ˜¯ **ç­–ç•¥æ¨¡å¼** çš„è¿ç”¨ä¹‹ä¸€, çœ‹ä»£ç :\n\n```js\nvar Spirit = function() {\n  this.name = name;\n  this.attackObj = new Attack(this);\n};\n\nSpirit.prototype.attack = function (type) {\n  this.attackObj.start(type);\n}\n\nvar spirit = new Spirit('RYU');\nspirit.attack('waveBoxing'); // RYU: ä½¿ç”¨æ³¢åŠ¨æ‹³\nspirit.attack('whirlKick'); // RYU: ä½¿ç”¨æ—‹é£è…¿\n```\n\n[â¤´ï¸Go Top](#)\n\n### é€€å‡ºå¤šé‡å¾ªç¯\n\nä½¿ç”¨ `return` é€€å‡ºå¤šé‡å¾ªç¯. ä¸€å®šç¨‹åº¦ä¸Šèƒ½ç®€åŒ–ä»£ç , ä½¿ä»£ç æ›´å®¹æ˜“ç†è§£.\n\n**ä¾‹å­:**\n\n```js\n// éœ€æ±‚: å‡è®¾åœ¨ä¸€ä¸ªå‡½æ•°ä½“å†…çš„å¤šé‡å¾ªç¯å†…, è¾¾åˆ°æŸä¸ªä¸´ç•Œæ¡ä»¶æ—¶é€€å‡ºå¾ªç¯\n\nvar func = function () {\n  var flag = false;\n  for (var i = 0; i < 10; i++) {\n    for (var j = 0; j < 10; j++) {\n      if (i * j > 30) {\n        flag = true;\n        break;\n      }\n    }\n  }\n};\n\n// è¿™ç§ä»£ç çœ‹ç€å°±å¤´æ™•ç›®çœ©, é‡æ„å¦‚ä¸‹:\n\nvar func = function () {\n  for (var i = 0; i < 10; i++) {\n    for (var j = 0; j < 10; j++) {\n      if (i * j > 30) {\n        return;\n      }\n    }\n  }\n};\n```\n\nç›´æ¥ä½¿ç”¨ `return` å, åé¢çš„ä»£ç æ— æ³•æ‰§è¡Œ, è¿˜æ˜¯æœ‰ç‚¹å°é—®é¢˜çš„:\n\n```js\nvar func = function () {\n  for (var i = 0; i < 10; i++) {\n    for (var j = 0; j < 10; j++) {\n      if (i * j > 30) {\n        return;\n      }\n    }\n  }\n  console.log(i) // æ— æ³•æ‰§è¡Œ\n};\n```\n\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, æˆ‘ä»¬å¯ä»¥æŠŠç›¸å…³çš„ä»£ç æ”¾åˆ° `return` åé¢. å¦‚æœéœ€è¦æ‰§è¡Œçš„ä»£ç è¾ƒå¤š, å¯ä»¥æå–æˆä¸€ä¸ªå‡½æ•°:\n\n```js\nvar print = function (i) {\n  console.log(i)\n};\n\nvar func = function () {\n  for (var i = 0; i < 10; i++) {\n    for (var j = 0; j < 10; j++) {\n      if (i * j > 30) {\n        return print(i); // æ‰§è¡Œ\n      }\n    }\n  }\n};\n```\n\n[â¤´ï¸Go Top](#)\n","source":"_posts/ä»£ç é‡æ„.md","raw":"---\ntitle: ä»£ç é‡æ„\ncomments: true\ndate: 2018-06-16 22:46:36\ntags:\nfrom:\n---\n\nä»Šå¤©è¯»äº†æ›¾æ¢çš„[ã€Šè®¾è®¡æ¨¡å¼ã€‹](https://book.douban.com/subject/26382780/)ä¸­çš„ä»£ç é‡æ„è¿™ä¸€ç« èŠ‚, çŸ¥è¯†ç‚¹ä¸å¤šå´éå¸¸å®ç”¨, åœ¨å®é™…é¡¹ç›®ä¸­é™¤äº†ä½¿ç”¨è®¾è®¡æ¨¡å¼é‡æ„ä»£ç å¤–, è¿˜æœ‰ä¸€äº›å®¹æ˜“å¿½ç•¥çš„ç»†èŠ‚. è¿™äº›ç»†èŠ‚ä¹Ÿæ˜¯é‡æ„çš„é‡è¦æ‰‹æ®µ. å†™è¿™ç¯‡æ–‡ç« æ€»ç»“ä¸€ä¸‹.\n\n<!-- more -->\n\n> ä»£ç æ˜¯å†™ç»™äººçœ‹çš„, é¡ºä¾¿ç»™æœºå™¨è¿è¡Œ. ä¼˜é›…çš„ä»£ç åº”è¯¥æ˜¯ç®€å•ã€æ˜“ç»´æŠ¤ã€å¯æ‰©å±•çš„.\n\n### æç‚¼å‡½æ•°\n\nå¦‚æœä¸€ä¸ªå‡½æ•°è¿‡é•¿, è€Œä¸”éœ€è¦æ³¨é‡Šæ‰æ¸…æ¥šå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„, é‚£ä¹ˆéœ€è¦è€ƒè™‘æŠŠå®ƒç‹¬ç«‹å‡ºæ¥. è¿™æ ·åšçš„å¥½å¤„æ˜¯:\n\n* é¿å…è¶…å¤§å‡½æ•°, ä½œç”¨åŸŸè¿‡å¤§å˜é‡ä¸å¥½ç»´æŠ¤\n* æŠ½ç¦»å…¬å…±é€»è¾‘, æ˜“äºå¤ç”¨å’Œè¦†å†™\n* è‰¯å¥½çš„å‘½åèµ·åˆ°äº†æ³¨é‡Šä½œç”¨\n\n**ä¾‹å­:**\n\n```js\nconst getUserInfo = () => {\n  fetch('https://xxx.com/userInfo', (data) => {\n    console.log(`\n      userId: ${data.userId}\\n\n      userName: ${data.userName}\\n\n      nickName: ${data.NickName}\n    `);\n  });\n};\n```\n\né‡æ„å¦‚ä¸‹:\n\n```js\nconst printDetail = (data) => {\n    console.log(`\n    userId: ${data.userId}\\n\n    userName: ${data.userName}\\n\n    nickName: ${data.NickName}\n  `);\n}\n\nconst getUserInfo = () => {\n  fetch('https://xxx.com/userInfo', (data) => {\n    printDetail(data);\n  });\n};\n```\n\n[â¤´ï¸Go Top](#)\n\n### åˆå¹¶é‡å¤çš„æ¡ä»¶ç‰‡æ®µ\n\nå¦‚æœä¸€ä¸ªå‡½æ•°ä½“å†…æœ‰ä¸€äº›æ¡ä»¶åˆ†æ”¯, è€Œä¸”è¿™äº›æ¡ä»¶åˆ†æ”¯å†…æ•£å¸ƒäº†ä¸€äº›é‡å¤çš„ä»£ç , è¿™ä¸ªæ—¶å€™å°±æœ‰å¿…è¦è¿›è¡Œåˆå¹¶å»é‡æ“ä½œ.\n\n**ä¾‹å­:**\n\n```js\nconst paging = (currPage) => {\n  if (currPage <= 0) {\n    currPage = 0;\n    jump(currPage); // è·³è½¬\n  } else if (currPage >= totalPage) {\n    currPage = totalPage;\n    jump(currPage); // è·³è½¬\n  } else {\n    jump(currPage); // è·³è½¬\n  }\n};\n```\n\nå¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ `jump(currPage)` é‡å¤äº†, å®Œå…¨å¯ä»¥æŠŠå®ƒç‹¬ç«‹å‡ºæ¥:\n\n```js\nconst paging = (currPage) => {\n  if (currPage <= 0) {\n    currPage = 0;\n  } else if (currPage >= totalPage) {\n    currPage = totalPage;\n  }\n  jump(currPage);\n}\n```\n\n[â¤´ï¸Go Top](#)\n\n### æŠŠæ¡ä»¶åˆ†æ”¯è¯­å¥æç‚¼æˆå‡½æ•°\n\nå¤æ‚çš„æ¡ä»¶åˆ†æ”¯è¯­å¥æ˜¯å¯¼è‡´ç¨‹åºéš¾ä»¥é˜…è¯»å’Œç†è§£çš„é‡è¦åŸå› , è€Œä¸”å¾ˆå®¹æ˜“å¯¼è‡´ä¸€ä¸ªåºå¤§çš„å‡½æ•°. è¿™ç§æƒ…å†µä¸‹å°±éœ€è¦æŠŠæ¡ä»¶åˆ†æ”¯è¯­å¥æç‚¼å‡ºæ¥.\n\n**ä¾‹å­:**\n\n```js\n// éœ€æ±‚: å¦‚æœå½“å­£æ˜¯å¤„äºå¤å­£, é‚£ä¹ˆæ‰€æœ‰çš„å•†å“ 8 æŠ˜å‡ºå”®\n\nconst getPrice = (price) => {\n  const date = new Date();\n  if (date.getMonth() >= 6 && date.getMonth() <= 9) { // å¤å­£\n    return price * 0.8;\n  }\n  return price;\n};\n```\n\nè§‚å¯Ÿè¿™æ®µä»£ç :\n\n```js\nif (date.getMonth() >= 6 && date.getMonth() <= 9) { // å¤å­£\n  // ...\n}\n```\n\næˆ‘ä»¬éœ€è¦è®©å®ƒæ›´ç¬¦åˆè¯­ä¹‰, è¿™æ ·è¯»ä»£ç çš„äººèƒ½å¾ˆè½»æ¾ç†è§£æ„å›¾, è¿™é‡Œå°±å¯ä»¥æç‚¼æˆä¸€ä¸ªå•ç‹¬å‡½æ•°.\n\n```js\nconst isSummer = () => {\n  const date = new Date();\n  return date.getMonth() >= 6 && date.getMonth() <= 9;\n};\n\nconst getPrice = (price) => {\n  const date = new Date();\n  if (isSummer()) {\n    return price * 0.8;\n  }\n  return price;\n};\n```\n\n[â¤´ï¸Go Top](#)\n\n### åˆç†çš„ä½¿ç”¨å¾ªç¯\n\nåœ¨å‡½æ•°ä½“å†…, å¦‚æœä¸€äº›ä»£ç åªæ˜¯å®Œæˆä¸€äº›é‡å¤çš„å·¥ä½œ, é‚£ä¹ˆå¯ä»¥åˆç†åˆ©ç”¨å¾ªç¯å®ŒæˆåŒæ ·çš„åŠŸèƒ½, è¿™æ ·å¯ä»¥ä¿æŒä»£ç é‡æ›´å°‘.\n\n**ä¾‹å­:**\n\n```js\n// éœ€æ±‚: IE9 ä»¥ä¸‹åˆ›å»ºä¸€ä¸ª XHR å¯¹è±¡\n\nvar createXHR = function() {\n  var xhr;\n  try {\n    xhr = new ActiveXObject('MSXML2.XMLHttp.6.0');\n  } catch(e) {\n    try {\n      xhr = new ActiveXObject('MSXML2.XMLHttp.3.0')\n    } catch(e) {\n      xhr = new ActiveXObject('MSXML2.XMLHttp');\n    }\n  }\n  return xhr;\n};\n\nvar xhr = createXHR();\n```\n\nè¿™ä¸ªæ—¶å€™, ä½¿ç”¨å¾ªç¯æ¥ä¼˜åŒ–ä¸Šé¢çš„ä»£ç :\n\n```js\n// è¿™æ®µä»£ç å°±çœ‹ç€ç¬¦åˆè¯­ä¹‰äº†, è€Œä¸”å¥½ç†è§£ ğŸ¤¡\n\nvar createXHR = function() {\n  var versions = ['MSXML2.XMLHttp.6.0', 'MSXML2.XMLHttp.3.0', 'MSXML2.XMLHttp'];\n  for (var i = 0, version; version = versions[i++];) {\n    try {\n      return new ActiveXObject(version);\n    } catch(e) {};\n  }\n};\n\nvar xhr = createXHR();\n```\n\n[â¤´ï¸Go Top](#)\n\n### æå‰è®©å‡½æ•°é€€å‡ºä»£æ›¿åµŒå¥—æ¡ä»¶åˆ†æ”¯\n\nå¾ˆå¤šç¨‹åºå‘˜ğŸ‘¨â€ğŸ’»â€éƒ½æœ‰è¿™ç§è§‚å¿µ \"æ¯ä¸ªå‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªå…¥å£å’Œä¸€ä¸ªå‡ºå£\", ä½†æ˜¯å…³äº \"å‡½æ•°åªæœ‰ä¸€ä¸ªå‡ºå£\" å¾€å¾€æœ‰ä¸€äº›ä¸åŒçš„çœ‹æ³•, ä¸‹é¢ç”¨ä»£ç æ¥è¯´æ˜ä¸€ä¸‹, å…‰è®²æ¦‚å¿µæœ‰ç‚¹æ™¦æ¶©.\n\n**ä¾‹å­:**\n\n```js\n// ä¸‹é¢æ˜¯ \"å‡½æ•°åªæœ‰ä¸€ä¸ªå‡ºå£\" çš„å…¸å‹ä»£ç \n\nconst del = (obj) => {\n  let ret;\n  if (!obj.isReadOnly) {\n    if (obj.isFolder) {\n      ret = delFolder(obj);\n    } else if (obj.isFile) {\n      ret = delFile(obj);\n    }\n  }\n  return ret;\n};\n```\n\nåµŒå¥—çš„æ¡ä»¶åˆ†æ”¯ç»å¯¹æ˜¯ä»£ç ç»´æŠ¤è€…çš„å™©æ¢¦, å¤šå±‚åµŒå¥—çš„æ¡ä»¶æ›´åŠ ä¸å®¹æ˜“ç†è§£, æœ‰æ—¶å€™å¦‚æœä»£ç è¿‡é•¿, ä¸Šä¸€ä¸ª `if ()` è¯­å¥å¯èƒ½ç›¸éš”å¾ˆè¿œ. ä¸¥é‡å½±å“äº†é˜…è¯»ä½“éªŒå•Š. é‡æ„çš„ `del` å‡½æ•°å¦‚ä¸‹:\n\n```js\nconst del = (obj) => {\n  if (obj.isReadOnly) { // åè½¬ if\n    return;\n  }\n  if (obj.isFolder) {\n    return delFolder(obj);\n  }\n  if (obj.isFile) {\n    return delFile(obj);\n  }\n};\n\n// ç¬é—´æ¸…çˆ½ ğŸ‘Œ\n```\n\n[â¤´ï¸Go Top](#)\n\n### ä¼ é€’å¯¹è±¡å‚æ•°ä»£æ›¿è¿‡é•¿çš„å‚æ•°åˆ—è¡¨\n\næœ‰æ—¶å€™ä¸€ä¸ªå‡½æ•°å¯èƒ½æ¥æ”¶å¤šä¸ªå‚æ•°, è€Œä¸”å‚æ•°è¶Šå¤š, å°±è¶Šéš¾ç†è§£å’Œä½¿ç”¨. æœ€é‡è¦çš„ä¸€ç‚¹éœ€è¦æ³¨æ„å‚æ•°çš„é¡ºåº, å¦‚æœä¸ä¼ çš„æƒ…å†µè¦ä½¿ç”¨å ä½ç¬¦ä»£æ›¿. å¦‚æœå‚æ•°è¶…è¿‡ 3 ä¸ª, è¯·ä½¿ç”¨å¯¹è±¡å§.\n\n**ä¾‹å­:**\n\n```js\nconst setUserInfo = (id, name, address, sex, mobile, qq) => {\n  // ...\n}\n\n// è°ƒç”¨ â˜¹ï¸:\nsetUserInfo(1, 'ifyour', undefined, 'male', undefined, '123456');\n\n\n// é‡æ„ ğŸ˜:\nsetUserInfo({\n  id: 1,\n  name: 'ifyour',\n  sex: 'male',\n  qq: '123456',\n})\n```\n\n[â¤´ï¸Go Top](#)\n\n### å°½é‡å‡å°‘å‚æ•°æ•°é‡\n\nå¦‚æœè°ƒç”¨ä¸€ä¸ªå‡½æ•°, éœ€è¦ä¼ é€’å¾ˆå¤šå‚æ•°, è¿™æ ·çš„å‡½æ•°ç”¨èµ·æ¥å°±è¦å°å¿ƒäº†, å¿…é¡»ææ¸…æ¥šæ¯ä¸ªå‚æ•°çš„å«ä¹‰, æ‰€ä»¥, å¦‚æœèƒ½å°½é‡å°‘ä¼ å‚æ•°å°±å°‘ä¼ å‚æ•°. æŠŠå¤æ‚çš„é€»è¾‘å°è£…åˆ°å‡½æ•°å†…éƒ¨.\n\n**ä¾‹å­:**\n\n```js\n// éœ€æ±‚: æœ‰ä¸€ä¸ªç”»å›¾å‡½æ•° draw\n\nconst draw = (width, height, square) => {\n  // ...\n};\n\n// ä¼˜åŒ–å¦‚ä¸‹:\nconst draw = (width, height) => {\n  const square = width * height;\n  // ...\n}\n```\n\nè¿™é‡Œçš„ `square` å‚æ•°æ²¡å¿…è¦, å¯ä»¥é€šè¿‡ `width` å’Œ `height` è®¡ç®—è·å¾—, è¿˜æœ‰ä¸€ç§æƒ…å†µ, è¿™ä¸ªç”»å›¾å‡½æ•°, å¦‚æœå¯ä»¥ç”»å¤šç§å›¾å½¢å‘¢? æ‰€ä»¥éœ€è¦åœ¨å†…éƒ¨å»å¤„ç†, ä»€ä¹ˆæ—¶å€™éœ€è¦ `square` ä»€ä¹ˆæ—¶å€™éœ€è¦ `radius`, ç„¶åå¯ä»¥ä½¿ç”¨ **ç­–ç•¥æ¨¡å¼** è®©å®ƒæ”¯æŒç”»å¤šç§å›¾å½¢.\n\n[â¤´ï¸Go Top](#)\n\n### å°‘ç”¨ä¸‰ç›®è¿ç®—\n\nä¸‰ç›®è¿ç®—èƒ½å‡å°‘ä»£ç é‡, ä½†æ˜¯ä¸èƒ½æ»¥ç”¨, å¦‚æœä»¥ç‰ºç‰²ä»£ç å¯è¯»æ€§ä¸ºä»£ä»·, é‚£å°±å¾—ä¸å¿å¤±äº†.\n\n```js\nconst global = typeof window !== 'undefined' ? window : this;\n\n// ä½†æ˜¯è¿™ç§æƒ…å†µå°±å®Œå…¨æ²¡å¿…è¦äº†, è€å®å†™ if..else...\n\nif (!aup || !bup) {\n  return a === doc ? -1 :\n    b === doc ? 1 :\n    aup ? -1 :\n    bup ? 1 :\n    sortInput ?\n    (indexOf.call(sortInput, a) - indexOf.call(sortInput, b)) :\n    0;\n}\n\n// ğŸ˜¡ è¿™æ˜¯äººçœ‹çš„å—\n```\n\n[â¤´ï¸Go Top](#)\n\n### åˆç†ä½¿ç”¨é“¾å¼è°ƒç”¨\n\njQuery ä¸­çš„é“¾å¼è°ƒç”¨ç”¨èµ·æ¥è¿˜æ˜¯å¾ˆçˆ½çš„, å®ƒçš„å®ç°ä¹Ÿéå¸¸ç®€å•, æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°ä¸€ä¸ªé“¾å¼è°ƒç”¨. ä½¿ç”¨çš„å‰æå°±æ˜¯é“¾æ¡çš„ç»“æ„ç›¸å¯¹æ¥è¯´ç¨³å®š, ä¸å®¹æ˜“å‘ç”Ÿä¿®æ”¹, å¦‚æœæ˜¯ç»å¸¸å‘ç”Ÿä¿®æ”¹çš„è¯, è¿˜æ˜¯å»ºè®®ä½¿ç”¨æ™®é€šçš„è°ƒç”¨. å› ä¸ºå®ƒè°ƒè¯•çš„æ—¶å€™éœ€è¦æŠŠè¿™ä¸ªé“¾å­æ‹†å¼€, æ‰çŸ¥é“æ˜¯å“ªä¸ªç¯èŠ‚æœ‰ Bug.\n\n**ä¾‹å­:**\n\n```js\n// ES5\n\nvar User = function() {\n  this.id = null;\n  this.name = null;\n};\n\nUser.prototype.setId = function (id) {\n  this.id = id;\n  return this; // è¿”å›å®ä¾‹æœ¬èº«\n}\n\nUser.prototype.setName = function (name) {\n  this.name = name;\n  return this;\n}\n\n// é“¾å¼è°ƒç”¨\nnew User()\n  .setId(1)\n  .setNmae('ifyour');\n```\n\næˆ–è€…è¿™æ ·:\n\n```js\nvar User = {\n  id: null,\n  name: null,\n  setId: function(id) {\n    this.id = id;\n    return this;\n  },\n  setName: function(name) {\n    this.name = name;\n    return this;\n  }\n};\n\nUser.setId(1).setName('ifyour');\n```\n\n[â¤´ï¸Go Top](#)\n\n### åˆ†è§£å¤§å‹ç±»\n\nä»å­—é¢æ„æ€æˆ‘ä»¬å°±èƒ½ç†è§£, å¦‚æœä¸€ä¸ªç±»é‡Œé¢æœ‰å¤ªå¤šçš„æ–¹æ³•, æˆ‘ä»¬è¦è€ƒè™‘æŠŠå…¶ä¸­åŒä¸€ç±»å‹ç›¸å…³çš„æ–¹æ³•æŠ½ç¦»å‡ºæ¥. æ¨¡å—åŒ–çš„å¥½å¤„ä¸è¨€è€Œå–», æŠŠé€»è¾‘å¤æ‚çš„åˆ†ç¦»æˆå°çš„å•å…ƒ, è¿™æ ·æ›´ä¾¿äºç»´æŠ¤, å‡ºç° bug äº†ä¹Ÿå¥½å®šä½é—®é¢˜. æ¥çœ‹ä¸€æ®µä»£ç .\n\n**ä¾‹å­:**\n\n```js\n// è‹±é›„ç±»\nvar Spirit = function() {\n  this.name = name;\n};\n\n// åŸå‹ä¸Šçš„æ”»å‡»æ–¹æ³•\nSpirit.prototype.attack = function (type) {\n  if (type === 'waveBoxing') {\n    console.log(this.name + ': ä½¿ç”¨æ³¢åŠ¨æ‹³');\n  } else if (type === 'whirlKick') {\n    console.log(this.name + ': ä½¿ç”¨æ—‹é£è…¿');\n  }\n  // ... è¿˜æœ‰å¾ˆå¤šæ”»å‡»æ–¹æ³•\n}\n\nvar spirit = new Spirit('RYU');\nspirit.attack('waveBoxing'); // RYU: ä½¿ç”¨æ³¢åŠ¨æ‹³\nspirit.attack('whirlKick'); // RYU: ä½¿ç”¨æ—‹é£è…¿\n```\n\né¢å‘å¯¹è±¡çš„è®¾è®¡é¼“åŠ±å°† **è¡Œä¸º** åˆ†è§£åˆ°åˆç†æ•°é‡çš„æ›´å°çš„å¯¹è±¡ä¸­:\n\n```js\nvar Attack = function (spirit) {\n  this.spirit = spirit;\n};\n\nAttack.prototype.start = function (type) {\n  return this.list[type].call(this);\n}\n\nAttack.prototype.list = {\n  waveBoxing: function () {\n    console.log(this.sprite.name + ': ä½¿ç”¨æ³¢åŠ¨æ‹³')\n  },\n  whirlKick: function () {\n    console.log(this.sprite.name + ': ä½¿ç”¨æ—‹é£è…¿')\n  }\n}\n```\n\nç°åœ¨ Sprite ç±»ç²¾ç®€äº†å¾ˆå¤š, ä¸å†ç›´æ¥åŒ…å«æ”»å‡»ç›¸å…³çš„æ–¹æ³•, è€Œæ˜¯æŠŠæ–¹æ³•å§”æ‰˜ç»™ Attack ç±»æ¥æ‰§è¡Œ. è¿™æ®µä»£ç ä¹Ÿæ˜¯ **ç­–ç•¥æ¨¡å¼** çš„è¿ç”¨ä¹‹ä¸€, çœ‹ä»£ç :\n\n```js\nvar Spirit = function() {\n  this.name = name;\n  this.attackObj = new Attack(this);\n};\n\nSpirit.prototype.attack = function (type) {\n  this.attackObj.start(type);\n}\n\nvar spirit = new Spirit('RYU');\nspirit.attack('waveBoxing'); // RYU: ä½¿ç”¨æ³¢åŠ¨æ‹³\nspirit.attack('whirlKick'); // RYU: ä½¿ç”¨æ—‹é£è…¿\n```\n\n[â¤´ï¸Go Top](#)\n\n### é€€å‡ºå¤šé‡å¾ªç¯\n\nä½¿ç”¨ `return` é€€å‡ºå¤šé‡å¾ªç¯. ä¸€å®šç¨‹åº¦ä¸Šèƒ½ç®€åŒ–ä»£ç , ä½¿ä»£ç æ›´å®¹æ˜“ç†è§£.\n\n**ä¾‹å­:**\n\n```js\n// éœ€æ±‚: å‡è®¾åœ¨ä¸€ä¸ªå‡½æ•°ä½“å†…çš„å¤šé‡å¾ªç¯å†…, è¾¾åˆ°æŸä¸ªä¸´ç•Œæ¡ä»¶æ—¶é€€å‡ºå¾ªç¯\n\nvar func = function () {\n  var flag = false;\n  for (var i = 0; i < 10; i++) {\n    for (var j = 0; j < 10; j++) {\n      if (i * j > 30) {\n        flag = true;\n        break;\n      }\n    }\n  }\n};\n\n// è¿™ç§ä»£ç çœ‹ç€å°±å¤´æ™•ç›®çœ©, é‡æ„å¦‚ä¸‹:\n\nvar func = function () {\n  for (var i = 0; i < 10; i++) {\n    for (var j = 0; j < 10; j++) {\n      if (i * j > 30) {\n        return;\n      }\n    }\n  }\n};\n```\n\nç›´æ¥ä½¿ç”¨ `return` å, åé¢çš„ä»£ç æ— æ³•æ‰§è¡Œ, è¿˜æ˜¯æœ‰ç‚¹å°é—®é¢˜çš„:\n\n```js\nvar func = function () {\n  for (var i = 0; i < 10; i++) {\n    for (var j = 0; j < 10; j++) {\n      if (i * j > 30) {\n        return;\n      }\n    }\n  }\n  console.log(i) // æ— æ³•æ‰§è¡Œ\n};\n```\n\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, æˆ‘ä»¬å¯ä»¥æŠŠç›¸å…³çš„ä»£ç æ”¾åˆ° `return` åé¢. å¦‚æœéœ€è¦æ‰§è¡Œçš„ä»£ç è¾ƒå¤š, å¯ä»¥æå–æˆä¸€ä¸ªå‡½æ•°:\n\n```js\nvar print = function (i) {\n  console.log(i)\n};\n\nvar func = function () {\n  for (var i = 0; i < 10; i++) {\n    for (var j = 0; j < 10; j++) {\n      if (i * j > 30) {\n        return print(i); // æ‰§è¡Œ\n      }\n    }\n  }\n};\n```\n\n[â¤´ï¸Go Top](#)\n","slug":"ä»£ç é‡æ„","published":1,"updated":"2019-12-07T04:53:18.094Z","layout":"post","photos":[],"link":"","_id":"ck3v60jtl000mr9q9z7s5oot3","content":"<p>ä»Šå¤©è¯»äº†æ›¾æ¢çš„<a href=\"https://book.douban.com/subject/26382780/\" target=\"_blank\" rel=\"noopener\">ã€Šè®¾è®¡æ¨¡å¼ã€‹</a>ä¸­çš„ä»£ç é‡æ„è¿™ä¸€ç« èŠ‚, çŸ¥è¯†ç‚¹ä¸å¤šå´éå¸¸å®ç”¨, åœ¨å®é™…é¡¹ç›®ä¸­é™¤äº†ä½¿ç”¨è®¾è®¡æ¨¡å¼é‡æ„ä»£ç å¤–, è¿˜æœ‰ä¸€äº›å®¹æ˜“å¿½ç•¥çš„ç»†èŠ‚. è¿™äº›ç»†èŠ‚ä¹Ÿæ˜¯é‡æ„çš„é‡è¦æ‰‹æ®µ. å†™è¿™ç¯‡æ–‡ç« æ€»ç»“ä¸€ä¸‹.</p>\n<a id=\"more\"></a>\n<blockquote>\n<p>ä»£ç æ˜¯å†™ç»™äººçœ‹çš„, é¡ºä¾¿ç»™æœºå™¨è¿è¡Œ. ä¼˜é›…çš„ä»£ç åº”è¯¥æ˜¯ç®€å•ã€æ˜“ç»´æŠ¤ã€å¯æ‰©å±•çš„.</p>\n</blockquote>\n<h3 id=\"æç‚¼å‡½æ•°\"><a href=\"#æç‚¼å‡½æ•°\" class=\"headerlink\" title=\"æç‚¼å‡½æ•°\"></a>æç‚¼å‡½æ•°</h3><p>å¦‚æœä¸€ä¸ªå‡½æ•°è¿‡é•¿, è€Œä¸”éœ€è¦æ³¨é‡Šæ‰æ¸…æ¥šå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„, é‚£ä¹ˆéœ€è¦è€ƒè™‘æŠŠå®ƒç‹¬ç«‹å‡ºæ¥. è¿™æ ·åšçš„å¥½å¤„æ˜¯:</p>\n<ul>\n<li>é¿å…è¶…å¤§å‡½æ•°, ä½œç”¨åŸŸè¿‡å¤§å˜é‡ä¸å¥½ç»´æŠ¤</li>\n<li>æŠ½ç¦»å…¬å…±é€»è¾‘, æ˜“äºå¤ç”¨å’Œè¦†å†™</li>\n<li>è‰¯å¥½çš„å‘½åèµ·åˆ°äº†æ³¨é‡Šä½œç”¨</li>\n</ul>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> getUserInfo = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  fetch(<span class=\"string\">'https://xxx.com/userInfo'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">      userId: <span class=\"subst\">$&#123;data.userId&#125;</span>\\n</span></span><br><span class=\"line\"><span class=\"string\">      userName: <span class=\"subst\">$&#123;data.userName&#125;</span>\\n</span></span><br><span class=\"line\"><span class=\"string\">      nickName: <span class=\"subst\">$&#123;data.NickName&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">    `</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>é‡æ„å¦‚ä¸‹:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> printDetail = <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    userId: <span class=\"subst\">$&#123;data.userId&#125;</span>\\n</span></span><br><span class=\"line\"><span class=\"string\">    userName: <span class=\"subst\">$&#123;data.userName&#125;</span>\\n</span></span><br><span class=\"line\"><span class=\"string\">    nickName: <span class=\"subst\">$&#123;data.NickName&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">  `</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> getUserInfo = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  fetch(<span class=\"string\">'https://xxx.com/userInfo'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">    printDetail(data);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"åˆå¹¶é‡å¤çš„æ¡ä»¶ç‰‡æ®µ\"><a href=\"#åˆå¹¶é‡å¤çš„æ¡ä»¶ç‰‡æ®µ\" class=\"headerlink\" title=\"åˆå¹¶é‡å¤çš„æ¡ä»¶ç‰‡æ®µ\"></a>åˆå¹¶é‡å¤çš„æ¡ä»¶ç‰‡æ®µ</h3><p>å¦‚æœä¸€ä¸ªå‡½æ•°ä½“å†…æœ‰ä¸€äº›æ¡ä»¶åˆ†æ”¯, è€Œä¸”è¿™äº›æ¡ä»¶åˆ†æ”¯å†…æ•£å¸ƒäº†ä¸€äº›é‡å¤çš„ä»£ç , è¿™ä¸ªæ—¶å€™å°±æœ‰å¿…è¦è¿›è¡Œåˆå¹¶å»é‡æ“ä½œ.</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> paging = <span class=\"function\">(<span class=\"params\">currPage</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (currPage &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    currPage = <span class=\"number\">0</span>;</span><br><span class=\"line\">    jump(currPage); <span class=\"comment\">// è·³è½¬</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (currPage &gt;= totalPage) &#123;</span><br><span class=\"line\">    currPage = totalPage;</span><br><span class=\"line\">    jump(currPage); <span class=\"comment\">// è·³è½¬</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    jump(currPage); <span class=\"comment\">// è·³è½¬</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ <code>jump(currPage)</code> é‡å¤äº†, å®Œå…¨å¯ä»¥æŠŠå®ƒç‹¬ç«‹å‡ºæ¥:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> paging = <span class=\"function\">(<span class=\"params\">currPage</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (currPage &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    currPage = <span class=\"number\">0</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (currPage &gt;= totalPage) &#123;</span><br><span class=\"line\">    currPage = totalPage;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  jump(currPage);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"æŠŠæ¡ä»¶åˆ†æ”¯è¯­å¥æç‚¼æˆå‡½æ•°\"><a href=\"#æŠŠæ¡ä»¶åˆ†æ”¯è¯­å¥æç‚¼æˆå‡½æ•°\" class=\"headerlink\" title=\"æŠŠæ¡ä»¶åˆ†æ”¯è¯­å¥æç‚¼æˆå‡½æ•°\"></a>æŠŠæ¡ä»¶åˆ†æ”¯è¯­å¥æç‚¼æˆå‡½æ•°</h3><p>å¤æ‚çš„æ¡ä»¶åˆ†æ”¯è¯­å¥æ˜¯å¯¼è‡´ç¨‹åºéš¾ä»¥é˜…è¯»å’Œç†è§£çš„é‡è¦åŸå› , è€Œä¸”å¾ˆå®¹æ˜“å¯¼è‡´ä¸€ä¸ªåºå¤§çš„å‡½æ•°. è¿™ç§æƒ…å†µä¸‹å°±éœ€è¦æŠŠæ¡ä»¶åˆ†æ”¯è¯­å¥æç‚¼å‡ºæ¥.</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// éœ€æ±‚: å¦‚æœå½“å­£æ˜¯å¤„äºå¤å­£, é‚£ä¹ˆæ‰€æœ‰çš„å•†å“ 8 æŠ˜å‡ºå”®</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> getPrice = <span class=\"function\">(<span class=\"params\">price</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> date = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (date.getMonth() &gt;= <span class=\"number\">6</span> &amp;&amp; date.getMonth() &lt;= <span class=\"number\">9</span>) &#123; <span class=\"comment\">// å¤å­£</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> price * <span class=\"number\">0.8</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> price;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>è§‚å¯Ÿè¿™æ®µä»£ç :</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (date.getMonth() &gt;= <span class=\"number\">6</span> &amp;&amp; date.getMonth() &lt;= <span class=\"number\">9</span>) &#123; <span class=\"comment\">// å¤å­£</span></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬éœ€è¦è®©å®ƒæ›´ç¬¦åˆè¯­ä¹‰, è¿™æ ·è¯»ä»£ç çš„äººèƒ½å¾ˆè½»æ¾ç†è§£æ„å›¾, è¿™é‡Œå°±å¯ä»¥æç‚¼æˆä¸€ä¸ªå•ç‹¬å‡½æ•°.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> isSummer = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> date = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> date.getMonth() &gt;= <span class=\"number\">6</span> &amp;&amp; date.getMonth() &lt;= <span class=\"number\">9</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> getPrice = <span class=\"function\">(<span class=\"params\">price</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> date = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isSummer()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> price * <span class=\"number\">0.8</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> price;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"åˆç†çš„ä½¿ç”¨å¾ªç¯\"><a href=\"#åˆç†çš„ä½¿ç”¨å¾ªç¯\" class=\"headerlink\" title=\"åˆç†çš„ä½¿ç”¨å¾ªç¯\"></a>åˆç†çš„ä½¿ç”¨å¾ªç¯</h3><p>åœ¨å‡½æ•°ä½“å†…, å¦‚æœä¸€äº›ä»£ç åªæ˜¯å®Œæˆä¸€äº›é‡å¤çš„å·¥ä½œ, é‚£ä¹ˆå¯ä»¥åˆç†åˆ©ç”¨å¾ªç¯å®ŒæˆåŒæ ·çš„åŠŸèƒ½, è¿™æ ·å¯ä»¥ä¿æŒä»£ç é‡æ›´å°‘.</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// éœ€æ±‚: IE9 ä»¥ä¸‹åˆ›å»ºä¸€ä¸ª XHR å¯¹è±¡</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> createXHR = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> xhr;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    xhr = <span class=\"keyword\">new</span> ActiveXObject(<span class=\"string\">'MSXML2.XMLHttp.6.0'</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span>(e) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      xhr = <span class=\"keyword\">new</span> ActiveXObject(<span class=\"string\">'MSXML2.XMLHttp.3.0'</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span>(e) &#123;</span><br><span class=\"line\">      xhr = <span class=\"keyword\">new</span> ActiveXObject(<span class=\"string\">'MSXML2.XMLHttp'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> xhr;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> xhr = createXHR();</span><br></pre></td></tr></table></figure>\n<p>è¿™ä¸ªæ—¶å€™, ä½¿ç”¨å¾ªç¯æ¥ä¼˜åŒ–ä¸Šé¢çš„ä»£ç :</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿™æ®µä»£ç å°±çœ‹ç€ç¬¦åˆè¯­ä¹‰äº†, è€Œä¸”å¥½ç†è§£ ğŸ¤¡</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> createXHR = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> versions = [<span class=\"string\">'MSXML2.XMLHttp.6.0'</span>, <span class=\"string\">'MSXML2.XMLHttp.3.0'</span>, <span class=\"string\">'MSXML2.XMLHttp'</span>];</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, version; version = versions[i++];) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ActiveXObject(version);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span>(e) &#123;&#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> xhr = createXHR();</span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"æå‰è®©å‡½æ•°é€€å‡ºä»£æ›¿åµŒå¥—æ¡ä»¶åˆ†æ”¯\"><a href=\"#æå‰è®©å‡½æ•°é€€å‡ºä»£æ›¿åµŒå¥—æ¡ä»¶åˆ†æ”¯\" class=\"headerlink\" title=\"æå‰è®©å‡½æ•°é€€å‡ºä»£æ›¿åµŒå¥—æ¡ä»¶åˆ†æ”¯\"></a>æå‰è®©å‡½æ•°é€€å‡ºä»£æ›¿åµŒå¥—æ¡ä»¶åˆ†æ”¯</h3><p>å¾ˆå¤šç¨‹åºå‘˜ğŸ‘¨â€ğŸ’»â€éƒ½æœ‰è¿™ç§è§‚å¿µ â€œæ¯ä¸ªå‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªå…¥å£å’Œä¸€ä¸ªå‡ºå£â€, ä½†æ˜¯å…³äº â€œå‡½æ•°åªæœ‰ä¸€ä¸ªå‡ºå£â€ å¾€å¾€æœ‰ä¸€äº›ä¸åŒçš„çœ‹æ³•, ä¸‹é¢ç”¨ä»£ç æ¥è¯´æ˜ä¸€ä¸‹, å…‰è®²æ¦‚å¿µæœ‰ç‚¹æ™¦æ¶©.</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ä¸‹é¢æ˜¯ \"å‡½æ•°åªæœ‰ä¸€ä¸ªå‡ºå£\" çš„å…¸å‹ä»£ç </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> del = <span class=\"function\">(<span class=\"params\">obj</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> ret;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!obj.isReadOnly) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (obj.isFolder) &#123;</span><br><span class=\"line\">      ret = delFolder(obj);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (obj.isFile) &#123;</span><br><span class=\"line\">      ret = delFile(obj);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ret;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>åµŒå¥—çš„æ¡ä»¶åˆ†æ”¯ç»å¯¹æ˜¯ä»£ç ç»´æŠ¤è€…çš„å™©æ¢¦, å¤šå±‚åµŒå¥—çš„æ¡ä»¶æ›´åŠ ä¸å®¹æ˜“ç†è§£, æœ‰æ—¶å€™å¦‚æœä»£ç è¿‡é•¿, ä¸Šä¸€ä¸ª <code>if ()</code> è¯­å¥å¯èƒ½ç›¸éš”å¾ˆè¿œ. ä¸¥é‡å½±å“äº†é˜…è¯»ä½“éªŒå•Š. é‡æ„çš„ <code>del</code> å‡½æ•°å¦‚ä¸‹:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> del = <span class=\"function\">(<span class=\"params\">obj</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (obj.isReadOnly) &#123; <span class=\"comment\">// åè½¬ if</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (obj.isFolder) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> delFolder(obj);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (obj.isFile) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> delFile(obj);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç¬é—´æ¸…çˆ½ ğŸ‘Œ</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"ä¼ é€’å¯¹è±¡å‚æ•°ä»£æ›¿è¿‡é•¿çš„å‚æ•°åˆ—è¡¨\"><a href=\"#ä¼ é€’å¯¹è±¡å‚æ•°ä»£æ›¿è¿‡é•¿çš„å‚æ•°åˆ—è¡¨\" class=\"headerlink\" title=\"ä¼ é€’å¯¹è±¡å‚æ•°ä»£æ›¿è¿‡é•¿çš„å‚æ•°åˆ—è¡¨\"></a>ä¼ é€’å¯¹è±¡å‚æ•°ä»£æ›¿è¿‡é•¿çš„å‚æ•°åˆ—è¡¨</h3><p>æœ‰æ—¶å€™ä¸€ä¸ªå‡½æ•°å¯èƒ½æ¥æ”¶å¤šä¸ªå‚æ•°, è€Œä¸”å‚æ•°è¶Šå¤š, å°±è¶Šéš¾ç†è§£å’Œä½¿ç”¨. æœ€é‡è¦çš„ä¸€ç‚¹éœ€è¦æ³¨æ„å‚æ•°çš„é¡ºåº, å¦‚æœä¸ä¼ çš„æƒ…å†µè¦ä½¿ç”¨å ä½ç¬¦ä»£æ›¿. å¦‚æœå‚æ•°è¶…è¿‡ 3 ä¸ª, è¯·ä½¿ç”¨å¯¹è±¡å§.</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> setUserInfo = <span class=\"function\">(<span class=\"params\">id, name, address, sex, mobile, qq</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è°ƒç”¨ â˜¹ï¸:</span></span><br><span class=\"line\">setUserInfo(<span class=\"number\">1</span>, <span class=\"string\">'ifyour'</span>, <span class=\"literal\">undefined</span>, <span class=\"string\">'male'</span>, <span class=\"literal\">undefined</span>, <span class=\"string\">'123456'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// é‡æ„ ğŸ˜:</span></span><br><span class=\"line\">setUserInfo(&#123;</span><br><span class=\"line\">  id: <span class=\"number\">1</span>,</span><br><span class=\"line\">  name: <span class=\"string\">'ifyour'</span>,</span><br><span class=\"line\">  sex: <span class=\"string\">'male'</span>,</span><br><span class=\"line\">  qq: <span class=\"string\">'123456'</span>,</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"å°½é‡å‡å°‘å‚æ•°æ•°é‡\"><a href=\"#å°½é‡å‡å°‘å‚æ•°æ•°é‡\" class=\"headerlink\" title=\"å°½é‡å‡å°‘å‚æ•°æ•°é‡\"></a>å°½é‡å‡å°‘å‚æ•°æ•°é‡</h3><p>å¦‚æœè°ƒç”¨ä¸€ä¸ªå‡½æ•°, éœ€è¦ä¼ é€’å¾ˆå¤šå‚æ•°, è¿™æ ·çš„å‡½æ•°ç”¨èµ·æ¥å°±è¦å°å¿ƒäº†, å¿…é¡»ææ¸…æ¥šæ¯ä¸ªå‚æ•°çš„å«ä¹‰, æ‰€ä»¥, å¦‚æœèƒ½å°½é‡å°‘ä¼ å‚æ•°å°±å°‘ä¼ å‚æ•°. æŠŠå¤æ‚çš„é€»è¾‘å°è£…åˆ°å‡½æ•°å†…éƒ¨.</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// éœ€æ±‚: æœ‰ä¸€ä¸ªç”»å›¾å‡½æ•° draw</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> draw = <span class=\"function\">(<span class=\"params\">width, height, square</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¼˜åŒ–å¦‚ä¸‹:</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> draw = <span class=\"function\">(<span class=\"params\">width, height</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> square = width * height;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿™é‡Œçš„ <code>square</code> å‚æ•°æ²¡å¿…è¦, å¯ä»¥é€šè¿‡ <code>width</code> å’Œ <code>height</code> è®¡ç®—è·å¾—, è¿˜æœ‰ä¸€ç§æƒ…å†µ, è¿™ä¸ªç”»å›¾å‡½æ•°, å¦‚æœå¯ä»¥ç”»å¤šç§å›¾å½¢å‘¢? æ‰€ä»¥éœ€è¦åœ¨å†…éƒ¨å»å¤„ç†, ä»€ä¹ˆæ—¶å€™éœ€è¦ <code>square</code> ä»€ä¹ˆæ—¶å€™éœ€è¦ <code>radius</code>, ç„¶åå¯ä»¥ä½¿ç”¨ <strong>ç­–ç•¥æ¨¡å¼</strong> è®©å®ƒæ”¯æŒç”»å¤šç§å›¾å½¢.</p>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"å°‘ç”¨ä¸‰ç›®è¿ç®—\"><a href=\"#å°‘ç”¨ä¸‰ç›®è¿ç®—\" class=\"headerlink\" title=\"å°‘ç”¨ä¸‰ç›®è¿ç®—\"></a>å°‘ç”¨ä¸‰ç›®è¿ç®—</h3><p>ä¸‰ç›®è¿ç®—èƒ½å‡å°‘ä»£ç é‡, ä½†æ˜¯ä¸èƒ½æ»¥ç”¨, å¦‚æœä»¥ç‰ºç‰²ä»£ç å¯è¯»æ€§ä¸ºä»£ä»·, é‚£å°±å¾—ä¸å¿å¤±äº†.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> global = <span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">'undefined'</span> ? <span class=\"built_in\">window</span> : <span class=\"keyword\">this</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½†æ˜¯è¿™ç§æƒ…å†µå°±å®Œå…¨æ²¡å¿…è¦äº†, è€å®å†™ if..else...</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!aup || !bup) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> a === doc ? <span class=\"number\">-1</span> :</span><br><span class=\"line\">    b === doc ? <span class=\"number\">1</span> :</span><br><span class=\"line\">    aup ? <span class=\"number\">-1</span> :</span><br><span class=\"line\">    bup ? <span class=\"number\">1</span> :</span><br><span class=\"line\">    sortInput ?</span><br><span class=\"line\">    (indexOf.call(sortInput, a) - indexOf.call(sortInput, b)) :</span><br><span class=\"line\">    <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ğŸ˜¡ è¿™æ˜¯äººçœ‹çš„å—</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"åˆç†ä½¿ç”¨é“¾å¼è°ƒç”¨\"><a href=\"#åˆç†ä½¿ç”¨é“¾å¼è°ƒç”¨\" class=\"headerlink\" title=\"åˆç†ä½¿ç”¨é“¾å¼è°ƒç”¨\"></a>åˆç†ä½¿ç”¨é“¾å¼è°ƒç”¨</h3><p>jQuery ä¸­çš„é“¾å¼è°ƒç”¨ç”¨èµ·æ¥è¿˜æ˜¯å¾ˆçˆ½çš„, å®ƒçš„å®ç°ä¹Ÿéå¸¸ç®€å•, æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°ä¸€ä¸ªé“¾å¼è°ƒç”¨. ä½¿ç”¨çš„å‰æå°±æ˜¯é“¾æ¡çš„ç»“æ„ç›¸å¯¹æ¥è¯´ç¨³å®š, ä¸å®¹æ˜“å‘ç”Ÿä¿®æ”¹, å¦‚æœæ˜¯ç»å¸¸å‘ç”Ÿä¿®æ”¹çš„è¯, è¿˜æ˜¯å»ºè®®ä½¿ç”¨æ™®é€šçš„è°ƒç”¨. å› ä¸ºå®ƒè°ƒè¯•çš„æ—¶å€™éœ€è¦æŠŠè¿™ä¸ªé“¾å­æ‹†å¼€, æ‰çŸ¥é“æ˜¯å“ªä¸ªç¯èŠ‚æœ‰ Bug.</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ES5</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> User = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.id = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">User.prototype.setId = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">id</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.id = id;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>; <span class=\"comment\">// è¿”å›å®ä¾‹æœ¬èº«</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">User.prototype.setName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// é“¾å¼è°ƒç”¨</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> User()</span><br><span class=\"line\">  .setId(<span class=\"number\">1</span>)</span><br><span class=\"line\">  .setNmae(<span class=\"string\">'ifyour'</span>);</span><br></pre></td></tr></table></figure>\n<p>æˆ–è€…è¿™æ ·:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> User = &#123;</span><br><span class=\"line\">  id: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  name: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  setId: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">id</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.id = id;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  setName: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">User.setId(<span class=\"number\">1</span>).setName(<span class=\"string\">'ifyour'</span>);</span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"åˆ†è§£å¤§å‹ç±»\"><a href=\"#åˆ†è§£å¤§å‹ç±»\" class=\"headerlink\" title=\"åˆ†è§£å¤§å‹ç±»\"></a>åˆ†è§£å¤§å‹ç±»</h3><p>ä»å­—é¢æ„æ€æˆ‘ä»¬å°±èƒ½ç†è§£, å¦‚æœä¸€ä¸ªç±»é‡Œé¢æœ‰å¤ªå¤šçš„æ–¹æ³•, æˆ‘ä»¬è¦è€ƒè™‘æŠŠå…¶ä¸­åŒä¸€ç±»å‹ç›¸å…³çš„æ–¹æ³•æŠ½ç¦»å‡ºæ¥. æ¨¡å—åŒ–çš„å¥½å¤„ä¸è¨€è€Œå–», æŠŠé€»è¾‘å¤æ‚çš„åˆ†ç¦»æˆå°çš„å•å…ƒ, è¿™æ ·æ›´ä¾¿äºç»´æŠ¤, å‡ºç° bug äº†ä¹Ÿå¥½å®šä½é—®é¢˜. æ¥çœ‹ä¸€æ®µä»£ç .</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è‹±é›„ç±»</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> Spirit = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åŸå‹ä¸Šçš„æ”»å‡»æ–¹æ³•</span></span><br><span class=\"line\">Spirit.prototype.attack = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">type</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (type === <span class=\"string\">'waveBoxing'</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name + <span class=\"string\">': ä½¿ç”¨æ³¢åŠ¨æ‹³'</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type === <span class=\"string\">'whirlKick'</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name + <span class=\"string\">': ä½¿ç”¨æ—‹é£è…¿'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// ... è¿˜æœ‰å¾ˆå¤šæ”»å‡»æ–¹æ³•</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> spirit = <span class=\"keyword\">new</span> Spirit(<span class=\"string\">'RYU'</span>);</span><br><span class=\"line\">spirit.attack(<span class=\"string\">'waveBoxing'</span>); <span class=\"comment\">// RYU: ä½¿ç”¨æ³¢åŠ¨æ‹³</span></span><br><span class=\"line\">spirit.attack(<span class=\"string\">'whirlKick'</span>); <span class=\"comment\">// RYU: ä½¿ç”¨æ—‹é£è…¿</span></span><br></pre></td></tr></table></figure>\n<p>é¢å‘å¯¹è±¡çš„è®¾è®¡é¼“åŠ±å°† <strong>è¡Œä¸º</strong> åˆ†è§£åˆ°åˆç†æ•°é‡çš„æ›´å°çš„å¯¹è±¡ä¸­:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Attack = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">spirit</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.spirit = spirit;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">Attack.prototype.start = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">type</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.list[type].call(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Attack.prototype.list = &#123;</span><br><span class=\"line\">  waveBoxing: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.sprite.name + <span class=\"string\">': ä½¿ç”¨æ³¢åŠ¨æ‹³'</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  whirlKick: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.sprite.name + <span class=\"string\">': ä½¿ç”¨æ—‹é£è…¿'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç°åœ¨ Sprite ç±»ç²¾ç®€äº†å¾ˆå¤š, ä¸å†ç›´æ¥åŒ…å«æ”»å‡»ç›¸å…³çš„æ–¹æ³•, è€Œæ˜¯æŠŠæ–¹æ³•å§”æ‰˜ç»™ Attack ç±»æ¥æ‰§è¡Œ. è¿™æ®µä»£ç ä¹Ÿæ˜¯ <strong>ç­–ç•¥æ¨¡å¼</strong> çš„è¿ç”¨ä¹‹ä¸€, çœ‹ä»£ç :</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Spirit = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.attackObj = <span class=\"keyword\">new</span> Attack(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">Spirit.prototype.attack = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">type</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.attackObj.start(type);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> spirit = <span class=\"keyword\">new</span> Spirit(<span class=\"string\">'RYU'</span>);</span><br><span class=\"line\">spirit.attack(<span class=\"string\">'waveBoxing'</span>); <span class=\"comment\">// RYU: ä½¿ç”¨æ³¢åŠ¨æ‹³</span></span><br><span class=\"line\">spirit.attack(<span class=\"string\">'whirlKick'</span>); <span class=\"comment\">// RYU: ä½¿ç”¨æ—‹é£è…¿</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"é€€å‡ºå¤šé‡å¾ªç¯\"><a href=\"#é€€å‡ºå¤šé‡å¾ªç¯\" class=\"headerlink\" title=\"é€€å‡ºå¤šé‡å¾ªç¯\"></a>é€€å‡ºå¤šé‡å¾ªç¯</h3><p>ä½¿ç”¨ <code>return</code> é€€å‡ºå¤šé‡å¾ªç¯. ä¸€å®šç¨‹åº¦ä¸Šèƒ½ç®€åŒ–ä»£ç , ä½¿ä»£ç æ›´å®¹æ˜“ç†è§£.</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// éœ€æ±‚: å‡è®¾åœ¨ä¸€ä¸ªå‡½æ•°ä½“å†…çš„å¤šé‡å¾ªç¯å†…, è¾¾åˆ°æŸä¸ªä¸´ç•Œæ¡ä»¶æ—¶é€€å‡ºå¾ªç¯</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> flag = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">10</span>; j++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (i * j &gt; <span class=\"number\">30</span>) &#123;</span><br><span class=\"line\">        flag = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¿™ç§ä»£ç çœ‹ç€å°±å¤´æ™•ç›®çœ©, é‡æ„å¦‚ä¸‹:</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">10</span>; j++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (i * j &gt; <span class=\"number\">30</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>ç›´æ¥ä½¿ç”¨ <code>return</code> å, åé¢çš„ä»£ç æ— æ³•æ‰§è¡Œ, è¿˜æ˜¯æœ‰ç‚¹å°é—®é¢˜çš„:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">10</span>; j++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (i * j &gt; <span class=\"number\">30</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i) <span class=\"comment\">// æ— æ³•æ‰§è¡Œ</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, æˆ‘ä»¬å¯ä»¥æŠŠç›¸å…³çš„ä»£ç æ”¾åˆ° <code>return</code> åé¢. å¦‚æœéœ€è¦æ‰§è¡Œçš„ä»£ç è¾ƒå¤š, å¯ä»¥æå–æˆä¸€ä¸ªå‡½æ•°:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> print = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">10</span>; j++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (i * j &gt; <span class=\"number\">30</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> print(i); <span class=\"comment\">// æ‰§è¡Œ</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n","site":{"data":{}},"excerpt":"<p>ä»Šå¤©è¯»äº†æ›¾æ¢çš„<a href=\"https://book.douban.com/subject/26382780/\" target=\"_blank\" rel=\"noopener\">ã€Šè®¾è®¡æ¨¡å¼ã€‹</a>ä¸­çš„ä»£ç é‡æ„è¿™ä¸€ç« èŠ‚, çŸ¥è¯†ç‚¹ä¸å¤šå´éå¸¸å®ç”¨, åœ¨å®é™…é¡¹ç›®ä¸­é™¤äº†ä½¿ç”¨è®¾è®¡æ¨¡å¼é‡æ„ä»£ç å¤–, è¿˜æœ‰ä¸€äº›å®¹æ˜“å¿½ç•¥çš„ç»†èŠ‚. è¿™äº›ç»†èŠ‚ä¹Ÿæ˜¯é‡æ„çš„é‡è¦æ‰‹æ®µ. å†™è¿™ç¯‡æ–‡ç« æ€»ç»“ä¸€ä¸‹.</p>","more":"<blockquote>\n<p>ä»£ç æ˜¯å†™ç»™äººçœ‹çš„, é¡ºä¾¿ç»™æœºå™¨è¿è¡Œ. ä¼˜é›…çš„ä»£ç åº”è¯¥æ˜¯ç®€å•ã€æ˜“ç»´æŠ¤ã€å¯æ‰©å±•çš„.</p>\n</blockquote>\n<h3 id=\"æç‚¼å‡½æ•°\"><a href=\"#æç‚¼å‡½æ•°\" class=\"headerlink\" title=\"æç‚¼å‡½æ•°\"></a>æç‚¼å‡½æ•°</h3><p>å¦‚æœä¸€ä¸ªå‡½æ•°è¿‡é•¿, è€Œä¸”éœ€è¦æ³¨é‡Šæ‰æ¸…æ¥šå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„, é‚£ä¹ˆéœ€è¦è€ƒè™‘æŠŠå®ƒç‹¬ç«‹å‡ºæ¥. è¿™æ ·åšçš„å¥½å¤„æ˜¯:</p>\n<ul>\n<li>é¿å…è¶…å¤§å‡½æ•°, ä½œç”¨åŸŸè¿‡å¤§å˜é‡ä¸å¥½ç»´æŠ¤</li>\n<li>æŠ½ç¦»å…¬å…±é€»è¾‘, æ˜“äºå¤ç”¨å’Œè¦†å†™</li>\n<li>è‰¯å¥½çš„å‘½åèµ·åˆ°äº†æ³¨é‡Šä½œç”¨</li>\n</ul>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> getUserInfo = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  fetch(<span class=\"string\">'https://xxx.com/userInfo'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">      userId: <span class=\"subst\">$&#123;data.userId&#125;</span>\\n</span></span><br><span class=\"line\"><span class=\"string\">      userName: <span class=\"subst\">$&#123;data.userName&#125;</span>\\n</span></span><br><span class=\"line\"><span class=\"string\">      nickName: <span class=\"subst\">$&#123;data.NickName&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">    `</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>é‡æ„å¦‚ä¸‹:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> printDetail = <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    userId: <span class=\"subst\">$&#123;data.userId&#125;</span>\\n</span></span><br><span class=\"line\"><span class=\"string\">    userName: <span class=\"subst\">$&#123;data.userName&#125;</span>\\n</span></span><br><span class=\"line\"><span class=\"string\">    nickName: <span class=\"subst\">$&#123;data.NickName&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">  `</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> getUserInfo = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  fetch(<span class=\"string\">'https://xxx.com/userInfo'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">    printDetail(data);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"åˆå¹¶é‡å¤çš„æ¡ä»¶ç‰‡æ®µ\"><a href=\"#åˆå¹¶é‡å¤çš„æ¡ä»¶ç‰‡æ®µ\" class=\"headerlink\" title=\"åˆå¹¶é‡å¤çš„æ¡ä»¶ç‰‡æ®µ\"></a>åˆå¹¶é‡å¤çš„æ¡ä»¶ç‰‡æ®µ</h3><p>å¦‚æœä¸€ä¸ªå‡½æ•°ä½“å†…æœ‰ä¸€äº›æ¡ä»¶åˆ†æ”¯, è€Œä¸”è¿™äº›æ¡ä»¶åˆ†æ”¯å†…æ•£å¸ƒäº†ä¸€äº›é‡å¤çš„ä»£ç , è¿™ä¸ªæ—¶å€™å°±æœ‰å¿…è¦è¿›è¡Œåˆå¹¶å»é‡æ“ä½œ.</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> paging = <span class=\"function\">(<span class=\"params\">currPage</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (currPage &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    currPage = <span class=\"number\">0</span>;</span><br><span class=\"line\">    jump(currPage); <span class=\"comment\">// è·³è½¬</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (currPage &gt;= totalPage) &#123;</span><br><span class=\"line\">    currPage = totalPage;</span><br><span class=\"line\">    jump(currPage); <span class=\"comment\">// è·³è½¬</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    jump(currPage); <span class=\"comment\">// è·³è½¬</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ <code>jump(currPage)</code> é‡å¤äº†, å®Œå…¨å¯ä»¥æŠŠå®ƒç‹¬ç«‹å‡ºæ¥:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> paging = <span class=\"function\">(<span class=\"params\">currPage</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (currPage &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    currPage = <span class=\"number\">0</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (currPage &gt;= totalPage) &#123;</span><br><span class=\"line\">    currPage = totalPage;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  jump(currPage);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"æŠŠæ¡ä»¶åˆ†æ”¯è¯­å¥æç‚¼æˆå‡½æ•°\"><a href=\"#æŠŠæ¡ä»¶åˆ†æ”¯è¯­å¥æç‚¼æˆå‡½æ•°\" class=\"headerlink\" title=\"æŠŠæ¡ä»¶åˆ†æ”¯è¯­å¥æç‚¼æˆå‡½æ•°\"></a>æŠŠæ¡ä»¶åˆ†æ”¯è¯­å¥æç‚¼æˆå‡½æ•°</h3><p>å¤æ‚çš„æ¡ä»¶åˆ†æ”¯è¯­å¥æ˜¯å¯¼è‡´ç¨‹åºéš¾ä»¥é˜…è¯»å’Œç†è§£çš„é‡è¦åŸå› , è€Œä¸”å¾ˆå®¹æ˜“å¯¼è‡´ä¸€ä¸ªåºå¤§çš„å‡½æ•°. è¿™ç§æƒ…å†µä¸‹å°±éœ€è¦æŠŠæ¡ä»¶åˆ†æ”¯è¯­å¥æç‚¼å‡ºæ¥.</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// éœ€æ±‚: å¦‚æœå½“å­£æ˜¯å¤„äºå¤å­£, é‚£ä¹ˆæ‰€æœ‰çš„å•†å“ 8 æŠ˜å‡ºå”®</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> getPrice = <span class=\"function\">(<span class=\"params\">price</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> date = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (date.getMonth() &gt;= <span class=\"number\">6</span> &amp;&amp; date.getMonth() &lt;= <span class=\"number\">9</span>) &#123; <span class=\"comment\">// å¤å­£</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> price * <span class=\"number\">0.8</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> price;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>è§‚å¯Ÿè¿™æ®µä»£ç :</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (date.getMonth() &gt;= <span class=\"number\">6</span> &amp;&amp; date.getMonth() &lt;= <span class=\"number\">9</span>) &#123; <span class=\"comment\">// å¤å­£</span></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬éœ€è¦è®©å®ƒæ›´ç¬¦åˆè¯­ä¹‰, è¿™æ ·è¯»ä»£ç çš„äººèƒ½å¾ˆè½»æ¾ç†è§£æ„å›¾, è¿™é‡Œå°±å¯ä»¥æç‚¼æˆä¸€ä¸ªå•ç‹¬å‡½æ•°.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> isSummer = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> date = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> date.getMonth() &gt;= <span class=\"number\">6</span> &amp;&amp; date.getMonth() &lt;= <span class=\"number\">9</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> getPrice = <span class=\"function\">(<span class=\"params\">price</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> date = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isSummer()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> price * <span class=\"number\">0.8</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> price;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"åˆç†çš„ä½¿ç”¨å¾ªç¯\"><a href=\"#åˆç†çš„ä½¿ç”¨å¾ªç¯\" class=\"headerlink\" title=\"åˆç†çš„ä½¿ç”¨å¾ªç¯\"></a>åˆç†çš„ä½¿ç”¨å¾ªç¯</h3><p>åœ¨å‡½æ•°ä½“å†…, å¦‚æœä¸€äº›ä»£ç åªæ˜¯å®Œæˆä¸€äº›é‡å¤çš„å·¥ä½œ, é‚£ä¹ˆå¯ä»¥åˆç†åˆ©ç”¨å¾ªç¯å®ŒæˆåŒæ ·çš„åŠŸèƒ½, è¿™æ ·å¯ä»¥ä¿æŒä»£ç é‡æ›´å°‘.</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// éœ€æ±‚: IE9 ä»¥ä¸‹åˆ›å»ºä¸€ä¸ª XHR å¯¹è±¡</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> createXHR = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> xhr;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    xhr = <span class=\"keyword\">new</span> ActiveXObject(<span class=\"string\">'MSXML2.XMLHttp.6.0'</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span>(e) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      xhr = <span class=\"keyword\">new</span> ActiveXObject(<span class=\"string\">'MSXML2.XMLHttp.3.0'</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span>(e) &#123;</span><br><span class=\"line\">      xhr = <span class=\"keyword\">new</span> ActiveXObject(<span class=\"string\">'MSXML2.XMLHttp'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> xhr;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> xhr = createXHR();</span><br></pre></td></tr></table></figure>\n<p>è¿™ä¸ªæ—¶å€™, ä½¿ç”¨å¾ªç¯æ¥ä¼˜åŒ–ä¸Šé¢çš„ä»£ç :</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿™æ®µä»£ç å°±çœ‹ç€ç¬¦åˆè¯­ä¹‰äº†, è€Œä¸”å¥½ç†è§£ ğŸ¤¡</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> createXHR = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> versions = [<span class=\"string\">'MSXML2.XMLHttp.6.0'</span>, <span class=\"string\">'MSXML2.XMLHttp.3.0'</span>, <span class=\"string\">'MSXML2.XMLHttp'</span>];</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, version; version = versions[i++];) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ActiveXObject(version);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span>(e) &#123;&#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> xhr = createXHR();</span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"æå‰è®©å‡½æ•°é€€å‡ºä»£æ›¿åµŒå¥—æ¡ä»¶åˆ†æ”¯\"><a href=\"#æå‰è®©å‡½æ•°é€€å‡ºä»£æ›¿åµŒå¥—æ¡ä»¶åˆ†æ”¯\" class=\"headerlink\" title=\"æå‰è®©å‡½æ•°é€€å‡ºä»£æ›¿åµŒå¥—æ¡ä»¶åˆ†æ”¯\"></a>æå‰è®©å‡½æ•°é€€å‡ºä»£æ›¿åµŒå¥—æ¡ä»¶åˆ†æ”¯</h3><p>å¾ˆå¤šç¨‹åºå‘˜ğŸ‘¨â€ğŸ’»â€éƒ½æœ‰è¿™ç§è§‚å¿µ â€œæ¯ä¸ªå‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªå…¥å£å’Œä¸€ä¸ªå‡ºå£â€, ä½†æ˜¯å…³äº â€œå‡½æ•°åªæœ‰ä¸€ä¸ªå‡ºå£â€ å¾€å¾€æœ‰ä¸€äº›ä¸åŒçš„çœ‹æ³•, ä¸‹é¢ç”¨ä»£ç æ¥è¯´æ˜ä¸€ä¸‹, å…‰è®²æ¦‚å¿µæœ‰ç‚¹æ™¦æ¶©.</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ä¸‹é¢æ˜¯ \"å‡½æ•°åªæœ‰ä¸€ä¸ªå‡ºå£\" çš„å…¸å‹ä»£ç </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> del = <span class=\"function\">(<span class=\"params\">obj</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> ret;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!obj.isReadOnly) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (obj.isFolder) &#123;</span><br><span class=\"line\">      ret = delFolder(obj);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (obj.isFile) &#123;</span><br><span class=\"line\">      ret = delFile(obj);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ret;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>åµŒå¥—çš„æ¡ä»¶åˆ†æ”¯ç»å¯¹æ˜¯ä»£ç ç»´æŠ¤è€…çš„å™©æ¢¦, å¤šå±‚åµŒå¥—çš„æ¡ä»¶æ›´åŠ ä¸å®¹æ˜“ç†è§£, æœ‰æ—¶å€™å¦‚æœä»£ç è¿‡é•¿, ä¸Šä¸€ä¸ª <code>if ()</code> è¯­å¥å¯èƒ½ç›¸éš”å¾ˆè¿œ. ä¸¥é‡å½±å“äº†é˜…è¯»ä½“éªŒå•Š. é‡æ„çš„ <code>del</code> å‡½æ•°å¦‚ä¸‹:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> del = <span class=\"function\">(<span class=\"params\">obj</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (obj.isReadOnly) &#123; <span class=\"comment\">// åè½¬ if</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (obj.isFolder) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> delFolder(obj);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (obj.isFile) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> delFile(obj);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç¬é—´æ¸…çˆ½ ğŸ‘Œ</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"ä¼ é€’å¯¹è±¡å‚æ•°ä»£æ›¿è¿‡é•¿çš„å‚æ•°åˆ—è¡¨\"><a href=\"#ä¼ é€’å¯¹è±¡å‚æ•°ä»£æ›¿è¿‡é•¿çš„å‚æ•°åˆ—è¡¨\" class=\"headerlink\" title=\"ä¼ é€’å¯¹è±¡å‚æ•°ä»£æ›¿è¿‡é•¿çš„å‚æ•°åˆ—è¡¨\"></a>ä¼ é€’å¯¹è±¡å‚æ•°ä»£æ›¿è¿‡é•¿çš„å‚æ•°åˆ—è¡¨</h3><p>æœ‰æ—¶å€™ä¸€ä¸ªå‡½æ•°å¯èƒ½æ¥æ”¶å¤šä¸ªå‚æ•°, è€Œä¸”å‚æ•°è¶Šå¤š, å°±è¶Šéš¾ç†è§£å’Œä½¿ç”¨. æœ€é‡è¦çš„ä¸€ç‚¹éœ€è¦æ³¨æ„å‚æ•°çš„é¡ºåº, å¦‚æœä¸ä¼ çš„æƒ…å†µè¦ä½¿ç”¨å ä½ç¬¦ä»£æ›¿. å¦‚æœå‚æ•°è¶…è¿‡ 3 ä¸ª, è¯·ä½¿ç”¨å¯¹è±¡å§.</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> setUserInfo = <span class=\"function\">(<span class=\"params\">id, name, address, sex, mobile, qq</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è°ƒç”¨ â˜¹ï¸:</span></span><br><span class=\"line\">setUserInfo(<span class=\"number\">1</span>, <span class=\"string\">'ifyour'</span>, <span class=\"literal\">undefined</span>, <span class=\"string\">'male'</span>, <span class=\"literal\">undefined</span>, <span class=\"string\">'123456'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// é‡æ„ ğŸ˜:</span></span><br><span class=\"line\">setUserInfo(&#123;</span><br><span class=\"line\">  id: <span class=\"number\">1</span>,</span><br><span class=\"line\">  name: <span class=\"string\">'ifyour'</span>,</span><br><span class=\"line\">  sex: <span class=\"string\">'male'</span>,</span><br><span class=\"line\">  qq: <span class=\"string\">'123456'</span>,</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"å°½é‡å‡å°‘å‚æ•°æ•°é‡\"><a href=\"#å°½é‡å‡å°‘å‚æ•°æ•°é‡\" class=\"headerlink\" title=\"å°½é‡å‡å°‘å‚æ•°æ•°é‡\"></a>å°½é‡å‡å°‘å‚æ•°æ•°é‡</h3><p>å¦‚æœè°ƒç”¨ä¸€ä¸ªå‡½æ•°, éœ€è¦ä¼ é€’å¾ˆå¤šå‚æ•°, è¿™æ ·çš„å‡½æ•°ç”¨èµ·æ¥å°±è¦å°å¿ƒäº†, å¿…é¡»ææ¸…æ¥šæ¯ä¸ªå‚æ•°çš„å«ä¹‰, æ‰€ä»¥, å¦‚æœèƒ½å°½é‡å°‘ä¼ å‚æ•°å°±å°‘ä¼ å‚æ•°. æŠŠå¤æ‚çš„é€»è¾‘å°è£…åˆ°å‡½æ•°å†…éƒ¨.</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// éœ€æ±‚: æœ‰ä¸€ä¸ªç”»å›¾å‡½æ•° draw</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> draw = <span class=\"function\">(<span class=\"params\">width, height, square</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¼˜åŒ–å¦‚ä¸‹:</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> draw = <span class=\"function\">(<span class=\"params\">width, height</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> square = width * height;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿™é‡Œçš„ <code>square</code> å‚æ•°æ²¡å¿…è¦, å¯ä»¥é€šè¿‡ <code>width</code> å’Œ <code>height</code> è®¡ç®—è·å¾—, è¿˜æœ‰ä¸€ç§æƒ…å†µ, è¿™ä¸ªç”»å›¾å‡½æ•°, å¦‚æœå¯ä»¥ç”»å¤šç§å›¾å½¢å‘¢? æ‰€ä»¥éœ€è¦åœ¨å†…éƒ¨å»å¤„ç†, ä»€ä¹ˆæ—¶å€™éœ€è¦ <code>square</code> ä»€ä¹ˆæ—¶å€™éœ€è¦ <code>radius</code>, ç„¶åå¯ä»¥ä½¿ç”¨ <strong>ç­–ç•¥æ¨¡å¼</strong> è®©å®ƒæ”¯æŒç”»å¤šç§å›¾å½¢.</p>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"å°‘ç”¨ä¸‰ç›®è¿ç®—\"><a href=\"#å°‘ç”¨ä¸‰ç›®è¿ç®—\" class=\"headerlink\" title=\"å°‘ç”¨ä¸‰ç›®è¿ç®—\"></a>å°‘ç”¨ä¸‰ç›®è¿ç®—</h3><p>ä¸‰ç›®è¿ç®—èƒ½å‡å°‘ä»£ç é‡, ä½†æ˜¯ä¸èƒ½æ»¥ç”¨, å¦‚æœä»¥ç‰ºç‰²ä»£ç å¯è¯»æ€§ä¸ºä»£ä»·, é‚£å°±å¾—ä¸å¿å¤±äº†.</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> global = <span class=\"keyword\">typeof</span> <span class=\"built_in\">window</span> !== <span class=\"string\">'undefined'</span> ? <span class=\"built_in\">window</span> : <span class=\"keyword\">this</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½†æ˜¯è¿™ç§æƒ…å†µå°±å®Œå…¨æ²¡å¿…è¦äº†, è€å®å†™ if..else...</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!aup || !bup) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> a === doc ? <span class=\"number\">-1</span> :</span><br><span class=\"line\">    b === doc ? <span class=\"number\">1</span> :</span><br><span class=\"line\">    aup ? <span class=\"number\">-1</span> :</span><br><span class=\"line\">    bup ? <span class=\"number\">1</span> :</span><br><span class=\"line\">    sortInput ?</span><br><span class=\"line\">    (indexOf.call(sortInput, a) - indexOf.call(sortInput, b)) :</span><br><span class=\"line\">    <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ğŸ˜¡ è¿™æ˜¯äººçœ‹çš„å—</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"åˆç†ä½¿ç”¨é“¾å¼è°ƒç”¨\"><a href=\"#åˆç†ä½¿ç”¨é“¾å¼è°ƒç”¨\" class=\"headerlink\" title=\"åˆç†ä½¿ç”¨é“¾å¼è°ƒç”¨\"></a>åˆç†ä½¿ç”¨é“¾å¼è°ƒç”¨</h3><p>jQuery ä¸­çš„é“¾å¼è°ƒç”¨ç”¨èµ·æ¥è¿˜æ˜¯å¾ˆçˆ½çš„, å®ƒçš„å®ç°ä¹Ÿéå¸¸ç®€å•, æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°ä¸€ä¸ªé“¾å¼è°ƒç”¨. ä½¿ç”¨çš„å‰æå°±æ˜¯é“¾æ¡çš„ç»“æ„ç›¸å¯¹æ¥è¯´ç¨³å®š, ä¸å®¹æ˜“å‘ç”Ÿä¿®æ”¹, å¦‚æœæ˜¯ç»å¸¸å‘ç”Ÿä¿®æ”¹çš„è¯, è¿˜æ˜¯å»ºè®®ä½¿ç”¨æ™®é€šçš„è°ƒç”¨. å› ä¸ºå®ƒè°ƒè¯•çš„æ—¶å€™éœ€è¦æŠŠè¿™ä¸ªé“¾å­æ‹†å¼€, æ‰çŸ¥é“æ˜¯å“ªä¸ªç¯èŠ‚æœ‰ Bug.</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ES5</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> User = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.id = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">User.prototype.setId = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">id</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.id = id;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>; <span class=\"comment\">// è¿”å›å®ä¾‹æœ¬èº«</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">User.prototype.setName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// é“¾å¼è°ƒç”¨</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> User()</span><br><span class=\"line\">  .setId(<span class=\"number\">1</span>)</span><br><span class=\"line\">  .setNmae(<span class=\"string\">'ifyour'</span>);</span><br></pre></td></tr></table></figure>\n<p>æˆ–è€…è¿™æ ·:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> User = &#123;</span><br><span class=\"line\">  id: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  name: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  setId: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">id</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.id = id;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  setName: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">User.setId(<span class=\"number\">1</span>).setName(<span class=\"string\">'ifyour'</span>);</span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"åˆ†è§£å¤§å‹ç±»\"><a href=\"#åˆ†è§£å¤§å‹ç±»\" class=\"headerlink\" title=\"åˆ†è§£å¤§å‹ç±»\"></a>åˆ†è§£å¤§å‹ç±»</h3><p>ä»å­—é¢æ„æ€æˆ‘ä»¬å°±èƒ½ç†è§£, å¦‚æœä¸€ä¸ªç±»é‡Œé¢æœ‰å¤ªå¤šçš„æ–¹æ³•, æˆ‘ä»¬è¦è€ƒè™‘æŠŠå…¶ä¸­åŒä¸€ç±»å‹ç›¸å…³çš„æ–¹æ³•æŠ½ç¦»å‡ºæ¥. æ¨¡å—åŒ–çš„å¥½å¤„ä¸è¨€è€Œå–», æŠŠé€»è¾‘å¤æ‚çš„åˆ†ç¦»æˆå°çš„å•å…ƒ, è¿™æ ·æ›´ä¾¿äºç»´æŠ¤, å‡ºç° bug äº†ä¹Ÿå¥½å®šä½é—®é¢˜. æ¥çœ‹ä¸€æ®µä»£ç .</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è‹±é›„ç±»</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> Spirit = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åŸå‹ä¸Šçš„æ”»å‡»æ–¹æ³•</span></span><br><span class=\"line\">Spirit.prototype.attack = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">type</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (type === <span class=\"string\">'waveBoxing'</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name + <span class=\"string\">': ä½¿ç”¨æ³¢åŠ¨æ‹³'</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type === <span class=\"string\">'whirlKick'</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name + <span class=\"string\">': ä½¿ç”¨æ—‹é£è…¿'</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// ... è¿˜æœ‰å¾ˆå¤šæ”»å‡»æ–¹æ³•</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> spirit = <span class=\"keyword\">new</span> Spirit(<span class=\"string\">'RYU'</span>);</span><br><span class=\"line\">spirit.attack(<span class=\"string\">'waveBoxing'</span>); <span class=\"comment\">// RYU: ä½¿ç”¨æ³¢åŠ¨æ‹³</span></span><br><span class=\"line\">spirit.attack(<span class=\"string\">'whirlKick'</span>); <span class=\"comment\">// RYU: ä½¿ç”¨æ—‹é£è…¿</span></span><br></pre></td></tr></table></figure>\n<p>é¢å‘å¯¹è±¡çš„è®¾è®¡é¼“åŠ±å°† <strong>è¡Œä¸º</strong> åˆ†è§£åˆ°åˆç†æ•°é‡çš„æ›´å°çš„å¯¹è±¡ä¸­:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Attack = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">spirit</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.spirit = spirit;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">Attack.prototype.start = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">type</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.list[type].call(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Attack.prototype.list = &#123;</span><br><span class=\"line\">  waveBoxing: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.sprite.name + <span class=\"string\">': ä½¿ç”¨æ³¢åŠ¨æ‹³'</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  whirlKick: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.sprite.name + <span class=\"string\">': ä½¿ç”¨æ—‹é£è…¿'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç°åœ¨ Sprite ç±»ç²¾ç®€äº†å¾ˆå¤š, ä¸å†ç›´æ¥åŒ…å«æ”»å‡»ç›¸å…³çš„æ–¹æ³•, è€Œæ˜¯æŠŠæ–¹æ³•å§”æ‰˜ç»™ Attack ç±»æ¥æ‰§è¡Œ. è¿™æ®µä»£ç ä¹Ÿæ˜¯ <strong>ç­–ç•¥æ¨¡å¼</strong> çš„è¿ç”¨ä¹‹ä¸€, çœ‹ä»£ç :</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Spirit = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.attackObj = <span class=\"keyword\">new</span> Attack(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">Spirit.prototype.attack = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">type</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.attackObj.start(type);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> spirit = <span class=\"keyword\">new</span> Spirit(<span class=\"string\">'RYU'</span>);</span><br><span class=\"line\">spirit.attack(<span class=\"string\">'waveBoxing'</span>); <span class=\"comment\">// RYU: ä½¿ç”¨æ³¢åŠ¨æ‹³</span></span><br><span class=\"line\">spirit.attack(<span class=\"string\">'whirlKick'</span>); <span class=\"comment\">// RYU: ä½¿ç”¨æ—‹é£è…¿</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>\n<h3 id=\"é€€å‡ºå¤šé‡å¾ªç¯\"><a href=\"#é€€å‡ºå¤šé‡å¾ªç¯\" class=\"headerlink\" title=\"é€€å‡ºå¤šé‡å¾ªç¯\"></a>é€€å‡ºå¤šé‡å¾ªç¯</h3><p>ä½¿ç”¨ <code>return</code> é€€å‡ºå¤šé‡å¾ªç¯. ä¸€å®šç¨‹åº¦ä¸Šèƒ½ç®€åŒ–ä»£ç , ä½¿ä»£ç æ›´å®¹æ˜“ç†è§£.</p>\n<p><strong>ä¾‹å­:</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// éœ€æ±‚: å‡è®¾åœ¨ä¸€ä¸ªå‡½æ•°ä½“å†…çš„å¤šé‡å¾ªç¯å†…, è¾¾åˆ°æŸä¸ªä¸´ç•Œæ¡ä»¶æ—¶é€€å‡ºå¾ªç¯</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> flag = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">10</span>; j++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (i * j &gt; <span class=\"number\">30</span>) &#123;</span><br><span class=\"line\">        flag = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¿™ç§ä»£ç çœ‹ç€å°±å¤´æ™•ç›®çœ©, é‡æ„å¦‚ä¸‹:</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">10</span>; j++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (i * j &gt; <span class=\"number\">30</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>ç›´æ¥ä½¿ç”¨ <code>return</code> å, åé¢çš„ä»£ç æ— æ³•æ‰§è¡Œ, è¿˜æ˜¯æœ‰ç‚¹å°é—®é¢˜çš„:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">10</span>; j++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (i * j &gt; <span class=\"number\">30</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i) <span class=\"comment\">// æ— æ³•æ‰§è¡Œ</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, æˆ‘ä»¬å¯ä»¥æŠŠç›¸å…³çš„ä»£ç æ”¾åˆ° <code>return</code> åé¢. å¦‚æœéœ€è¦æ‰§è¡Œçš„ä»£ç è¾ƒå¤š, å¯ä»¥æå–æˆä¸€ä¸ªå‡½æ•°:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> print = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i)</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; <span class=\"number\">10</span>; j++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (i * j &gt; <span class=\"number\">30</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> print(i); <span class=\"comment\">// æ‰§è¡Œ</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><a href=\"#\">â¤´ï¸Go Top</a></p>"},{"title":"å‰åç«¯é‰´æƒæ–¹å¼æ€»ç»“","comments":1,"date":"2018-11-25T05:02:34.000Z","from":null,"_content":"\nä»Šå¤©æ¥å­¦ä¹ ä¸‹å¸¸è§çš„é‰´æƒæ–¹å¼ï¼Œä»æœ€å¼€å§‹äº†è§£çš„æœ€ç®€å•çš„ Cookie éªŒè¯ï¼Œåˆ°åæ¥çš„ Session-cookieã€Token ç­‰ï¼Œæ•´ä½“æ¥è¯´ï¼Œå®‰å…¨æ€§è¶Šæ¥è¶Šé«˜ã€‚å½“ç„¶è¿˜æ˜¯å¯¹éƒ¨åˆ†æ–¹å¼äº†è§£ä¸æ˜¯å¾ˆæ·±ï¼Œè¿™é‡Œåšä¸ªç®€å•æ€»ç»“ï¼ŒæŸ¥æ¼è¡¥ç¼ºã€‚\n\n<!-- more -->\n\nç›®å‰æˆ‘ä»¬å¸¸ç”¨çš„é‰´æƒæœ‰å››ç§ï¼š\n\n1. HTTP Basic Authentication\n2. Session-cookie\n3. Token éªŒè¯\n4. OAuth(å¼€æ”¾æˆæƒ)\n\n### HTTP Basic Authentication\n\nè¿™ç§æˆæƒæ–¹å¼æ˜¯æµè§ˆå™¨éµå®ˆ HTTP åè®®å®ç°çš„åŸºæœ¬æˆæƒæ–¹å¼ï¼ŒHTTP åè®®è¿›è¡Œé€šä¿¡çš„è¿‡ç¨‹ä¸­ï¼ŒHTTP åè®®å®šä¹‰äº†åŸºæœ¬è®¤è¯è®¤è¯å…è®¸ HTTP æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯è¿›è¡Œç”¨æˆ·èº«ä»½è¯çš„æ–¹æ³•ã€‚\n\n#### è®¤è¯è¿‡ç¨‹\n\n- 1ï¸âƒ£ å®¢æˆ·ç«¯å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ï¼Œè¯·æ±‚çš„å†…å®¹å¯èƒ½æ˜¯ä¸€ä¸ªç½‘é¡µæˆ–è€…æ˜¯ä¸€ä¸ª ajax å¼‚æ­¥è¯·æ±‚ï¼Œæ­¤æ—¶ï¼Œå‡è®¾å®¢æˆ·ç«¯å°šæœªè¢«éªŒè¯ï¼Œåˆ™å®¢æˆ·ç«¯æä¾›å¦‚ä¸‹è¯·æ±‚è‡³æœåŠ¡å™¨ï¼š\n\n```text\nGet /index.html HTTP/1.0\nHost:www.google.com\n```\n\n- 2ï¸âƒ£ æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€éªŒè¯è¯·æ±‚ä»£ç  401ï¼Œ(`WWW-Authenticate: Basic realm=\"google.com\"` è¿™å¥è¯æ˜¯å…³é”®ï¼Œå¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯ä¸ä¼šå¼¹å‡ºç”¨æˆ·åå’Œå¯†ç è¾“å…¥ç•Œé¢ï¼‰æœåŠ¡å™¨è¿”å›çš„æ•°æ®å¦‚ä¸‹ï¼š\n\n```text\nHTTP/1.0 401 Unauthorised\nServer: SokEvo/1.0\nWWW-Authenticate: Basic realm=\"google.com\"\nContent-Type: text/html\nContent-Length: xxx\n```\n\n- 3ï¸âƒ£ å½“ç¬¦åˆ http1.0 æˆ– 1.1 è§„èŒƒçš„å®¢æˆ·ç«¯ï¼ˆå¦‚ IEï¼ŒFIREFOXï¼‰æ”¶åˆ° 401 è¿”å›å€¼æ—¶ï¼Œå°†è‡ªåŠ¨å¼¹å‡ºä¸€ä¸ªç™»å½•çª—å£ï¼Œè¦æ±‚ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚\n\n- 4ï¸âƒ£ ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç åï¼Œå°†ç”¨æˆ·ååŠå¯†ç ä»¥ BASE64 åŠ å¯†æ–¹å¼åŠ å¯†ï¼Œå¹¶å°†å¯†æ–‡æ”¾å…¥å‰ä¸€æ¡è¯·æ±‚ä¿¡æ¯ä¸­ï¼Œåˆ™å®¢æˆ·ç«¯å‘é€çš„ç¬¬ä¸€æ¡è¯·æ±‚ä¿¡æ¯åˆ™å˜æˆå¦‚ä¸‹å†…å®¹ï¼š\n\n```text\nGet /index.html HTTP/1.0\nHost:www.google.com\nAuthorization: Basic d2FuZzp3YW5n\n```\n\n<div class=\"tip\">\n`d2FuZzp3YW5n` è¡¨ç¤ºåŠ å¯†åçš„ç”¨æˆ·ååŠå¯†ç ï¼ˆç”¨æˆ·åï¼šå¯†ç  ç„¶åé€šè¿‡ base64 åŠ å¯†ï¼ŒåŠ å¯†è¿‡ç¨‹æ˜¯æµè§ˆå™¨é»˜è®¤çš„è¡Œä¸ºï¼Œä¸éœ€è¦æˆ‘ä»¬äººä¸ºåŠ å¯†ï¼Œæˆ‘ä»¬åªéœ€è¦è¾“å…¥ç”¨æˆ·åå¯†ç å³å¯ï¼‰\n</div>\n\n- 5ï¸âƒ£ æœåŠ¡å™¨æ”¶åˆ°ä¸Šè¿°è¯·æ±‚ä¿¡æ¯åï¼Œå°† Authorization å­—æ®µåçš„ç”¨æˆ·ä¿¡æ¯å–å‡ºã€è§£å¯†ï¼Œå°†è§£å¯†åçš„ç”¨æˆ·ååŠå¯†ç ä¸ç”¨æˆ·æ•°æ®åº“è¿›è¡Œæ¯”è¾ƒéªŒè¯ï¼Œå¦‚ç”¨æˆ·ååŠå¯†ç æ­£ç¡®ï¼ŒæœåŠ¡å™¨åˆ™æ ¹æ®è¯·æ±‚ï¼Œå°†æ‰€è¯·æ±‚èµ„æºå‘é€ç»™å®¢æˆ·ç«¯ã€‚\n\nå®¢æˆ·ç«¯æœªæœªè®¤è¯çš„æ—¶å€™ï¼Œä¼šå¼¹å‡ºç”¨æˆ·åå¯†ç è¾“å…¥æ¡†ï¼Œè¿™ä¸ªæ—¶å€™è¯·æ±‚æ—¶å±äº pending çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™å…¶å®æœåŠ¡å½“ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå¯†ç çš„æ—¶å€™å®¢æˆ·ç«¯ä¼šå†æ¬¡å‘é€å¸¦ Authentication å¤´çš„è¯·æ±‚ã€‚\n\nè¯·æ±‚è®¤è¯ ğŸ‘‡\n![image](https://user-images.githubusercontent.com/15377484/48976178-136a0300-f0bd-11e8-9fd6-b2e67d22bbc6.png)\n\nè®¤è¯æˆåŠŸ ğŸ‘‡\n![image](https://user-images.githubusercontent.com/15377484/48976167-d1d95800-f0bc-11e8-80fa-35c636dbc103.png)\n\n#### å®Œæ•´ä»£ç \n\n**Server.js**\n\n```js\nlet express = require('express');\nlet app = express();\n\napp.use(express.static(__dirname + '/public'));\napp.get('/Authentication_base', function(req, res) {\n  console.log('req.headers.authorization:', req.headers);\n  if (!req.headers.authorization) {\n    res.set({\n      'WWW-Authenticate': 'Basic realm=\"wang\"'\n    });\n    res.status(401).end();\n  } else {\n    let base64 = req.headers.authorization.split(' ')[1];\n    let userPass = new Buffer(base64, 'base64').toString().split(':');\n    let user = userPass[0];\n    let pass = userPass[1];\n    if (user === 'wang' && pass === 'wang') {\n      res.end('OK');\n    } else {\n      res.status(401).end();\n    }\n  }\n});\n\napp.listen(9090);\n```\n\n**index.html**\n\n```html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\" />\n    <title>HTTP Basic Authentication</title>\n  </head>\n  <body>\n    <div></div>\n    <script src=\"js/jquery-3.2.1.js\"></script>\n    <script>\n      $(function() {\n        send('./Authentication_base');\n      });\n      var send = function(url) {\n        $.ajax({\n          url: url,\n          method: 'GET'\n        });\n      };\n    </script>\n  </body>\n</html>\n```\n\nå½“ç„¶æœ‰ç™»é™†å°±æœ‰æ³¨é”€ï¼Œæˆ‘ä»¬ä¼šå‘ç°å½“æˆ‘ä»¬è®¤è¯æˆåŠŸåæ¯æ¬¡è¯·æ±‚è¯·æ±‚å¤´éƒ½ä¼šå¸¦ä¸Š Authentication åŠé‡Œé¢çš„å†…å®¹ï¼Œé‚£ä¹ˆå¦‚ä½•åšåˆ°è®©è¿™æ¬¡ç™»é™†å¤±æ•ˆçš„ï¼Ÿ\n\nç½‘ä¸ŠæŸ¥äº†åŠå¤©ï¼Œç›®å‰æœ€æœ‰æ•ˆçš„æ–¹å¼å°±æ˜¯åœ¨æ³¨é”€æ“ä½œçš„æ—¶å€™ï¼Œä¸“é—¨åœ¨æœåŠ¡å™¨è®¾ç½®ä¸€ä¸ªä¸“é—¨çš„æ³¨é”€è´¦å·ï¼Œå½“æ¥æ”¶åˆ°çš„ Authentication ä¿¡æ¯ä¸ºæ³¨é”€ç”¨æˆ·åå¯†ç çš„æ—¶å€™çº å°±å¸¦ä¾¿æ³¨é”€æˆåŠŸäº†ï¼Œè€Œå®¢æˆ·ç«¯åœ¨æ³¨é”€æ“ä½œçš„æ—¶å€™ï¼Œæ‰‹åŠ¨çš„çš„å»ä¿®æ”¹è¯·æ±‚å¤´é‡çš„ Authenticationï¼Œå°†ä»–è®¾ç½®æœªæœåŠ¡å™¨é»˜è®¤çš„æ³¨é”€è´¦å·å’Œå¯†ç ã€‚\n\né€šè¿‡ä¸Šé¢çš„ç®€å•è®²è§£ å…¶å®æˆ‘ä»¬å·²ç»å¯ä»¥è¿”ç°è¿™ç§éªŒè¯æ–¹å¼çš„ç¼ºé™·åŠ å¯†æ–¹å¼ç®€å•ï¼Œä»…ä»…æ˜¯ base64 åŠ å¯†ï¼Œè¿™ç§åŠ å¯†æ–¹å¼æ˜¯å¯é€†çš„ã€‚åŒæ—¶åœ¨æ¯ä¸ªè¯·æ±‚çš„å¤´ä¸Šéƒ½ä¼šé™„å¸¦ä¸Šç”¨æˆ·åå’Œå¯†ç ä¿¡æ¯ï¼Œè¿™æ ·åœ¨å¤–ç½‘æ˜¯å¾ˆå®¹æ˜“è¢«å—…æ¢å™¨æ¢æµ‹åˆ°çš„ã€‚\n\næ­£å¼å› ä¸ºè¿™æ ·ï¼Œè¿™ç§åŠ å¯†æ–¹å¼ä¸€èˆ¬å¤šè¢«ç”¨åœ¨å†…éƒ¨å®‰å…¨æ€§è¦æ±‚ä¸é«˜çš„çš„ç³»ç»Ÿä¸Šï¼Œåªæ˜¯ç›¸å¯¹çš„å¤šï¼Œæ€»çš„æ¥è¯´ç°åœ¨ä½¿ç”¨è¿™ç§é‰´æƒæ¯”è¾ƒå°‘äº†ã€‚å¦‚æœé¡¹ç›®éœ€è¦éƒ¨ç½²åœ¨å…¬ç½‘ä¸Šï¼Œè¿™ç§æ–¹å¼ä¸æ¨èï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å’Œ SSL æ¥åŠ å¯†ä¼ è¾“ï¼Œè¿™æ ·ä¼šå¥½ä¸€ç‚¹ï¼Œè¿™ä¸ªå¦‚æœæˆ‘åé¢æœ‰æ—¶é—´æ¥ç ”ç©¶ä¸€ä¸‹ã€‚\n\n### Session-cookie\n\nç¬¬äºŒç§è¿™ä¸ªæ–¹å¼æ˜¯åˆ©ç”¨æœåŠ¡å™¨ç«¯çš„ sessionï¼ˆä¼šè¯ï¼‰å’Œæµè§ˆå™¨ç«¯çš„ cookie æ¥å®ç°å‰åç«¯çš„è®¤è¯ï¼Œç”±äº http è¯·æ±‚æ—¶æ˜¯æ— çŠ¶æ€çš„ï¼ŒæœåŠ¡å™¨æ­£å¸¸æƒ…å†µä¸‹æ˜¯ä¸çŸ¥é“å½“å‰è¯·æ±‚ä¹‹å‰æœ‰æ²¡æœ‰æ¥è¿‡ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¦‚æœè¦è®°å½•çŠ¶æ€ï¼Œå°±éœ€è¦åœ¨æœåŠ¡å™¨ç«¯åˆ›å»ºä¸€ä¸ªä¼šè¯ (seesion), å°†åŒä¸€ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚éƒ½ç»´æŠ¤åœ¨å„è‡ªå¾—ä¼šä¼šè¯ä¸­ï¼Œæ¯å½“è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨ç«¯çš„æ—¶å€™ï¼Œå…ˆå»æŸ¥ä¸€ä¸‹è¯¥å®¢æˆ·ç«¯æœ‰æ²¡æœ‰åœ¨æœåŠ¡å™¨ç«¯åˆ›å»º seesionï¼Œå¦‚æœæœ‰åˆ™å·²ç»è®¤è¯æˆåŠŸäº†ï¼Œå¦åˆ™å°±æ²¡æœ‰è®¤è¯ã€‚\n\n#### è®¤è¯è¿‡ç¨‹\n\n1. æœåŠ¡å™¨åœ¨æ¥å—å®¢æˆ·ç«¯é¦–æ¬¡è®¿é—®æ—¶åœ¨æœåŠ¡å™¨ç«¯åˆ›å»º seesionï¼Œç„¶åä¿å­˜ seesionï¼ˆæˆ‘ä»¬å¯ä»¥å°† seesion ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä¹Ÿå¯ä»¥ä¿å­˜åœ¨ redis ä¸­ï¼Œæ¨èä½¿ç”¨åè€…ï¼‰ï¼Œç„¶åç»™è¿™ä¸ª session ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†å­—ç¬¦ä¸², ç„¶ååœ¨å“åº”å¤´ä¸­ç§ä¸‹è¿™ä¸ªå”¯ä¸€æ ‡è¯†å­—ç¬¦ä¸²ã€‚\n2. ç­¾åã€‚è¿™ä¸€æ­¥åªæ˜¯å¯¹ sid è¿›è¡ŒåŠ å¯†å¤„ç†ï¼ŒæœåŠ¡ç«¯ä¼šæ ¹æ®è¿™ä¸ª secret å¯†é’¥è¿›è¡Œè§£å¯†ã€‚ï¼ˆéå¿…éœ€æ­¥éª¤ï¼‰\n3. æµè§ˆå™¨ä¸­æ”¶åˆ°è¯·æ±‚å“åº”çš„æ—¶å€™ä¼šè§£æå“åº”å¤´ï¼Œç„¶åå°† sid ä¿å­˜åœ¨æœ¬åœ° cookie ä¸­ï¼Œæµè§ˆå™¨åœ¨ä¸‹æ¬¡ http è¯·æ±‚çš„è¯·æ±‚å¤´ä¸­ä¼šå¸¦ä¸Šè¯¥åŸŸåä¸‹çš„ cookie ä¿¡æ¯ã€‚\n4. æœåŠ¡å™¨åœ¨æ¥å—å®¢æˆ·ç«¯è¯·æ±‚æ—¶ä¼šå»è§£æè¯·æ±‚å¤´ cookie ä¸­çš„ sidï¼Œç„¶åæ ¹æ®è¿™ä¸ª sid å»æ‰¾æœåŠ¡å™¨ç«¯ä¿å­˜çš„è¯¥å®¢æˆ·ç«¯çš„ sessionï¼Œç„¶ååˆ¤æ–­è¯¥è¯·æ±‚æ˜¯å¦åˆæ³•ã€‚\n\n![](https://user-images.githubusercontent.com/15377484/38019076-382f84f8-32a9-11e8-9c5d-ef47b58185ad.png)\n\n#### å®Œæ•´ä»£ç \n\n**server.js**\n\n```js\nvar express = require('express');\nvar RedisStore = require('connect-redis')(express.session);\nvar app = express();\nvar secret = 'ifyour';\n// è®¾ç½® Cookie\napp.use(express.cookieParser(secret));\n\n// è®¾ç½® Session\napp.use(\n  express.session({\n    store: new RedisStore({\n      host: '127.0.0.1',\n      port: 6379,\n      db: 'session_db'\n    }),\n    secret: secret\n  })\n);\n\napp.get('/', function(req, res) {\n  var session = req.session;\n  session.time = session.time || 0;\n  var n = session.time++;\n  res.send('hello, session id:' + session.id + 'count:' + n);\n});\n\napp.listen(9080);\n```\n\n### Token éªŒè¯\n\n#### è®¤è¯è¿‡ç¨‹\n\n1. å®¢æˆ·ç«¯ä½¿ç”¨ç”¨æˆ·åè·Ÿå¯†ç è¯·æ±‚ç™»å½•\n2. æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œå»éªŒè¯ç”¨æˆ·åä¸å¯†ç \n3. éªŒè¯æˆåŠŸåï¼ŒæœåŠ¡ç«¯ä¼šç­¾å‘ä¸€ä¸ª Tokenï¼Œå†æŠŠè¿™ä¸ª Token å‘é€ç»™å®¢æˆ·ç«¯\n4. å®¢æˆ·ç«¯æ”¶åˆ° Token ä»¥åå¯ä»¥æŠŠå®ƒå­˜å‚¨èµ·æ¥ï¼Œæ¯”å¦‚æ”¾åœ¨ Cookie é‡Œæˆ–è€… LocalStorage é‡Œ\n5. å®¢æˆ·ç«¯æ¯æ¬¡å‘æœåŠ¡ç«¯è¯·æ±‚èµ„æºçš„æ—¶å€™éœ€è¦å¸¦ç€æœåŠ¡ç«¯ç­¾å‘çš„ Token\n6. æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œç„¶åå»éªŒè¯å®¢æˆ·ç«¯è¯·æ±‚é‡Œé¢å¸¦ç€çš„ Tokenï¼Œå¦‚æœéªŒè¯æˆåŠŸï¼Œå°±å‘å®¢æˆ·ç«¯è¿”å›è¯·æ±‚çš„æ•°æ®\n\næ€»çš„æ¥è¯´å°±æ˜¯å®¢æˆ·ç«¯åœ¨é¦–æ¬¡ç™»é™†ä»¥åï¼ŒæœåŠ¡ç«¯å†æ¬¡æ¥æ”¶ http è¯·æ±‚çš„æ—¶å€™ï¼Œå°±åªè®¤ token äº†ï¼Œè¯·æ±‚åªè¦æ¯æ¬¡æŠŠ token å¸¦ä¸Šå°±è¡Œäº†ï¼ŒæœåŠ¡å™¨ç«¯ä¼šæ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚ï¼Œç„¶åæ ¡éªŒ token çš„åˆæ³•æ€§ï¼Œåˆæ³•å°±æ”¾è¡Œï¼Œä¸åˆæ³•å°±è¿”å› 401ï¼ˆé‰´æƒå¤±è´¥ï¼‰ã€‚\n\nä¹çš„ä¸€çœ‹å¥½åƒå’Œå‰é¢çš„ seesion-cookie æœ‰ç‚¹åƒï¼Œseesion-cookie æ˜¯é€šè¿‡ seesionid æ¥ä½œä¸ºæµè§ˆå™¨å’ŒæœåŠ¡ç«¯çš„é“¾æ¥æ¡¥æ¢ï¼Œè€Œ token éªŒè¯æ–¹å¼è²Œä¼¼æ˜¯ token æ¥èµ·åˆ° seesionid çš„è§’è‰²ã€‚å…¶å®è¿™ä¸¤è€…å·®åˆ«æ˜¯å¾ˆå¤§çš„ã€‚\n\n#### ä¸ seesion-cookie çš„åŒºåˆ«\n\n1. sessionid æ˜¯ä¸€ä¸ªå”¯ä¸€æ ‡è¯†çš„å­—ç¬¦ä¸²ï¼ŒæœåŠ¡ç«¯æ˜¯æ ¹æ®è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæ¥æŸ¥è¯¢åœ¨æœåŠ¡å™¨ç«¯ä¿æŒçš„ seesionï¼Œè¿™é‡Œé¢æ‰ä¿å­˜ç€ç”¨æˆ·çš„ç™»é™†çŠ¶æ€ã€‚ä½†æ˜¯ token æœ¬èº«å°±æ˜¯ä¸€ç§ç™»é™†æˆåŠŸå‡­è¯ï¼Œä»–æ˜¯åœ¨ç™»é™†æˆåŠŸåæ ¹æ®æŸç§è§„åˆ™ç”Ÿæˆçš„ä¸€ç§ä¿¡æ¯å‡­è¯ï¼Œä»–é‡Œé¢æœ¬èº«å°±ä¿å­˜ç€ç”¨æˆ·çš„ç™»é™†çŠ¶æ€ã€‚æœåŠ¡å™¨ç«¯åªéœ€è¦æ ¹æ®å®šä¹‰çš„è§„åˆ™æ ¡éªŒè¿™ä¸ª token æ˜¯å¦åˆæ³•å°±è¡Œã€‚\n2. session-cookie æ˜¯éœ€è¦ cookie é…åˆçš„ï¼Œå±…ç„¶è¦ cookieï¼Œé‚£ä¹ˆåœ¨ http ä»£ç†å®¢æˆ·ç«¯çš„é€‰æ‹©ä¸Šå°±æ˜¯åªæœ‰æµè§ˆå™¨äº†ï¼Œå› ä¸ºåªæœ‰æµè§ˆå™¨æ‰ä¼šå»è§£æè¯·æ±‚å“åº”å¤´é‡Œé¢çš„ cookie, ç„¶åæ¯æ¬¡è¯·æ±‚å†é»˜è®¤å¸¦ä¸Šè¯¥åŸŸåä¸‹çš„ cookieã€‚ä½†æ˜¯æˆ‘ä»¬çŸ¥é“ http ä»£ç†å®¢æˆ·ç«¯ä¸åªæœ‰æµè§ˆå™¨ï¼Œè¿˜æœ‰åŸç”Ÿ APP ç­‰ç­‰ï¼Œè¿™ä¸ªæ—¶å€™ cookie æ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œæˆ–è€…æµè§ˆå™¨ç«¯æ˜¯å¯ä»¥ç¦æ­¢ cookie çš„ (è™½ç„¶å¯ä»¥ï¼Œä½†æ˜¯è¿™åŸºæœ¬ä¸Šæ˜¯å±äºåƒé¥±æ²¡äº‹å¹²çš„äººå¹²çš„äº‹)ï¼Œä½†æ˜¯ token å°±ä¸ä¸€æ ·ï¼Œä»–æ˜¯ç™»é™†è¯·æ±‚åœ¨ç™»é™†æˆåŠŸåå†è¯·æ±‚å“åº”ä½“ä¸­è¿”å›çš„ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯åœ¨æ”¶åˆ°å“åº”çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠä»–å­˜åœ¨æœ¬åœ°çš„ cookieã€storageï¼Œæˆ–è€…å†…å­˜ä¸­ï¼Œç„¶åå†ä¸‹ä¸€æ¬¡è¯·æ±‚çš„è¯·æ±‚å¤´é‡å¸¦ä¸Šè¿™ä¸ª token å°±è¡Œäº†ã€‚ç®€å•ç‚¹æ¥è¯´ cookie-session æœºåˆ¶ä»–é™åˆ¶äº†å®¢æˆ·ç«¯çš„ç±»å‹ï¼Œè€Œ token éªŒè¯æœºåˆ¶ä¸°å¯Œäº†å®¢æˆ·ç«¯ç±»å‹ã€‚\n3. æ—¶æ•ˆæ€§ã€‚session-cookie çš„ sessionid æ˜¯åœ¨ç™»é™†æ—¶ç”Ÿæˆçš„ï¼Œè€Œä¸”åœ¨ç™»å‡ºæ—¶ä¸€ç›´ä¸å˜ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå®‰å…¨æ€§å°±ä¼šé™ä½ï¼Œè€Œ token æ˜¯å¯ä»¥åœ¨ä¸€æ®µæ—¶é—´å†…åŠ¨æ€æ”¹å˜çš„ã€‚\n4. å¯æ‰©å±•æ€§ã€‚token éªŒè¯æœ¬èº«æ˜¯æ¯”è¾ƒçµæ´»çš„ï¼Œä¸€æ˜¯ token çš„è§£å†³æ–¹æ¡ˆæœ‰è®¸å¤šï¼Œå¸¸ç”¨çš„æ˜¯ JWTï¼ŒäºŒæ¥æˆ‘ä»¬å¯ä»¥åŸºäº token éªŒè¯æœºåˆ¶ï¼Œä¸“é—¨åšä¸€ä¸ªé‰´æƒæœåŠ¡ï¼Œç”¨å®ƒå‘å¤šä¸ªæœåŠ¡çš„è¯·æ±‚è¿›è¡Œç»Ÿä¸€é‰´æƒã€‚\n\nä¸‹é¢å°±æ‹¿æœ€å¸¸ç”¨çš„ JWTï¼ˆJSON WEB TOKENï¼‰æ¥è¯´ï¼š\n\nJWT æ˜¯ Auth0 æå‡ºçš„é€šè¿‡å¯¹ JSON è¿›è¡ŒåŠ å¯†ç­¾åæ¥å®ç°æˆæƒéªŒè¯çš„æ–¹æ¡ˆï¼Œå°±æ˜¯ç™»é™†æˆåŠŸåå°†ç›¸å…³ä¿¡æ¯ç»„æˆ json å¯¹è±¡ï¼Œç„¶åå¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡ŒæŸä¸­æ–¹å¼çš„åŠ å¯†ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯åœ¨ä¸‹æ¬¡è¯·æ±‚æ—¶å¸¦ä¸Šè¿™ä¸ª tokenï¼ŒæœåŠ¡ç«¯å†æ”¶åˆ°è¯·æ±‚æ—¶æ ¡éªŒ token åˆæ³•æ€§ï¼Œå…¶å®ä¹Ÿå°±æ˜¯åœ¨æ ¡éªŒè¯·æ±‚çš„åˆæ³•æ€§ã€‚JWT å¯¹è±¡é€šå¸¸ç”±ä¸‰éƒ¨åˆ†æ„æˆï¼š\n\n1ï¸âƒ£ Headersï¼š åŒ…æ‹¬ç±»åˆ«ï¼ˆtypï¼‰ã€åŠ å¯†ç®—æ³•ï¼ˆalgï¼‰\n\n```json\n{\n  \"alg\": \"HS256\",\n  \"typ\": \"JWT\"\n}\n```\n\n2ï¸âƒ£ Claimsï¼šåŒ…æ‹¬éœ€è¦ä¼ é€’çš„ç”¨æˆ·ä¿¡æ¯\n\n```json\n{\n  \"sub\": \"1234567890\",\n  \"name\": \"John Doe\",\n  \"admin\": true\n}\n```\n\n3ï¸âƒ£ Signatureï¼šæ ¹æ® alg ç®—æ³•ä¸ç§æœ‰ç§˜é’¥è¿›è¡ŒåŠ å¯†å¾—åˆ°çš„ç­¾åå­—ä¸²ï¼Œè¿™ä¸€æ®µæ˜¯æœ€é‡è¦çš„æ•æ„Ÿä¿¡æ¯ï¼Œåªèƒ½åœ¨æœåŠ¡ç«¯è§£å¯†\n\n```text\nHMACSHA256(\n  base64UrlEncode(Headers) + '.' + base64UrlEncode(Claims),\n  SECREATE_KEY\n);\n```\n\nç¼–ç ä¹‹åçš„ JWT çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ä¸€ä¸²å­—ç¬¦ï¼š\n\n```text\neyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ\n```\n\n#### å®Œæ•´ä»£ç \n\n**auth.js**\n\n```js\nlet jwt = require('jwt-simple');\nlet secret = 'wangyy';\nlet time = 10;\nmodule.exports = {\n  /* æ£€éªŒ token åˆæ³•æ€§ */\n  validate: function(req, res, next) {\n    let token = req.body.token || req.headers['xssToken'];\n    if (token) {\n      let decodeToken = null;\n      try {\n        // é˜²æ­¢å‡å†’ token è§£ææŠ¥é”™\n        decodeToken = jwt.decode(token, secret, 'HS256');\n      } catch (err) {\n        res.status(401).send('éæ³•è®¿é—®');\n        return;\n      }\n      let exp = decodeToken.exp;\n      if (!exp) {\n        res.status(401).send('éæ³•è®¿é—®');\n      }\n      let now = new Date().getTime();\n      if (exp > now + time * 60 * 1000) {\n        res.send({ code: '002', errorMsg: 'æˆæƒè¶…æ—¶' });\n      }\n      next();\n    } else {\n      res.status(401).send('éæ³•è®¿é—®');\n    }\n  },\n  /* ç”Ÿæˆ token*/\n  makeToken() {\n    let Token = null;\n    let payload = {\n      time: new Date().getTime(),\n      exp: this.makeExp(time)\n    };\n    Token = jwt.encode(payload, secret, HS256);\n    return Token;\n  },\n  /* ç”Ÿæˆ token è¿‡æœŸæ—¶é—´ */\n  makeExp: function(time) {\n    let stam = time601000;\n  }\n};\n```\n\n**Server.js**\n\n```js\nlet express = require('express');\nlet app = express();\nlet bodyParser = require('body-parser');\nlet auth = require('./lib/auth.js');\nlet chalk = require('chalk');\n\napp.use(bodyParser.json());\napp.post('/login', function(req, res, next) {\n  let Token = auth.makeToken();\n  res.json({ result: 'success', token: Token }, 200);\n});\napp.use('*', [auth.validate], function(req, res, next) {\n  res.send('success');\n});\n\napp.listen('9999');\n```\n\n### OAuth(å¼€æ”¾æˆæƒ)\n\nOAuthï¼ˆå¼€æ”¾æˆæƒï¼‰æ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œå…è®¸ç”¨æˆ·æˆæƒç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®ä»–ä»¬å­˜å‚¨åœ¨å¦å¤–çš„æœåŠ¡æä¾›è€…ä¸Šçš„ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦å°†ç”¨æˆ·åå’Œå¯†ç æä¾›ç»™ç¬¬ä¸‰æ–¹ç½‘ç«™æˆ–åˆ†äº«ä»–ä»¬æ•°æ®çš„æ‰€æœ‰å†…å®¹ï¼Œä¸ºäº†ä¿æŠ¤ç”¨æˆ·æ•°æ®çš„å®‰å…¨å’Œéšç§ï¼Œç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®ç”¨æˆ·æ•°æ®å‰éƒ½éœ€è¦æ˜¾å¼çš„å‘ç”¨æˆ·å¾æ±‚æˆæƒã€‚æˆ‘ä»¬å¸¸è§çš„æä¾› OAuth è®¤è¯æœåŠ¡çš„å‚å•†æœ‰æ”¯ä»˜å®ã€QQã€å¾®ä¿¡ã€‚\n\nOAuth åè®®åˆæœ‰ 1.0 å’Œ 2.0 ä¸¤ä¸ªç‰ˆæœ¬ã€‚ç›¸æ¯”è¾ƒ 1.0 ç‰ˆï¼Œ2.0 ç‰ˆæ•´ä¸ªæˆæƒéªŒè¯æµç¨‹æ›´ç®€å•æ›´å®‰å…¨ï¼Œä¹Ÿæ˜¯ç›®å‰æœ€ä¸»è¦çš„ç”¨æˆ·èº«ä»½éªŒè¯å’Œæˆæƒæ–¹å¼ã€‚\n\n#### è®¤è¯è¿‡ç¨‹\n\nä¸‹é¢æ˜¯ä¸€å¼  Auth2.0 çš„æµç¨‹å›¾ï¼š\n\n![image](https://user-images.githubusercontent.com/15377484/48976006-b7ea4600-f0b9-11e8-8f94-1102761320b0.png)\n\nä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒAuth2.0 æµç¨‹åˆ†ä¸ºå…­æ­¥ï¼š\n\n1ï¸âƒ£ å‘ç”¨æˆ·è¯·æ±‚æˆæƒï¼Œç°åœ¨å¾ˆå¤šçš„ç½‘ç«™åœ¨ç™»é™†çš„æ—¶å€™éƒ½æœ‰ç¬¬ä¸‰æ–¹ç™»é™†çš„å…¥å£ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»ç­‰ç¬¬ä¸‰æ–¹å…¥å£æ—¶ï¼Œç¬¬ä¸‰æ–¹æˆæƒæœåŠ¡ä¼šå¼•å¯¼æˆ‘ä»¬è¿›å…¥ç¬¬ä¸‰æ–¹ç™»é™†æˆæƒé¡µé¢ã€‚\n\n![image](https://user-images.githubusercontent.com/15377484/48976180-35638580-f0bd-11e8-9c0a-c6aee6bf7da5.png)\n\né€šè¿‡ç¬¬ä¸‰æ–¹è¯·æ±‚æˆæƒé¡µé¢çš„æµè§ˆå™¨åœ°å€æ åœ°å€å¯ä»¥çœ‹å‡ºï¼š\n\n```text\nhttps://graph.qq.com/oauth2.0/show?which=Login&display=pc&response_type=code&client_id=100270989&redirect_uri=https%3A%2F%2Fpassport.csdn.net%2Faccount%2Flogin%3Foauth_provider%3DQQProvider&state=test\n```\n\nè¿™é‡Œçš„åœ°å€é‡Œé¢çš„ `%` æ˜¯æµè§ˆå™¨å¼ºåˆ¶ç¼–ç åçš„æ˜¾ç¤ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `decodeURIComponent` è¿›è¡Œè§£ç ï¼Œè§£ç åæ˜¯è¿™æ ·ï¼š\n\n```text\nhttps://graph.qq.com/oauth2.0/show?which=Login&display=pc&response_type=code&client_id=100270989&redirect_uri=https://passport.csdn.net/account/login?oauth_provider=QQProvider&state=test\n```\n\nè¿™ä¸ª url åœ°å€æˆ‘ä»¬å¯ä»¥çœ‹è§ Auth2.0 å¸¸è§çš„å‡ ä¸ªå‚æ•°ï¼š\n\n```text\nresponse_type:  è¿”å›ç±»å‹\nclient_id:      ç¬¬ä¸‰æ–¹åº”ç”¨ id, ç”±æˆæƒæœåŠ¡å™¨ï¼ˆqqï¼‰åœ¨ç¬¬ä¸‰æ–¹åº”ç”¨æäº¤æ—¶é¢å‘ç»™ç¬¬ä¸‰æ–¹åº”ç”¨ã€‚\nredirect_uri:   ç™»é™†æˆåŠŸé‡å®šå‘é¡µé¢\noauth_provider: ç¬¬ä¸‰æ–¹æˆæƒæä¾›æ–¹\nstate:          ç”±ç¬¬ä¸‰æ–¹åº”ç”¨ç»™å‡ºçš„éšæœºç \n```\n\n2ï¸âƒ£ è¿”å›ç”¨æˆ·å‡­è¯ï¼ˆcodeï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªå‡­è¯ï¼ˆcodeï¼‰ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æˆæƒå¹¶ç™»é™†åï¼ŒæˆæƒæœåŠ¡å™¨å°†ç”Ÿæˆä¸€ä¸ªç”¨æˆ·å‡­è¯ï¼ˆcodeï¼‰ã€‚è¿™ä¸ªç”¨æˆ·å‡­è¯ä¼šé™„åŠ åœ¨é‡å®šå‘çš„åœ°å€ `redirect_uri` çš„åé¢\n\n```text\nhttps://passport.csdn.net/account/login?code=9e3efa6cea739f9aaab2&state=XXX\n```\n\n3ï¸âƒ£ è¯·æ±‚æˆæƒæœåŠ¡å™¨æˆæƒ\n\nç»è¿‡ç¬¬äºŒéƒ¨è·å– code ååé¢çš„å·¥ä½œå°±å¯ä»¥äº¤ç»™åå°å»å¤„ç†çš„ï¼Œå’Œç”¨æˆ·çš„äº¤äº’å°±ç»“æŸäº†ã€‚æ¥ä¸‹æ¥æˆ‘çš„éœ€è¦è·å–å‡­è¯ï¼ˆAccess Tokenï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä»–æ¥å‘æˆæƒæœåŠ¡å™¨è·å–ç”¨æˆ·ä¿¡æ¯ç­‰èµ„æºã€‚ ç¬¬ä¸‰æ–¹åº”ç”¨åå°é€šè¿‡ç¬¬äºŒæ­¥çš„å‡­è¯ï¼ˆcodeï¼‰å‘æˆæƒæœåŠ¡å™¨è¯·æ±‚å‡­è¯ï¼ˆAccess Tokenï¼‰ï¼Œè¿™æ—¶å€™éœ€è¦ä»¥ä¸‹å‡ ä¸ªä¿¡æ¯ï¼š\n\n- `client_id`: æ ‡è¯†ç¬¬ä¸‰æ–¹åº”ç”¨çš„ idï¼Œç”±æˆæƒæœåŠ¡å™¨åœ¨ç¬¬ä¸‰æ–¹åº”ç”¨æäº¤æ—¶é¢å‘ç»™ç¬¬ä¸‰æ–¹åº”ç”¨\n- `client_secret`: ç¬¬ä¸‰æ–¹åº”ç”¨å’ŒæˆæƒæœåŠ¡å™¨ä¹‹é—´çš„å®‰å…¨å‡­è¯ï¼Œç”±æˆæƒæœåŠ¡å™¨åœ¨ç¬¬ä¸‰æ–¹åº”ç”¨æäº¤æ—¶é¢å‘ç»™ç¬¬ä¸‰æ–¹åº”ç”¨\n- `code`: ç¬¬ä¸€æ­¥ä¸­è¿”å›çš„ç”¨æˆ·å‡­è¯ `redirect_uri` ç¬¬ä¸€æ­¥ç”Ÿæˆç”¨æˆ·å‡­è¯åè·³è½¬åˆ°ç¬¬äºŒæ­¥æ—¶çš„åœ°å€\n- `state`: ç”±ç¬¬ä¸‰æ–¹åº”ç”¨ç»™å‡ºçš„éšæœºç \n\n4ï¸âƒ£ æˆæƒæœåŠ¡å™¨åŒæ„æˆæƒåï¼Œè¿”å›ä¸€ä¸ªèµ„æºè®¿é—®çš„å‡­è¯ï¼ˆAccess Tokenï¼‰ã€‚\n\n5ï¸âƒ£ ç¬¬ä¸‰æ–¹åº”ç”¨é€šè¿‡ç¬¬å››æ­¥çš„å‡­è¯ï¼ˆAccess Tokenï¼‰å‘èµ„æºæœåŠ¡å™¨è¯·æ±‚ç›¸å…³èµ„æºã€‚\n\n6ï¸âƒ£ èµ„æºæœåŠ¡å™¨éªŒè¯å‡­è¯ï¼ˆAccess Tokenï¼‰é€šè¿‡åï¼Œå°†ç¬¬ä¸‰æ–¹åº”ç”¨è¯·æ±‚çš„èµ„æºè¿”å›ã€‚\n\nä»ç”¨æˆ·è§’åº¦æ¥è¯´ï¼Œç¬¬ä¸‰æ–¹æˆæƒå¯ä»¥è®©æˆ‘ä»¬å¿«é€Ÿçš„ç™»é™†åº”ç”¨ï¼Œæ— éœ€è¿›è¡Œç¹ççš„æ³¨å†Œï¼ŒåŒæ—¶ä¸ç”¨è®°ä½å„ç§è´¦å·å¯†ç ã€‚åªéœ€è¦è®°ä½è‡ªå·±å¸¸ç”¨çš„å‡ ä¸ªè´¦å·å°± OK äº†ã€‚ ä»äº§å“ç»ç†çš„è§’åº¦æ¥æ‰€ï¼Œè¿™ç§æˆæƒæ–¹å¼æé«˜ç”¨æˆ·çš„ä½“éªŒæ»¡æ„åº¦ã€‚å¦ä¸€æ–¹é¢å¯ä»¥è·å–æ›´å¤šçš„ç”¨æˆ·ã€‚\n\n### æ€»ç»“\n\næˆæƒæ–¹å¼å¤šç§å¤šæ ·ï¼Œä¸»è¦è¿˜æ˜¯è¦å–å†³äºæˆ‘ä»¬å¯¹äºäº§å“çš„å®šä½ã€‚å¦‚æœæˆ‘ä»¬çš„äº§å“åªæ˜¯åœ¨ä¼ä¸šå†…éƒ¨ä½¿ç”¨ï¼ŒToken å’Œ Session-cookie å°±å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œå¦‚æœæ˜¯é¢å‘äº’è”ç½‘çš„å¤§ä¼—ç”¨æˆ·ï¼Œé‚£ä¹ˆç¬¬ä¸‰æ–¹æˆæƒ OAuth åœ¨ç”¨æˆ·ä½“éªŒåº¦ä¸Šä¼šæœ‰ä¸€ä¸ªå¾ˆå¤§çš„æå‡ã€‚\n","source":"_posts/å‰åç«¯é‰´æƒæ–¹å¼æ€»ç»“.md","raw":"---\ntitle: å‰åç«¯é‰´æƒæ–¹å¼æ€»ç»“\ncomments: true\ndate: 2018-11-25 13:02:34\ntags:\nfrom:\n---\n\nä»Šå¤©æ¥å­¦ä¹ ä¸‹å¸¸è§çš„é‰´æƒæ–¹å¼ï¼Œä»æœ€å¼€å§‹äº†è§£çš„æœ€ç®€å•çš„ Cookie éªŒè¯ï¼Œåˆ°åæ¥çš„ Session-cookieã€Token ç­‰ï¼Œæ•´ä½“æ¥è¯´ï¼Œå®‰å…¨æ€§è¶Šæ¥è¶Šé«˜ã€‚å½“ç„¶è¿˜æ˜¯å¯¹éƒ¨åˆ†æ–¹å¼äº†è§£ä¸æ˜¯å¾ˆæ·±ï¼Œè¿™é‡Œåšä¸ªç®€å•æ€»ç»“ï¼ŒæŸ¥æ¼è¡¥ç¼ºã€‚\n\n<!-- more -->\n\nç›®å‰æˆ‘ä»¬å¸¸ç”¨çš„é‰´æƒæœ‰å››ç§ï¼š\n\n1. HTTP Basic Authentication\n2. Session-cookie\n3. Token éªŒè¯\n4. OAuth(å¼€æ”¾æˆæƒ)\n\n### HTTP Basic Authentication\n\nè¿™ç§æˆæƒæ–¹å¼æ˜¯æµè§ˆå™¨éµå®ˆ HTTP åè®®å®ç°çš„åŸºæœ¬æˆæƒæ–¹å¼ï¼ŒHTTP åè®®è¿›è¡Œé€šä¿¡çš„è¿‡ç¨‹ä¸­ï¼ŒHTTP åè®®å®šä¹‰äº†åŸºæœ¬è®¤è¯è®¤è¯å…è®¸ HTTP æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯è¿›è¡Œç”¨æˆ·èº«ä»½è¯çš„æ–¹æ³•ã€‚\n\n#### è®¤è¯è¿‡ç¨‹\n\n- 1ï¸âƒ£ å®¢æˆ·ç«¯å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ï¼Œè¯·æ±‚çš„å†…å®¹å¯èƒ½æ˜¯ä¸€ä¸ªç½‘é¡µæˆ–è€…æ˜¯ä¸€ä¸ª ajax å¼‚æ­¥è¯·æ±‚ï¼Œæ­¤æ—¶ï¼Œå‡è®¾å®¢æˆ·ç«¯å°šæœªè¢«éªŒè¯ï¼Œåˆ™å®¢æˆ·ç«¯æä¾›å¦‚ä¸‹è¯·æ±‚è‡³æœåŠ¡å™¨ï¼š\n\n```text\nGet /index.html HTTP/1.0\nHost:www.google.com\n```\n\n- 2ï¸âƒ£ æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€éªŒè¯è¯·æ±‚ä»£ç  401ï¼Œ(`WWW-Authenticate: Basic realm=\"google.com\"` è¿™å¥è¯æ˜¯å…³é”®ï¼Œå¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯ä¸ä¼šå¼¹å‡ºç”¨æˆ·åå’Œå¯†ç è¾“å…¥ç•Œé¢ï¼‰æœåŠ¡å™¨è¿”å›çš„æ•°æ®å¦‚ä¸‹ï¼š\n\n```text\nHTTP/1.0 401 Unauthorised\nServer: SokEvo/1.0\nWWW-Authenticate: Basic realm=\"google.com\"\nContent-Type: text/html\nContent-Length: xxx\n```\n\n- 3ï¸âƒ£ å½“ç¬¦åˆ http1.0 æˆ– 1.1 è§„èŒƒçš„å®¢æˆ·ç«¯ï¼ˆå¦‚ IEï¼ŒFIREFOXï¼‰æ”¶åˆ° 401 è¿”å›å€¼æ—¶ï¼Œå°†è‡ªåŠ¨å¼¹å‡ºä¸€ä¸ªç™»å½•çª—å£ï¼Œè¦æ±‚ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚\n\n- 4ï¸âƒ£ ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç åï¼Œå°†ç”¨æˆ·ååŠå¯†ç ä»¥ BASE64 åŠ å¯†æ–¹å¼åŠ å¯†ï¼Œå¹¶å°†å¯†æ–‡æ”¾å…¥å‰ä¸€æ¡è¯·æ±‚ä¿¡æ¯ä¸­ï¼Œåˆ™å®¢æˆ·ç«¯å‘é€çš„ç¬¬ä¸€æ¡è¯·æ±‚ä¿¡æ¯åˆ™å˜æˆå¦‚ä¸‹å†…å®¹ï¼š\n\n```text\nGet /index.html HTTP/1.0\nHost:www.google.com\nAuthorization: Basic d2FuZzp3YW5n\n```\n\n<div class=\"tip\">\n`d2FuZzp3YW5n` è¡¨ç¤ºåŠ å¯†åçš„ç”¨æˆ·ååŠå¯†ç ï¼ˆç”¨æˆ·åï¼šå¯†ç  ç„¶åé€šè¿‡ base64 åŠ å¯†ï¼ŒåŠ å¯†è¿‡ç¨‹æ˜¯æµè§ˆå™¨é»˜è®¤çš„è¡Œä¸ºï¼Œä¸éœ€è¦æˆ‘ä»¬äººä¸ºåŠ å¯†ï¼Œæˆ‘ä»¬åªéœ€è¦è¾“å…¥ç”¨æˆ·åå¯†ç å³å¯ï¼‰\n</div>\n\n- 5ï¸âƒ£ æœåŠ¡å™¨æ”¶åˆ°ä¸Šè¿°è¯·æ±‚ä¿¡æ¯åï¼Œå°† Authorization å­—æ®µåçš„ç”¨æˆ·ä¿¡æ¯å–å‡ºã€è§£å¯†ï¼Œå°†è§£å¯†åçš„ç”¨æˆ·ååŠå¯†ç ä¸ç”¨æˆ·æ•°æ®åº“è¿›è¡Œæ¯”è¾ƒéªŒè¯ï¼Œå¦‚ç”¨æˆ·ååŠå¯†ç æ­£ç¡®ï¼ŒæœåŠ¡å™¨åˆ™æ ¹æ®è¯·æ±‚ï¼Œå°†æ‰€è¯·æ±‚èµ„æºå‘é€ç»™å®¢æˆ·ç«¯ã€‚\n\nå®¢æˆ·ç«¯æœªæœªè®¤è¯çš„æ—¶å€™ï¼Œä¼šå¼¹å‡ºç”¨æˆ·åå¯†ç è¾“å…¥æ¡†ï¼Œè¿™ä¸ªæ—¶å€™è¯·æ±‚æ—¶å±äº pending çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™å…¶å®æœåŠ¡å½“ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå¯†ç çš„æ—¶å€™å®¢æˆ·ç«¯ä¼šå†æ¬¡å‘é€å¸¦ Authentication å¤´çš„è¯·æ±‚ã€‚\n\nè¯·æ±‚è®¤è¯ ğŸ‘‡\n![image](https://user-images.githubusercontent.com/15377484/48976178-136a0300-f0bd-11e8-9fd6-b2e67d22bbc6.png)\n\nè®¤è¯æˆåŠŸ ğŸ‘‡\n![image](https://user-images.githubusercontent.com/15377484/48976167-d1d95800-f0bc-11e8-80fa-35c636dbc103.png)\n\n#### å®Œæ•´ä»£ç \n\n**Server.js**\n\n```js\nlet express = require('express');\nlet app = express();\n\napp.use(express.static(__dirname + '/public'));\napp.get('/Authentication_base', function(req, res) {\n  console.log('req.headers.authorization:', req.headers);\n  if (!req.headers.authorization) {\n    res.set({\n      'WWW-Authenticate': 'Basic realm=\"wang\"'\n    });\n    res.status(401).end();\n  } else {\n    let base64 = req.headers.authorization.split(' ')[1];\n    let userPass = new Buffer(base64, 'base64').toString().split(':');\n    let user = userPass[0];\n    let pass = userPass[1];\n    if (user === 'wang' && pass === 'wang') {\n      res.end('OK');\n    } else {\n      res.status(401).end();\n    }\n  }\n});\n\napp.listen(9090);\n```\n\n**index.html**\n\n```html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\" />\n    <title>HTTP Basic Authentication</title>\n  </head>\n  <body>\n    <div></div>\n    <script src=\"js/jquery-3.2.1.js\"></script>\n    <script>\n      $(function() {\n        send('./Authentication_base');\n      });\n      var send = function(url) {\n        $.ajax({\n          url: url,\n          method: 'GET'\n        });\n      };\n    </script>\n  </body>\n</html>\n```\n\nå½“ç„¶æœ‰ç™»é™†å°±æœ‰æ³¨é”€ï¼Œæˆ‘ä»¬ä¼šå‘ç°å½“æˆ‘ä»¬è®¤è¯æˆåŠŸåæ¯æ¬¡è¯·æ±‚è¯·æ±‚å¤´éƒ½ä¼šå¸¦ä¸Š Authentication åŠé‡Œé¢çš„å†…å®¹ï¼Œé‚£ä¹ˆå¦‚ä½•åšåˆ°è®©è¿™æ¬¡ç™»é™†å¤±æ•ˆçš„ï¼Ÿ\n\nç½‘ä¸ŠæŸ¥äº†åŠå¤©ï¼Œç›®å‰æœ€æœ‰æ•ˆçš„æ–¹å¼å°±æ˜¯åœ¨æ³¨é”€æ“ä½œçš„æ—¶å€™ï¼Œä¸“é—¨åœ¨æœåŠ¡å™¨è®¾ç½®ä¸€ä¸ªä¸“é—¨çš„æ³¨é”€è´¦å·ï¼Œå½“æ¥æ”¶åˆ°çš„ Authentication ä¿¡æ¯ä¸ºæ³¨é”€ç”¨æˆ·åå¯†ç çš„æ—¶å€™çº å°±å¸¦ä¾¿æ³¨é”€æˆåŠŸäº†ï¼Œè€Œå®¢æˆ·ç«¯åœ¨æ³¨é”€æ“ä½œçš„æ—¶å€™ï¼Œæ‰‹åŠ¨çš„çš„å»ä¿®æ”¹è¯·æ±‚å¤´é‡çš„ Authenticationï¼Œå°†ä»–è®¾ç½®æœªæœåŠ¡å™¨é»˜è®¤çš„æ³¨é”€è´¦å·å’Œå¯†ç ã€‚\n\né€šè¿‡ä¸Šé¢çš„ç®€å•è®²è§£ å…¶å®æˆ‘ä»¬å·²ç»å¯ä»¥è¿”ç°è¿™ç§éªŒè¯æ–¹å¼çš„ç¼ºé™·åŠ å¯†æ–¹å¼ç®€å•ï¼Œä»…ä»…æ˜¯ base64 åŠ å¯†ï¼Œè¿™ç§åŠ å¯†æ–¹å¼æ˜¯å¯é€†çš„ã€‚åŒæ—¶åœ¨æ¯ä¸ªè¯·æ±‚çš„å¤´ä¸Šéƒ½ä¼šé™„å¸¦ä¸Šç”¨æˆ·åå’Œå¯†ç ä¿¡æ¯ï¼Œè¿™æ ·åœ¨å¤–ç½‘æ˜¯å¾ˆå®¹æ˜“è¢«å—…æ¢å™¨æ¢æµ‹åˆ°çš„ã€‚\n\næ­£å¼å› ä¸ºè¿™æ ·ï¼Œè¿™ç§åŠ å¯†æ–¹å¼ä¸€èˆ¬å¤šè¢«ç”¨åœ¨å†…éƒ¨å®‰å…¨æ€§è¦æ±‚ä¸é«˜çš„çš„ç³»ç»Ÿä¸Šï¼Œåªæ˜¯ç›¸å¯¹çš„å¤šï¼Œæ€»çš„æ¥è¯´ç°åœ¨ä½¿ç”¨è¿™ç§é‰´æƒæ¯”è¾ƒå°‘äº†ã€‚å¦‚æœé¡¹ç›®éœ€è¦éƒ¨ç½²åœ¨å…¬ç½‘ä¸Šï¼Œè¿™ç§æ–¹å¼ä¸æ¨èï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å’Œ SSL æ¥åŠ å¯†ä¼ è¾“ï¼Œè¿™æ ·ä¼šå¥½ä¸€ç‚¹ï¼Œè¿™ä¸ªå¦‚æœæˆ‘åé¢æœ‰æ—¶é—´æ¥ç ”ç©¶ä¸€ä¸‹ã€‚\n\n### Session-cookie\n\nç¬¬äºŒç§è¿™ä¸ªæ–¹å¼æ˜¯åˆ©ç”¨æœåŠ¡å™¨ç«¯çš„ sessionï¼ˆä¼šè¯ï¼‰å’Œæµè§ˆå™¨ç«¯çš„ cookie æ¥å®ç°å‰åç«¯çš„è®¤è¯ï¼Œç”±äº http è¯·æ±‚æ—¶æ˜¯æ— çŠ¶æ€çš„ï¼ŒæœåŠ¡å™¨æ­£å¸¸æƒ…å†µä¸‹æ˜¯ä¸çŸ¥é“å½“å‰è¯·æ±‚ä¹‹å‰æœ‰æ²¡æœ‰æ¥è¿‡ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¦‚æœè¦è®°å½•çŠ¶æ€ï¼Œå°±éœ€è¦åœ¨æœåŠ¡å™¨ç«¯åˆ›å»ºä¸€ä¸ªä¼šè¯ (seesion), å°†åŒä¸€ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚éƒ½ç»´æŠ¤åœ¨å„è‡ªå¾—ä¼šä¼šè¯ä¸­ï¼Œæ¯å½“è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨ç«¯çš„æ—¶å€™ï¼Œå…ˆå»æŸ¥ä¸€ä¸‹è¯¥å®¢æˆ·ç«¯æœ‰æ²¡æœ‰åœ¨æœåŠ¡å™¨ç«¯åˆ›å»º seesionï¼Œå¦‚æœæœ‰åˆ™å·²ç»è®¤è¯æˆåŠŸäº†ï¼Œå¦åˆ™å°±æ²¡æœ‰è®¤è¯ã€‚\n\n#### è®¤è¯è¿‡ç¨‹\n\n1. æœåŠ¡å™¨åœ¨æ¥å—å®¢æˆ·ç«¯é¦–æ¬¡è®¿é—®æ—¶åœ¨æœåŠ¡å™¨ç«¯åˆ›å»º seesionï¼Œç„¶åä¿å­˜ seesionï¼ˆæˆ‘ä»¬å¯ä»¥å°† seesion ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä¹Ÿå¯ä»¥ä¿å­˜åœ¨ redis ä¸­ï¼Œæ¨èä½¿ç”¨åè€…ï¼‰ï¼Œç„¶åç»™è¿™ä¸ª session ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†å­—ç¬¦ä¸², ç„¶ååœ¨å“åº”å¤´ä¸­ç§ä¸‹è¿™ä¸ªå”¯ä¸€æ ‡è¯†å­—ç¬¦ä¸²ã€‚\n2. ç­¾åã€‚è¿™ä¸€æ­¥åªæ˜¯å¯¹ sid è¿›è¡ŒåŠ å¯†å¤„ç†ï¼ŒæœåŠ¡ç«¯ä¼šæ ¹æ®è¿™ä¸ª secret å¯†é’¥è¿›è¡Œè§£å¯†ã€‚ï¼ˆéå¿…éœ€æ­¥éª¤ï¼‰\n3. æµè§ˆå™¨ä¸­æ”¶åˆ°è¯·æ±‚å“åº”çš„æ—¶å€™ä¼šè§£æå“åº”å¤´ï¼Œç„¶åå°† sid ä¿å­˜åœ¨æœ¬åœ° cookie ä¸­ï¼Œæµè§ˆå™¨åœ¨ä¸‹æ¬¡ http è¯·æ±‚çš„è¯·æ±‚å¤´ä¸­ä¼šå¸¦ä¸Šè¯¥åŸŸåä¸‹çš„ cookie ä¿¡æ¯ã€‚\n4. æœåŠ¡å™¨åœ¨æ¥å—å®¢æˆ·ç«¯è¯·æ±‚æ—¶ä¼šå»è§£æè¯·æ±‚å¤´ cookie ä¸­çš„ sidï¼Œç„¶åæ ¹æ®è¿™ä¸ª sid å»æ‰¾æœåŠ¡å™¨ç«¯ä¿å­˜çš„è¯¥å®¢æˆ·ç«¯çš„ sessionï¼Œç„¶ååˆ¤æ–­è¯¥è¯·æ±‚æ˜¯å¦åˆæ³•ã€‚\n\n![](https://user-images.githubusercontent.com/15377484/38019076-382f84f8-32a9-11e8-9c5d-ef47b58185ad.png)\n\n#### å®Œæ•´ä»£ç \n\n**server.js**\n\n```js\nvar express = require('express');\nvar RedisStore = require('connect-redis')(express.session);\nvar app = express();\nvar secret = 'ifyour';\n// è®¾ç½® Cookie\napp.use(express.cookieParser(secret));\n\n// è®¾ç½® Session\napp.use(\n  express.session({\n    store: new RedisStore({\n      host: '127.0.0.1',\n      port: 6379,\n      db: 'session_db'\n    }),\n    secret: secret\n  })\n);\n\napp.get('/', function(req, res) {\n  var session = req.session;\n  session.time = session.time || 0;\n  var n = session.time++;\n  res.send('hello, session id:' + session.id + 'count:' + n);\n});\n\napp.listen(9080);\n```\n\n### Token éªŒè¯\n\n#### è®¤è¯è¿‡ç¨‹\n\n1. å®¢æˆ·ç«¯ä½¿ç”¨ç”¨æˆ·åè·Ÿå¯†ç è¯·æ±‚ç™»å½•\n2. æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œå»éªŒè¯ç”¨æˆ·åä¸å¯†ç \n3. éªŒè¯æˆåŠŸåï¼ŒæœåŠ¡ç«¯ä¼šç­¾å‘ä¸€ä¸ª Tokenï¼Œå†æŠŠè¿™ä¸ª Token å‘é€ç»™å®¢æˆ·ç«¯\n4. å®¢æˆ·ç«¯æ”¶åˆ° Token ä»¥åå¯ä»¥æŠŠå®ƒå­˜å‚¨èµ·æ¥ï¼Œæ¯”å¦‚æ”¾åœ¨ Cookie é‡Œæˆ–è€… LocalStorage é‡Œ\n5. å®¢æˆ·ç«¯æ¯æ¬¡å‘æœåŠ¡ç«¯è¯·æ±‚èµ„æºçš„æ—¶å€™éœ€è¦å¸¦ç€æœåŠ¡ç«¯ç­¾å‘çš„ Token\n6. æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œç„¶åå»éªŒè¯å®¢æˆ·ç«¯è¯·æ±‚é‡Œé¢å¸¦ç€çš„ Tokenï¼Œå¦‚æœéªŒè¯æˆåŠŸï¼Œå°±å‘å®¢æˆ·ç«¯è¿”å›è¯·æ±‚çš„æ•°æ®\n\næ€»çš„æ¥è¯´å°±æ˜¯å®¢æˆ·ç«¯åœ¨é¦–æ¬¡ç™»é™†ä»¥åï¼ŒæœåŠ¡ç«¯å†æ¬¡æ¥æ”¶ http è¯·æ±‚çš„æ—¶å€™ï¼Œå°±åªè®¤ token äº†ï¼Œè¯·æ±‚åªè¦æ¯æ¬¡æŠŠ token å¸¦ä¸Šå°±è¡Œäº†ï¼ŒæœåŠ¡å™¨ç«¯ä¼šæ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚ï¼Œç„¶åæ ¡éªŒ token çš„åˆæ³•æ€§ï¼Œåˆæ³•å°±æ”¾è¡Œï¼Œä¸åˆæ³•å°±è¿”å› 401ï¼ˆé‰´æƒå¤±è´¥ï¼‰ã€‚\n\nä¹çš„ä¸€çœ‹å¥½åƒå’Œå‰é¢çš„ seesion-cookie æœ‰ç‚¹åƒï¼Œseesion-cookie æ˜¯é€šè¿‡ seesionid æ¥ä½œä¸ºæµè§ˆå™¨å’ŒæœåŠ¡ç«¯çš„é“¾æ¥æ¡¥æ¢ï¼Œè€Œ token éªŒè¯æ–¹å¼è²Œä¼¼æ˜¯ token æ¥èµ·åˆ° seesionid çš„è§’è‰²ã€‚å…¶å®è¿™ä¸¤è€…å·®åˆ«æ˜¯å¾ˆå¤§çš„ã€‚\n\n#### ä¸ seesion-cookie çš„åŒºåˆ«\n\n1. sessionid æ˜¯ä¸€ä¸ªå”¯ä¸€æ ‡è¯†çš„å­—ç¬¦ä¸²ï¼ŒæœåŠ¡ç«¯æ˜¯æ ¹æ®è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæ¥æŸ¥è¯¢åœ¨æœåŠ¡å™¨ç«¯ä¿æŒçš„ seesionï¼Œè¿™é‡Œé¢æ‰ä¿å­˜ç€ç”¨æˆ·çš„ç™»é™†çŠ¶æ€ã€‚ä½†æ˜¯ token æœ¬èº«å°±æ˜¯ä¸€ç§ç™»é™†æˆåŠŸå‡­è¯ï¼Œä»–æ˜¯åœ¨ç™»é™†æˆåŠŸåæ ¹æ®æŸç§è§„åˆ™ç”Ÿæˆçš„ä¸€ç§ä¿¡æ¯å‡­è¯ï¼Œä»–é‡Œé¢æœ¬èº«å°±ä¿å­˜ç€ç”¨æˆ·çš„ç™»é™†çŠ¶æ€ã€‚æœåŠ¡å™¨ç«¯åªéœ€è¦æ ¹æ®å®šä¹‰çš„è§„åˆ™æ ¡éªŒè¿™ä¸ª token æ˜¯å¦åˆæ³•å°±è¡Œã€‚\n2. session-cookie æ˜¯éœ€è¦ cookie é…åˆçš„ï¼Œå±…ç„¶è¦ cookieï¼Œé‚£ä¹ˆåœ¨ http ä»£ç†å®¢æˆ·ç«¯çš„é€‰æ‹©ä¸Šå°±æ˜¯åªæœ‰æµè§ˆå™¨äº†ï¼Œå› ä¸ºåªæœ‰æµè§ˆå™¨æ‰ä¼šå»è§£æè¯·æ±‚å“åº”å¤´é‡Œé¢çš„ cookie, ç„¶åæ¯æ¬¡è¯·æ±‚å†é»˜è®¤å¸¦ä¸Šè¯¥åŸŸåä¸‹çš„ cookieã€‚ä½†æ˜¯æˆ‘ä»¬çŸ¥é“ http ä»£ç†å®¢æˆ·ç«¯ä¸åªæœ‰æµè§ˆå™¨ï¼Œè¿˜æœ‰åŸç”Ÿ APP ç­‰ç­‰ï¼Œè¿™ä¸ªæ—¶å€™ cookie æ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œæˆ–è€…æµè§ˆå™¨ç«¯æ˜¯å¯ä»¥ç¦æ­¢ cookie çš„ (è™½ç„¶å¯ä»¥ï¼Œä½†æ˜¯è¿™åŸºæœ¬ä¸Šæ˜¯å±äºåƒé¥±æ²¡äº‹å¹²çš„äººå¹²çš„äº‹)ï¼Œä½†æ˜¯ token å°±ä¸ä¸€æ ·ï¼Œä»–æ˜¯ç™»é™†è¯·æ±‚åœ¨ç™»é™†æˆåŠŸåå†è¯·æ±‚å“åº”ä½“ä¸­è¿”å›çš„ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯åœ¨æ”¶åˆ°å“åº”çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠä»–å­˜åœ¨æœ¬åœ°çš„ cookieã€storageï¼Œæˆ–è€…å†…å­˜ä¸­ï¼Œç„¶åå†ä¸‹ä¸€æ¬¡è¯·æ±‚çš„è¯·æ±‚å¤´é‡å¸¦ä¸Šè¿™ä¸ª token å°±è¡Œäº†ã€‚ç®€å•ç‚¹æ¥è¯´ cookie-session æœºåˆ¶ä»–é™åˆ¶äº†å®¢æˆ·ç«¯çš„ç±»å‹ï¼Œè€Œ token éªŒè¯æœºåˆ¶ä¸°å¯Œäº†å®¢æˆ·ç«¯ç±»å‹ã€‚\n3. æ—¶æ•ˆæ€§ã€‚session-cookie çš„ sessionid æ˜¯åœ¨ç™»é™†æ—¶ç”Ÿæˆçš„ï¼Œè€Œä¸”åœ¨ç™»å‡ºæ—¶ä¸€ç›´ä¸å˜ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå®‰å…¨æ€§å°±ä¼šé™ä½ï¼Œè€Œ token æ˜¯å¯ä»¥åœ¨ä¸€æ®µæ—¶é—´å†…åŠ¨æ€æ”¹å˜çš„ã€‚\n4. å¯æ‰©å±•æ€§ã€‚token éªŒè¯æœ¬èº«æ˜¯æ¯”è¾ƒçµæ´»çš„ï¼Œä¸€æ˜¯ token çš„è§£å†³æ–¹æ¡ˆæœ‰è®¸å¤šï¼Œå¸¸ç”¨çš„æ˜¯ JWTï¼ŒäºŒæ¥æˆ‘ä»¬å¯ä»¥åŸºäº token éªŒè¯æœºåˆ¶ï¼Œä¸“é—¨åšä¸€ä¸ªé‰´æƒæœåŠ¡ï¼Œç”¨å®ƒå‘å¤šä¸ªæœåŠ¡çš„è¯·æ±‚è¿›è¡Œç»Ÿä¸€é‰´æƒã€‚\n\nä¸‹é¢å°±æ‹¿æœ€å¸¸ç”¨çš„ JWTï¼ˆJSON WEB TOKENï¼‰æ¥è¯´ï¼š\n\nJWT æ˜¯ Auth0 æå‡ºçš„é€šè¿‡å¯¹ JSON è¿›è¡ŒåŠ å¯†ç­¾åæ¥å®ç°æˆæƒéªŒè¯çš„æ–¹æ¡ˆï¼Œå°±æ˜¯ç™»é™†æˆåŠŸåå°†ç›¸å…³ä¿¡æ¯ç»„æˆ json å¯¹è±¡ï¼Œç„¶åå¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡ŒæŸä¸­æ–¹å¼çš„åŠ å¯†ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯åœ¨ä¸‹æ¬¡è¯·æ±‚æ—¶å¸¦ä¸Šè¿™ä¸ª tokenï¼ŒæœåŠ¡ç«¯å†æ”¶åˆ°è¯·æ±‚æ—¶æ ¡éªŒ token åˆæ³•æ€§ï¼Œå…¶å®ä¹Ÿå°±æ˜¯åœ¨æ ¡éªŒè¯·æ±‚çš„åˆæ³•æ€§ã€‚JWT å¯¹è±¡é€šå¸¸ç”±ä¸‰éƒ¨åˆ†æ„æˆï¼š\n\n1ï¸âƒ£ Headersï¼š åŒ…æ‹¬ç±»åˆ«ï¼ˆtypï¼‰ã€åŠ å¯†ç®—æ³•ï¼ˆalgï¼‰\n\n```json\n{\n  \"alg\": \"HS256\",\n  \"typ\": \"JWT\"\n}\n```\n\n2ï¸âƒ£ Claimsï¼šåŒ…æ‹¬éœ€è¦ä¼ é€’çš„ç”¨æˆ·ä¿¡æ¯\n\n```json\n{\n  \"sub\": \"1234567890\",\n  \"name\": \"John Doe\",\n  \"admin\": true\n}\n```\n\n3ï¸âƒ£ Signatureï¼šæ ¹æ® alg ç®—æ³•ä¸ç§æœ‰ç§˜é’¥è¿›è¡ŒåŠ å¯†å¾—åˆ°çš„ç­¾åå­—ä¸²ï¼Œè¿™ä¸€æ®µæ˜¯æœ€é‡è¦çš„æ•æ„Ÿä¿¡æ¯ï¼Œåªèƒ½åœ¨æœåŠ¡ç«¯è§£å¯†\n\n```text\nHMACSHA256(\n  base64UrlEncode(Headers) + '.' + base64UrlEncode(Claims),\n  SECREATE_KEY\n);\n```\n\nç¼–ç ä¹‹åçš„ JWT çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ä¸€ä¸²å­—ç¬¦ï¼š\n\n```text\neyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ\n```\n\n#### å®Œæ•´ä»£ç \n\n**auth.js**\n\n```js\nlet jwt = require('jwt-simple');\nlet secret = 'wangyy';\nlet time = 10;\nmodule.exports = {\n  /* æ£€éªŒ token åˆæ³•æ€§ */\n  validate: function(req, res, next) {\n    let token = req.body.token || req.headers['xssToken'];\n    if (token) {\n      let decodeToken = null;\n      try {\n        // é˜²æ­¢å‡å†’ token è§£ææŠ¥é”™\n        decodeToken = jwt.decode(token, secret, 'HS256');\n      } catch (err) {\n        res.status(401).send('éæ³•è®¿é—®');\n        return;\n      }\n      let exp = decodeToken.exp;\n      if (!exp) {\n        res.status(401).send('éæ³•è®¿é—®');\n      }\n      let now = new Date().getTime();\n      if (exp > now + time * 60 * 1000) {\n        res.send({ code: '002', errorMsg: 'æˆæƒè¶…æ—¶' });\n      }\n      next();\n    } else {\n      res.status(401).send('éæ³•è®¿é—®');\n    }\n  },\n  /* ç”Ÿæˆ token*/\n  makeToken() {\n    let Token = null;\n    let payload = {\n      time: new Date().getTime(),\n      exp: this.makeExp(time)\n    };\n    Token = jwt.encode(payload, secret, HS256);\n    return Token;\n  },\n  /* ç”Ÿæˆ token è¿‡æœŸæ—¶é—´ */\n  makeExp: function(time) {\n    let stam = time601000;\n  }\n};\n```\n\n**Server.js**\n\n```js\nlet express = require('express');\nlet app = express();\nlet bodyParser = require('body-parser');\nlet auth = require('./lib/auth.js');\nlet chalk = require('chalk');\n\napp.use(bodyParser.json());\napp.post('/login', function(req, res, next) {\n  let Token = auth.makeToken();\n  res.json({ result: 'success', token: Token }, 200);\n});\napp.use('*', [auth.validate], function(req, res, next) {\n  res.send('success');\n});\n\napp.listen('9999');\n```\n\n### OAuth(å¼€æ”¾æˆæƒ)\n\nOAuthï¼ˆå¼€æ”¾æˆæƒï¼‰æ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œå…è®¸ç”¨æˆ·æˆæƒç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®ä»–ä»¬å­˜å‚¨åœ¨å¦å¤–çš„æœåŠ¡æä¾›è€…ä¸Šçš„ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦å°†ç”¨æˆ·åå’Œå¯†ç æä¾›ç»™ç¬¬ä¸‰æ–¹ç½‘ç«™æˆ–åˆ†äº«ä»–ä»¬æ•°æ®çš„æ‰€æœ‰å†…å®¹ï¼Œä¸ºäº†ä¿æŠ¤ç”¨æˆ·æ•°æ®çš„å®‰å…¨å’Œéšç§ï¼Œç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®ç”¨æˆ·æ•°æ®å‰éƒ½éœ€è¦æ˜¾å¼çš„å‘ç”¨æˆ·å¾æ±‚æˆæƒã€‚æˆ‘ä»¬å¸¸è§çš„æä¾› OAuth è®¤è¯æœåŠ¡çš„å‚å•†æœ‰æ”¯ä»˜å®ã€QQã€å¾®ä¿¡ã€‚\n\nOAuth åè®®åˆæœ‰ 1.0 å’Œ 2.0 ä¸¤ä¸ªç‰ˆæœ¬ã€‚ç›¸æ¯”è¾ƒ 1.0 ç‰ˆï¼Œ2.0 ç‰ˆæ•´ä¸ªæˆæƒéªŒè¯æµç¨‹æ›´ç®€å•æ›´å®‰å…¨ï¼Œä¹Ÿæ˜¯ç›®å‰æœ€ä¸»è¦çš„ç”¨æˆ·èº«ä»½éªŒè¯å’Œæˆæƒæ–¹å¼ã€‚\n\n#### è®¤è¯è¿‡ç¨‹\n\nä¸‹é¢æ˜¯ä¸€å¼  Auth2.0 çš„æµç¨‹å›¾ï¼š\n\n![image](https://user-images.githubusercontent.com/15377484/48976006-b7ea4600-f0b9-11e8-8f94-1102761320b0.png)\n\nä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒAuth2.0 æµç¨‹åˆ†ä¸ºå…­æ­¥ï¼š\n\n1ï¸âƒ£ å‘ç”¨æˆ·è¯·æ±‚æˆæƒï¼Œç°åœ¨å¾ˆå¤šçš„ç½‘ç«™åœ¨ç™»é™†çš„æ—¶å€™éƒ½æœ‰ç¬¬ä¸‰æ–¹ç™»é™†çš„å…¥å£ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»ç­‰ç¬¬ä¸‰æ–¹å…¥å£æ—¶ï¼Œç¬¬ä¸‰æ–¹æˆæƒæœåŠ¡ä¼šå¼•å¯¼æˆ‘ä»¬è¿›å…¥ç¬¬ä¸‰æ–¹ç™»é™†æˆæƒé¡µé¢ã€‚\n\n![image](https://user-images.githubusercontent.com/15377484/48976180-35638580-f0bd-11e8-9c0a-c6aee6bf7da5.png)\n\né€šè¿‡ç¬¬ä¸‰æ–¹è¯·æ±‚æˆæƒé¡µé¢çš„æµè§ˆå™¨åœ°å€æ åœ°å€å¯ä»¥çœ‹å‡ºï¼š\n\n```text\nhttps://graph.qq.com/oauth2.0/show?which=Login&display=pc&response_type=code&client_id=100270989&redirect_uri=https%3A%2F%2Fpassport.csdn.net%2Faccount%2Flogin%3Foauth_provider%3DQQProvider&state=test\n```\n\nè¿™é‡Œçš„åœ°å€é‡Œé¢çš„ `%` æ˜¯æµè§ˆå™¨å¼ºåˆ¶ç¼–ç åçš„æ˜¾ç¤ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `decodeURIComponent` è¿›è¡Œè§£ç ï¼Œè§£ç åæ˜¯è¿™æ ·ï¼š\n\n```text\nhttps://graph.qq.com/oauth2.0/show?which=Login&display=pc&response_type=code&client_id=100270989&redirect_uri=https://passport.csdn.net/account/login?oauth_provider=QQProvider&state=test\n```\n\nè¿™ä¸ª url åœ°å€æˆ‘ä»¬å¯ä»¥çœ‹è§ Auth2.0 å¸¸è§çš„å‡ ä¸ªå‚æ•°ï¼š\n\n```text\nresponse_type:  è¿”å›ç±»å‹\nclient_id:      ç¬¬ä¸‰æ–¹åº”ç”¨ id, ç”±æˆæƒæœåŠ¡å™¨ï¼ˆqqï¼‰åœ¨ç¬¬ä¸‰æ–¹åº”ç”¨æäº¤æ—¶é¢å‘ç»™ç¬¬ä¸‰æ–¹åº”ç”¨ã€‚\nredirect_uri:   ç™»é™†æˆåŠŸé‡å®šå‘é¡µé¢\noauth_provider: ç¬¬ä¸‰æ–¹æˆæƒæä¾›æ–¹\nstate:          ç”±ç¬¬ä¸‰æ–¹åº”ç”¨ç»™å‡ºçš„éšæœºç \n```\n\n2ï¸âƒ£ è¿”å›ç”¨æˆ·å‡­è¯ï¼ˆcodeï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªå‡­è¯ï¼ˆcodeï¼‰ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æˆæƒå¹¶ç™»é™†åï¼ŒæˆæƒæœåŠ¡å™¨å°†ç”Ÿæˆä¸€ä¸ªç”¨æˆ·å‡­è¯ï¼ˆcodeï¼‰ã€‚è¿™ä¸ªç”¨æˆ·å‡­è¯ä¼šé™„åŠ åœ¨é‡å®šå‘çš„åœ°å€ `redirect_uri` çš„åé¢\n\n```text\nhttps://passport.csdn.net/account/login?code=9e3efa6cea739f9aaab2&state=XXX\n```\n\n3ï¸âƒ£ è¯·æ±‚æˆæƒæœåŠ¡å™¨æˆæƒ\n\nç»è¿‡ç¬¬äºŒéƒ¨è·å– code ååé¢çš„å·¥ä½œå°±å¯ä»¥äº¤ç»™åå°å»å¤„ç†çš„ï¼Œå’Œç”¨æˆ·çš„äº¤äº’å°±ç»“æŸäº†ã€‚æ¥ä¸‹æ¥æˆ‘çš„éœ€è¦è·å–å‡­è¯ï¼ˆAccess Tokenï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä»–æ¥å‘æˆæƒæœåŠ¡å™¨è·å–ç”¨æˆ·ä¿¡æ¯ç­‰èµ„æºã€‚ ç¬¬ä¸‰æ–¹åº”ç”¨åå°é€šè¿‡ç¬¬äºŒæ­¥çš„å‡­è¯ï¼ˆcodeï¼‰å‘æˆæƒæœåŠ¡å™¨è¯·æ±‚å‡­è¯ï¼ˆAccess Tokenï¼‰ï¼Œè¿™æ—¶å€™éœ€è¦ä»¥ä¸‹å‡ ä¸ªä¿¡æ¯ï¼š\n\n- `client_id`: æ ‡è¯†ç¬¬ä¸‰æ–¹åº”ç”¨çš„ idï¼Œç”±æˆæƒæœåŠ¡å™¨åœ¨ç¬¬ä¸‰æ–¹åº”ç”¨æäº¤æ—¶é¢å‘ç»™ç¬¬ä¸‰æ–¹åº”ç”¨\n- `client_secret`: ç¬¬ä¸‰æ–¹åº”ç”¨å’ŒæˆæƒæœåŠ¡å™¨ä¹‹é—´çš„å®‰å…¨å‡­è¯ï¼Œç”±æˆæƒæœåŠ¡å™¨åœ¨ç¬¬ä¸‰æ–¹åº”ç”¨æäº¤æ—¶é¢å‘ç»™ç¬¬ä¸‰æ–¹åº”ç”¨\n- `code`: ç¬¬ä¸€æ­¥ä¸­è¿”å›çš„ç”¨æˆ·å‡­è¯ `redirect_uri` ç¬¬ä¸€æ­¥ç”Ÿæˆç”¨æˆ·å‡­è¯åè·³è½¬åˆ°ç¬¬äºŒæ­¥æ—¶çš„åœ°å€\n- `state`: ç”±ç¬¬ä¸‰æ–¹åº”ç”¨ç»™å‡ºçš„éšæœºç \n\n4ï¸âƒ£ æˆæƒæœåŠ¡å™¨åŒæ„æˆæƒåï¼Œè¿”å›ä¸€ä¸ªèµ„æºè®¿é—®çš„å‡­è¯ï¼ˆAccess Tokenï¼‰ã€‚\n\n5ï¸âƒ£ ç¬¬ä¸‰æ–¹åº”ç”¨é€šè¿‡ç¬¬å››æ­¥çš„å‡­è¯ï¼ˆAccess Tokenï¼‰å‘èµ„æºæœåŠ¡å™¨è¯·æ±‚ç›¸å…³èµ„æºã€‚\n\n6ï¸âƒ£ èµ„æºæœåŠ¡å™¨éªŒè¯å‡­è¯ï¼ˆAccess Tokenï¼‰é€šè¿‡åï¼Œå°†ç¬¬ä¸‰æ–¹åº”ç”¨è¯·æ±‚çš„èµ„æºè¿”å›ã€‚\n\nä»ç”¨æˆ·è§’åº¦æ¥è¯´ï¼Œç¬¬ä¸‰æ–¹æˆæƒå¯ä»¥è®©æˆ‘ä»¬å¿«é€Ÿçš„ç™»é™†åº”ç”¨ï¼Œæ— éœ€è¿›è¡Œç¹ççš„æ³¨å†Œï¼ŒåŒæ—¶ä¸ç”¨è®°ä½å„ç§è´¦å·å¯†ç ã€‚åªéœ€è¦è®°ä½è‡ªå·±å¸¸ç”¨çš„å‡ ä¸ªè´¦å·å°± OK äº†ã€‚ ä»äº§å“ç»ç†çš„è§’åº¦æ¥æ‰€ï¼Œè¿™ç§æˆæƒæ–¹å¼æé«˜ç”¨æˆ·çš„ä½“éªŒæ»¡æ„åº¦ã€‚å¦ä¸€æ–¹é¢å¯ä»¥è·å–æ›´å¤šçš„ç”¨æˆ·ã€‚\n\n### æ€»ç»“\n\næˆæƒæ–¹å¼å¤šç§å¤šæ ·ï¼Œä¸»è¦è¿˜æ˜¯è¦å–å†³äºæˆ‘ä»¬å¯¹äºäº§å“çš„å®šä½ã€‚å¦‚æœæˆ‘ä»¬çš„äº§å“åªæ˜¯åœ¨ä¼ä¸šå†…éƒ¨ä½¿ç”¨ï¼ŒToken å’Œ Session-cookie å°±å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œå¦‚æœæ˜¯é¢å‘äº’è”ç½‘çš„å¤§ä¼—ç”¨æˆ·ï¼Œé‚£ä¹ˆç¬¬ä¸‰æ–¹æˆæƒ OAuth åœ¨ç”¨æˆ·ä½“éªŒåº¦ä¸Šä¼šæœ‰ä¸€ä¸ªå¾ˆå¤§çš„æå‡ã€‚\n","slug":"å‰åç«¯é‰´æƒæ–¹å¼æ€»ç»“","published":1,"updated":"2019-12-07T04:53:18.095Z","layout":"post","photos":[],"link":"","_id":"ck3v60jtl000nr9q9k1oinjt1","content":"<p>ä»Šå¤©æ¥å­¦ä¹ ä¸‹å¸¸è§çš„é‰´æƒæ–¹å¼ï¼Œä»æœ€å¼€å§‹äº†è§£çš„æœ€ç®€å•çš„ Cookie éªŒè¯ï¼Œåˆ°åæ¥çš„ Session-cookieã€Token ç­‰ï¼Œæ•´ä½“æ¥è¯´ï¼Œå®‰å…¨æ€§è¶Šæ¥è¶Šé«˜ã€‚å½“ç„¶è¿˜æ˜¯å¯¹éƒ¨åˆ†æ–¹å¼äº†è§£ä¸æ˜¯å¾ˆæ·±ï¼Œè¿™é‡Œåšä¸ªç®€å•æ€»ç»“ï¼ŒæŸ¥æ¼è¡¥ç¼ºã€‚</p>\n<a id=\"more\"></a>\n<p>ç›®å‰æˆ‘ä»¬å¸¸ç”¨çš„é‰´æƒæœ‰å››ç§ï¼š</p>\n<ol>\n<li>HTTP Basic Authentication</li>\n<li>Session-cookie</li>\n<li>Token éªŒè¯</li>\n<li>OAuth(å¼€æ”¾æˆæƒ)</li>\n</ol>\n<h3 id=\"HTTP-Basic-Authentication\"><a href=\"#HTTP-Basic-Authentication\" class=\"headerlink\" title=\"HTTP Basic Authentication\"></a>HTTP Basic Authentication</h3><p>è¿™ç§æˆæƒæ–¹å¼æ˜¯æµè§ˆå™¨éµå®ˆ HTTP åè®®å®ç°çš„åŸºæœ¬æˆæƒæ–¹å¼ï¼ŒHTTP åè®®è¿›è¡Œé€šä¿¡çš„è¿‡ç¨‹ä¸­ï¼ŒHTTP åè®®å®šä¹‰äº†åŸºæœ¬è®¤è¯è®¤è¯å…è®¸ HTTP æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯è¿›è¡Œç”¨æˆ·èº«ä»½è¯çš„æ–¹æ³•ã€‚</p>\n<h4 id=\"è®¤è¯è¿‡ç¨‹\"><a href=\"#è®¤è¯è¿‡ç¨‹\" class=\"headerlink\" title=\"è®¤è¯è¿‡ç¨‹\"></a>è®¤è¯è¿‡ç¨‹</h4><ul>\n<li>1ï¸âƒ£ å®¢æˆ·ç«¯å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ï¼Œè¯·æ±‚çš„å†…å®¹å¯èƒ½æ˜¯ä¸€ä¸ªç½‘é¡µæˆ–è€…æ˜¯ä¸€ä¸ª ajax å¼‚æ­¥è¯·æ±‚ï¼Œæ­¤æ—¶ï¼Œå‡è®¾å®¢æˆ·ç«¯å°šæœªè¢«éªŒè¯ï¼Œåˆ™å®¢æˆ·ç«¯æä¾›å¦‚ä¸‹è¯·æ±‚è‡³æœåŠ¡å™¨ï¼š</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Get /index.html HTTP/1.0</span><br><span class=\"line\">Host:www.google.com</span><br></pre></td></tr></table></figure>\n<ul>\n<li>2ï¸âƒ£ æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€éªŒè¯è¯·æ±‚ä»£ç  401ï¼Œ(<code>WWW-Authenticate: Basic realm=&quot;google.com&quot;</code> è¿™å¥è¯æ˜¯å…³é”®ï¼Œå¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯ä¸ä¼šå¼¹å‡ºç”¨æˆ·åå’Œå¯†ç è¾“å…¥ç•Œé¢ï¼‰æœåŠ¡å™¨è¿”å›çš„æ•°æ®å¦‚ä¸‹ï¼š</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HTTP/1.0 401 Unauthorised</span><br><span class=\"line\">Server: SokEvo/1.0</span><br><span class=\"line\">WWW-Authenticate: Basic realm=&quot;google.com&quot;</span><br><span class=\"line\">Content-Type: text/html</span><br><span class=\"line\">Content-Length: xxx</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>3ï¸âƒ£ å½“ç¬¦åˆ http1.0 æˆ– 1.1 è§„èŒƒçš„å®¢æˆ·ç«¯ï¼ˆå¦‚ IEï¼ŒFIREFOXï¼‰æ”¶åˆ° 401 è¿”å›å€¼æ—¶ï¼Œå°†è‡ªåŠ¨å¼¹å‡ºä¸€ä¸ªç™»å½•çª—å£ï¼Œè¦æ±‚ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚</p>\n</li>\n<li><p>4ï¸âƒ£ ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç åï¼Œå°†ç”¨æˆ·ååŠå¯†ç ä»¥ BASE64 åŠ å¯†æ–¹å¼åŠ å¯†ï¼Œå¹¶å°†å¯†æ–‡æ”¾å…¥å‰ä¸€æ¡è¯·æ±‚ä¿¡æ¯ä¸­ï¼Œåˆ™å®¢æˆ·ç«¯å‘é€çš„ç¬¬ä¸€æ¡è¯·æ±‚ä¿¡æ¯åˆ™å˜æˆå¦‚ä¸‹å†…å®¹ï¼š</p>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Get /index.html HTTP/1.0</span><br><span class=\"line\">Host:www.google.com</span><br><span class=\"line\">Authorization: Basic d2FuZzp3YW5n</span><br></pre></td></tr></table></figure>\n<div class=\"tip\"><br><code>d2FuZzp3YW5n</code> è¡¨ç¤ºåŠ å¯†åçš„ç”¨æˆ·ååŠå¯†ç ï¼ˆç”¨æˆ·åï¼šå¯†ç  ç„¶åé€šè¿‡ base64 åŠ å¯†ï¼ŒåŠ å¯†è¿‡ç¨‹æ˜¯æµè§ˆå™¨é»˜è®¤çš„è¡Œä¸ºï¼Œä¸éœ€è¦æˆ‘ä»¬äººä¸ºåŠ å¯†ï¼Œæˆ‘ä»¬åªéœ€è¦è¾“å…¥ç”¨æˆ·åå¯†ç å³å¯ï¼‰<br></div>\n\n<ul>\n<li>5ï¸âƒ£ æœåŠ¡å™¨æ”¶åˆ°ä¸Šè¿°è¯·æ±‚ä¿¡æ¯åï¼Œå°† Authorization å­—æ®µåçš„ç”¨æˆ·ä¿¡æ¯å–å‡ºã€è§£å¯†ï¼Œå°†è§£å¯†åçš„ç”¨æˆ·ååŠå¯†ç ä¸ç”¨æˆ·æ•°æ®åº“è¿›è¡Œæ¯”è¾ƒéªŒè¯ï¼Œå¦‚ç”¨æˆ·ååŠå¯†ç æ­£ç¡®ï¼ŒæœåŠ¡å™¨åˆ™æ ¹æ®è¯·æ±‚ï¼Œå°†æ‰€è¯·æ±‚èµ„æºå‘é€ç»™å®¢æˆ·ç«¯ã€‚</li>\n</ul>\n<p>å®¢æˆ·ç«¯æœªæœªè®¤è¯çš„æ—¶å€™ï¼Œä¼šå¼¹å‡ºç”¨æˆ·åå¯†ç è¾“å…¥æ¡†ï¼Œè¿™ä¸ªæ—¶å€™è¯·æ±‚æ—¶å±äº pending çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™å…¶å®æœåŠ¡å½“ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå¯†ç çš„æ—¶å€™å®¢æˆ·ç«¯ä¼šå†æ¬¡å‘é€å¸¦ Authentication å¤´çš„è¯·æ±‚ã€‚</p>\n<p>è¯·æ±‚è®¤è¯ ğŸ‘‡<br><img src=\"https://user-images.githubusercontent.com/15377484/48976178-136a0300-f0bd-11e8-9fd6-b2e67d22bbc6.png\" alt=\"image\"></p>\n<p>è®¤è¯æˆåŠŸ ğŸ‘‡<br><img src=\"https://user-images.githubusercontent.com/15377484/48976167-d1d95800-f0bc-11e8-80fa-35c636dbc103.png\" alt=\"image\"></p>\n<h4 id=\"å®Œæ•´ä»£ç \"><a href=\"#å®Œæ•´ä»£ç \" class=\"headerlink\" title=\"å®Œæ•´ä»£ç \"></a>å®Œæ•´ä»£ç </h4><p><strong>Server.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(express.static(__dirname + <span class=\"string\">'/public'</span>));</span><br><span class=\"line\">app.get(<span class=\"string\">'/Authentication_base'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'req.headers.authorization:'</span>, req.headers);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!req.headers.authorization) &#123;</span><br><span class=\"line\">    res.set(&#123;</span><br><span class=\"line\">      <span class=\"string\">'WWW-Authenticate'</span>: <span class=\"string\">'Basic realm=\"wang\"'</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    res.status(<span class=\"number\">401</span>).end();</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> base64 = req.headers.authorization.split(<span class=\"string\">' '</span>)[<span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"keyword\">let</span> userPass = <span class=\"keyword\">new</span> Buffer(base64, <span class=\"string\">'base64'</span>).toString().split(<span class=\"string\">':'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> user = userPass[<span class=\"number\">0</span>];</span><br><span class=\"line\">    <span class=\"keyword\">let</span> pass = userPass[<span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (user === <span class=\"string\">'wang'</span> &amp;&amp; pass === <span class=\"string\">'wang'</span>) &#123;</span><br><span class=\"line\">      res.end(<span class=\"string\">'OK'</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      res.status(<span class=\"number\">401</span>).end();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(<span class=\"number\">9090</span>);</span><br></pre></td></tr></table></figure>\n<p><strong>index.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>HTTP Basic Authentication<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"js/jquery-3.2.1.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">      $(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        send(<span class=\"string\">'./Authentication_base'</span>);</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;);</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> send = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">url</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        $.ajax(&#123;</span></span><br><span class=\"line\"><span class=\"undefined\">          url: url,</span></span><br><span class=\"line\"><span class=\"javascript\">          method: <span class=\"string\">'GET'</span></span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;);</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;;</span></span><br><span class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>å½“ç„¶æœ‰ç™»é™†å°±æœ‰æ³¨é”€ï¼Œæˆ‘ä»¬ä¼šå‘ç°å½“æˆ‘ä»¬è®¤è¯æˆåŠŸåæ¯æ¬¡è¯·æ±‚è¯·æ±‚å¤´éƒ½ä¼šå¸¦ä¸Š Authentication åŠé‡Œé¢çš„å†…å®¹ï¼Œé‚£ä¹ˆå¦‚ä½•åšåˆ°è®©è¿™æ¬¡ç™»é™†å¤±æ•ˆçš„ï¼Ÿ</p>\n<p>ç½‘ä¸ŠæŸ¥äº†åŠå¤©ï¼Œç›®å‰æœ€æœ‰æ•ˆçš„æ–¹å¼å°±æ˜¯åœ¨æ³¨é”€æ“ä½œçš„æ—¶å€™ï¼Œä¸“é—¨åœ¨æœåŠ¡å™¨è®¾ç½®ä¸€ä¸ªä¸“é—¨çš„æ³¨é”€è´¦å·ï¼Œå½“æ¥æ”¶åˆ°çš„ Authentication ä¿¡æ¯ä¸ºæ³¨é”€ç”¨æˆ·åå¯†ç çš„æ—¶å€™çº å°±å¸¦ä¾¿æ³¨é”€æˆåŠŸäº†ï¼Œè€Œå®¢æˆ·ç«¯åœ¨æ³¨é”€æ“ä½œçš„æ—¶å€™ï¼Œæ‰‹åŠ¨çš„çš„å»ä¿®æ”¹è¯·æ±‚å¤´é‡çš„ Authenticationï¼Œå°†ä»–è®¾ç½®æœªæœåŠ¡å™¨é»˜è®¤çš„æ³¨é”€è´¦å·å’Œå¯†ç ã€‚</p>\n<p>é€šè¿‡ä¸Šé¢çš„ç®€å•è®²è§£ å…¶å®æˆ‘ä»¬å·²ç»å¯ä»¥è¿”ç°è¿™ç§éªŒè¯æ–¹å¼çš„ç¼ºé™·åŠ å¯†æ–¹å¼ç®€å•ï¼Œä»…ä»…æ˜¯ base64 åŠ å¯†ï¼Œè¿™ç§åŠ å¯†æ–¹å¼æ˜¯å¯é€†çš„ã€‚åŒæ—¶åœ¨æ¯ä¸ªè¯·æ±‚çš„å¤´ä¸Šéƒ½ä¼šé™„å¸¦ä¸Šç”¨æˆ·åå’Œå¯†ç ä¿¡æ¯ï¼Œè¿™æ ·åœ¨å¤–ç½‘æ˜¯å¾ˆå®¹æ˜“è¢«å—…æ¢å™¨æ¢æµ‹åˆ°çš„ã€‚</p>\n<p>æ­£å¼å› ä¸ºè¿™æ ·ï¼Œè¿™ç§åŠ å¯†æ–¹å¼ä¸€èˆ¬å¤šè¢«ç”¨åœ¨å†…éƒ¨å®‰å…¨æ€§è¦æ±‚ä¸é«˜çš„çš„ç³»ç»Ÿä¸Šï¼Œåªæ˜¯ç›¸å¯¹çš„å¤šï¼Œæ€»çš„æ¥è¯´ç°åœ¨ä½¿ç”¨è¿™ç§é‰´æƒæ¯”è¾ƒå°‘äº†ã€‚å¦‚æœé¡¹ç›®éœ€è¦éƒ¨ç½²åœ¨å…¬ç½‘ä¸Šï¼Œè¿™ç§æ–¹å¼ä¸æ¨èï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å’Œ SSL æ¥åŠ å¯†ä¼ è¾“ï¼Œè¿™æ ·ä¼šå¥½ä¸€ç‚¹ï¼Œè¿™ä¸ªå¦‚æœæˆ‘åé¢æœ‰æ—¶é—´æ¥ç ”ç©¶ä¸€ä¸‹ã€‚</p>\n<h3 id=\"Session-cookie\"><a href=\"#Session-cookie\" class=\"headerlink\" title=\"Session-cookie\"></a>Session-cookie</h3><p>ç¬¬äºŒç§è¿™ä¸ªæ–¹å¼æ˜¯åˆ©ç”¨æœåŠ¡å™¨ç«¯çš„ sessionï¼ˆä¼šè¯ï¼‰å’Œæµè§ˆå™¨ç«¯çš„ cookie æ¥å®ç°å‰åç«¯çš„è®¤è¯ï¼Œç”±äº http è¯·æ±‚æ—¶æ˜¯æ— çŠ¶æ€çš„ï¼ŒæœåŠ¡å™¨æ­£å¸¸æƒ…å†µä¸‹æ˜¯ä¸çŸ¥é“å½“å‰è¯·æ±‚ä¹‹å‰æœ‰æ²¡æœ‰æ¥è¿‡ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¦‚æœè¦è®°å½•çŠ¶æ€ï¼Œå°±éœ€è¦åœ¨æœåŠ¡å™¨ç«¯åˆ›å»ºä¸€ä¸ªä¼šè¯ (seesion), å°†åŒä¸€ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚éƒ½ç»´æŠ¤åœ¨å„è‡ªå¾—ä¼šä¼šè¯ä¸­ï¼Œæ¯å½“è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨ç«¯çš„æ—¶å€™ï¼Œå…ˆå»æŸ¥ä¸€ä¸‹è¯¥å®¢æˆ·ç«¯æœ‰æ²¡æœ‰åœ¨æœåŠ¡å™¨ç«¯åˆ›å»º seesionï¼Œå¦‚æœæœ‰åˆ™å·²ç»è®¤è¯æˆåŠŸäº†ï¼Œå¦åˆ™å°±æ²¡æœ‰è®¤è¯ã€‚</p>\n<h4 id=\"è®¤è¯è¿‡ç¨‹-1\"><a href=\"#è®¤è¯è¿‡ç¨‹-1\" class=\"headerlink\" title=\"è®¤è¯è¿‡ç¨‹\"></a>è®¤è¯è¿‡ç¨‹</h4><ol>\n<li>æœåŠ¡å™¨åœ¨æ¥å—å®¢æˆ·ç«¯é¦–æ¬¡è®¿é—®æ—¶åœ¨æœåŠ¡å™¨ç«¯åˆ›å»º seesionï¼Œç„¶åä¿å­˜ seesionï¼ˆæˆ‘ä»¬å¯ä»¥å°† seesion ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä¹Ÿå¯ä»¥ä¿å­˜åœ¨ redis ä¸­ï¼Œæ¨èä½¿ç”¨åè€…ï¼‰ï¼Œç„¶åç»™è¿™ä¸ª session ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†å­—ç¬¦ä¸², ç„¶ååœ¨å“åº”å¤´ä¸­ç§ä¸‹è¿™ä¸ªå”¯ä¸€æ ‡è¯†å­—ç¬¦ä¸²ã€‚</li>\n<li>ç­¾åã€‚è¿™ä¸€æ­¥åªæ˜¯å¯¹ sid è¿›è¡ŒåŠ å¯†å¤„ç†ï¼ŒæœåŠ¡ç«¯ä¼šæ ¹æ®è¿™ä¸ª secret å¯†é’¥è¿›è¡Œè§£å¯†ã€‚ï¼ˆéå¿…éœ€æ­¥éª¤ï¼‰</li>\n<li>æµè§ˆå™¨ä¸­æ”¶åˆ°è¯·æ±‚å“åº”çš„æ—¶å€™ä¼šè§£æå“åº”å¤´ï¼Œç„¶åå°† sid ä¿å­˜åœ¨æœ¬åœ° cookie ä¸­ï¼Œæµè§ˆå™¨åœ¨ä¸‹æ¬¡ http è¯·æ±‚çš„è¯·æ±‚å¤´ä¸­ä¼šå¸¦ä¸Šè¯¥åŸŸåä¸‹çš„ cookie ä¿¡æ¯ã€‚</li>\n<li>æœåŠ¡å™¨åœ¨æ¥å—å®¢æˆ·ç«¯è¯·æ±‚æ—¶ä¼šå»è§£æè¯·æ±‚å¤´ cookie ä¸­çš„ sidï¼Œç„¶åæ ¹æ®è¿™ä¸ª sid å»æ‰¾æœåŠ¡å™¨ç«¯ä¿å­˜çš„è¯¥å®¢æˆ·ç«¯çš„ sessionï¼Œç„¶ååˆ¤æ–­è¯¥è¯·æ±‚æ˜¯å¦åˆæ³•ã€‚</li>\n</ol>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/38019076-382f84f8-32a9-11e8-9c5d-ef47b58185ad.png\" alt=\"\"></p>\n<h4 id=\"å®Œæ•´ä»£ç -1\"><a href=\"#å®Œæ•´ä»£ç -1\" class=\"headerlink\" title=\"å®Œæ•´ä»£ç \"></a>å®Œæ•´ä»£ç </h4><p><strong>server.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> RedisStore = <span class=\"built_in\">require</span>(<span class=\"string\">'connect-redis'</span>)(express.session);</span><br><span class=\"line\"><span class=\"keyword\">var</span> app = express();</span><br><span class=\"line\"><span class=\"keyword\">var</span> secret = <span class=\"string\">'ifyour'</span>;</span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½® Cookie</span></span><br><span class=\"line\">app.use(express.cookieParser(secret));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½® Session</span></span><br><span class=\"line\">app.use(</span><br><span class=\"line\">  express.session(&#123;</span><br><span class=\"line\">    store: <span class=\"keyword\">new</span> RedisStore(&#123;</span><br><span class=\"line\">      host: <span class=\"string\">'127.0.0.1'</span>,</span><br><span class=\"line\">      port: <span class=\"number\">6379</span>,</span><br><span class=\"line\">      db: <span class=\"string\">'session_db'</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    secret: secret</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">'/'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> session = req.session;</span><br><span class=\"line\">  session.time = session.time || <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> n = session.time++;</span><br><span class=\"line\">  res.send(<span class=\"string\">'hello, session id:'</span> + session.id + <span class=\"string\">'count:'</span> + n);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(<span class=\"number\">9080</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"Token-éªŒè¯\"><a href=\"#Token-éªŒè¯\" class=\"headerlink\" title=\"Token éªŒè¯\"></a>Token éªŒè¯</h3><h4 id=\"è®¤è¯è¿‡ç¨‹-2\"><a href=\"#è®¤è¯è¿‡ç¨‹-2\" class=\"headerlink\" title=\"è®¤è¯è¿‡ç¨‹\"></a>è®¤è¯è¿‡ç¨‹</h4><ol>\n<li>å®¢æˆ·ç«¯ä½¿ç”¨ç”¨æˆ·åè·Ÿå¯†ç è¯·æ±‚ç™»å½•</li>\n<li>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œå»éªŒè¯ç”¨æˆ·åä¸å¯†ç </li>\n<li>éªŒè¯æˆåŠŸåï¼ŒæœåŠ¡ç«¯ä¼šç­¾å‘ä¸€ä¸ª Tokenï¼Œå†æŠŠè¿™ä¸ª Token å‘é€ç»™å®¢æˆ·ç«¯</li>\n<li>å®¢æˆ·ç«¯æ”¶åˆ° Token ä»¥åå¯ä»¥æŠŠå®ƒå­˜å‚¨èµ·æ¥ï¼Œæ¯”å¦‚æ”¾åœ¨ Cookie é‡Œæˆ–è€… LocalStorage é‡Œ</li>\n<li>å®¢æˆ·ç«¯æ¯æ¬¡å‘æœåŠ¡ç«¯è¯·æ±‚èµ„æºçš„æ—¶å€™éœ€è¦å¸¦ç€æœåŠ¡ç«¯ç­¾å‘çš„ Token</li>\n<li>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œç„¶åå»éªŒè¯å®¢æˆ·ç«¯è¯·æ±‚é‡Œé¢å¸¦ç€çš„ Tokenï¼Œå¦‚æœéªŒè¯æˆåŠŸï¼Œå°±å‘å®¢æˆ·ç«¯è¿”å›è¯·æ±‚çš„æ•°æ®</li>\n</ol>\n<p>æ€»çš„æ¥è¯´å°±æ˜¯å®¢æˆ·ç«¯åœ¨é¦–æ¬¡ç™»é™†ä»¥åï¼ŒæœåŠ¡ç«¯å†æ¬¡æ¥æ”¶ http è¯·æ±‚çš„æ—¶å€™ï¼Œå°±åªè®¤ token äº†ï¼Œè¯·æ±‚åªè¦æ¯æ¬¡æŠŠ token å¸¦ä¸Šå°±è¡Œäº†ï¼ŒæœåŠ¡å™¨ç«¯ä¼šæ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚ï¼Œç„¶åæ ¡éªŒ token çš„åˆæ³•æ€§ï¼Œåˆæ³•å°±æ”¾è¡Œï¼Œä¸åˆæ³•å°±è¿”å› 401ï¼ˆé‰´æƒå¤±è´¥ï¼‰ã€‚</p>\n<p>ä¹çš„ä¸€çœ‹å¥½åƒå’Œå‰é¢çš„ seesion-cookie æœ‰ç‚¹åƒï¼Œseesion-cookie æ˜¯é€šè¿‡ seesionid æ¥ä½œä¸ºæµè§ˆå™¨å’ŒæœåŠ¡ç«¯çš„é“¾æ¥æ¡¥æ¢ï¼Œè€Œ token éªŒè¯æ–¹å¼è²Œä¼¼æ˜¯ token æ¥èµ·åˆ° seesionid çš„è§’è‰²ã€‚å…¶å®è¿™ä¸¤è€…å·®åˆ«æ˜¯å¾ˆå¤§çš„ã€‚</p>\n<h4 id=\"ä¸-seesion-cookie-çš„åŒºåˆ«\"><a href=\"#ä¸-seesion-cookie-çš„åŒºåˆ«\" class=\"headerlink\" title=\"ä¸ seesion-cookie çš„åŒºåˆ«\"></a>ä¸ seesion-cookie çš„åŒºåˆ«</h4><ol>\n<li>sessionid æ˜¯ä¸€ä¸ªå”¯ä¸€æ ‡è¯†çš„å­—ç¬¦ä¸²ï¼ŒæœåŠ¡ç«¯æ˜¯æ ¹æ®è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæ¥æŸ¥è¯¢åœ¨æœåŠ¡å™¨ç«¯ä¿æŒçš„ seesionï¼Œè¿™é‡Œé¢æ‰ä¿å­˜ç€ç”¨æˆ·çš„ç™»é™†çŠ¶æ€ã€‚ä½†æ˜¯ token æœ¬èº«å°±æ˜¯ä¸€ç§ç™»é™†æˆåŠŸå‡­è¯ï¼Œä»–æ˜¯åœ¨ç™»é™†æˆåŠŸåæ ¹æ®æŸç§è§„åˆ™ç”Ÿæˆçš„ä¸€ç§ä¿¡æ¯å‡­è¯ï¼Œä»–é‡Œé¢æœ¬èº«å°±ä¿å­˜ç€ç”¨æˆ·çš„ç™»é™†çŠ¶æ€ã€‚æœåŠ¡å™¨ç«¯åªéœ€è¦æ ¹æ®å®šä¹‰çš„è§„åˆ™æ ¡éªŒè¿™ä¸ª token æ˜¯å¦åˆæ³•å°±è¡Œã€‚</li>\n<li>session-cookie æ˜¯éœ€è¦ cookie é…åˆçš„ï¼Œå±…ç„¶è¦ cookieï¼Œé‚£ä¹ˆåœ¨ http ä»£ç†å®¢æˆ·ç«¯çš„é€‰æ‹©ä¸Šå°±æ˜¯åªæœ‰æµè§ˆå™¨äº†ï¼Œå› ä¸ºåªæœ‰æµè§ˆå™¨æ‰ä¼šå»è§£æè¯·æ±‚å“åº”å¤´é‡Œé¢çš„ cookie, ç„¶åæ¯æ¬¡è¯·æ±‚å†é»˜è®¤å¸¦ä¸Šè¯¥åŸŸåä¸‹çš„ cookieã€‚ä½†æ˜¯æˆ‘ä»¬çŸ¥é“ http ä»£ç†å®¢æˆ·ç«¯ä¸åªæœ‰æµè§ˆå™¨ï¼Œè¿˜æœ‰åŸç”Ÿ APP ç­‰ç­‰ï¼Œè¿™ä¸ªæ—¶å€™ cookie æ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œæˆ–è€…æµè§ˆå™¨ç«¯æ˜¯å¯ä»¥ç¦æ­¢ cookie çš„ (è™½ç„¶å¯ä»¥ï¼Œä½†æ˜¯è¿™åŸºæœ¬ä¸Šæ˜¯å±äºåƒé¥±æ²¡äº‹å¹²çš„äººå¹²çš„äº‹)ï¼Œä½†æ˜¯ token å°±ä¸ä¸€æ ·ï¼Œä»–æ˜¯ç™»é™†è¯·æ±‚åœ¨ç™»é™†æˆåŠŸåå†è¯·æ±‚å“åº”ä½“ä¸­è¿”å›çš„ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯åœ¨æ”¶åˆ°å“åº”çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠä»–å­˜åœ¨æœ¬åœ°çš„ cookieã€storageï¼Œæˆ–è€…å†…å­˜ä¸­ï¼Œç„¶åå†ä¸‹ä¸€æ¬¡è¯·æ±‚çš„è¯·æ±‚å¤´é‡å¸¦ä¸Šè¿™ä¸ª token å°±è¡Œäº†ã€‚ç®€å•ç‚¹æ¥è¯´ cookie-session æœºåˆ¶ä»–é™åˆ¶äº†å®¢æˆ·ç«¯çš„ç±»å‹ï¼Œè€Œ token éªŒè¯æœºåˆ¶ä¸°å¯Œäº†å®¢æˆ·ç«¯ç±»å‹ã€‚</li>\n<li>æ—¶æ•ˆæ€§ã€‚session-cookie çš„ sessionid æ˜¯åœ¨ç™»é™†æ—¶ç”Ÿæˆçš„ï¼Œè€Œä¸”åœ¨ç™»å‡ºæ—¶ä¸€ç›´ä¸å˜ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå®‰å…¨æ€§å°±ä¼šé™ä½ï¼Œè€Œ token æ˜¯å¯ä»¥åœ¨ä¸€æ®µæ—¶é—´å†…åŠ¨æ€æ”¹å˜çš„ã€‚</li>\n<li>å¯æ‰©å±•æ€§ã€‚token éªŒè¯æœ¬èº«æ˜¯æ¯”è¾ƒçµæ´»çš„ï¼Œä¸€æ˜¯ token çš„è§£å†³æ–¹æ¡ˆæœ‰è®¸å¤šï¼Œå¸¸ç”¨çš„æ˜¯ JWTï¼ŒäºŒæ¥æˆ‘ä»¬å¯ä»¥åŸºäº token éªŒè¯æœºåˆ¶ï¼Œä¸“é—¨åšä¸€ä¸ªé‰´æƒæœåŠ¡ï¼Œç”¨å®ƒå‘å¤šä¸ªæœåŠ¡çš„è¯·æ±‚è¿›è¡Œç»Ÿä¸€é‰´æƒã€‚</li>\n</ol>\n<p>ä¸‹é¢å°±æ‹¿æœ€å¸¸ç”¨çš„ JWTï¼ˆJSON WEB TOKENï¼‰æ¥è¯´ï¼š</p>\n<p>JWT æ˜¯ Auth0 æå‡ºçš„é€šè¿‡å¯¹ JSON è¿›è¡ŒåŠ å¯†ç­¾åæ¥å®ç°æˆæƒéªŒè¯çš„æ–¹æ¡ˆï¼Œå°±æ˜¯ç™»é™†æˆåŠŸåå°†ç›¸å…³ä¿¡æ¯ç»„æˆ json å¯¹è±¡ï¼Œç„¶åå¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡ŒæŸä¸­æ–¹å¼çš„åŠ å¯†ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯åœ¨ä¸‹æ¬¡è¯·æ±‚æ—¶å¸¦ä¸Šè¿™ä¸ª tokenï¼ŒæœåŠ¡ç«¯å†æ”¶åˆ°è¯·æ±‚æ—¶æ ¡éªŒ token åˆæ³•æ€§ï¼Œå…¶å®ä¹Ÿå°±æ˜¯åœ¨æ ¡éªŒè¯·æ±‚çš„åˆæ³•æ€§ã€‚JWT å¯¹è±¡é€šå¸¸ç”±ä¸‰éƒ¨åˆ†æ„æˆï¼š</p>\n<p>1ï¸âƒ£ Headersï¼š åŒ…æ‹¬ç±»åˆ«ï¼ˆtypï¼‰ã€åŠ å¯†ç®—æ³•ï¼ˆalgï¼‰</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"alg\"</span>: <span class=\"string\">\"HS256\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"typ\"</span>: <span class=\"string\">\"JWT\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2ï¸âƒ£ Claimsï¼šåŒ…æ‹¬éœ€è¦ä¼ é€’çš„ç”¨æˆ·ä¿¡æ¯</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"sub\"</span>: <span class=\"string\">\"1234567890\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"John Doe\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"admin\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>3ï¸âƒ£ Signatureï¼šæ ¹æ® alg ç®—æ³•ä¸ç§æœ‰ç§˜é’¥è¿›è¡ŒåŠ å¯†å¾—åˆ°çš„ç­¾åå­—ä¸²ï¼Œè¿™ä¸€æ®µæ˜¯æœ€é‡è¦çš„æ•æ„Ÿä¿¡æ¯ï¼Œåªèƒ½åœ¨æœåŠ¡ç«¯è§£å¯†</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HMACSHA256(</span><br><span class=\"line\">  base64UrlEncode(Headers) + &apos;.&apos; + base64UrlEncode(Claims),</span><br><span class=\"line\">  SECREATE_KEY</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>ç¼–ç ä¹‹åçš„ JWT çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ä¸€ä¸²å­—ç¬¦ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ</span><br></pre></td></tr></table></figure>\n<h4 id=\"å®Œæ•´ä»£ç -2\"><a href=\"#å®Œæ•´ä»£ç -2\" class=\"headerlink\" title=\"å®Œæ•´ä»£ç \"></a>å®Œæ•´ä»£ç </h4><p><strong>auth.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> jwt = <span class=\"built_in\">require</span>(<span class=\"string\">'jwt-simple'</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> secret = <span class=\"string\">'wangyy'</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> time = <span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* æ£€éªŒ token åˆæ³•æ€§ */</span></span><br><span class=\"line\">  validate: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> token = req.body.token || req.headers[<span class=\"string\">'xssToken'</span>];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (token) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> decodeToken = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// é˜²æ­¢å‡å†’ token è§£ææŠ¥é”™</span></span><br><span class=\"line\">        decodeToken = jwt.decode(token, secret, <span class=\"string\">'HS256'</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">        res.status(<span class=\"number\">401</span>).send(<span class=\"string\">'éæ³•è®¿é—®'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> exp = decodeToken.exp;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!exp) &#123;</span><br><span class=\"line\">        res.status(<span class=\"number\">401</span>).send(<span class=\"string\">'éæ³•è®¿é—®'</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> now = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (exp &gt; now + time * <span class=\"number\">60</span> * <span class=\"number\">1000</span>) &#123;</span><br><span class=\"line\">        res.send(&#123; <span class=\"attr\">code</span>: <span class=\"string\">'002'</span>, <span class=\"attr\">errorMsg</span>: <span class=\"string\">'æˆæƒè¶…æ—¶'</span> &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      next();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      res.status(<span class=\"number\">401</span>).send(<span class=\"string\">'éæ³•è®¿é—®'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">/* ç”Ÿæˆ token*/</span></span><br><span class=\"line\">  makeToken() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> Token = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> payload = &#123;</span><br><span class=\"line\">      time: <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime(),</span><br><span class=\"line\">      exp: <span class=\"keyword\">this</span>.makeExp(time)</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    Token = jwt.encode(payload, secret, HS256);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Token;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">/* ç”Ÿæˆ token è¿‡æœŸæ—¶é—´ */</span></span><br><span class=\"line\">  makeExp: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">time</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> stam = time601000;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><strong>Server.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> app = express();</span><br><span class=\"line\"><span class=\"keyword\">let</span> bodyParser = <span class=\"built_in\">require</span>(<span class=\"string\">'body-parser'</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> auth = <span class=\"built_in\">require</span>(<span class=\"string\">'./lib/auth.js'</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> chalk = <span class=\"built_in\">require</span>(<span class=\"string\">'chalk'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(bodyParser.json());</span><br><span class=\"line\">app.post(<span class=\"string\">'/login'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> Token = auth.makeToken();</span><br><span class=\"line\">  res.json(&#123; <span class=\"attr\">result</span>: <span class=\"string\">'success'</span>, <span class=\"attr\">token</span>: Token &#125;, <span class=\"number\">200</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">app.use(<span class=\"string\">'*'</span>, [auth.validate], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">  res.send(<span class=\"string\">'success'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(<span class=\"string\">'9999'</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"OAuth-å¼€æ”¾æˆæƒ\"><a href=\"#OAuth-å¼€æ”¾æˆæƒ\" class=\"headerlink\" title=\"OAuth(å¼€æ”¾æˆæƒ)\"></a>OAuth(å¼€æ”¾æˆæƒ)</h3><p>OAuthï¼ˆå¼€æ”¾æˆæƒï¼‰æ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œå…è®¸ç”¨æˆ·æˆæƒç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®ä»–ä»¬å­˜å‚¨åœ¨å¦å¤–çš„æœåŠ¡æä¾›è€…ä¸Šçš„ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦å°†ç”¨æˆ·åå’Œå¯†ç æä¾›ç»™ç¬¬ä¸‰æ–¹ç½‘ç«™æˆ–åˆ†äº«ä»–ä»¬æ•°æ®çš„æ‰€æœ‰å†…å®¹ï¼Œä¸ºäº†ä¿æŠ¤ç”¨æˆ·æ•°æ®çš„å®‰å…¨å’Œéšç§ï¼Œç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®ç”¨æˆ·æ•°æ®å‰éƒ½éœ€è¦æ˜¾å¼çš„å‘ç”¨æˆ·å¾æ±‚æˆæƒã€‚æˆ‘ä»¬å¸¸è§çš„æä¾› OAuth è®¤è¯æœåŠ¡çš„å‚å•†æœ‰æ”¯ä»˜å®ã€QQã€å¾®ä¿¡ã€‚</p>\n<p>OAuth åè®®åˆæœ‰ 1.0 å’Œ 2.0 ä¸¤ä¸ªç‰ˆæœ¬ã€‚ç›¸æ¯”è¾ƒ 1.0 ç‰ˆï¼Œ2.0 ç‰ˆæ•´ä¸ªæˆæƒéªŒè¯æµç¨‹æ›´ç®€å•æ›´å®‰å…¨ï¼Œä¹Ÿæ˜¯ç›®å‰æœ€ä¸»è¦çš„ç”¨æˆ·èº«ä»½éªŒè¯å’Œæˆæƒæ–¹å¼ã€‚</p>\n<h4 id=\"è®¤è¯è¿‡ç¨‹-3\"><a href=\"#è®¤è¯è¿‡ç¨‹-3\" class=\"headerlink\" title=\"è®¤è¯è¿‡ç¨‹\"></a>è®¤è¯è¿‡ç¨‹</h4><p>ä¸‹é¢æ˜¯ä¸€å¼  Auth2.0 çš„æµç¨‹å›¾ï¼š</p>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/48976006-b7ea4600-f0b9-11e8-8f94-1102761320b0.png\" alt=\"image\"></p>\n<p>ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒAuth2.0 æµç¨‹åˆ†ä¸ºå…­æ­¥ï¼š</p>\n<p>1ï¸âƒ£ å‘ç”¨æˆ·è¯·æ±‚æˆæƒï¼Œç°åœ¨å¾ˆå¤šçš„ç½‘ç«™åœ¨ç™»é™†çš„æ—¶å€™éƒ½æœ‰ç¬¬ä¸‰æ–¹ç™»é™†çš„å…¥å£ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»ç­‰ç¬¬ä¸‰æ–¹å…¥å£æ—¶ï¼Œç¬¬ä¸‰æ–¹æˆæƒæœåŠ¡ä¼šå¼•å¯¼æˆ‘ä»¬è¿›å…¥ç¬¬ä¸‰æ–¹ç™»é™†æˆæƒé¡µé¢ã€‚</p>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/48976180-35638580-f0bd-11e8-9c0a-c6aee6bf7da5.png\" alt=\"image\"></p>\n<p>é€šè¿‡ç¬¬ä¸‰æ–¹è¯·æ±‚æˆæƒé¡µé¢çš„æµè§ˆå™¨åœ°å€æ åœ°å€å¯ä»¥çœ‹å‡ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://graph.qq.com/oauth2.0/show?which=Login&amp;display=pc&amp;response_type=code&amp;client_id=100270989&amp;redirect_uri=https%3A%2F%2Fpassport.csdn.net%2Faccount%2Flogin%3Foauth_provider%3DQQProvider&amp;state=test</span><br></pre></td></tr></table></figure>\n<p>è¿™é‡Œçš„åœ°å€é‡Œé¢çš„ <code>%</code> æ˜¯æµè§ˆå™¨å¼ºåˆ¶ç¼–ç åçš„æ˜¾ç¤ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>decodeURIComponent</code> è¿›è¡Œè§£ç ï¼Œè§£ç åæ˜¯è¿™æ ·ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://graph.qq.com/oauth2.0/show?which=Login&amp;display=pc&amp;response_type=code&amp;client_id=100270989&amp;redirect_uri=https://passport.csdn.net/account/login?oauth_provider=QQProvider&amp;state=test</span><br></pre></td></tr></table></figure>\n<p>è¿™ä¸ª url åœ°å€æˆ‘ä»¬å¯ä»¥çœ‹è§ Auth2.0 å¸¸è§çš„å‡ ä¸ªå‚æ•°ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">response_type:  è¿”å›ç±»å‹</span><br><span class=\"line\">client_id:      ç¬¬ä¸‰æ–¹åº”ç”¨ id, ç”±æˆæƒæœåŠ¡å™¨ï¼ˆqqï¼‰åœ¨ç¬¬ä¸‰æ–¹åº”ç”¨æäº¤æ—¶é¢å‘ç»™ç¬¬ä¸‰æ–¹åº”ç”¨ã€‚</span><br><span class=\"line\">redirect_uri:   ç™»é™†æˆåŠŸé‡å®šå‘é¡µé¢</span><br><span class=\"line\">oauth_provider: ç¬¬ä¸‰æ–¹æˆæƒæä¾›æ–¹</span><br><span class=\"line\">state:          ç”±ç¬¬ä¸‰æ–¹åº”ç”¨ç»™å‡ºçš„éšæœºç </span><br></pre></td></tr></table></figure>\n<p>2ï¸âƒ£ è¿”å›ç”¨æˆ·å‡­è¯ï¼ˆcodeï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªå‡­è¯ï¼ˆcodeï¼‰ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æˆæƒå¹¶ç™»é™†åï¼ŒæˆæƒæœåŠ¡å™¨å°†ç”Ÿæˆä¸€ä¸ªç”¨æˆ·å‡­è¯ï¼ˆcodeï¼‰ã€‚è¿™ä¸ªç”¨æˆ·å‡­è¯ä¼šé™„åŠ åœ¨é‡å®šå‘çš„åœ°å€ <code>redirect_uri</code> çš„åé¢</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://passport.csdn.net/account/login?code=9e3efa6cea739f9aaab2&amp;state=XXX</span><br></pre></td></tr></table></figure>\n<p>3ï¸âƒ£ è¯·æ±‚æˆæƒæœåŠ¡å™¨æˆæƒ</p>\n<p>ç»è¿‡ç¬¬äºŒéƒ¨è·å– code ååé¢çš„å·¥ä½œå°±å¯ä»¥äº¤ç»™åå°å»å¤„ç†çš„ï¼Œå’Œç”¨æˆ·çš„äº¤äº’å°±ç»“æŸäº†ã€‚æ¥ä¸‹æ¥æˆ‘çš„éœ€è¦è·å–å‡­è¯ï¼ˆAccess Tokenï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä»–æ¥å‘æˆæƒæœåŠ¡å™¨è·å–ç”¨æˆ·ä¿¡æ¯ç­‰èµ„æºã€‚ ç¬¬ä¸‰æ–¹åº”ç”¨åå°é€šè¿‡ç¬¬äºŒæ­¥çš„å‡­è¯ï¼ˆcodeï¼‰å‘æˆæƒæœåŠ¡å™¨è¯·æ±‚å‡­è¯ï¼ˆAccess Tokenï¼‰ï¼Œè¿™æ—¶å€™éœ€è¦ä»¥ä¸‹å‡ ä¸ªä¿¡æ¯ï¼š</p>\n<ul>\n<li><code>client_id</code>: æ ‡è¯†ç¬¬ä¸‰æ–¹åº”ç”¨çš„ idï¼Œç”±æˆæƒæœåŠ¡å™¨åœ¨ç¬¬ä¸‰æ–¹åº”ç”¨æäº¤æ—¶é¢å‘ç»™ç¬¬ä¸‰æ–¹åº”ç”¨</li>\n<li><code>client_secret</code>: ç¬¬ä¸‰æ–¹åº”ç”¨å’ŒæˆæƒæœåŠ¡å™¨ä¹‹é—´çš„å®‰å…¨å‡­è¯ï¼Œç”±æˆæƒæœåŠ¡å™¨åœ¨ç¬¬ä¸‰æ–¹åº”ç”¨æäº¤æ—¶é¢å‘ç»™ç¬¬ä¸‰æ–¹åº”ç”¨</li>\n<li><code>code</code>: ç¬¬ä¸€æ­¥ä¸­è¿”å›çš„ç”¨æˆ·å‡­è¯ <code>redirect_uri</code> ç¬¬ä¸€æ­¥ç”Ÿæˆç”¨æˆ·å‡­è¯åè·³è½¬åˆ°ç¬¬äºŒæ­¥æ—¶çš„åœ°å€</li>\n<li><code>state</code>: ç”±ç¬¬ä¸‰æ–¹åº”ç”¨ç»™å‡ºçš„éšæœºç </li>\n</ul>\n<p>4ï¸âƒ£ æˆæƒæœåŠ¡å™¨åŒæ„æˆæƒåï¼Œè¿”å›ä¸€ä¸ªèµ„æºè®¿é—®çš„å‡­è¯ï¼ˆAccess Tokenï¼‰ã€‚</p>\n<p>5ï¸âƒ£ ç¬¬ä¸‰æ–¹åº”ç”¨é€šè¿‡ç¬¬å››æ­¥çš„å‡­è¯ï¼ˆAccess Tokenï¼‰å‘èµ„æºæœåŠ¡å™¨è¯·æ±‚ç›¸å…³èµ„æºã€‚</p>\n<p>6ï¸âƒ£ èµ„æºæœåŠ¡å™¨éªŒè¯å‡­è¯ï¼ˆAccess Tokenï¼‰é€šè¿‡åï¼Œå°†ç¬¬ä¸‰æ–¹åº”ç”¨è¯·æ±‚çš„èµ„æºè¿”å›ã€‚</p>\n<p>ä»ç”¨æˆ·è§’åº¦æ¥è¯´ï¼Œç¬¬ä¸‰æ–¹æˆæƒå¯ä»¥è®©æˆ‘ä»¬å¿«é€Ÿçš„ç™»é™†åº”ç”¨ï¼Œæ— éœ€è¿›è¡Œç¹ççš„æ³¨å†Œï¼ŒåŒæ—¶ä¸ç”¨è®°ä½å„ç§è´¦å·å¯†ç ã€‚åªéœ€è¦è®°ä½è‡ªå·±å¸¸ç”¨çš„å‡ ä¸ªè´¦å·å°± OK äº†ã€‚ ä»äº§å“ç»ç†çš„è§’åº¦æ¥æ‰€ï¼Œè¿™ç§æˆæƒæ–¹å¼æé«˜ç”¨æˆ·çš„ä½“éªŒæ»¡æ„åº¦ã€‚å¦ä¸€æ–¹é¢å¯ä»¥è·å–æ›´å¤šçš„ç”¨æˆ·ã€‚</p>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>æˆæƒæ–¹å¼å¤šç§å¤šæ ·ï¼Œä¸»è¦è¿˜æ˜¯è¦å–å†³äºæˆ‘ä»¬å¯¹äºäº§å“çš„å®šä½ã€‚å¦‚æœæˆ‘ä»¬çš„äº§å“åªæ˜¯åœ¨ä¼ä¸šå†…éƒ¨ä½¿ç”¨ï¼ŒToken å’Œ Session-cookie å°±å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œå¦‚æœæ˜¯é¢å‘äº’è”ç½‘çš„å¤§ä¼—ç”¨æˆ·ï¼Œé‚£ä¹ˆç¬¬ä¸‰æ–¹æˆæƒ OAuth åœ¨ç”¨æˆ·ä½“éªŒåº¦ä¸Šä¼šæœ‰ä¸€ä¸ªå¾ˆå¤§çš„æå‡ã€‚</p>\n","site":{"data":{}},"excerpt":"<p>ä»Šå¤©æ¥å­¦ä¹ ä¸‹å¸¸è§çš„é‰´æƒæ–¹å¼ï¼Œä»æœ€å¼€å§‹äº†è§£çš„æœ€ç®€å•çš„ Cookie éªŒè¯ï¼Œåˆ°åæ¥çš„ Session-cookieã€Token ç­‰ï¼Œæ•´ä½“æ¥è¯´ï¼Œå®‰å…¨æ€§è¶Šæ¥è¶Šé«˜ã€‚å½“ç„¶è¿˜æ˜¯å¯¹éƒ¨åˆ†æ–¹å¼äº†è§£ä¸æ˜¯å¾ˆæ·±ï¼Œè¿™é‡Œåšä¸ªç®€å•æ€»ç»“ï¼ŒæŸ¥æ¼è¡¥ç¼ºã€‚</p>","more":"<p>ç›®å‰æˆ‘ä»¬å¸¸ç”¨çš„é‰´æƒæœ‰å››ç§ï¼š</p>\n<ol>\n<li>HTTP Basic Authentication</li>\n<li>Session-cookie</li>\n<li>Token éªŒè¯</li>\n<li>OAuth(å¼€æ”¾æˆæƒ)</li>\n</ol>\n<h3 id=\"HTTP-Basic-Authentication\"><a href=\"#HTTP-Basic-Authentication\" class=\"headerlink\" title=\"HTTP Basic Authentication\"></a>HTTP Basic Authentication</h3><p>è¿™ç§æˆæƒæ–¹å¼æ˜¯æµè§ˆå™¨éµå®ˆ HTTP åè®®å®ç°çš„åŸºæœ¬æˆæƒæ–¹å¼ï¼ŒHTTP åè®®è¿›è¡Œé€šä¿¡çš„è¿‡ç¨‹ä¸­ï¼ŒHTTP åè®®å®šä¹‰äº†åŸºæœ¬è®¤è¯è®¤è¯å…è®¸ HTTP æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯è¿›è¡Œç”¨æˆ·èº«ä»½è¯çš„æ–¹æ³•ã€‚</p>\n<h4 id=\"è®¤è¯è¿‡ç¨‹\"><a href=\"#è®¤è¯è¿‡ç¨‹\" class=\"headerlink\" title=\"è®¤è¯è¿‡ç¨‹\"></a>è®¤è¯è¿‡ç¨‹</h4><ul>\n<li>1ï¸âƒ£ å®¢æˆ·ç«¯å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ï¼Œè¯·æ±‚çš„å†…å®¹å¯èƒ½æ˜¯ä¸€ä¸ªç½‘é¡µæˆ–è€…æ˜¯ä¸€ä¸ª ajax å¼‚æ­¥è¯·æ±‚ï¼Œæ­¤æ—¶ï¼Œå‡è®¾å®¢æˆ·ç«¯å°šæœªè¢«éªŒè¯ï¼Œåˆ™å®¢æˆ·ç«¯æä¾›å¦‚ä¸‹è¯·æ±‚è‡³æœåŠ¡å™¨ï¼š</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Get /index.html HTTP/1.0</span><br><span class=\"line\">Host:www.google.com</span><br></pre></td></tr></table></figure>\n<ul>\n<li>2ï¸âƒ£ æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€éªŒè¯è¯·æ±‚ä»£ç  401ï¼Œ(<code>WWW-Authenticate: Basic realm=&quot;google.com&quot;</code> è¿™å¥è¯æ˜¯å…³é”®ï¼Œå¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯ä¸ä¼šå¼¹å‡ºç”¨æˆ·åå’Œå¯†ç è¾“å…¥ç•Œé¢ï¼‰æœåŠ¡å™¨è¿”å›çš„æ•°æ®å¦‚ä¸‹ï¼š</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HTTP/1.0 401 Unauthorised</span><br><span class=\"line\">Server: SokEvo/1.0</span><br><span class=\"line\">WWW-Authenticate: Basic realm=&quot;google.com&quot;</span><br><span class=\"line\">Content-Type: text/html</span><br><span class=\"line\">Content-Length: xxx</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>3ï¸âƒ£ å½“ç¬¦åˆ http1.0 æˆ– 1.1 è§„èŒƒçš„å®¢æˆ·ç«¯ï¼ˆå¦‚ IEï¼ŒFIREFOXï¼‰æ”¶åˆ° 401 è¿”å›å€¼æ—¶ï¼Œå°†è‡ªåŠ¨å¼¹å‡ºä¸€ä¸ªç™»å½•çª—å£ï¼Œè¦æ±‚ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚</p>\n</li>\n<li><p>4ï¸âƒ£ ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç åï¼Œå°†ç”¨æˆ·ååŠå¯†ç ä»¥ BASE64 åŠ å¯†æ–¹å¼åŠ å¯†ï¼Œå¹¶å°†å¯†æ–‡æ”¾å…¥å‰ä¸€æ¡è¯·æ±‚ä¿¡æ¯ä¸­ï¼Œåˆ™å®¢æˆ·ç«¯å‘é€çš„ç¬¬ä¸€æ¡è¯·æ±‚ä¿¡æ¯åˆ™å˜æˆå¦‚ä¸‹å†…å®¹ï¼š</p>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Get /index.html HTTP/1.0</span><br><span class=\"line\">Host:www.google.com</span><br><span class=\"line\">Authorization: Basic d2FuZzp3YW5n</span><br></pre></td></tr></table></figure>\n<div class=\"tip\"><br><code>d2FuZzp3YW5n</code> è¡¨ç¤ºåŠ å¯†åçš„ç”¨æˆ·ååŠå¯†ç ï¼ˆç”¨æˆ·åï¼šå¯†ç  ç„¶åé€šè¿‡ base64 åŠ å¯†ï¼ŒåŠ å¯†è¿‡ç¨‹æ˜¯æµè§ˆå™¨é»˜è®¤çš„è¡Œä¸ºï¼Œä¸éœ€è¦æˆ‘ä»¬äººä¸ºåŠ å¯†ï¼Œæˆ‘ä»¬åªéœ€è¦è¾“å…¥ç”¨æˆ·åå¯†ç å³å¯ï¼‰<br></div>\n\n<ul>\n<li>5ï¸âƒ£ æœåŠ¡å™¨æ”¶åˆ°ä¸Šè¿°è¯·æ±‚ä¿¡æ¯åï¼Œå°† Authorization å­—æ®µåçš„ç”¨æˆ·ä¿¡æ¯å–å‡ºã€è§£å¯†ï¼Œå°†è§£å¯†åçš„ç”¨æˆ·ååŠå¯†ç ä¸ç”¨æˆ·æ•°æ®åº“è¿›è¡Œæ¯”è¾ƒéªŒè¯ï¼Œå¦‚ç”¨æˆ·ååŠå¯†ç æ­£ç¡®ï¼ŒæœåŠ¡å™¨åˆ™æ ¹æ®è¯·æ±‚ï¼Œå°†æ‰€è¯·æ±‚èµ„æºå‘é€ç»™å®¢æˆ·ç«¯ã€‚</li>\n</ul>\n<p>å®¢æˆ·ç«¯æœªæœªè®¤è¯çš„æ—¶å€™ï¼Œä¼šå¼¹å‡ºç”¨æˆ·åå¯†ç è¾“å…¥æ¡†ï¼Œè¿™ä¸ªæ—¶å€™è¯·æ±‚æ—¶å±äº pending çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™å…¶å®æœåŠ¡å½“ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå¯†ç çš„æ—¶å€™å®¢æˆ·ç«¯ä¼šå†æ¬¡å‘é€å¸¦ Authentication å¤´çš„è¯·æ±‚ã€‚</p>\n<p>è¯·æ±‚è®¤è¯ ğŸ‘‡<br><img src=\"https://user-images.githubusercontent.com/15377484/48976178-136a0300-f0bd-11e8-9fd6-b2e67d22bbc6.png\" alt=\"image\"></p>\n<p>è®¤è¯æˆåŠŸ ğŸ‘‡<br><img src=\"https://user-images.githubusercontent.com/15377484/48976167-d1d95800-f0bc-11e8-80fa-35c636dbc103.png\" alt=\"image\"></p>\n<h4 id=\"å®Œæ•´ä»£ç \"><a href=\"#å®Œæ•´ä»£ç \" class=\"headerlink\" title=\"å®Œæ•´ä»£ç \"></a>å®Œæ•´ä»£ç </h4><p><strong>Server.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(express.static(__dirname + <span class=\"string\">'/public'</span>));</span><br><span class=\"line\">app.get(<span class=\"string\">'/Authentication_base'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'req.headers.authorization:'</span>, req.headers);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!req.headers.authorization) &#123;</span><br><span class=\"line\">    res.set(&#123;</span><br><span class=\"line\">      <span class=\"string\">'WWW-Authenticate'</span>: <span class=\"string\">'Basic realm=\"wang\"'</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    res.status(<span class=\"number\">401</span>).end();</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> base64 = req.headers.authorization.split(<span class=\"string\">' '</span>)[<span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"keyword\">let</span> userPass = <span class=\"keyword\">new</span> Buffer(base64, <span class=\"string\">'base64'</span>).toString().split(<span class=\"string\">':'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> user = userPass[<span class=\"number\">0</span>];</span><br><span class=\"line\">    <span class=\"keyword\">let</span> pass = userPass[<span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (user === <span class=\"string\">'wang'</span> &amp;&amp; pass === <span class=\"string\">'wang'</span>) &#123;</span><br><span class=\"line\">      res.end(<span class=\"string\">'OK'</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      res.status(<span class=\"number\">401</span>).end();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(<span class=\"number\">9090</span>);</span><br></pre></td></tr></table></figure>\n<p><strong>index.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>HTTP Basic Authentication<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"js/jquery-3.2.1.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">      $(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        send(<span class=\"string\">'./Authentication_base'</span>);</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;);</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> send = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">url</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        $.ajax(&#123;</span></span><br><span class=\"line\"><span class=\"undefined\">          url: url,</span></span><br><span class=\"line\"><span class=\"javascript\">          method: <span class=\"string\">'GET'</span></span></span><br><span class=\"line\"><span class=\"undefined\">        &#125;);</span></span><br><span class=\"line\"><span class=\"undefined\">      &#125;;</span></span><br><span class=\"line\"><span class=\"undefined\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>å½“ç„¶æœ‰ç™»é™†å°±æœ‰æ³¨é”€ï¼Œæˆ‘ä»¬ä¼šå‘ç°å½“æˆ‘ä»¬è®¤è¯æˆåŠŸåæ¯æ¬¡è¯·æ±‚è¯·æ±‚å¤´éƒ½ä¼šå¸¦ä¸Š Authentication åŠé‡Œé¢çš„å†…å®¹ï¼Œé‚£ä¹ˆå¦‚ä½•åšåˆ°è®©è¿™æ¬¡ç™»é™†å¤±æ•ˆçš„ï¼Ÿ</p>\n<p>ç½‘ä¸ŠæŸ¥äº†åŠå¤©ï¼Œç›®å‰æœ€æœ‰æ•ˆçš„æ–¹å¼å°±æ˜¯åœ¨æ³¨é”€æ“ä½œçš„æ—¶å€™ï¼Œä¸“é—¨åœ¨æœåŠ¡å™¨è®¾ç½®ä¸€ä¸ªä¸“é—¨çš„æ³¨é”€è´¦å·ï¼Œå½“æ¥æ”¶åˆ°çš„ Authentication ä¿¡æ¯ä¸ºæ³¨é”€ç”¨æˆ·åå¯†ç çš„æ—¶å€™çº å°±å¸¦ä¾¿æ³¨é”€æˆåŠŸäº†ï¼Œè€Œå®¢æˆ·ç«¯åœ¨æ³¨é”€æ“ä½œçš„æ—¶å€™ï¼Œæ‰‹åŠ¨çš„çš„å»ä¿®æ”¹è¯·æ±‚å¤´é‡çš„ Authenticationï¼Œå°†ä»–è®¾ç½®æœªæœåŠ¡å™¨é»˜è®¤çš„æ³¨é”€è´¦å·å’Œå¯†ç ã€‚</p>\n<p>é€šè¿‡ä¸Šé¢çš„ç®€å•è®²è§£ å…¶å®æˆ‘ä»¬å·²ç»å¯ä»¥è¿”ç°è¿™ç§éªŒè¯æ–¹å¼çš„ç¼ºé™·åŠ å¯†æ–¹å¼ç®€å•ï¼Œä»…ä»…æ˜¯ base64 åŠ å¯†ï¼Œè¿™ç§åŠ å¯†æ–¹å¼æ˜¯å¯é€†çš„ã€‚åŒæ—¶åœ¨æ¯ä¸ªè¯·æ±‚çš„å¤´ä¸Šéƒ½ä¼šé™„å¸¦ä¸Šç”¨æˆ·åå’Œå¯†ç ä¿¡æ¯ï¼Œè¿™æ ·åœ¨å¤–ç½‘æ˜¯å¾ˆå®¹æ˜“è¢«å—…æ¢å™¨æ¢æµ‹åˆ°çš„ã€‚</p>\n<p>æ­£å¼å› ä¸ºè¿™æ ·ï¼Œè¿™ç§åŠ å¯†æ–¹å¼ä¸€èˆ¬å¤šè¢«ç”¨åœ¨å†…éƒ¨å®‰å…¨æ€§è¦æ±‚ä¸é«˜çš„çš„ç³»ç»Ÿä¸Šï¼Œåªæ˜¯ç›¸å¯¹çš„å¤šï¼Œæ€»çš„æ¥è¯´ç°åœ¨ä½¿ç”¨è¿™ç§é‰´æƒæ¯”è¾ƒå°‘äº†ã€‚å¦‚æœé¡¹ç›®éœ€è¦éƒ¨ç½²åœ¨å…¬ç½‘ä¸Šï¼Œè¿™ç§æ–¹å¼ä¸æ¨èï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å’Œ SSL æ¥åŠ å¯†ä¼ è¾“ï¼Œè¿™æ ·ä¼šå¥½ä¸€ç‚¹ï¼Œè¿™ä¸ªå¦‚æœæˆ‘åé¢æœ‰æ—¶é—´æ¥ç ”ç©¶ä¸€ä¸‹ã€‚</p>\n<h3 id=\"Session-cookie\"><a href=\"#Session-cookie\" class=\"headerlink\" title=\"Session-cookie\"></a>Session-cookie</h3><p>ç¬¬äºŒç§è¿™ä¸ªæ–¹å¼æ˜¯åˆ©ç”¨æœåŠ¡å™¨ç«¯çš„ sessionï¼ˆä¼šè¯ï¼‰å’Œæµè§ˆå™¨ç«¯çš„ cookie æ¥å®ç°å‰åç«¯çš„è®¤è¯ï¼Œç”±äº http è¯·æ±‚æ—¶æ˜¯æ— çŠ¶æ€çš„ï¼ŒæœåŠ¡å™¨æ­£å¸¸æƒ…å†µä¸‹æ˜¯ä¸çŸ¥é“å½“å‰è¯·æ±‚ä¹‹å‰æœ‰æ²¡æœ‰æ¥è¿‡ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¦‚æœè¦è®°å½•çŠ¶æ€ï¼Œå°±éœ€è¦åœ¨æœåŠ¡å™¨ç«¯åˆ›å»ºä¸€ä¸ªä¼šè¯ (seesion), å°†åŒä¸€ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚éƒ½ç»´æŠ¤åœ¨å„è‡ªå¾—ä¼šä¼šè¯ä¸­ï¼Œæ¯å½“è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨ç«¯çš„æ—¶å€™ï¼Œå…ˆå»æŸ¥ä¸€ä¸‹è¯¥å®¢æˆ·ç«¯æœ‰æ²¡æœ‰åœ¨æœåŠ¡å™¨ç«¯åˆ›å»º seesionï¼Œå¦‚æœæœ‰åˆ™å·²ç»è®¤è¯æˆåŠŸäº†ï¼Œå¦åˆ™å°±æ²¡æœ‰è®¤è¯ã€‚</p>\n<h4 id=\"è®¤è¯è¿‡ç¨‹-1\"><a href=\"#è®¤è¯è¿‡ç¨‹-1\" class=\"headerlink\" title=\"è®¤è¯è¿‡ç¨‹\"></a>è®¤è¯è¿‡ç¨‹</h4><ol>\n<li>æœåŠ¡å™¨åœ¨æ¥å—å®¢æˆ·ç«¯é¦–æ¬¡è®¿é—®æ—¶åœ¨æœåŠ¡å™¨ç«¯åˆ›å»º seesionï¼Œç„¶åä¿å­˜ seesionï¼ˆæˆ‘ä»¬å¯ä»¥å°† seesion ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä¹Ÿå¯ä»¥ä¿å­˜åœ¨ redis ä¸­ï¼Œæ¨èä½¿ç”¨åè€…ï¼‰ï¼Œç„¶åç»™è¿™ä¸ª session ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†å­—ç¬¦ä¸², ç„¶ååœ¨å“åº”å¤´ä¸­ç§ä¸‹è¿™ä¸ªå”¯ä¸€æ ‡è¯†å­—ç¬¦ä¸²ã€‚</li>\n<li>ç­¾åã€‚è¿™ä¸€æ­¥åªæ˜¯å¯¹ sid è¿›è¡ŒåŠ å¯†å¤„ç†ï¼ŒæœåŠ¡ç«¯ä¼šæ ¹æ®è¿™ä¸ª secret å¯†é’¥è¿›è¡Œè§£å¯†ã€‚ï¼ˆéå¿…éœ€æ­¥éª¤ï¼‰</li>\n<li>æµè§ˆå™¨ä¸­æ”¶åˆ°è¯·æ±‚å“åº”çš„æ—¶å€™ä¼šè§£æå“åº”å¤´ï¼Œç„¶åå°† sid ä¿å­˜åœ¨æœ¬åœ° cookie ä¸­ï¼Œæµè§ˆå™¨åœ¨ä¸‹æ¬¡ http è¯·æ±‚çš„è¯·æ±‚å¤´ä¸­ä¼šå¸¦ä¸Šè¯¥åŸŸåä¸‹çš„ cookie ä¿¡æ¯ã€‚</li>\n<li>æœåŠ¡å™¨åœ¨æ¥å—å®¢æˆ·ç«¯è¯·æ±‚æ—¶ä¼šå»è§£æè¯·æ±‚å¤´ cookie ä¸­çš„ sidï¼Œç„¶åæ ¹æ®è¿™ä¸ª sid å»æ‰¾æœåŠ¡å™¨ç«¯ä¿å­˜çš„è¯¥å®¢æˆ·ç«¯çš„ sessionï¼Œç„¶ååˆ¤æ–­è¯¥è¯·æ±‚æ˜¯å¦åˆæ³•ã€‚</li>\n</ol>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/38019076-382f84f8-32a9-11e8-9c5d-ef47b58185ad.png\" alt=\"\"></p>\n<h4 id=\"å®Œæ•´ä»£ç -1\"><a href=\"#å®Œæ•´ä»£ç -1\" class=\"headerlink\" title=\"å®Œæ•´ä»£ç \"></a>å®Œæ•´ä»£ç </h4><p><strong>server.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> RedisStore = <span class=\"built_in\">require</span>(<span class=\"string\">'connect-redis'</span>)(express.session);</span><br><span class=\"line\"><span class=\"keyword\">var</span> app = express();</span><br><span class=\"line\"><span class=\"keyword\">var</span> secret = <span class=\"string\">'ifyour'</span>;</span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½® Cookie</span></span><br><span class=\"line\">app.use(express.cookieParser(secret));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è®¾ç½® Session</span></span><br><span class=\"line\">app.use(</span><br><span class=\"line\">  express.session(&#123;</span><br><span class=\"line\">    store: <span class=\"keyword\">new</span> RedisStore(&#123;</span><br><span class=\"line\">      host: <span class=\"string\">'127.0.0.1'</span>,</span><br><span class=\"line\">      port: <span class=\"number\">6379</span>,</span><br><span class=\"line\">      db: <span class=\"string\">'session_db'</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    secret: secret</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">'/'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> session = req.session;</span><br><span class=\"line\">  session.time = session.time || <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> n = session.time++;</span><br><span class=\"line\">  res.send(<span class=\"string\">'hello, session id:'</span> + session.id + <span class=\"string\">'count:'</span> + n);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(<span class=\"number\">9080</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"Token-éªŒè¯\"><a href=\"#Token-éªŒè¯\" class=\"headerlink\" title=\"Token éªŒè¯\"></a>Token éªŒè¯</h3><h4 id=\"è®¤è¯è¿‡ç¨‹-2\"><a href=\"#è®¤è¯è¿‡ç¨‹-2\" class=\"headerlink\" title=\"è®¤è¯è¿‡ç¨‹\"></a>è®¤è¯è¿‡ç¨‹</h4><ol>\n<li>å®¢æˆ·ç«¯ä½¿ç”¨ç”¨æˆ·åè·Ÿå¯†ç è¯·æ±‚ç™»å½•</li>\n<li>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œå»éªŒè¯ç”¨æˆ·åä¸å¯†ç </li>\n<li>éªŒè¯æˆåŠŸåï¼ŒæœåŠ¡ç«¯ä¼šç­¾å‘ä¸€ä¸ª Tokenï¼Œå†æŠŠè¿™ä¸ª Token å‘é€ç»™å®¢æˆ·ç«¯</li>\n<li>å®¢æˆ·ç«¯æ”¶åˆ° Token ä»¥åå¯ä»¥æŠŠå®ƒå­˜å‚¨èµ·æ¥ï¼Œæ¯”å¦‚æ”¾åœ¨ Cookie é‡Œæˆ–è€… LocalStorage é‡Œ</li>\n<li>å®¢æˆ·ç«¯æ¯æ¬¡å‘æœåŠ¡ç«¯è¯·æ±‚èµ„æºçš„æ—¶å€™éœ€è¦å¸¦ç€æœåŠ¡ç«¯ç­¾å‘çš„ Token</li>\n<li>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œç„¶åå»éªŒè¯å®¢æˆ·ç«¯è¯·æ±‚é‡Œé¢å¸¦ç€çš„ Tokenï¼Œå¦‚æœéªŒè¯æˆåŠŸï¼Œå°±å‘å®¢æˆ·ç«¯è¿”å›è¯·æ±‚çš„æ•°æ®</li>\n</ol>\n<p>æ€»çš„æ¥è¯´å°±æ˜¯å®¢æˆ·ç«¯åœ¨é¦–æ¬¡ç™»é™†ä»¥åï¼ŒæœåŠ¡ç«¯å†æ¬¡æ¥æ”¶ http è¯·æ±‚çš„æ—¶å€™ï¼Œå°±åªè®¤ token äº†ï¼Œè¯·æ±‚åªè¦æ¯æ¬¡æŠŠ token å¸¦ä¸Šå°±è¡Œäº†ï¼ŒæœåŠ¡å™¨ç«¯ä¼šæ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚ï¼Œç„¶åæ ¡éªŒ token çš„åˆæ³•æ€§ï¼Œåˆæ³•å°±æ”¾è¡Œï¼Œä¸åˆæ³•å°±è¿”å› 401ï¼ˆé‰´æƒå¤±è´¥ï¼‰ã€‚</p>\n<p>ä¹çš„ä¸€çœ‹å¥½åƒå’Œå‰é¢çš„ seesion-cookie æœ‰ç‚¹åƒï¼Œseesion-cookie æ˜¯é€šè¿‡ seesionid æ¥ä½œä¸ºæµè§ˆå™¨å’ŒæœåŠ¡ç«¯çš„é“¾æ¥æ¡¥æ¢ï¼Œè€Œ token éªŒè¯æ–¹å¼è²Œä¼¼æ˜¯ token æ¥èµ·åˆ° seesionid çš„è§’è‰²ã€‚å…¶å®è¿™ä¸¤è€…å·®åˆ«æ˜¯å¾ˆå¤§çš„ã€‚</p>\n<h4 id=\"ä¸-seesion-cookie-çš„åŒºåˆ«\"><a href=\"#ä¸-seesion-cookie-çš„åŒºåˆ«\" class=\"headerlink\" title=\"ä¸ seesion-cookie çš„åŒºåˆ«\"></a>ä¸ seesion-cookie çš„åŒºåˆ«</h4><ol>\n<li>sessionid æ˜¯ä¸€ä¸ªå”¯ä¸€æ ‡è¯†çš„å­—ç¬¦ä¸²ï¼ŒæœåŠ¡ç«¯æ˜¯æ ¹æ®è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæ¥æŸ¥è¯¢åœ¨æœåŠ¡å™¨ç«¯ä¿æŒçš„ seesionï¼Œè¿™é‡Œé¢æ‰ä¿å­˜ç€ç”¨æˆ·çš„ç™»é™†çŠ¶æ€ã€‚ä½†æ˜¯ token æœ¬èº«å°±æ˜¯ä¸€ç§ç™»é™†æˆåŠŸå‡­è¯ï¼Œä»–æ˜¯åœ¨ç™»é™†æˆåŠŸåæ ¹æ®æŸç§è§„åˆ™ç”Ÿæˆçš„ä¸€ç§ä¿¡æ¯å‡­è¯ï¼Œä»–é‡Œé¢æœ¬èº«å°±ä¿å­˜ç€ç”¨æˆ·çš„ç™»é™†çŠ¶æ€ã€‚æœåŠ¡å™¨ç«¯åªéœ€è¦æ ¹æ®å®šä¹‰çš„è§„åˆ™æ ¡éªŒè¿™ä¸ª token æ˜¯å¦åˆæ³•å°±è¡Œã€‚</li>\n<li>session-cookie æ˜¯éœ€è¦ cookie é…åˆçš„ï¼Œå±…ç„¶è¦ cookieï¼Œé‚£ä¹ˆåœ¨ http ä»£ç†å®¢æˆ·ç«¯çš„é€‰æ‹©ä¸Šå°±æ˜¯åªæœ‰æµè§ˆå™¨äº†ï¼Œå› ä¸ºåªæœ‰æµè§ˆå™¨æ‰ä¼šå»è§£æè¯·æ±‚å“åº”å¤´é‡Œé¢çš„ cookie, ç„¶åæ¯æ¬¡è¯·æ±‚å†é»˜è®¤å¸¦ä¸Šè¯¥åŸŸåä¸‹çš„ cookieã€‚ä½†æ˜¯æˆ‘ä»¬çŸ¥é“ http ä»£ç†å®¢æˆ·ç«¯ä¸åªæœ‰æµè§ˆå™¨ï¼Œè¿˜æœ‰åŸç”Ÿ APP ç­‰ç­‰ï¼Œè¿™ä¸ªæ—¶å€™ cookie æ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œæˆ–è€…æµè§ˆå™¨ç«¯æ˜¯å¯ä»¥ç¦æ­¢ cookie çš„ (è™½ç„¶å¯ä»¥ï¼Œä½†æ˜¯è¿™åŸºæœ¬ä¸Šæ˜¯å±äºåƒé¥±æ²¡äº‹å¹²çš„äººå¹²çš„äº‹)ï¼Œä½†æ˜¯ token å°±ä¸ä¸€æ ·ï¼Œä»–æ˜¯ç™»é™†è¯·æ±‚åœ¨ç™»é™†æˆåŠŸåå†è¯·æ±‚å“åº”ä½“ä¸­è¿”å›çš„ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯åœ¨æ”¶åˆ°å“åº”çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠä»–å­˜åœ¨æœ¬åœ°çš„ cookieã€storageï¼Œæˆ–è€…å†…å­˜ä¸­ï¼Œç„¶åå†ä¸‹ä¸€æ¬¡è¯·æ±‚çš„è¯·æ±‚å¤´é‡å¸¦ä¸Šè¿™ä¸ª token å°±è¡Œäº†ã€‚ç®€å•ç‚¹æ¥è¯´ cookie-session æœºåˆ¶ä»–é™åˆ¶äº†å®¢æˆ·ç«¯çš„ç±»å‹ï¼Œè€Œ token éªŒè¯æœºåˆ¶ä¸°å¯Œäº†å®¢æˆ·ç«¯ç±»å‹ã€‚</li>\n<li>æ—¶æ•ˆæ€§ã€‚session-cookie çš„ sessionid æ˜¯åœ¨ç™»é™†æ—¶ç”Ÿæˆçš„ï¼Œè€Œä¸”åœ¨ç™»å‡ºæ—¶ä¸€ç›´ä¸å˜ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå®‰å…¨æ€§å°±ä¼šé™ä½ï¼Œè€Œ token æ˜¯å¯ä»¥åœ¨ä¸€æ®µæ—¶é—´å†…åŠ¨æ€æ”¹å˜çš„ã€‚</li>\n<li>å¯æ‰©å±•æ€§ã€‚token éªŒè¯æœ¬èº«æ˜¯æ¯”è¾ƒçµæ´»çš„ï¼Œä¸€æ˜¯ token çš„è§£å†³æ–¹æ¡ˆæœ‰è®¸å¤šï¼Œå¸¸ç”¨çš„æ˜¯ JWTï¼ŒäºŒæ¥æˆ‘ä»¬å¯ä»¥åŸºäº token éªŒè¯æœºåˆ¶ï¼Œä¸“é—¨åšä¸€ä¸ªé‰´æƒæœåŠ¡ï¼Œç”¨å®ƒå‘å¤šä¸ªæœåŠ¡çš„è¯·æ±‚è¿›è¡Œç»Ÿä¸€é‰´æƒã€‚</li>\n</ol>\n<p>ä¸‹é¢å°±æ‹¿æœ€å¸¸ç”¨çš„ JWTï¼ˆJSON WEB TOKENï¼‰æ¥è¯´ï¼š</p>\n<p>JWT æ˜¯ Auth0 æå‡ºçš„é€šè¿‡å¯¹ JSON è¿›è¡ŒåŠ å¯†ç­¾åæ¥å®ç°æˆæƒéªŒè¯çš„æ–¹æ¡ˆï¼Œå°±æ˜¯ç™»é™†æˆåŠŸåå°†ç›¸å…³ä¿¡æ¯ç»„æˆ json å¯¹è±¡ï¼Œç„¶åå¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡ŒæŸä¸­æ–¹å¼çš„åŠ å¯†ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯åœ¨ä¸‹æ¬¡è¯·æ±‚æ—¶å¸¦ä¸Šè¿™ä¸ª tokenï¼ŒæœåŠ¡ç«¯å†æ”¶åˆ°è¯·æ±‚æ—¶æ ¡éªŒ token åˆæ³•æ€§ï¼Œå…¶å®ä¹Ÿå°±æ˜¯åœ¨æ ¡éªŒè¯·æ±‚çš„åˆæ³•æ€§ã€‚JWT å¯¹è±¡é€šå¸¸ç”±ä¸‰éƒ¨åˆ†æ„æˆï¼š</p>\n<p>1ï¸âƒ£ Headersï¼š åŒ…æ‹¬ç±»åˆ«ï¼ˆtypï¼‰ã€åŠ å¯†ç®—æ³•ï¼ˆalgï¼‰</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"alg\"</span>: <span class=\"string\">\"HS256\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"typ\"</span>: <span class=\"string\">\"JWT\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2ï¸âƒ£ Claimsï¼šåŒ…æ‹¬éœ€è¦ä¼ é€’çš„ç”¨æˆ·ä¿¡æ¯</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"sub\"</span>: <span class=\"string\">\"1234567890\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"John Doe\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"admin\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>3ï¸âƒ£ Signatureï¼šæ ¹æ® alg ç®—æ³•ä¸ç§æœ‰ç§˜é’¥è¿›è¡ŒåŠ å¯†å¾—åˆ°çš„ç­¾åå­—ä¸²ï¼Œè¿™ä¸€æ®µæ˜¯æœ€é‡è¦çš„æ•æ„Ÿä¿¡æ¯ï¼Œåªèƒ½åœ¨æœåŠ¡ç«¯è§£å¯†</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HMACSHA256(</span><br><span class=\"line\">  base64UrlEncode(Headers) + &apos;.&apos; + base64UrlEncode(Claims),</span><br><span class=\"line\">  SECREATE_KEY</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>ç¼–ç ä¹‹åçš„ JWT çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ä¸€ä¸²å­—ç¬¦ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ</span><br></pre></td></tr></table></figure>\n<h4 id=\"å®Œæ•´ä»£ç -2\"><a href=\"#å®Œæ•´ä»£ç -2\" class=\"headerlink\" title=\"å®Œæ•´ä»£ç \"></a>å®Œæ•´ä»£ç </h4><p><strong>auth.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> jwt = <span class=\"built_in\">require</span>(<span class=\"string\">'jwt-simple'</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> secret = <span class=\"string\">'wangyy'</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> time = <span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* æ£€éªŒ token åˆæ³•æ€§ */</span></span><br><span class=\"line\">  validate: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> token = req.body.token || req.headers[<span class=\"string\">'xssToken'</span>];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (token) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> decodeToken = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// é˜²æ­¢å‡å†’ token è§£ææŠ¥é”™</span></span><br><span class=\"line\">        decodeToken = jwt.decode(token, secret, <span class=\"string\">'HS256'</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">        res.status(<span class=\"number\">401</span>).send(<span class=\"string\">'éæ³•è®¿é—®'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> exp = decodeToken.exp;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!exp) &#123;</span><br><span class=\"line\">        res.status(<span class=\"number\">401</span>).send(<span class=\"string\">'éæ³•è®¿é—®'</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> now = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (exp &gt; now + time * <span class=\"number\">60</span> * <span class=\"number\">1000</span>) &#123;</span><br><span class=\"line\">        res.send(&#123; <span class=\"attr\">code</span>: <span class=\"string\">'002'</span>, <span class=\"attr\">errorMsg</span>: <span class=\"string\">'æˆæƒè¶…æ—¶'</span> &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      next();</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      res.status(<span class=\"number\">401</span>).send(<span class=\"string\">'éæ³•è®¿é—®'</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">/* ç”Ÿæˆ token*/</span></span><br><span class=\"line\">  makeToken() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> Token = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> payload = &#123;</span><br><span class=\"line\">      time: <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime(),</span><br><span class=\"line\">      exp: <span class=\"keyword\">this</span>.makeExp(time)</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    Token = jwt.encode(payload, secret, HS256);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Token;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">/* ç”Ÿæˆ token è¿‡æœŸæ—¶é—´ */</span></span><br><span class=\"line\">  makeExp: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">time</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> stam = time601000;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><strong>Server.js</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> app = express();</span><br><span class=\"line\"><span class=\"keyword\">let</span> bodyParser = <span class=\"built_in\">require</span>(<span class=\"string\">'body-parser'</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> auth = <span class=\"built_in\">require</span>(<span class=\"string\">'./lib/auth.js'</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> chalk = <span class=\"built_in\">require</span>(<span class=\"string\">'chalk'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(bodyParser.json());</span><br><span class=\"line\">app.post(<span class=\"string\">'/login'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> Token = auth.makeToken();</span><br><span class=\"line\">  res.json(&#123; <span class=\"attr\">result</span>: <span class=\"string\">'success'</span>, <span class=\"attr\">token</span>: Token &#125;, <span class=\"number\">200</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">app.use(<span class=\"string\">'*'</span>, [auth.validate], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">  res.send(<span class=\"string\">'success'</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(<span class=\"string\">'9999'</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"OAuth-å¼€æ”¾æˆæƒ\"><a href=\"#OAuth-å¼€æ”¾æˆæƒ\" class=\"headerlink\" title=\"OAuth(å¼€æ”¾æˆæƒ)\"></a>OAuth(å¼€æ”¾æˆæƒ)</h3><p>OAuthï¼ˆå¼€æ”¾æˆæƒï¼‰æ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œå…è®¸ç”¨æˆ·æˆæƒç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®ä»–ä»¬å­˜å‚¨åœ¨å¦å¤–çš„æœåŠ¡æä¾›è€…ä¸Šçš„ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦å°†ç”¨æˆ·åå’Œå¯†ç æä¾›ç»™ç¬¬ä¸‰æ–¹ç½‘ç«™æˆ–åˆ†äº«ä»–ä»¬æ•°æ®çš„æ‰€æœ‰å†…å®¹ï¼Œä¸ºäº†ä¿æŠ¤ç”¨æˆ·æ•°æ®çš„å®‰å…¨å’Œéšç§ï¼Œç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®ç”¨æˆ·æ•°æ®å‰éƒ½éœ€è¦æ˜¾å¼çš„å‘ç”¨æˆ·å¾æ±‚æˆæƒã€‚æˆ‘ä»¬å¸¸è§çš„æä¾› OAuth è®¤è¯æœåŠ¡çš„å‚å•†æœ‰æ”¯ä»˜å®ã€QQã€å¾®ä¿¡ã€‚</p>\n<p>OAuth åè®®åˆæœ‰ 1.0 å’Œ 2.0 ä¸¤ä¸ªç‰ˆæœ¬ã€‚ç›¸æ¯”è¾ƒ 1.0 ç‰ˆï¼Œ2.0 ç‰ˆæ•´ä¸ªæˆæƒéªŒè¯æµç¨‹æ›´ç®€å•æ›´å®‰å…¨ï¼Œä¹Ÿæ˜¯ç›®å‰æœ€ä¸»è¦çš„ç”¨æˆ·èº«ä»½éªŒè¯å’Œæˆæƒæ–¹å¼ã€‚</p>\n<h4 id=\"è®¤è¯è¿‡ç¨‹-3\"><a href=\"#è®¤è¯è¿‡ç¨‹-3\" class=\"headerlink\" title=\"è®¤è¯è¿‡ç¨‹\"></a>è®¤è¯è¿‡ç¨‹</h4><p>ä¸‹é¢æ˜¯ä¸€å¼  Auth2.0 çš„æµç¨‹å›¾ï¼š</p>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/48976006-b7ea4600-f0b9-11e8-8f94-1102761320b0.png\" alt=\"image\"></p>\n<p>ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒAuth2.0 æµç¨‹åˆ†ä¸ºå…­æ­¥ï¼š</p>\n<p>1ï¸âƒ£ å‘ç”¨æˆ·è¯·æ±‚æˆæƒï¼Œç°åœ¨å¾ˆå¤šçš„ç½‘ç«™åœ¨ç™»é™†çš„æ—¶å€™éƒ½æœ‰ç¬¬ä¸‰æ–¹ç™»é™†çš„å…¥å£ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»ç­‰ç¬¬ä¸‰æ–¹å…¥å£æ—¶ï¼Œç¬¬ä¸‰æ–¹æˆæƒæœåŠ¡ä¼šå¼•å¯¼æˆ‘ä»¬è¿›å…¥ç¬¬ä¸‰æ–¹ç™»é™†æˆæƒé¡µé¢ã€‚</p>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/48976180-35638580-f0bd-11e8-9c0a-c6aee6bf7da5.png\" alt=\"image\"></p>\n<p>é€šè¿‡ç¬¬ä¸‰æ–¹è¯·æ±‚æˆæƒé¡µé¢çš„æµè§ˆå™¨åœ°å€æ åœ°å€å¯ä»¥çœ‹å‡ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://graph.qq.com/oauth2.0/show?which=Login&amp;display=pc&amp;response_type=code&amp;client_id=100270989&amp;redirect_uri=https%3A%2F%2Fpassport.csdn.net%2Faccount%2Flogin%3Foauth_provider%3DQQProvider&amp;state=test</span><br></pre></td></tr></table></figure>\n<p>è¿™é‡Œçš„åœ°å€é‡Œé¢çš„ <code>%</code> æ˜¯æµè§ˆå™¨å¼ºåˆ¶ç¼–ç åçš„æ˜¾ç¤ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>decodeURIComponent</code> è¿›è¡Œè§£ç ï¼Œè§£ç åæ˜¯è¿™æ ·ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://graph.qq.com/oauth2.0/show?which=Login&amp;display=pc&amp;response_type=code&amp;client_id=100270989&amp;redirect_uri=https://passport.csdn.net/account/login?oauth_provider=QQProvider&amp;state=test</span><br></pre></td></tr></table></figure>\n<p>è¿™ä¸ª url åœ°å€æˆ‘ä»¬å¯ä»¥çœ‹è§ Auth2.0 å¸¸è§çš„å‡ ä¸ªå‚æ•°ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">response_type:  è¿”å›ç±»å‹</span><br><span class=\"line\">client_id:      ç¬¬ä¸‰æ–¹åº”ç”¨ id, ç”±æˆæƒæœåŠ¡å™¨ï¼ˆqqï¼‰åœ¨ç¬¬ä¸‰æ–¹åº”ç”¨æäº¤æ—¶é¢å‘ç»™ç¬¬ä¸‰æ–¹åº”ç”¨ã€‚</span><br><span class=\"line\">redirect_uri:   ç™»é™†æˆåŠŸé‡å®šå‘é¡µé¢</span><br><span class=\"line\">oauth_provider: ç¬¬ä¸‰æ–¹æˆæƒæä¾›æ–¹</span><br><span class=\"line\">state:          ç”±ç¬¬ä¸‰æ–¹åº”ç”¨ç»™å‡ºçš„éšæœºç </span><br></pre></td></tr></table></figure>\n<p>2ï¸âƒ£ è¿”å›ç”¨æˆ·å‡­è¯ï¼ˆcodeï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªå‡­è¯ï¼ˆcodeï¼‰ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æˆæƒå¹¶ç™»é™†åï¼ŒæˆæƒæœåŠ¡å™¨å°†ç”Ÿæˆä¸€ä¸ªç”¨æˆ·å‡­è¯ï¼ˆcodeï¼‰ã€‚è¿™ä¸ªç”¨æˆ·å‡­è¯ä¼šé™„åŠ åœ¨é‡å®šå‘çš„åœ°å€ <code>redirect_uri</code> çš„åé¢</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://passport.csdn.net/account/login?code=9e3efa6cea739f9aaab2&amp;state=XXX</span><br></pre></td></tr></table></figure>\n<p>3ï¸âƒ£ è¯·æ±‚æˆæƒæœåŠ¡å™¨æˆæƒ</p>\n<p>ç»è¿‡ç¬¬äºŒéƒ¨è·å– code ååé¢çš„å·¥ä½œå°±å¯ä»¥äº¤ç»™åå°å»å¤„ç†çš„ï¼Œå’Œç”¨æˆ·çš„äº¤äº’å°±ç»“æŸäº†ã€‚æ¥ä¸‹æ¥æˆ‘çš„éœ€è¦è·å–å‡­è¯ï¼ˆAccess Tokenï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä»–æ¥å‘æˆæƒæœåŠ¡å™¨è·å–ç”¨æˆ·ä¿¡æ¯ç­‰èµ„æºã€‚ ç¬¬ä¸‰æ–¹åº”ç”¨åå°é€šè¿‡ç¬¬äºŒæ­¥çš„å‡­è¯ï¼ˆcodeï¼‰å‘æˆæƒæœåŠ¡å™¨è¯·æ±‚å‡­è¯ï¼ˆAccess Tokenï¼‰ï¼Œè¿™æ—¶å€™éœ€è¦ä»¥ä¸‹å‡ ä¸ªä¿¡æ¯ï¼š</p>\n<ul>\n<li><code>client_id</code>: æ ‡è¯†ç¬¬ä¸‰æ–¹åº”ç”¨çš„ idï¼Œç”±æˆæƒæœåŠ¡å™¨åœ¨ç¬¬ä¸‰æ–¹åº”ç”¨æäº¤æ—¶é¢å‘ç»™ç¬¬ä¸‰æ–¹åº”ç”¨</li>\n<li><code>client_secret</code>: ç¬¬ä¸‰æ–¹åº”ç”¨å’ŒæˆæƒæœåŠ¡å™¨ä¹‹é—´çš„å®‰å…¨å‡­è¯ï¼Œç”±æˆæƒæœåŠ¡å™¨åœ¨ç¬¬ä¸‰æ–¹åº”ç”¨æäº¤æ—¶é¢å‘ç»™ç¬¬ä¸‰æ–¹åº”ç”¨</li>\n<li><code>code</code>: ç¬¬ä¸€æ­¥ä¸­è¿”å›çš„ç”¨æˆ·å‡­è¯ <code>redirect_uri</code> ç¬¬ä¸€æ­¥ç”Ÿæˆç”¨æˆ·å‡­è¯åè·³è½¬åˆ°ç¬¬äºŒæ­¥æ—¶çš„åœ°å€</li>\n<li><code>state</code>: ç”±ç¬¬ä¸‰æ–¹åº”ç”¨ç»™å‡ºçš„éšæœºç </li>\n</ul>\n<p>4ï¸âƒ£ æˆæƒæœåŠ¡å™¨åŒæ„æˆæƒåï¼Œè¿”å›ä¸€ä¸ªèµ„æºè®¿é—®çš„å‡­è¯ï¼ˆAccess Tokenï¼‰ã€‚</p>\n<p>5ï¸âƒ£ ç¬¬ä¸‰æ–¹åº”ç”¨é€šè¿‡ç¬¬å››æ­¥çš„å‡­è¯ï¼ˆAccess Tokenï¼‰å‘èµ„æºæœåŠ¡å™¨è¯·æ±‚ç›¸å…³èµ„æºã€‚</p>\n<p>6ï¸âƒ£ èµ„æºæœåŠ¡å™¨éªŒè¯å‡­è¯ï¼ˆAccess Tokenï¼‰é€šè¿‡åï¼Œå°†ç¬¬ä¸‰æ–¹åº”ç”¨è¯·æ±‚çš„èµ„æºè¿”å›ã€‚</p>\n<p>ä»ç”¨æˆ·è§’åº¦æ¥è¯´ï¼Œç¬¬ä¸‰æ–¹æˆæƒå¯ä»¥è®©æˆ‘ä»¬å¿«é€Ÿçš„ç™»é™†åº”ç”¨ï¼Œæ— éœ€è¿›è¡Œç¹ççš„æ³¨å†Œï¼ŒåŒæ—¶ä¸ç”¨è®°ä½å„ç§è´¦å·å¯†ç ã€‚åªéœ€è¦è®°ä½è‡ªå·±å¸¸ç”¨çš„å‡ ä¸ªè´¦å·å°± OK äº†ã€‚ ä»äº§å“ç»ç†çš„è§’åº¦æ¥æ‰€ï¼Œè¿™ç§æˆæƒæ–¹å¼æé«˜ç”¨æˆ·çš„ä½“éªŒæ»¡æ„åº¦ã€‚å¦ä¸€æ–¹é¢å¯ä»¥è·å–æ›´å¤šçš„ç”¨æˆ·ã€‚</p>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>æˆæƒæ–¹å¼å¤šç§å¤šæ ·ï¼Œä¸»è¦è¿˜æ˜¯è¦å–å†³äºæˆ‘ä»¬å¯¹äºäº§å“çš„å®šä½ã€‚å¦‚æœæˆ‘ä»¬çš„äº§å“åªæ˜¯åœ¨ä¼ä¸šå†…éƒ¨ä½¿ç”¨ï¼ŒToken å’Œ Session-cookie å°±å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œå¦‚æœæ˜¯é¢å‘äº’è”ç½‘çš„å¤§ä¼—ç”¨æˆ·ï¼Œé‚£ä¹ˆç¬¬ä¸‰æ–¹æˆæƒ OAuth åœ¨ç”¨æˆ·ä½“éªŒåº¦ä¸Šä¼šæœ‰ä¸€ä¸ªå¾ˆå¤§çš„æå‡ã€‚</p>"},{"title":"å¦‚ä½•åœ¨ Git ä¸­ä½¿ç”¨æ’¤æ¶ˆæ“ä½œ","comments":1,"date":"2018-06-26T23:19:14.000Z","from":"https://blog.github.com/2015-06-08-how-to-undo-almost-anything-with-git/","_content":"\nç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯ä½ å¯ä»¥è½»æ˜“åœ°æ’¤é”€ä¹‹å‰é”™è¯¯çš„æ“ä½œã€‚å½“ä½ ç”¨ `git commit` æäº¤äº†ä¸€ä¸ªæ–°çš„æ›´æ”¹å git ä¼šå°†å½“æ—¶çš„æ–‡ä»¶å†…å®¹æš‚æ—¶ä¿å­˜ä¸‹æ¥ï¼Œä¹‹åä½ å°±å¯ä»¥ç”¨ git éšæ„å›æ»šåˆ°ä»»æ„ä¸€ä¸ªç‰ˆæœ¬ã€‚è¿™ç¯‡æ–‡ç« ä¼šä»‹ç»ä¸€äº›å¸¸è§çš„å¯èƒ½ç”¨åˆ°æ’¤é”€ `undo` æ“ä½œçš„æƒ…å†µã€‚\n\n<!-- more -->\n\n### æ’¤é”€ä¸€ä¸ªå·²å‘å¸ƒçš„æ›´æ–°\n\n**æƒ…æ™¯**: ä½ å·²ç»ç”¨ `git push` å°†ä»£ç æäº¤åˆ°äº† GitHubï¼Œç„¶åä½ æ„è¯†åˆ°è¿™å…¶ä¸­çš„ä¸€ä¸ª commit æœ‰é”™è¯¯ï¼Œäºæ˜¯ä½ æƒ³æ’¤é”€é‚£ä¸ª commitã€‚\n\n**æ“ä½œ**: `git revert <SHA>`\n\n**æ•ˆæœ**: git ä¼šæ–°å»ºä¸€ä¸ªæ–°çš„ commit æ¥æ‰§è¡Œæä¾›çš„ <SHA> å¯¹åº” commit çš„ç›¸åçš„æ›´æ”¹ï¼Œä»»ä½•åœ¨è¯¥æ—§ commit ä¸­åˆ é™¤çš„å†…å®¹å°†ä¼šåœ¨æ–° commit ä¸­æ·»åŠ è¿›å»ï¼Œåä¹‹äº¦ç„¶ã€‚\n\nè¿™æ˜¯ git é‡Œæœ€å®‰å…¨çš„æ’¤æ¶ˆæ“ä½œçš„åŠæ³•ï¼Œå› ä¸ºè¿™ä¸ä¼šå½±å“ä½ çš„æäº¤å†å²ã€‚äºæ˜¯ç°åœ¨ä½ å¯ä»¥æäº¤æ–°çš„ commit å»æ’¤é”€ä¹‹å‰é”™è¯¯çš„æ“ä½œäº†ã€‚\n\n### ä¿®æ”¹ä¸Šæ¬¡ commit çš„æäº¤ä¿¡æ¯\n\n**æƒ…æ™¯**: ä½ åœ¨ä¸Šæ¬¡ commit æäº¤ä¿¡æ¯ä¸­æ‰“é”™äº†ä¸€ä¸ªå•è¯ï¼Œæ¯”å¦‚ä½ æ‰§è¡Œäº† `git commit -m \"fxied bug #42\"` ç„¶åä½ æ„è¯†åˆ°åº”è¯¥æ˜¯ `fixed bug #42`ã€‚\n\n**æ“ä½œ**: `git commit --amend` æˆ– `git commit --amend -m \"Fixes bug #42\"`\n\n**æ•ˆæœ**: `git commit --amend` ç»“åˆæœ€æ–°çš„æ–‡ä»¶ä¿®æ”¹æƒ…å†µå’Œä¸Šä¸€æ¬¡æäº¤ä¿¡æ¯æ›´æ–°å¹¶æ›¿æ¢ä¸Šä¸€æ¬¡æäº¤ã€‚æ²¡æœ‰æ–°çš„æ–‡ä»¶æ›´æ”¹å°±ç›´æ¥è¦†ç›–ä¸Šæ¬¡æäº¤ã€‚\n\n### æ’¤é”€æœ¬åœ°ä¿®æ”¹\n\n**æƒ…æ™¯**: ä½ å®¶çš„å–µæ˜Ÿäººè·‘åˆ°ä½ çš„é”®ç›˜ä¸Šè£…é€¼ç”¨åŒçˆªæ‰“å­—ç„¶åä¸çŸ¥æ€ä¹ˆè¿˜ç‚¹äº†ä¿å­˜ï¼Œç„¶åç¼–è¾‘å™¨è¿˜å´©æºƒäº†ï¼Œä½ è¿˜æ²¡æœ‰ commit è¿™åªçŒ«åšçš„ä¿®æ”¹ï¼Œä½ æƒ³æ’¤é”€é‚£ä¸ªæ–‡ä»¶é‡Œè¢«çŒ«ä¿®æ”¹çš„å†…å®¹ã€‚\n\n**æ“ä½œ**: `git checkout -- <bad filename>`\n\n**æ•ˆæœ**: `git checkout` ä¼šå°†è¯¥æ–‡ä»¶çš„å†…å®¹æ¢å¤åˆ°ä¸Šä¸€æ¬¡ git commit çš„çŠ¶æ€ã€‚ä½ å¯ä»¥æä¾›ä¸€ä¸ªåˆ†æ”¯åç§°æˆ–è€…ç›´æ¥æä¾›è¦å›åˆ°çš„ SHAã€‚\n\nè¯·è®°ä½ï¼Œè¿™ç§æ–¹æ³•ä½œå‡ºçš„æ’¤é”€æ˜¯å½»åº•çš„ï¼Œè¿™äº›å†…å®¹ä¸ä¼šè¢« commit æ‰€ä»¥ä¹‹åä½ å¹¶ä¸èƒ½å†ç”¨ git æ¢å¤è¿™äº›å†…å®¹ã€‚\n\n### é‡ç½®æœ¬åœ°ä¿®æ”¹\n\n**æƒ…æ™¯**: ä½ åœ¨æœ¬åœ° commit äº†ä¸€äº›å†…å®¹ï¼ˆå¹¶æ²¡æœ‰ pushï¼‰ï¼Œä½†æ˜¯ä½ æé”™äº†ï¼Œä½ æƒ³æ’¤é”€æœ€è¿‘è¿™ä¸‰ä¸ª commitï¼Œå°±åƒè®©å®ƒä»¬ä»æ¥ä¸å­˜åœ¨é‚£æ ·ã€‚\n\n**æ“ä½œ**: `git reset <last good SHA>` æˆ– `git reset --hard <last good SHA>`\n\n**æ•ˆæœ**: `git reset` ä¼šè®©ä½ çš„ git å†å²ä¼šé€€åˆ°ä½ æŒ‡å®šçš„ SHA çš„çŠ¶æ€ã€‚è¿™äº› commit ä¸å­˜åœ¨äº†ä½†æ˜¯ä½ ç¡¬ç›˜ä¸Šçš„è¿™äº›æ–‡ä»¶è¿˜æ˜¯ç»´æŒåœ¨è¢«ä¿®æ”¹äº†çš„çŠ¶æ€ï¼Œè¿™æ˜¯æœ€å®‰å…¨çš„åšæ³•ã€‚ä½†æ˜¯æœ‰æ—¶ä½ ä¹Ÿæƒ³åŒæ—¶æ’¤é”€ç¡¬ç›˜ä¸Šçš„ä¿®æ”¹ï¼Œè¿™æ—¶åŠ ä¸Š `--hard` å°±ä¼šå¾ˆæœ‰ç”¨ã€‚\n\n### æ’¤é”€æœ¬åœ°ä¿®æ”¹ä¹‹åé‡åš\n\n**æƒ…æ™¯**: ä½ æäº¤äº†ä¸€äº› commitï¼Œç„¶åæ‰§è¡Œ `git reset --hard` æ¥æ’¤æ¶ˆè¿™äº› commit å¹¶æ¸…é™¤æœ¬åœ°ç¡¬ç›˜ä¸Šçš„ä¿®æ”¹ã€‚ä½†æ˜¯æœ€åä½ æ„è¯†åˆ°ä½ æƒ³è¦å›è¿™äº› commitï¼\n\n**æ“ä½œ**: `git reflog` å’Œ `git reset` æˆ– `git checkout`\n\n**æ•ˆæœ**: `git reflog` æ˜¯ä¸ªä¿®å¤é¡¹ç›®æäº¤å†å²çš„å¥½æ–¹æ³•ã€‚ä½ å¯ä»¥æ‰¾å›å‡ ä¹æ‰€æœ‰å†…å®¹ â€”â€” æ‰€æœ‰ä½  commit è¿‡çš„å†…å®¹ â€”â€” ç”¨ reflog å°±è¡Œã€‚\n\nä½ å¯èƒ½å¯¹ `git log` å¾ˆç†Ÿæ‚‰ï¼Œè¿™ä¸ªæ“ä½œä¼šåˆ—å‡ºä½ çš„ git æäº¤å†å²ã€‚`git reflog` å¾ˆåƒå®ƒï¼Œä½†æ˜¯åˆ—å‡ºçš„æ˜¯ `HEAD` ä¿®æ”¹çš„æ—¶é—´ã€‚\n\nä¸€äº›è¯´æ˜:\n\n- `HEAD` ä¿®æ”¹ã€‚åœ¨åˆ‡æ¢åˆ†æ”¯æ—¶ `HEAD` ä¼šè¢«ä¿®æ”¹ï¼Œç”¨ commit ä¿å­˜ä¿®æ”¹ç„¶åç”¨ reset æ’¤æ¶ˆä¿®æ”¹ã€‚ä½†æ˜¯åœ¨ä½  `git checkout -- <bad filename>` æ—¶å¹¶ä¸ä¼šè¢«ä¿®æ”¹ï¼Œå°±åƒä¸Šé¢è¯´è¿‡çš„é‚£æ ·ï¼Œè¿™äº›ä¿®æ”¹ä¸ä¼šè¢« commitï¼Œæ‰€ä»¥ `git reflog` ä¹Ÿä¸èƒ½å¸®ä½ æ‰¾å›è¿™äº›å†…å®¹ã€‚\n- `git reflog` ä¸æ˜¯æ°¸è¿œæœ‰ç”¨çš„ã€‚git ä¼šå®šæœŸæ¸…ç†é‚£äº›æ— æ³•è¿½æº¯çš„å†…å®¹ã€‚ä¸è¦æœŸæœ›èƒ½ç”¨ `git reflog` æ‰¾å›ä¸€ä¸ªå¤šæœˆä»¥å‰çš„å†…å®¹ã€‚\n- ä½ çš„ `git reflog` ä»…å¯¹ä½ æœ‰ç”¨ã€‚ä½ ä¸èƒ½ç”¨ `git reflog` æ¥æ‰¾å›å…¶ä»–äºº commit çš„ä¿®æ”¹ã€‚\n\n![reflog](https://cloud.githubusercontent.com/assets/2077/6953866/f6b9f054-d891-11e4-8c53-838eff9f40ae.png)\n\nç„¶å...æ¥ä¸‹æ¥æ€ä¹ˆåšæ‰èƒ½æ’¤é”€ä¹‹å‰çš„æ’¤é”€ï¼Ÿè¿™å–å†³ä½ åˆ°ä½ è¦å¹²ä»€ä¹ˆ:\n\n- å¦‚æœä½ æƒ³å›åˆ°ä¸€ä¸ªç‰¹å®šçš„æ—¶é—´ï¼Œç”¨ `git reset --hard <SHA>`ã€‚\n- å¦‚æœä½ æƒ³åœ¨ä¸ä¿®æ”¹æäº¤å†å²çš„æƒ…å†µä¸‹æ‰¾å›é‚£äº›æ–‡ä»¶å¹¶ä½œä¸ºæ–°æ–‡ä»¶ä¿å­˜ï¼Œç”¨ `git checkout <SHA> -- <filename>`ã€‚\n- å¦‚æœä½ æƒ³ä½¿å…¶ä¸­ä¸€ä¸ª commit å›åˆ°ä½ çš„é¡¹ç›®å†å²ä¸­ï¼Œç”¨ `git cherry-pick <SHA>`ã€‚\n\n### æäº¤åˆ°äº†å¦ä¸€ä¸ªåˆ†æ”¯\n\n**æƒ…æ™¯**: ä½ æäº¤äº†ä¸€äº› commitsï¼Œç„¶åæ„è¯†åˆ°ä½ å½“å‰æ˜¯åœ¨ master åˆ†æ”¯ä¸Šï¼Œè€Œä½ å…¶å®æ˜¯æƒ³æäº¤åˆ°ä¸€ä¸ª `feature` åˆ†æ”¯ä¸Šã€‚\n\n**æ“ä½œ**: `git branch feature`, `git reset --hard origin/master`, å’Œ `git checkout feature`\n\n**æ•ˆæœ**: ä½ å¯èƒ½å¸¸å¸¸ä½¿ç”¨ `git checkout -b <name>` æ“ä½œæ¥æ£€å‡ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„åˆ›å»ºæ–°åˆ†æ”¯çš„æ“ä½œï¼Œä½†æ˜¯ä½ å¹¶ä¸æƒ³åŒæ—¶åˆ‡æ¢åˆ°é‚£ä¸ªåˆ†æ”¯ä¸Šã€‚ç°åœ¨ä½¿ç”¨ `git branch feature` æ—¢å¯ä»¥åˆ›å»ºä¸€ä¸ª `feature` æ–°åˆ†æ”¯å¹¶ä¸”ä¸ä¼šåˆ‡æ¢åˆ°é‚£ä¸ªåˆ†æ”¯ï¼ŒåŒæ—¶è¯¥åˆ†æ”¯ä¼šæŒ‡å‘ä½ å½“å‰åˆ†æ”¯æœ€æ–°çš„ä¸€ä¸ª commitã€‚\n\nä¸‹ä¸€æ­¥ï¼Œç”¨ `git reset --hard` å»æ¢å¤ `master` åˆ†æ”¯åˆ° `origin/master` çš„çŠ¶æ€ã€‚\n\næœ€åï¼Œ`git checkout` åˆ°ä½ çš„ `feature` åˆ†æ”¯ï¼Œä½ èƒ½çœ‹åˆ°æ‰€æœ‰çš„æ›´æ”¹ã€‚\n\n### è¦†ç›–æ•´ä¸ªåˆ†æ”¯\n\n**æƒ…æ™¯**: ä½ åŸºäº `master` åˆ†æ”¯åˆ›å»ºäº† `feature` åˆ†æ”¯ï¼Œä½†æ˜¯ `master` åˆ†æ”¯è¿œè¿œè½å `origin/master` çš„æ›´æ”¹ã€‚ç°åœ¨ `master` åˆ†æ”¯å’Œ `origin/master` åŒæ­¥äº†ï¼Œä½ æƒ³é©¬ä¸ŠåŒæ­¥åˆ° `feature` åˆ†æ”¯ï¼Œè¿˜ä¸æ˜¯å†æ¬¡è¿œè¿œè½åã€‚\n\n**æ“ä½œ**: `git checkout feature` å’Œ `git rebase master`\n\n**æ•ˆæœ**: ä½ å¯èƒ½çŸ¥é“ç”¨ `git reset` ç„¶åé‡æ–° commit æ¥è¾¾åˆ°ç±»ä¼¼æ•ˆæœï¼Œä¸è¿‡é‚£æ ·ä¼šä¸¢å¤± commit å†å²ã€‚\n\n<div class=\"tip\">æ–‡ç« ç¿»è¯‘: [@egoist](https://egoist.moe/2015/10/04/how-to-undo-with-git)ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚</div>\n","source":"_posts/å¦‚ä½•åœ¨-Git-ä¸­ä½¿ç”¨æ’¤æ¶ˆæ“ä½œ.md","raw":"---\ntitle: å¦‚ä½•åœ¨ Git ä¸­ä½¿ç”¨æ’¤æ¶ˆæ“ä½œ\ncomments: true\ndate: 2018-06-27 07:19:14\ntags:\nfrom: https://blog.github.com/2015-06-08-how-to-undo-almost-anything-with-git/\n---\n\nç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯ä½ å¯ä»¥è½»æ˜“åœ°æ’¤é”€ä¹‹å‰é”™è¯¯çš„æ“ä½œã€‚å½“ä½ ç”¨ `git commit` æäº¤äº†ä¸€ä¸ªæ–°çš„æ›´æ”¹å git ä¼šå°†å½“æ—¶çš„æ–‡ä»¶å†…å®¹æš‚æ—¶ä¿å­˜ä¸‹æ¥ï¼Œä¹‹åä½ å°±å¯ä»¥ç”¨ git éšæ„å›æ»šåˆ°ä»»æ„ä¸€ä¸ªç‰ˆæœ¬ã€‚è¿™ç¯‡æ–‡ç« ä¼šä»‹ç»ä¸€äº›å¸¸è§çš„å¯èƒ½ç”¨åˆ°æ’¤é”€ `undo` æ“ä½œçš„æƒ…å†µã€‚\n\n<!-- more -->\n\n### æ’¤é”€ä¸€ä¸ªå·²å‘å¸ƒçš„æ›´æ–°\n\n**æƒ…æ™¯**: ä½ å·²ç»ç”¨ `git push` å°†ä»£ç æäº¤åˆ°äº† GitHubï¼Œç„¶åä½ æ„è¯†åˆ°è¿™å…¶ä¸­çš„ä¸€ä¸ª commit æœ‰é”™è¯¯ï¼Œäºæ˜¯ä½ æƒ³æ’¤é”€é‚£ä¸ª commitã€‚\n\n**æ“ä½œ**: `git revert <SHA>`\n\n**æ•ˆæœ**: git ä¼šæ–°å»ºä¸€ä¸ªæ–°çš„ commit æ¥æ‰§è¡Œæä¾›çš„ <SHA> å¯¹åº” commit çš„ç›¸åçš„æ›´æ”¹ï¼Œä»»ä½•åœ¨è¯¥æ—§ commit ä¸­åˆ é™¤çš„å†…å®¹å°†ä¼šåœ¨æ–° commit ä¸­æ·»åŠ è¿›å»ï¼Œåä¹‹äº¦ç„¶ã€‚\n\nè¿™æ˜¯ git é‡Œæœ€å®‰å…¨çš„æ’¤æ¶ˆæ“ä½œçš„åŠæ³•ï¼Œå› ä¸ºè¿™ä¸ä¼šå½±å“ä½ çš„æäº¤å†å²ã€‚äºæ˜¯ç°åœ¨ä½ å¯ä»¥æäº¤æ–°çš„ commit å»æ’¤é”€ä¹‹å‰é”™è¯¯çš„æ“ä½œäº†ã€‚\n\n### ä¿®æ”¹ä¸Šæ¬¡ commit çš„æäº¤ä¿¡æ¯\n\n**æƒ…æ™¯**: ä½ åœ¨ä¸Šæ¬¡ commit æäº¤ä¿¡æ¯ä¸­æ‰“é”™äº†ä¸€ä¸ªå•è¯ï¼Œæ¯”å¦‚ä½ æ‰§è¡Œäº† `git commit -m \"fxied bug #42\"` ç„¶åä½ æ„è¯†åˆ°åº”è¯¥æ˜¯ `fixed bug #42`ã€‚\n\n**æ“ä½œ**: `git commit --amend` æˆ– `git commit --amend -m \"Fixes bug #42\"`\n\n**æ•ˆæœ**: `git commit --amend` ç»“åˆæœ€æ–°çš„æ–‡ä»¶ä¿®æ”¹æƒ…å†µå’Œä¸Šä¸€æ¬¡æäº¤ä¿¡æ¯æ›´æ–°å¹¶æ›¿æ¢ä¸Šä¸€æ¬¡æäº¤ã€‚æ²¡æœ‰æ–°çš„æ–‡ä»¶æ›´æ”¹å°±ç›´æ¥è¦†ç›–ä¸Šæ¬¡æäº¤ã€‚\n\n### æ’¤é”€æœ¬åœ°ä¿®æ”¹\n\n**æƒ…æ™¯**: ä½ å®¶çš„å–µæ˜Ÿäººè·‘åˆ°ä½ çš„é”®ç›˜ä¸Šè£…é€¼ç”¨åŒçˆªæ‰“å­—ç„¶åä¸çŸ¥æ€ä¹ˆè¿˜ç‚¹äº†ä¿å­˜ï¼Œç„¶åç¼–è¾‘å™¨è¿˜å´©æºƒäº†ï¼Œä½ è¿˜æ²¡æœ‰ commit è¿™åªçŒ«åšçš„ä¿®æ”¹ï¼Œä½ æƒ³æ’¤é”€é‚£ä¸ªæ–‡ä»¶é‡Œè¢«çŒ«ä¿®æ”¹çš„å†…å®¹ã€‚\n\n**æ“ä½œ**: `git checkout -- <bad filename>`\n\n**æ•ˆæœ**: `git checkout` ä¼šå°†è¯¥æ–‡ä»¶çš„å†…å®¹æ¢å¤åˆ°ä¸Šä¸€æ¬¡ git commit çš„çŠ¶æ€ã€‚ä½ å¯ä»¥æä¾›ä¸€ä¸ªåˆ†æ”¯åç§°æˆ–è€…ç›´æ¥æä¾›è¦å›åˆ°çš„ SHAã€‚\n\nè¯·è®°ä½ï¼Œè¿™ç§æ–¹æ³•ä½œå‡ºçš„æ’¤é”€æ˜¯å½»åº•çš„ï¼Œè¿™äº›å†…å®¹ä¸ä¼šè¢« commit æ‰€ä»¥ä¹‹åä½ å¹¶ä¸èƒ½å†ç”¨ git æ¢å¤è¿™äº›å†…å®¹ã€‚\n\n### é‡ç½®æœ¬åœ°ä¿®æ”¹\n\n**æƒ…æ™¯**: ä½ åœ¨æœ¬åœ° commit äº†ä¸€äº›å†…å®¹ï¼ˆå¹¶æ²¡æœ‰ pushï¼‰ï¼Œä½†æ˜¯ä½ æé”™äº†ï¼Œä½ æƒ³æ’¤é”€æœ€è¿‘è¿™ä¸‰ä¸ª commitï¼Œå°±åƒè®©å®ƒä»¬ä»æ¥ä¸å­˜åœ¨é‚£æ ·ã€‚\n\n**æ“ä½œ**: `git reset <last good SHA>` æˆ– `git reset --hard <last good SHA>`\n\n**æ•ˆæœ**: `git reset` ä¼šè®©ä½ çš„ git å†å²ä¼šé€€åˆ°ä½ æŒ‡å®šçš„ SHA çš„çŠ¶æ€ã€‚è¿™äº› commit ä¸å­˜åœ¨äº†ä½†æ˜¯ä½ ç¡¬ç›˜ä¸Šçš„è¿™äº›æ–‡ä»¶è¿˜æ˜¯ç»´æŒåœ¨è¢«ä¿®æ”¹äº†çš„çŠ¶æ€ï¼Œè¿™æ˜¯æœ€å®‰å…¨çš„åšæ³•ã€‚ä½†æ˜¯æœ‰æ—¶ä½ ä¹Ÿæƒ³åŒæ—¶æ’¤é”€ç¡¬ç›˜ä¸Šçš„ä¿®æ”¹ï¼Œè¿™æ—¶åŠ ä¸Š `--hard` å°±ä¼šå¾ˆæœ‰ç”¨ã€‚\n\n### æ’¤é”€æœ¬åœ°ä¿®æ”¹ä¹‹åé‡åš\n\n**æƒ…æ™¯**: ä½ æäº¤äº†ä¸€äº› commitï¼Œç„¶åæ‰§è¡Œ `git reset --hard` æ¥æ’¤æ¶ˆè¿™äº› commit å¹¶æ¸…é™¤æœ¬åœ°ç¡¬ç›˜ä¸Šçš„ä¿®æ”¹ã€‚ä½†æ˜¯æœ€åä½ æ„è¯†åˆ°ä½ æƒ³è¦å›è¿™äº› commitï¼\n\n**æ“ä½œ**: `git reflog` å’Œ `git reset` æˆ– `git checkout`\n\n**æ•ˆæœ**: `git reflog` æ˜¯ä¸ªä¿®å¤é¡¹ç›®æäº¤å†å²çš„å¥½æ–¹æ³•ã€‚ä½ å¯ä»¥æ‰¾å›å‡ ä¹æ‰€æœ‰å†…å®¹ â€”â€” æ‰€æœ‰ä½  commit è¿‡çš„å†…å®¹ â€”â€” ç”¨ reflog å°±è¡Œã€‚\n\nä½ å¯èƒ½å¯¹ `git log` å¾ˆç†Ÿæ‚‰ï¼Œè¿™ä¸ªæ“ä½œä¼šåˆ—å‡ºä½ çš„ git æäº¤å†å²ã€‚`git reflog` å¾ˆåƒå®ƒï¼Œä½†æ˜¯åˆ—å‡ºçš„æ˜¯ `HEAD` ä¿®æ”¹çš„æ—¶é—´ã€‚\n\nä¸€äº›è¯´æ˜:\n\n- `HEAD` ä¿®æ”¹ã€‚åœ¨åˆ‡æ¢åˆ†æ”¯æ—¶ `HEAD` ä¼šè¢«ä¿®æ”¹ï¼Œç”¨ commit ä¿å­˜ä¿®æ”¹ç„¶åç”¨ reset æ’¤æ¶ˆä¿®æ”¹ã€‚ä½†æ˜¯åœ¨ä½  `git checkout -- <bad filename>` æ—¶å¹¶ä¸ä¼šè¢«ä¿®æ”¹ï¼Œå°±åƒä¸Šé¢è¯´è¿‡çš„é‚£æ ·ï¼Œè¿™äº›ä¿®æ”¹ä¸ä¼šè¢« commitï¼Œæ‰€ä»¥ `git reflog` ä¹Ÿä¸èƒ½å¸®ä½ æ‰¾å›è¿™äº›å†…å®¹ã€‚\n- `git reflog` ä¸æ˜¯æ°¸è¿œæœ‰ç”¨çš„ã€‚git ä¼šå®šæœŸæ¸…ç†é‚£äº›æ— æ³•è¿½æº¯çš„å†…å®¹ã€‚ä¸è¦æœŸæœ›èƒ½ç”¨ `git reflog` æ‰¾å›ä¸€ä¸ªå¤šæœˆä»¥å‰çš„å†…å®¹ã€‚\n- ä½ çš„ `git reflog` ä»…å¯¹ä½ æœ‰ç”¨ã€‚ä½ ä¸èƒ½ç”¨ `git reflog` æ¥æ‰¾å›å…¶ä»–äºº commit çš„ä¿®æ”¹ã€‚\n\n![reflog](https://cloud.githubusercontent.com/assets/2077/6953866/f6b9f054-d891-11e4-8c53-838eff9f40ae.png)\n\nç„¶å...æ¥ä¸‹æ¥æ€ä¹ˆåšæ‰èƒ½æ’¤é”€ä¹‹å‰çš„æ’¤é”€ï¼Ÿè¿™å–å†³ä½ åˆ°ä½ è¦å¹²ä»€ä¹ˆ:\n\n- å¦‚æœä½ æƒ³å›åˆ°ä¸€ä¸ªç‰¹å®šçš„æ—¶é—´ï¼Œç”¨ `git reset --hard <SHA>`ã€‚\n- å¦‚æœä½ æƒ³åœ¨ä¸ä¿®æ”¹æäº¤å†å²çš„æƒ…å†µä¸‹æ‰¾å›é‚£äº›æ–‡ä»¶å¹¶ä½œä¸ºæ–°æ–‡ä»¶ä¿å­˜ï¼Œç”¨ `git checkout <SHA> -- <filename>`ã€‚\n- å¦‚æœä½ æƒ³ä½¿å…¶ä¸­ä¸€ä¸ª commit å›åˆ°ä½ çš„é¡¹ç›®å†å²ä¸­ï¼Œç”¨ `git cherry-pick <SHA>`ã€‚\n\n### æäº¤åˆ°äº†å¦ä¸€ä¸ªåˆ†æ”¯\n\n**æƒ…æ™¯**: ä½ æäº¤äº†ä¸€äº› commitsï¼Œç„¶åæ„è¯†åˆ°ä½ å½“å‰æ˜¯åœ¨ master åˆ†æ”¯ä¸Šï¼Œè€Œä½ å…¶å®æ˜¯æƒ³æäº¤åˆ°ä¸€ä¸ª `feature` åˆ†æ”¯ä¸Šã€‚\n\n**æ“ä½œ**: `git branch feature`, `git reset --hard origin/master`, å’Œ `git checkout feature`\n\n**æ•ˆæœ**: ä½ å¯èƒ½å¸¸å¸¸ä½¿ç”¨ `git checkout -b <name>` æ“ä½œæ¥æ£€å‡ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„åˆ›å»ºæ–°åˆ†æ”¯çš„æ“ä½œï¼Œä½†æ˜¯ä½ å¹¶ä¸æƒ³åŒæ—¶åˆ‡æ¢åˆ°é‚£ä¸ªåˆ†æ”¯ä¸Šã€‚ç°åœ¨ä½¿ç”¨ `git branch feature` æ—¢å¯ä»¥åˆ›å»ºä¸€ä¸ª `feature` æ–°åˆ†æ”¯å¹¶ä¸”ä¸ä¼šåˆ‡æ¢åˆ°é‚£ä¸ªåˆ†æ”¯ï¼ŒåŒæ—¶è¯¥åˆ†æ”¯ä¼šæŒ‡å‘ä½ å½“å‰åˆ†æ”¯æœ€æ–°çš„ä¸€ä¸ª commitã€‚\n\nä¸‹ä¸€æ­¥ï¼Œç”¨ `git reset --hard` å»æ¢å¤ `master` åˆ†æ”¯åˆ° `origin/master` çš„çŠ¶æ€ã€‚\n\næœ€åï¼Œ`git checkout` åˆ°ä½ çš„ `feature` åˆ†æ”¯ï¼Œä½ èƒ½çœ‹åˆ°æ‰€æœ‰çš„æ›´æ”¹ã€‚\n\n### è¦†ç›–æ•´ä¸ªåˆ†æ”¯\n\n**æƒ…æ™¯**: ä½ åŸºäº `master` åˆ†æ”¯åˆ›å»ºäº† `feature` åˆ†æ”¯ï¼Œä½†æ˜¯ `master` åˆ†æ”¯è¿œè¿œè½å `origin/master` çš„æ›´æ”¹ã€‚ç°åœ¨ `master` åˆ†æ”¯å’Œ `origin/master` åŒæ­¥äº†ï¼Œä½ æƒ³é©¬ä¸ŠåŒæ­¥åˆ° `feature` åˆ†æ”¯ï¼Œè¿˜ä¸æ˜¯å†æ¬¡è¿œè¿œè½åã€‚\n\n**æ“ä½œ**: `git checkout feature` å’Œ `git rebase master`\n\n**æ•ˆæœ**: ä½ å¯èƒ½çŸ¥é“ç”¨ `git reset` ç„¶åé‡æ–° commit æ¥è¾¾åˆ°ç±»ä¼¼æ•ˆæœï¼Œä¸è¿‡é‚£æ ·ä¼šä¸¢å¤± commit å†å²ã€‚\n\n<div class=\"tip\">æ–‡ç« ç¿»è¯‘: [@egoist](https://egoist.moe/2015/10/04/how-to-undo-with-git)ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚</div>\n","slug":"å¦‚ä½•åœ¨-Git-ä¸­ä½¿ç”¨æ’¤æ¶ˆæ“ä½œ","published":1,"updated":"2018-12-26T16:01:04.000Z","layout":"post","photos":[],"link":"","_id":"ck3v60jtm000or9q99u6phvas","content":"<p>ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯ä½ å¯ä»¥è½»æ˜“åœ°æ’¤é”€ä¹‹å‰é”™è¯¯çš„æ“ä½œã€‚å½“ä½ ç”¨ <code>git commit</code> æäº¤äº†ä¸€ä¸ªæ–°çš„æ›´æ”¹å git ä¼šå°†å½“æ—¶çš„æ–‡ä»¶å†…å®¹æš‚æ—¶ä¿å­˜ä¸‹æ¥ï¼Œä¹‹åä½ å°±å¯ä»¥ç”¨ git éšæ„å›æ»šåˆ°ä»»æ„ä¸€ä¸ªç‰ˆæœ¬ã€‚è¿™ç¯‡æ–‡ç« ä¼šä»‹ç»ä¸€äº›å¸¸è§çš„å¯èƒ½ç”¨åˆ°æ’¤é”€ <code>undo</code> æ“ä½œçš„æƒ…å†µã€‚</p>\n<a id=\"more\"></a>\n<h3 id=\"æ’¤é”€ä¸€ä¸ªå·²å‘å¸ƒçš„æ›´æ–°\"><a href=\"#æ’¤é”€ä¸€ä¸ªå·²å‘å¸ƒçš„æ›´æ–°\" class=\"headerlink\" title=\"æ’¤é”€ä¸€ä¸ªå·²å‘å¸ƒçš„æ›´æ–°\"></a>æ’¤é”€ä¸€ä¸ªå·²å‘å¸ƒçš„æ›´æ–°</h3><p><strong>æƒ…æ™¯</strong>: ä½ å·²ç»ç”¨ <code>git push</code> å°†ä»£ç æäº¤åˆ°äº† GitHubï¼Œç„¶åä½ æ„è¯†åˆ°è¿™å…¶ä¸­çš„ä¸€ä¸ª commit æœ‰é”™è¯¯ï¼Œäºæ˜¯ä½ æƒ³æ’¤é”€é‚£ä¸ª commitã€‚</p>\n<p><strong>æ“ä½œ</strong>: <code>git revert &lt;SHA&gt;</code></p>\n<p><strong>æ•ˆæœ</strong>: git ä¼šæ–°å»ºä¸€ä¸ªæ–°çš„ commit æ¥æ‰§è¡Œæä¾›çš„ <sha> å¯¹åº” commit çš„ç›¸åçš„æ›´æ”¹ï¼Œä»»ä½•åœ¨è¯¥æ—§ commit ä¸­åˆ é™¤çš„å†…å®¹å°†ä¼šåœ¨æ–° commit ä¸­æ·»åŠ è¿›å»ï¼Œåä¹‹äº¦ç„¶ã€‚</sha></p>\n<p>è¿™æ˜¯ git é‡Œæœ€å®‰å…¨çš„æ’¤æ¶ˆæ“ä½œçš„åŠæ³•ï¼Œå› ä¸ºè¿™ä¸ä¼šå½±å“ä½ çš„æäº¤å†å²ã€‚äºæ˜¯ç°åœ¨ä½ å¯ä»¥æäº¤æ–°çš„ commit å»æ’¤é”€ä¹‹å‰é”™è¯¯çš„æ“ä½œäº†ã€‚</p>\n<h3 id=\"ä¿®æ”¹ä¸Šæ¬¡-commit-çš„æäº¤ä¿¡æ¯\"><a href=\"#ä¿®æ”¹ä¸Šæ¬¡-commit-çš„æäº¤ä¿¡æ¯\" class=\"headerlink\" title=\"ä¿®æ”¹ä¸Šæ¬¡ commit çš„æäº¤ä¿¡æ¯\"></a>ä¿®æ”¹ä¸Šæ¬¡ commit çš„æäº¤ä¿¡æ¯</h3><p><strong>æƒ…æ™¯</strong>: ä½ åœ¨ä¸Šæ¬¡ commit æäº¤ä¿¡æ¯ä¸­æ‰“é”™äº†ä¸€ä¸ªå•è¯ï¼Œæ¯”å¦‚ä½ æ‰§è¡Œäº† <code>git commit -m &quot;fxied bug #42&quot;</code> ç„¶åä½ æ„è¯†åˆ°åº”è¯¥æ˜¯ <code>fixed bug #42</code>ã€‚</p>\n<p><strong>æ“ä½œ</strong>: <code>git commit --amend</code> æˆ– <code>git commit --amend -m &quot;Fixes bug #42&quot;</code></p>\n<p><strong>æ•ˆæœ</strong>: <code>git commit --amend</code> ç»“åˆæœ€æ–°çš„æ–‡ä»¶ä¿®æ”¹æƒ…å†µå’Œä¸Šä¸€æ¬¡æäº¤ä¿¡æ¯æ›´æ–°å¹¶æ›¿æ¢ä¸Šä¸€æ¬¡æäº¤ã€‚æ²¡æœ‰æ–°çš„æ–‡ä»¶æ›´æ”¹å°±ç›´æ¥è¦†ç›–ä¸Šæ¬¡æäº¤ã€‚</p>\n<h3 id=\"æ’¤é”€æœ¬åœ°ä¿®æ”¹\"><a href=\"#æ’¤é”€æœ¬åœ°ä¿®æ”¹\" class=\"headerlink\" title=\"æ’¤é”€æœ¬åœ°ä¿®æ”¹\"></a>æ’¤é”€æœ¬åœ°ä¿®æ”¹</h3><p><strong>æƒ…æ™¯</strong>: ä½ å®¶çš„å–µæ˜Ÿäººè·‘åˆ°ä½ çš„é”®ç›˜ä¸Šè£…é€¼ç”¨åŒçˆªæ‰“å­—ç„¶åä¸çŸ¥æ€ä¹ˆè¿˜ç‚¹äº†ä¿å­˜ï¼Œç„¶åç¼–è¾‘å™¨è¿˜å´©æºƒäº†ï¼Œä½ è¿˜æ²¡æœ‰ commit è¿™åªçŒ«åšçš„ä¿®æ”¹ï¼Œä½ æƒ³æ’¤é”€é‚£ä¸ªæ–‡ä»¶é‡Œè¢«çŒ«ä¿®æ”¹çš„å†…å®¹ã€‚</p>\n<p><strong>æ“ä½œ</strong>: <code>git checkout -- &lt;bad filename&gt;</code></p>\n<p><strong>æ•ˆæœ</strong>: <code>git checkout</code> ä¼šå°†è¯¥æ–‡ä»¶çš„å†…å®¹æ¢å¤åˆ°ä¸Šä¸€æ¬¡ git commit çš„çŠ¶æ€ã€‚ä½ å¯ä»¥æä¾›ä¸€ä¸ªåˆ†æ”¯åç§°æˆ–è€…ç›´æ¥æä¾›è¦å›åˆ°çš„ SHAã€‚</p>\n<p>è¯·è®°ä½ï¼Œè¿™ç§æ–¹æ³•ä½œå‡ºçš„æ’¤é”€æ˜¯å½»åº•çš„ï¼Œè¿™äº›å†…å®¹ä¸ä¼šè¢« commit æ‰€ä»¥ä¹‹åä½ å¹¶ä¸èƒ½å†ç”¨ git æ¢å¤è¿™äº›å†…å®¹ã€‚</p>\n<h3 id=\"é‡ç½®æœ¬åœ°ä¿®æ”¹\"><a href=\"#é‡ç½®æœ¬åœ°ä¿®æ”¹\" class=\"headerlink\" title=\"é‡ç½®æœ¬åœ°ä¿®æ”¹\"></a>é‡ç½®æœ¬åœ°ä¿®æ”¹</h3><p><strong>æƒ…æ™¯</strong>: ä½ åœ¨æœ¬åœ° commit äº†ä¸€äº›å†…å®¹ï¼ˆå¹¶æ²¡æœ‰ pushï¼‰ï¼Œä½†æ˜¯ä½ æé”™äº†ï¼Œä½ æƒ³æ’¤é”€æœ€è¿‘è¿™ä¸‰ä¸ª commitï¼Œå°±åƒè®©å®ƒä»¬ä»æ¥ä¸å­˜åœ¨é‚£æ ·ã€‚</p>\n<p><strong>æ“ä½œ</strong>: <code>git reset &lt;last good SHA&gt;</code> æˆ– <code>git reset --hard &lt;last good SHA&gt;</code></p>\n<p><strong>æ•ˆæœ</strong>: <code>git reset</code> ä¼šè®©ä½ çš„ git å†å²ä¼šé€€åˆ°ä½ æŒ‡å®šçš„ SHA çš„çŠ¶æ€ã€‚è¿™äº› commit ä¸å­˜åœ¨äº†ä½†æ˜¯ä½ ç¡¬ç›˜ä¸Šçš„è¿™äº›æ–‡ä»¶è¿˜æ˜¯ç»´æŒåœ¨è¢«ä¿®æ”¹äº†çš„çŠ¶æ€ï¼Œè¿™æ˜¯æœ€å®‰å…¨çš„åšæ³•ã€‚ä½†æ˜¯æœ‰æ—¶ä½ ä¹Ÿæƒ³åŒæ—¶æ’¤é”€ç¡¬ç›˜ä¸Šçš„ä¿®æ”¹ï¼Œè¿™æ—¶åŠ ä¸Š <code>--hard</code> å°±ä¼šå¾ˆæœ‰ç”¨ã€‚</p>\n<h3 id=\"æ’¤é”€æœ¬åœ°ä¿®æ”¹ä¹‹åé‡åš\"><a href=\"#æ’¤é”€æœ¬åœ°ä¿®æ”¹ä¹‹åé‡åš\" class=\"headerlink\" title=\"æ’¤é”€æœ¬åœ°ä¿®æ”¹ä¹‹åé‡åš\"></a>æ’¤é”€æœ¬åœ°ä¿®æ”¹ä¹‹åé‡åš</h3><p><strong>æƒ…æ™¯</strong>: ä½ æäº¤äº†ä¸€äº› commitï¼Œç„¶åæ‰§è¡Œ <code>git reset --hard</code> æ¥æ’¤æ¶ˆè¿™äº› commit å¹¶æ¸…é™¤æœ¬åœ°ç¡¬ç›˜ä¸Šçš„ä¿®æ”¹ã€‚ä½†æ˜¯æœ€åä½ æ„è¯†åˆ°ä½ æƒ³è¦å›è¿™äº› commitï¼</p>\n<p><strong>æ“ä½œ</strong>: <code>git reflog</code> å’Œ <code>git reset</code> æˆ– <code>git checkout</code></p>\n<p><strong>æ•ˆæœ</strong>: <code>git reflog</code> æ˜¯ä¸ªä¿®å¤é¡¹ç›®æäº¤å†å²çš„å¥½æ–¹æ³•ã€‚ä½ å¯ä»¥æ‰¾å›å‡ ä¹æ‰€æœ‰å†…å®¹ â€”â€” æ‰€æœ‰ä½  commit è¿‡çš„å†…å®¹ â€”â€” ç”¨ reflog å°±è¡Œã€‚</p>\n<p>ä½ å¯èƒ½å¯¹ <code>git log</code> å¾ˆç†Ÿæ‚‰ï¼Œè¿™ä¸ªæ“ä½œä¼šåˆ—å‡ºä½ çš„ git æäº¤å†å²ã€‚<code>git reflog</code> å¾ˆåƒå®ƒï¼Œä½†æ˜¯åˆ—å‡ºçš„æ˜¯ <code>HEAD</code> ä¿®æ”¹çš„æ—¶é—´ã€‚</p>\n<p>ä¸€äº›è¯´æ˜:</p>\n<ul>\n<li><code>HEAD</code> ä¿®æ”¹ã€‚åœ¨åˆ‡æ¢åˆ†æ”¯æ—¶ <code>HEAD</code> ä¼šè¢«ä¿®æ”¹ï¼Œç”¨ commit ä¿å­˜ä¿®æ”¹ç„¶åç”¨ reset æ’¤æ¶ˆä¿®æ”¹ã€‚ä½†æ˜¯åœ¨ä½  <code>git checkout -- &lt;bad filename&gt;</code> æ—¶å¹¶ä¸ä¼šè¢«ä¿®æ”¹ï¼Œå°±åƒä¸Šé¢è¯´è¿‡çš„é‚£æ ·ï¼Œè¿™äº›ä¿®æ”¹ä¸ä¼šè¢« commitï¼Œæ‰€ä»¥ <code>git reflog</code> ä¹Ÿä¸èƒ½å¸®ä½ æ‰¾å›è¿™äº›å†…å®¹ã€‚</li>\n<li><code>git reflog</code> ä¸æ˜¯æ°¸è¿œæœ‰ç”¨çš„ã€‚git ä¼šå®šæœŸæ¸…ç†é‚£äº›æ— æ³•è¿½æº¯çš„å†…å®¹ã€‚ä¸è¦æœŸæœ›èƒ½ç”¨ <code>git reflog</code> æ‰¾å›ä¸€ä¸ªå¤šæœˆä»¥å‰çš„å†…å®¹ã€‚</li>\n<li>ä½ çš„ <code>git reflog</code> ä»…å¯¹ä½ æœ‰ç”¨ã€‚ä½ ä¸èƒ½ç”¨ <code>git reflog</code> æ¥æ‰¾å›å…¶ä»–äºº commit çš„ä¿®æ”¹ã€‚</li>\n</ul>\n<p><img src=\"https://cloud.githubusercontent.com/assets/2077/6953866/f6b9f054-d891-11e4-8c53-838eff9f40ae.png\" alt=\"reflog\"></p>\n<p>ç„¶åâ€¦æ¥ä¸‹æ¥æ€ä¹ˆåšæ‰èƒ½æ’¤é”€ä¹‹å‰çš„æ’¤é”€ï¼Ÿè¿™å–å†³ä½ åˆ°ä½ è¦å¹²ä»€ä¹ˆ:</p>\n<ul>\n<li>å¦‚æœä½ æƒ³å›åˆ°ä¸€ä¸ªç‰¹å®šçš„æ—¶é—´ï¼Œç”¨ <code>git reset --hard &lt;SHA&gt;</code>ã€‚</li>\n<li>å¦‚æœä½ æƒ³åœ¨ä¸ä¿®æ”¹æäº¤å†å²çš„æƒ…å†µä¸‹æ‰¾å›é‚£äº›æ–‡ä»¶å¹¶ä½œä¸ºæ–°æ–‡ä»¶ä¿å­˜ï¼Œç”¨ <code>git checkout &lt;SHA&gt; -- &lt;filename&gt;</code>ã€‚</li>\n<li>å¦‚æœä½ æƒ³ä½¿å…¶ä¸­ä¸€ä¸ª commit å›åˆ°ä½ çš„é¡¹ç›®å†å²ä¸­ï¼Œç”¨ <code>git cherry-pick &lt;SHA&gt;</code>ã€‚</li>\n</ul>\n<h3 id=\"æäº¤åˆ°äº†å¦ä¸€ä¸ªåˆ†æ”¯\"><a href=\"#æäº¤åˆ°äº†å¦ä¸€ä¸ªåˆ†æ”¯\" class=\"headerlink\" title=\"æäº¤åˆ°äº†å¦ä¸€ä¸ªåˆ†æ”¯\"></a>æäº¤åˆ°äº†å¦ä¸€ä¸ªåˆ†æ”¯</h3><p><strong>æƒ…æ™¯</strong>: ä½ æäº¤äº†ä¸€äº› commitsï¼Œç„¶åæ„è¯†åˆ°ä½ å½“å‰æ˜¯åœ¨ master åˆ†æ”¯ä¸Šï¼Œè€Œä½ å…¶å®æ˜¯æƒ³æäº¤åˆ°ä¸€ä¸ª <code>feature</code> åˆ†æ”¯ä¸Šã€‚</p>\n<p><strong>æ“ä½œ</strong>: <code>git branch feature</code>, <code>git reset --hard origin/master</code>, å’Œ <code>git checkout feature</code></p>\n<p><strong>æ•ˆæœ</strong>: ä½ å¯èƒ½å¸¸å¸¸ä½¿ç”¨ <code>git checkout -b &lt;name&gt;</code> æ“ä½œæ¥æ£€å‡ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„åˆ›å»ºæ–°åˆ†æ”¯çš„æ“ä½œï¼Œä½†æ˜¯ä½ å¹¶ä¸æƒ³åŒæ—¶åˆ‡æ¢åˆ°é‚£ä¸ªåˆ†æ”¯ä¸Šã€‚ç°åœ¨ä½¿ç”¨ <code>git branch feature</code> æ—¢å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>feature</code> æ–°åˆ†æ”¯å¹¶ä¸”ä¸ä¼šåˆ‡æ¢åˆ°é‚£ä¸ªåˆ†æ”¯ï¼ŒåŒæ—¶è¯¥åˆ†æ”¯ä¼šæŒ‡å‘ä½ å½“å‰åˆ†æ”¯æœ€æ–°çš„ä¸€ä¸ª commitã€‚</p>\n<p>ä¸‹ä¸€æ­¥ï¼Œç”¨ <code>git reset --hard</code> å»æ¢å¤ <code>master</code> åˆ†æ”¯åˆ° <code>origin/master</code> çš„çŠ¶æ€ã€‚</p>\n<p>æœ€åï¼Œ<code>git checkout</code> åˆ°ä½ çš„ <code>feature</code> åˆ†æ”¯ï¼Œä½ èƒ½çœ‹åˆ°æ‰€æœ‰çš„æ›´æ”¹ã€‚</p>\n<h3 id=\"è¦†ç›–æ•´ä¸ªåˆ†æ”¯\"><a href=\"#è¦†ç›–æ•´ä¸ªåˆ†æ”¯\" class=\"headerlink\" title=\"è¦†ç›–æ•´ä¸ªåˆ†æ”¯\"></a>è¦†ç›–æ•´ä¸ªåˆ†æ”¯</h3><p><strong>æƒ…æ™¯</strong>: ä½ åŸºäº <code>master</code> åˆ†æ”¯åˆ›å»ºäº† <code>feature</code> åˆ†æ”¯ï¼Œä½†æ˜¯ <code>master</code> åˆ†æ”¯è¿œè¿œè½å <code>origin/master</code> çš„æ›´æ”¹ã€‚ç°åœ¨ <code>master</code> åˆ†æ”¯å’Œ <code>origin/master</code> åŒæ­¥äº†ï¼Œä½ æƒ³é©¬ä¸ŠåŒæ­¥åˆ° <code>feature</code> åˆ†æ”¯ï¼Œè¿˜ä¸æ˜¯å†æ¬¡è¿œè¿œè½åã€‚</p>\n<p><strong>æ“ä½œ</strong>: <code>git checkout feature</code> å’Œ <code>git rebase master</code></p>\n<p><strong>æ•ˆæœ</strong>: ä½ å¯èƒ½çŸ¥é“ç”¨ <code>git reset</code> ç„¶åé‡æ–° commit æ¥è¾¾åˆ°ç±»ä¼¼æ•ˆæœï¼Œä¸è¿‡é‚£æ ·ä¼šä¸¢å¤± commit å†å²ã€‚</p>\n<div class=\"tip\">æ–‡ç« ç¿»è¯‘: <a href=\"https://egoist.moe/2015/10/04/how-to-undo-with-git\" target=\"_blank\" rel=\"noopener\">@egoist</a>ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚</div>\n","site":{"data":{}},"excerpt":"<p>ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯ä½ å¯ä»¥è½»æ˜“åœ°æ’¤é”€ä¹‹å‰é”™è¯¯çš„æ“ä½œã€‚å½“ä½ ç”¨ <code>git commit</code> æäº¤äº†ä¸€ä¸ªæ–°çš„æ›´æ”¹å git ä¼šå°†å½“æ—¶çš„æ–‡ä»¶å†…å®¹æš‚æ—¶ä¿å­˜ä¸‹æ¥ï¼Œä¹‹åä½ å°±å¯ä»¥ç”¨ git éšæ„å›æ»šåˆ°ä»»æ„ä¸€ä¸ªç‰ˆæœ¬ã€‚è¿™ç¯‡æ–‡ç« ä¼šä»‹ç»ä¸€äº›å¸¸è§çš„å¯èƒ½ç”¨åˆ°æ’¤é”€ <code>undo</code> æ“ä½œçš„æƒ…å†µã€‚</p>","more":"<h3 id=\"æ’¤é”€ä¸€ä¸ªå·²å‘å¸ƒçš„æ›´æ–°\"><a href=\"#æ’¤é”€ä¸€ä¸ªå·²å‘å¸ƒçš„æ›´æ–°\" class=\"headerlink\" title=\"æ’¤é”€ä¸€ä¸ªå·²å‘å¸ƒçš„æ›´æ–°\"></a>æ’¤é”€ä¸€ä¸ªå·²å‘å¸ƒçš„æ›´æ–°</h3><p><strong>æƒ…æ™¯</strong>: ä½ å·²ç»ç”¨ <code>git push</code> å°†ä»£ç æäº¤åˆ°äº† GitHubï¼Œç„¶åä½ æ„è¯†åˆ°è¿™å…¶ä¸­çš„ä¸€ä¸ª commit æœ‰é”™è¯¯ï¼Œäºæ˜¯ä½ æƒ³æ’¤é”€é‚£ä¸ª commitã€‚</p>\n<p><strong>æ“ä½œ</strong>: <code>git revert &lt;SHA&gt;</code></p>\n<p><strong>æ•ˆæœ</strong>: git ä¼šæ–°å»ºä¸€ä¸ªæ–°çš„ commit æ¥æ‰§è¡Œæä¾›çš„ <sha> å¯¹åº” commit çš„ç›¸åçš„æ›´æ”¹ï¼Œä»»ä½•åœ¨è¯¥æ—§ commit ä¸­åˆ é™¤çš„å†…å®¹å°†ä¼šåœ¨æ–° commit ä¸­æ·»åŠ è¿›å»ï¼Œåä¹‹äº¦ç„¶ã€‚</sha></p>\n<p>è¿™æ˜¯ git é‡Œæœ€å®‰å…¨çš„æ’¤æ¶ˆæ“ä½œçš„åŠæ³•ï¼Œå› ä¸ºè¿™ä¸ä¼šå½±å“ä½ çš„æäº¤å†å²ã€‚äºæ˜¯ç°åœ¨ä½ å¯ä»¥æäº¤æ–°çš„ commit å»æ’¤é”€ä¹‹å‰é”™è¯¯çš„æ“ä½œäº†ã€‚</p>\n<h3 id=\"ä¿®æ”¹ä¸Šæ¬¡-commit-çš„æäº¤ä¿¡æ¯\"><a href=\"#ä¿®æ”¹ä¸Šæ¬¡-commit-çš„æäº¤ä¿¡æ¯\" class=\"headerlink\" title=\"ä¿®æ”¹ä¸Šæ¬¡ commit çš„æäº¤ä¿¡æ¯\"></a>ä¿®æ”¹ä¸Šæ¬¡ commit çš„æäº¤ä¿¡æ¯</h3><p><strong>æƒ…æ™¯</strong>: ä½ åœ¨ä¸Šæ¬¡ commit æäº¤ä¿¡æ¯ä¸­æ‰“é”™äº†ä¸€ä¸ªå•è¯ï¼Œæ¯”å¦‚ä½ æ‰§è¡Œäº† <code>git commit -m &quot;fxied bug #42&quot;</code> ç„¶åä½ æ„è¯†åˆ°åº”è¯¥æ˜¯ <code>fixed bug #42</code>ã€‚</p>\n<p><strong>æ“ä½œ</strong>: <code>git commit --amend</code> æˆ– <code>git commit --amend -m &quot;Fixes bug #42&quot;</code></p>\n<p><strong>æ•ˆæœ</strong>: <code>git commit --amend</code> ç»“åˆæœ€æ–°çš„æ–‡ä»¶ä¿®æ”¹æƒ…å†µå’Œä¸Šä¸€æ¬¡æäº¤ä¿¡æ¯æ›´æ–°å¹¶æ›¿æ¢ä¸Šä¸€æ¬¡æäº¤ã€‚æ²¡æœ‰æ–°çš„æ–‡ä»¶æ›´æ”¹å°±ç›´æ¥è¦†ç›–ä¸Šæ¬¡æäº¤ã€‚</p>\n<h3 id=\"æ’¤é”€æœ¬åœ°ä¿®æ”¹\"><a href=\"#æ’¤é”€æœ¬åœ°ä¿®æ”¹\" class=\"headerlink\" title=\"æ’¤é”€æœ¬åœ°ä¿®æ”¹\"></a>æ’¤é”€æœ¬åœ°ä¿®æ”¹</h3><p><strong>æƒ…æ™¯</strong>: ä½ å®¶çš„å–µæ˜Ÿäººè·‘åˆ°ä½ çš„é”®ç›˜ä¸Šè£…é€¼ç”¨åŒçˆªæ‰“å­—ç„¶åä¸çŸ¥æ€ä¹ˆè¿˜ç‚¹äº†ä¿å­˜ï¼Œç„¶åç¼–è¾‘å™¨è¿˜å´©æºƒäº†ï¼Œä½ è¿˜æ²¡æœ‰ commit è¿™åªçŒ«åšçš„ä¿®æ”¹ï¼Œä½ æƒ³æ’¤é”€é‚£ä¸ªæ–‡ä»¶é‡Œè¢«çŒ«ä¿®æ”¹çš„å†…å®¹ã€‚</p>\n<p><strong>æ“ä½œ</strong>: <code>git checkout -- &lt;bad filename&gt;</code></p>\n<p><strong>æ•ˆæœ</strong>: <code>git checkout</code> ä¼šå°†è¯¥æ–‡ä»¶çš„å†…å®¹æ¢å¤åˆ°ä¸Šä¸€æ¬¡ git commit çš„çŠ¶æ€ã€‚ä½ å¯ä»¥æä¾›ä¸€ä¸ªåˆ†æ”¯åç§°æˆ–è€…ç›´æ¥æä¾›è¦å›åˆ°çš„ SHAã€‚</p>\n<p>è¯·è®°ä½ï¼Œè¿™ç§æ–¹æ³•ä½œå‡ºçš„æ’¤é”€æ˜¯å½»åº•çš„ï¼Œè¿™äº›å†…å®¹ä¸ä¼šè¢« commit æ‰€ä»¥ä¹‹åä½ å¹¶ä¸èƒ½å†ç”¨ git æ¢å¤è¿™äº›å†…å®¹ã€‚</p>\n<h3 id=\"é‡ç½®æœ¬åœ°ä¿®æ”¹\"><a href=\"#é‡ç½®æœ¬åœ°ä¿®æ”¹\" class=\"headerlink\" title=\"é‡ç½®æœ¬åœ°ä¿®æ”¹\"></a>é‡ç½®æœ¬åœ°ä¿®æ”¹</h3><p><strong>æƒ…æ™¯</strong>: ä½ åœ¨æœ¬åœ° commit äº†ä¸€äº›å†…å®¹ï¼ˆå¹¶æ²¡æœ‰ pushï¼‰ï¼Œä½†æ˜¯ä½ æé”™äº†ï¼Œä½ æƒ³æ’¤é”€æœ€è¿‘è¿™ä¸‰ä¸ª commitï¼Œå°±åƒè®©å®ƒä»¬ä»æ¥ä¸å­˜åœ¨é‚£æ ·ã€‚</p>\n<p><strong>æ“ä½œ</strong>: <code>git reset &lt;last good SHA&gt;</code> æˆ– <code>git reset --hard &lt;last good SHA&gt;</code></p>\n<p><strong>æ•ˆæœ</strong>: <code>git reset</code> ä¼šè®©ä½ çš„ git å†å²ä¼šé€€åˆ°ä½ æŒ‡å®šçš„ SHA çš„çŠ¶æ€ã€‚è¿™äº› commit ä¸å­˜åœ¨äº†ä½†æ˜¯ä½ ç¡¬ç›˜ä¸Šçš„è¿™äº›æ–‡ä»¶è¿˜æ˜¯ç»´æŒåœ¨è¢«ä¿®æ”¹äº†çš„çŠ¶æ€ï¼Œè¿™æ˜¯æœ€å®‰å…¨çš„åšæ³•ã€‚ä½†æ˜¯æœ‰æ—¶ä½ ä¹Ÿæƒ³åŒæ—¶æ’¤é”€ç¡¬ç›˜ä¸Šçš„ä¿®æ”¹ï¼Œè¿™æ—¶åŠ ä¸Š <code>--hard</code> å°±ä¼šå¾ˆæœ‰ç”¨ã€‚</p>\n<h3 id=\"æ’¤é”€æœ¬åœ°ä¿®æ”¹ä¹‹åé‡åš\"><a href=\"#æ’¤é”€æœ¬åœ°ä¿®æ”¹ä¹‹åé‡åš\" class=\"headerlink\" title=\"æ’¤é”€æœ¬åœ°ä¿®æ”¹ä¹‹åé‡åš\"></a>æ’¤é”€æœ¬åœ°ä¿®æ”¹ä¹‹åé‡åš</h3><p><strong>æƒ…æ™¯</strong>: ä½ æäº¤äº†ä¸€äº› commitï¼Œç„¶åæ‰§è¡Œ <code>git reset --hard</code> æ¥æ’¤æ¶ˆè¿™äº› commit å¹¶æ¸…é™¤æœ¬åœ°ç¡¬ç›˜ä¸Šçš„ä¿®æ”¹ã€‚ä½†æ˜¯æœ€åä½ æ„è¯†åˆ°ä½ æƒ³è¦å›è¿™äº› commitï¼</p>\n<p><strong>æ“ä½œ</strong>: <code>git reflog</code> å’Œ <code>git reset</code> æˆ– <code>git checkout</code></p>\n<p><strong>æ•ˆæœ</strong>: <code>git reflog</code> æ˜¯ä¸ªä¿®å¤é¡¹ç›®æäº¤å†å²çš„å¥½æ–¹æ³•ã€‚ä½ å¯ä»¥æ‰¾å›å‡ ä¹æ‰€æœ‰å†…å®¹ â€”â€” æ‰€æœ‰ä½  commit è¿‡çš„å†…å®¹ â€”â€” ç”¨ reflog å°±è¡Œã€‚</p>\n<p>ä½ å¯èƒ½å¯¹ <code>git log</code> å¾ˆç†Ÿæ‚‰ï¼Œè¿™ä¸ªæ“ä½œä¼šåˆ—å‡ºä½ çš„ git æäº¤å†å²ã€‚<code>git reflog</code> å¾ˆåƒå®ƒï¼Œä½†æ˜¯åˆ—å‡ºçš„æ˜¯ <code>HEAD</code> ä¿®æ”¹çš„æ—¶é—´ã€‚</p>\n<p>ä¸€äº›è¯´æ˜:</p>\n<ul>\n<li><code>HEAD</code> ä¿®æ”¹ã€‚åœ¨åˆ‡æ¢åˆ†æ”¯æ—¶ <code>HEAD</code> ä¼šè¢«ä¿®æ”¹ï¼Œç”¨ commit ä¿å­˜ä¿®æ”¹ç„¶åç”¨ reset æ’¤æ¶ˆä¿®æ”¹ã€‚ä½†æ˜¯åœ¨ä½  <code>git checkout -- &lt;bad filename&gt;</code> æ—¶å¹¶ä¸ä¼šè¢«ä¿®æ”¹ï¼Œå°±åƒä¸Šé¢è¯´è¿‡çš„é‚£æ ·ï¼Œè¿™äº›ä¿®æ”¹ä¸ä¼šè¢« commitï¼Œæ‰€ä»¥ <code>git reflog</code> ä¹Ÿä¸èƒ½å¸®ä½ æ‰¾å›è¿™äº›å†…å®¹ã€‚</li>\n<li><code>git reflog</code> ä¸æ˜¯æ°¸è¿œæœ‰ç”¨çš„ã€‚git ä¼šå®šæœŸæ¸…ç†é‚£äº›æ— æ³•è¿½æº¯çš„å†…å®¹ã€‚ä¸è¦æœŸæœ›èƒ½ç”¨ <code>git reflog</code> æ‰¾å›ä¸€ä¸ªå¤šæœˆä»¥å‰çš„å†…å®¹ã€‚</li>\n<li>ä½ çš„ <code>git reflog</code> ä»…å¯¹ä½ æœ‰ç”¨ã€‚ä½ ä¸èƒ½ç”¨ <code>git reflog</code> æ¥æ‰¾å›å…¶ä»–äºº commit çš„ä¿®æ”¹ã€‚</li>\n</ul>\n<p><img src=\"https://cloud.githubusercontent.com/assets/2077/6953866/f6b9f054-d891-11e4-8c53-838eff9f40ae.png\" alt=\"reflog\"></p>\n<p>ç„¶åâ€¦æ¥ä¸‹æ¥æ€ä¹ˆåšæ‰èƒ½æ’¤é”€ä¹‹å‰çš„æ’¤é”€ï¼Ÿè¿™å–å†³ä½ åˆ°ä½ è¦å¹²ä»€ä¹ˆ:</p>\n<ul>\n<li>å¦‚æœä½ æƒ³å›åˆ°ä¸€ä¸ªç‰¹å®šçš„æ—¶é—´ï¼Œç”¨ <code>git reset --hard &lt;SHA&gt;</code>ã€‚</li>\n<li>å¦‚æœä½ æƒ³åœ¨ä¸ä¿®æ”¹æäº¤å†å²çš„æƒ…å†µä¸‹æ‰¾å›é‚£äº›æ–‡ä»¶å¹¶ä½œä¸ºæ–°æ–‡ä»¶ä¿å­˜ï¼Œç”¨ <code>git checkout &lt;SHA&gt; -- &lt;filename&gt;</code>ã€‚</li>\n<li>å¦‚æœä½ æƒ³ä½¿å…¶ä¸­ä¸€ä¸ª commit å›åˆ°ä½ çš„é¡¹ç›®å†å²ä¸­ï¼Œç”¨ <code>git cherry-pick &lt;SHA&gt;</code>ã€‚</li>\n</ul>\n<h3 id=\"æäº¤åˆ°äº†å¦ä¸€ä¸ªåˆ†æ”¯\"><a href=\"#æäº¤åˆ°äº†å¦ä¸€ä¸ªåˆ†æ”¯\" class=\"headerlink\" title=\"æäº¤åˆ°äº†å¦ä¸€ä¸ªåˆ†æ”¯\"></a>æäº¤åˆ°äº†å¦ä¸€ä¸ªåˆ†æ”¯</h3><p><strong>æƒ…æ™¯</strong>: ä½ æäº¤äº†ä¸€äº› commitsï¼Œç„¶åæ„è¯†åˆ°ä½ å½“å‰æ˜¯åœ¨ master åˆ†æ”¯ä¸Šï¼Œè€Œä½ å…¶å®æ˜¯æƒ³æäº¤åˆ°ä¸€ä¸ª <code>feature</code> åˆ†æ”¯ä¸Šã€‚</p>\n<p><strong>æ“ä½œ</strong>: <code>git branch feature</code>, <code>git reset --hard origin/master</code>, å’Œ <code>git checkout feature</code></p>\n<p><strong>æ•ˆæœ</strong>: ä½ å¯èƒ½å¸¸å¸¸ä½¿ç”¨ <code>git checkout -b &lt;name&gt;</code> æ“ä½œæ¥æ£€å‡ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„åˆ›å»ºæ–°åˆ†æ”¯çš„æ“ä½œï¼Œä½†æ˜¯ä½ å¹¶ä¸æƒ³åŒæ—¶åˆ‡æ¢åˆ°é‚£ä¸ªåˆ†æ”¯ä¸Šã€‚ç°åœ¨ä½¿ç”¨ <code>git branch feature</code> æ—¢å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>feature</code> æ–°åˆ†æ”¯å¹¶ä¸”ä¸ä¼šåˆ‡æ¢åˆ°é‚£ä¸ªåˆ†æ”¯ï¼ŒåŒæ—¶è¯¥åˆ†æ”¯ä¼šæŒ‡å‘ä½ å½“å‰åˆ†æ”¯æœ€æ–°çš„ä¸€ä¸ª commitã€‚</p>\n<p>ä¸‹ä¸€æ­¥ï¼Œç”¨ <code>git reset --hard</code> å»æ¢å¤ <code>master</code> åˆ†æ”¯åˆ° <code>origin/master</code> çš„çŠ¶æ€ã€‚</p>\n<p>æœ€åï¼Œ<code>git checkout</code> åˆ°ä½ çš„ <code>feature</code> åˆ†æ”¯ï¼Œä½ èƒ½çœ‹åˆ°æ‰€æœ‰çš„æ›´æ”¹ã€‚</p>\n<h3 id=\"è¦†ç›–æ•´ä¸ªåˆ†æ”¯\"><a href=\"#è¦†ç›–æ•´ä¸ªåˆ†æ”¯\" class=\"headerlink\" title=\"è¦†ç›–æ•´ä¸ªåˆ†æ”¯\"></a>è¦†ç›–æ•´ä¸ªåˆ†æ”¯</h3><p><strong>æƒ…æ™¯</strong>: ä½ åŸºäº <code>master</code> åˆ†æ”¯åˆ›å»ºäº† <code>feature</code> åˆ†æ”¯ï¼Œä½†æ˜¯ <code>master</code> åˆ†æ”¯è¿œè¿œè½å <code>origin/master</code> çš„æ›´æ”¹ã€‚ç°åœ¨ <code>master</code> åˆ†æ”¯å’Œ <code>origin/master</code> åŒæ­¥äº†ï¼Œä½ æƒ³é©¬ä¸ŠåŒæ­¥åˆ° <code>feature</code> åˆ†æ”¯ï¼Œè¿˜ä¸æ˜¯å†æ¬¡è¿œè¿œè½åã€‚</p>\n<p><strong>æ“ä½œ</strong>: <code>git checkout feature</code> å’Œ <code>git rebase master</code></p>\n<p><strong>æ•ˆæœ</strong>: ä½ å¯èƒ½çŸ¥é“ç”¨ <code>git reset</code> ç„¶åé‡æ–° commit æ¥è¾¾åˆ°ç±»ä¼¼æ•ˆæœï¼Œä¸è¿‡é‚£æ ·ä¼šä¸¢å¤± commit å†å²ã€‚</p>\n<div class=\"tip\">æ–‡ç« ç¿»è¯‘: <a href=\"https://egoist.moe/2015/10/04/how-to-undo-with-git\" target=\"_blank\" rel=\"noopener\">@egoist</a>ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚</div>"},{"title":"ä¸€æ®µç¥å¥‡çš„ CSS è°ƒè¯•ä»£ç ","date":"2016-03-22T08:32:52.000Z","comments":0,"_content":"\nç°åœ¨åˆ°å¤„éƒ½æ˜¯ JavaScriptï¼Œå€˜è‹¥èŠ±ç‚¹æ—¶é—´å»æ·±å…¥åˆ†æï¼Œæ¯æ¬¡éƒ½èƒ½å­¦åˆ°ç‚¹æ–°çš„ä¸œè¥¿ã€‚å½“æˆ‘å‘ç°äº›æœ‰æ„æ€çš„ä¸œè¥¿ï¼Œä¹ æƒ¯å…ˆæ”¶è—èµ·æ¥ã€‚ç­‰æ—¶æŠ€ï¼ˆæ—¶é—´ï¼‹æŠ€æœ¯ï¼‰æˆç†Ÿï¼Œå†å» Review ä»–ä»¬çš„ä»£ç ï¼Œçœ‹ä¸€çœ‹å®ƒä»¬æ˜¯å¦‚ä½•åšåˆ°çš„ï¼Œè§ˆä¸€è§ˆå¤§ç‰›ä»¬çš„ â€œå¥‡æŠ€æ·«å·§â€ã€‚\n<!-- more -->\n### ä»£ç ç‰‡æ®µ\n\n```js\n[].forEach.call($$(\"*\"),function(a){\n    a.style.outline=\"1px solid #\"+(~~(Math.random()*(1<<24))).toString(16);\n})\n```\nåœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œæ­¤æ®µä»£ç ï¼Œä¼šç»™é¡µé¢é‡Œæ‰€æœ‰çš„ DOM å…ƒç´ æ·»åŠ ä¸€ä¸ª 1px çš„æè¾¹ï¼ˆoutlineï¼‰ï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨è°ƒè¯• CSS è¿‡ç¨‹ä¸­åˆ†æã€æ’æŸ¥é—®é¢˜ã€‚\n![](http://ww1.sinaimg.cn/large/6057861cgy1fbzi0vggl6j21kw0vyq8s.jpg)\n\n\n### ä»£ç åˆ†æ\nè¿™æ®µä»£ç æ˜¯ Github ä¸Šçš„ 140 Bytes æ´»åŠ¨ä¸­çš„ä»£ç ï¼Œç®€å•åˆ†æä¸‹è¿™æ®µ JS ä»£ç ï¼Œä½œè€…ä½¿ç”¨äº†ä¸å°‘æŠ€å·§ï¼š\n\né¦–å…ˆæ˜¯éœ€è¦é€‰æ‹©é¡µé¢ä¸Šçš„æ‰€æœ‰å…ƒç´ ï¼Œè¿™é‡Œä½¿ç”¨äº†åªèƒ½åœ¨ Console è°ƒè¯•å·¥å…·ä¸­ä½¿ç”¨çš„ `$$` å‡½æ•°ï¼Œä½ å¯ä»¥åœ¨ Console ä¸­è¾“å…¥ `$$('a')` è‡ªå·±è¯•ä¸€ä¸‹ã€‚å®ƒä¼šè¿”å›å½“å‰é¡µé¢çš„æ‰€æœ‰ anchorï¼ˆé“¾æ¥ï¼‰å…ƒç´ ã€‚`$$` ä¸ `document.querySelectorAll` æ˜¯ç­‰ä»·çš„ï¼Œæœ‰å…´è¶£å¯[æŸ¥çœ‹](http://ourjs.com/detail/54ab768a5695544119000007) $$ å’Œ $ é€‰æ‹©å™¨çš„å†å²ã€‚\n\nå…¶æ¬¡éå†æ‰€æœ‰å…ƒç´ ï¼Œè¿™é‡Œç”¨çš„æ˜¯ `[].forEach.call(...)`ï¼Œä½¿ç”¨ forEach æ›¿ä»£ for ä¹‹ç±»å¾ªç¯èƒ½å‡å°‘ä¸å°‘ä»£ç é‡ï¼Œè€Œ forEach æ˜¯ Array å¯¹è±¡çš„æ–¹æ³•ï¼Œæ‰€ä»¥ç”¨äº†ä¸ª `[]` ç©ºæ•°ç»„æ¥ä»£æ›¿ `Array.prototype` æ›´æ˜¾ç®€æ´ï¼Œå¾—åˆ°æ‰€æœ‰å…ƒç´ çš„èŠ‚ç‚¹åˆ—è¡¨ï¼ˆNodeListï¼‰ï¼Œä½†æ˜¯å®ƒå¹¶æ²¡æœ‰å®ç° Array çš„æ‰€æœ‰æ¥å£ï¼Œå› æ­¤ä½¿ç”¨ `$$(\"*\").forEach` ä¼šè¿”å›é”™è¯¯ï¼Œè¿™é‡Œä½¿ç”¨ `call` æ–¹æ³•æ¥æ›´æ”¹ forEach å†…éƒ¨ `this` æŒ‡å‘ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ `apply`ã€‚\n\nä¹‹åå°±æ˜¯è®©å…ƒç´ æœ‰ä¸€ä¸ªæ¼‚äº®çš„è¾¹æ¡†ï¼Œå¹¶æ‹¥æœ‰ä¸åŒçš„é¢œè‰²äº†ã€‚åœ¨ CSS æ¸²æŸ“çš„ç›’å­æ¨¡å‹ï¼ˆBox Modelï¼‰ä¸­ï¼Œ`outline` ***å¹¶ä¸ä¼šæ”¹å˜å…ƒç´ åŠå…¶å¸ƒå±€çš„ä½ç½®***ã€‚è¿™é‡Œè¾ƒæœ‰æ„æ€çš„æ˜¯å®šä¹‰ä¸åŒçš„é¢œè‰²çš„è‰²å€¼ï¼š\n```js\n~~(Math.random()*(1<<24))).toString(16)\n```\nè¿™é‡Œæƒ³æ„é€ çš„å…¶å®æ˜¯ä¸€ä¸ª 16 è¿›åˆ¶çš„é¢œè‰²å€¼ï¼Œå³ `000000ï½ffffff`ï¼Œä¹Ÿå°±æ˜¯ `parseInt('0',16)` åˆ° `parseInt('ffffff',16)` ä¹‹é—´çš„ä¸€ä¸ªå€¼ã€‚\n\n```js\nparseInt('ffffff',16) == 16777215 == (2^24-1) == (1<<24 - 1)\n```\n\nè€Œ `Math.random()`ï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ª 0~1 ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼Œ`(Math.random()*(1<<24)`ï¼Œå³å¾—åˆ° 0~16777215 ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼Œè€Œè‰²å€¼æ˜¯éœ€è¦æ•´æ•°çš„ï¼Œæ‰€ä»¥å°±éœ€è¦å°†æµ®ç‚¹æ•°è¿›è¡Œ int è½¬æ¢ã€‚è¿™é‡Œç”¨åˆ°äº† `~~`ï¼Œå¯[å‚è§](http://www.jeffjade.com/2015/05/31/2015-05-31-javascript-operational%EF%BC%8Dsymbol/)ç†è§£ JavaScript éè¿ç®—ç¬¦(~/~~ )ã€‚å½“ç„¶å¯ä»¥å°† `~~` è§†ä¸º `parseInt` çš„ç®€å†™ã€‚å¹¶ä¸”ä½¿ç”¨æŒ‰ä½æˆ– `|` æ“ä½œç¬¦ä¹Ÿå¯ä»¥å¾—åˆ°ç›¸åŒçš„ç»“æœï¼š\n\n```js\nvar a = 1.234567890;\nvar b = 0.000000001;\n~~a == 0|a == parseInt(a, 10) == 1\n~~b == 0|b == parseInt(b, 10) == 0\n```\n`toString(16)` ä½¿ç”¨æ•°å­—ç±»å‹çš„ `toString` æ–¹æ³•è¿›è¡Œåè¿›åˆ¶åˆ° 16 è¿›åˆ¶çš„è½¬æ¢ã€‚è‡³æ­¤æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª 0 åˆ° 16777215 ä¹‹é—´çš„éšæœºæ•°ï¼Œç„¶åä½¿ç”¨ `toString(16)` è½¬æ¢æˆ 16 è¿›åˆ¶ï¼Œå°†æ­¤å€¼èµ‹äºˆåˆ°é¡µé¢ä¸Šæ‰€æœ‰å…ƒç´ èŠ‚ç‚¹çš„ `outline` é™„åŠ å±æ€§ä¸Šã€‚å®ƒå°±æ˜¯è¿™æ ·å·¥ä½œçš„ã€‚ç²¾è‡´å·§å¦™è€Œä¸”éå¸¸å®ç”¨ï¼Œé¡¶ä¸€ä¸ªï¼\n","source":"_posts/ä¸€æ®µç¥å¥‡çš„-CSS-è°ƒè¯•ä»£ç .md","raw":"---\ntitle: ä¸€æ®µç¥å¥‡çš„ CSS è°ƒè¯•ä»£ç \ndate: 2016-03-22 16:32:52\ntags:\ncomments: false\n---\n\nç°åœ¨åˆ°å¤„éƒ½æ˜¯ JavaScriptï¼Œå€˜è‹¥èŠ±ç‚¹æ—¶é—´å»æ·±å…¥åˆ†æï¼Œæ¯æ¬¡éƒ½èƒ½å­¦åˆ°ç‚¹æ–°çš„ä¸œè¥¿ã€‚å½“æˆ‘å‘ç°äº›æœ‰æ„æ€çš„ä¸œè¥¿ï¼Œä¹ æƒ¯å…ˆæ”¶è—èµ·æ¥ã€‚ç­‰æ—¶æŠ€ï¼ˆæ—¶é—´ï¼‹æŠ€æœ¯ï¼‰æˆç†Ÿï¼Œå†å» Review ä»–ä»¬çš„ä»£ç ï¼Œçœ‹ä¸€çœ‹å®ƒä»¬æ˜¯å¦‚ä½•åšåˆ°çš„ï¼Œè§ˆä¸€è§ˆå¤§ç‰›ä»¬çš„ â€œå¥‡æŠ€æ·«å·§â€ã€‚\n<!-- more -->\n### ä»£ç ç‰‡æ®µ\n\n```js\n[].forEach.call($$(\"*\"),function(a){\n    a.style.outline=\"1px solid #\"+(~~(Math.random()*(1<<24))).toString(16);\n})\n```\nåœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œæ­¤æ®µä»£ç ï¼Œä¼šç»™é¡µé¢é‡Œæ‰€æœ‰çš„ DOM å…ƒç´ æ·»åŠ ä¸€ä¸ª 1px çš„æè¾¹ï¼ˆoutlineï¼‰ï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨è°ƒè¯• CSS è¿‡ç¨‹ä¸­åˆ†æã€æ’æŸ¥é—®é¢˜ã€‚\n![](http://ww1.sinaimg.cn/large/6057861cgy1fbzi0vggl6j21kw0vyq8s.jpg)\n\n\n### ä»£ç åˆ†æ\nè¿™æ®µä»£ç æ˜¯ Github ä¸Šçš„ 140 Bytes æ´»åŠ¨ä¸­çš„ä»£ç ï¼Œç®€å•åˆ†æä¸‹è¿™æ®µ JS ä»£ç ï¼Œä½œè€…ä½¿ç”¨äº†ä¸å°‘æŠ€å·§ï¼š\n\né¦–å…ˆæ˜¯éœ€è¦é€‰æ‹©é¡µé¢ä¸Šçš„æ‰€æœ‰å…ƒç´ ï¼Œè¿™é‡Œä½¿ç”¨äº†åªèƒ½åœ¨ Console è°ƒè¯•å·¥å…·ä¸­ä½¿ç”¨çš„ `$$` å‡½æ•°ï¼Œä½ å¯ä»¥åœ¨ Console ä¸­è¾“å…¥ `$$('a')` è‡ªå·±è¯•ä¸€ä¸‹ã€‚å®ƒä¼šè¿”å›å½“å‰é¡µé¢çš„æ‰€æœ‰ anchorï¼ˆé“¾æ¥ï¼‰å…ƒç´ ã€‚`$$` ä¸ `document.querySelectorAll` æ˜¯ç­‰ä»·çš„ï¼Œæœ‰å…´è¶£å¯[æŸ¥çœ‹](http://ourjs.com/detail/54ab768a5695544119000007) $$ å’Œ $ é€‰æ‹©å™¨çš„å†å²ã€‚\n\nå…¶æ¬¡éå†æ‰€æœ‰å…ƒç´ ï¼Œè¿™é‡Œç”¨çš„æ˜¯ `[].forEach.call(...)`ï¼Œä½¿ç”¨ forEach æ›¿ä»£ for ä¹‹ç±»å¾ªç¯èƒ½å‡å°‘ä¸å°‘ä»£ç é‡ï¼Œè€Œ forEach æ˜¯ Array å¯¹è±¡çš„æ–¹æ³•ï¼Œæ‰€ä»¥ç”¨äº†ä¸ª `[]` ç©ºæ•°ç»„æ¥ä»£æ›¿ `Array.prototype` æ›´æ˜¾ç®€æ´ï¼Œå¾—åˆ°æ‰€æœ‰å…ƒç´ çš„èŠ‚ç‚¹åˆ—è¡¨ï¼ˆNodeListï¼‰ï¼Œä½†æ˜¯å®ƒå¹¶æ²¡æœ‰å®ç° Array çš„æ‰€æœ‰æ¥å£ï¼Œå› æ­¤ä½¿ç”¨ `$$(\"*\").forEach` ä¼šè¿”å›é”™è¯¯ï¼Œè¿™é‡Œä½¿ç”¨ `call` æ–¹æ³•æ¥æ›´æ”¹ forEach å†…éƒ¨ `this` æŒ‡å‘ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ `apply`ã€‚\n\nä¹‹åå°±æ˜¯è®©å…ƒç´ æœ‰ä¸€ä¸ªæ¼‚äº®çš„è¾¹æ¡†ï¼Œå¹¶æ‹¥æœ‰ä¸åŒçš„é¢œè‰²äº†ã€‚åœ¨ CSS æ¸²æŸ“çš„ç›’å­æ¨¡å‹ï¼ˆBox Modelï¼‰ä¸­ï¼Œ`outline` ***å¹¶ä¸ä¼šæ”¹å˜å…ƒç´ åŠå…¶å¸ƒå±€çš„ä½ç½®***ã€‚è¿™é‡Œè¾ƒæœ‰æ„æ€çš„æ˜¯å®šä¹‰ä¸åŒçš„é¢œè‰²çš„è‰²å€¼ï¼š\n```js\n~~(Math.random()*(1<<24))).toString(16)\n```\nè¿™é‡Œæƒ³æ„é€ çš„å…¶å®æ˜¯ä¸€ä¸ª 16 è¿›åˆ¶çš„é¢œè‰²å€¼ï¼Œå³ `000000ï½ffffff`ï¼Œä¹Ÿå°±æ˜¯ `parseInt('0',16)` åˆ° `parseInt('ffffff',16)` ä¹‹é—´çš„ä¸€ä¸ªå€¼ã€‚\n\n```js\nparseInt('ffffff',16) == 16777215 == (2^24-1) == (1<<24 - 1)\n```\n\nè€Œ `Math.random()`ï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ª 0~1 ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼Œ`(Math.random()*(1<<24)`ï¼Œå³å¾—åˆ° 0~16777215 ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼Œè€Œè‰²å€¼æ˜¯éœ€è¦æ•´æ•°çš„ï¼Œæ‰€ä»¥å°±éœ€è¦å°†æµ®ç‚¹æ•°è¿›è¡Œ int è½¬æ¢ã€‚è¿™é‡Œç”¨åˆ°äº† `~~`ï¼Œå¯[å‚è§](http://www.jeffjade.com/2015/05/31/2015-05-31-javascript-operational%EF%BC%8Dsymbol/)ç†è§£ JavaScript éè¿ç®—ç¬¦(~/~~ )ã€‚å½“ç„¶å¯ä»¥å°† `~~` è§†ä¸º `parseInt` çš„ç®€å†™ã€‚å¹¶ä¸”ä½¿ç”¨æŒ‰ä½æˆ– `|` æ“ä½œç¬¦ä¹Ÿå¯ä»¥å¾—åˆ°ç›¸åŒçš„ç»“æœï¼š\n\n```js\nvar a = 1.234567890;\nvar b = 0.000000001;\n~~a == 0|a == parseInt(a, 10) == 1\n~~b == 0|b == parseInt(b, 10) == 0\n```\n`toString(16)` ä½¿ç”¨æ•°å­—ç±»å‹çš„ `toString` æ–¹æ³•è¿›è¡Œåè¿›åˆ¶åˆ° 16 è¿›åˆ¶çš„è½¬æ¢ã€‚è‡³æ­¤æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª 0 åˆ° 16777215 ä¹‹é—´çš„éšæœºæ•°ï¼Œç„¶åä½¿ç”¨ `toString(16)` è½¬æ¢æˆ 16 è¿›åˆ¶ï¼Œå°†æ­¤å€¼èµ‹äºˆåˆ°é¡µé¢ä¸Šæ‰€æœ‰å…ƒç´ èŠ‚ç‚¹çš„ `outline` é™„åŠ å±æ€§ä¸Šã€‚å®ƒå°±æ˜¯è¿™æ ·å·¥ä½œçš„ã€‚ç²¾è‡´å·§å¦™è€Œä¸”éå¸¸å®ç”¨ï¼Œé¡¶ä¸€ä¸ªï¼\n","slug":"ä¸€æ®µç¥å¥‡çš„-CSS-è°ƒè¯•ä»£ç ","published":1,"updated":"2019-12-07T04:59:35.962Z","layout":"post","photos":[],"link":"","_id":"ck3v60jtn000pr9q91hujgb7h","content":"<p>ç°åœ¨åˆ°å¤„éƒ½æ˜¯ JavaScriptï¼Œå€˜è‹¥èŠ±ç‚¹æ—¶é—´å»æ·±å…¥åˆ†æï¼Œæ¯æ¬¡éƒ½èƒ½å­¦åˆ°ç‚¹æ–°çš„ä¸œè¥¿ã€‚å½“æˆ‘å‘ç°äº›æœ‰æ„æ€çš„ä¸œè¥¿ï¼Œä¹ æƒ¯å…ˆæ”¶è—èµ·æ¥ã€‚ç­‰æ—¶æŠ€ï¼ˆæ—¶é—´ï¼‹æŠ€æœ¯ï¼‰æˆç†Ÿï¼Œå†å» Review ä»–ä»¬çš„ä»£ç ï¼Œçœ‹ä¸€çœ‹å®ƒä»¬æ˜¯å¦‚ä½•åšåˆ°çš„ï¼Œè§ˆä¸€è§ˆå¤§ç‰›ä»¬çš„ â€œå¥‡æŠ€æ·«å·§â€ã€‚<br><a id=\"more\"></a></p>\n<h3 id=\"ä»£ç ç‰‡æ®µ\"><a href=\"#ä»£ç ç‰‡æ®µ\" class=\"headerlink\" title=\"ä»£ç ç‰‡æ®µ\"></a>ä»£ç ç‰‡æ®µ</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[].forEach.call($$(<span class=\"string\">\"*\"</span>),<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a</span>)</span>&#123;</span><br><span class=\"line\">    a.style.outline=<span class=\"string\">\"1px solid #\"</span>+(~~(<span class=\"built_in\">Math</span>.random()*(<span class=\"number\">1</span>&lt;&lt;<span class=\"number\">24</span>))).toString(<span class=\"number\">16</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œæ­¤æ®µä»£ç ï¼Œä¼šç»™é¡µé¢é‡Œæ‰€æœ‰çš„ DOM å…ƒç´ æ·»åŠ ä¸€ä¸ª 1px çš„æè¾¹ï¼ˆoutlineï¼‰ï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨è°ƒè¯• CSS è¿‡ç¨‹ä¸­åˆ†æã€æ’æŸ¥é—®é¢˜ã€‚<br><img src=\"http://ww1.sinaimg.cn/large/6057861cgy1fbzi0vggl6j21kw0vyq8s.jpg\" alt=\"\"></p>\n<h3 id=\"ä»£ç åˆ†æ\"><a href=\"#ä»£ç åˆ†æ\" class=\"headerlink\" title=\"ä»£ç åˆ†æ\"></a>ä»£ç åˆ†æ</h3><p>è¿™æ®µä»£ç æ˜¯ Github ä¸Šçš„ 140 Bytes æ´»åŠ¨ä¸­çš„ä»£ç ï¼Œç®€å•åˆ†æä¸‹è¿™æ®µ JS ä»£ç ï¼Œä½œè€…ä½¿ç”¨äº†ä¸å°‘æŠ€å·§ï¼š</p>\n<p>é¦–å…ˆæ˜¯éœ€è¦é€‰æ‹©é¡µé¢ä¸Šçš„æ‰€æœ‰å…ƒç´ ï¼Œè¿™é‡Œä½¿ç”¨äº†åªèƒ½åœ¨ Console è°ƒè¯•å·¥å…·ä¸­ä½¿ç”¨çš„ <code>$$</code> å‡½æ•°ï¼Œä½ å¯ä»¥åœ¨ Console ä¸­è¾“å…¥ <code>$$(&#39;a&#39;)</code> è‡ªå·±è¯•ä¸€ä¸‹ã€‚å®ƒä¼šè¿”å›å½“å‰é¡µé¢çš„æ‰€æœ‰ anchorï¼ˆé“¾æ¥ï¼‰å…ƒç´ ã€‚<code>$$</code> ä¸ <code>document.querySelectorAll</code> æ˜¯ç­‰ä»·çš„ï¼Œæœ‰å…´è¶£å¯<a href=\"http://ourjs.com/detail/54ab768a5695544119000007\" target=\"_blank\" rel=\"noopener\">æŸ¥çœ‹</a> $$ å’Œ $ é€‰æ‹©å™¨çš„å†å²ã€‚</p>\n<p>å…¶æ¬¡éå†æ‰€æœ‰å…ƒç´ ï¼Œè¿™é‡Œç”¨çš„æ˜¯ <code>[].forEach.call(...)</code>ï¼Œä½¿ç”¨ forEach æ›¿ä»£ for ä¹‹ç±»å¾ªç¯èƒ½å‡å°‘ä¸å°‘ä»£ç é‡ï¼Œè€Œ forEach æ˜¯ Array å¯¹è±¡çš„æ–¹æ³•ï¼Œæ‰€ä»¥ç”¨äº†ä¸ª <code>[]</code> ç©ºæ•°ç»„æ¥ä»£æ›¿ <code>Array.prototype</code> æ›´æ˜¾ç®€æ´ï¼Œå¾—åˆ°æ‰€æœ‰å…ƒç´ çš„èŠ‚ç‚¹åˆ—è¡¨ï¼ˆNodeListï¼‰ï¼Œä½†æ˜¯å®ƒå¹¶æ²¡æœ‰å®ç° Array çš„æ‰€æœ‰æ¥å£ï¼Œå› æ­¤ä½¿ç”¨ <code>$$(&quot;*&quot;).forEach</code> ä¼šè¿”å›é”™è¯¯ï¼Œè¿™é‡Œä½¿ç”¨ <code>call</code> æ–¹æ³•æ¥æ›´æ”¹ forEach å†…éƒ¨ <code>this</code> æŒ‡å‘ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>apply</code>ã€‚</p>\n<p>ä¹‹åå°±æ˜¯è®©å…ƒç´ æœ‰ä¸€ä¸ªæ¼‚äº®çš„è¾¹æ¡†ï¼Œå¹¶æ‹¥æœ‰ä¸åŒçš„é¢œè‰²äº†ã€‚åœ¨ CSS æ¸²æŸ“çš„ç›’å­æ¨¡å‹ï¼ˆBox Modelï¼‰ä¸­ï¼Œ<code>outline</code> <strong><em>å¹¶ä¸ä¼šæ”¹å˜å…ƒç´ åŠå…¶å¸ƒå±€çš„ä½ç½®</em></strong>ã€‚è¿™é‡Œè¾ƒæœ‰æ„æ€çš„æ˜¯å®šä¹‰ä¸åŒçš„é¢œè‰²çš„è‰²å€¼ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">~~(<span class=\"built_in\">Math</span>.random()*(<span class=\"number\">1</span>&lt;&lt;<span class=\"number\">24</span>))).toString(<span class=\"number\">16</span>)</span><br></pre></td></tr></table></figure></p>\n<p>è¿™é‡Œæƒ³æ„é€ çš„å…¶å®æ˜¯ä¸€ä¸ª 16 è¿›åˆ¶çš„é¢œè‰²å€¼ï¼Œå³ <code>000000ï½ffffff</code>ï¼Œä¹Ÿå°±æ˜¯ <code>parseInt(&#39;0&#39;,16)</code> åˆ° <code>parseInt(&#39;ffffff&#39;,16)</code> ä¹‹é—´çš„ä¸€ä¸ªå€¼ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'ffffff'</span>,<span class=\"number\">16</span>) == <span class=\"number\">16777215</span> == (<span class=\"number\">2</span>^<span class=\"number\">24</span><span class=\"number\">-1</span>) == (<span class=\"number\">1</span>&lt;&lt;<span class=\"number\">24</span> - <span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure>\n<p>è€Œ <code>Math.random()</code>ï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ª 0~1 ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼Œ<code>(Math.random()*(1&lt;&lt;24)</code>ï¼Œå³å¾—åˆ° 0~16777215 ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼Œè€Œè‰²å€¼æ˜¯éœ€è¦æ•´æ•°çš„ï¼Œæ‰€ä»¥å°±éœ€è¦å°†æµ®ç‚¹æ•°è¿›è¡Œ int è½¬æ¢ã€‚è¿™é‡Œç”¨åˆ°äº† <code>~~</code>ï¼Œå¯<a href=\"http://www.jeffjade.com/2015/05/31/2015-05-31-javascript-operational%EF%BC%8Dsymbol/\" target=\"_blank\" rel=\"noopener\">å‚è§</a>ç†è§£ JavaScript éè¿ç®—ç¬¦(~/~~ )ã€‚å½“ç„¶å¯ä»¥å°† <code>~~</code> è§†ä¸º <code>parseInt</code> çš„ç®€å†™ã€‚å¹¶ä¸”ä½¿ç”¨æŒ‰ä½æˆ– <code>|</code> æ“ä½œç¬¦ä¹Ÿå¯ä»¥å¾—åˆ°ç›¸åŒçš„ç»“æœï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1.234567890</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = <span class=\"number\">0.000000001</span>;</span><br><span class=\"line\">~~a == <span class=\"number\">0</span>|a == <span class=\"built_in\">parseInt</span>(a, <span class=\"number\">10</span>) == <span class=\"number\">1</span></span><br><span class=\"line\">~~b == <span class=\"number\">0</span>|b == <span class=\"built_in\">parseInt</span>(b, <span class=\"number\">10</span>) == <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n<p><code>toString(16)</code> ä½¿ç”¨æ•°å­—ç±»å‹çš„ <code>toString</code> æ–¹æ³•è¿›è¡Œåè¿›åˆ¶åˆ° 16 è¿›åˆ¶çš„è½¬æ¢ã€‚è‡³æ­¤æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª 0 åˆ° 16777215 ä¹‹é—´çš„éšæœºæ•°ï¼Œç„¶åä½¿ç”¨ <code>toString(16)</code> è½¬æ¢æˆ 16 è¿›åˆ¶ï¼Œå°†æ­¤å€¼èµ‹äºˆåˆ°é¡µé¢ä¸Šæ‰€æœ‰å…ƒç´ èŠ‚ç‚¹çš„ <code>outline</code> é™„åŠ å±æ€§ä¸Šã€‚å®ƒå°±æ˜¯è¿™æ ·å·¥ä½œçš„ã€‚ç²¾è‡´å·§å¦™è€Œä¸”éå¸¸å®ç”¨ï¼Œé¡¶ä¸€ä¸ªï¼</p>\n","site":{"data":{}},"excerpt":"<p>ç°åœ¨åˆ°å¤„éƒ½æ˜¯ JavaScriptï¼Œå€˜è‹¥èŠ±ç‚¹æ—¶é—´å»æ·±å…¥åˆ†æï¼Œæ¯æ¬¡éƒ½èƒ½å­¦åˆ°ç‚¹æ–°çš„ä¸œè¥¿ã€‚å½“æˆ‘å‘ç°äº›æœ‰æ„æ€çš„ä¸œè¥¿ï¼Œä¹ æƒ¯å…ˆæ”¶è—èµ·æ¥ã€‚ç­‰æ—¶æŠ€ï¼ˆæ—¶é—´ï¼‹æŠ€æœ¯ï¼‰æˆç†Ÿï¼Œå†å» Review ä»–ä»¬çš„ä»£ç ï¼Œçœ‹ä¸€çœ‹å®ƒä»¬æ˜¯å¦‚ä½•åšåˆ°çš„ï¼Œè§ˆä¸€è§ˆå¤§ç‰›ä»¬çš„ â€œå¥‡æŠ€æ·«å·§â€ã€‚<br>","more":"</p>\n<h3 id=\"ä»£ç ç‰‡æ®µ\"><a href=\"#ä»£ç ç‰‡æ®µ\" class=\"headerlink\" title=\"ä»£ç ç‰‡æ®µ\"></a>ä»£ç ç‰‡æ®µ</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[].forEach.call($$(<span class=\"string\">\"*\"</span>),<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a</span>)</span>&#123;</span><br><span class=\"line\">    a.style.outline=<span class=\"string\">\"1px solid #\"</span>+(~~(<span class=\"built_in\">Math</span>.random()*(<span class=\"number\">1</span>&lt;&lt;<span class=\"number\">24</span>))).toString(<span class=\"number\">16</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œæ­¤æ®µä»£ç ï¼Œä¼šç»™é¡µé¢é‡Œæ‰€æœ‰çš„ DOM å…ƒç´ æ·»åŠ ä¸€ä¸ª 1px çš„æè¾¹ï¼ˆoutlineï¼‰ï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨è°ƒè¯• CSS è¿‡ç¨‹ä¸­åˆ†æã€æ’æŸ¥é—®é¢˜ã€‚<br><img src=\"http://ww1.sinaimg.cn/large/6057861cgy1fbzi0vggl6j21kw0vyq8s.jpg\" alt=\"\"></p>\n<h3 id=\"ä»£ç åˆ†æ\"><a href=\"#ä»£ç åˆ†æ\" class=\"headerlink\" title=\"ä»£ç åˆ†æ\"></a>ä»£ç åˆ†æ</h3><p>è¿™æ®µä»£ç æ˜¯ Github ä¸Šçš„ 140 Bytes æ´»åŠ¨ä¸­çš„ä»£ç ï¼Œç®€å•åˆ†æä¸‹è¿™æ®µ JS ä»£ç ï¼Œä½œè€…ä½¿ç”¨äº†ä¸å°‘æŠ€å·§ï¼š</p>\n<p>é¦–å…ˆæ˜¯éœ€è¦é€‰æ‹©é¡µé¢ä¸Šçš„æ‰€æœ‰å…ƒç´ ï¼Œè¿™é‡Œä½¿ç”¨äº†åªèƒ½åœ¨ Console è°ƒè¯•å·¥å…·ä¸­ä½¿ç”¨çš„ <code>$$</code> å‡½æ•°ï¼Œä½ å¯ä»¥åœ¨ Console ä¸­è¾“å…¥ <code>$$(&#39;a&#39;)</code> è‡ªå·±è¯•ä¸€ä¸‹ã€‚å®ƒä¼šè¿”å›å½“å‰é¡µé¢çš„æ‰€æœ‰ anchorï¼ˆé“¾æ¥ï¼‰å…ƒç´ ã€‚<code>$$</code> ä¸ <code>document.querySelectorAll</code> æ˜¯ç­‰ä»·çš„ï¼Œæœ‰å…´è¶£å¯<a href=\"http://ourjs.com/detail/54ab768a5695544119000007\" target=\"_blank\" rel=\"noopener\">æŸ¥çœ‹</a> $$ å’Œ $ é€‰æ‹©å™¨çš„å†å²ã€‚</p>\n<p>å…¶æ¬¡éå†æ‰€æœ‰å…ƒç´ ï¼Œè¿™é‡Œç”¨çš„æ˜¯ <code>[].forEach.call(...)</code>ï¼Œä½¿ç”¨ forEach æ›¿ä»£ for ä¹‹ç±»å¾ªç¯èƒ½å‡å°‘ä¸å°‘ä»£ç é‡ï¼Œè€Œ forEach æ˜¯ Array å¯¹è±¡çš„æ–¹æ³•ï¼Œæ‰€ä»¥ç”¨äº†ä¸ª <code>[]</code> ç©ºæ•°ç»„æ¥ä»£æ›¿ <code>Array.prototype</code> æ›´æ˜¾ç®€æ´ï¼Œå¾—åˆ°æ‰€æœ‰å…ƒç´ çš„èŠ‚ç‚¹åˆ—è¡¨ï¼ˆNodeListï¼‰ï¼Œä½†æ˜¯å®ƒå¹¶æ²¡æœ‰å®ç° Array çš„æ‰€æœ‰æ¥å£ï¼Œå› æ­¤ä½¿ç”¨ <code>$$(&quot;*&quot;).forEach</code> ä¼šè¿”å›é”™è¯¯ï¼Œè¿™é‡Œä½¿ç”¨ <code>call</code> æ–¹æ³•æ¥æ›´æ”¹ forEach å†…éƒ¨ <code>this</code> æŒ‡å‘ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>apply</code>ã€‚</p>\n<p>ä¹‹åå°±æ˜¯è®©å…ƒç´ æœ‰ä¸€ä¸ªæ¼‚äº®çš„è¾¹æ¡†ï¼Œå¹¶æ‹¥æœ‰ä¸åŒçš„é¢œè‰²äº†ã€‚åœ¨ CSS æ¸²æŸ“çš„ç›’å­æ¨¡å‹ï¼ˆBox Modelï¼‰ä¸­ï¼Œ<code>outline</code> <strong><em>å¹¶ä¸ä¼šæ”¹å˜å…ƒç´ åŠå…¶å¸ƒå±€çš„ä½ç½®</em></strong>ã€‚è¿™é‡Œè¾ƒæœ‰æ„æ€çš„æ˜¯å®šä¹‰ä¸åŒçš„é¢œè‰²çš„è‰²å€¼ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">~~(<span class=\"built_in\">Math</span>.random()*(<span class=\"number\">1</span>&lt;&lt;<span class=\"number\">24</span>))).toString(<span class=\"number\">16</span>)</span><br></pre></td></tr></table></figure></p>\n<p>è¿™é‡Œæƒ³æ„é€ çš„å…¶å®æ˜¯ä¸€ä¸ª 16 è¿›åˆ¶çš„é¢œè‰²å€¼ï¼Œå³ <code>000000ï½ffffff</code>ï¼Œä¹Ÿå°±æ˜¯ <code>parseInt(&#39;0&#39;,16)</code> åˆ° <code>parseInt(&#39;ffffff&#39;,16)</code> ä¹‹é—´çš„ä¸€ä¸ªå€¼ã€‚</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">'ffffff'</span>,<span class=\"number\">16</span>) == <span class=\"number\">16777215</span> == (<span class=\"number\">2</span>^<span class=\"number\">24</span><span class=\"number\">-1</span>) == (<span class=\"number\">1</span>&lt;&lt;<span class=\"number\">24</span> - <span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure>\n<p>è€Œ <code>Math.random()</code>ï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ª 0~1 ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼Œ<code>(Math.random()*(1&lt;&lt;24)</code>ï¼Œå³å¾—åˆ° 0~16777215 ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼Œè€Œè‰²å€¼æ˜¯éœ€è¦æ•´æ•°çš„ï¼Œæ‰€ä»¥å°±éœ€è¦å°†æµ®ç‚¹æ•°è¿›è¡Œ int è½¬æ¢ã€‚è¿™é‡Œç”¨åˆ°äº† <code>~~</code>ï¼Œå¯<a href=\"http://www.jeffjade.com/2015/05/31/2015-05-31-javascript-operational%EF%BC%8Dsymbol/\" target=\"_blank\" rel=\"noopener\">å‚è§</a>ç†è§£ JavaScript éè¿ç®—ç¬¦(~/~~ )ã€‚å½“ç„¶å¯ä»¥å°† <code>~~</code> è§†ä¸º <code>parseInt</code> çš„ç®€å†™ã€‚å¹¶ä¸”ä½¿ç”¨æŒ‰ä½æˆ– <code>|</code> æ“ä½œç¬¦ä¹Ÿå¯ä»¥å¾—åˆ°ç›¸åŒçš„ç»“æœï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">1.234567890</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> b = <span class=\"number\">0.000000001</span>;</span><br><span class=\"line\">~~a == <span class=\"number\">0</span>|a == <span class=\"built_in\">parseInt</span>(a, <span class=\"number\">10</span>) == <span class=\"number\">1</span></span><br><span class=\"line\">~~b == <span class=\"number\">0</span>|b == <span class=\"built_in\">parseInt</span>(b, <span class=\"number\">10</span>) == <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n<p><code>toString(16)</code> ä½¿ç”¨æ•°å­—ç±»å‹çš„ <code>toString</code> æ–¹æ³•è¿›è¡Œåè¿›åˆ¶åˆ° 16 è¿›åˆ¶çš„è½¬æ¢ã€‚è‡³æ­¤æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª 0 åˆ° 16777215 ä¹‹é—´çš„éšæœºæ•°ï¼Œç„¶åä½¿ç”¨ <code>toString(16)</code> è½¬æ¢æˆ 16 è¿›åˆ¶ï¼Œå°†æ­¤å€¼èµ‹äºˆåˆ°é¡µé¢ä¸Šæ‰€æœ‰å…ƒç´ èŠ‚ç‚¹çš„ <code>outline</code> é™„åŠ å±æ€§ä¸Šã€‚å®ƒå°±æ˜¯è¿™æ ·å·¥ä½œçš„ã€‚ç²¾è‡´å·§å¦™è€Œä¸”éå¸¸å®ç”¨ï¼Œé¡¶ä¸€ä¸ªï¼</p>"},{"title":"æˆ‘çš„ä¸»ç®¡ç»™æˆ‘çš„ä¸€äº›å»ºè®®","comments":1,"date":"2018-06-20T23:43:58.000Z","from":null,"_content":"\næœ¬æ–‡ç¿»è¯‘è‡ª [Reddit](https://www.reddit.com/r/startups/comments/74pms1/my_manager_who_i_loved_recently_left_my_company_i/) ä¸Šçš„ä¸€ç¯‡æ–‡ç« ã€‚å…¶ä¸»è¦å†…å®¹ä¸ºä¸€åèŒå·¥è®°å½•äº†ä»–ä¸å…¶å·²ç¦»èŒçš„ä¸»ç®¡çš„ä¸€å¯¹ä¸€äº¤æµã€‚å…¶ä¸­æ€»ç»“äº†å¤§é‡å…³äºèŒä¸šç”Ÿæ¶¯ï¼Œå·¥ä½œå†…å®¹ï¼Œäººé™…å…³ç³»ï¼Œè‡ªæˆ‘æˆé•¿çš„å»ºè®®ã€‚\n\n<!-- more -->\n\n### é¦–è¦ä»»åŠ¡\n\n**ç¡®å®šå¹¶ä¸“æ³¨äºä½ çš„é¦–è¦ä»»åŠ¡ â€“ å¦‚æœä¸ï¼Œé‚£ä¹ˆä½ æ•´å¤©åœ¨å¹²ä»€ä¹ˆï¼Ÿ**\n\nä¼˜å…ˆä»»åŠ¡çœŸçš„æ˜¯æœ€é¦–è¦ä»»åŠ¡çš„å—ï¼Ÿ å½“å‰ä½ éœ€è¦åšå¾—æœ€ä¸ºé‡è¦çš„äº‹æ˜¯ä»€ä¹ˆï¼Ÿå¦‚æœä½ ä¸èƒ½å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆä½ å°±åº”è¯¥åœä¸‹æ‰‹å¤´çš„æ‰€æœ‰å·¥ä½œç„¶åå…ˆå¼„æ¸…æ¥šä½ çš„ç­”æ¡ˆã€‚æœ‰æ˜ç¡®çš„ç­”æ¡ˆèƒ½è®©ä½ æ›´åŠ æ˜ç¡®ç›®æ ‡ä¸ä¸“æ³¨ã€‚æ²¡æœ‰æ˜ç¡®çš„ç­”æ¡ˆå¾€å¾€ä¼šå¯¼è‡´ä½ ç»å¸¸åœ¨åšä¸€äº›å¹¶ä¸é‡è¦çš„äº‹å¹¶ä¸”æµªè´¹å¤§é‡å®è´µçš„æ—¶é—´ã€‚\n\næ¯å¤©æ€»ä¼šæœ‰æºæºä¸æ–­éœ€è¦åšçš„äº‹å„¿ã€‚äººä»¬å¸¸ä¼šå€¾å‘äºå…ˆåšç®€å•ã€æœ‰è¶£æˆ–ç†Ÿæ‚‰çš„ä»»åŠ¡ã€‚ä½†é•¿è¿œæ¥çœ‹è¿™æ˜¯ä¸€ä¸ªé™·é˜±ã€‚å®Œæˆé¦–è¦ä»»åŠ¡ 5%-10% çš„å·¥ä½œé‡æ¯”åšå¤§é‡å¯¹ç›®æ ‡æ— ç›Šçš„ä»»åŠ¡æ›´å¥½ã€‚\n\n> å¾€å¾€è‡ªå·±è®¤ä¸ºåº”è¯¥ä¼˜å…ˆåšçš„å·¥ä½œå…¶å®å¹¶ä¸æ˜¯å½“å‰ç›®æ ‡çš„é¦–è¦ä»»åŠ¡\n\nä½ è´Ÿè´£ä»€ä¹ˆï¼Ÿ ä¼ä¸šä¸­çš„æ¯ä¸ªäººéƒ½åº”è¯¥è´Ÿè´£ä¸€å®šçš„å·¥ä½œã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œå®ƒåº”è¯¥æ˜¯ä¸ä½ çš„é¦–è¦ç›®æ ‡ç›¸å…³çš„åº¦é‡æŒ‡æ ‡ã€‚å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆä½ å°±åº”è¯¥å’Œä½ çš„ä¸»ç®¡æˆ–è€…è€æ¿å¥½å¥½è°ˆä¸€è°ˆæ¥ç¡®å®šä½ çš„é¦–è¦ä»»åŠ¡ã€‚å½“ä½ ç¡®ç«‹å¥½ä½ çš„é¦–è¦ä»»åŠ¡åï¼Œä½ è¿˜ä¼šä¿è¯ä½ å·²äº†è§£äº†è¶³å¤Ÿçš„ä¿¡æ¯æ¥æå‡è¿™ä¸ªæŒ‡æ ‡ã€‚\n\næŒæ§å¥½ä½ çš„è´Ÿè´£èŒƒå›´ã€‚ ä¸€èˆ¬äººä»¬éƒ½ä¼šæƒ³å–„äºå®Œæˆä»–ä»¬çš„å·¥ä½œã€‚å¬èµ·æ¥å¾ˆæ˜æ˜¾ï¼Œä½†æœ‰æ—¶å€™ç¯å¢ƒä¼šè¯±æƒ‘ä½ å»åšä¸€äº›æ— å…³ç´§è¦çš„äº‹æƒ…ã€‚è¿™æ—¶å€™å°±å€¼å¾—æ³¨æ„äº†ï¼Œè¿”å›å»çœ‹ç¬¬ä¸€æ¡ â€“ ä¿æŒé¦–è¦ä»»åŠ¡çš„ä¼˜å…ˆã€‚\n\nç²¾ç¡®ä½ çš„ç›®æ ‡ã€‚ å¦‚æœç›®æ ‡æœ‰ç‚¹æ¨¡ç³Šï¼Œç©ºå‡ºä¸€ç‚¹æ—¶é—´æ¥ç¡®ç«‹å®ƒçš„ç²¾ç¡®æ€§ã€‚ä¸è¦å»åšè¾ƒä¸ºæ¨¡ç³Šçš„å·¥ä½œ â€“ å®ƒä»¬å¸¸å¸¸ä¼šä»¤äººåˆ†å¿ƒå’Œåšä¸€äº›è¶…å‡ºç›®æ ‡èŒƒå›´çš„äº‹ã€‚è¦å­¦ä¼šé‰´åˆ«è‡ªå·±æ€è€ƒï¼Œæ–‡å­—ï¼ŒåŠäº¤æµä¸­çš„æ¨¡ç³Šåœ°å¸¦ï¼Œç„¶åæŠŠè¿™äº›æ¨¡ç³Šéƒ½æ¶ˆé™¤æ‰ï¼Œä½¿ä¹‹æ¸…æ™°æ˜äº†ã€‚\n\n### é«˜æ•ˆç®¡ç†\n\n**æŠŠè‡ªå·±å½“åšå®è´µä¸”é‡è¦çš„èµ„æºä¸€æ ·ç®¡ç†**\n\nä¸è¦ä¸æ‡‚è£…æ‡‚ã€‚ å¯¹è‡ªå·±è¦å¦è¯šç›¸å¾…ï¼Œå¯¹è‡ªå·±æœ‰æ¸…æ™°çš„è‡ªæˆ‘è®¤è¯†èƒ½è®©ä½ æ›´å¿«çš„å­¦ä¹ å’Œæå‡ã€‚å¦‚æœä½ æŠ±ç€å¦è¯šçš„å¿ƒæ€ä¸ä»–äººäº¤æµï¼Œåˆ«äººä¹Ÿä¼šå¦è¯šå¯¹å¾…ä½ ï¼Œç”±æ­¤ä¸€ä¸ªèˆ’é€‚å¥åº·çš„äº¤æµç¯å¢ƒå°±å»ºç«‹èµ·æ¥äº†ï¼Œå¹¶ä¸”ä¸æ–­çš„å½±å“ç€å‘¨å›´çš„äººã€‚\n\nåˆ¶å®šè®¡åˆ’å¹¶æ‰§è¡Œã€‚ æˆ‘å°æ—¶å€™éå¸¸è®¨åŒæ—¥å†å’Œæ—¶é—´è¡¨ï¼Œå¹¶ä¸”èŠ±è´¹äº†å¤§é‡æ—¶é—´åº”ä»˜å„ç§æˆªè‡³æ—¥æœŸçš„æ½œåœ¨å‹åŠ›ã€‚ä½†äº‹å®æ˜¯ï¼šæ— è®ºè®¨åŒè¿˜æ˜¯å–œæ¬¢è®¡åˆ’ï¼Œæˆ‘ä»¬åªæœ‰æœ‰é™çš„æ—¶é—´å’Œæ— å°½çš„ä»»åŠ¡éœ€è¦åšï¼Œè¿™äº›éƒ½ä¸ä¼šéšç€æˆ‘ä»¬çš„ä¸»è§‚æ„è¯†è€Œæ”¹å˜ã€‚æ²¡æœ‰è‰¯å¥½çš„è®¡åˆ’ï¼Œæˆ‘ä»¬æœ€ç»ˆä¼šæ— ä¼‘æ­¢çš„å·¥ä½œã€‚å¦‚æœä½ ä¸ä¸»åŠ¨æå‰å†³å®šä½ åº”è¯¥æ€ä¹ˆèŠ±è´¹ä½ å¾—æ—¶é—´å’Œç²¾åŠ›ï¼Œé‚£ä¹ˆä¼šæœ‰å…¶ä»–çš„äº‹æƒ…ä¼šå¸®ä½ åšå†³å®š â€“ è¢«åˆ«äººæ‰“æ–­æˆ–è€…ä¸€äº›æ— å…³ç´§è¦çš„ä»»åŠ¡ï¼ˆå®ƒä»¬éƒ½ä¼šè®©ä½ ä¸ç”±è‡ªä¸»çš„èŠ±æ—¶é—´å»å¤„ç†ï¼‰ã€‚\n\nç»è¿‡å¤šå¹´çš„åæ€å’Œæ‘‡æ‘†ï¼Œæˆ‘é€æ¸æ„è¯†åˆ°æˆ‘çš„é—®é¢˜å¹¶éæ˜¯æŒ‡å®šè®¡åˆ’ï¼Œè€Œä¸”è¢«åŠ¨çš„å»åšä¸€äº›æˆ‘ä¸æƒ³åšçš„äº‹å„¿ã€‚æˆ‘åªæ˜¯æ½œæ„è¯†çš„å¯¹æ—¥å†ï¼Œè®¡åˆ’æœ‰ç€åæŠ—æ€åº¦ã€‚å¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œè¿™éœ€è¦èŠ±è´¹å¤§é‡ç²¾åŠ›å»æ¶ˆé™¤è¿™äº›å½±å“ã€‚å¼€å§‹åˆ¶å®šä¸€äº›ç®€å•çš„è®¡åˆ’ç„¶åå®Œæˆã€‚å†™ä¸‹ä¸€äº›ä½ èƒ½ 5 åˆ†é’Ÿå†…å®Œæˆçš„äº‹ï¼Œç„¶åæ‰§è¡Œï¼Œå®Œæˆã€‚åå¤å¦‚æ­¤è®¡åˆ’æ‰§è¡Œï¼Œè®¡åˆ’æ‰§è¡Œï¼Œç›´åˆ°ä½ åšçš„è¶Šæ¥è¶Šå¥½ï¼Œç„¶åé€æ¸åŠ å¤šæ—¶é—´ã€‚å†°å†»ä¸‰å°ºéä¸€æ—¥ä¹‹å¯’ï¼Œé€šè¿‡ä¸æ–­ç»ƒä¹ åŠåŠ å¤§ä»»åŠ¡é‡åŠæ—¶é—´ï¼Œä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œå°±åƒç©æ¸¸æˆä¸€æ ·ã€‚å½“ä½ å¼€å§‹ä¹ æƒ¯è¿™æ ·çš„å¾ªåºæ¸è¿›æ–¹å¼æ—¶ï¼Œä¼šå˜å¾—è¶Šæ¥è¶Šæœ‰è¶£å’Œä»¤äººæ¿€åŠ¨ã€‚ä½ å°†ä¼šè¶Šæ¥è¶Šäº†è§£ä½ è‡ªå·±åŠä½ å‘¨å›´çš„ä¸–ç•Œã€‚\n\nåŠ³é€¸ç»“åˆã€‚ ä½ æ˜¯ä¸€é¡¹å®è´µçš„èµ„æºï¼Œå¹¶ä¸”éœ€è¦ä¼‘æ•´ã€‚ä¸è¦å¿«é€Ÿè€—å°½ç²¾åŠ›ï¼Œè¦å­¦ä¼šç»†æ°´é•¿æµï¼Œå½“åšé©¬æ‹‰æ¾æ¥çœ‹ã€‚ä½†æˆ‘å¼€å§‹å·¥ä½œæ—¶ï¼Œæˆ‘æ„Ÿè§‰æˆ‘è·å¾—äº†ä¸€ä¸ªéš¾å¾—å¯è´µçš„æœºä¼šã€è§‰çš„è‡ªå·±è¿˜ä¸å¤Ÿæ ¼ã€é¡¶ç€å‹åŠ›ã€å¸¸å¸¸åŸ‹å¤´è‹¦å¹²ã€ä½†è¿˜æ„Ÿåˆ°è‡ªå·±è½åäºå·¥ä½œï¼Œç„¶åæˆ‘å¼€å§‹æ‹–å»¶å’Œå»¶æœŸç›´åˆ°æˆ‘ä¼‘äº†ä¸ªå‡ã€‚ç°åœ¨å›è¿‡å¤´æ¥çœ‹ï¼Œè¿™çœŸæ˜¯ä¸ªæ»‘ç¨½çš„è¡Œä¸ºï¼Œè€Œä¸”æˆ‘éå¸¸åæ‚”ã€‚å¦‚æœå½“åˆæˆ‘æŠ—ä½å‹åŠ›å’Œæå‰å®‰æ’å¥½æ—¶é—´ï¼Œæˆ‘ä¼šæ›´åŠ å¼€å¿ƒï¼Œå¥åº·ï¼Œå®Œæˆæ›´å¤šå¾—å·¥ä½œã€‚\n\nå¾æ—¥ä¸‰çœå¾èº«ã€‚ åˆ†æè¿‡å»çš„å·¥ä½œï¼Œå“ªäº›å®Œæˆäº†ï¼Œå“ªäº›æ²¡æœ‰ï¼Œå“ªäº›æœ€ç»ˆæ•ˆæœä¸é”™ï¼Œå“ªäº›å¤±è´¥â€¦â€¦ ä½ åº”è¯¥å®šæœŸç‹¬ç«‹è¿™æ ·å›é¡¾åˆ†æå·¥ä½œã€‚æˆ‘ç»å¸¸å·æ‡’è®°ç¬”è®°ï¼Œå³ä½¿è®°äº†ä¹ŸåŸºæœ¬ä¸ä¼šå›å¤´å†çœ‹ã€‚å¦‚æœæˆ‘èƒ½é‡æ–°æ¥è¿‡ï¼Œæˆ‘ä¼šæ›´åŠ ç³»ç»Ÿçš„ä¸¥äºåˆ©å·±çš„å¯¹å¾…æ­¤äº‹ã€‚\n\n> é€šè¿‡å®šæœŸå¤ç›˜èƒ½å¤Ÿä¸æ–­å¼ºåŒ–è‡ªå·±å¯¹ä¸€ä¸ªé¡¹ç›®çš„ç†è§£ï¼Œå¦‚æœé¡¹ç›®è¶Šæ»šè¶Šå¤§ï¼Œè¿˜æ˜¯ä¼šå¯¹é¡¹ç›®çš„æŒæ§æ¸¸åˆƒæœ‰ä½™ã€‚å®šæœŸçš„å¤ç›˜è¿˜èƒ½èµ·åˆ°æ‰¾å‡ºå¼±é¡¹ï¼Œå¼¥è¡¥ä¸è¶³ï¼Œå¸å–ç»éªŒï¼Œè®©è‡ªå·±ä¹‹åèƒ½å¤Ÿæ›´ä¼˜å¼‚çš„å®Œæˆä»»åŠ¡ã€‚å¾ˆå¤šå®è´µçš„ç»éªŒï¼Œç»å†äº†ä¸€æ¬¡å°±å®Œäº†çš„äººç®—ä½œæ™®é€šäººï¼›ç»å†äº†ä¸€æ¬¡å¹¶å¸å–ç»éªŒåœ¨ä»¥åé‡åˆ°åŒæ ·é—®é¢˜èƒ½å¤Ÿé€šè¿‡ç»éªŒè§£å†³çš„äººç®—ä½œä¼˜ç§€çš„äººï¼›ç»å†äº†ä¸€æ¬¡ä¸ä»…å¸å–äº†ç»éªŒï¼Œè¿˜èƒ½åšåˆ°å¤ç›˜ä¸¾ä¸€åä¸‰çš„èƒ½ç§°ä¹‹ä¸ºéå¸¸æœ‰å‰æ™¯çš„äººæ‰äº†\n\nè¡¨è¿°ä½ çš„è¿›åº¦ã€‚ è¿™åœ¨å¤šä¸ªå±‚é¢ä¸Šå‡éå¸¸æœ‰å¸®åŠ©ã€‚é¦–å…ˆï¼Œåªéœ€è¦ç»™é«˜å¼ºåº¦å·¥ä½œçš„å¤§è„‘è…¾ç‚¹ä¼‘æ¯æ—¶é—´ï¼ŒæŠŠå·¥ä½œè¿›åº¦æ‰‹å†™åœ¨çº¸ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ä¹ æƒ¯ã€‚è¿™ä¼šå¼ºè¿«ä½ æŠŠæƒ³è¦è¡¨è¾¾çš„ä¸œè¥¿è¡¨è¿°å‡ºæ¥ã€‚ä½ æƒ³è¦è¾¾æˆä»€ä¹ˆç›®æ ‡ï¼Ÿä½ æ˜¯å¦‚æœåšå‡ºå†³ç­–çš„ï¼Ÿå½“ä½ åœ¨ç”¨æ–‡å­—è¡¨è¿°ä½ çš„è¿›åº¦çš„æ—¶å€™ï¼Œä½ è¿˜èƒ½é¡ºå¸¦åˆ†æä¸‹ã€‚ä½ èƒ½æ‰¾å‡ºå¼±é¡¹å¹¶å¼ºåŒ–å®ƒä»¬ã€‚è¿™å°±åƒæ˜¯åœ¨çœ‹è‡ªå·±çš„å›æ”¾ä¸€æ ·ï¼Œèƒ½å¤Ÿæ³¨æ„åˆ°æ›´å¤šçš„ç»†èŠ‚ã€‚å½“ç„¶ï¼Œä½ è¿˜èƒ½ä¸ä»–äººåˆ†äº«ä½ çš„è¡¨è¿°ï¼Œå¹¶æ”¶åˆ°åé¦ˆï¼Œè¿™åˆæ˜¯æ›´è¿›ä¸€æ­¥çš„æå‡äº†ã€‚\n\n> é€šè¿‡å…·ä½“çš„è¯­è¨€æˆ–è€…æ–‡å­—è¡¨è¿°è‡ªå·±å·¥ä½œçš„è¿›åº¦ï¼Œå¯ä»¥æŠŠå¤§è„‘é‡ŒæŠ½è±¡çš„æ€è€ƒå…·ä½“åŒ–ï¼Œå¹¶ç”±æ­¤è§‚å¯Ÿç»†èŠ‚æ‰¾å‡ºé—®é¢˜æˆ–è€…å¼±ç‚¹å¹¶å¼ºåŒ–ã€‚é€šè¿‡å…·ä½“çš„è¡¨è¿°èƒ½å¤Ÿå¢å¼ºé€»è¾‘èƒ½åŠ›ï¼Œé”»ç‚¼è¡¨è¾¾èƒ½åŠ›ä¸æ›´æ¸…æ™°çš„è®¤è¯†è‡ªå·±åšçš„äº‹å„¿ã€‚\n\nä¸ºè‡ªå·±è´Ÿè´£ã€‚ å³ä½¿ä½ æœ‰éå¸¸ä¼˜ç§€çš„ä¸»ç®¡ï¼Œä½†æ˜¯ä½ æœ€ç»ˆä¼šä¸ºè‡ªå·±çš„å­¦ä¹ ã€æ‰§è¡Œå’Œæˆé•¿è¿›è¡Œè´Ÿè´£ã€‚å›é¡¾ä»¥å‰ï¼Œæˆ‘è§‰å¾—æˆ‘è‡ªå·±èŠ±è´¹äº†ç¬¬ä¸€ä¸ª 3-4 å¹´åœ¨èˆ’é€‚åŒºï¼Œä»ä¸ä¸»åŠ¨å‡ºå‡»ã€‚æˆ‘çš„ç¡®æœ‰ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„ä¸»ç®¡ï¼Œç»™æˆ‘äº†å¤§é‡çš„ç›®æ ‡ã€å»ºè®®å’Œè§„åˆ’ï¼Œä¹Ÿè®¸ä»–ä»¬è¿˜ç»™æˆ‘å‰§é€äº†ä¸€äº›ä¿¡æ¯ã€‚ä½†æˆ‘èŠ±äº†å‡ å¹´çš„æ—¶é—´æ‰å‘ç°ã€æˆ‘å¿…é¡»ç»™è‡ªå·±è®¾å®šæ›´é«˜çš„ç›®æ ‡ï¼Œå¹¶åŠªåŠ›è¾¾æˆã€ã€‚é™¤éä½ æœ‰ä¸€ä¸ªéå¸¸ç–¯ç‹‚çš„è€æ¿æˆ–è€…ä¸»ç®¡åˆ†é…ç»™ä½ é«˜éš¾åº¦å·¥ä½œï¼Œä¸ç„¶æ²¡æœ‰äººèƒ½æ¯”ä½ æ›´é€‚åˆæŠŠè‡ªå·±æ¨åˆ°æé™ã€‚ï¼ˆæˆ‘å¹¶ä¸æ˜¯æš—ç¤ºå¤§é‡çš„å·¥ä½œå’Œå¤§é‡çš„æ—¶é—´ï¼Œæˆ‘æƒ³è¡¨è¾¾çš„æ˜¯è·³å‡ºä½ çš„èˆ’é€‚åŒºï¼ŒæŒ‘æˆ˜è‡ªå·±è¾¾åˆ°ä¸‹ä¸€ä¸ªé«˜åº¦ã€‚å°è¯•æ–°é²œäº‹ç‰©ï¼Œå­¦ä¹ è¶…å‡ºä½ å·¥ä½œèŒƒç•´çš„æ–°ä¸œè¥¿ç­‰ç­‰ï¼‰\n\nèŠ±æ—¶é—´å­¦ä¹ ã€‚ å½“ä½ å‘ç°ä¸€äº›å’Œä½ å·¥ä½œç›¸å…³çš„å¹²è´§èµ„æ–™æ—¶ï¼Œæ ‡æ³¨ä¸€ä¸‹ç¨åå†çœ‹ï¼Œç„¶åå®šæœŸå»æµè§ˆå­¦ä¹ è¿™äº›å­˜è´§ã€‚æŒ‰å‘¨æ¥è§„åˆ’æ˜¯éå¸¸ä¸é”™çš„ã€‚å¦‚æœä½ å·²ç»åœ¨å¤§é‡çš„é˜…è¯»å’Œå­¦ä¹ äº†ï¼Œé‚£ä¹ˆå’Œå…¶ä»–äººåˆ†äº«ä¸‹ä½ çš„å¿ƒå¾—ã€‚è¿™ä¼šå¸®åŠ©ä½ æ›´åŠ æ·±åˆ»çš„ç†è§£ä½ å­¦åˆ°çš„ä¸œè¥¿ã€‚å»ºè®®è®¾ç½®æœˆåº¦æˆ–è€…å­£åº¦å­¦ä¹ ç›®æ ‡ã€‚\n\n> å­¦ä¹ çš„æœ€é«˜å½¢å¼ä¾¿æ˜¯ä¼ æˆï¼›ä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œï¼Œè¦æƒ³é€šè¿‡ 7 å¤©å­¦ä¼š XXXï¼Œ21 å¤©å­¦ä¼š XXX çš„è¿™ç±»çˆ†æ¬¾æ— å¼‚äºç—´äººè¯´æ¢¦ï¼Œè¿™äº›é¸¡æ±¤å¾€å¾€åªèƒ½æ•™ä¼šä½ æœ€åŸºç¡€çš„ hello, world. åˆç†çš„è®¾å®šå­¦ä¹ è®¡åˆ’ä¸ç›®æ ‡æŒ‰éƒ¨å°±ç­çš„å­¦ä¹ ä¸ä»…èƒ½ç¼“å’Œå­¦ä¹ å‹åŠ›è€Œä¸”èƒ½æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚\n\n### ç”¨å¿ƒæ²Ÿé€š\n\n**ä½ åœ¨å›¢é˜Ÿä¸­çš„å½±å“åŠ›æ˜¯éå¸¸é‡è¦çš„**\n\nå°½æ—©æ²Ÿé€šï¼Œç»å¸¸äº¤æµã€‚ æ—©æœŸï¼Œæˆ‘éå¸¸å®³ç¾å¹¶ä¸”ç»å¸¸ç‹¬è‡ªä¸€äººè§£å†³æ‰€æœ‰é—®é¢˜ã€‚å¦‚æœæˆ‘æ¬ ç€æŸäººä¸€äº›å·¥ä½œï¼Œæˆ‘ä¼šå°è¯•æŠŠæ‰€æœ‰ä»»åŠ¡éƒ½åšå®Œäº†å†è½¬äº¤ç»™ä¸‹ä¸€ä¸ªäººã€‚å¦‚æœæˆ‘é‡åˆ°å›°éš¾äº†ï¼Œæˆ‘è¦ä¹ˆä¼šå°æ¿€åŠ¨è¦ä¹ˆæ‹–å»¶ä¸€é˜µç›´åˆ°æˆ‘æ²¡æ—¶é—´äº†ï¼Œç„¶åä¼šæ…Œå¼ çš„åšå®Œå·¥ä½œã€‚å±•ç¤ºä½ çš„å·¥ä½œï¼Œåˆ†äº«ä½ çš„è‰å›¾å’Œè‰ç¨¿ï¼Œä½ éœ€è¦å’Œä½ çš„å›¢é˜Ÿå»ºç«‹èæ´½çš„å…³ç³»å’Œä¿¡ä»»ï¼Œå¦‚æ­¤ä½ æ‰ä¼šæ„Ÿåˆ°èˆ’é€‚çš„å»æ²Ÿé€šåˆ†äº«ã€‚æ—©æœŸçš„åé¦ˆå¯¹æ¯”æ™šæœŸçš„åé¦ˆæ›´åŠ æœ‰ç”¨å¹¶ä¸”æ›´å…·æœ‰é«˜æ‰§è¡Œåº¦ã€‚æœ‰æ—¶å€™åªéœ€è¦ç®€å•çš„é—®åŒäº‹å‡ ä¸ªé—®é¢˜æˆ–è€…äº¤æµä¸‹çœ‹æ³•å°±ä¼šå¾—åˆ°ä¸€ä¸ªæ„æƒ³ä¸åˆ°çš„è§£å†³ä½ é—®é¢˜çš„æ–¹æ³•ã€‚\n\nææœ‰æ•ˆçš„é—®é¢˜ã€‚ åœ¨ä½ å°šæœªæ„è¯†åˆ°çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰äº‹éƒ½ä¸€å®šç¨‹åº¦ä¸Šæ˜¯æ¨¡ç³Šçš„ã€‚ç”±æ­¤å°è¯•æŠŠäº‹æƒ…ç»™ç²¾ç¡®åŒ–ã€‚å¯¹æœŸæœ›çš„ç»“æœéå¸¸æ˜ç¡®æ˜¯éå¸¸é‡è¦çš„ã€‚äººä»¬é€šå¸¸å¯¹ä¸€ä¸ªåœºæ™¯æœ‰ä¸åŒçš„æœŸå¾…ï¼Œä¸åŒçš„ç†è§£ â€“ è¿™äº›éƒ½æ˜¯æ‘©æ“¦å’ŒæŒ«æŠ˜çš„æ¥æºã€‚æ‰€ä»¥ï¼Œè¿™éå¸¸å€¼å¾—èŠ±è´¹ä¸€å®šçš„æ—¶é—´å’Œç²¾åŠ›ç¡®ä¿æ¯ä¸ªäººéƒ½å¯¹ä½ åšçš„äº‹æƒ…ä¿æŒä¸€è‡´çš„ç†è§£ã€‚\n\nä¸‰äººè¡Œå¿…æœ‰æˆ‘å¸ˆç„‰ã€‚ çœŸå®çš„ç”Ÿæ´»å¹¶ä¸æ˜¯ä¸€æœ¬ä¹¦ï¼Œä½ åªéœ€è¦ç‹¬è‡ªä¸€äººé˜…è¯»ç†è§£å°±è¡Œäº†ã€‚æœ‰éœ€è¦å°±å¯»æ±‚å¸®åŠ©ï¼Œè¿™ä¹Ÿè®¸åœ¨ä¸åŒçš„å…¬å¸æ–‡åŒ–å’ŒåŒäº‹ä¸ªæ€§ç¨æœ‰ä¸åŒã€‚æœ‰äº›äººä¹Ÿå»ä¼šå¼ºè¡Œæ‰“æ‰°ä»–äººï¼Œä½†æˆ‘èƒ½è§‰å¯Ÿåˆ°é‚£äº›èªæ˜ï¼Œæœ‰ä¿®å…»çš„äººèƒ½å°å¿ƒé¿å…æ‰“æ‰°åˆ°ä»–äººçš„æƒ…å†µä¸‹å¯»æ±‚å¸®åŠ©ã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ å¯»æ±‚å¸®åŠ©çš„æ—¶å€™ï¼Œè¦ç®€æ´æ˜ç¤¼è²Œçš„æå‡ºã€å°å¼ºï¼Œå½“ä½ æœ‰ç©ºçš„æ—¶å€™æ¥å¸®åŠ©æˆ‘ä¸‹ï¼Œæˆ‘éœ€è¦æ—è§‚è€…æ¥çœ‹çœ‹æˆ‘çš„ PPT æ˜¯å¦æœ‰ä»»ä½•å€¼å¾—æå‡çš„åœ°æ–¹ã€ã€‚ä¸è¦å¼ºè¡Œæ‰“æ–­åˆ«äººçš„å·¥ä½œï¼Œé‚£æ˜¯ä¸ç¤¼è²Œçš„ã€‚å½“ä½ æœ‰ç¤¼è²Œçš„æå‡ºæ˜ç¡®çš„å¸®åŠ©éœ€æ±‚çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™äººä»¬ä¼šä¸åœ¨æ„åˆ†å¿ƒæ¥å¸®åŠ©ä½ ã€‚\n\nå¿ƒæ€è¦ç§¯æå‘ä¸Šã€‚ è¿™ä¸ä»…å¯¹è‡ªå·±ï¼Œå¯¹æ•´ä¸ªå·¥ä½œæ°›å›´éƒ½éå¸¸æœ‰å¸®åŠ©ï¼\n\n### å°è¯•äº¤é™…\n\n**å…¬å¸å’Œç»„ç»‡éƒ½æ˜¯ç”±äººæ„æˆçš„ï¼Œå°è¯•ä¸ä»–äººå»ºç«‹å…³ç³»**\n\nåä½œå·¥ä½œã€‚ æœ‰æ—¶å€™éå¸¸å®¹æ˜“é™·å…¥ä¸€ä¸ªå›°å¢ƒï¼šä½ è§‰å¾—è‡ªå·±éœ€è¦å¤„ç†æ‰€æœ‰æ‘†åœ¨ä½ é¢å‰çš„é—®é¢˜ã€‚æ€»ä¼šæœ‰åšä¸å®Œçš„å·¥ä½œï¼Œä½ éœ€è¦æ—¢èƒ½ç»¼è§‚å¤§å±€åˆèƒ½ä¸“æ³¨ç»†èŠ‚ã€‚å»è®¤è¯†ä¸€äº›åšå’Œä½ å·¥ä½œæ€§è´¨å·®ä¸å¤šçš„äººï¼Œè¿™ä¼šå¯¹ä½ çš„å·¥ä½œéå¸¸æœ‰å¸®åŠ©ã€‚äººä»¬çŸ¥é“ä¸€äº›ä¸œè¥¿ï¼Œä»–ä»¬ä¹Ÿè®¸ä¸ä¼šå†™åœ¨åšå®¢é‡Œä½†ä»–ä»¬ä¼šæ„¿æ„å½“é¢æ•™æˆä½ è¿™äº›ä¸œè¥¿ï¼Œå¹¶ä¸”è¿™äº›ä¸œè¥¿å¯èƒ½ä¼šå¯¹ä½ éå¸¸æœ‰ç”¨ã€‚äººä»¬å¯ä»¥å¸®ä½ å¼€é—¨ï¼Œå¯ä»¥å¸®ä½ é¢„å…ˆæŠŠä¸œè¥¿å¤„ç†å¥½ã€‚æœ‰æ—¶å€™ä½ èŠ±è´¹äº†å¤§é‡æ—¶é—´éƒ½æœªè§£å†³çš„é—®é¢˜ï¼Œæ­£å¥½æœ‰äººçš„è„‘è¢‹é‡Œæ—©æœ‰è§£å†³æ–¹æ³•ï¼Œä½ ä¹Ÿè®¸åªéœ€è¦è¯·ä»–ä»¬ä¸€æ¯å’–å•¡å°±å¯ä»¥å¯»æ±‚å¸®åŠ©äº†ã€‚\n\næ‹›äººå†…æ¨ã€‚ å³ä½¿ä½ ä¸è´Ÿè´£æ‹›è˜å·¥ä½œï¼Œåˆ—å‡ºä¸€å †ä½ æƒ³è¦å…±åŒå·¥ä½œçš„äººæˆ–è€…æƒ³è¦å­¦ä¹ çš„æ¦œæ ·ç»™ç›¸å…³è´Ÿè´£äººä¹Ÿæ˜¯æœ‰å¸®åŠ©çš„ã€‚\n\nå°è¯•æ¼”è®²ã€‚ ä¸ä»–äººäº¤æµä½ çŸ¥é“çš„å†…å®¹æ˜¯ä¸€é¡¹éå¸¸å¼ºå¤§çš„æŠ€èƒ½ã€‚è¿™ä¼šä½¿ä½ æ›´åŠ ä¸“ä¸šï¼Œä¹Ÿä¼šè®©ä½ åœ¨å·¥ä½œæ—¶æ›´åŠ è½»æ¾ï¼Œå› ä¸ºé€šè¿‡æ•™æˆé¢„åˆ†äº«èƒ½è®©ä½ åœ¨ä½ çš„é¢†åŸŸå†…æ›´åŠ è‡ªä¿¡ã€‚\n\n### å…¶å®ƒæ€è€ƒ\n\nç”„åˆ«æŸç¼šä½ çš„å¤–å› ã€‚ æ˜¯é’±å—ï¼Ÿæ˜¯å¿µå¤´å—ï¼Ÿæ˜¯æ‰§è¡ŒåŠ›å—ï¼Ÿæ˜¯æ—¶é—´å—ï¼Ÿæ˜¯ä»€ä¹ˆé˜»ç¢äº†ä½ å®Œæˆ 2 å€ï¼Œ4 å€ç”šè‡³ 10 å€äºæŒ¡å¢™ä½ çš„æˆå°±ï¼Ÿ\n\nç™½æ—¥æ¢¦æœ‰æ—¶å€™è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ å¦‚æœä½ æœ‰æ›´å¤šçš„èµ„æºå¯ä»¥ç”¨ï¼Ÿå¦‚æœä½ æ¯å‘¨æœ‰é¢å¤– 500 å—é’±ä½ è¦åšä»€ä¹ˆï¼Ÿé‚£ä¹ˆ 1000 å—ï¼Œ2000 å—ï¼Œ5000 å—å–ƒï¼Ÿå¦‚æœä½ ä»å¤´å†æ¥ï¼Œä½ ä¼šåšä»€ä¹ˆä¸ä¸€æ ·çš„äº‹å„¿å—ï¼Ÿå¦‚æœä½ åªç”¨å·¥ä½œå½“å‰æ—¶é—´çš„ä¸€åŠï¼Ÿå¦‚æœä½ åšäº†ä½ å½“å‰ç›®æ ‡å®Œå…¨ç›¸åçš„ç»“æœä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\n\næ¢ä½æ€è€ƒã€‚ å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå¸‚åœºè¥é”€å°±æ˜¯å…³äºæ¢ä½æ€è€ƒã€‚ä¸ºä»€ä¹ˆäººä»¬è¦ç”¨ä½ çš„äº§å“è€Œä¸æ˜¯å…¶å®ƒçš„ï¼Ÿä¸ºä»€ä¹ˆäººä»¬å…³ç³»ä¸€äº›ç‰¹å®šçš„å†…å®¹æ•°æ®ï¼Ÿä¸ºä»€ä¹ˆåˆ«äººè¦é›‡ä½£ä½ ï¼Ÿä½ æœ‰ä»€ä¹ˆä»·å€¼ï¼Œç‰¹ç‚¹å€¼å¾—åˆ«äººæ³¨æ„ï¼Ÿ\n\näº†è§£è¡Œä¸šå·¥ä½œå¸‚åœºã€‚ æˆ‘å°½é‡é¿å…è¿™ä¸ªå¾ˆä¹…äº†ï¼Œå› ä¸ºæˆ‘å–œæ¬¢æˆ‘ç°åœ¨å·¥ä½œçš„åœ°æ–¹ï¼Œè€Œä¸”å“ªæ€•æœ‰æµè§ˆå…¶ä»–å·¥ä½œèŒä½ä¿¡æ¯çš„å¿µå¤´éƒ½æ„Ÿè§‰å¯æ€•ã€‚ä½†äº†è§£å®æ—¶è¡Œä¸šåŠ¨æ€åŠæ‹›äººä¿¡æ¯æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ä½ å¯ä»¥ç”±æ­¤è§„åˆ’ä½ çš„èŒä¸šç”Ÿæ¶¯ï¼Œçœ‹çœ‹å¯¹åº”çš„èŒä½éƒ½éœ€è¦ä»€ä¹ˆæ¡ä»¶ï¼Œè‡ªé—®è‡ªå·±è¿˜å·®ä»€ä¹ˆï¼Œç„¶åå¼¥è¡¥è¿™äº›ä¸è¶³ã€‚è€Œä¸”è¿™äº›è¡Œä¸šä¿¡æ¯ä¹Ÿèƒ½å¤Ÿæä¾›å¯¹ä½ çš„èŒä½æ™‹å‡åŠåŠ è–ªçš„æœ‰æ•ˆä¿¡æ¯ã€‚\n\nä¸»äººç¿æ„è¯†ã€‚ è®©ä½ çš„è€æ¿æ›´åŠ ä¿¡ä»»ä½ ï¼Œå¯¹ä½ çš„å»ºè®®æ›´å®¹æ˜“è¯´åŒæ„ã€‚æ¯ä¸ªè€æ¿éƒ½å–œæ¬¢é›‡ä½£èƒ½ç›´æ¥æŠŠæ´»ç»™å¹²å®Œçš„å‘˜å·¥ï¼Œè€Œä¸”è¿‡ç¨‹ä¸å¯»æ±‚ä»»ä½•å»ºè®®ä¸ç®¡ç†ã€‚å½“ä½ å³äº†è§£ä½ çš„é¦–è¦ä»»åŠ¡ä¸ç›®æ ‡æ—¶ï¼Œæ‰§è¡Œè®¡åˆ’å¹¶å®Œæˆã€‚ä½ çš„è€æ¿æ˜¯é›‡ä½£ä½ æ¥å®Œæˆå·¥ä½œçš„ï¼Œä»–å¹¶ä¸æƒ³å’Œä½ ä¸€èµ·åšå‡ºæ¯ä¸€ä¸ªå†³å®šã€‚ï¼ˆå½“ç„¶ä¸€ä¸ªå¥½è€æ¿ä¼šåœ¨æœ€åˆæ•™ä½ ä¸€äº›è®¡åˆ’ä¸èŒè´£å†…å®¹ï¼‰ã€‚å°è¯•æ›¿è€æ¿æ€è€ƒï¼Œåšå‡ºè®¡åˆ’ï¼Œå¹¶ä¸”åªéœ€è¦è®©è€æ¿åšå‡ºåŒæ„æˆ–è€…å¦å†³çš„å†³å®šã€‚\n\nç…§é¡¾å¥½è‡ªå·±èº«å¿ƒå¥åº·ã€‚ ä½ çš„å·¥ä½œä¼šå æ®ä½ çš„å¤§éƒ¨åˆ†ç”Ÿæ´»ï¼Œæ‰€ä»¥å°è¯•åšå¥½å®ƒï¼Œä¸¥è‚ƒå¯¹å¾…å®ƒï¼Œäº«å—å…¶è¿‡ç¨‹ï¼Œå¹¶ä¸æ–­æŒ‘æˆ˜è‡ªæˆ‘ã€‚ä½†æ˜¯å¦‚æœä½ å‘ç°ä½ ç²¾åŠ›è€—å°½ï¼Œèº«å¿ƒç–²æƒ«ï¼Œè¿™æ—¶å€™ä¸è¦å†è‡ªå·±å‚¬çœ å¼ºæ’‘ä¸‹å»äº†ã€‚æ¯•ç«Ÿï¼Œä½ æ‰æ˜¯ä½ ç”Ÿæ´»ä¸­æœ€é‡è¦çš„äººï¼Œç…§é¡¾å¥½ä½ è‡ªå·±ã€‚\n\n<div class=\"tip\">\næœ¬æ–‡è½¬è½½è‡ª: [MOYU](https://moyu.io/2017/10/advices-from-my-supervisor/)ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚\n</div>\n","source":"_posts/æˆ‘çš„ä¸»ç®¡ç»™æˆ‘çš„ä¸€äº›å»ºè®®.md","raw":"---\ntitle: æˆ‘çš„ä¸»ç®¡ç»™æˆ‘çš„ä¸€äº›å»ºè®®\ncomments: true\ndate: 2018-06-21 07:43:58\ntags:\nfrom:\n---\n\næœ¬æ–‡ç¿»è¯‘è‡ª [Reddit](https://www.reddit.com/r/startups/comments/74pms1/my_manager_who_i_loved_recently_left_my_company_i/) ä¸Šçš„ä¸€ç¯‡æ–‡ç« ã€‚å…¶ä¸»è¦å†…å®¹ä¸ºä¸€åèŒå·¥è®°å½•äº†ä»–ä¸å…¶å·²ç¦»èŒçš„ä¸»ç®¡çš„ä¸€å¯¹ä¸€äº¤æµã€‚å…¶ä¸­æ€»ç»“äº†å¤§é‡å…³äºèŒä¸šç”Ÿæ¶¯ï¼Œå·¥ä½œå†…å®¹ï¼Œäººé™…å…³ç³»ï¼Œè‡ªæˆ‘æˆé•¿çš„å»ºè®®ã€‚\n\n<!-- more -->\n\n### é¦–è¦ä»»åŠ¡\n\n**ç¡®å®šå¹¶ä¸“æ³¨äºä½ çš„é¦–è¦ä»»åŠ¡ â€“ å¦‚æœä¸ï¼Œé‚£ä¹ˆä½ æ•´å¤©åœ¨å¹²ä»€ä¹ˆï¼Ÿ**\n\nä¼˜å…ˆä»»åŠ¡çœŸçš„æ˜¯æœ€é¦–è¦ä»»åŠ¡çš„å—ï¼Ÿ å½“å‰ä½ éœ€è¦åšå¾—æœ€ä¸ºé‡è¦çš„äº‹æ˜¯ä»€ä¹ˆï¼Ÿå¦‚æœä½ ä¸èƒ½å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆä½ å°±åº”è¯¥åœä¸‹æ‰‹å¤´çš„æ‰€æœ‰å·¥ä½œç„¶åå…ˆå¼„æ¸…æ¥šä½ çš„ç­”æ¡ˆã€‚æœ‰æ˜ç¡®çš„ç­”æ¡ˆèƒ½è®©ä½ æ›´åŠ æ˜ç¡®ç›®æ ‡ä¸ä¸“æ³¨ã€‚æ²¡æœ‰æ˜ç¡®çš„ç­”æ¡ˆå¾€å¾€ä¼šå¯¼è‡´ä½ ç»å¸¸åœ¨åšä¸€äº›å¹¶ä¸é‡è¦çš„äº‹å¹¶ä¸”æµªè´¹å¤§é‡å®è´µçš„æ—¶é—´ã€‚\n\næ¯å¤©æ€»ä¼šæœ‰æºæºä¸æ–­éœ€è¦åšçš„äº‹å„¿ã€‚äººä»¬å¸¸ä¼šå€¾å‘äºå…ˆåšç®€å•ã€æœ‰è¶£æˆ–ç†Ÿæ‚‰çš„ä»»åŠ¡ã€‚ä½†é•¿è¿œæ¥çœ‹è¿™æ˜¯ä¸€ä¸ªé™·é˜±ã€‚å®Œæˆé¦–è¦ä»»åŠ¡ 5%-10% çš„å·¥ä½œé‡æ¯”åšå¤§é‡å¯¹ç›®æ ‡æ— ç›Šçš„ä»»åŠ¡æ›´å¥½ã€‚\n\n> å¾€å¾€è‡ªå·±è®¤ä¸ºåº”è¯¥ä¼˜å…ˆåšçš„å·¥ä½œå…¶å®å¹¶ä¸æ˜¯å½“å‰ç›®æ ‡çš„é¦–è¦ä»»åŠ¡\n\nä½ è´Ÿè´£ä»€ä¹ˆï¼Ÿ ä¼ä¸šä¸­çš„æ¯ä¸ªäººéƒ½åº”è¯¥è´Ÿè´£ä¸€å®šçš„å·¥ä½œã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œå®ƒåº”è¯¥æ˜¯ä¸ä½ çš„é¦–è¦ç›®æ ‡ç›¸å…³çš„åº¦é‡æŒ‡æ ‡ã€‚å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆä½ å°±åº”è¯¥å’Œä½ çš„ä¸»ç®¡æˆ–è€…è€æ¿å¥½å¥½è°ˆä¸€è°ˆæ¥ç¡®å®šä½ çš„é¦–è¦ä»»åŠ¡ã€‚å½“ä½ ç¡®ç«‹å¥½ä½ çš„é¦–è¦ä»»åŠ¡åï¼Œä½ è¿˜ä¼šä¿è¯ä½ å·²äº†è§£äº†è¶³å¤Ÿçš„ä¿¡æ¯æ¥æå‡è¿™ä¸ªæŒ‡æ ‡ã€‚\n\næŒæ§å¥½ä½ çš„è´Ÿè´£èŒƒå›´ã€‚ ä¸€èˆ¬äººä»¬éƒ½ä¼šæƒ³å–„äºå®Œæˆä»–ä»¬çš„å·¥ä½œã€‚å¬èµ·æ¥å¾ˆæ˜æ˜¾ï¼Œä½†æœ‰æ—¶å€™ç¯å¢ƒä¼šè¯±æƒ‘ä½ å»åšä¸€äº›æ— å…³ç´§è¦çš„äº‹æƒ…ã€‚è¿™æ—¶å€™å°±å€¼å¾—æ³¨æ„äº†ï¼Œè¿”å›å»çœ‹ç¬¬ä¸€æ¡ â€“ ä¿æŒé¦–è¦ä»»åŠ¡çš„ä¼˜å…ˆã€‚\n\nç²¾ç¡®ä½ çš„ç›®æ ‡ã€‚ å¦‚æœç›®æ ‡æœ‰ç‚¹æ¨¡ç³Šï¼Œç©ºå‡ºä¸€ç‚¹æ—¶é—´æ¥ç¡®ç«‹å®ƒçš„ç²¾ç¡®æ€§ã€‚ä¸è¦å»åšè¾ƒä¸ºæ¨¡ç³Šçš„å·¥ä½œ â€“ å®ƒä»¬å¸¸å¸¸ä¼šä»¤äººåˆ†å¿ƒå’Œåšä¸€äº›è¶…å‡ºç›®æ ‡èŒƒå›´çš„äº‹ã€‚è¦å­¦ä¼šé‰´åˆ«è‡ªå·±æ€è€ƒï¼Œæ–‡å­—ï¼ŒåŠäº¤æµä¸­çš„æ¨¡ç³Šåœ°å¸¦ï¼Œç„¶åæŠŠè¿™äº›æ¨¡ç³Šéƒ½æ¶ˆé™¤æ‰ï¼Œä½¿ä¹‹æ¸…æ™°æ˜äº†ã€‚\n\n### é«˜æ•ˆç®¡ç†\n\n**æŠŠè‡ªå·±å½“åšå®è´µä¸”é‡è¦çš„èµ„æºä¸€æ ·ç®¡ç†**\n\nä¸è¦ä¸æ‡‚è£…æ‡‚ã€‚ å¯¹è‡ªå·±è¦å¦è¯šç›¸å¾…ï¼Œå¯¹è‡ªå·±æœ‰æ¸…æ™°çš„è‡ªæˆ‘è®¤è¯†èƒ½è®©ä½ æ›´å¿«çš„å­¦ä¹ å’Œæå‡ã€‚å¦‚æœä½ æŠ±ç€å¦è¯šçš„å¿ƒæ€ä¸ä»–äººäº¤æµï¼Œåˆ«äººä¹Ÿä¼šå¦è¯šå¯¹å¾…ä½ ï¼Œç”±æ­¤ä¸€ä¸ªèˆ’é€‚å¥åº·çš„äº¤æµç¯å¢ƒå°±å»ºç«‹èµ·æ¥äº†ï¼Œå¹¶ä¸”ä¸æ–­çš„å½±å“ç€å‘¨å›´çš„äººã€‚\n\nåˆ¶å®šè®¡åˆ’å¹¶æ‰§è¡Œã€‚ æˆ‘å°æ—¶å€™éå¸¸è®¨åŒæ—¥å†å’Œæ—¶é—´è¡¨ï¼Œå¹¶ä¸”èŠ±è´¹äº†å¤§é‡æ—¶é—´åº”ä»˜å„ç§æˆªè‡³æ—¥æœŸçš„æ½œåœ¨å‹åŠ›ã€‚ä½†äº‹å®æ˜¯ï¼šæ— è®ºè®¨åŒè¿˜æ˜¯å–œæ¬¢è®¡åˆ’ï¼Œæˆ‘ä»¬åªæœ‰æœ‰é™çš„æ—¶é—´å’Œæ— å°½çš„ä»»åŠ¡éœ€è¦åšï¼Œè¿™äº›éƒ½ä¸ä¼šéšç€æˆ‘ä»¬çš„ä¸»è§‚æ„è¯†è€Œæ”¹å˜ã€‚æ²¡æœ‰è‰¯å¥½çš„è®¡åˆ’ï¼Œæˆ‘ä»¬æœ€ç»ˆä¼šæ— ä¼‘æ­¢çš„å·¥ä½œã€‚å¦‚æœä½ ä¸ä¸»åŠ¨æå‰å†³å®šä½ åº”è¯¥æ€ä¹ˆèŠ±è´¹ä½ å¾—æ—¶é—´å’Œç²¾åŠ›ï¼Œé‚£ä¹ˆä¼šæœ‰å…¶ä»–çš„äº‹æƒ…ä¼šå¸®ä½ åšå†³å®š â€“ è¢«åˆ«äººæ‰“æ–­æˆ–è€…ä¸€äº›æ— å…³ç´§è¦çš„ä»»åŠ¡ï¼ˆå®ƒä»¬éƒ½ä¼šè®©ä½ ä¸ç”±è‡ªä¸»çš„èŠ±æ—¶é—´å»å¤„ç†ï¼‰ã€‚\n\nç»è¿‡å¤šå¹´çš„åæ€å’Œæ‘‡æ‘†ï¼Œæˆ‘é€æ¸æ„è¯†åˆ°æˆ‘çš„é—®é¢˜å¹¶éæ˜¯æŒ‡å®šè®¡åˆ’ï¼Œè€Œä¸”è¢«åŠ¨çš„å»åšä¸€äº›æˆ‘ä¸æƒ³åšçš„äº‹å„¿ã€‚æˆ‘åªæ˜¯æ½œæ„è¯†çš„å¯¹æ—¥å†ï¼Œè®¡åˆ’æœ‰ç€åæŠ—æ€åº¦ã€‚å¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œè¿™éœ€è¦èŠ±è´¹å¤§é‡ç²¾åŠ›å»æ¶ˆé™¤è¿™äº›å½±å“ã€‚å¼€å§‹åˆ¶å®šä¸€äº›ç®€å•çš„è®¡åˆ’ç„¶åå®Œæˆã€‚å†™ä¸‹ä¸€äº›ä½ èƒ½ 5 åˆ†é’Ÿå†…å®Œæˆçš„äº‹ï¼Œç„¶åæ‰§è¡Œï¼Œå®Œæˆã€‚åå¤å¦‚æ­¤è®¡åˆ’æ‰§è¡Œï¼Œè®¡åˆ’æ‰§è¡Œï¼Œç›´åˆ°ä½ åšçš„è¶Šæ¥è¶Šå¥½ï¼Œç„¶åé€æ¸åŠ å¤šæ—¶é—´ã€‚å†°å†»ä¸‰å°ºéä¸€æ—¥ä¹‹å¯’ï¼Œé€šè¿‡ä¸æ–­ç»ƒä¹ åŠåŠ å¤§ä»»åŠ¡é‡åŠæ—¶é—´ï¼Œä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œå°±åƒç©æ¸¸æˆä¸€æ ·ã€‚å½“ä½ å¼€å§‹ä¹ æƒ¯è¿™æ ·çš„å¾ªåºæ¸è¿›æ–¹å¼æ—¶ï¼Œä¼šå˜å¾—è¶Šæ¥è¶Šæœ‰è¶£å’Œä»¤äººæ¿€åŠ¨ã€‚ä½ å°†ä¼šè¶Šæ¥è¶Šäº†è§£ä½ è‡ªå·±åŠä½ å‘¨å›´çš„ä¸–ç•Œã€‚\n\nåŠ³é€¸ç»“åˆã€‚ ä½ æ˜¯ä¸€é¡¹å®è´µçš„èµ„æºï¼Œå¹¶ä¸”éœ€è¦ä¼‘æ•´ã€‚ä¸è¦å¿«é€Ÿè€—å°½ç²¾åŠ›ï¼Œè¦å­¦ä¼šç»†æ°´é•¿æµï¼Œå½“åšé©¬æ‹‰æ¾æ¥çœ‹ã€‚ä½†æˆ‘å¼€å§‹å·¥ä½œæ—¶ï¼Œæˆ‘æ„Ÿè§‰æˆ‘è·å¾—äº†ä¸€ä¸ªéš¾å¾—å¯è´µçš„æœºä¼šã€è§‰çš„è‡ªå·±è¿˜ä¸å¤Ÿæ ¼ã€é¡¶ç€å‹åŠ›ã€å¸¸å¸¸åŸ‹å¤´è‹¦å¹²ã€ä½†è¿˜æ„Ÿåˆ°è‡ªå·±è½åäºå·¥ä½œï¼Œç„¶åæˆ‘å¼€å§‹æ‹–å»¶å’Œå»¶æœŸç›´åˆ°æˆ‘ä¼‘äº†ä¸ªå‡ã€‚ç°åœ¨å›è¿‡å¤´æ¥çœ‹ï¼Œè¿™çœŸæ˜¯ä¸ªæ»‘ç¨½çš„è¡Œä¸ºï¼Œè€Œä¸”æˆ‘éå¸¸åæ‚”ã€‚å¦‚æœå½“åˆæˆ‘æŠ—ä½å‹åŠ›å’Œæå‰å®‰æ’å¥½æ—¶é—´ï¼Œæˆ‘ä¼šæ›´åŠ å¼€å¿ƒï¼Œå¥åº·ï¼Œå®Œæˆæ›´å¤šå¾—å·¥ä½œã€‚\n\nå¾æ—¥ä¸‰çœå¾èº«ã€‚ åˆ†æè¿‡å»çš„å·¥ä½œï¼Œå“ªäº›å®Œæˆäº†ï¼Œå“ªäº›æ²¡æœ‰ï¼Œå“ªäº›æœ€ç»ˆæ•ˆæœä¸é”™ï¼Œå“ªäº›å¤±è´¥â€¦â€¦ ä½ åº”è¯¥å®šæœŸç‹¬ç«‹è¿™æ ·å›é¡¾åˆ†æå·¥ä½œã€‚æˆ‘ç»å¸¸å·æ‡’è®°ç¬”è®°ï¼Œå³ä½¿è®°äº†ä¹ŸåŸºæœ¬ä¸ä¼šå›å¤´å†çœ‹ã€‚å¦‚æœæˆ‘èƒ½é‡æ–°æ¥è¿‡ï¼Œæˆ‘ä¼šæ›´åŠ ç³»ç»Ÿçš„ä¸¥äºåˆ©å·±çš„å¯¹å¾…æ­¤äº‹ã€‚\n\n> é€šè¿‡å®šæœŸå¤ç›˜èƒ½å¤Ÿä¸æ–­å¼ºåŒ–è‡ªå·±å¯¹ä¸€ä¸ªé¡¹ç›®çš„ç†è§£ï¼Œå¦‚æœé¡¹ç›®è¶Šæ»šè¶Šå¤§ï¼Œè¿˜æ˜¯ä¼šå¯¹é¡¹ç›®çš„æŒæ§æ¸¸åˆƒæœ‰ä½™ã€‚å®šæœŸçš„å¤ç›˜è¿˜èƒ½èµ·åˆ°æ‰¾å‡ºå¼±é¡¹ï¼Œå¼¥è¡¥ä¸è¶³ï¼Œå¸å–ç»éªŒï¼Œè®©è‡ªå·±ä¹‹åèƒ½å¤Ÿæ›´ä¼˜å¼‚çš„å®Œæˆä»»åŠ¡ã€‚å¾ˆå¤šå®è´µçš„ç»éªŒï¼Œç»å†äº†ä¸€æ¬¡å°±å®Œäº†çš„äººç®—ä½œæ™®é€šäººï¼›ç»å†äº†ä¸€æ¬¡å¹¶å¸å–ç»éªŒåœ¨ä»¥åé‡åˆ°åŒæ ·é—®é¢˜èƒ½å¤Ÿé€šè¿‡ç»éªŒè§£å†³çš„äººç®—ä½œä¼˜ç§€çš„äººï¼›ç»å†äº†ä¸€æ¬¡ä¸ä»…å¸å–äº†ç»éªŒï¼Œè¿˜èƒ½åšåˆ°å¤ç›˜ä¸¾ä¸€åä¸‰çš„èƒ½ç§°ä¹‹ä¸ºéå¸¸æœ‰å‰æ™¯çš„äººæ‰äº†\n\nè¡¨è¿°ä½ çš„è¿›åº¦ã€‚ è¿™åœ¨å¤šä¸ªå±‚é¢ä¸Šå‡éå¸¸æœ‰å¸®åŠ©ã€‚é¦–å…ˆï¼Œåªéœ€è¦ç»™é«˜å¼ºåº¦å·¥ä½œçš„å¤§è„‘è…¾ç‚¹ä¼‘æ¯æ—¶é—´ï¼ŒæŠŠå·¥ä½œè¿›åº¦æ‰‹å†™åœ¨çº¸ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ä¹ æƒ¯ã€‚è¿™ä¼šå¼ºè¿«ä½ æŠŠæƒ³è¦è¡¨è¾¾çš„ä¸œè¥¿è¡¨è¿°å‡ºæ¥ã€‚ä½ æƒ³è¦è¾¾æˆä»€ä¹ˆç›®æ ‡ï¼Ÿä½ æ˜¯å¦‚æœåšå‡ºå†³ç­–çš„ï¼Ÿå½“ä½ åœ¨ç”¨æ–‡å­—è¡¨è¿°ä½ çš„è¿›åº¦çš„æ—¶å€™ï¼Œä½ è¿˜èƒ½é¡ºå¸¦åˆ†æä¸‹ã€‚ä½ èƒ½æ‰¾å‡ºå¼±é¡¹å¹¶å¼ºåŒ–å®ƒä»¬ã€‚è¿™å°±åƒæ˜¯åœ¨çœ‹è‡ªå·±çš„å›æ”¾ä¸€æ ·ï¼Œèƒ½å¤Ÿæ³¨æ„åˆ°æ›´å¤šçš„ç»†èŠ‚ã€‚å½“ç„¶ï¼Œä½ è¿˜èƒ½ä¸ä»–äººåˆ†äº«ä½ çš„è¡¨è¿°ï¼Œå¹¶æ”¶åˆ°åé¦ˆï¼Œè¿™åˆæ˜¯æ›´è¿›ä¸€æ­¥çš„æå‡äº†ã€‚\n\n> é€šè¿‡å…·ä½“çš„è¯­è¨€æˆ–è€…æ–‡å­—è¡¨è¿°è‡ªå·±å·¥ä½œçš„è¿›åº¦ï¼Œå¯ä»¥æŠŠå¤§è„‘é‡ŒæŠ½è±¡çš„æ€è€ƒå…·ä½“åŒ–ï¼Œå¹¶ç”±æ­¤è§‚å¯Ÿç»†èŠ‚æ‰¾å‡ºé—®é¢˜æˆ–è€…å¼±ç‚¹å¹¶å¼ºåŒ–ã€‚é€šè¿‡å…·ä½“çš„è¡¨è¿°èƒ½å¤Ÿå¢å¼ºé€»è¾‘èƒ½åŠ›ï¼Œé”»ç‚¼è¡¨è¾¾èƒ½åŠ›ä¸æ›´æ¸…æ™°çš„è®¤è¯†è‡ªå·±åšçš„äº‹å„¿ã€‚\n\nä¸ºè‡ªå·±è´Ÿè´£ã€‚ å³ä½¿ä½ æœ‰éå¸¸ä¼˜ç§€çš„ä¸»ç®¡ï¼Œä½†æ˜¯ä½ æœ€ç»ˆä¼šä¸ºè‡ªå·±çš„å­¦ä¹ ã€æ‰§è¡Œå’Œæˆé•¿è¿›è¡Œè´Ÿè´£ã€‚å›é¡¾ä»¥å‰ï¼Œæˆ‘è§‰å¾—æˆ‘è‡ªå·±èŠ±è´¹äº†ç¬¬ä¸€ä¸ª 3-4 å¹´åœ¨èˆ’é€‚åŒºï¼Œä»ä¸ä¸»åŠ¨å‡ºå‡»ã€‚æˆ‘çš„ç¡®æœ‰ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„ä¸»ç®¡ï¼Œç»™æˆ‘äº†å¤§é‡çš„ç›®æ ‡ã€å»ºè®®å’Œè§„åˆ’ï¼Œä¹Ÿè®¸ä»–ä»¬è¿˜ç»™æˆ‘å‰§é€äº†ä¸€äº›ä¿¡æ¯ã€‚ä½†æˆ‘èŠ±äº†å‡ å¹´çš„æ—¶é—´æ‰å‘ç°ã€æˆ‘å¿…é¡»ç»™è‡ªå·±è®¾å®šæ›´é«˜çš„ç›®æ ‡ï¼Œå¹¶åŠªåŠ›è¾¾æˆã€ã€‚é™¤éä½ æœ‰ä¸€ä¸ªéå¸¸ç–¯ç‹‚çš„è€æ¿æˆ–è€…ä¸»ç®¡åˆ†é…ç»™ä½ é«˜éš¾åº¦å·¥ä½œï¼Œä¸ç„¶æ²¡æœ‰äººèƒ½æ¯”ä½ æ›´é€‚åˆæŠŠè‡ªå·±æ¨åˆ°æé™ã€‚ï¼ˆæˆ‘å¹¶ä¸æ˜¯æš—ç¤ºå¤§é‡çš„å·¥ä½œå’Œå¤§é‡çš„æ—¶é—´ï¼Œæˆ‘æƒ³è¡¨è¾¾çš„æ˜¯è·³å‡ºä½ çš„èˆ’é€‚åŒºï¼ŒæŒ‘æˆ˜è‡ªå·±è¾¾åˆ°ä¸‹ä¸€ä¸ªé«˜åº¦ã€‚å°è¯•æ–°é²œäº‹ç‰©ï¼Œå­¦ä¹ è¶…å‡ºä½ å·¥ä½œèŒƒç•´çš„æ–°ä¸œè¥¿ç­‰ç­‰ï¼‰\n\nèŠ±æ—¶é—´å­¦ä¹ ã€‚ å½“ä½ å‘ç°ä¸€äº›å’Œä½ å·¥ä½œç›¸å…³çš„å¹²è´§èµ„æ–™æ—¶ï¼Œæ ‡æ³¨ä¸€ä¸‹ç¨åå†çœ‹ï¼Œç„¶åå®šæœŸå»æµè§ˆå­¦ä¹ è¿™äº›å­˜è´§ã€‚æŒ‰å‘¨æ¥è§„åˆ’æ˜¯éå¸¸ä¸é”™çš„ã€‚å¦‚æœä½ å·²ç»åœ¨å¤§é‡çš„é˜…è¯»å’Œå­¦ä¹ äº†ï¼Œé‚£ä¹ˆå’Œå…¶ä»–äººåˆ†äº«ä¸‹ä½ çš„å¿ƒå¾—ã€‚è¿™ä¼šå¸®åŠ©ä½ æ›´åŠ æ·±åˆ»çš„ç†è§£ä½ å­¦åˆ°çš„ä¸œè¥¿ã€‚å»ºè®®è®¾ç½®æœˆåº¦æˆ–è€…å­£åº¦å­¦ä¹ ç›®æ ‡ã€‚\n\n> å­¦ä¹ çš„æœ€é«˜å½¢å¼ä¾¿æ˜¯ä¼ æˆï¼›ä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œï¼Œè¦æƒ³é€šè¿‡ 7 å¤©å­¦ä¼š XXXï¼Œ21 å¤©å­¦ä¼š XXX çš„è¿™ç±»çˆ†æ¬¾æ— å¼‚äºç—´äººè¯´æ¢¦ï¼Œè¿™äº›é¸¡æ±¤å¾€å¾€åªèƒ½æ•™ä¼šä½ æœ€åŸºç¡€çš„ hello, world. åˆç†çš„è®¾å®šå­¦ä¹ è®¡åˆ’ä¸ç›®æ ‡æŒ‰éƒ¨å°±ç­çš„å­¦ä¹ ä¸ä»…èƒ½ç¼“å’Œå­¦ä¹ å‹åŠ›è€Œä¸”èƒ½æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚\n\n### ç”¨å¿ƒæ²Ÿé€š\n\n**ä½ åœ¨å›¢é˜Ÿä¸­çš„å½±å“åŠ›æ˜¯éå¸¸é‡è¦çš„**\n\nå°½æ—©æ²Ÿé€šï¼Œç»å¸¸äº¤æµã€‚ æ—©æœŸï¼Œæˆ‘éå¸¸å®³ç¾å¹¶ä¸”ç»å¸¸ç‹¬è‡ªä¸€äººè§£å†³æ‰€æœ‰é—®é¢˜ã€‚å¦‚æœæˆ‘æ¬ ç€æŸäººä¸€äº›å·¥ä½œï¼Œæˆ‘ä¼šå°è¯•æŠŠæ‰€æœ‰ä»»åŠ¡éƒ½åšå®Œäº†å†è½¬äº¤ç»™ä¸‹ä¸€ä¸ªäººã€‚å¦‚æœæˆ‘é‡åˆ°å›°éš¾äº†ï¼Œæˆ‘è¦ä¹ˆä¼šå°æ¿€åŠ¨è¦ä¹ˆæ‹–å»¶ä¸€é˜µç›´åˆ°æˆ‘æ²¡æ—¶é—´äº†ï¼Œç„¶åä¼šæ…Œå¼ çš„åšå®Œå·¥ä½œã€‚å±•ç¤ºä½ çš„å·¥ä½œï¼Œåˆ†äº«ä½ çš„è‰å›¾å’Œè‰ç¨¿ï¼Œä½ éœ€è¦å’Œä½ çš„å›¢é˜Ÿå»ºç«‹èæ´½çš„å…³ç³»å’Œä¿¡ä»»ï¼Œå¦‚æ­¤ä½ æ‰ä¼šæ„Ÿåˆ°èˆ’é€‚çš„å»æ²Ÿé€šåˆ†äº«ã€‚æ—©æœŸçš„åé¦ˆå¯¹æ¯”æ™šæœŸçš„åé¦ˆæ›´åŠ æœ‰ç”¨å¹¶ä¸”æ›´å…·æœ‰é«˜æ‰§è¡Œåº¦ã€‚æœ‰æ—¶å€™åªéœ€è¦ç®€å•çš„é—®åŒäº‹å‡ ä¸ªé—®é¢˜æˆ–è€…äº¤æµä¸‹çœ‹æ³•å°±ä¼šå¾—åˆ°ä¸€ä¸ªæ„æƒ³ä¸åˆ°çš„è§£å†³ä½ é—®é¢˜çš„æ–¹æ³•ã€‚\n\nææœ‰æ•ˆçš„é—®é¢˜ã€‚ åœ¨ä½ å°šæœªæ„è¯†åˆ°çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰äº‹éƒ½ä¸€å®šç¨‹åº¦ä¸Šæ˜¯æ¨¡ç³Šçš„ã€‚ç”±æ­¤å°è¯•æŠŠäº‹æƒ…ç»™ç²¾ç¡®åŒ–ã€‚å¯¹æœŸæœ›çš„ç»“æœéå¸¸æ˜ç¡®æ˜¯éå¸¸é‡è¦çš„ã€‚äººä»¬é€šå¸¸å¯¹ä¸€ä¸ªåœºæ™¯æœ‰ä¸åŒçš„æœŸå¾…ï¼Œä¸åŒçš„ç†è§£ â€“ è¿™äº›éƒ½æ˜¯æ‘©æ“¦å’ŒæŒ«æŠ˜çš„æ¥æºã€‚æ‰€ä»¥ï¼Œè¿™éå¸¸å€¼å¾—èŠ±è´¹ä¸€å®šçš„æ—¶é—´å’Œç²¾åŠ›ç¡®ä¿æ¯ä¸ªäººéƒ½å¯¹ä½ åšçš„äº‹æƒ…ä¿æŒä¸€è‡´çš„ç†è§£ã€‚\n\nä¸‰äººè¡Œå¿…æœ‰æˆ‘å¸ˆç„‰ã€‚ çœŸå®çš„ç”Ÿæ´»å¹¶ä¸æ˜¯ä¸€æœ¬ä¹¦ï¼Œä½ åªéœ€è¦ç‹¬è‡ªä¸€äººé˜…è¯»ç†è§£å°±è¡Œäº†ã€‚æœ‰éœ€è¦å°±å¯»æ±‚å¸®åŠ©ï¼Œè¿™ä¹Ÿè®¸åœ¨ä¸åŒçš„å…¬å¸æ–‡åŒ–å’ŒåŒäº‹ä¸ªæ€§ç¨æœ‰ä¸åŒã€‚æœ‰äº›äººä¹Ÿå»ä¼šå¼ºè¡Œæ‰“æ‰°ä»–äººï¼Œä½†æˆ‘èƒ½è§‰å¯Ÿåˆ°é‚£äº›èªæ˜ï¼Œæœ‰ä¿®å…»çš„äººèƒ½å°å¿ƒé¿å…æ‰“æ‰°åˆ°ä»–äººçš„æƒ…å†µä¸‹å¯»æ±‚å¸®åŠ©ã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ å¯»æ±‚å¸®åŠ©çš„æ—¶å€™ï¼Œè¦ç®€æ´æ˜ç¤¼è²Œçš„æå‡ºã€å°å¼ºï¼Œå½“ä½ æœ‰ç©ºçš„æ—¶å€™æ¥å¸®åŠ©æˆ‘ä¸‹ï¼Œæˆ‘éœ€è¦æ—è§‚è€…æ¥çœ‹çœ‹æˆ‘çš„ PPT æ˜¯å¦æœ‰ä»»ä½•å€¼å¾—æå‡çš„åœ°æ–¹ã€ã€‚ä¸è¦å¼ºè¡Œæ‰“æ–­åˆ«äººçš„å·¥ä½œï¼Œé‚£æ˜¯ä¸ç¤¼è²Œçš„ã€‚å½“ä½ æœ‰ç¤¼è²Œçš„æå‡ºæ˜ç¡®çš„å¸®åŠ©éœ€æ±‚çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™äººä»¬ä¼šä¸åœ¨æ„åˆ†å¿ƒæ¥å¸®åŠ©ä½ ã€‚\n\nå¿ƒæ€è¦ç§¯æå‘ä¸Šã€‚ è¿™ä¸ä»…å¯¹è‡ªå·±ï¼Œå¯¹æ•´ä¸ªå·¥ä½œæ°›å›´éƒ½éå¸¸æœ‰å¸®åŠ©ï¼\n\n### å°è¯•äº¤é™…\n\n**å…¬å¸å’Œç»„ç»‡éƒ½æ˜¯ç”±äººæ„æˆçš„ï¼Œå°è¯•ä¸ä»–äººå»ºç«‹å…³ç³»**\n\nåä½œå·¥ä½œã€‚ æœ‰æ—¶å€™éå¸¸å®¹æ˜“é™·å…¥ä¸€ä¸ªå›°å¢ƒï¼šä½ è§‰å¾—è‡ªå·±éœ€è¦å¤„ç†æ‰€æœ‰æ‘†åœ¨ä½ é¢å‰çš„é—®é¢˜ã€‚æ€»ä¼šæœ‰åšä¸å®Œçš„å·¥ä½œï¼Œä½ éœ€è¦æ—¢èƒ½ç»¼è§‚å¤§å±€åˆèƒ½ä¸“æ³¨ç»†èŠ‚ã€‚å»è®¤è¯†ä¸€äº›åšå’Œä½ å·¥ä½œæ€§è´¨å·®ä¸å¤šçš„äººï¼Œè¿™ä¼šå¯¹ä½ çš„å·¥ä½œéå¸¸æœ‰å¸®åŠ©ã€‚äººä»¬çŸ¥é“ä¸€äº›ä¸œè¥¿ï¼Œä»–ä»¬ä¹Ÿè®¸ä¸ä¼šå†™åœ¨åšå®¢é‡Œä½†ä»–ä»¬ä¼šæ„¿æ„å½“é¢æ•™æˆä½ è¿™äº›ä¸œè¥¿ï¼Œå¹¶ä¸”è¿™äº›ä¸œè¥¿å¯èƒ½ä¼šå¯¹ä½ éå¸¸æœ‰ç”¨ã€‚äººä»¬å¯ä»¥å¸®ä½ å¼€é—¨ï¼Œå¯ä»¥å¸®ä½ é¢„å…ˆæŠŠä¸œè¥¿å¤„ç†å¥½ã€‚æœ‰æ—¶å€™ä½ èŠ±è´¹äº†å¤§é‡æ—¶é—´éƒ½æœªè§£å†³çš„é—®é¢˜ï¼Œæ­£å¥½æœ‰äººçš„è„‘è¢‹é‡Œæ—©æœ‰è§£å†³æ–¹æ³•ï¼Œä½ ä¹Ÿè®¸åªéœ€è¦è¯·ä»–ä»¬ä¸€æ¯å’–å•¡å°±å¯ä»¥å¯»æ±‚å¸®åŠ©äº†ã€‚\n\næ‹›äººå†…æ¨ã€‚ å³ä½¿ä½ ä¸è´Ÿè´£æ‹›è˜å·¥ä½œï¼Œåˆ—å‡ºä¸€å †ä½ æƒ³è¦å…±åŒå·¥ä½œçš„äººæˆ–è€…æƒ³è¦å­¦ä¹ çš„æ¦œæ ·ç»™ç›¸å…³è´Ÿè´£äººä¹Ÿæ˜¯æœ‰å¸®åŠ©çš„ã€‚\n\nå°è¯•æ¼”è®²ã€‚ ä¸ä»–äººäº¤æµä½ çŸ¥é“çš„å†…å®¹æ˜¯ä¸€é¡¹éå¸¸å¼ºå¤§çš„æŠ€èƒ½ã€‚è¿™ä¼šä½¿ä½ æ›´åŠ ä¸“ä¸šï¼Œä¹Ÿä¼šè®©ä½ åœ¨å·¥ä½œæ—¶æ›´åŠ è½»æ¾ï¼Œå› ä¸ºé€šè¿‡æ•™æˆé¢„åˆ†äº«èƒ½è®©ä½ åœ¨ä½ çš„é¢†åŸŸå†…æ›´åŠ è‡ªä¿¡ã€‚\n\n### å…¶å®ƒæ€è€ƒ\n\nç”„åˆ«æŸç¼šä½ çš„å¤–å› ã€‚ æ˜¯é’±å—ï¼Ÿæ˜¯å¿µå¤´å—ï¼Ÿæ˜¯æ‰§è¡ŒåŠ›å—ï¼Ÿæ˜¯æ—¶é—´å—ï¼Ÿæ˜¯ä»€ä¹ˆé˜»ç¢äº†ä½ å®Œæˆ 2 å€ï¼Œ4 å€ç”šè‡³ 10 å€äºæŒ¡å¢™ä½ çš„æˆå°±ï¼Ÿ\n\nç™½æ—¥æ¢¦æœ‰æ—¶å€™è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ å¦‚æœä½ æœ‰æ›´å¤šçš„èµ„æºå¯ä»¥ç”¨ï¼Ÿå¦‚æœä½ æ¯å‘¨æœ‰é¢å¤– 500 å—é’±ä½ è¦åšä»€ä¹ˆï¼Ÿé‚£ä¹ˆ 1000 å—ï¼Œ2000 å—ï¼Œ5000 å—å–ƒï¼Ÿå¦‚æœä½ ä»å¤´å†æ¥ï¼Œä½ ä¼šåšä»€ä¹ˆä¸ä¸€æ ·çš„äº‹å„¿å—ï¼Ÿå¦‚æœä½ åªç”¨å·¥ä½œå½“å‰æ—¶é—´çš„ä¸€åŠï¼Ÿå¦‚æœä½ åšäº†ä½ å½“å‰ç›®æ ‡å®Œå…¨ç›¸åçš„ç»“æœä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\n\næ¢ä½æ€è€ƒã€‚ å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå¸‚åœºè¥é”€å°±æ˜¯å…³äºæ¢ä½æ€è€ƒã€‚ä¸ºä»€ä¹ˆäººä»¬è¦ç”¨ä½ çš„äº§å“è€Œä¸æ˜¯å…¶å®ƒçš„ï¼Ÿä¸ºä»€ä¹ˆäººä»¬å…³ç³»ä¸€äº›ç‰¹å®šçš„å†…å®¹æ•°æ®ï¼Ÿä¸ºä»€ä¹ˆåˆ«äººè¦é›‡ä½£ä½ ï¼Ÿä½ æœ‰ä»€ä¹ˆä»·å€¼ï¼Œç‰¹ç‚¹å€¼å¾—åˆ«äººæ³¨æ„ï¼Ÿ\n\näº†è§£è¡Œä¸šå·¥ä½œå¸‚åœºã€‚ æˆ‘å°½é‡é¿å…è¿™ä¸ªå¾ˆä¹…äº†ï¼Œå› ä¸ºæˆ‘å–œæ¬¢æˆ‘ç°åœ¨å·¥ä½œçš„åœ°æ–¹ï¼Œè€Œä¸”å“ªæ€•æœ‰æµè§ˆå…¶ä»–å·¥ä½œèŒä½ä¿¡æ¯çš„å¿µå¤´éƒ½æ„Ÿè§‰å¯æ€•ã€‚ä½†äº†è§£å®æ—¶è¡Œä¸šåŠ¨æ€åŠæ‹›äººä¿¡æ¯æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ä½ å¯ä»¥ç”±æ­¤è§„åˆ’ä½ çš„èŒä¸šç”Ÿæ¶¯ï¼Œçœ‹çœ‹å¯¹åº”çš„èŒä½éƒ½éœ€è¦ä»€ä¹ˆæ¡ä»¶ï¼Œè‡ªé—®è‡ªå·±è¿˜å·®ä»€ä¹ˆï¼Œç„¶åå¼¥è¡¥è¿™äº›ä¸è¶³ã€‚è€Œä¸”è¿™äº›è¡Œä¸šä¿¡æ¯ä¹Ÿèƒ½å¤Ÿæä¾›å¯¹ä½ çš„èŒä½æ™‹å‡åŠåŠ è–ªçš„æœ‰æ•ˆä¿¡æ¯ã€‚\n\nä¸»äººç¿æ„è¯†ã€‚ è®©ä½ çš„è€æ¿æ›´åŠ ä¿¡ä»»ä½ ï¼Œå¯¹ä½ çš„å»ºè®®æ›´å®¹æ˜“è¯´åŒæ„ã€‚æ¯ä¸ªè€æ¿éƒ½å–œæ¬¢é›‡ä½£èƒ½ç›´æ¥æŠŠæ´»ç»™å¹²å®Œçš„å‘˜å·¥ï¼Œè€Œä¸”è¿‡ç¨‹ä¸å¯»æ±‚ä»»ä½•å»ºè®®ä¸ç®¡ç†ã€‚å½“ä½ å³äº†è§£ä½ çš„é¦–è¦ä»»åŠ¡ä¸ç›®æ ‡æ—¶ï¼Œæ‰§è¡Œè®¡åˆ’å¹¶å®Œæˆã€‚ä½ çš„è€æ¿æ˜¯é›‡ä½£ä½ æ¥å®Œæˆå·¥ä½œçš„ï¼Œä»–å¹¶ä¸æƒ³å’Œä½ ä¸€èµ·åšå‡ºæ¯ä¸€ä¸ªå†³å®šã€‚ï¼ˆå½“ç„¶ä¸€ä¸ªå¥½è€æ¿ä¼šåœ¨æœ€åˆæ•™ä½ ä¸€äº›è®¡åˆ’ä¸èŒè´£å†…å®¹ï¼‰ã€‚å°è¯•æ›¿è€æ¿æ€è€ƒï¼Œåšå‡ºè®¡åˆ’ï¼Œå¹¶ä¸”åªéœ€è¦è®©è€æ¿åšå‡ºåŒæ„æˆ–è€…å¦å†³çš„å†³å®šã€‚\n\nç…§é¡¾å¥½è‡ªå·±èº«å¿ƒå¥åº·ã€‚ ä½ çš„å·¥ä½œä¼šå æ®ä½ çš„å¤§éƒ¨åˆ†ç”Ÿæ´»ï¼Œæ‰€ä»¥å°è¯•åšå¥½å®ƒï¼Œä¸¥è‚ƒå¯¹å¾…å®ƒï¼Œäº«å—å…¶è¿‡ç¨‹ï¼Œå¹¶ä¸æ–­æŒ‘æˆ˜è‡ªæˆ‘ã€‚ä½†æ˜¯å¦‚æœä½ å‘ç°ä½ ç²¾åŠ›è€—å°½ï¼Œèº«å¿ƒç–²æƒ«ï¼Œè¿™æ—¶å€™ä¸è¦å†è‡ªå·±å‚¬çœ å¼ºæ’‘ä¸‹å»äº†ã€‚æ¯•ç«Ÿï¼Œä½ æ‰æ˜¯ä½ ç”Ÿæ´»ä¸­æœ€é‡è¦çš„äººï¼Œç…§é¡¾å¥½ä½ è‡ªå·±ã€‚\n\n<div class=\"tip\">\næœ¬æ–‡è½¬è½½è‡ª: [MOYU](https://moyu.io/2017/10/advices-from-my-supervisor/)ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚\n</div>\n","slug":"æˆ‘çš„ä¸»ç®¡ç»™æˆ‘çš„ä¸€äº›å»ºè®®","published":1,"updated":"2019-12-07T04:59:36.112Z","layout":"post","photos":[],"link":"","_id":"ck3v60jto000qr9q9z9onkc5b","content":"<p>æœ¬æ–‡ç¿»è¯‘è‡ª <a href=\"https://www.reddit.com/r/startups/comments/74pms1/my_manager_who_i_loved_recently_left_my_company_i/\" target=\"_blank\" rel=\"noopener\">Reddit</a> ä¸Šçš„ä¸€ç¯‡æ–‡ç« ã€‚å…¶ä¸»è¦å†…å®¹ä¸ºä¸€åèŒå·¥è®°å½•äº†ä»–ä¸å…¶å·²ç¦»èŒçš„ä¸»ç®¡çš„ä¸€å¯¹ä¸€äº¤æµã€‚å…¶ä¸­æ€»ç»“äº†å¤§é‡å…³äºèŒä¸šç”Ÿæ¶¯ï¼Œå·¥ä½œå†…å®¹ï¼Œäººé™…å…³ç³»ï¼Œè‡ªæˆ‘æˆé•¿çš„å»ºè®®ã€‚</p>\n<a id=\"more\"></a>\n<h3 id=\"é¦–è¦ä»»åŠ¡\"><a href=\"#é¦–è¦ä»»åŠ¡\" class=\"headerlink\" title=\"é¦–è¦ä»»åŠ¡\"></a>é¦–è¦ä»»åŠ¡</h3><p><strong>ç¡®å®šå¹¶ä¸“æ³¨äºä½ çš„é¦–è¦ä»»åŠ¡ â€“ å¦‚æœä¸ï¼Œé‚£ä¹ˆä½ æ•´å¤©åœ¨å¹²ä»€ä¹ˆï¼Ÿ</strong></p>\n<p>ä¼˜å…ˆä»»åŠ¡çœŸçš„æ˜¯æœ€é¦–è¦ä»»åŠ¡çš„å—ï¼Ÿ å½“å‰ä½ éœ€è¦åšå¾—æœ€ä¸ºé‡è¦çš„äº‹æ˜¯ä»€ä¹ˆï¼Ÿå¦‚æœä½ ä¸èƒ½å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆä½ å°±åº”è¯¥åœä¸‹æ‰‹å¤´çš„æ‰€æœ‰å·¥ä½œç„¶åå…ˆå¼„æ¸…æ¥šä½ çš„ç­”æ¡ˆã€‚æœ‰æ˜ç¡®çš„ç­”æ¡ˆèƒ½è®©ä½ æ›´åŠ æ˜ç¡®ç›®æ ‡ä¸ä¸“æ³¨ã€‚æ²¡æœ‰æ˜ç¡®çš„ç­”æ¡ˆå¾€å¾€ä¼šå¯¼è‡´ä½ ç»å¸¸åœ¨åšä¸€äº›å¹¶ä¸é‡è¦çš„äº‹å¹¶ä¸”æµªè´¹å¤§é‡å®è´µçš„æ—¶é—´ã€‚</p>\n<p>æ¯å¤©æ€»ä¼šæœ‰æºæºä¸æ–­éœ€è¦åšçš„äº‹å„¿ã€‚äººä»¬å¸¸ä¼šå€¾å‘äºå…ˆåšç®€å•ã€æœ‰è¶£æˆ–ç†Ÿæ‚‰çš„ä»»åŠ¡ã€‚ä½†é•¿è¿œæ¥çœ‹è¿™æ˜¯ä¸€ä¸ªé™·é˜±ã€‚å®Œæˆé¦–è¦ä»»åŠ¡ 5%-10% çš„å·¥ä½œé‡æ¯”åšå¤§é‡å¯¹ç›®æ ‡æ— ç›Šçš„ä»»åŠ¡æ›´å¥½ã€‚</p>\n<blockquote>\n<p>å¾€å¾€è‡ªå·±è®¤ä¸ºåº”è¯¥ä¼˜å…ˆåšçš„å·¥ä½œå…¶å®å¹¶ä¸æ˜¯å½“å‰ç›®æ ‡çš„é¦–è¦ä»»åŠ¡</p>\n</blockquote>\n<p>ä½ è´Ÿè´£ä»€ä¹ˆï¼Ÿ ä¼ä¸šä¸­çš„æ¯ä¸ªäººéƒ½åº”è¯¥è´Ÿè´£ä¸€å®šçš„å·¥ä½œã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œå®ƒåº”è¯¥æ˜¯ä¸ä½ çš„é¦–è¦ç›®æ ‡ç›¸å…³çš„åº¦é‡æŒ‡æ ‡ã€‚å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆä½ å°±åº”è¯¥å’Œä½ çš„ä¸»ç®¡æˆ–è€…è€æ¿å¥½å¥½è°ˆä¸€è°ˆæ¥ç¡®å®šä½ çš„é¦–è¦ä»»åŠ¡ã€‚å½“ä½ ç¡®ç«‹å¥½ä½ çš„é¦–è¦ä»»åŠ¡åï¼Œä½ è¿˜ä¼šä¿è¯ä½ å·²äº†è§£äº†è¶³å¤Ÿçš„ä¿¡æ¯æ¥æå‡è¿™ä¸ªæŒ‡æ ‡ã€‚</p>\n<p>æŒæ§å¥½ä½ çš„è´Ÿè´£èŒƒå›´ã€‚ ä¸€èˆ¬äººä»¬éƒ½ä¼šæƒ³å–„äºå®Œæˆä»–ä»¬çš„å·¥ä½œã€‚å¬èµ·æ¥å¾ˆæ˜æ˜¾ï¼Œä½†æœ‰æ—¶å€™ç¯å¢ƒä¼šè¯±æƒ‘ä½ å»åšä¸€äº›æ— å…³ç´§è¦çš„äº‹æƒ…ã€‚è¿™æ—¶å€™å°±å€¼å¾—æ³¨æ„äº†ï¼Œè¿”å›å»çœ‹ç¬¬ä¸€æ¡ â€“ ä¿æŒé¦–è¦ä»»åŠ¡çš„ä¼˜å…ˆã€‚</p>\n<p>ç²¾ç¡®ä½ çš„ç›®æ ‡ã€‚ å¦‚æœç›®æ ‡æœ‰ç‚¹æ¨¡ç³Šï¼Œç©ºå‡ºä¸€ç‚¹æ—¶é—´æ¥ç¡®ç«‹å®ƒçš„ç²¾ç¡®æ€§ã€‚ä¸è¦å»åšè¾ƒä¸ºæ¨¡ç³Šçš„å·¥ä½œ â€“ å®ƒä»¬å¸¸å¸¸ä¼šä»¤äººåˆ†å¿ƒå’Œåšä¸€äº›è¶…å‡ºç›®æ ‡èŒƒå›´çš„äº‹ã€‚è¦å­¦ä¼šé‰´åˆ«è‡ªå·±æ€è€ƒï¼Œæ–‡å­—ï¼ŒåŠäº¤æµä¸­çš„æ¨¡ç³Šåœ°å¸¦ï¼Œç„¶åæŠŠè¿™äº›æ¨¡ç³Šéƒ½æ¶ˆé™¤æ‰ï¼Œä½¿ä¹‹æ¸…æ™°æ˜äº†ã€‚</p>\n<h3 id=\"é«˜æ•ˆç®¡ç†\"><a href=\"#é«˜æ•ˆç®¡ç†\" class=\"headerlink\" title=\"é«˜æ•ˆç®¡ç†\"></a>é«˜æ•ˆç®¡ç†</h3><p><strong>æŠŠè‡ªå·±å½“åšå®è´µä¸”é‡è¦çš„èµ„æºä¸€æ ·ç®¡ç†</strong></p>\n<p>ä¸è¦ä¸æ‡‚è£…æ‡‚ã€‚ å¯¹è‡ªå·±è¦å¦è¯šç›¸å¾…ï¼Œå¯¹è‡ªå·±æœ‰æ¸…æ™°çš„è‡ªæˆ‘è®¤è¯†èƒ½è®©ä½ æ›´å¿«çš„å­¦ä¹ å’Œæå‡ã€‚å¦‚æœä½ æŠ±ç€å¦è¯šçš„å¿ƒæ€ä¸ä»–äººäº¤æµï¼Œåˆ«äººä¹Ÿä¼šå¦è¯šå¯¹å¾…ä½ ï¼Œç”±æ­¤ä¸€ä¸ªèˆ’é€‚å¥åº·çš„äº¤æµç¯å¢ƒå°±å»ºç«‹èµ·æ¥äº†ï¼Œå¹¶ä¸”ä¸æ–­çš„å½±å“ç€å‘¨å›´çš„äººã€‚</p>\n<p>åˆ¶å®šè®¡åˆ’å¹¶æ‰§è¡Œã€‚ æˆ‘å°æ—¶å€™éå¸¸è®¨åŒæ—¥å†å’Œæ—¶é—´è¡¨ï¼Œå¹¶ä¸”èŠ±è´¹äº†å¤§é‡æ—¶é—´åº”ä»˜å„ç§æˆªè‡³æ—¥æœŸçš„æ½œåœ¨å‹åŠ›ã€‚ä½†äº‹å®æ˜¯ï¼šæ— è®ºè®¨åŒè¿˜æ˜¯å–œæ¬¢è®¡åˆ’ï¼Œæˆ‘ä»¬åªæœ‰æœ‰é™çš„æ—¶é—´å’Œæ— å°½çš„ä»»åŠ¡éœ€è¦åšï¼Œè¿™äº›éƒ½ä¸ä¼šéšç€æˆ‘ä»¬çš„ä¸»è§‚æ„è¯†è€Œæ”¹å˜ã€‚æ²¡æœ‰è‰¯å¥½çš„è®¡åˆ’ï¼Œæˆ‘ä»¬æœ€ç»ˆä¼šæ— ä¼‘æ­¢çš„å·¥ä½œã€‚å¦‚æœä½ ä¸ä¸»åŠ¨æå‰å†³å®šä½ åº”è¯¥æ€ä¹ˆèŠ±è´¹ä½ å¾—æ—¶é—´å’Œç²¾åŠ›ï¼Œé‚£ä¹ˆä¼šæœ‰å…¶ä»–çš„äº‹æƒ…ä¼šå¸®ä½ åšå†³å®š â€“ è¢«åˆ«äººæ‰“æ–­æˆ–è€…ä¸€äº›æ— å…³ç´§è¦çš„ä»»åŠ¡ï¼ˆå®ƒä»¬éƒ½ä¼šè®©ä½ ä¸ç”±è‡ªä¸»çš„èŠ±æ—¶é—´å»å¤„ç†ï¼‰ã€‚</p>\n<p>ç»è¿‡å¤šå¹´çš„åæ€å’Œæ‘‡æ‘†ï¼Œæˆ‘é€æ¸æ„è¯†åˆ°æˆ‘çš„é—®é¢˜å¹¶éæ˜¯æŒ‡å®šè®¡åˆ’ï¼Œè€Œä¸”è¢«åŠ¨çš„å»åšä¸€äº›æˆ‘ä¸æƒ³åšçš„äº‹å„¿ã€‚æˆ‘åªæ˜¯æ½œæ„è¯†çš„å¯¹æ—¥å†ï¼Œè®¡åˆ’æœ‰ç€åæŠ—æ€åº¦ã€‚å¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œè¿™éœ€è¦èŠ±è´¹å¤§é‡ç²¾åŠ›å»æ¶ˆé™¤è¿™äº›å½±å“ã€‚å¼€å§‹åˆ¶å®šä¸€äº›ç®€å•çš„è®¡åˆ’ç„¶åå®Œæˆã€‚å†™ä¸‹ä¸€äº›ä½ èƒ½ 5 åˆ†é’Ÿå†…å®Œæˆçš„äº‹ï¼Œç„¶åæ‰§è¡Œï¼Œå®Œæˆã€‚åå¤å¦‚æ­¤è®¡åˆ’æ‰§è¡Œï¼Œè®¡åˆ’æ‰§è¡Œï¼Œç›´åˆ°ä½ åšçš„è¶Šæ¥è¶Šå¥½ï¼Œç„¶åé€æ¸åŠ å¤šæ—¶é—´ã€‚å†°å†»ä¸‰å°ºéä¸€æ—¥ä¹‹å¯’ï¼Œé€šè¿‡ä¸æ–­ç»ƒä¹ åŠåŠ å¤§ä»»åŠ¡é‡åŠæ—¶é—´ï¼Œä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œå°±åƒç©æ¸¸æˆä¸€æ ·ã€‚å½“ä½ å¼€å§‹ä¹ æƒ¯è¿™æ ·çš„å¾ªåºæ¸è¿›æ–¹å¼æ—¶ï¼Œä¼šå˜å¾—è¶Šæ¥è¶Šæœ‰è¶£å’Œä»¤äººæ¿€åŠ¨ã€‚ä½ å°†ä¼šè¶Šæ¥è¶Šäº†è§£ä½ è‡ªå·±åŠä½ å‘¨å›´çš„ä¸–ç•Œã€‚</p>\n<p>åŠ³é€¸ç»“åˆã€‚ ä½ æ˜¯ä¸€é¡¹å®è´µçš„èµ„æºï¼Œå¹¶ä¸”éœ€è¦ä¼‘æ•´ã€‚ä¸è¦å¿«é€Ÿè€—å°½ç²¾åŠ›ï¼Œè¦å­¦ä¼šç»†æ°´é•¿æµï¼Œå½“åšé©¬æ‹‰æ¾æ¥çœ‹ã€‚ä½†æˆ‘å¼€å§‹å·¥ä½œæ—¶ï¼Œæˆ‘æ„Ÿè§‰æˆ‘è·å¾—äº†ä¸€ä¸ªéš¾å¾—å¯è´µçš„æœºä¼šã€è§‰çš„è‡ªå·±è¿˜ä¸å¤Ÿæ ¼ã€é¡¶ç€å‹åŠ›ã€å¸¸å¸¸åŸ‹å¤´è‹¦å¹²ã€ä½†è¿˜æ„Ÿåˆ°è‡ªå·±è½åäºå·¥ä½œï¼Œç„¶åæˆ‘å¼€å§‹æ‹–å»¶å’Œå»¶æœŸç›´åˆ°æˆ‘ä¼‘äº†ä¸ªå‡ã€‚ç°åœ¨å›è¿‡å¤´æ¥çœ‹ï¼Œè¿™çœŸæ˜¯ä¸ªæ»‘ç¨½çš„è¡Œä¸ºï¼Œè€Œä¸”æˆ‘éå¸¸åæ‚”ã€‚å¦‚æœå½“åˆæˆ‘æŠ—ä½å‹åŠ›å’Œæå‰å®‰æ’å¥½æ—¶é—´ï¼Œæˆ‘ä¼šæ›´åŠ å¼€å¿ƒï¼Œå¥åº·ï¼Œå®Œæˆæ›´å¤šå¾—å·¥ä½œã€‚</p>\n<p>å¾æ—¥ä¸‰çœå¾èº«ã€‚ åˆ†æè¿‡å»çš„å·¥ä½œï¼Œå“ªäº›å®Œæˆäº†ï¼Œå“ªäº›æ²¡æœ‰ï¼Œå“ªäº›æœ€ç»ˆæ•ˆæœä¸é”™ï¼Œå“ªäº›å¤±è´¥â€¦â€¦ ä½ åº”è¯¥å®šæœŸç‹¬ç«‹è¿™æ ·å›é¡¾åˆ†æå·¥ä½œã€‚æˆ‘ç»å¸¸å·æ‡’è®°ç¬”è®°ï¼Œå³ä½¿è®°äº†ä¹ŸåŸºæœ¬ä¸ä¼šå›å¤´å†çœ‹ã€‚å¦‚æœæˆ‘èƒ½é‡æ–°æ¥è¿‡ï¼Œæˆ‘ä¼šæ›´åŠ ç³»ç»Ÿçš„ä¸¥äºåˆ©å·±çš„å¯¹å¾…æ­¤äº‹ã€‚</p>\n<blockquote>\n<p>é€šè¿‡å®šæœŸå¤ç›˜èƒ½å¤Ÿä¸æ–­å¼ºåŒ–è‡ªå·±å¯¹ä¸€ä¸ªé¡¹ç›®çš„ç†è§£ï¼Œå¦‚æœé¡¹ç›®è¶Šæ»šè¶Šå¤§ï¼Œè¿˜æ˜¯ä¼šå¯¹é¡¹ç›®çš„æŒæ§æ¸¸åˆƒæœ‰ä½™ã€‚å®šæœŸçš„å¤ç›˜è¿˜èƒ½èµ·åˆ°æ‰¾å‡ºå¼±é¡¹ï¼Œå¼¥è¡¥ä¸è¶³ï¼Œå¸å–ç»éªŒï¼Œè®©è‡ªå·±ä¹‹åèƒ½å¤Ÿæ›´ä¼˜å¼‚çš„å®Œæˆä»»åŠ¡ã€‚å¾ˆå¤šå®è´µçš„ç»éªŒï¼Œç»å†äº†ä¸€æ¬¡å°±å®Œäº†çš„äººç®—ä½œæ™®é€šäººï¼›ç»å†äº†ä¸€æ¬¡å¹¶å¸å–ç»éªŒåœ¨ä»¥åé‡åˆ°åŒæ ·é—®é¢˜èƒ½å¤Ÿé€šè¿‡ç»éªŒè§£å†³çš„äººç®—ä½œä¼˜ç§€çš„äººï¼›ç»å†äº†ä¸€æ¬¡ä¸ä»…å¸å–äº†ç»éªŒï¼Œè¿˜èƒ½åšåˆ°å¤ç›˜ä¸¾ä¸€åä¸‰çš„èƒ½ç§°ä¹‹ä¸ºéå¸¸æœ‰å‰æ™¯çš„äººæ‰äº†</p>\n</blockquote>\n<p>è¡¨è¿°ä½ çš„è¿›åº¦ã€‚ è¿™åœ¨å¤šä¸ªå±‚é¢ä¸Šå‡éå¸¸æœ‰å¸®åŠ©ã€‚é¦–å…ˆï¼Œåªéœ€è¦ç»™é«˜å¼ºåº¦å·¥ä½œçš„å¤§è„‘è…¾ç‚¹ä¼‘æ¯æ—¶é—´ï¼ŒæŠŠå·¥ä½œè¿›åº¦æ‰‹å†™åœ¨çº¸ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ä¹ æƒ¯ã€‚è¿™ä¼šå¼ºè¿«ä½ æŠŠæƒ³è¦è¡¨è¾¾çš„ä¸œè¥¿è¡¨è¿°å‡ºæ¥ã€‚ä½ æƒ³è¦è¾¾æˆä»€ä¹ˆç›®æ ‡ï¼Ÿä½ æ˜¯å¦‚æœåšå‡ºå†³ç­–çš„ï¼Ÿå½“ä½ åœ¨ç”¨æ–‡å­—è¡¨è¿°ä½ çš„è¿›åº¦çš„æ—¶å€™ï¼Œä½ è¿˜èƒ½é¡ºå¸¦åˆ†æä¸‹ã€‚ä½ èƒ½æ‰¾å‡ºå¼±é¡¹å¹¶å¼ºåŒ–å®ƒä»¬ã€‚è¿™å°±åƒæ˜¯åœ¨çœ‹è‡ªå·±çš„å›æ”¾ä¸€æ ·ï¼Œèƒ½å¤Ÿæ³¨æ„åˆ°æ›´å¤šçš„ç»†èŠ‚ã€‚å½“ç„¶ï¼Œä½ è¿˜èƒ½ä¸ä»–äººåˆ†äº«ä½ çš„è¡¨è¿°ï¼Œå¹¶æ”¶åˆ°åé¦ˆï¼Œè¿™åˆæ˜¯æ›´è¿›ä¸€æ­¥çš„æå‡äº†ã€‚</p>\n<blockquote>\n<p>é€šè¿‡å…·ä½“çš„è¯­è¨€æˆ–è€…æ–‡å­—è¡¨è¿°è‡ªå·±å·¥ä½œçš„è¿›åº¦ï¼Œå¯ä»¥æŠŠå¤§è„‘é‡ŒæŠ½è±¡çš„æ€è€ƒå…·ä½“åŒ–ï¼Œå¹¶ç”±æ­¤è§‚å¯Ÿç»†èŠ‚æ‰¾å‡ºé—®é¢˜æˆ–è€…å¼±ç‚¹å¹¶å¼ºåŒ–ã€‚é€šè¿‡å…·ä½“çš„è¡¨è¿°èƒ½å¤Ÿå¢å¼ºé€»è¾‘èƒ½åŠ›ï¼Œé”»ç‚¼è¡¨è¾¾èƒ½åŠ›ä¸æ›´æ¸…æ™°çš„è®¤è¯†è‡ªå·±åšçš„äº‹å„¿ã€‚</p>\n</blockquote>\n<p>ä¸ºè‡ªå·±è´Ÿè´£ã€‚ å³ä½¿ä½ æœ‰éå¸¸ä¼˜ç§€çš„ä¸»ç®¡ï¼Œä½†æ˜¯ä½ æœ€ç»ˆä¼šä¸ºè‡ªå·±çš„å­¦ä¹ ã€æ‰§è¡Œå’Œæˆé•¿è¿›è¡Œè´Ÿè´£ã€‚å›é¡¾ä»¥å‰ï¼Œæˆ‘è§‰å¾—æˆ‘è‡ªå·±èŠ±è´¹äº†ç¬¬ä¸€ä¸ª 3-4 å¹´åœ¨èˆ’é€‚åŒºï¼Œä»ä¸ä¸»åŠ¨å‡ºå‡»ã€‚æˆ‘çš„ç¡®æœ‰ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„ä¸»ç®¡ï¼Œç»™æˆ‘äº†å¤§é‡çš„ç›®æ ‡ã€å»ºè®®å’Œè§„åˆ’ï¼Œä¹Ÿè®¸ä»–ä»¬è¿˜ç»™æˆ‘å‰§é€äº†ä¸€äº›ä¿¡æ¯ã€‚ä½†æˆ‘èŠ±äº†å‡ å¹´çš„æ—¶é—´æ‰å‘ç°ã€æˆ‘å¿…é¡»ç»™è‡ªå·±è®¾å®šæ›´é«˜çš„ç›®æ ‡ï¼Œå¹¶åŠªåŠ›è¾¾æˆã€ã€‚é™¤éä½ æœ‰ä¸€ä¸ªéå¸¸ç–¯ç‹‚çš„è€æ¿æˆ–è€…ä¸»ç®¡åˆ†é…ç»™ä½ é«˜éš¾åº¦å·¥ä½œï¼Œä¸ç„¶æ²¡æœ‰äººèƒ½æ¯”ä½ æ›´é€‚åˆæŠŠè‡ªå·±æ¨åˆ°æé™ã€‚ï¼ˆæˆ‘å¹¶ä¸æ˜¯æš—ç¤ºå¤§é‡çš„å·¥ä½œå’Œå¤§é‡çš„æ—¶é—´ï¼Œæˆ‘æƒ³è¡¨è¾¾çš„æ˜¯è·³å‡ºä½ çš„èˆ’é€‚åŒºï¼ŒæŒ‘æˆ˜è‡ªå·±è¾¾åˆ°ä¸‹ä¸€ä¸ªé«˜åº¦ã€‚å°è¯•æ–°é²œäº‹ç‰©ï¼Œå­¦ä¹ è¶…å‡ºä½ å·¥ä½œèŒƒç•´çš„æ–°ä¸œè¥¿ç­‰ç­‰ï¼‰</p>\n<p>èŠ±æ—¶é—´å­¦ä¹ ã€‚ å½“ä½ å‘ç°ä¸€äº›å’Œä½ å·¥ä½œç›¸å…³çš„å¹²è´§èµ„æ–™æ—¶ï¼Œæ ‡æ³¨ä¸€ä¸‹ç¨åå†çœ‹ï¼Œç„¶åå®šæœŸå»æµè§ˆå­¦ä¹ è¿™äº›å­˜è´§ã€‚æŒ‰å‘¨æ¥è§„åˆ’æ˜¯éå¸¸ä¸é”™çš„ã€‚å¦‚æœä½ å·²ç»åœ¨å¤§é‡çš„é˜…è¯»å’Œå­¦ä¹ äº†ï¼Œé‚£ä¹ˆå’Œå…¶ä»–äººåˆ†äº«ä¸‹ä½ çš„å¿ƒå¾—ã€‚è¿™ä¼šå¸®åŠ©ä½ æ›´åŠ æ·±åˆ»çš„ç†è§£ä½ å­¦åˆ°çš„ä¸œè¥¿ã€‚å»ºè®®è®¾ç½®æœˆåº¦æˆ–è€…å­£åº¦å­¦ä¹ ç›®æ ‡ã€‚</p>\n<blockquote>\n<p>å­¦ä¹ çš„æœ€é«˜å½¢å¼ä¾¿æ˜¯ä¼ æˆï¼›ä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œï¼Œè¦æƒ³é€šè¿‡ 7 å¤©å­¦ä¼š XXXï¼Œ21 å¤©å­¦ä¼š XXX çš„è¿™ç±»çˆ†æ¬¾æ— å¼‚äºç—´äººè¯´æ¢¦ï¼Œè¿™äº›é¸¡æ±¤å¾€å¾€åªèƒ½æ•™ä¼šä½ æœ€åŸºç¡€çš„ hello, world. åˆç†çš„è®¾å®šå­¦ä¹ è®¡åˆ’ä¸ç›®æ ‡æŒ‰éƒ¨å°±ç­çš„å­¦ä¹ ä¸ä»…èƒ½ç¼“å’Œå­¦ä¹ å‹åŠ›è€Œä¸”èƒ½æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚</p>\n</blockquote>\n<h3 id=\"ç”¨å¿ƒæ²Ÿé€š\"><a href=\"#ç”¨å¿ƒæ²Ÿé€š\" class=\"headerlink\" title=\"ç”¨å¿ƒæ²Ÿé€š\"></a>ç”¨å¿ƒæ²Ÿé€š</h3><p><strong>ä½ åœ¨å›¢é˜Ÿä¸­çš„å½±å“åŠ›æ˜¯éå¸¸é‡è¦çš„</strong></p>\n<p>å°½æ—©æ²Ÿé€šï¼Œç»å¸¸äº¤æµã€‚ æ—©æœŸï¼Œæˆ‘éå¸¸å®³ç¾å¹¶ä¸”ç»å¸¸ç‹¬è‡ªä¸€äººè§£å†³æ‰€æœ‰é—®é¢˜ã€‚å¦‚æœæˆ‘æ¬ ç€æŸäººä¸€äº›å·¥ä½œï¼Œæˆ‘ä¼šå°è¯•æŠŠæ‰€æœ‰ä»»åŠ¡éƒ½åšå®Œäº†å†è½¬äº¤ç»™ä¸‹ä¸€ä¸ªäººã€‚å¦‚æœæˆ‘é‡åˆ°å›°éš¾äº†ï¼Œæˆ‘è¦ä¹ˆä¼šå°æ¿€åŠ¨è¦ä¹ˆæ‹–å»¶ä¸€é˜µç›´åˆ°æˆ‘æ²¡æ—¶é—´äº†ï¼Œç„¶åä¼šæ…Œå¼ çš„åšå®Œå·¥ä½œã€‚å±•ç¤ºä½ çš„å·¥ä½œï¼Œåˆ†äº«ä½ çš„è‰å›¾å’Œè‰ç¨¿ï¼Œä½ éœ€è¦å’Œä½ çš„å›¢é˜Ÿå»ºç«‹èæ´½çš„å…³ç³»å’Œä¿¡ä»»ï¼Œå¦‚æ­¤ä½ æ‰ä¼šæ„Ÿåˆ°èˆ’é€‚çš„å»æ²Ÿé€šåˆ†äº«ã€‚æ—©æœŸçš„åé¦ˆå¯¹æ¯”æ™šæœŸçš„åé¦ˆæ›´åŠ æœ‰ç”¨å¹¶ä¸”æ›´å…·æœ‰é«˜æ‰§è¡Œåº¦ã€‚æœ‰æ—¶å€™åªéœ€è¦ç®€å•çš„é—®åŒäº‹å‡ ä¸ªé—®é¢˜æˆ–è€…äº¤æµä¸‹çœ‹æ³•å°±ä¼šå¾—åˆ°ä¸€ä¸ªæ„æƒ³ä¸åˆ°çš„è§£å†³ä½ é—®é¢˜çš„æ–¹æ³•ã€‚</p>\n<p>ææœ‰æ•ˆçš„é—®é¢˜ã€‚ åœ¨ä½ å°šæœªæ„è¯†åˆ°çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰äº‹éƒ½ä¸€å®šç¨‹åº¦ä¸Šæ˜¯æ¨¡ç³Šçš„ã€‚ç”±æ­¤å°è¯•æŠŠäº‹æƒ…ç»™ç²¾ç¡®åŒ–ã€‚å¯¹æœŸæœ›çš„ç»“æœéå¸¸æ˜ç¡®æ˜¯éå¸¸é‡è¦çš„ã€‚äººä»¬é€šå¸¸å¯¹ä¸€ä¸ªåœºæ™¯æœ‰ä¸åŒçš„æœŸå¾…ï¼Œä¸åŒçš„ç†è§£ â€“ è¿™äº›éƒ½æ˜¯æ‘©æ“¦å’ŒæŒ«æŠ˜çš„æ¥æºã€‚æ‰€ä»¥ï¼Œè¿™éå¸¸å€¼å¾—èŠ±è´¹ä¸€å®šçš„æ—¶é—´å’Œç²¾åŠ›ç¡®ä¿æ¯ä¸ªäººéƒ½å¯¹ä½ åšçš„äº‹æƒ…ä¿æŒä¸€è‡´çš„ç†è§£ã€‚</p>\n<p>ä¸‰äººè¡Œå¿…æœ‰æˆ‘å¸ˆç„‰ã€‚ çœŸå®çš„ç”Ÿæ´»å¹¶ä¸æ˜¯ä¸€æœ¬ä¹¦ï¼Œä½ åªéœ€è¦ç‹¬è‡ªä¸€äººé˜…è¯»ç†è§£å°±è¡Œäº†ã€‚æœ‰éœ€è¦å°±å¯»æ±‚å¸®åŠ©ï¼Œè¿™ä¹Ÿè®¸åœ¨ä¸åŒçš„å…¬å¸æ–‡åŒ–å’ŒåŒäº‹ä¸ªæ€§ç¨æœ‰ä¸åŒã€‚æœ‰äº›äººä¹Ÿå»ä¼šå¼ºè¡Œæ‰“æ‰°ä»–äººï¼Œä½†æˆ‘èƒ½è§‰å¯Ÿåˆ°é‚£äº›èªæ˜ï¼Œæœ‰ä¿®å…»çš„äººèƒ½å°å¿ƒé¿å…æ‰“æ‰°åˆ°ä»–äººçš„æƒ…å†µä¸‹å¯»æ±‚å¸®åŠ©ã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ å¯»æ±‚å¸®åŠ©çš„æ—¶å€™ï¼Œè¦ç®€æ´æ˜ç¤¼è²Œçš„æå‡ºã€å°å¼ºï¼Œå½“ä½ æœ‰ç©ºçš„æ—¶å€™æ¥å¸®åŠ©æˆ‘ä¸‹ï¼Œæˆ‘éœ€è¦æ—è§‚è€…æ¥çœ‹çœ‹æˆ‘çš„ PPT æ˜¯å¦æœ‰ä»»ä½•å€¼å¾—æå‡çš„åœ°æ–¹ã€ã€‚ä¸è¦å¼ºè¡Œæ‰“æ–­åˆ«äººçš„å·¥ä½œï¼Œé‚£æ˜¯ä¸ç¤¼è²Œçš„ã€‚å½“ä½ æœ‰ç¤¼è²Œçš„æå‡ºæ˜ç¡®çš„å¸®åŠ©éœ€æ±‚çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™äººä»¬ä¼šä¸åœ¨æ„åˆ†å¿ƒæ¥å¸®åŠ©ä½ ã€‚</p>\n<p>å¿ƒæ€è¦ç§¯æå‘ä¸Šã€‚ è¿™ä¸ä»…å¯¹è‡ªå·±ï¼Œå¯¹æ•´ä¸ªå·¥ä½œæ°›å›´éƒ½éå¸¸æœ‰å¸®åŠ©ï¼</p>\n<h3 id=\"å°è¯•äº¤é™…\"><a href=\"#å°è¯•äº¤é™…\" class=\"headerlink\" title=\"å°è¯•äº¤é™…\"></a>å°è¯•äº¤é™…</h3><p><strong>å…¬å¸å’Œç»„ç»‡éƒ½æ˜¯ç”±äººæ„æˆçš„ï¼Œå°è¯•ä¸ä»–äººå»ºç«‹å…³ç³»</strong></p>\n<p>åä½œå·¥ä½œã€‚ æœ‰æ—¶å€™éå¸¸å®¹æ˜“é™·å…¥ä¸€ä¸ªå›°å¢ƒï¼šä½ è§‰å¾—è‡ªå·±éœ€è¦å¤„ç†æ‰€æœ‰æ‘†åœ¨ä½ é¢å‰çš„é—®é¢˜ã€‚æ€»ä¼šæœ‰åšä¸å®Œçš„å·¥ä½œï¼Œä½ éœ€è¦æ—¢èƒ½ç»¼è§‚å¤§å±€åˆèƒ½ä¸“æ³¨ç»†èŠ‚ã€‚å»è®¤è¯†ä¸€äº›åšå’Œä½ å·¥ä½œæ€§è´¨å·®ä¸å¤šçš„äººï¼Œè¿™ä¼šå¯¹ä½ çš„å·¥ä½œéå¸¸æœ‰å¸®åŠ©ã€‚äººä»¬çŸ¥é“ä¸€äº›ä¸œè¥¿ï¼Œä»–ä»¬ä¹Ÿè®¸ä¸ä¼šå†™åœ¨åšå®¢é‡Œä½†ä»–ä»¬ä¼šæ„¿æ„å½“é¢æ•™æˆä½ è¿™äº›ä¸œè¥¿ï¼Œå¹¶ä¸”è¿™äº›ä¸œè¥¿å¯èƒ½ä¼šå¯¹ä½ éå¸¸æœ‰ç”¨ã€‚äººä»¬å¯ä»¥å¸®ä½ å¼€é—¨ï¼Œå¯ä»¥å¸®ä½ é¢„å…ˆæŠŠä¸œè¥¿å¤„ç†å¥½ã€‚æœ‰æ—¶å€™ä½ èŠ±è´¹äº†å¤§é‡æ—¶é—´éƒ½æœªè§£å†³çš„é—®é¢˜ï¼Œæ­£å¥½æœ‰äººçš„è„‘è¢‹é‡Œæ—©æœ‰è§£å†³æ–¹æ³•ï¼Œä½ ä¹Ÿè®¸åªéœ€è¦è¯·ä»–ä»¬ä¸€æ¯å’–å•¡å°±å¯ä»¥å¯»æ±‚å¸®åŠ©äº†ã€‚</p>\n<p>æ‹›äººå†…æ¨ã€‚ å³ä½¿ä½ ä¸è´Ÿè´£æ‹›è˜å·¥ä½œï¼Œåˆ—å‡ºä¸€å †ä½ æƒ³è¦å…±åŒå·¥ä½œçš„äººæˆ–è€…æƒ³è¦å­¦ä¹ çš„æ¦œæ ·ç»™ç›¸å…³è´Ÿè´£äººä¹Ÿæ˜¯æœ‰å¸®åŠ©çš„ã€‚</p>\n<p>å°è¯•æ¼”è®²ã€‚ ä¸ä»–äººäº¤æµä½ çŸ¥é“çš„å†…å®¹æ˜¯ä¸€é¡¹éå¸¸å¼ºå¤§çš„æŠ€èƒ½ã€‚è¿™ä¼šä½¿ä½ æ›´åŠ ä¸“ä¸šï¼Œä¹Ÿä¼šè®©ä½ åœ¨å·¥ä½œæ—¶æ›´åŠ è½»æ¾ï¼Œå› ä¸ºé€šè¿‡æ•™æˆé¢„åˆ†äº«èƒ½è®©ä½ åœ¨ä½ çš„é¢†åŸŸå†…æ›´åŠ è‡ªä¿¡ã€‚</p>\n<h3 id=\"å…¶å®ƒæ€è€ƒ\"><a href=\"#å…¶å®ƒæ€è€ƒ\" class=\"headerlink\" title=\"å…¶å®ƒæ€è€ƒ\"></a>å…¶å®ƒæ€è€ƒ</h3><p>ç”„åˆ«æŸç¼šä½ çš„å¤–å› ã€‚ æ˜¯é’±å—ï¼Ÿæ˜¯å¿µå¤´å—ï¼Ÿæ˜¯æ‰§è¡ŒåŠ›å—ï¼Ÿæ˜¯æ—¶é—´å—ï¼Ÿæ˜¯ä»€ä¹ˆé˜»ç¢äº†ä½ å®Œæˆ 2 å€ï¼Œ4 å€ç”šè‡³ 10 å€äºæŒ¡å¢™ä½ çš„æˆå°±ï¼Ÿ</p>\n<p>ç™½æ—¥æ¢¦æœ‰æ—¶å€™è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ å¦‚æœä½ æœ‰æ›´å¤šçš„èµ„æºå¯ä»¥ç”¨ï¼Ÿå¦‚æœä½ æ¯å‘¨æœ‰é¢å¤– 500 å—é’±ä½ è¦åšä»€ä¹ˆï¼Ÿé‚£ä¹ˆ 1000 å—ï¼Œ2000 å—ï¼Œ5000 å—å–ƒï¼Ÿå¦‚æœä½ ä»å¤´å†æ¥ï¼Œä½ ä¼šåšä»€ä¹ˆä¸ä¸€æ ·çš„äº‹å„¿å—ï¼Ÿå¦‚æœä½ åªç”¨å·¥ä½œå½“å‰æ—¶é—´çš„ä¸€åŠï¼Ÿå¦‚æœä½ åšäº†ä½ å½“å‰ç›®æ ‡å®Œå…¨ç›¸åçš„ç»“æœä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>\n<p>æ¢ä½æ€è€ƒã€‚ å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå¸‚åœºè¥é”€å°±æ˜¯å…³äºæ¢ä½æ€è€ƒã€‚ä¸ºä»€ä¹ˆäººä»¬è¦ç”¨ä½ çš„äº§å“è€Œä¸æ˜¯å…¶å®ƒçš„ï¼Ÿä¸ºä»€ä¹ˆäººä»¬å…³ç³»ä¸€äº›ç‰¹å®šçš„å†…å®¹æ•°æ®ï¼Ÿä¸ºä»€ä¹ˆåˆ«äººè¦é›‡ä½£ä½ ï¼Ÿä½ æœ‰ä»€ä¹ˆä»·å€¼ï¼Œç‰¹ç‚¹å€¼å¾—åˆ«äººæ³¨æ„ï¼Ÿ</p>\n<p>äº†è§£è¡Œä¸šå·¥ä½œå¸‚åœºã€‚ æˆ‘å°½é‡é¿å…è¿™ä¸ªå¾ˆä¹…äº†ï¼Œå› ä¸ºæˆ‘å–œæ¬¢æˆ‘ç°åœ¨å·¥ä½œçš„åœ°æ–¹ï¼Œè€Œä¸”å“ªæ€•æœ‰æµè§ˆå…¶ä»–å·¥ä½œèŒä½ä¿¡æ¯çš„å¿µå¤´éƒ½æ„Ÿè§‰å¯æ€•ã€‚ä½†äº†è§£å®æ—¶è¡Œä¸šåŠ¨æ€åŠæ‹›äººä¿¡æ¯æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ä½ å¯ä»¥ç”±æ­¤è§„åˆ’ä½ çš„èŒä¸šç”Ÿæ¶¯ï¼Œçœ‹çœ‹å¯¹åº”çš„èŒä½éƒ½éœ€è¦ä»€ä¹ˆæ¡ä»¶ï¼Œè‡ªé—®è‡ªå·±è¿˜å·®ä»€ä¹ˆï¼Œç„¶åå¼¥è¡¥è¿™äº›ä¸è¶³ã€‚è€Œä¸”è¿™äº›è¡Œä¸šä¿¡æ¯ä¹Ÿèƒ½å¤Ÿæä¾›å¯¹ä½ çš„èŒä½æ™‹å‡åŠåŠ è–ªçš„æœ‰æ•ˆä¿¡æ¯ã€‚</p>\n<p>ä¸»äººç¿æ„è¯†ã€‚ è®©ä½ çš„è€æ¿æ›´åŠ ä¿¡ä»»ä½ ï¼Œå¯¹ä½ çš„å»ºè®®æ›´å®¹æ˜“è¯´åŒæ„ã€‚æ¯ä¸ªè€æ¿éƒ½å–œæ¬¢é›‡ä½£èƒ½ç›´æ¥æŠŠæ´»ç»™å¹²å®Œçš„å‘˜å·¥ï¼Œè€Œä¸”è¿‡ç¨‹ä¸å¯»æ±‚ä»»ä½•å»ºè®®ä¸ç®¡ç†ã€‚å½“ä½ å³äº†è§£ä½ çš„é¦–è¦ä»»åŠ¡ä¸ç›®æ ‡æ—¶ï¼Œæ‰§è¡Œè®¡åˆ’å¹¶å®Œæˆã€‚ä½ çš„è€æ¿æ˜¯é›‡ä½£ä½ æ¥å®Œæˆå·¥ä½œçš„ï¼Œä»–å¹¶ä¸æƒ³å’Œä½ ä¸€èµ·åšå‡ºæ¯ä¸€ä¸ªå†³å®šã€‚ï¼ˆå½“ç„¶ä¸€ä¸ªå¥½è€æ¿ä¼šåœ¨æœ€åˆæ•™ä½ ä¸€äº›è®¡åˆ’ä¸èŒè´£å†…å®¹ï¼‰ã€‚å°è¯•æ›¿è€æ¿æ€è€ƒï¼Œåšå‡ºè®¡åˆ’ï¼Œå¹¶ä¸”åªéœ€è¦è®©è€æ¿åšå‡ºåŒæ„æˆ–è€…å¦å†³çš„å†³å®šã€‚</p>\n<p>ç…§é¡¾å¥½è‡ªå·±èº«å¿ƒå¥åº·ã€‚ ä½ çš„å·¥ä½œä¼šå æ®ä½ çš„å¤§éƒ¨åˆ†ç”Ÿæ´»ï¼Œæ‰€ä»¥å°è¯•åšå¥½å®ƒï¼Œä¸¥è‚ƒå¯¹å¾…å®ƒï¼Œäº«å—å…¶è¿‡ç¨‹ï¼Œå¹¶ä¸æ–­æŒ‘æˆ˜è‡ªæˆ‘ã€‚ä½†æ˜¯å¦‚æœä½ å‘ç°ä½ ç²¾åŠ›è€—å°½ï¼Œèº«å¿ƒç–²æƒ«ï¼Œè¿™æ—¶å€™ä¸è¦å†è‡ªå·±å‚¬çœ å¼ºæ’‘ä¸‹å»äº†ã€‚æ¯•ç«Ÿï¼Œä½ æ‰æ˜¯ä½ ç”Ÿæ´»ä¸­æœ€é‡è¦çš„äººï¼Œç…§é¡¾å¥½ä½ è‡ªå·±ã€‚</p>\n<div class=\"tip\"><br>æœ¬æ–‡è½¬è½½è‡ª: <a href=\"https://moyu.io/2017/10/advices-from-my-supervisor/\" target=\"_blank\" rel=\"noopener\">MOYU</a>ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚<br></div>\n","site":{"data":{}},"excerpt":"<p>æœ¬æ–‡ç¿»è¯‘è‡ª <a href=\"https://www.reddit.com/r/startups/comments/74pms1/my_manager_who_i_loved_recently_left_my_company_i/\" target=\"_blank\" rel=\"noopener\">Reddit</a> ä¸Šçš„ä¸€ç¯‡æ–‡ç« ã€‚å…¶ä¸»è¦å†…å®¹ä¸ºä¸€åèŒå·¥è®°å½•äº†ä»–ä¸å…¶å·²ç¦»èŒçš„ä¸»ç®¡çš„ä¸€å¯¹ä¸€äº¤æµã€‚å…¶ä¸­æ€»ç»“äº†å¤§é‡å…³äºèŒä¸šç”Ÿæ¶¯ï¼Œå·¥ä½œå†…å®¹ï¼Œäººé™…å…³ç³»ï¼Œè‡ªæˆ‘æˆé•¿çš„å»ºè®®ã€‚</p>","more":"<h3 id=\"é¦–è¦ä»»åŠ¡\"><a href=\"#é¦–è¦ä»»åŠ¡\" class=\"headerlink\" title=\"é¦–è¦ä»»åŠ¡\"></a>é¦–è¦ä»»åŠ¡</h3><p><strong>ç¡®å®šå¹¶ä¸“æ³¨äºä½ çš„é¦–è¦ä»»åŠ¡ â€“ å¦‚æœä¸ï¼Œé‚£ä¹ˆä½ æ•´å¤©åœ¨å¹²ä»€ä¹ˆï¼Ÿ</strong></p>\n<p>ä¼˜å…ˆä»»åŠ¡çœŸçš„æ˜¯æœ€é¦–è¦ä»»åŠ¡çš„å—ï¼Ÿ å½“å‰ä½ éœ€è¦åšå¾—æœ€ä¸ºé‡è¦çš„äº‹æ˜¯ä»€ä¹ˆï¼Ÿå¦‚æœä½ ä¸èƒ½å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆä½ å°±åº”è¯¥åœä¸‹æ‰‹å¤´çš„æ‰€æœ‰å·¥ä½œç„¶åå…ˆå¼„æ¸…æ¥šä½ çš„ç­”æ¡ˆã€‚æœ‰æ˜ç¡®çš„ç­”æ¡ˆèƒ½è®©ä½ æ›´åŠ æ˜ç¡®ç›®æ ‡ä¸ä¸“æ³¨ã€‚æ²¡æœ‰æ˜ç¡®çš„ç­”æ¡ˆå¾€å¾€ä¼šå¯¼è‡´ä½ ç»å¸¸åœ¨åšä¸€äº›å¹¶ä¸é‡è¦çš„äº‹å¹¶ä¸”æµªè´¹å¤§é‡å®è´µçš„æ—¶é—´ã€‚</p>\n<p>æ¯å¤©æ€»ä¼šæœ‰æºæºä¸æ–­éœ€è¦åšçš„äº‹å„¿ã€‚äººä»¬å¸¸ä¼šå€¾å‘äºå…ˆåšç®€å•ã€æœ‰è¶£æˆ–ç†Ÿæ‚‰çš„ä»»åŠ¡ã€‚ä½†é•¿è¿œæ¥çœ‹è¿™æ˜¯ä¸€ä¸ªé™·é˜±ã€‚å®Œæˆé¦–è¦ä»»åŠ¡ 5%-10% çš„å·¥ä½œé‡æ¯”åšå¤§é‡å¯¹ç›®æ ‡æ— ç›Šçš„ä»»åŠ¡æ›´å¥½ã€‚</p>\n<blockquote>\n<p>å¾€å¾€è‡ªå·±è®¤ä¸ºåº”è¯¥ä¼˜å…ˆåšçš„å·¥ä½œå…¶å®å¹¶ä¸æ˜¯å½“å‰ç›®æ ‡çš„é¦–è¦ä»»åŠ¡</p>\n</blockquote>\n<p>ä½ è´Ÿè´£ä»€ä¹ˆï¼Ÿ ä¼ä¸šä¸­çš„æ¯ä¸ªäººéƒ½åº”è¯¥è´Ÿè´£ä¸€å®šçš„å·¥ä½œã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œå®ƒåº”è¯¥æ˜¯ä¸ä½ çš„é¦–è¦ç›®æ ‡ç›¸å…³çš„åº¦é‡æŒ‡æ ‡ã€‚å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆä½ å°±åº”è¯¥å’Œä½ çš„ä¸»ç®¡æˆ–è€…è€æ¿å¥½å¥½è°ˆä¸€è°ˆæ¥ç¡®å®šä½ çš„é¦–è¦ä»»åŠ¡ã€‚å½“ä½ ç¡®ç«‹å¥½ä½ çš„é¦–è¦ä»»åŠ¡åï¼Œä½ è¿˜ä¼šä¿è¯ä½ å·²äº†è§£äº†è¶³å¤Ÿçš„ä¿¡æ¯æ¥æå‡è¿™ä¸ªæŒ‡æ ‡ã€‚</p>\n<p>æŒæ§å¥½ä½ çš„è´Ÿè´£èŒƒå›´ã€‚ ä¸€èˆ¬äººä»¬éƒ½ä¼šæƒ³å–„äºå®Œæˆä»–ä»¬çš„å·¥ä½œã€‚å¬èµ·æ¥å¾ˆæ˜æ˜¾ï¼Œä½†æœ‰æ—¶å€™ç¯å¢ƒä¼šè¯±æƒ‘ä½ å»åšä¸€äº›æ— å…³ç´§è¦çš„äº‹æƒ…ã€‚è¿™æ—¶å€™å°±å€¼å¾—æ³¨æ„äº†ï¼Œè¿”å›å»çœ‹ç¬¬ä¸€æ¡ â€“ ä¿æŒé¦–è¦ä»»åŠ¡çš„ä¼˜å…ˆã€‚</p>\n<p>ç²¾ç¡®ä½ çš„ç›®æ ‡ã€‚ å¦‚æœç›®æ ‡æœ‰ç‚¹æ¨¡ç³Šï¼Œç©ºå‡ºä¸€ç‚¹æ—¶é—´æ¥ç¡®ç«‹å®ƒçš„ç²¾ç¡®æ€§ã€‚ä¸è¦å»åšè¾ƒä¸ºæ¨¡ç³Šçš„å·¥ä½œ â€“ å®ƒä»¬å¸¸å¸¸ä¼šä»¤äººåˆ†å¿ƒå’Œåšä¸€äº›è¶…å‡ºç›®æ ‡èŒƒå›´çš„äº‹ã€‚è¦å­¦ä¼šé‰´åˆ«è‡ªå·±æ€è€ƒï¼Œæ–‡å­—ï¼ŒåŠäº¤æµä¸­çš„æ¨¡ç³Šåœ°å¸¦ï¼Œç„¶åæŠŠè¿™äº›æ¨¡ç³Šéƒ½æ¶ˆé™¤æ‰ï¼Œä½¿ä¹‹æ¸…æ™°æ˜äº†ã€‚</p>\n<h3 id=\"é«˜æ•ˆç®¡ç†\"><a href=\"#é«˜æ•ˆç®¡ç†\" class=\"headerlink\" title=\"é«˜æ•ˆç®¡ç†\"></a>é«˜æ•ˆç®¡ç†</h3><p><strong>æŠŠè‡ªå·±å½“åšå®è´µä¸”é‡è¦çš„èµ„æºä¸€æ ·ç®¡ç†</strong></p>\n<p>ä¸è¦ä¸æ‡‚è£…æ‡‚ã€‚ å¯¹è‡ªå·±è¦å¦è¯šç›¸å¾…ï¼Œå¯¹è‡ªå·±æœ‰æ¸…æ™°çš„è‡ªæˆ‘è®¤è¯†èƒ½è®©ä½ æ›´å¿«çš„å­¦ä¹ å’Œæå‡ã€‚å¦‚æœä½ æŠ±ç€å¦è¯šçš„å¿ƒæ€ä¸ä»–äººäº¤æµï¼Œåˆ«äººä¹Ÿä¼šå¦è¯šå¯¹å¾…ä½ ï¼Œç”±æ­¤ä¸€ä¸ªèˆ’é€‚å¥åº·çš„äº¤æµç¯å¢ƒå°±å»ºç«‹èµ·æ¥äº†ï¼Œå¹¶ä¸”ä¸æ–­çš„å½±å“ç€å‘¨å›´çš„äººã€‚</p>\n<p>åˆ¶å®šè®¡åˆ’å¹¶æ‰§è¡Œã€‚ æˆ‘å°æ—¶å€™éå¸¸è®¨åŒæ—¥å†å’Œæ—¶é—´è¡¨ï¼Œå¹¶ä¸”èŠ±è´¹äº†å¤§é‡æ—¶é—´åº”ä»˜å„ç§æˆªè‡³æ—¥æœŸçš„æ½œåœ¨å‹åŠ›ã€‚ä½†äº‹å®æ˜¯ï¼šæ— è®ºè®¨åŒè¿˜æ˜¯å–œæ¬¢è®¡åˆ’ï¼Œæˆ‘ä»¬åªæœ‰æœ‰é™çš„æ—¶é—´å’Œæ— å°½çš„ä»»åŠ¡éœ€è¦åšï¼Œè¿™äº›éƒ½ä¸ä¼šéšç€æˆ‘ä»¬çš„ä¸»è§‚æ„è¯†è€Œæ”¹å˜ã€‚æ²¡æœ‰è‰¯å¥½çš„è®¡åˆ’ï¼Œæˆ‘ä»¬æœ€ç»ˆä¼šæ— ä¼‘æ­¢çš„å·¥ä½œã€‚å¦‚æœä½ ä¸ä¸»åŠ¨æå‰å†³å®šä½ åº”è¯¥æ€ä¹ˆèŠ±è´¹ä½ å¾—æ—¶é—´å’Œç²¾åŠ›ï¼Œé‚£ä¹ˆä¼šæœ‰å…¶ä»–çš„äº‹æƒ…ä¼šå¸®ä½ åšå†³å®š â€“ è¢«åˆ«äººæ‰“æ–­æˆ–è€…ä¸€äº›æ— å…³ç´§è¦çš„ä»»åŠ¡ï¼ˆå®ƒä»¬éƒ½ä¼šè®©ä½ ä¸ç”±è‡ªä¸»çš„èŠ±æ—¶é—´å»å¤„ç†ï¼‰ã€‚</p>\n<p>ç»è¿‡å¤šå¹´çš„åæ€å’Œæ‘‡æ‘†ï¼Œæˆ‘é€æ¸æ„è¯†åˆ°æˆ‘çš„é—®é¢˜å¹¶éæ˜¯æŒ‡å®šè®¡åˆ’ï¼Œè€Œä¸”è¢«åŠ¨çš„å»åšä¸€äº›æˆ‘ä¸æƒ³åšçš„äº‹å„¿ã€‚æˆ‘åªæ˜¯æ½œæ„è¯†çš„å¯¹æ—¥å†ï¼Œè®¡åˆ’æœ‰ç€åæŠ—æ€åº¦ã€‚å¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œè¿™éœ€è¦èŠ±è´¹å¤§é‡ç²¾åŠ›å»æ¶ˆé™¤è¿™äº›å½±å“ã€‚å¼€å§‹åˆ¶å®šä¸€äº›ç®€å•çš„è®¡åˆ’ç„¶åå®Œæˆã€‚å†™ä¸‹ä¸€äº›ä½ èƒ½ 5 åˆ†é’Ÿå†…å®Œæˆçš„äº‹ï¼Œç„¶åæ‰§è¡Œï¼Œå®Œæˆã€‚åå¤å¦‚æ­¤è®¡åˆ’æ‰§è¡Œï¼Œè®¡åˆ’æ‰§è¡Œï¼Œç›´åˆ°ä½ åšçš„è¶Šæ¥è¶Šå¥½ï¼Œç„¶åé€æ¸åŠ å¤šæ—¶é—´ã€‚å†°å†»ä¸‰å°ºéä¸€æ—¥ä¹‹å¯’ï¼Œé€šè¿‡ä¸æ–­ç»ƒä¹ åŠåŠ å¤§ä»»åŠ¡é‡åŠæ—¶é—´ï¼Œä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œå°±åƒç©æ¸¸æˆä¸€æ ·ã€‚å½“ä½ å¼€å§‹ä¹ æƒ¯è¿™æ ·çš„å¾ªåºæ¸è¿›æ–¹å¼æ—¶ï¼Œä¼šå˜å¾—è¶Šæ¥è¶Šæœ‰è¶£å’Œä»¤äººæ¿€åŠ¨ã€‚ä½ å°†ä¼šè¶Šæ¥è¶Šäº†è§£ä½ è‡ªå·±åŠä½ å‘¨å›´çš„ä¸–ç•Œã€‚</p>\n<p>åŠ³é€¸ç»“åˆã€‚ ä½ æ˜¯ä¸€é¡¹å®è´µçš„èµ„æºï¼Œå¹¶ä¸”éœ€è¦ä¼‘æ•´ã€‚ä¸è¦å¿«é€Ÿè€—å°½ç²¾åŠ›ï¼Œè¦å­¦ä¼šç»†æ°´é•¿æµï¼Œå½“åšé©¬æ‹‰æ¾æ¥çœ‹ã€‚ä½†æˆ‘å¼€å§‹å·¥ä½œæ—¶ï¼Œæˆ‘æ„Ÿè§‰æˆ‘è·å¾—äº†ä¸€ä¸ªéš¾å¾—å¯è´µçš„æœºä¼šã€è§‰çš„è‡ªå·±è¿˜ä¸å¤Ÿæ ¼ã€é¡¶ç€å‹åŠ›ã€å¸¸å¸¸åŸ‹å¤´è‹¦å¹²ã€ä½†è¿˜æ„Ÿåˆ°è‡ªå·±è½åäºå·¥ä½œï¼Œç„¶åæˆ‘å¼€å§‹æ‹–å»¶å’Œå»¶æœŸç›´åˆ°æˆ‘ä¼‘äº†ä¸ªå‡ã€‚ç°åœ¨å›è¿‡å¤´æ¥çœ‹ï¼Œè¿™çœŸæ˜¯ä¸ªæ»‘ç¨½çš„è¡Œä¸ºï¼Œè€Œä¸”æˆ‘éå¸¸åæ‚”ã€‚å¦‚æœå½“åˆæˆ‘æŠ—ä½å‹åŠ›å’Œæå‰å®‰æ’å¥½æ—¶é—´ï¼Œæˆ‘ä¼šæ›´åŠ å¼€å¿ƒï¼Œå¥åº·ï¼Œå®Œæˆæ›´å¤šå¾—å·¥ä½œã€‚</p>\n<p>å¾æ—¥ä¸‰çœå¾èº«ã€‚ åˆ†æè¿‡å»çš„å·¥ä½œï¼Œå“ªäº›å®Œæˆäº†ï¼Œå“ªäº›æ²¡æœ‰ï¼Œå“ªäº›æœ€ç»ˆæ•ˆæœä¸é”™ï¼Œå“ªäº›å¤±è´¥â€¦â€¦ ä½ åº”è¯¥å®šæœŸç‹¬ç«‹è¿™æ ·å›é¡¾åˆ†æå·¥ä½œã€‚æˆ‘ç»å¸¸å·æ‡’è®°ç¬”è®°ï¼Œå³ä½¿è®°äº†ä¹ŸåŸºæœ¬ä¸ä¼šå›å¤´å†çœ‹ã€‚å¦‚æœæˆ‘èƒ½é‡æ–°æ¥è¿‡ï¼Œæˆ‘ä¼šæ›´åŠ ç³»ç»Ÿçš„ä¸¥äºåˆ©å·±çš„å¯¹å¾…æ­¤äº‹ã€‚</p>\n<blockquote>\n<p>é€šè¿‡å®šæœŸå¤ç›˜èƒ½å¤Ÿä¸æ–­å¼ºåŒ–è‡ªå·±å¯¹ä¸€ä¸ªé¡¹ç›®çš„ç†è§£ï¼Œå¦‚æœé¡¹ç›®è¶Šæ»šè¶Šå¤§ï¼Œè¿˜æ˜¯ä¼šå¯¹é¡¹ç›®çš„æŒæ§æ¸¸åˆƒæœ‰ä½™ã€‚å®šæœŸçš„å¤ç›˜è¿˜èƒ½èµ·åˆ°æ‰¾å‡ºå¼±é¡¹ï¼Œå¼¥è¡¥ä¸è¶³ï¼Œå¸å–ç»éªŒï¼Œè®©è‡ªå·±ä¹‹åèƒ½å¤Ÿæ›´ä¼˜å¼‚çš„å®Œæˆä»»åŠ¡ã€‚å¾ˆå¤šå®è´µçš„ç»éªŒï¼Œç»å†äº†ä¸€æ¬¡å°±å®Œäº†çš„äººç®—ä½œæ™®é€šäººï¼›ç»å†äº†ä¸€æ¬¡å¹¶å¸å–ç»éªŒåœ¨ä»¥åé‡åˆ°åŒæ ·é—®é¢˜èƒ½å¤Ÿé€šè¿‡ç»éªŒè§£å†³çš„äººç®—ä½œä¼˜ç§€çš„äººï¼›ç»å†äº†ä¸€æ¬¡ä¸ä»…å¸å–äº†ç»éªŒï¼Œè¿˜èƒ½åšåˆ°å¤ç›˜ä¸¾ä¸€åä¸‰çš„èƒ½ç§°ä¹‹ä¸ºéå¸¸æœ‰å‰æ™¯çš„äººæ‰äº†</p>\n</blockquote>\n<p>è¡¨è¿°ä½ çš„è¿›åº¦ã€‚ è¿™åœ¨å¤šä¸ªå±‚é¢ä¸Šå‡éå¸¸æœ‰å¸®åŠ©ã€‚é¦–å…ˆï¼Œåªéœ€è¦ç»™é«˜å¼ºåº¦å·¥ä½œçš„å¤§è„‘è…¾ç‚¹ä¼‘æ¯æ—¶é—´ï¼ŒæŠŠå·¥ä½œè¿›åº¦æ‰‹å†™åœ¨çº¸ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ä¹ æƒ¯ã€‚è¿™ä¼šå¼ºè¿«ä½ æŠŠæƒ³è¦è¡¨è¾¾çš„ä¸œè¥¿è¡¨è¿°å‡ºæ¥ã€‚ä½ æƒ³è¦è¾¾æˆä»€ä¹ˆç›®æ ‡ï¼Ÿä½ æ˜¯å¦‚æœåšå‡ºå†³ç­–çš„ï¼Ÿå½“ä½ åœ¨ç”¨æ–‡å­—è¡¨è¿°ä½ çš„è¿›åº¦çš„æ—¶å€™ï¼Œä½ è¿˜èƒ½é¡ºå¸¦åˆ†æä¸‹ã€‚ä½ èƒ½æ‰¾å‡ºå¼±é¡¹å¹¶å¼ºåŒ–å®ƒä»¬ã€‚è¿™å°±åƒæ˜¯åœ¨çœ‹è‡ªå·±çš„å›æ”¾ä¸€æ ·ï¼Œèƒ½å¤Ÿæ³¨æ„åˆ°æ›´å¤šçš„ç»†èŠ‚ã€‚å½“ç„¶ï¼Œä½ è¿˜èƒ½ä¸ä»–äººåˆ†äº«ä½ çš„è¡¨è¿°ï¼Œå¹¶æ”¶åˆ°åé¦ˆï¼Œè¿™åˆæ˜¯æ›´è¿›ä¸€æ­¥çš„æå‡äº†ã€‚</p>\n<blockquote>\n<p>é€šè¿‡å…·ä½“çš„è¯­è¨€æˆ–è€…æ–‡å­—è¡¨è¿°è‡ªå·±å·¥ä½œçš„è¿›åº¦ï¼Œå¯ä»¥æŠŠå¤§è„‘é‡ŒæŠ½è±¡çš„æ€è€ƒå…·ä½“åŒ–ï¼Œå¹¶ç”±æ­¤è§‚å¯Ÿç»†èŠ‚æ‰¾å‡ºé—®é¢˜æˆ–è€…å¼±ç‚¹å¹¶å¼ºåŒ–ã€‚é€šè¿‡å…·ä½“çš„è¡¨è¿°èƒ½å¤Ÿå¢å¼ºé€»è¾‘èƒ½åŠ›ï¼Œé”»ç‚¼è¡¨è¾¾èƒ½åŠ›ä¸æ›´æ¸…æ™°çš„è®¤è¯†è‡ªå·±åšçš„äº‹å„¿ã€‚</p>\n</blockquote>\n<p>ä¸ºè‡ªå·±è´Ÿè´£ã€‚ å³ä½¿ä½ æœ‰éå¸¸ä¼˜ç§€çš„ä¸»ç®¡ï¼Œä½†æ˜¯ä½ æœ€ç»ˆä¼šä¸ºè‡ªå·±çš„å­¦ä¹ ã€æ‰§è¡Œå’Œæˆé•¿è¿›è¡Œè´Ÿè´£ã€‚å›é¡¾ä»¥å‰ï¼Œæˆ‘è§‰å¾—æˆ‘è‡ªå·±èŠ±è´¹äº†ç¬¬ä¸€ä¸ª 3-4 å¹´åœ¨èˆ’é€‚åŒºï¼Œä»ä¸ä¸»åŠ¨å‡ºå‡»ã€‚æˆ‘çš„ç¡®æœ‰ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„ä¸»ç®¡ï¼Œç»™æˆ‘äº†å¤§é‡çš„ç›®æ ‡ã€å»ºè®®å’Œè§„åˆ’ï¼Œä¹Ÿè®¸ä»–ä»¬è¿˜ç»™æˆ‘å‰§é€äº†ä¸€äº›ä¿¡æ¯ã€‚ä½†æˆ‘èŠ±äº†å‡ å¹´çš„æ—¶é—´æ‰å‘ç°ã€æˆ‘å¿…é¡»ç»™è‡ªå·±è®¾å®šæ›´é«˜çš„ç›®æ ‡ï¼Œå¹¶åŠªåŠ›è¾¾æˆã€ã€‚é™¤éä½ æœ‰ä¸€ä¸ªéå¸¸ç–¯ç‹‚çš„è€æ¿æˆ–è€…ä¸»ç®¡åˆ†é…ç»™ä½ é«˜éš¾åº¦å·¥ä½œï¼Œä¸ç„¶æ²¡æœ‰äººèƒ½æ¯”ä½ æ›´é€‚åˆæŠŠè‡ªå·±æ¨åˆ°æé™ã€‚ï¼ˆæˆ‘å¹¶ä¸æ˜¯æš—ç¤ºå¤§é‡çš„å·¥ä½œå’Œå¤§é‡çš„æ—¶é—´ï¼Œæˆ‘æƒ³è¡¨è¾¾çš„æ˜¯è·³å‡ºä½ çš„èˆ’é€‚åŒºï¼ŒæŒ‘æˆ˜è‡ªå·±è¾¾åˆ°ä¸‹ä¸€ä¸ªé«˜åº¦ã€‚å°è¯•æ–°é²œäº‹ç‰©ï¼Œå­¦ä¹ è¶…å‡ºä½ å·¥ä½œèŒƒç•´çš„æ–°ä¸œè¥¿ç­‰ç­‰ï¼‰</p>\n<p>èŠ±æ—¶é—´å­¦ä¹ ã€‚ å½“ä½ å‘ç°ä¸€äº›å’Œä½ å·¥ä½œç›¸å…³çš„å¹²è´§èµ„æ–™æ—¶ï¼Œæ ‡æ³¨ä¸€ä¸‹ç¨åå†çœ‹ï¼Œç„¶åå®šæœŸå»æµè§ˆå­¦ä¹ è¿™äº›å­˜è´§ã€‚æŒ‰å‘¨æ¥è§„åˆ’æ˜¯éå¸¸ä¸é”™çš„ã€‚å¦‚æœä½ å·²ç»åœ¨å¤§é‡çš„é˜…è¯»å’Œå­¦ä¹ äº†ï¼Œé‚£ä¹ˆå’Œå…¶ä»–äººåˆ†äº«ä¸‹ä½ çš„å¿ƒå¾—ã€‚è¿™ä¼šå¸®åŠ©ä½ æ›´åŠ æ·±åˆ»çš„ç†è§£ä½ å­¦åˆ°çš„ä¸œè¥¿ã€‚å»ºè®®è®¾ç½®æœˆåº¦æˆ–è€…å­£åº¦å­¦ä¹ ç›®æ ‡ã€‚</p>\n<blockquote>\n<p>å­¦ä¹ çš„æœ€é«˜å½¢å¼ä¾¿æ˜¯ä¼ æˆï¼›ä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œï¼Œè¦æƒ³é€šè¿‡ 7 å¤©å­¦ä¼š XXXï¼Œ21 å¤©å­¦ä¼š XXX çš„è¿™ç±»çˆ†æ¬¾æ— å¼‚äºç—´äººè¯´æ¢¦ï¼Œè¿™äº›é¸¡æ±¤å¾€å¾€åªèƒ½æ•™ä¼šä½ æœ€åŸºç¡€çš„ hello, world. åˆç†çš„è®¾å®šå­¦ä¹ è®¡åˆ’ä¸ç›®æ ‡æŒ‰éƒ¨å°±ç­çš„å­¦ä¹ ä¸ä»…èƒ½ç¼“å’Œå­¦ä¹ å‹åŠ›è€Œä¸”èƒ½æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚</p>\n</blockquote>\n<h3 id=\"ç”¨å¿ƒæ²Ÿé€š\"><a href=\"#ç”¨å¿ƒæ²Ÿé€š\" class=\"headerlink\" title=\"ç”¨å¿ƒæ²Ÿé€š\"></a>ç”¨å¿ƒæ²Ÿé€š</h3><p><strong>ä½ åœ¨å›¢é˜Ÿä¸­çš„å½±å“åŠ›æ˜¯éå¸¸é‡è¦çš„</strong></p>\n<p>å°½æ—©æ²Ÿé€šï¼Œç»å¸¸äº¤æµã€‚ æ—©æœŸï¼Œæˆ‘éå¸¸å®³ç¾å¹¶ä¸”ç»å¸¸ç‹¬è‡ªä¸€äººè§£å†³æ‰€æœ‰é—®é¢˜ã€‚å¦‚æœæˆ‘æ¬ ç€æŸäººä¸€äº›å·¥ä½œï¼Œæˆ‘ä¼šå°è¯•æŠŠæ‰€æœ‰ä»»åŠ¡éƒ½åšå®Œäº†å†è½¬äº¤ç»™ä¸‹ä¸€ä¸ªäººã€‚å¦‚æœæˆ‘é‡åˆ°å›°éš¾äº†ï¼Œæˆ‘è¦ä¹ˆä¼šå°æ¿€åŠ¨è¦ä¹ˆæ‹–å»¶ä¸€é˜µç›´åˆ°æˆ‘æ²¡æ—¶é—´äº†ï¼Œç„¶åä¼šæ…Œå¼ çš„åšå®Œå·¥ä½œã€‚å±•ç¤ºä½ çš„å·¥ä½œï¼Œåˆ†äº«ä½ çš„è‰å›¾å’Œè‰ç¨¿ï¼Œä½ éœ€è¦å’Œä½ çš„å›¢é˜Ÿå»ºç«‹èæ´½çš„å…³ç³»å’Œä¿¡ä»»ï¼Œå¦‚æ­¤ä½ æ‰ä¼šæ„Ÿåˆ°èˆ’é€‚çš„å»æ²Ÿé€šåˆ†äº«ã€‚æ—©æœŸçš„åé¦ˆå¯¹æ¯”æ™šæœŸçš„åé¦ˆæ›´åŠ æœ‰ç”¨å¹¶ä¸”æ›´å…·æœ‰é«˜æ‰§è¡Œåº¦ã€‚æœ‰æ—¶å€™åªéœ€è¦ç®€å•çš„é—®åŒäº‹å‡ ä¸ªé—®é¢˜æˆ–è€…äº¤æµä¸‹çœ‹æ³•å°±ä¼šå¾—åˆ°ä¸€ä¸ªæ„æƒ³ä¸åˆ°çš„è§£å†³ä½ é—®é¢˜çš„æ–¹æ³•ã€‚</p>\n<p>ææœ‰æ•ˆçš„é—®é¢˜ã€‚ åœ¨ä½ å°šæœªæ„è¯†åˆ°çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰äº‹éƒ½ä¸€å®šç¨‹åº¦ä¸Šæ˜¯æ¨¡ç³Šçš„ã€‚ç”±æ­¤å°è¯•æŠŠäº‹æƒ…ç»™ç²¾ç¡®åŒ–ã€‚å¯¹æœŸæœ›çš„ç»“æœéå¸¸æ˜ç¡®æ˜¯éå¸¸é‡è¦çš„ã€‚äººä»¬é€šå¸¸å¯¹ä¸€ä¸ªåœºæ™¯æœ‰ä¸åŒçš„æœŸå¾…ï¼Œä¸åŒçš„ç†è§£ â€“ è¿™äº›éƒ½æ˜¯æ‘©æ“¦å’ŒæŒ«æŠ˜çš„æ¥æºã€‚æ‰€ä»¥ï¼Œè¿™éå¸¸å€¼å¾—èŠ±è´¹ä¸€å®šçš„æ—¶é—´å’Œç²¾åŠ›ç¡®ä¿æ¯ä¸ªäººéƒ½å¯¹ä½ åšçš„äº‹æƒ…ä¿æŒä¸€è‡´çš„ç†è§£ã€‚</p>\n<p>ä¸‰äººè¡Œå¿…æœ‰æˆ‘å¸ˆç„‰ã€‚ çœŸå®çš„ç”Ÿæ´»å¹¶ä¸æ˜¯ä¸€æœ¬ä¹¦ï¼Œä½ åªéœ€è¦ç‹¬è‡ªä¸€äººé˜…è¯»ç†è§£å°±è¡Œäº†ã€‚æœ‰éœ€è¦å°±å¯»æ±‚å¸®åŠ©ï¼Œè¿™ä¹Ÿè®¸åœ¨ä¸åŒçš„å…¬å¸æ–‡åŒ–å’ŒåŒäº‹ä¸ªæ€§ç¨æœ‰ä¸åŒã€‚æœ‰äº›äººä¹Ÿå»ä¼šå¼ºè¡Œæ‰“æ‰°ä»–äººï¼Œä½†æˆ‘èƒ½è§‰å¯Ÿåˆ°é‚£äº›èªæ˜ï¼Œæœ‰ä¿®å…»çš„äººèƒ½å°å¿ƒé¿å…æ‰“æ‰°åˆ°ä»–äººçš„æƒ…å†µä¸‹å¯»æ±‚å¸®åŠ©ã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ å¯»æ±‚å¸®åŠ©çš„æ—¶å€™ï¼Œè¦ç®€æ´æ˜ç¤¼è²Œçš„æå‡ºã€å°å¼ºï¼Œå½“ä½ æœ‰ç©ºçš„æ—¶å€™æ¥å¸®åŠ©æˆ‘ä¸‹ï¼Œæˆ‘éœ€è¦æ—è§‚è€…æ¥çœ‹çœ‹æˆ‘çš„ PPT æ˜¯å¦æœ‰ä»»ä½•å€¼å¾—æå‡çš„åœ°æ–¹ã€ã€‚ä¸è¦å¼ºè¡Œæ‰“æ–­åˆ«äººçš„å·¥ä½œï¼Œé‚£æ˜¯ä¸ç¤¼è²Œçš„ã€‚å½“ä½ æœ‰ç¤¼è²Œçš„æå‡ºæ˜ç¡®çš„å¸®åŠ©éœ€æ±‚çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™äººä»¬ä¼šä¸åœ¨æ„åˆ†å¿ƒæ¥å¸®åŠ©ä½ ã€‚</p>\n<p>å¿ƒæ€è¦ç§¯æå‘ä¸Šã€‚ è¿™ä¸ä»…å¯¹è‡ªå·±ï¼Œå¯¹æ•´ä¸ªå·¥ä½œæ°›å›´éƒ½éå¸¸æœ‰å¸®åŠ©ï¼</p>\n<h3 id=\"å°è¯•äº¤é™…\"><a href=\"#å°è¯•äº¤é™…\" class=\"headerlink\" title=\"å°è¯•äº¤é™…\"></a>å°è¯•äº¤é™…</h3><p><strong>å…¬å¸å’Œç»„ç»‡éƒ½æ˜¯ç”±äººæ„æˆçš„ï¼Œå°è¯•ä¸ä»–äººå»ºç«‹å…³ç³»</strong></p>\n<p>åä½œå·¥ä½œã€‚ æœ‰æ—¶å€™éå¸¸å®¹æ˜“é™·å…¥ä¸€ä¸ªå›°å¢ƒï¼šä½ è§‰å¾—è‡ªå·±éœ€è¦å¤„ç†æ‰€æœ‰æ‘†åœ¨ä½ é¢å‰çš„é—®é¢˜ã€‚æ€»ä¼šæœ‰åšä¸å®Œçš„å·¥ä½œï¼Œä½ éœ€è¦æ—¢èƒ½ç»¼è§‚å¤§å±€åˆèƒ½ä¸“æ³¨ç»†èŠ‚ã€‚å»è®¤è¯†ä¸€äº›åšå’Œä½ å·¥ä½œæ€§è´¨å·®ä¸å¤šçš„äººï¼Œè¿™ä¼šå¯¹ä½ çš„å·¥ä½œéå¸¸æœ‰å¸®åŠ©ã€‚äººä»¬çŸ¥é“ä¸€äº›ä¸œè¥¿ï¼Œä»–ä»¬ä¹Ÿè®¸ä¸ä¼šå†™åœ¨åšå®¢é‡Œä½†ä»–ä»¬ä¼šæ„¿æ„å½“é¢æ•™æˆä½ è¿™äº›ä¸œè¥¿ï¼Œå¹¶ä¸”è¿™äº›ä¸œè¥¿å¯èƒ½ä¼šå¯¹ä½ éå¸¸æœ‰ç”¨ã€‚äººä»¬å¯ä»¥å¸®ä½ å¼€é—¨ï¼Œå¯ä»¥å¸®ä½ é¢„å…ˆæŠŠä¸œè¥¿å¤„ç†å¥½ã€‚æœ‰æ—¶å€™ä½ èŠ±è´¹äº†å¤§é‡æ—¶é—´éƒ½æœªè§£å†³çš„é—®é¢˜ï¼Œæ­£å¥½æœ‰äººçš„è„‘è¢‹é‡Œæ—©æœ‰è§£å†³æ–¹æ³•ï¼Œä½ ä¹Ÿè®¸åªéœ€è¦è¯·ä»–ä»¬ä¸€æ¯å’–å•¡å°±å¯ä»¥å¯»æ±‚å¸®åŠ©äº†ã€‚</p>\n<p>æ‹›äººå†…æ¨ã€‚ å³ä½¿ä½ ä¸è´Ÿè´£æ‹›è˜å·¥ä½œï¼Œåˆ—å‡ºä¸€å †ä½ æƒ³è¦å…±åŒå·¥ä½œçš„äººæˆ–è€…æƒ³è¦å­¦ä¹ çš„æ¦œæ ·ç»™ç›¸å…³è´Ÿè´£äººä¹Ÿæ˜¯æœ‰å¸®åŠ©çš„ã€‚</p>\n<p>å°è¯•æ¼”è®²ã€‚ ä¸ä»–äººäº¤æµä½ çŸ¥é“çš„å†…å®¹æ˜¯ä¸€é¡¹éå¸¸å¼ºå¤§çš„æŠ€èƒ½ã€‚è¿™ä¼šä½¿ä½ æ›´åŠ ä¸“ä¸šï¼Œä¹Ÿä¼šè®©ä½ åœ¨å·¥ä½œæ—¶æ›´åŠ è½»æ¾ï¼Œå› ä¸ºé€šè¿‡æ•™æˆé¢„åˆ†äº«èƒ½è®©ä½ åœ¨ä½ çš„é¢†åŸŸå†…æ›´åŠ è‡ªä¿¡ã€‚</p>\n<h3 id=\"å…¶å®ƒæ€è€ƒ\"><a href=\"#å…¶å®ƒæ€è€ƒ\" class=\"headerlink\" title=\"å…¶å®ƒæ€è€ƒ\"></a>å…¶å®ƒæ€è€ƒ</h3><p>ç”„åˆ«æŸç¼šä½ çš„å¤–å› ã€‚ æ˜¯é’±å—ï¼Ÿæ˜¯å¿µå¤´å—ï¼Ÿæ˜¯æ‰§è¡ŒåŠ›å—ï¼Ÿæ˜¯æ—¶é—´å—ï¼Ÿæ˜¯ä»€ä¹ˆé˜»ç¢äº†ä½ å®Œæˆ 2 å€ï¼Œ4 å€ç”šè‡³ 10 å€äºæŒ¡å¢™ä½ çš„æˆå°±ï¼Ÿ</p>\n<p>ç™½æ—¥æ¢¦æœ‰æ—¶å€™è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ å¦‚æœä½ æœ‰æ›´å¤šçš„èµ„æºå¯ä»¥ç”¨ï¼Ÿå¦‚æœä½ æ¯å‘¨æœ‰é¢å¤– 500 å—é’±ä½ è¦åšä»€ä¹ˆï¼Ÿé‚£ä¹ˆ 1000 å—ï¼Œ2000 å—ï¼Œ5000 å—å–ƒï¼Ÿå¦‚æœä½ ä»å¤´å†æ¥ï¼Œä½ ä¼šåšä»€ä¹ˆä¸ä¸€æ ·çš„äº‹å„¿å—ï¼Ÿå¦‚æœä½ åªç”¨å·¥ä½œå½“å‰æ—¶é—´çš„ä¸€åŠï¼Ÿå¦‚æœä½ åšäº†ä½ å½“å‰ç›®æ ‡å®Œå…¨ç›¸åçš„ç»“æœä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>\n<p>æ¢ä½æ€è€ƒã€‚ å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå¸‚åœºè¥é”€å°±æ˜¯å…³äºæ¢ä½æ€è€ƒã€‚ä¸ºä»€ä¹ˆäººä»¬è¦ç”¨ä½ çš„äº§å“è€Œä¸æ˜¯å…¶å®ƒçš„ï¼Ÿä¸ºä»€ä¹ˆäººä»¬å…³ç³»ä¸€äº›ç‰¹å®šçš„å†…å®¹æ•°æ®ï¼Ÿä¸ºä»€ä¹ˆåˆ«äººè¦é›‡ä½£ä½ ï¼Ÿä½ æœ‰ä»€ä¹ˆä»·å€¼ï¼Œç‰¹ç‚¹å€¼å¾—åˆ«äººæ³¨æ„ï¼Ÿ</p>\n<p>äº†è§£è¡Œä¸šå·¥ä½œå¸‚åœºã€‚ æˆ‘å°½é‡é¿å…è¿™ä¸ªå¾ˆä¹…äº†ï¼Œå› ä¸ºæˆ‘å–œæ¬¢æˆ‘ç°åœ¨å·¥ä½œçš„åœ°æ–¹ï¼Œè€Œä¸”å“ªæ€•æœ‰æµè§ˆå…¶ä»–å·¥ä½œèŒä½ä¿¡æ¯çš„å¿µå¤´éƒ½æ„Ÿè§‰å¯æ€•ã€‚ä½†äº†è§£å®æ—¶è¡Œä¸šåŠ¨æ€åŠæ‹›äººä¿¡æ¯æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ä½ å¯ä»¥ç”±æ­¤è§„åˆ’ä½ çš„èŒä¸šç”Ÿæ¶¯ï¼Œçœ‹çœ‹å¯¹åº”çš„èŒä½éƒ½éœ€è¦ä»€ä¹ˆæ¡ä»¶ï¼Œè‡ªé—®è‡ªå·±è¿˜å·®ä»€ä¹ˆï¼Œç„¶åå¼¥è¡¥è¿™äº›ä¸è¶³ã€‚è€Œä¸”è¿™äº›è¡Œä¸šä¿¡æ¯ä¹Ÿèƒ½å¤Ÿæä¾›å¯¹ä½ çš„èŒä½æ™‹å‡åŠåŠ è–ªçš„æœ‰æ•ˆä¿¡æ¯ã€‚</p>\n<p>ä¸»äººç¿æ„è¯†ã€‚ è®©ä½ çš„è€æ¿æ›´åŠ ä¿¡ä»»ä½ ï¼Œå¯¹ä½ çš„å»ºè®®æ›´å®¹æ˜“è¯´åŒæ„ã€‚æ¯ä¸ªè€æ¿éƒ½å–œæ¬¢é›‡ä½£èƒ½ç›´æ¥æŠŠæ´»ç»™å¹²å®Œçš„å‘˜å·¥ï¼Œè€Œä¸”è¿‡ç¨‹ä¸å¯»æ±‚ä»»ä½•å»ºè®®ä¸ç®¡ç†ã€‚å½“ä½ å³äº†è§£ä½ çš„é¦–è¦ä»»åŠ¡ä¸ç›®æ ‡æ—¶ï¼Œæ‰§è¡Œè®¡åˆ’å¹¶å®Œæˆã€‚ä½ çš„è€æ¿æ˜¯é›‡ä½£ä½ æ¥å®Œæˆå·¥ä½œçš„ï¼Œä»–å¹¶ä¸æƒ³å’Œä½ ä¸€èµ·åšå‡ºæ¯ä¸€ä¸ªå†³å®šã€‚ï¼ˆå½“ç„¶ä¸€ä¸ªå¥½è€æ¿ä¼šåœ¨æœ€åˆæ•™ä½ ä¸€äº›è®¡åˆ’ä¸èŒè´£å†…å®¹ï¼‰ã€‚å°è¯•æ›¿è€æ¿æ€è€ƒï¼Œåšå‡ºè®¡åˆ’ï¼Œå¹¶ä¸”åªéœ€è¦è®©è€æ¿åšå‡ºåŒæ„æˆ–è€…å¦å†³çš„å†³å®šã€‚</p>\n<p>ç…§é¡¾å¥½è‡ªå·±èº«å¿ƒå¥åº·ã€‚ ä½ çš„å·¥ä½œä¼šå æ®ä½ çš„å¤§éƒ¨åˆ†ç”Ÿæ´»ï¼Œæ‰€ä»¥å°è¯•åšå¥½å®ƒï¼Œä¸¥è‚ƒå¯¹å¾…å®ƒï¼Œäº«å—å…¶è¿‡ç¨‹ï¼Œå¹¶ä¸æ–­æŒ‘æˆ˜è‡ªæˆ‘ã€‚ä½†æ˜¯å¦‚æœä½ å‘ç°ä½ ç²¾åŠ›è€—å°½ï¼Œèº«å¿ƒç–²æƒ«ï¼Œè¿™æ—¶å€™ä¸è¦å†è‡ªå·±å‚¬çœ å¼ºæ’‘ä¸‹å»äº†ã€‚æ¯•ç«Ÿï¼Œä½ æ‰æ˜¯ä½ ç”Ÿæ´»ä¸­æœ€é‡è¦çš„äººï¼Œç…§é¡¾å¥½ä½ è‡ªå·±ã€‚</p>\n<div class=\"tip\"><br>æœ¬æ–‡è½¬è½½è‡ª: <a href=\"https://moyu.io/2017/10/advices-from-my-supervisor/\" target=\"_blank\" rel=\"noopener\">MOYU</a>ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚<br></div>"},{"title":"æŒç»­é›†æˆ (CI) åŠç®€å•å®è·µ","date":"2018-04-30T01:00:00.000Z","comments":1,"_content":"\nåœ¨è½¯ä»¶å¼€å‘é¢†åŸŸ, ä¸€ç›´æœ‰å¾ˆå¤šæ¯”è¾ƒä¸“ä¸šçš„æœ¯è¯­, æœ¬ç€ç§‘æ™®çš„ç²¾ç¥, æ¥å¡«ä¸€ä¸‹è‡ªå·±çš„ ~~çŸ¥è¯†ç›²åŒº~~ ğŸ˜‚, ä»€ä¹ˆæ˜¯æŒç»­é›†æˆ? å¦‚ä½•åšæŒç»­é›†æˆ? ä¸ºä»€ä¹ˆè¦åšæŒç»­é›†æˆ? å¸¦ç€è¿™äº›é—®é¢˜, æœ¬ç¯‡æ–‡ç« ä¼šç»™ä½ ç­”æ¡ˆ.\n\n<!-- more -->\n\n## What\n\n> æŒç»­é›†æˆï¼ˆè‹±è¯­ï¼šContinuous integrationï¼Œç¼©å†™ CIï¼‰æ˜¯ä¸€ç§è½¯ä»¶å·¥ç¨‹æµç¨‹ï¼Œæ˜¯å°†æ‰€æœ‰è½¯ä»¶å·¥ç¨‹å¸ˆå¯¹äºè½¯ä»¶çš„å·¥ä½œå‰¯æœ¬æŒç»­æäº¤åˆ°å…±ç”¨ä¸»çº¿ï¼ˆmainlineï¼‰çš„ä¸€ç§æªæ–½ã€‚\n\n## Why\n\næŒç»­é›†æˆçš„ç›®çš„ï¼Œå°±æ˜¯è®©äº§å“å¯ä»¥å¿«é€Ÿè¿­ä»£ï¼ŒåŒæ—¶è¿˜èƒ½ä¿æŒé«˜è´¨é‡ã€‚\n\n![image](https://user-images.githubusercontent.com/15377484/39465580-acb719cc-4d56-11e8-9915-2964d5e523c5.png)\n\n## How\n\nå®ƒçš„æ ¸å¿ƒæªæ–½æ˜¯ï¼Œä»£ç é›†æˆåˆ°ä¸»å¹²ä¹‹å‰ï¼Œå¿…é¡»é€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚åªè¦æœ‰ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å¤±è´¥ï¼Œå°±ä¸èƒ½é›†æˆã€‚ä»¥æœ¬æ¬¡ç»™åšå®¢åšæŒç»­é›†æˆä¸ºä¾‹ï¼Œå®ƒçš„æµç¨‹æ˜¯è¿™æ ·å­çš„ï¼š\n\n1. å†™å®Œåšå®¢åï¼Œç›´æ¥ push åˆ° GitHub çš„ `src` åˆ†æ”¯(æˆ‘çš„ `master` åˆ†æ”¯æ˜¯ pages)\n2. CI æœåŠ¡é€šè¿‡é…ç½®æ–‡ä»¶ `.travis.yml` ç›‘å¬å½“å‰ `src` åˆ†æ”¯å‘ç”Ÿå˜åŒ–ï¼Œè§¦å‘ webhook\n3. CI æœåŠ¡å°†å½“å‰é¡¹ç›® clone è¿‡å»ï¼Œæ ¹æ® `.travis.yml` çš„é…ç½®æ‰§è¡Œæµ‹è¯•å’Œæ„å»º\n4. å°†æœ€ç»ˆå¯ä»¥ä½œä¸ºç”Ÿäº§ç¯å¢ƒçš„ä»£ç æ¨é€åˆ°çº¿ä¸Šç¯å¢ƒï¼Œå¹¶ä¸” push å›  `src` åˆ†æ”¯\n\nè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ï¼š\n\n- å‘å¸ƒæ–°æ–‡ç« ï¼Œåªéœ€ push ä¸€æ¬¡åˆ°ä»“åº“ï¼Œå‰©ä¸‹çš„æµ‹è¯•ã€æ„å»ºã€éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒç­‰ï¼ŒCI å¸®æˆ‘è‡ªåŠ¨å®Œæˆã€‚\n- å¿«é€Ÿå‘ç°é”™è¯¯ã€‚æ¯å®Œæˆä¸€ç‚¹æ›´æ–°ï¼Œå°±é›†æˆåˆ°ä¸»å¹²ï¼Œå®šä½é”™è¯¯ä¹Ÿæ¯”è¾ƒå®¹æ˜“ã€‚\n- é˜²æ­¢åˆ†æ”¯å¤§å¹…åç¦»ä¸»å¹²ã€‚å¦‚æœä¸æ˜¯ç»å¸¸é›†æˆï¼Œä¸»å¹²åˆåœ¨ä¸æ–­æ›´æ–°ï¼Œä¼šå¯¼è‡´ä»¥åé›†æˆçš„éš¾åº¦å˜å¤§ã€‚\n\n## More\n\n- [æŒç»­é›†æˆæ˜¯ä»€ä¹ˆ](http://www.ruanyifeng.com/blog/2015/09/continuous-integration.html)\n- [ä½¿ç”¨ Travis è‡ªåŠ¨éƒ¨ç½² Hexo](https://segmentfault.com/a/1190000009054888)\n","source":"_posts/æŒç»­é›†æˆ-CI-åŠç®€å•å®è·µ.md","raw":"---\ntitle: 'æŒç»­é›†æˆ (CI) åŠç®€å•å®è·µ'\ndate: 2018-04-30 9:00:00\ntags:\ncomments: true\n---\n\nåœ¨è½¯ä»¶å¼€å‘é¢†åŸŸ, ä¸€ç›´æœ‰å¾ˆå¤šæ¯”è¾ƒä¸“ä¸šçš„æœ¯è¯­, æœ¬ç€ç§‘æ™®çš„ç²¾ç¥, æ¥å¡«ä¸€ä¸‹è‡ªå·±çš„ ~~çŸ¥è¯†ç›²åŒº~~ ğŸ˜‚, ä»€ä¹ˆæ˜¯æŒç»­é›†æˆ? å¦‚ä½•åšæŒç»­é›†æˆ? ä¸ºä»€ä¹ˆè¦åšæŒç»­é›†æˆ? å¸¦ç€è¿™äº›é—®é¢˜, æœ¬ç¯‡æ–‡ç« ä¼šç»™ä½ ç­”æ¡ˆ.\n\n<!-- more -->\n\n## What\n\n> æŒç»­é›†æˆï¼ˆè‹±è¯­ï¼šContinuous integrationï¼Œç¼©å†™ CIï¼‰æ˜¯ä¸€ç§è½¯ä»¶å·¥ç¨‹æµç¨‹ï¼Œæ˜¯å°†æ‰€æœ‰è½¯ä»¶å·¥ç¨‹å¸ˆå¯¹äºè½¯ä»¶çš„å·¥ä½œå‰¯æœ¬æŒç»­æäº¤åˆ°å…±ç”¨ä¸»çº¿ï¼ˆmainlineï¼‰çš„ä¸€ç§æªæ–½ã€‚\n\n## Why\n\næŒç»­é›†æˆçš„ç›®çš„ï¼Œå°±æ˜¯è®©äº§å“å¯ä»¥å¿«é€Ÿè¿­ä»£ï¼ŒåŒæ—¶è¿˜èƒ½ä¿æŒé«˜è´¨é‡ã€‚\n\n![image](https://user-images.githubusercontent.com/15377484/39465580-acb719cc-4d56-11e8-9915-2964d5e523c5.png)\n\n## How\n\nå®ƒçš„æ ¸å¿ƒæªæ–½æ˜¯ï¼Œä»£ç é›†æˆåˆ°ä¸»å¹²ä¹‹å‰ï¼Œå¿…é¡»é€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚åªè¦æœ‰ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å¤±è´¥ï¼Œå°±ä¸èƒ½é›†æˆã€‚ä»¥æœ¬æ¬¡ç»™åšå®¢åšæŒç»­é›†æˆä¸ºä¾‹ï¼Œå®ƒçš„æµç¨‹æ˜¯è¿™æ ·å­çš„ï¼š\n\n1. å†™å®Œåšå®¢åï¼Œç›´æ¥ push åˆ° GitHub çš„ `src` åˆ†æ”¯(æˆ‘çš„ `master` åˆ†æ”¯æ˜¯ pages)\n2. CI æœåŠ¡é€šè¿‡é…ç½®æ–‡ä»¶ `.travis.yml` ç›‘å¬å½“å‰ `src` åˆ†æ”¯å‘ç”Ÿå˜åŒ–ï¼Œè§¦å‘ webhook\n3. CI æœåŠ¡å°†å½“å‰é¡¹ç›® clone è¿‡å»ï¼Œæ ¹æ® `.travis.yml` çš„é…ç½®æ‰§è¡Œæµ‹è¯•å’Œæ„å»º\n4. å°†æœ€ç»ˆå¯ä»¥ä½œä¸ºç”Ÿäº§ç¯å¢ƒçš„ä»£ç æ¨é€åˆ°çº¿ä¸Šç¯å¢ƒï¼Œå¹¶ä¸” push å›  `src` åˆ†æ”¯\n\nè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ï¼š\n\n- å‘å¸ƒæ–°æ–‡ç« ï¼Œåªéœ€ push ä¸€æ¬¡åˆ°ä»“åº“ï¼Œå‰©ä¸‹çš„æµ‹è¯•ã€æ„å»ºã€éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒç­‰ï¼ŒCI å¸®æˆ‘è‡ªåŠ¨å®Œæˆã€‚\n- å¿«é€Ÿå‘ç°é”™è¯¯ã€‚æ¯å®Œæˆä¸€ç‚¹æ›´æ–°ï¼Œå°±é›†æˆåˆ°ä¸»å¹²ï¼Œå®šä½é”™è¯¯ä¹Ÿæ¯”è¾ƒå®¹æ˜“ã€‚\n- é˜²æ­¢åˆ†æ”¯å¤§å¹…åç¦»ä¸»å¹²ã€‚å¦‚æœä¸æ˜¯ç»å¸¸é›†æˆï¼Œä¸»å¹²åˆåœ¨ä¸æ–­æ›´æ–°ï¼Œä¼šå¯¼è‡´ä»¥åé›†æˆçš„éš¾åº¦å˜å¤§ã€‚\n\n## More\n\n- [æŒç»­é›†æˆæ˜¯ä»€ä¹ˆ](http://www.ruanyifeng.com/blog/2015/09/continuous-integration.html)\n- [ä½¿ç”¨ Travis è‡ªåŠ¨éƒ¨ç½² Hexo](https://segmentfault.com/a/1190000009054888)\n","slug":"æŒç»­é›†æˆ-CI-åŠç®€å•å®è·µ","published":1,"updated":"2018-12-26T16:01:04.000Z","layout":"post","photos":[],"link":"","_id":"ck3v60jtp000rr9q9tlz37gwl","content":"<p>åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸ, ä¸€ç›´æœ‰å¾ˆå¤šæ¯”è¾ƒä¸“ä¸šçš„æœ¯è¯­, æœ¬ç€ç§‘æ™®çš„ç²¾ç¥, æ¥å¡«ä¸€ä¸‹è‡ªå·±çš„ <del>çŸ¥è¯†ç›²åŒº</del> ğŸ˜‚, ä»€ä¹ˆæ˜¯æŒç»­é›†æˆ? å¦‚ä½•åšæŒç»­é›†æˆ? ä¸ºä»€ä¹ˆè¦åšæŒç»­é›†æˆ? å¸¦ç€è¿™äº›é—®é¢˜, æœ¬ç¯‡æ–‡ç« ä¼šç»™ä½ ç­”æ¡ˆ.</p>\n<a id=\"more\"></a>\n<h2 id=\"What\"><a href=\"#What\" class=\"headerlink\" title=\"What\"></a>What</h2><blockquote>\n<p>æŒç»­é›†æˆï¼ˆè‹±è¯­ï¼šContinuous integrationï¼Œç¼©å†™ CIï¼‰æ˜¯ä¸€ç§è½¯ä»¶å·¥ç¨‹æµç¨‹ï¼Œæ˜¯å°†æ‰€æœ‰è½¯ä»¶å·¥ç¨‹å¸ˆå¯¹äºè½¯ä»¶çš„å·¥ä½œå‰¯æœ¬æŒç»­æäº¤åˆ°å…±ç”¨ä¸»çº¿ï¼ˆmainlineï¼‰çš„ä¸€ç§æªæ–½ã€‚</p>\n</blockquote>\n<h2 id=\"Why\"><a href=\"#Why\" class=\"headerlink\" title=\"Why\"></a>Why</h2><p>æŒç»­é›†æˆçš„ç›®çš„ï¼Œå°±æ˜¯è®©äº§å“å¯ä»¥å¿«é€Ÿè¿­ä»£ï¼ŒåŒæ—¶è¿˜èƒ½ä¿æŒé«˜è´¨é‡ã€‚</p>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/39465580-acb719cc-4d56-11e8-9915-2964d5e523c5.png\" alt=\"image\"></p>\n<h2 id=\"How\"><a href=\"#How\" class=\"headerlink\" title=\"How\"></a>How</h2><p>å®ƒçš„æ ¸å¿ƒæªæ–½æ˜¯ï¼Œä»£ç é›†æˆåˆ°ä¸»å¹²ä¹‹å‰ï¼Œå¿…é¡»é€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚åªè¦æœ‰ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å¤±è´¥ï¼Œå°±ä¸èƒ½é›†æˆã€‚ä»¥æœ¬æ¬¡ç»™åšå®¢åšæŒç»­é›†æˆä¸ºä¾‹ï¼Œå®ƒçš„æµç¨‹æ˜¯è¿™æ ·å­çš„ï¼š</p>\n<ol>\n<li>å†™å®Œåšå®¢åï¼Œç›´æ¥ push åˆ° GitHub çš„ <code>src</code> åˆ†æ”¯(æˆ‘çš„ <code>master</code> åˆ†æ”¯æ˜¯ pages)</li>\n<li>CI æœåŠ¡é€šè¿‡é…ç½®æ–‡ä»¶ <code>.travis.yml</code> ç›‘å¬å½“å‰ <code>src</code> åˆ†æ”¯å‘ç”Ÿå˜åŒ–ï¼Œè§¦å‘ webhook</li>\n<li>CI æœåŠ¡å°†å½“å‰é¡¹ç›® clone è¿‡å»ï¼Œæ ¹æ® <code>.travis.yml</code> çš„é…ç½®æ‰§è¡Œæµ‹è¯•å’Œæ„å»º</li>\n<li>å°†æœ€ç»ˆå¯ä»¥ä½œä¸ºç”Ÿäº§ç¯å¢ƒçš„ä»£ç æ¨é€åˆ°çº¿ä¸Šç¯å¢ƒï¼Œå¹¶ä¸” push å›  <code>src</code> åˆ†æ”¯</li>\n</ol>\n<p>è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ï¼š</p>\n<ul>\n<li>å‘å¸ƒæ–°æ–‡ç« ï¼Œåªéœ€ push ä¸€æ¬¡åˆ°ä»“åº“ï¼Œå‰©ä¸‹çš„æµ‹è¯•ã€æ„å»ºã€éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒç­‰ï¼ŒCI å¸®æˆ‘è‡ªåŠ¨å®Œæˆã€‚</li>\n<li>å¿«é€Ÿå‘ç°é”™è¯¯ã€‚æ¯å®Œæˆä¸€ç‚¹æ›´æ–°ï¼Œå°±é›†æˆåˆ°ä¸»å¹²ï¼Œå®šä½é”™è¯¯ä¹Ÿæ¯”è¾ƒå®¹æ˜“ã€‚</li>\n<li>é˜²æ­¢åˆ†æ”¯å¤§å¹…åç¦»ä¸»å¹²ã€‚å¦‚æœä¸æ˜¯ç»å¸¸é›†æˆï¼Œä¸»å¹²åˆåœ¨ä¸æ–­æ›´æ–°ï¼Œä¼šå¯¼è‡´ä»¥åé›†æˆçš„éš¾åº¦å˜å¤§ã€‚</li>\n</ul>\n<h2 id=\"More\"><a href=\"#More\" class=\"headerlink\" title=\"More\"></a>More</h2><ul>\n<li><a href=\"http://www.ruanyifeng.com/blog/2015/09/continuous-integration.html\" target=\"_blank\" rel=\"noopener\">æŒç»­é›†æˆæ˜¯ä»€ä¹ˆ</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000009054888\" target=\"_blank\" rel=\"noopener\">ä½¿ç”¨ Travis è‡ªåŠ¨éƒ¨ç½² Hexo</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸ, ä¸€ç›´æœ‰å¾ˆå¤šæ¯”è¾ƒä¸“ä¸šçš„æœ¯è¯­, æœ¬ç€ç§‘æ™®çš„ç²¾ç¥, æ¥å¡«ä¸€ä¸‹è‡ªå·±çš„ <del>çŸ¥è¯†ç›²åŒº</del> ğŸ˜‚, ä»€ä¹ˆæ˜¯æŒç»­é›†æˆ? å¦‚ä½•åšæŒç»­é›†æˆ? ä¸ºä»€ä¹ˆè¦åšæŒç»­é›†æˆ? å¸¦ç€è¿™äº›é—®é¢˜, æœ¬ç¯‡æ–‡ç« ä¼šç»™ä½ ç­”æ¡ˆ.</p>","more":"<h2 id=\"What\"><a href=\"#What\" class=\"headerlink\" title=\"What\"></a>What</h2><blockquote>\n<p>æŒç»­é›†æˆï¼ˆè‹±è¯­ï¼šContinuous integrationï¼Œç¼©å†™ CIï¼‰æ˜¯ä¸€ç§è½¯ä»¶å·¥ç¨‹æµç¨‹ï¼Œæ˜¯å°†æ‰€æœ‰è½¯ä»¶å·¥ç¨‹å¸ˆå¯¹äºè½¯ä»¶çš„å·¥ä½œå‰¯æœ¬æŒç»­æäº¤åˆ°å…±ç”¨ä¸»çº¿ï¼ˆmainlineï¼‰çš„ä¸€ç§æªæ–½ã€‚</p>\n</blockquote>\n<h2 id=\"Why\"><a href=\"#Why\" class=\"headerlink\" title=\"Why\"></a>Why</h2><p>æŒç»­é›†æˆçš„ç›®çš„ï¼Œå°±æ˜¯è®©äº§å“å¯ä»¥å¿«é€Ÿè¿­ä»£ï¼ŒåŒæ—¶è¿˜èƒ½ä¿æŒé«˜è´¨é‡ã€‚</p>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/39465580-acb719cc-4d56-11e8-9915-2964d5e523c5.png\" alt=\"image\"></p>\n<h2 id=\"How\"><a href=\"#How\" class=\"headerlink\" title=\"How\"></a>How</h2><p>å®ƒçš„æ ¸å¿ƒæªæ–½æ˜¯ï¼Œä»£ç é›†æˆåˆ°ä¸»å¹²ä¹‹å‰ï¼Œå¿…é¡»é€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚åªè¦æœ‰ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å¤±è´¥ï¼Œå°±ä¸èƒ½é›†æˆã€‚ä»¥æœ¬æ¬¡ç»™åšå®¢åšæŒç»­é›†æˆä¸ºä¾‹ï¼Œå®ƒçš„æµç¨‹æ˜¯è¿™æ ·å­çš„ï¼š</p>\n<ol>\n<li>å†™å®Œåšå®¢åï¼Œç›´æ¥ push åˆ° GitHub çš„ <code>src</code> åˆ†æ”¯(æˆ‘çš„ <code>master</code> åˆ†æ”¯æ˜¯ pages)</li>\n<li>CI æœåŠ¡é€šè¿‡é…ç½®æ–‡ä»¶ <code>.travis.yml</code> ç›‘å¬å½“å‰ <code>src</code> åˆ†æ”¯å‘ç”Ÿå˜åŒ–ï¼Œè§¦å‘ webhook</li>\n<li>CI æœåŠ¡å°†å½“å‰é¡¹ç›® clone è¿‡å»ï¼Œæ ¹æ® <code>.travis.yml</code> çš„é…ç½®æ‰§è¡Œæµ‹è¯•å’Œæ„å»º</li>\n<li>å°†æœ€ç»ˆå¯ä»¥ä½œä¸ºç”Ÿäº§ç¯å¢ƒçš„ä»£ç æ¨é€åˆ°çº¿ä¸Šç¯å¢ƒï¼Œå¹¶ä¸” push å›  <code>src</code> åˆ†æ”¯</li>\n</ol>\n<p>è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ï¼š</p>\n<ul>\n<li>å‘å¸ƒæ–°æ–‡ç« ï¼Œåªéœ€ push ä¸€æ¬¡åˆ°ä»“åº“ï¼Œå‰©ä¸‹çš„æµ‹è¯•ã€æ„å»ºã€éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒç­‰ï¼ŒCI å¸®æˆ‘è‡ªåŠ¨å®Œæˆã€‚</li>\n<li>å¿«é€Ÿå‘ç°é”™è¯¯ã€‚æ¯å®Œæˆä¸€ç‚¹æ›´æ–°ï¼Œå°±é›†æˆåˆ°ä¸»å¹²ï¼Œå®šä½é”™è¯¯ä¹Ÿæ¯”è¾ƒå®¹æ˜“ã€‚</li>\n<li>é˜²æ­¢åˆ†æ”¯å¤§å¹…åç¦»ä¸»å¹²ã€‚å¦‚æœä¸æ˜¯ç»å¸¸é›†æˆï¼Œä¸»å¹²åˆåœ¨ä¸æ–­æ›´æ–°ï¼Œä¼šå¯¼è‡´ä»¥åé›†æˆçš„éš¾åº¦å˜å¤§ã€‚</li>\n</ul>\n<h2 id=\"More\"><a href=\"#More\" class=\"headerlink\" title=\"More\"></a>More</h2><ul>\n<li><a href=\"http://www.ruanyifeng.com/blog/2015/09/continuous-integration.html\" target=\"_blank\" rel=\"noopener\">æŒç»­é›†æˆæ˜¯ä»€ä¹ˆ</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000009054888\" target=\"_blank\" rel=\"noopener\">ä½¿ç”¨ Travis è‡ªåŠ¨éƒ¨ç½² Hexo</a></li>\n</ul>"},{"title":"æµè§ˆå™¨è·¨åŸŸè¯·æ±‚æ•°æ®æ€»ç»“","date":"2016-01-19T13:06:08.000Z","comments":0,"_content":"\né¦–å…ˆè¯´ä¸‹åŒæºï¼ŒåŒæºç­–ç•¥æ˜¯æµè§ˆå™¨çš„ä¸€ç§å®‰å…¨ç­–ç•¥ï¼Œæ‰€è°“åŒæºæ˜¯æŒ‡ï¼šåŸŸåã€åè®®ã€ç«¯å£å®Œå…¨ç›¸åŒã€‚è€Œè·¨åŸŸå°±æ˜¯ä¸åŒæºï¼ä¸€èˆ¬ `a`, `img`, `link`, `video`, `audio`, ç­‰ç­‰èƒ½å¤Ÿå‘å‡ºè¯·æ±‚çš„æ ‡ç­¾éƒ½å¯ä»¥å®ç°è·¨åŸŸè®¿é—®ã€‚ä½†æ˜¯è¿™äº›æ ‡ç­¾ä¸èƒ½å¾—åˆ°è¿”å›çš„ä¸œè¥¿ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ä¼šç”¨ä»–ä»¬æ¥è¯·æ±‚èµ„æºã€‚\n<!-- more -->\n\n### è·¨åŸŸæ–¹æ³•\n#### åŸç”Ÿ JavaScript è·¨åŸŸ\n```html\n<script type=\"text/javascript\">\nfunction showuser(data) {\n    var data = JSON.parse(data);\n    console.log(data);// å¤„ç†å¾—åˆ°çš„ data\n};\n</script>\n\n<script src=\"http://x.cn/showalluser.html?callback=showuser\" charset=\"utf-8\"></script>\n```\n#### jQuery è·¨åŸŸ\n```js\n$.ajax({\n    type: \"post\",\n    url: \"http://127.0.0.1:8080/showalluser.html\",\n    dataType: \"jsonp\",\n    jsonp: \"callback\",\n    success: function(data) {\n        console.log(data);// å¤„ç†å¾—åˆ°çš„ data\n    }\n});\n```\n#### iframe è·¨åŸŸ\n```js\nfunction(URL, callBack) {\n    $iframe = $(\"<iframe style='display: none;'></iframe>\");\n    $iframe.prop(\"src\", URL);\n    $(\"body\").append($iframe);\n\n    $iframe.on('load', function() {\n        // è½¬æ¢æˆ jsonStr\n        // contentDocumentæ˜¯ iframe èŠ‚ç‚¹çš„æ–¹æ³•è·å–contentDocument\n        var ifrDocument = this.contentDocument;\n\n        var jsonStr = $(ifrDocument).find(\"body\").text();\n\n        // è½¬æ¢æˆ json å¯¹è±¡\n        var jsonObj = JSON.parse(jsonStr);\n\n        // æŠŠ json å¯¹è±¡ä¼ ç»™å›è°ƒå‡½æ•°\n        callBack(jsonObj);\n        // åˆ é™¤å½“å‰çš„ iframe\n        $(this).remove();\n    });\n}\n```\n#### åŸç”Ÿ JavaScript è·¨åŸŸå°è£…\n```html\n<script>\n// å°è£…æ•°æ®  è·¨åŸŸurl  params fn\nfunction crossDomain(url,params,fn){\n    var head = document.getElementsByTagName('head')[0];\n    // 1. å¤„ç†å›è°ƒå‡½æ•°\n    var cbName = 'jsonp'+\n    (Math.random() * Math.random()).toString().substr(2) +\n    new Date().getTime();\n    // å°†å›è°ƒå‡½æ•°æŒ‚è½½åˆ° window å¯¹è±¡ä¸Š\n    window[cbName] = function(data){\n        // æ‹¿åˆ°å¹¶å¤„ç†æ•°æ®ï¼Œäº¤ç»™å›è°ƒå‡½æ•°\n        fn(data);\n        // æ‹¿åˆ°æ•°æ®åremoveæ‰\n        //head.removeChild(scriptObj);\n    }\n    // 2. è§£æurlï¼Œå¤„ç†æŸ¥è¯¢å­—ç¬¦ä¸² è§£å†³è¿™æ ·çš„éœ€æ±‚ ?count=5\n    var qstring = '';\n    for(var key in params){\n        qstring += key + '=' + params[key] + '&';\n    }\n    qstring += 'callback=' + cbName;\n    url += '?' + qstring;\n    // 3. æ’å…¥script\n    var scriptObj = document.createElement('script');\n    scriptObj.src = url;\n    head.appendChild(scriptObj);\n}\n</script>\n\n<script>\n// ä½¿ç”¨\ncrossDomain('http://api.douban.com/v2/movie/in_theaters',{},function(data){\n    console.log(data);\n})\n</script>\n```\n```html\n<!-- è§£è¯»ï¼šæ³¨æ„ä¸Šé¢å°è£…çš„å‡½æ•°ä¼šåœ¨ head æ ‡ç­¾ç”Ÿæˆä¸‹é¢çš„å†…å®¹ï¼Œå¹¶éšæœºäº§ç”Ÿå‡½æ•°åé˜²æ­¢å†²çª -->\n<script src=\"jsonp412964552676679031484646377133(data)â€>// æŒ‚è½½åœ¨ window ä¸Šå¯ä»¥ç›´æ¥æ‰§è¡Œ\n      /*è¿œç¨‹è·å–çš„ data ä¼ å…¥ jsonp* å‡½æ•°å†…å®¹ï¼Œäº¤ç»™å›è°ƒå‡½æ•°fn(data) */\n</script>\n```\n","source":"_posts/æµè§ˆå™¨è·¨åŸŸè¯·æ±‚æ•°æ®æ€»ç»“.md","raw":"---\ntitle: æµè§ˆå™¨è·¨åŸŸè¯·æ±‚æ•°æ®æ€»ç»“\ndate: 2016-01-19 21:06:08\ntags:\ncomments: false\n---\n\né¦–å…ˆè¯´ä¸‹åŒæºï¼ŒåŒæºç­–ç•¥æ˜¯æµè§ˆå™¨çš„ä¸€ç§å®‰å…¨ç­–ç•¥ï¼Œæ‰€è°“åŒæºæ˜¯æŒ‡ï¼šåŸŸåã€åè®®ã€ç«¯å£å®Œå…¨ç›¸åŒã€‚è€Œè·¨åŸŸå°±æ˜¯ä¸åŒæºï¼ä¸€èˆ¬ `a`, `img`, `link`, `video`, `audio`, ç­‰ç­‰èƒ½å¤Ÿå‘å‡ºè¯·æ±‚çš„æ ‡ç­¾éƒ½å¯ä»¥å®ç°è·¨åŸŸè®¿é—®ã€‚ä½†æ˜¯è¿™äº›æ ‡ç­¾ä¸èƒ½å¾—åˆ°è¿”å›çš„ä¸œè¥¿ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ä¼šç”¨ä»–ä»¬æ¥è¯·æ±‚èµ„æºã€‚\n<!-- more -->\n\n### è·¨åŸŸæ–¹æ³•\n#### åŸç”Ÿ JavaScript è·¨åŸŸ\n```html\n<script type=\"text/javascript\">\nfunction showuser(data) {\n    var data = JSON.parse(data);\n    console.log(data);// å¤„ç†å¾—åˆ°çš„ data\n};\n</script>\n\n<script src=\"http://x.cn/showalluser.html?callback=showuser\" charset=\"utf-8\"></script>\n```\n#### jQuery è·¨åŸŸ\n```js\n$.ajax({\n    type: \"post\",\n    url: \"http://127.0.0.1:8080/showalluser.html\",\n    dataType: \"jsonp\",\n    jsonp: \"callback\",\n    success: function(data) {\n        console.log(data);// å¤„ç†å¾—åˆ°çš„ data\n    }\n});\n```\n#### iframe è·¨åŸŸ\n```js\nfunction(URL, callBack) {\n    $iframe = $(\"<iframe style='display: none;'></iframe>\");\n    $iframe.prop(\"src\", URL);\n    $(\"body\").append($iframe);\n\n    $iframe.on('load', function() {\n        // è½¬æ¢æˆ jsonStr\n        // contentDocumentæ˜¯ iframe èŠ‚ç‚¹çš„æ–¹æ³•è·å–contentDocument\n        var ifrDocument = this.contentDocument;\n\n        var jsonStr = $(ifrDocument).find(\"body\").text();\n\n        // è½¬æ¢æˆ json å¯¹è±¡\n        var jsonObj = JSON.parse(jsonStr);\n\n        // æŠŠ json å¯¹è±¡ä¼ ç»™å›è°ƒå‡½æ•°\n        callBack(jsonObj);\n        // åˆ é™¤å½“å‰çš„ iframe\n        $(this).remove();\n    });\n}\n```\n#### åŸç”Ÿ JavaScript è·¨åŸŸå°è£…\n```html\n<script>\n// å°è£…æ•°æ®  è·¨åŸŸurl  params fn\nfunction crossDomain(url,params,fn){\n    var head = document.getElementsByTagName('head')[0];\n    // 1. å¤„ç†å›è°ƒå‡½æ•°\n    var cbName = 'jsonp'+\n    (Math.random() * Math.random()).toString().substr(2) +\n    new Date().getTime();\n    // å°†å›è°ƒå‡½æ•°æŒ‚è½½åˆ° window å¯¹è±¡ä¸Š\n    window[cbName] = function(data){\n        // æ‹¿åˆ°å¹¶å¤„ç†æ•°æ®ï¼Œäº¤ç»™å›è°ƒå‡½æ•°\n        fn(data);\n        // æ‹¿åˆ°æ•°æ®åremoveæ‰\n        //head.removeChild(scriptObj);\n    }\n    // 2. è§£æurlï¼Œå¤„ç†æŸ¥è¯¢å­—ç¬¦ä¸² è§£å†³è¿™æ ·çš„éœ€æ±‚ ?count=5\n    var qstring = '';\n    for(var key in params){\n        qstring += key + '=' + params[key] + '&';\n    }\n    qstring += 'callback=' + cbName;\n    url += '?' + qstring;\n    // 3. æ’å…¥script\n    var scriptObj = document.createElement('script');\n    scriptObj.src = url;\n    head.appendChild(scriptObj);\n}\n</script>\n\n<script>\n// ä½¿ç”¨\ncrossDomain('http://api.douban.com/v2/movie/in_theaters',{},function(data){\n    console.log(data);\n})\n</script>\n```\n```html\n<!-- è§£è¯»ï¼šæ³¨æ„ä¸Šé¢å°è£…çš„å‡½æ•°ä¼šåœ¨ head æ ‡ç­¾ç”Ÿæˆä¸‹é¢çš„å†…å®¹ï¼Œå¹¶éšæœºäº§ç”Ÿå‡½æ•°åé˜²æ­¢å†²çª -->\n<script src=\"jsonp412964552676679031484646377133(data)â€>// æŒ‚è½½åœ¨ window ä¸Šå¯ä»¥ç›´æ¥æ‰§è¡Œ\n      /*è¿œç¨‹è·å–çš„ data ä¼ å…¥ jsonp* å‡½æ•°å†…å®¹ï¼Œäº¤ç»™å›è°ƒå‡½æ•°fn(data) */\n</script>\n```\n","slug":"æµè§ˆå™¨è·¨åŸŸè¯·æ±‚æ•°æ®æ€»ç»“","published":1,"updated":"2018-12-26T16:01:04.000Z","layout":"post","photos":[],"link":"","_id":"ck3v60jtp000sr9q9tgvpmenu","content":"<p>é¦–å…ˆè¯´ä¸‹åŒæºï¼ŒåŒæºç­–ç•¥æ˜¯æµè§ˆå™¨çš„ä¸€ç§å®‰å…¨ç­–ç•¥ï¼Œæ‰€è°“åŒæºæ˜¯æŒ‡ï¼šåŸŸåã€åè®®ã€ç«¯å£å®Œå…¨ç›¸åŒã€‚è€Œè·¨åŸŸå°±æ˜¯ä¸åŒæºï¼ä¸€èˆ¬ <code>a</code>, <code>img</code>, <code>link</code>, <code>video</code>, <code>audio</code>, ç­‰ç­‰èƒ½å¤Ÿå‘å‡ºè¯·æ±‚çš„æ ‡ç­¾éƒ½å¯ä»¥å®ç°è·¨åŸŸè®¿é—®ã€‚ä½†æ˜¯è¿™äº›æ ‡ç­¾ä¸èƒ½å¾—åˆ°è¿”å›çš„ä¸œè¥¿ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ä¼šç”¨ä»–ä»¬æ¥è¯·æ±‚èµ„æºã€‚<br><a id=\"more\"></a></p>\n<h3 id=\"è·¨åŸŸæ–¹æ³•\"><a href=\"#è·¨åŸŸæ–¹æ³•\" class=\"headerlink\" title=\"è·¨åŸŸæ–¹æ³•\"></a>è·¨åŸŸæ–¹æ³•</h3><h4 id=\"åŸç”Ÿ-JavaScript-è·¨åŸŸ\"><a href=\"#åŸç”Ÿ-JavaScript-è·¨åŸŸ\" class=\"headerlink\" title=\"åŸç”Ÿ JavaScript è·¨åŸŸ\"></a>åŸç”Ÿ JavaScript è·¨åŸŸ</h4><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showuser</span>(<span class=\"params\">data</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> data = <span class=\"built_in\">JSON</span>.parse(data);</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"built_in\">console</span>.log(data);<span class=\"comment\">// å¤„ç†å¾—åˆ°çš„ data</span></span></span><br><span class=\"line\"><span class=\"undefined\">&#125;;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://x.cn/showalluser.html?callback=showuser\"</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"jQuery-è·¨åŸŸ\"><a href=\"#jQuery-è·¨åŸŸ\" class=\"headerlink\" title=\"jQuery è·¨åŸŸ\"></a>jQuery è·¨åŸŸ</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$.ajax(&#123;</span><br><span class=\"line\">    type: <span class=\"string\">\"post\"</span>,</span><br><span class=\"line\">    url: <span class=\"string\">\"http://127.0.0.1:8080/showalluser.html\"</span>,</span><br><span class=\"line\">    dataType: <span class=\"string\">\"jsonp\"</span>,</span><br><span class=\"line\">    jsonp: <span class=\"string\">\"callback\"</span>,</span><br><span class=\"line\">    success: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(data);<span class=\"comment\">// å¤„ç†å¾—åˆ°çš„ data</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"iframe-è·¨åŸŸ\"><a href=\"#iframe-è·¨åŸŸ\" class=\"headerlink\" title=\"iframe è·¨åŸŸ\"></a>iframe è·¨åŸŸ</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">URL, callBack</span>) </span>&#123;</span><br><span class=\"line\">    $iframe = $(<span class=\"string\">\"&lt;iframe style='display: none;'&gt;&lt;/iframe&gt;\"</span>);</span><br><span class=\"line\">    $iframe.prop(<span class=\"string\">\"src\"</span>, URL);</span><br><span class=\"line\">    $(<span class=\"string\">\"body\"</span>).append($iframe);</span><br><span class=\"line\"></span><br><span class=\"line\">    $iframe.on(<span class=\"string\">'load'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// è½¬æ¢æˆ jsonStr</span></span><br><span class=\"line\">        <span class=\"comment\">// contentDocumentæ˜¯ iframe èŠ‚ç‚¹çš„æ–¹æ³•è·å–contentDocument</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> ifrDocument = <span class=\"keyword\">this</span>.contentDocument;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> jsonStr = $(ifrDocument).find(<span class=\"string\">\"body\"</span>).text();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// è½¬æ¢æˆ json å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> jsonObj = <span class=\"built_in\">JSON</span>.parse(jsonStr);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// æŠŠ json å¯¹è±¡ä¼ ç»™å›è°ƒå‡½æ•°</span></span><br><span class=\"line\">        callBack(jsonObj);</span><br><span class=\"line\">        <span class=\"comment\">// åˆ é™¤å½“å‰çš„ iframe</span></span><br><span class=\"line\">        $(<span class=\"keyword\">this</span>).remove();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"åŸç”Ÿ-JavaScript-è·¨åŸŸå°è£…\"><a href=\"#åŸç”Ÿ-JavaScript-è·¨åŸŸå°è£…\" class=\"headerlink\" title=\"åŸç”Ÿ JavaScript è·¨åŸŸå°è£…\"></a>åŸç”Ÿ JavaScript è·¨åŸŸå°è£…</h4><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// å°è£…æ•°æ®  è·¨åŸŸurl  params fn</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">crossDomain</span>(<span class=\"params\">url,params,fn</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> head = <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">'head'</span>)[<span class=\"number\">0</span>];</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 1. å¤„ç†å›è°ƒå‡½æ•°</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> cbName = <span class=\"string\">'jsonp'</span>+</span></span><br><span class=\"line\"><span class=\"javascript\">    (<span class=\"built_in\">Math</span>.random() * <span class=\"built_in\">Math</span>.random()).toString().substr(<span class=\"number\">2</span>) +</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// å°†å›è°ƒå‡½æ•°æŒ‚è½½åˆ° window å¯¹è±¡ä¸Š</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"built_in\">window</span>[cbName] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// æ‹¿åˆ°å¹¶å¤„ç†æ•°æ®ï¼Œäº¤ç»™å›è°ƒå‡½æ•°</span></span></span><br><span class=\"line\"><span class=\"undefined\">        fn(data);</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// æ‹¿åˆ°æ•°æ®åremoveæ‰</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//head.removeChild(scriptObj);</span></span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 2. è§£æurlï¼Œå¤„ç†æŸ¥è¯¢å­—ç¬¦ä¸² è§£å†³è¿™æ ·çš„éœ€æ±‚ ?count=5</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> qstring = <span class=\"string\">''</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> params)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        qstring += key + <span class=\"string\">'='</span> + params[key] + <span class=\"string\">'&amp;'</span>;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">    qstring += <span class=\"string\">'callback='</span> + cbName;</span></span><br><span class=\"line\"><span class=\"javascript\">    url += <span class=\"string\">'?'</span> + qstring;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 3. æ’å…¥script</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> scriptObj = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'script'</span>);</span></span><br><span class=\"line\"><span class=\"undefined\">    scriptObj.src = url;</span></span><br><span class=\"line\"><span class=\"undefined\">    head.appendChild(scriptObj);</span></span><br><span class=\"line\"><span class=\"undefined\">&#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// ä½¿ç”¨</span></span></span><br><span class=\"line\"><span class=\"javascript\">crossDomain(<span class=\"string\">'http://api.douban.com/v2/movie/in_theaters'</span>,&#123;&#125;,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"built_in\">console</span>.log(data);</span></span><br><span class=\"line\"><span class=\"undefined\">&#125;)</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- è§£è¯»ï¼šæ³¨æ„ä¸Šé¢å°è£…çš„å‡½æ•°ä¼šåœ¨ head æ ‡ç­¾ç”Ÿæˆä¸‹é¢çš„å†…å®¹ï¼Œå¹¶éšæœºäº§ç”Ÿå‡½æ•°åé˜²æ­¢å†²çª --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"jsonp412964552676679031484646377133(data)â€&gt;// æŒ‚è½½åœ¨ window ä¸Šå¯ä»¥ç›´æ¥æ‰§è¡Œ</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">      /*è¿œç¨‹è·å–çš„ data ä¼ å…¥ jsonp* å‡½æ•°å†…å®¹ï¼Œäº¤ç»™å›è°ƒå‡½æ•°fn(data) */</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">&lt;/script&gt;</span></span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p>é¦–å…ˆè¯´ä¸‹åŒæºï¼ŒåŒæºç­–ç•¥æ˜¯æµè§ˆå™¨çš„ä¸€ç§å®‰å…¨ç­–ç•¥ï¼Œæ‰€è°“åŒæºæ˜¯æŒ‡ï¼šåŸŸåã€åè®®ã€ç«¯å£å®Œå…¨ç›¸åŒã€‚è€Œè·¨åŸŸå°±æ˜¯ä¸åŒæºï¼ä¸€èˆ¬ <code>a</code>, <code>img</code>, <code>link</code>, <code>video</code>, <code>audio</code>, ç­‰ç­‰èƒ½å¤Ÿå‘å‡ºè¯·æ±‚çš„æ ‡ç­¾éƒ½å¯ä»¥å®ç°è·¨åŸŸè®¿é—®ã€‚ä½†æ˜¯è¿™äº›æ ‡ç­¾ä¸èƒ½å¾—åˆ°è¿”å›çš„ä¸œè¥¿ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ä¼šç”¨ä»–ä»¬æ¥è¯·æ±‚èµ„æºã€‚<br>","more":"</p>\n<h3 id=\"è·¨åŸŸæ–¹æ³•\"><a href=\"#è·¨åŸŸæ–¹æ³•\" class=\"headerlink\" title=\"è·¨åŸŸæ–¹æ³•\"></a>è·¨åŸŸæ–¹æ³•</h3><h4 id=\"åŸç”Ÿ-JavaScript-è·¨åŸŸ\"><a href=\"#åŸç”Ÿ-JavaScript-è·¨åŸŸ\" class=\"headerlink\" title=\"åŸç”Ÿ JavaScript è·¨åŸŸ\"></a>åŸç”Ÿ JavaScript è·¨åŸŸ</h4><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showuser</span>(<span class=\"params\">data</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> data = <span class=\"built_in\">JSON</span>.parse(data);</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"built_in\">console</span>.log(data);<span class=\"comment\">// å¤„ç†å¾—åˆ°çš„ data</span></span></span><br><span class=\"line\"><span class=\"undefined\">&#125;;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://x.cn/showalluser.html?callback=showuser\"</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"jQuery-è·¨åŸŸ\"><a href=\"#jQuery-è·¨åŸŸ\" class=\"headerlink\" title=\"jQuery è·¨åŸŸ\"></a>jQuery è·¨åŸŸ</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$.ajax(&#123;</span><br><span class=\"line\">    type: <span class=\"string\">\"post\"</span>,</span><br><span class=\"line\">    url: <span class=\"string\">\"http://127.0.0.1:8080/showalluser.html\"</span>,</span><br><span class=\"line\">    dataType: <span class=\"string\">\"jsonp\"</span>,</span><br><span class=\"line\">    jsonp: <span class=\"string\">\"callback\"</span>,</span><br><span class=\"line\">    success: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(data);<span class=\"comment\">// å¤„ç†å¾—åˆ°çš„ data</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"iframe-è·¨åŸŸ\"><a href=\"#iframe-è·¨åŸŸ\" class=\"headerlink\" title=\"iframe è·¨åŸŸ\"></a>iframe è·¨åŸŸ</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">URL, callBack</span>) </span>&#123;</span><br><span class=\"line\">    $iframe = $(<span class=\"string\">\"&lt;iframe style='display: none;'&gt;&lt;/iframe&gt;\"</span>);</span><br><span class=\"line\">    $iframe.prop(<span class=\"string\">\"src\"</span>, URL);</span><br><span class=\"line\">    $(<span class=\"string\">\"body\"</span>).append($iframe);</span><br><span class=\"line\"></span><br><span class=\"line\">    $iframe.on(<span class=\"string\">'load'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// è½¬æ¢æˆ jsonStr</span></span><br><span class=\"line\">        <span class=\"comment\">// contentDocumentæ˜¯ iframe èŠ‚ç‚¹çš„æ–¹æ³•è·å–contentDocument</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> ifrDocument = <span class=\"keyword\">this</span>.contentDocument;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> jsonStr = $(ifrDocument).find(<span class=\"string\">\"body\"</span>).text();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// è½¬æ¢æˆ json å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> jsonObj = <span class=\"built_in\">JSON</span>.parse(jsonStr);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// æŠŠ json å¯¹è±¡ä¼ ç»™å›è°ƒå‡½æ•°</span></span><br><span class=\"line\">        callBack(jsonObj);</span><br><span class=\"line\">        <span class=\"comment\">// åˆ é™¤å½“å‰çš„ iframe</span></span><br><span class=\"line\">        $(<span class=\"keyword\">this</span>).remove();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"åŸç”Ÿ-JavaScript-è·¨åŸŸå°è£…\"><a href=\"#åŸç”Ÿ-JavaScript-è·¨åŸŸå°è£…\" class=\"headerlink\" title=\"åŸç”Ÿ JavaScript è·¨åŸŸå°è£…\"></a>åŸç”Ÿ JavaScript è·¨åŸŸå°è£…</h4><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// å°è£…æ•°æ®  è·¨åŸŸurl  params fn</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">crossDomain</span>(<span class=\"params\">url,params,fn</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> head = <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">'head'</span>)[<span class=\"number\">0</span>];</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 1. å¤„ç†å›è°ƒå‡½æ•°</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> cbName = <span class=\"string\">'jsonp'</span>+</span></span><br><span class=\"line\"><span class=\"javascript\">    (<span class=\"built_in\">Math</span>.random() * <span class=\"built_in\">Math</span>.random()).toString().substr(<span class=\"number\">2</span>) +</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// å°†å›è°ƒå‡½æ•°æŒ‚è½½åˆ° window å¯¹è±¡ä¸Š</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"built_in\">window</span>[cbName] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// æ‹¿åˆ°å¹¶å¤„ç†æ•°æ®ï¼Œäº¤ç»™å›è°ƒå‡½æ•°</span></span></span><br><span class=\"line\"><span class=\"undefined\">        fn(data);</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">// æ‹¿åˆ°æ•°æ®åremoveæ‰</span></span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"comment\">//head.removeChild(scriptObj);</span></span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 2. è§£æurlï¼Œå¤„ç†æŸ¥è¯¢å­—ç¬¦ä¸² è§£å†³è¿™æ ·çš„éœ€æ±‚ ?count=5</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> qstring = <span class=\"string\">''</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> params)&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        qstring += key + <span class=\"string\">'='</span> + params[key] + <span class=\"string\">'&amp;'</span>;</span></span><br><span class=\"line\"><span class=\"undefined\">    &#125;</span></span><br><span class=\"line\"><span class=\"javascript\">    qstring += <span class=\"string\">'callback='</span> + cbName;</span></span><br><span class=\"line\"><span class=\"javascript\">    url += <span class=\"string\">'?'</span> + qstring;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"comment\">// 3. æ’å…¥script</span></span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> scriptObj = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'script'</span>);</span></span><br><span class=\"line\"><span class=\"undefined\">    scriptObj.src = url;</span></span><br><span class=\"line\"><span class=\"undefined\">    head.appendChild(scriptObj);</span></span><br><span class=\"line\"><span class=\"undefined\">&#125;</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// ä½¿ç”¨</span></span></span><br><span class=\"line\"><span class=\"javascript\">crossDomain(<span class=\"string\">'http://api.douban.com/v2/movie/in_theaters'</span>,&#123;&#125;,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>)</span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"built_in\">console</span>.log(data);</span></span><br><span class=\"line\"><span class=\"undefined\">&#125;)</span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- è§£è¯»ï¼šæ³¨æ„ä¸Šé¢å°è£…çš„å‡½æ•°ä¼šåœ¨ head æ ‡ç­¾ç”Ÿæˆä¸‹é¢çš„å†…å®¹ï¼Œå¹¶éšæœºäº§ç”Ÿå‡½æ•°åé˜²æ­¢å†²çª --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"jsonp412964552676679031484646377133(data)â€&gt;// æŒ‚è½½åœ¨ window ä¸Šå¯ä»¥ç›´æ¥æ‰§è¡Œ</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">      /*è¿œç¨‹è·å–çš„ data ä¼ å…¥ jsonp* å‡½æ•°å†…å®¹ï¼Œäº¤ç»™å›è°ƒå‡½æ•°fn(data) */</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">&lt;/script&gt;</span></span></span><br></pre></td></tr></table></figure>"},{"title":"å¦‚ä½•é¿å… async/await åœ°ç‹±","comments":1,"date":"2018-05-20T14:11:35.000Z","from":"https://medium.freecodecamp.org/avoiding-the-async-await-hell-c77a0fb71c4c","_content":"\næœ€è¿‘é˜…è¯»äº† Aditya Agarwal çš„ä¸€ç¯‡æ–‡ç« ï¼šHow to escape async/await hellã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦è®¨è®ºäº†è¿‡åº¦ä½¿ç”¨ async/await å¯¼è‡´çš„æ–°çš„ã€Œåœ°ç‹±ã€é—®é¢˜ï¼Œå…¶å·²ç»åœ¨ Medium ä¸Šè·å¾—äº† 19k+ çš„ Applauseã€‚\n\n<!-- more -->\n\n<div class=\"tip\">\n  async/await æ˜¯ ES7 çš„æ–°è¯­æ³•ã€‚åœ¨ async/await æ ‡å‡†å‡ºæ¥ä¹‹å‰ï¼ŒJavaScript çš„å¼‚æ­¥ç¼–ç¨‹ç»å†äº† callback --> promise --> generator çš„æ¼”å˜è¿‡ç¨‹ã€‚\n</div>\n\nåœ¨ callback çš„æ—¶ä»£ï¼Œæœ€è®©äººå¤´ç–¼çš„é—®é¢˜å°±æ˜¯å›è°ƒåœ°ç‹± (callback hell)ã€‚æ‰€ä»¥ï¼Œåœ¨ async/await ä¸€ç»æ¨å‡ºï¼Œç¤¾åŒºå°±æœ‰äººè®¤ä¸ºã€Œè¿™æ˜¯ JavaScript å¼‚æ­¥ç¼–ç¨‹çš„ç»ˆæè§£å†³æ–¹æ¡ˆã€ã€‚ä½† async/await ä¹Ÿå¯èƒ½å¸¦æ¥æ–°çš„é—®é¢˜ã€‚\n\n> å¥½ä¸å®¹æ˜“é€ƒç¦»äº†ä¸€ä¸ªã€Œåœ°ç‹±ã€ï¼Œåˆé©¬ä¸Šé™·å…¥å¦ä¸€ä¸ªã€Œåœ°ç‹±ã€äº†ã€‚\n\n### ä½•ä¸º async/await åœ°ç‹±\n\nåœ¨ç¼–å†™å¼‚æ­¥ä»£ç æ—¶ï¼Œäººä»¬æ€»æ˜¯å–œæ¬¢ä¸€æ¬¡å†™å¤šä¸ªè¯­å¥ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå‡½æ•°è°ƒç”¨ä¹‹å‰ä½¿ç”¨ await å…³é”®å­—ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™ä¸€ä¸ªè¯­å¥å¹¶ä¸ä¾èµ–äºå‰ä¸€ä¸ªè¯­å¥â€”â€”ä½†ä½¿ç”¨ await å…³é”®å­—åï¼Œä½ å°±éœ€è¦ç­‰å¾…å‰ä¸€ä¸ªè¯­å¥å®Œæˆã€‚\n\n#### ç¤ºä¾‹\n\nå‡è®¾ä½ è¦å†™ä¸€ä¸ªè®¢è´­ pizza å’Œ drink çš„è„šæœ¬ï¼Œä»£ç å¯èƒ½æ˜¯å¦‚ä¸‹è¿™æ ·çš„ï¼š\n\n```js\n(async () => {\n  const pizzaData = await getPizzaData(); // async call\n  const drinkData = await getDrinkData(); // async call\n  const chosenPizza = choosePizza(); // sync call\n  const chosenDrink = chooseDrink(); // sync call\n  await addPizzaToCart(chosenPizza); // async call\n  await addDrinkToCart(chosenDrink); // async call\n  orderItems(); // async call\n})();\n```\n\nè¿™æ®µä»£ç å¼€èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä¹Ÿèƒ½æ­£å¸¸çš„è¿è¡Œã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„å®ç°ï¼Œå› ä¸ºè¿™æŠŠæœ¬èº«å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ä»»åŠ¡å˜æˆäº†ä¸²è¡Œæ‰§è¡Œã€‚\n\né€‰æ‹©ä¸€ä¸ª drink æ·»åŠ åˆ°è´­ç‰©è½¦å’Œé€‰æ‹©ä¸€ä¸ª pizza æ·»åŠ åˆ°è´­ç‰©è½¦å¯ä»¥çœ‹ä½œæ˜¯ä¸¤ä¸ªä»»åŠ¡ï¼Œè€Œè¿™ä¸¤ä¸ªä»»åŠ¡ä¹‹é—´å¹¶æ²¡æœ‰ç›¸äº’ä¾èµ–çš„å…³ç³»ï¼Œä¹Ÿæ²¡æœ‰ç‰¹å®šçš„é¡ºåºæ‰§è¡Œå…³ç³»ã€‚æ‰€ä»¥è¿™ä¸¤ä¸ªä»»åŠ¡æ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ï¼Œè¿™æ ·èƒ½æé«˜æ€§èƒ½ã€‚è€Œä¸Šè¿°ä»£ç å°†äºŒè€…å˜æˆäº†ä¸²è¡Œæ‰§è¡Œï¼Œæ˜¾ç„¶æ˜¯é™ä½äº†ç¨‹åºæ€§èƒ½çš„ã€‚\n\n### æ›´ç³Ÿç³•çš„ä¾‹å­\n\nå‡è®¾è¦å†™ä¸€ä¸ªç¨‹åºï¼Œæ ¹æ® followers æ•°ç”¨æ¥æ˜¾ç¤º GitHub ä¸­å›½åŒºç”¨æˆ·çš„æ’åæƒ…å†µã€‚\n\nå¦‚æœåªæ˜¯è·å–æ’åï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ Github å®˜æ–¹çš„ [Search users](https://developer.github.com/v3/search/#search-users) æ¥å£ï¼Œä¼ªä»£ç å¦‚ä¸‹ï¼š\n\n```js\nasync function getUserRank() {\n  const data = await fetch(search_url);\n  return data;\n}\n\ngetUserRank();\n```\n\nè°ƒç”¨ getUserRank å‡½æ•°å°±èƒ½è·å–åˆ°æƒ³è¦çš„ç»“æœã€‚ä½†æ˜¯ï¼Œä½ å¯èƒ½è¿˜è¦æƒ³è¦è·å–æ¯ä¸ªç”¨æˆ·çš„ follower æ•°ã€emailã€åœ°åŒºå’Œä»“åº“ç­‰æ•°æ®ï¼Œè€Œ Search users æ¥å£å¹¶æ²¡æœ‰è¿”å›è¿™äº›æ•°æ®ï¼Œä½ å¯èƒ½éœ€è¦å†å»è°ƒç”¨ [Single user](https://developer.github.com/v3/users/#get-a-single-user) æ¥å£ã€‚\n\nç„¶åä¸Šè¿°ä»£ç å¯èƒ½è¢«æ”¹å†™ä¸ºï¼š\n\n```js\nasync function getUserRank() {\n  const data = await fetch(search_url);\n  const res = [];\n\n  for (let i = 0; i < data.length; i++) {\n    const item = data[i];\n    const user = await fetch(user_url);\n    res.push({...item, ...user});\n  }\n\n  return res;\n}\n\ngetUserRank();\n```\n\nè¿è¡ŒæŸ¥çœ‹ç»“æœï¼Œè‡ªå·±æƒ³è¦çš„æ•°æ®éƒ½æ‹¿åˆ°äº†ã€‚ä½†æ˜¯ï¼Œä½ å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œç¨‹åºè¿è¡Œæ—¶é—´æœ‰ç‚¹é•¿ï¼Œè¯¥æ€ä¹ˆä¼˜åŒ–ä¸‹å‘¢ï¼Ÿ\n\nå…¶å®ï¼Œé“ºå«äº†è¿™ä¹ˆé•¿ï¼Œå°±æ˜¯æƒ³è¯´æ˜ä¸€ä¸ªé—®é¢˜ï¼šä½ é™·å…¥äº† async/await çš„åœ°ç‹±ã€‚\n\nä¸Šè¿°ä»£ç çš„é—®é¢˜åœ¨äºï¼Œè·å–æ¯ä¸ªç”¨æˆ·èµ„æ–™çš„è¯·æ±‚å¹¶ä¸å­˜åœ¨ä¾èµ–æ€§ï¼Œå°±ç±»ä¼¼ä¸Šæ–‡ä¸­çš„é€‰æ‹© pizza å’Œ drink ä¸€æ ·ï¼Œè¿™æ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„è¯·æ±‚ã€‚è€Œæ ¹æ®ä¸Šè¿°ä»£ç ï¼Œè¯·æ±‚éƒ½å˜æˆäº†ä¸²è¡Œæ‰§è¡Œï¼Œè¿™å½“ç„¶ä¼šæŸè€—ç¨‹åºçš„æ€§èƒ½ã€‚\n\næŒ‰ç…§ä¸Šè¿°ä»£ç ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹å…¶å¼‚æ­¥è¯·æ±‚çš„åŠ¨æ€å›¾ï¼š\n\n![image](https://user-images.githubusercontent.com/7871813/40270076-c08ec820-5bb9-11e8-8470-5e716e87dc76.gif)\n\nå¯ä»¥çœ‹åˆ°ï¼Œè·å–ç”¨æˆ·èµ„æ–™çš„æ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦ç­‰åˆ°ä¸Šä¸€ä¸ªè¯·æ±‚å®Œæˆä¹‹åæ‰èƒ½æ‰§è¡Œï¼ŒWaterfall å¤„äºä¸€ä¸ªä¸²è¡Œçš„çŠ¶æ€ã€‚é‚£è¦æ€ä¹ˆæ”¹è¿›è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ\n\næ—¢ç„¶è·å–æ¯ä¸ªç”¨æˆ·èµ„æ–™çš„è¯·æ±‚å¹¶ä¸å­˜åœ¨ä¾èµ–æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å…ˆè§¦å‘å¼‚æ­¥è¯·æ±‚ï¼Œç„¶åå»¶è¿Ÿå¤„ç†å¼‚æ­¥è¯·æ±‚çš„ç»“æœï¼Œè€Œä¸æ˜¯ä¸€ç›´ç­‰è¯¥è¯·æ±‚å®Œæˆã€‚æ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œé‚£å¯èƒ½æ”¹è¿›çš„ä»£ç å¦‚ä¸‹ï¼š\n\n```js\nasync function getUserDetails (username) {\n  const user = await fetch(user_url);\n  return user;\n}\n\nasync function getUserRank () {\n  const data = await fetch(search_url);\n  const promises = data.map((item) => getUserDetails(item.username));\n  await Promise.all(promises).then(handleYourData);\n}\n\ngetUserRank();\n```\n\nå¯ä»¥çœ‹ä¸€ä¸‹å¼‚æ­¥è¯·æ±‚çš„åŠ¨æ€å›¾ï¼š\n\n![image](https://user-images.githubusercontent.com/7871813/40270077-c2536602-5bb9-11e8-9438-a15ac05b41e0.gif)\n\nå¯ä»¥çœ‹åˆ°ï¼Œè·å–ç”¨æˆ·èµ„æ–™çš„å¼‚æ­¥è¯·æ±‚å¤„ç†ä¸å†æ˜¯ä¸²è¡Œæ‰§è¡Œï¼Œè€Œæ˜¯å¹¶è¡Œæ‰§è¡Œäº†ï¼Œè¿™å°†å¤§å¤§æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡å’Œæ€§èƒ½ã€‚\n\n### æ€»ç»“\n\nAditya Agarwal åœ¨å…¶æ–‡ç« ä¸­ä¹Ÿç»™å‡ºäº†æ€ä¹ˆé¿å…é™·å…¥ async/await åœ°ç‹±çš„å»ºè®®ï¼š\n\n1. é¦–å…ˆæ‰¾å‡ºä¾èµ–äºå…¶ä»–è¯­å¥çš„æ‰§è¡Œçš„è¯­å¥\n2. ç„¶åå°†æœ‰ä¾èµ–å…³ç³»çš„ä¸€ç³»åˆ—è¯­å¥è¿›è¡Œç»„åˆï¼Œåˆå¹¶æˆä¸€ä¸ªå¼‚æ­¥å‡½æ•°\n3. æœ€åç”¨æ­£ç¡®çš„æ–¹å¼æ‰§è¡Œè¿™äº›å‡½æ•°\n\n### å‚è€ƒ\n\n* [ç²¾è¯»ã€Šasync/await æ˜¯æŠŠåŒåˆƒå‰‘ã€‹](https://github.com/dt-fe/weekly/blob/master/55.%E7%B2%BE%E8%AF%BB%E3%80%8Aasync%20await%20%E6%98%AF%E6%8A%8A%E5%8F%8C%E5%88%83%E5%89%91%E3%80%8B.md)\n* [async å‡½æ•°çš„å«ä¹‰å’Œç”¨æ³•](http://www.ruanyifeng.com/blog/2015/05/async.html)\n* [ä½“éªŒå¼‚æ­¥çš„ç»ˆæè§£å†³æ–¹æ¡ˆ - ES7 çš„ Async/Await](https://cnodejs.org/topic/5640b80d3a6aa72c5e0030b6)\n* [How to escape async/await hell](https://github.com/dwqs/blog/issues/65)\n","source":"_posts/å¦‚ä½•é¿å…-async-await-åœ°ç‹±.md","raw":"---\ntitle: å¦‚ä½•é¿å… async/await åœ°ç‹±\ncomments: true\ndate: 2018-05-20 22:11:35\ntags:\nfrom: https://medium.freecodecamp.org/avoiding-the-async-await-hell-c77a0fb71c4c\n---\n\næœ€è¿‘é˜…è¯»äº† Aditya Agarwal çš„ä¸€ç¯‡æ–‡ç« ï¼šHow to escape async/await hellã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦è®¨è®ºäº†è¿‡åº¦ä½¿ç”¨ async/await å¯¼è‡´çš„æ–°çš„ã€Œåœ°ç‹±ã€é—®é¢˜ï¼Œå…¶å·²ç»åœ¨ Medium ä¸Šè·å¾—äº† 19k+ çš„ Applauseã€‚\n\n<!-- more -->\n\n<div class=\"tip\">\n  async/await æ˜¯ ES7 çš„æ–°è¯­æ³•ã€‚åœ¨ async/await æ ‡å‡†å‡ºæ¥ä¹‹å‰ï¼ŒJavaScript çš„å¼‚æ­¥ç¼–ç¨‹ç»å†äº† callback --> promise --> generator çš„æ¼”å˜è¿‡ç¨‹ã€‚\n</div>\n\nåœ¨ callback çš„æ—¶ä»£ï¼Œæœ€è®©äººå¤´ç–¼çš„é—®é¢˜å°±æ˜¯å›è°ƒåœ°ç‹± (callback hell)ã€‚æ‰€ä»¥ï¼Œåœ¨ async/await ä¸€ç»æ¨å‡ºï¼Œç¤¾åŒºå°±æœ‰äººè®¤ä¸ºã€Œè¿™æ˜¯ JavaScript å¼‚æ­¥ç¼–ç¨‹çš„ç»ˆæè§£å†³æ–¹æ¡ˆã€ã€‚ä½† async/await ä¹Ÿå¯èƒ½å¸¦æ¥æ–°çš„é—®é¢˜ã€‚\n\n> å¥½ä¸å®¹æ˜“é€ƒç¦»äº†ä¸€ä¸ªã€Œåœ°ç‹±ã€ï¼Œåˆé©¬ä¸Šé™·å…¥å¦ä¸€ä¸ªã€Œåœ°ç‹±ã€äº†ã€‚\n\n### ä½•ä¸º async/await åœ°ç‹±\n\nåœ¨ç¼–å†™å¼‚æ­¥ä»£ç æ—¶ï¼Œäººä»¬æ€»æ˜¯å–œæ¬¢ä¸€æ¬¡å†™å¤šä¸ªè¯­å¥ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå‡½æ•°è°ƒç”¨ä¹‹å‰ä½¿ç”¨ await å…³é”®å­—ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™ä¸€ä¸ªè¯­å¥å¹¶ä¸ä¾èµ–äºå‰ä¸€ä¸ªè¯­å¥â€”â€”ä½†ä½¿ç”¨ await å…³é”®å­—åï¼Œä½ å°±éœ€è¦ç­‰å¾…å‰ä¸€ä¸ªè¯­å¥å®Œæˆã€‚\n\n#### ç¤ºä¾‹\n\nå‡è®¾ä½ è¦å†™ä¸€ä¸ªè®¢è´­ pizza å’Œ drink çš„è„šæœ¬ï¼Œä»£ç å¯èƒ½æ˜¯å¦‚ä¸‹è¿™æ ·çš„ï¼š\n\n```js\n(async () => {\n  const pizzaData = await getPizzaData(); // async call\n  const drinkData = await getDrinkData(); // async call\n  const chosenPizza = choosePizza(); // sync call\n  const chosenDrink = chooseDrink(); // sync call\n  await addPizzaToCart(chosenPizza); // async call\n  await addDrinkToCart(chosenDrink); // async call\n  orderItems(); // async call\n})();\n```\n\nè¿™æ®µä»£ç å¼€èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä¹Ÿèƒ½æ­£å¸¸çš„è¿è¡Œã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„å®ç°ï¼Œå› ä¸ºè¿™æŠŠæœ¬èº«å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ä»»åŠ¡å˜æˆäº†ä¸²è¡Œæ‰§è¡Œã€‚\n\né€‰æ‹©ä¸€ä¸ª drink æ·»åŠ åˆ°è´­ç‰©è½¦å’Œé€‰æ‹©ä¸€ä¸ª pizza æ·»åŠ åˆ°è´­ç‰©è½¦å¯ä»¥çœ‹ä½œæ˜¯ä¸¤ä¸ªä»»åŠ¡ï¼Œè€Œè¿™ä¸¤ä¸ªä»»åŠ¡ä¹‹é—´å¹¶æ²¡æœ‰ç›¸äº’ä¾èµ–çš„å…³ç³»ï¼Œä¹Ÿæ²¡æœ‰ç‰¹å®šçš„é¡ºåºæ‰§è¡Œå…³ç³»ã€‚æ‰€ä»¥è¿™ä¸¤ä¸ªä»»åŠ¡æ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ï¼Œè¿™æ ·èƒ½æé«˜æ€§èƒ½ã€‚è€Œä¸Šè¿°ä»£ç å°†äºŒè€…å˜æˆäº†ä¸²è¡Œæ‰§è¡Œï¼Œæ˜¾ç„¶æ˜¯é™ä½äº†ç¨‹åºæ€§èƒ½çš„ã€‚\n\n### æ›´ç³Ÿç³•çš„ä¾‹å­\n\nå‡è®¾è¦å†™ä¸€ä¸ªç¨‹åºï¼Œæ ¹æ® followers æ•°ç”¨æ¥æ˜¾ç¤º GitHub ä¸­å›½åŒºç”¨æˆ·çš„æ’åæƒ…å†µã€‚\n\nå¦‚æœåªæ˜¯è·å–æ’åï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ Github å®˜æ–¹çš„ [Search users](https://developer.github.com/v3/search/#search-users) æ¥å£ï¼Œä¼ªä»£ç å¦‚ä¸‹ï¼š\n\n```js\nasync function getUserRank() {\n  const data = await fetch(search_url);\n  return data;\n}\n\ngetUserRank();\n```\n\nè°ƒç”¨ getUserRank å‡½æ•°å°±èƒ½è·å–åˆ°æƒ³è¦çš„ç»“æœã€‚ä½†æ˜¯ï¼Œä½ å¯èƒ½è¿˜è¦æƒ³è¦è·å–æ¯ä¸ªç”¨æˆ·çš„ follower æ•°ã€emailã€åœ°åŒºå’Œä»“åº“ç­‰æ•°æ®ï¼Œè€Œ Search users æ¥å£å¹¶æ²¡æœ‰è¿”å›è¿™äº›æ•°æ®ï¼Œä½ å¯èƒ½éœ€è¦å†å»è°ƒç”¨ [Single user](https://developer.github.com/v3/users/#get-a-single-user) æ¥å£ã€‚\n\nç„¶åä¸Šè¿°ä»£ç å¯èƒ½è¢«æ”¹å†™ä¸ºï¼š\n\n```js\nasync function getUserRank() {\n  const data = await fetch(search_url);\n  const res = [];\n\n  for (let i = 0; i < data.length; i++) {\n    const item = data[i];\n    const user = await fetch(user_url);\n    res.push({...item, ...user});\n  }\n\n  return res;\n}\n\ngetUserRank();\n```\n\nè¿è¡ŒæŸ¥çœ‹ç»“æœï¼Œè‡ªå·±æƒ³è¦çš„æ•°æ®éƒ½æ‹¿åˆ°äº†ã€‚ä½†æ˜¯ï¼Œä½ å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œç¨‹åºè¿è¡Œæ—¶é—´æœ‰ç‚¹é•¿ï¼Œè¯¥æ€ä¹ˆä¼˜åŒ–ä¸‹å‘¢ï¼Ÿ\n\nå…¶å®ï¼Œé“ºå«äº†è¿™ä¹ˆé•¿ï¼Œå°±æ˜¯æƒ³è¯´æ˜ä¸€ä¸ªé—®é¢˜ï¼šä½ é™·å…¥äº† async/await çš„åœ°ç‹±ã€‚\n\nä¸Šè¿°ä»£ç çš„é—®é¢˜åœ¨äºï¼Œè·å–æ¯ä¸ªç”¨æˆ·èµ„æ–™çš„è¯·æ±‚å¹¶ä¸å­˜åœ¨ä¾èµ–æ€§ï¼Œå°±ç±»ä¼¼ä¸Šæ–‡ä¸­çš„é€‰æ‹© pizza å’Œ drink ä¸€æ ·ï¼Œè¿™æ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„è¯·æ±‚ã€‚è€Œæ ¹æ®ä¸Šè¿°ä»£ç ï¼Œè¯·æ±‚éƒ½å˜æˆäº†ä¸²è¡Œæ‰§è¡Œï¼Œè¿™å½“ç„¶ä¼šæŸè€—ç¨‹åºçš„æ€§èƒ½ã€‚\n\næŒ‰ç…§ä¸Šè¿°ä»£ç ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹å…¶å¼‚æ­¥è¯·æ±‚çš„åŠ¨æ€å›¾ï¼š\n\n![image](https://user-images.githubusercontent.com/7871813/40270076-c08ec820-5bb9-11e8-8470-5e716e87dc76.gif)\n\nå¯ä»¥çœ‹åˆ°ï¼Œè·å–ç”¨æˆ·èµ„æ–™çš„æ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦ç­‰åˆ°ä¸Šä¸€ä¸ªè¯·æ±‚å®Œæˆä¹‹åæ‰èƒ½æ‰§è¡Œï¼ŒWaterfall å¤„äºä¸€ä¸ªä¸²è¡Œçš„çŠ¶æ€ã€‚é‚£è¦æ€ä¹ˆæ”¹è¿›è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ\n\næ—¢ç„¶è·å–æ¯ä¸ªç”¨æˆ·èµ„æ–™çš„è¯·æ±‚å¹¶ä¸å­˜åœ¨ä¾èµ–æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å…ˆè§¦å‘å¼‚æ­¥è¯·æ±‚ï¼Œç„¶åå»¶è¿Ÿå¤„ç†å¼‚æ­¥è¯·æ±‚çš„ç»“æœï¼Œè€Œä¸æ˜¯ä¸€ç›´ç­‰è¯¥è¯·æ±‚å®Œæˆã€‚æ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œé‚£å¯èƒ½æ”¹è¿›çš„ä»£ç å¦‚ä¸‹ï¼š\n\n```js\nasync function getUserDetails (username) {\n  const user = await fetch(user_url);\n  return user;\n}\n\nasync function getUserRank () {\n  const data = await fetch(search_url);\n  const promises = data.map((item) => getUserDetails(item.username));\n  await Promise.all(promises).then(handleYourData);\n}\n\ngetUserRank();\n```\n\nå¯ä»¥çœ‹ä¸€ä¸‹å¼‚æ­¥è¯·æ±‚çš„åŠ¨æ€å›¾ï¼š\n\n![image](https://user-images.githubusercontent.com/7871813/40270077-c2536602-5bb9-11e8-9438-a15ac05b41e0.gif)\n\nå¯ä»¥çœ‹åˆ°ï¼Œè·å–ç”¨æˆ·èµ„æ–™çš„å¼‚æ­¥è¯·æ±‚å¤„ç†ä¸å†æ˜¯ä¸²è¡Œæ‰§è¡Œï¼Œè€Œæ˜¯å¹¶è¡Œæ‰§è¡Œäº†ï¼Œè¿™å°†å¤§å¤§æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡å’Œæ€§èƒ½ã€‚\n\n### æ€»ç»“\n\nAditya Agarwal åœ¨å…¶æ–‡ç« ä¸­ä¹Ÿç»™å‡ºäº†æ€ä¹ˆé¿å…é™·å…¥ async/await åœ°ç‹±çš„å»ºè®®ï¼š\n\n1. é¦–å…ˆæ‰¾å‡ºä¾èµ–äºå…¶ä»–è¯­å¥çš„æ‰§è¡Œçš„è¯­å¥\n2. ç„¶åå°†æœ‰ä¾èµ–å…³ç³»çš„ä¸€ç³»åˆ—è¯­å¥è¿›è¡Œç»„åˆï¼Œåˆå¹¶æˆä¸€ä¸ªå¼‚æ­¥å‡½æ•°\n3. æœ€åç”¨æ­£ç¡®çš„æ–¹å¼æ‰§è¡Œè¿™äº›å‡½æ•°\n\n### å‚è€ƒ\n\n* [ç²¾è¯»ã€Šasync/await æ˜¯æŠŠåŒåˆƒå‰‘ã€‹](https://github.com/dt-fe/weekly/blob/master/55.%E7%B2%BE%E8%AF%BB%E3%80%8Aasync%20await%20%E6%98%AF%E6%8A%8A%E5%8F%8C%E5%88%83%E5%89%91%E3%80%8B.md)\n* [async å‡½æ•°çš„å«ä¹‰å’Œç”¨æ³•](http://www.ruanyifeng.com/blog/2015/05/async.html)\n* [ä½“éªŒå¼‚æ­¥çš„ç»ˆæè§£å†³æ–¹æ¡ˆ - ES7 çš„ Async/Await](https://cnodejs.org/topic/5640b80d3a6aa72c5e0030b6)\n* [How to escape async/await hell](https://github.com/dwqs/blog/issues/65)\n","slug":"å¦‚ä½•é¿å…-async-await-åœ°ç‹±","published":1,"updated":"2018-12-26T16:01:04.000Z","layout":"post","photos":[],"link":"","_id":"ck3v60jtq000tr9q9fjh0ovd5","content":"<p>æœ€è¿‘é˜…è¯»äº† Aditya Agarwal çš„ä¸€ç¯‡æ–‡ç« ï¼šHow to escape async/await hellã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦è®¨è®ºäº†è¿‡åº¦ä½¿ç”¨ async/await å¯¼è‡´çš„æ–°çš„ã€Œåœ°ç‹±ã€é—®é¢˜ï¼Œå…¶å·²ç»åœ¨ Medium ä¸Šè·å¾—äº† 19k+ çš„ Applauseã€‚</p>\n<a id=\"more\"></a>\n<div class=\"tip\"><br>  async/await æ˜¯ ES7 çš„æ–°è¯­æ³•ã€‚åœ¨ async/await æ ‡å‡†å‡ºæ¥ä¹‹å‰ï¼ŒJavaScript çš„å¼‚æ­¥ç¼–ç¨‹ç»å†äº† callback â€“&gt; promise â€“&gt; generator çš„æ¼”å˜è¿‡ç¨‹ã€‚<br></div>\n\n<p>åœ¨ callback çš„æ—¶ä»£ï¼Œæœ€è®©äººå¤´ç–¼çš„é—®é¢˜å°±æ˜¯å›è°ƒåœ°ç‹± (callback hell)ã€‚æ‰€ä»¥ï¼Œåœ¨ async/await ä¸€ç»æ¨å‡ºï¼Œç¤¾åŒºå°±æœ‰äººè®¤ä¸ºã€Œè¿™æ˜¯ JavaScript å¼‚æ­¥ç¼–ç¨‹çš„ç»ˆæè§£å†³æ–¹æ¡ˆã€ã€‚ä½† async/await ä¹Ÿå¯èƒ½å¸¦æ¥æ–°çš„é—®é¢˜ã€‚</p>\n<blockquote>\n<p>å¥½ä¸å®¹æ˜“é€ƒç¦»äº†ä¸€ä¸ªã€Œåœ°ç‹±ã€ï¼Œåˆé©¬ä¸Šé™·å…¥å¦ä¸€ä¸ªã€Œåœ°ç‹±ã€äº†ã€‚</p>\n</blockquote>\n<h3 id=\"ä½•ä¸º-async-await-åœ°ç‹±\"><a href=\"#ä½•ä¸º-async-await-åœ°ç‹±\" class=\"headerlink\" title=\"ä½•ä¸º async/await åœ°ç‹±\"></a>ä½•ä¸º async/await åœ°ç‹±</h3><p>åœ¨ç¼–å†™å¼‚æ­¥ä»£ç æ—¶ï¼Œäººä»¬æ€»æ˜¯å–œæ¬¢ä¸€æ¬¡å†™å¤šä¸ªè¯­å¥ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå‡½æ•°è°ƒç”¨ä¹‹å‰ä½¿ç”¨ await å…³é”®å­—ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™ä¸€ä¸ªè¯­å¥å¹¶ä¸ä¾èµ–äºå‰ä¸€ä¸ªè¯­å¥â€”â€”ä½†ä½¿ç”¨ await å…³é”®å­—åï¼Œä½ å°±éœ€è¦ç­‰å¾…å‰ä¸€ä¸ªè¯­å¥å®Œæˆã€‚</p>\n<h4 id=\"ç¤ºä¾‹\"><a href=\"#ç¤ºä¾‹\" class=\"headerlink\" title=\"ç¤ºä¾‹\"></a>ç¤ºä¾‹</h4><p>å‡è®¾ä½ è¦å†™ä¸€ä¸ªè®¢è´­ pizza å’Œ drink çš„è„šæœ¬ï¼Œä»£ç å¯èƒ½æ˜¯å¦‚ä¸‹è¿™æ ·çš„ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> pizzaData = <span class=\"keyword\">await</span> getPizzaData(); <span class=\"comment\">// async call</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> drinkData = <span class=\"keyword\">await</span> getDrinkData(); <span class=\"comment\">// async call</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> chosenPizza = choosePizza(); <span class=\"comment\">// sync call</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> chosenDrink = chooseDrink(); <span class=\"comment\">// sync call</span></span><br><span class=\"line\">  <span class=\"keyword\">await</span> addPizzaToCart(chosenPizza); <span class=\"comment\">// async call</span></span><br><span class=\"line\">  <span class=\"keyword\">await</span> addDrinkToCart(chosenDrink); <span class=\"comment\">// async call</span></span><br><span class=\"line\">  orderItems(); <span class=\"comment\">// async call</span></span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure>\n<p>è¿™æ®µä»£ç å¼€èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä¹Ÿèƒ½æ­£å¸¸çš„è¿è¡Œã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„å®ç°ï¼Œå› ä¸ºè¿™æŠŠæœ¬èº«å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ä»»åŠ¡å˜æˆäº†ä¸²è¡Œæ‰§è¡Œã€‚</p>\n<p>é€‰æ‹©ä¸€ä¸ª drink æ·»åŠ åˆ°è´­ç‰©è½¦å’Œé€‰æ‹©ä¸€ä¸ª pizza æ·»åŠ åˆ°è´­ç‰©è½¦å¯ä»¥çœ‹ä½œæ˜¯ä¸¤ä¸ªä»»åŠ¡ï¼Œè€Œè¿™ä¸¤ä¸ªä»»åŠ¡ä¹‹é—´å¹¶æ²¡æœ‰ç›¸äº’ä¾èµ–çš„å…³ç³»ï¼Œä¹Ÿæ²¡æœ‰ç‰¹å®šçš„é¡ºåºæ‰§è¡Œå…³ç³»ã€‚æ‰€ä»¥è¿™ä¸¤ä¸ªä»»åŠ¡æ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ï¼Œè¿™æ ·èƒ½æé«˜æ€§èƒ½ã€‚è€Œä¸Šè¿°ä»£ç å°†äºŒè€…å˜æˆäº†ä¸²è¡Œæ‰§è¡Œï¼Œæ˜¾ç„¶æ˜¯é™ä½äº†ç¨‹åºæ€§èƒ½çš„ã€‚</p>\n<h3 id=\"æ›´ç³Ÿç³•çš„ä¾‹å­\"><a href=\"#æ›´ç³Ÿç³•çš„ä¾‹å­\" class=\"headerlink\" title=\"æ›´ç³Ÿç³•çš„ä¾‹å­\"></a>æ›´ç³Ÿç³•çš„ä¾‹å­</h3><p>å‡è®¾è¦å†™ä¸€ä¸ªç¨‹åºï¼Œæ ¹æ® followers æ•°ç”¨æ¥æ˜¾ç¤º GitHub ä¸­å›½åŒºç”¨æˆ·çš„æ’åæƒ…å†µã€‚</p>\n<p>å¦‚æœåªæ˜¯è·å–æ’åï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ Github å®˜æ–¹çš„ <a href=\"https://developer.github.com/v3/search/#search-users\" target=\"_blank\" rel=\"noopener\">Search users</a> æ¥å£ï¼Œä¼ªä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserRank</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> fetch(search_url);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">getUserRank();</span><br></pre></td></tr></table></figure>\n<p>è°ƒç”¨ getUserRank å‡½æ•°å°±èƒ½è·å–åˆ°æƒ³è¦çš„ç»“æœã€‚ä½†æ˜¯ï¼Œä½ å¯èƒ½è¿˜è¦æƒ³è¦è·å–æ¯ä¸ªç”¨æˆ·çš„ follower æ•°ã€emailã€åœ°åŒºå’Œä»“åº“ç­‰æ•°æ®ï¼Œè€Œ Search users æ¥å£å¹¶æ²¡æœ‰è¿”å›è¿™äº›æ•°æ®ï¼Œä½ å¯èƒ½éœ€è¦å†å»è°ƒç”¨ <a href=\"https://developer.github.com/v3/users/#get-a-single-user\" target=\"_blank\" rel=\"noopener\">Single user</a> æ¥å£ã€‚</p>\n<p>ç„¶åä¸Šè¿°ä»£ç å¯èƒ½è¢«æ”¹å†™ä¸ºï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserRank</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> fetch(search_url);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> res = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; data.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> item = data[i];</span><br><span class=\"line\">    <span class=\"keyword\">const</span> user = <span class=\"keyword\">await</span> fetch(user_url);</span><br><span class=\"line\">    res.push(&#123;...item, ...user&#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">getUserRank();</span><br></pre></td></tr></table></figure>\n<p>è¿è¡ŒæŸ¥çœ‹ç»“æœï¼Œè‡ªå·±æƒ³è¦çš„æ•°æ®éƒ½æ‹¿åˆ°äº†ã€‚ä½†æ˜¯ï¼Œä½ å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œç¨‹åºè¿è¡Œæ—¶é—´æœ‰ç‚¹é•¿ï¼Œè¯¥æ€ä¹ˆä¼˜åŒ–ä¸‹å‘¢ï¼Ÿ</p>\n<p>å…¶å®ï¼Œé“ºå«äº†è¿™ä¹ˆé•¿ï¼Œå°±æ˜¯æƒ³è¯´æ˜ä¸€ä¸ªé—®é¢˜ï¼šä½ é™·å…¥äº† async/await çš„åœ°ç‹±ã€‚</p>\n<p>ä¸Šè¿°ä»£ç çš„é—®é¢˜åœ¨äºï¼Œè·å–æ¯ä¸ªç”¨æˆ·èµ„æ–™çš„è¯·æ±‚å¹¶ä¸å­˜åœ¨ä¾èµ–æ€§ï¼Œå°±ç±»ä¼¼ä¸Šæ–‡ä¸­çš„é€‰æ‹© pizza å’Œ drink ä¸€æ ·ï¼Œè¿™æ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„è¯·æ±‚ã€‚è€Œæ ¹æ®ä¸Šè¿°ä»£ç ï¼Œè¯·æ±‚éƒ½å˜æˆäº†ä¸²è¡Œæ‰§è¡Œï¼Œè¿™å½“ç„¶ä¼šæŸè€—ç¨‹åºçš„æ€§èƒ½ã€‚</p>\n<p>æŒ‰ç…§ä¸Šè¿°ä»£ç ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹å…¶å¼‚æ­¥è¯·æ±‚çš„åŠ¨æ€å›¾ï¼š</p>\n<p><img src=\"https://user-images.githubusercontent.com/7871813/40270076-c08ec820-5bb9-11e8-8470-5e716e87dc76.gif\" alt=\"image\"></p>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œè·å–ç”¨æˆ·èµ„æ–™çš„æ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦ç­‰åˆ°ä¸Šä¸€ä¸ªè¯·æ±‚å®Œæˆä¹‹åæ‰èƒ½æ‰§è¡Œï¼ŒWaterfall å¤„äºä¸€ä¸ªä¸²è¡Œçš„çŠ¶æ€ã€‚é‚£è¦æ€ä¹ˆæ”¹è¿›è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p>\n<p>æ—¢ç„¶è·å–æ¯ä¸ªç”¨æˆ·èµ„æ–™çš„è¯·æ±‚å¹¶ä¸å­˜åœ¨ä¾èµ–æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å…ˆè§¦å‘å¼‚æ­¥è¯·æ±‚ï¼Œç„¶åå»¶è¿Ÿå¤„ç†å¼‚æ­¥è¯·æ±‚çš„ç»“æœï¼Œè€Œä¸æ˜¯ä¸€ç›´ç­‰è¯¥è¯·æ±‚å®Œæˆã€‚æ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œé‚£å¯èƒ½æ”¹è¿›çš„ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserDetails</span> (<span class=\"params\">username</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> user = <span class=\"keyword\">await</span> fetch(user_url);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> user;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserRank</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> fetch(search_url);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> promises = data.map(<span class=\"function\">(<span class=\"params\">item</span>) =&gt;</span> getUserDetails(item.username));</span><br><span class=\"line\">  <span class=\"keyword\">await</span> <span class=\"built_in\">Promise</span>.all(promises).then(handleYourData);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">getUserRank();</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹ä¸€ä¸‹å¼‚æ­¥è¯·æ±‚çš„åŠ¨æ€å›¾ï¼š</p>\n<p><img src=\"https://user-images.githubusercontent.com/7871813/40270077-c2536602-5bb9-11e8-9438-a15ac05b41e0.gif\" alt=\"image\"></p>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œè·å–ç”¨æˆ·èµ„æ–™çš„å¼‚æ­¥è¯·æ±‚å¤„ç†ä¸å†æ˜¯ä¸²è¡Œæ‰§è¡Œï¼Œè€Œæ˜¯å¹¶è¡Œæ‰§è¡Œäº†ï¼Œè¿™å°†å¤§å¤§æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡å’Œæ€§èƒ½ã€‚</p>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>Aditya Agarwal åœ¨å…¶æ–‡ç« ä¸­ä¹Ÿç»™å‡ºäº†æ€ä¹ˆé¿å…é™·å…¥ async/await åœ°ç‹±çš„å»ºè®®ï¼š</p>\n<ol>\n<li>é¦–å…ˆæ‰¾å‡ºä¾èµ–äºå…¶ä»–è¯­å¥çš„æ‰§è¡Œçš„è¯­å¥</li>\n<li>ç„¶åå°†æœ‰ä¾èµ–å…³ç³»çš„ä¸€ç³»åˆ—è¯­å¥è¿›è¡Œç»„åˆï¼Œåˆå¹¶æˆä¸€ä¸ªå¼‚æ­¥å‡½æ•°</li>\n<li>æœ€åç”¨æ­£ç¡®çš„æ–¹å¼æ‰§è¡Œè¿™äº›å‡½æ•°</li>\n</ol>\n<h3 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h3><ul>\n<li><a href=\"https://github.com/dt-fe/weekly/blob/master/55.%E7%B2%BE%E8%AF%BB%E3%80%8Aasync%20await%20%E6%98%AF%E6%8A%8A%E5%8F%8C%E5%88%83%E5%89%91%E3%80%8B.md\" target=\"_blank\" rel=\"noopener\">ç²¾è¯»ã€Šasync/await æ˜¯æŠŠåŒåˆƒå‰‘ã€‹</a></li>\n<li><a href=\"http://www.ruanyifeng.com/blog/2015/05/async.html\" target=\"_blank\" rel=\"noopener\">async å‡½æ•°çš„å«ä¹‰å’Œç”¨æ³•</a></li>\n<li><a href=\"https://cnodejs.org/topic/5640b80d3a6aa72c5e0030b6\" target=\"_blank\" rel=\"noopener\">ä½“éªŒå¼‚æ­¥çš„ç»ˆæè§£å†³æ–¹æ¡ˆ - ES7 çš„ Async/Await</a></li>\n<li><a href=\"https://github.com/dwqs/blog/issues/65\" target=\"_blank\" rel=\"noopener\">How to escape async/await hell</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>æœ€è¿‘é˜…è¯»äº† Aditya Agarwal çš„ä¸€ç¯‡æ–‡ç« ï¼šHow to escape async/await hellã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦è®¨è®ºäº†è¿‡åº¦ä½¿ç”¨ async/await å¯¼è‡´çš„æ–°çš„ã€Œåœ°ç‹±ã€é—®é¢˜ï¼Œå…¶å·²ç»åœ¨ Medium ä¸Šè·å¾—äº† 19k+ çš„ Applauseã€‚</p>","more":"<div class=\"tip\"><br>  async/await æ˜¯ ES7 çš„æ–°è¯­æ³•ã€‚åœ¨ async/await æ ‡å‡†å‡ºæ¥ä¹‹å‰ï¼ŒJavaScript çš„å¼‚æ­¥ç¼–ç¨‹ç»å†äº† callback â€“&gt; promise â€“&gt; generator çš„æ¼”å˜è¿‡ç¨‹ã€‚<br></div>\n\n<p>åœ¨ callback çš„æ—¶ä»£ï¼Œæœ€è®©äººå¤´ç–¼çš„é—®é¢˜å°±æ˜¯å›è°ƒåœ°ç‹± (callback hell)ã€‚æ‰€ä»¥ï¼Œåœ¨ async/await ä¸€ç»æ¨å‡ºï¼Œç¤¾åŒºå°±æœ‰äººè®¤ä¸ºã€Œè¿™æ˜¯ JavaScript å¼‚æ­¥ç¼–ç¨‹çš„ç»ˆæè§£å†³æ–¹æ¡ˆã€ã€‚ä½† async/await ä¹Ÿå¯èƒ½å¸¦æ¥æ–°çš„é—®é¢˜ã€‚</p>\n<blockquote>\n<p>å¥½ä¸å®¹æ˜“é€ƒç¦»äº†ä¸€ä¸ªã€Œåœ°ç‹±ã€ï¼Œåˆé©¬ä¸Šé™·å…¥å¦ä¸€ä¸ªã€Œåœ°ç‹±ã€äº†ã€‚</p>\n</blockquote>\n<h3 id=\"ä½•ä¸º-async-await-åœ°ç‹±\"><a href=\"#ä½•ä¸º-async-await-åœ°ç‹±\" class=\"headerlink\" title=\"ä½•ä¸º async/await åœ°ç‹±\"></a>ä½•ä¸º async/await åœ°ç‹±</h3><p>åœ¨ç¼–å†™å¼‚æ­¥ä»£ç æ—¶ï¼Œäººä»¬æ€»æ˜¯å–œæ¬¢ä¸€æ¬¡å†™å¤šä¸ªè¯­å¥ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå‡½æ•°è°ƒç”¨ä¹‹å‰ä½¿ç”¨ await å…³é”®å­—ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™ä¸€ä¸ªè¯­å¥å¹¶ä¸ä¾èµ–äºå‰ä¸€ä¸ªè¯­å¥â€”â€”ä½†ä½¿ç”¨ await å…³é”®å­—åï¼Œä½ å°±éœ€è¦ç­‰å¾…å‰ä¸€ä¸ªè¯­å¥å®Œæˆã€‚</p>\n<h4 id=\"ç¤ºä¾‹\"><a href=\"#ç¤ºä¾‹\" class=\"headerlink\" title=\"ç¤ºä¾‹\"></a>ç¤ºä¾‹</h4><p>å‡è®¾ä½ è¦å†™ä¸€ä¸ªè®¢è´­ pizza å’Œ drink çš„è„šæœ¬ï¼Œä»£ç å¯èƒ½æ˜¯å¦‚ä¸‹è¿™æ ·çš„ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> pizzaData = <span class=\"keyword\">await</span> getPizzaData(); <span class=\"comment\">// async call</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> drinkData = <span class=\"keyword\">await</span> getDrinkData(); <span class=\"comment\">// async call</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> chosenPizza = choosePizza(); <span class=\"comment\">// sync call</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> chosenDrink = chooseDrink(); <span class=\"comment\">// sync call</span></span><br><span class=\"line\">  <span class=\"keyword\">await</span> addPizzaToCart(chosenPizza); <span class=\"comment\">// async call</span></span><br><span class=\"line\">  <span class=\"keyword\">await</span> addDrinkToCart(chosenDrink); <span class=\"comment\">// async call</span></span><br><span class=\"line\">  orderItems(); <span class=\"comment\">// async call</span></span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure>\n<p>è¿™æ®µä»£ç å¼€èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä¹Ÿèƒ½æ­£å¸¸çš„è¿è¡Œã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„å®ç°ï¼Œå› ä¸ºè¿™æŠŠæœ¬èº«å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ä»»åŠ¡å˜æˆäº†ä¸²è¡Œæ‰§è¡Œã€‚</p>\n<p>é€‰æ‹©ä¸€ä¸ª drink æ·»åŠ åˆ°è´­ç‰©è½¦å’Œé€‰æ‹©ä¸€ä¸ª pizza æ·»åŠ åˆ°è´­ç‰©è½¦å¯ä»¥çœ‹ä½œæ˜¯ä¸¤ä¸ªä»»åŠ¡ï¼Œè€Œè¿™ä¸¤ä¸ªä»»åŠ¡ä¹‹é—´å¹¶æ²¡æœ‰ç›¸äº’ä¾èµ–çš„å…³ç³»ï¼Œä¹Ÿæ²¡æœ‰ç‰¹å®šçš„é¡ºåºæ‰§è¡Œå…³ç³»ã€‚æ‰€ä»¥è¿™ä¸¤ä¸ªä»»åŠ¡æ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ï¼Œè¿™æ ·èƒ½æé«˜æ€§èƒ½ã€‚è€Œä¸Šè¿°ä»£ç å°†äºŒè€…å˜æˆäº†ä¸²è¡Œæ‰§è¡Œï¼Œæ˜¾ç„¶æ˜¯é™ä½äº†ç¨‹åºæ€§èƒ½çš„ã€‚</p>\n<h3 id=\"æ›´ç³Ÿç³•çš„ä¾‹å­\"><a href=\"#æ›´ç³Ÿç³•çš„ä¾‹å­\" class=\"headerlink\" title=\"æ›´ç³Ÿç³•çš„ä¾‹å­\"></a>æ›´ç³Ÿç³•çš„ä¾‹å­</h3><p>å‡è®¾è¦å†™ä¸€ä¸ªç¨‹åºï¼Œæ ¹æ® followers æ•°ç”¨æ¥æ˜¾ç¤º GitHub ä¸­å›½åŒºç”¨æˆ·çš„æ’åæƒ…å†µã€‚</p>\n<p>å¦‚æœåªæ˜¯è·å–æ’åï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ Github å®˜æ–¹çš„ <a href=\"https://developer.github.com/v3/search/#search-users\" target=\"_blank\" rel=\"noopener\">Search users</a> æ¥å£ï¼Œä¼ªä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserRank</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> fetch(search_url);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">getUserRank();</span><br></pre></td></tr></table></figure>\n<p>è°ƒç”¨ getUserRank å‡½æ•°å°±èƒ½è·å–åˆ°æƒ³è¦çš„ç»“æœã€‚ä½†æ˜¯ï¼Œä½ å¯èƒ½è¿˜è¦æƒ³è¦è·å–æ¯ä¸ªç”¨æˆ·çš„ follower æ•°ã€emailã€åœ°åŒºå’Œä»“åº“ç­‰æ•°æ®ï¼Œè€Œ Search users æ¥å£å¹¶æ²¡æœ‰è¿”å›è¿™äº›æ•°æ®ï¼Œä½ å¯èƒ½éœ€è¦å†å»è°ƒç”¨ <a href=\"https://developer.github.com/v3/users/#get-a-single-user\" target=\"_blank\" rel=\"noopener\">Single user</a> æ¥å£ã€‚</p>\n<p>ç„¶åä¸Šè¿°ä»£ç å¯èƒ½è¢«æ”¹å†™ä¸ºï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserRank</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> fetch(search_url);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> res = [];</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; data.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> item = data[i];</span><br><span class=\"line\">    <span class=\"keyword\">const</span> user = <span class=\"keyword\">await</span> fetch(user_url);</span><br><span class=\"line\">    res.push(&#123;...item, ...user&#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">getUserRank();</span><br></pre></td></tr></table></figure>\n<p>è¿è¡ŒæŸ¥çœ‹ç»“æœï¼Œè‡ªå·±æƒ³è¦çš„æ•°æ®éƒ½æ‹¿åˆ°äº†ã€‚ä½†æ˜¯ï¼Œä½ å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œç¨‹åºè¿è¡Œæ—¶é—´æœ‰ç‚¹é•¿ï¼Œè¯¥æ€ä¹ˆä¼˜åŒ–ä¸‹å‘¢ï¼Ÿ</p>\n<p>å…¶å®ï¼Œé“ºå«äº†è¿™ä¹ˆé•¿ï¼Œå°±æ˜¯æƒ³è¯´æ˜ä¸€ä¸ªé—®é¢˜ï¼šä½ é™·å…¥äº† async/await çš„åœ°ç‹±ã€‚</p>\n<p>ä¸Šè¿°ä»£ç çš„é—®é¢˜åœ¨äºï¼Œè·å–æ¯ä¸ªç”¨æˆ·èµ„æ–™çš„è¯·æ±‚å¹¶ä¸å­˜åœ¨ä¾èµ–æ€§ï¼Œå°±ç±»ä¼¼ä¸Šæ–‡ä¸­çš„é€‰æ‹© pizza å’Œ drink ä¸€æ ·ï¼Œè¿™æ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„è¯·æ±‚ã€‚è€Œæ ¹æ®ä¸Šè¿°ä»£ç ï¼Œè¯·æ±‚éƒ½å˜æˆäº†ä¸²è¡Œæ‰§è¡Œï¼Œè¿™å½“ç„¶ä¼šæŸè€—ç¨‹åºçš„æ€§èƒ½ã€‚</p>\n<p>æŒ‰ç…§ä¸Šè¿°ä»£ç ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹å…¶å¼‚æ­¥è¯·æ±‚çš„åŠ¨æ€å›¾ï¼š</p>\n<p><img src=\"https://user-images.githubusercontent.com/7871813/40270076-c08ec820-5bb9-11e8-8470-5e716e87dc76.gif\" alt=\"image\"></p>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œè·å–ç”¨æˆ·èµ„æ–™çš„æ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦ç­‰åˆ°ä¸Šä¸€ä¸ªè¯·æ±‚å®Œæˆä¹‹åæ‰èƒ½æ‰§è¡Œï¼ŒWaterfall å¤„äºä¸€ä¸ªä¸²è¡Œçš„çŠ¶æ€ã€‚é‚£è¦æ€ä¹ˆæ”¹è¿›è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p>\n<p>æ—¢ç„¶è·å–æ¯ä¸ªç”¨æˆ·èµ„æ–™çš„è¯·æ±‚å¹¶ä¸å­˜åœ¨ä¾èµ–æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å…ˆè§¦å‘å¼‚æ­¥è¯·æ±‚ï¼Œç„¶åå»¶è¿Ÿå¤„ç†å¼‚æ­¥è¯·æ±‚çš„ç»“æœï¼Œè€Œä¸æ˜¯ä¸€ç›´ç­‰è¯¥è¯·æ±‚å®Œæˆã€‚æ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œé‚£å¯èƒ½æ”¹è¿›çš„ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserDetails</span> (<span class=\"params\">username</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> user = <span class=\"keyword\">await</span> fetch(user_url);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> user;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUserRank</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> fetch(search_url);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> promises = data.map(<span class=\"function\">(<span class=\"params\">item</span>) =&gt;</span> getUserDetails(item.username));</span><br><span class=\"line\">  <span class=\"keyword\">await</span> <span class=\"built_in\">Promise</span>.all(promises).then(handleYourData);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">getUserRank();</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹ä¸€ä¸‹å¼‚æ­¥è¯·æ±‚çš„åŠ¨æ€å›¾ï¼š</p>\n<p><img src=\"https://user-images.githubusercontent.com/7871813/40270077-c2536602-5bb9-11e8-9438-a15ac05b41e0.gif\" alt=\"image\"></p>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œè·å–ç”¨æˆ·èµ„æ–™çš„å¼‚æ­¥è¯·æ±‚å¤„ç†ä¸å†æ˜¯ä¸²è¡Œæ‰§è¡Œï¼Œè€Œæ˜¯å¹¶è¡Œæ‰§è¡Œäº†ï¼Œè¿™å°†å¤§å¤§æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡å’Œæ€§èƒ½ã€‚</p>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>Aditya Agarwal åœ¨å…¶æ–‡ç« ä¸­ä¹Ÿç»™å‡ºäº†æ€ä¹ˆé¿å…é™·å…¥ async/await åœ°ç‹±çš„å»ºè®®ï¼š</p>\n<ol>\n<li>é¦–å…ˆæ‰¾å‡ºä¾èµ–äºå…¶ä»–è¯­å¥çš„æ‰§è¡Œçš„è¯­å¥</li>\n<li>ç„¶åå°†æœ‰ä¾èµ–å…³ç³»çš„ä¸€ç³»åˆ—è¯­å¥è¿›è¡Œç»„åˆï¼Œåˆå¹¶æˆä¸€ä¸ªå¼‚æ­¥å‡½æ•°</li>\n<li>æœ€åç”¨æ­£ç¡®çš„æ–¹å¼æ‰§è¡Œè¿™äº›å‡½æ•°</li>\n</ol>\n<h3 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h3><ul>\n<li><a href=\"https://github.com/dt-fe/weekly/blob/master/55.%E7%B2%BE%E8%AF%BB%E3%80%8Aasync%20await%20%E6%98%AF%E6%8A%8A%E5%8F%8C%E5%88%83%E5%89%91%E3%80%8B.md\" target=\"_blank\" rel=\"noopener\">ç²¾è¯»ã€Šasync/await æ˜¯æŠŠåŒåˆƒå‰‘ã€‹</a></li>\n<li><a href=\"http://www.ruanyifeng.com/blog/2015/05/async.html\" target=\"_blank\" rel=\"noopener\">async å‡½æ•°çš„å«ä¹‰å’Œç”¨æ³•</a></li>\n<li><a href=\"https://cnodejs.org/topic/5640b80d3a6aa72c5e0030b6\" target=\"_blank\" rel=\"noopener\">ä½“éªŒå¼‚æ­¥çš„ç»ˆæè§£å†³æ–¹æ¡ˆ - ES7 çš„ Async/Await</a></li>\n<li><a href=\"https://github.com/dwqs/blog/issues/65\" target=\"_blank\" rel=\"noopener\">How to escape async/await hell</a></li>\n</ul>"},{"title":"ç»™å°ç™½è¯»çš„ WEB æ‰˜ç®¡æœåŠ¡è¿›åŒ–å²","comments":1,"date":"2018-06-09T10:29:12.000Z","from":null,"_content":"è¿™ç¯‡æ–‡ç« æ˜¯æ¥æ‹“å±•è‡ªå·±çŸ¥è¯†é¢çš„, åœ¨æˆ‘è¯»é«˜ä¸­é‚£ä¼š (08 å¹´), æˆ‘èº«è¾¹å°±æœ‰æ²‰è¿·ç”µè„‘æŠ€æœ¯çš„åŒå­¦, é‚£ä¸ªæ—¶å€™æˆ‘æƒ³ç€åšä¸€ä¸ªè‡ªå·±çš„ç½‘ç«™, è‚¯å®šæ˜¯éå¸¸ç‰›é€¼çš„äº‹äº†. ä»æœ€å¼€å§‹æ¥è§¦çš„æœåŠ¡, ä¾æ¬¡æ¥æ’ä¸ªåº. æ°¸ç¡• E ç›˜ -> å…è´¹ç©ºé—´å»ºç«™ (å›½å¤–å±…å¤š) -> è™šæ‹Ÿç©ºé—´ -> è™šæ‹ŸæœåŠ¡å™¨ (VPS) -> ç‹¬ç«‹æœåŠ¡å™¨. çœ‹å®Œè¿™ç¯‡æ–‡ç« å, æˆ‘æ€»ç®—å¯¹è¿™æ–¹é¢çŸ¥è¯†æœ‰äº†ä¸€ä¸ªæ¯”è¾ƒç³»ç»Ÿæ€§çš„è®¤è¯†äº†. ä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹.\n\n<!-- more -->\n### å¼•å­\n\næ–‡ç« å¼€å§‹ä¹‹å‰, æˆ‘è§‰å¾—è¿˜æ˜¯æœ‰å¿…è¦æŠŠè¿™äº›ä¸“æœ‰åè¯å…ˆç§‘æ™®ä¸€ä¸‹, ä¸è¦è§‰å¾—å¾ˆé«˜å¤§ä¸Š, ç®€ç§°è€Œå·².\n\n* IaaS - åŸºç¡€è®¾æ–½å³æœåŠ¡\n* PaaS - å¹³å°å³æœåŠ¡\n* CaaS - å®¹å™¨å³æœåŠ¡\n\næœ¬æ–‡ä»‹ç»äº† Web æ‰˜ç®¡æœåŠ¡è¿›åŒ–çš„å†å², ä»ä¸“ç”¨æœåŠ¡å™¨åˆ°è™šæ‹ŸåŒ–åˆ° IaaSã€PaaS å’Œæœ€æ–°çš„ CaaS; è¯´æ˜äº†æ¯ç§æ–¹å¼çš„ä¼˜ç‚¹å’Œç¼ºç‚¹. ç€é‡é˜è¿°äº†æ„å»º PaaS åº”ç”¨çš„å„ä¸ªç»„ä»¶, ä»¥åŠåœ¨é€‰æ‹© CaaS æä¾›å•†æ—¶åº”è¯¥è€ƒè™‘çš„é—®é¢˜. æœ€åä»æˆæœ¬å’ŒåŠŸèƒ½æ€§çš„è§’åº¦è®ºè¿°äº† PaaS ç”¨æˆ·åº”è¯¥è¿ç§»åˆ° CaaS å¹³å°.\n\nè¯»å®Œè¿™ç¯‡åšæ–‡, ä½ åº”è¯¥å¯ä»¥æ¸…æ¥šçš„ç†è§£:\n\n* è¿™äº›åè¯åˆ°åº•æŒ‡ä»€ä¹ˆ\n* è¿™ä¸ºä»€ä¹ˆå¯¹ä½ å¾ˆé‡è¦\n* å¯¹äºä½ çš„ä½¿ç”¨åœºæ™¯ï¼Œå“ªç§æ–¹å¼æœ€é€‚åˆ\n\nå½“ç„¶æ²¡æœ‰ä¸€ç§æ–¹å¼èƒ½å¤Ÿé€‚åˆæ‰€æœ‰çš„ Web åŸºç¡€è®¾æ–½çš„åœºæ™¯, ä½ çš„ç‰¹æ®Šåœºæ™¯æˆ–è®¸éœ€è¦ç‰¹æ®Šçš„è€ƒè™‘.\n\n### ä»å¤´å¼€å§‹â€”â€”ä¸“ç”¨æœåŠ¡å™¨\n\nWeb æ‰˜ç®¡çš„æœ¬è´¨è¿˜æ˜¯åœ¨ä¸€ä¸ªæ•°æ®ä¸­å¿ƒé‡Œå¸ƒæ»¡äº†æœåŠ¡å™¨ã€äº¤æ¢æœºã€è·¯ç”±å™¨ã€å­˜å‚¨é˜µåˆ—å’Œå…¶å®ƒç½‘ç»œç»„ä»¶. æˆ‘ä»¬æ‰€è®¨è®ºçš„æ¯ä¸€ä¸ªé€‰é¡¹ä¸ç®¡å®ƒæ˜¯ PaaSã€IaaS è¿˜æ˜¯ CaaS, å®ƒåº•å±‚ä½¿ç”¨çš„åŸºç¡€è®¾æ–½éƒ½æ˜¯ç›¸åŒçš„, å³åœ¨ä¸€ä¸ªå¤§å±‹å­é‡Œçš„å¾ˆå¤šç‹¬ç«‹æœåŠ¡å™¨. ä»–ä»¬åªæ˜¯ä¸Šé¢å¢åŠ äº†å¾ˆå¤šæŠ½è±¡å±‚ä½¿å¾—ç®¡ç†å˜å¾—æ›´ç®€å•, å’Œä½¿ç”¨è‡ªåŠ¨åŒ–çš„æ–¹å¼å¤„ç†ä»¥å‰å¾ˆæ…¢æˆ–è€…éœ€è¦æ‰‹åŠ¨æ­¥éª¤çš„ä»»åŠ¡.\n\nä¸“ç”¨æœåŠ¡å™¨, æˆ–è€…å«åš â€œè£¸æœºâ€ æœ‰å®ƒçš„ä¼˜ç‚¹å’Œç¼ºç‚¹.\n\n#### ä¼˜ç‚¹\n\n* æ€§èƒ½â€”â€”ä½ åœ¨ç›´æ¥ä½¿ç”¨ä¸€ä¸ªæœåŠ¡å™¨, æ²¡æœ‰ä»»ä½•æŠ½è±¡å±‚ä¾‹å¦‚è™šæ‹ŸåŒ–å¸¦æ¥çš„æ€§èƒ½å¼€é”€.\n* å¯é æ€§â€”â€”æ²¡æœ‰æŠ½è±¡å±‚å’Œè™šæ‹ŸåŒ–, å‡ºé”™çš„å¯èƒ½æ€§ä¼šé™ä½.\n* èµ„æºåˆ©ç”¨ç‡â€”â€”ä½¿ç”¨ä¸“ç”¨æœåŠ¡å™¨, ä½ çš„è¿›ç¨‹ä¸éœ€è¦è·Ÿå…¶å®ƒçš„è™šæ‹Ÿæœºæˆ–è€…è¿›ç¨‹ç«äº‰èµ„æºä¾‹å¦‚ CPUã€å†…å­˜å’Œå¸¦å®½.\n\n#### ç¼ºç‚¹\n\n* ç®¡ç†å¤æ‚æ€§â€”â€”ä½ æ— æ³•å®¹æ˜“åœ°å…‹éš†ä¸“ç”¨æœåŠ¡å™¨æ¥äº§ç”Ÿæ›´å¤šçš„å®ä¾‹, ä¸“ç”¨æœåŠ¡å™¨æ²¡æœ‰ AMIï¼ˆè¯‘è€…æ³¨: Amazon Machine Imageï¼‰æˆ–è€…é•œåƒçš„æ¦‚å¿µ. æƒ³æ‰©å±•ä½ çš„åŸºç¡€è®¾æ–½åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Ÿæˆ‘å¸Œæœ›ä½ ç”¨é…ç½®ç®¡ç†, æˆ–è€…ä½¿ç”¨å¯ä¿¡èµ–çš„è€æœ‹å‹ rsync.\n* æˆæœ¬â€”â€”ä½¿ç”¨ä¸“ç”¨æœåŠ¡å™¨, åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä½ éœ€è¦é¢„å…ˆæ”¯ä»˜æœåŠ¡å™¨çš„ç¡¬ä»¶ä»·æ ¼, ç„¶åå†ä»˜ç§Ÿç”¨åœºåœ°çš„æˆæœ¬, æˆ–è€…ä½ ä»ä¸€ä¸ªæœåŠ¡æä¾›å•†é‚£é‡Œç§Ÿèµå®ƒä»¬. æ— è®ºå“ªç§æ–¹å¼, ä½ éƒ½æ²¡æ³•åœ¨ä¸ä½¿ç”¨æ—¶ç»ˆæ­¢æœåŠ¡å™¨çš„ç§Ÿèµæ¥èŠ‚çœæˆæœ¬, å› æ­¤ä½ éœ€è¦æ›´åŠ è°¨æ…çš„å¯¹å¾…ä½ çš„è´¢åŠ¡è®¡åˆ’.\n* ä½ æ‰€æœ‰çš„è¿›ç¨‹å’Œåº”ç”¨éƒ½è¿è¡Œåœ¨ä¸“ç”¨æœåŠ¡å™¨ä¸Š, å› æ­¤è¿è¡Œåœ¨ç›¸åŒçš„æ“ä½œç³»ç»Ÿä¸Š. ä¸ºäº†å¯æ‰©å±•æ€§çš„ç›®çš„, ä½ å¾€å¾€å¸Œæœ›æœåŠ¡å™¨åªè¿è¡Œå•ä¸€çš„è¿›ç¨‹, ä¾‹å¦‚ Web æœåŠ¡æˆ–è€…æ•°æ®åº“æœåŠ¡. åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šè¿è¡Œæ‰€æœ‰çš„åº”ç”¨ä½¿å¾—æ“ä½œç³»ç»Ÿçš„è°ƒä¼˜å˜å¾—æ›´å›°éš¾.\n\n### ä½¿äº‹æƒ…å˜å¾—æ›´å®¹æ˜“â€”â€”è™šæ‹ŸåŒ–\n\nå°½ç®¡ä¸“ç”¨æœåŠ¡å™¨æœ‰å¾ˆå¤šä¼˜ç‚¹, ä½†æ˜¯å®ƒçš„ç¼ºç‚¹åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¼šè¿œè¿œè¶…è¿‡å…¶ä¼˜ç‚¹. å…¬å¸ä¸ºäº†èƒ½å¤Ÿè¿…é€Ÿè¿›å…¥å¸‚åœºèµ¢å¾—ç«äº‰, å¯¹äºéƒ¨ç½²çš„é€Ÿåº¦æå‡ºäº†æ›´é«˜çš„è¦æ±‚, è™šæ‹ŸåŒ–å°±å¾ˆè‡ªç„¶çš„æˆä¸ºäº†æ•°æ®ä¸­å¿ƒè¿›åŒ–ä¸­çš„ä¸‹ä¸€ä¸ªæ­¥éª¤.\n\n#### ä»€ä¹ˆæ˜¯è™šæ‹ŸåŒ–\n\nç®€è€Œè¨€ä¹‹, è™šæ‹ŸåŒ–å°±æ˜¯å°†ç‰©ç†æœåŠ¡å™¨åˆ†æˆæ›´å°çš„è™šæ‹Ÿæœº, è¿™äº›è™šæ‹Ÿæœºåªèƒ½è®¿é—®ç‰©ç†æœºçš„éƒ¨åˆ†èµ„æº. ä¾‹å¦‚ä½ æœ‰ä¸€ä¸ª 8CPU æ ¸ä»¥åŠ 16GB å†…å­˜çš„ç‰©ç†æœåŠ¡å™¨, åˆ™å¯ä»¥å°†å®ƒåˆ†æˆ 8 ä¸ªè™šæ‹Ÿæœº, æ¯ä¸ªè™šæ‹Ÿæœºæœ‰ 1 ä¸ª CPU å’Œ 2GB å†…å­˜. ä½ æˆ–è®¸å·²ç»å¬è¯´è¿‡ä¸€äº›è™šæ‹ŸåŒ–æŠ€æœ¯å¦‚ Xen, KVM, VMware å’Œ Hyper-V, å…¶å®å¾ˆæœ‰æ›´å¤š.\n\n#### ä¼˜ç‚¹\n\n* ä½ å¯ä»¥åœ¨éœ€è¦æ›´å¤šè™šæ‹Ÿæœºå®ä¾‹æˆ–è€…æƒ³è¦è™šæ‹Ÿæœºå…±äº«æ—¶è¿›è¡Œè™šæ‹Ÿæœºçš„å…‹éš†.\n* ä½ å¯ä»¥å¤‡ä»½è™šæ‹Ÿæœºé•œåƒä½œä¸ºå®‰å…¨ä¿æŠ¤æˆ–è€…ç¾å¤‡.\n\n#### ç¼ºç‚¹\n\n* ä½¿ç”¨è™šæ‹ŸåŒ–æ„å‘³ç€é¢å¤–çš„æ€§èƒ½å¼€é”€, å¯èƒ½é€ æˆæ€§èƒ½ä¸‹é™.\n* è™šæ‹Ÿæœºé•œåƒåœ¨ä¸åŒçš„æœåŠ¡æä¾›å•†å’Œè™šæ‹ŸåŒ–æŠ€æœ¯ä¹‹é—´åŸºæœ¬ä¸Šæ˜¯ä¸å¯ç§»æ¤çš„.\n* ç®¡ç†è™šæ‹Ÿæœºä¾ç„¶æ˜¯æ‰‹å·¥æ­¥éª¤, éœ€è¦ç®¡ç†çš„æ—¶é—´å’Œä¸“ä¸šçŸ¥è¯†.\n\n### è¿›åŒ–â€”â€”è™šæ‹ŸåŒ–å˜æˆ IaaS\n\nä½ çŸ¥é“ [51% çš„äººè®¤ä¸º â€œäº‘â€ ä¼šè¢«å¤©æ°”å½±å“å—](http://www.businessinsider.com/people-think-stormy-weather-affects-cloud-computing-2012-8)ï¼Ÿä½ çŸ¥é“å½“äººä»¬è°ˆè®º â€œäº‘â€ æ—¶ä»–ä»¬å®é™…ä¸Šæ˜¯åœ¨è®¨è®ºåŸºç¡€è®¾æ–½å³æœåŠ¡ (IaaS) å—ï¼Ÿ\n\n#### ä»€ä¹ˆæ˜¯åŸºç¡€è®¾æ–½å³æœåŠ¡ (IaaS)\n\n* é€šè¿‡ API æ¥ç®¡ç†ç¡¬ä»¶çš„è™šæ‹ŸåŒ–.\n* é€šè¿‡ç¼–ç¨‹æ¥å£è®¿é—®è®¡ç®—ã€å­˜å‚¨å’Œç½‘ç»œèµ„æºå’Œé…ç½®.\n* å½“ä½ éœ€è¦æ˜¯ç”³è¯·ä¸€ä¸ªæ–°çš„è™šæ‹Ÿæœº, å½“ä½ å®Œæˆåç»ˆæ­¢è™šæ‹Ÿæœº, ä½ åªéœ€è¦ä¸ºä½ ä½¿ç”¨çš„èµ„æºä»˜è´¹.\n* å°†æ•°æ®ä¸­å¿ƒèµ„æºè§†ä¸ºå…¬å…±è®¾æ–½.\n\näºšé©¬é€Šåœ¨ 2006 å¹´å‘å¸ƒäº†å…¶ Amazon Web Servicesï¼ˆAWSï¼‰å’Œ EC2 äº§å“ï¼Œæˆä¸ºäº†è¿™ä¸ªé¢†åŸŸçš„å…ˆé©±ã€‚\n\n#### ä¸ºä»€ä¹ˆè¿™ä¸ªè¿›åŒ–å¦‚æ­¤é‡è¦\n\nåœ¨è¿‡å»å½“ä½ éœ€è¦ä¸Šçº¿ä¸€ä¸ªåœ¨çº¿ä¸šåŠ¡æ—¶, ä½ ä¸å¾—ä¸è¿›è¡Œå¤æ‚çš„è®¡åˆ’æ¥ä¿è¯ä½ åœ¨æ•°æ®ä¸­å¿ƒå†…æœ‰è¶³å¤Ÿçš„æœºæ¶ç©ºé—´ã€è¶³å¤Ÿçš„æœåŠ¡å™¨å’Œå­˜å‚¨æ¥å¤„ç†ä¸šåŠ¡çš„å¢é•¿, è¶³å¤Ÿçš„ç½‘ç»œå¸¦å®½æ¥å¤„ç†æ‰€æœ‰çš„ç”¨æˆ·æµé‡. è¿™ç§è®¡åˆ’å¹¶ä¸å®¹æ˜“, å°¤å…¶æ˜¯å¯¹æ—©æœŸçš„ä¸šåŠ¡æ¥è®², ä½ æ— æ³•é¢„æµ‹ä¸šåŠ¡çš„æœªæ¥å’Œå¢é•¿è½¨è¿¹.\n\n1. å®ƒç»™äº†å¼€å‘è€…è¶…èƒ½é‡:\n    * æ„æ€ä¸€ä¸ªæƒ³æ³•ç«‹å³ä¸Šçº¿.\n    * å¦‚æœæˆåŠŸäº†, å¯ä»¥å®¹æ˜“çš„æ‰©å±•è§„æ¨¡.\n    * å¦‚æœå¤±è´¥äº†, å…³é—­è™šæ‹Ÿæœºä»¥èŠ‚çº¦æˆæœ¬.\n2. å®ƒä½¿å¾—æ•°æ®ä¸­å¿ƒè‡ªåŠ¨åŒ–å˜å¾—æ›´å¼ºå¤§:\n    * å…¨è‡ªåŠ¨åŸºç¡€è®¾æ–½ç®¡ç†æˆä¸ºå¯èƒ½, å‡ºç°äº† â€œåŸºç¡€è®¾æ–½å³ä»£ç â€ çš„æ¦‚å¿µ.\n    * å¼¹æ€§ä¼¸ç¼©åœ¨è¿‡å»æ˜¯ä¸å¯èƒ½å®ç°çš„, ä½†æ˜¯ç°åœ¨ web åŸºç¡€è®¾æ–½å¯ä»¥å½“ä¸šåŠ¡å˜åŒ–æ—¶è‡ªåŠ¨çš„æ‰©å±•æˆ–è€…æ”¶ç¼©.\n    * åœ¨æœåŠ¡å™¨çš„è‡ªåŠ¨åŒ–ç®¡ç†ä¹‹å, æ•°æ®ä¸­å¿ƒçš„è‡ªåŠ¨åŒ–ä¹Ÿæ‰©å±•åˆ°äº†å­˜å‚¨ã€ç½‘ç»œä»¥åŠå…¶å®ƒå¤§é‡çš„éœ€è¦ä¸“ä¸šçŸ¥è¯†çš„ç³»ç»Ÿ, åœ¨ä»£ç å’Œ API èƒ½å¤Ÿå¤„ç†è¿™äº›è‡ªåŠ¨åŒ–ä¹‹å, è¿™ç»™å…¨çƒçš„å¼€å‘è€…ç¤¾åŒºå¸¦æ¥äº†æ–°çš„æœºé‡.\n\n### è¿›ä¸€æ­¥æ¼”åŒ–â€”â€”å¹³å°å³æœåŠ¡ (PaaS)\n\nå¹³å°å³æœåŠ¡ (PaaS) ä½¿å¾—å¼€å‘äººå‘˜å¯ä»¥å¾ˆå®¹æ˜“çš„éƒ¨ç½²å’Œç®¡ç†åº”ç”¨è€Œéšè—æ‰æ‰€æœ‰çš„å®ç°ç»†èŠ‚ä¾‹å¦‚æœåŠ¡å™¨ã€è´Ÿè½½å‡è¡¡å™¨ã€DNS ç­‰ç­‰. ä»–ä»¬æˆ–å¤šæˆ–å°‘çš„å»é™¤äº†å¯¹è¿ç»´å›¢é˜Ÿçš„éœ€æ±‚, è€Œæ˜¯è®©å¼€å‘äººå‘˜å»å…³æ³¨åº”ç”¨éƒ¨ç½². æœ‰å¾ˆå¤š PaaS æä¾›å•†, å…¶ä¸­ä¸€ä¸ªæœ€æµè¡Œçš„æ˜¯ Heroku. å…³äº Heroku çš„ä¸€ä¸ªæœ‰è¶£çš„äº‹æƒ…æ˜¯ Heroku å®Œå…¨æ˜¯è¿è¡Œåœ¨ AWS ä¹‹ä¸Šå¹¶ä¾èµ– AWS çš„. å¦‚æœä½ ä¸æ„¿æ„ä½ çš„åº”ç”¨è¿è¡Œåœ¨ç¾å›½ä¸œéƒ¨æˆ–è€…æ¬§æ´²è¥¿éƒ¨çš„ AWS ä¸Šçš„è¯, è¿™æˆ–è®¸æ˜¯ä¸€ä¸ªé—®é¢˜. æ²¡æœ‰ IaaS, åƒ Heroku è¿™æ ·çš„å¹³å°å¯èƒ½å°±ä¸ä¼šå­˜åœ¨äº†. PaaS æä¾›å•†åˆ©ç”¨ IaaS ä½œä¸ºä¸€ä¸ªéå¸¸é‡è¦çš„ç»„æˆéƒ¨åˆ†æ¥äº¤ä»˜å®ƒä»¬çš„æœåŠ¡. åœ¨å‡å°‘ä»æƒ³æ³•åˆ°éƒ¨ç½²çš„æ—¶é—´ã€è‡ªåŠ¨åŒ–æµç¨‹ä»¥åŠå‡å°‘ç‰¹æ®Šçš„ç³»ç»ŸçŸ¥è¯†éœ€æ±‚çš„è¶‹åŠ¿ä¸­, PaaS æ˜¯åˆç†çš„ä¸‹ä¸€æ­¥, å°±åƒæ˜¯ä»ä¸“ç”¨æœåŠ¡å™¨åˆ° IaaS ä¸€æ ·.\n\n#### æ„å»º PaaS æ˜¯å›°éš¾çš„\n\nèƒ½å¤Ÿé€šè¿‡æŠ½è±¡è€Œé¿å…å¤„ç†æœåŠ¡å™¨ç›¸å…³çš„é—®é¢˜æ˜¯ä¸å®¹æ˜“çš„, éœ€è¦å¼•å…¥å¾ˆå¤šä¸œè¥¿æ‰èƒ½åšåˆ°.\n\nåœ¨ PaaS çš„æ¦‚å¿µä¹‹ä¸‹æœ‰å‡ ä¸ªä¸»è¦çš„æ¨¡å—ï¼š\n\n* ç¼–è¯‘ç³»ç»Ÿâ€”â€”æŠŠä½ çš„ä»£ç ç¼–è¯‘æˆå¯ä»¥è¿è¡Œçš„åº”ç”¨, å¹¶ä¸”æŠŠå®ƒå­˜å‚¨åˆ°æŸä¸ªåœ°æ–¹ä½œä¸ºåç»­ä½¿ç”¨.\n* åº”ç”¨ç®¡ç†æ•°æ®åº“â€”â€”ç®¡ç† Git ç‰ˆæœ¬ã€build ç‰ˆæœ¬å’Œåº”ç”¨å…ƒæ•°æ®.\n* é›†ç¾¤è°ƒåº¦å™¨â€”â€”å°†ä¸€ç»„æœåŠ¡å™¨ä½œä¸ºä¸€å°å¤§çš„æœåŠ¡å™¨æ¥ç®¡ç†, åœ¨æœåŠ¡å™¨èµ„æºæ± çš„æŸä¸ªæœåŠ¡å™¨ä¸Šè¿è¡Œä½ çš„ç¨‹åº, å¹¶æ£€æŸ¥å’Œæ›¿æ¢å¤±æ•ˆçš„ä½œä¸š.\n* è´Ÿè½½å‡è¡¡â€”â€”å…è®¸ä» Internet å’Œå†…éƒ¨ç¨‹åºæ¥çš„ä¸šåŠ¡è´Ÿè½½è¢«æ­£ç¡®çš„è·¯ç”±åˆ°åˆé€‚çš„ä½ç½®.\n* DNSâ€”â€”åœ¨ä½ äº§ç”Ÿå’Œä¿®æ”¹åº”ç”¨æ—¶è‡ªåŠ¨é…ç½® DNS æ¡ç›®.\n* æˆ–è®¸æ˜¯æœ€é‡è¦çš„â€”â€”æŸä¸ªå½¢å¼çš„å®¹å™¨åŒ–ä¾‹å¦‚â€Š freebsd jailsã€solaris zonesã€æˆ–è€… linux containers, å®¹å™¨åŒ–ä½¿å¾—æŸä¸ªçš„åº”ç”¨ä¸ä¼šè¿›å…¥å’Œå½±å“åˆ°å…¶å®ƒçš„åº”ç”¨.\n\nç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªç‚¹æ˜¯ Docker è¿…é€Ÿå‘å±•çš„éå¸¸é‡è¦çš„åŸå› . Linux å®¹å™¨æŠ€æœ¯å·²ç»å­˜åœ¨äº†ä¸€æ®µæ—¶é—´äº†, ä½†æ˜¯åªæœ‰æŸäº›å¤§çš„å…¬å¸æˆ–è€… PaaS æä¾›å•†è‡ªåŠ¨åŒ–äº†å®¹å™¨çš„ä½¿ç”¨, Docker ä½¿ Linux å®¹å™¨çš„ä½¿ç”¨å˜å¾—éå¸¸ç®€å•, ä¹Ÿæä¾›äº†æ ‡å‡†åŒ–çš„é•œåƒæ ¼å¼, å®ƒæˆä¸ºäº† PaaS ä¸­é‡è¦çš„ç»„æˆéƒ¨åˆ†.\n\nè¿™éå¸¸å¼ºå¤§, å› ä¸ºå¾ˆå¤šå…¬å¸åœ¨å¤„ç†çˆ†å‘å¼çš„ç”¨æˆ·å¢é•¿, æ¥è‡ªäºç§»åŠ¨ã€ç¤¾äº¤å’Œ IoT çš„æ–°çš„ä¸šåŠ¡æ¨¡å¼, ä»¥åŠæœŸæœ›ä»ä¼ ç»Ÿçš„é•¿çš„ç‰ˆæœ¬å‘å¸ƒå‘¨æœŸè½¬å˜åˆ°æŒç»­äº¤ä»˜. ä»–ä»¬åˆ©ç”¨åŸºäºè½¯ä»¶çš„æ¶æ„æˆ–è€…å¾®æœåŠ¡. ä»–ä»¬éœ€è¦èƒ½å¤Ÿè‡ªåŠ¨éƒ¨ç½²å’Œæµ‹è¯•æ–°çš„ä»£ç , å¹¶æ ¹æ®ä¸šåŠ¡çš„å˜åŒ–å¼¹æ€§ä¼¸ç¼©. ä½†é—®é¢˜æ˜¯ä»–ä»¬æ²¡æœ‰è¶³å¤Ÿçš„èµ„æºå’Œç»éªŒæ¥äº¤ä»˜åˆ°ä»–ä»¬çš„å¼€å‘å›¢é˜Ÿ, æ‰€ä»¥ä»–ä»¬ä¸å¾—ä¸å°†å…¶å¤–åŒ…ç»™ PaaS æä¾›å•†. ä¸å¹¸çš„æ˜¯, å½“ä½ è¿™ä¹ˆåšçš„æ—¶å€™, ä½ å°±æ”¾å¼ƒäº†å¯¹äºè¿™ä¸ªé»‘ç›’å­çš„å¾ˆå¤šæ§åˆ¶, è€Œæ˜¯èŠ±å¾ˆå¤šé’±å¹¶ä½¿å¾—è‡ªå·±å®Œå…¨ä¾èµ–äºå®ƒ. å¦å¤–ä¸€ä¸ªé€‰é¡¹æ˜¯, å¾ˆå¤šå…¬å¸åå¤çš„é‡æ–°å‘æ˜è½®å­æˆ–è€…ä½¿ç”¨é‚£äº›éš¾äºç»´æŠ¤çš„ã€è¿è¡Œç¼“æ…¢çš„å’Œæ˜“äºå‡ºé”™çš„å·¥å…·.\n\næœ€å¥½çš„æƒ…å½¢æ˜¯åœ¨è‡ªå·±çš„æ•°æ®ä¸­å¿ƒæˆ–è€… Cloud å¸å·ä¸­è¿è¡Œä¸€ä¸ª PaaS å¹³å°, ä½ å¯ä»¥å…¨æƒæ§åˆ¶, ä½ çš„å›¢é˜Ÿå¯ä»¥ç›´æ¥å‚ä¸åº”ç”¨çš„éƒ¨ç½², å› æ­¤å¯ä»¥å½¢æˆä¸€ç§çœŸæ­£çš„ DevOps æ–‡åŒ–. Docker åŠå…¶æ ‡å‡†åŒ–çš„ç”Ÿæ€ç³»ç»Ÿæ˜¯è¿™ç§æ„¿æ™¯æˆä¸ºç°å®çš„é‡è¦ä¸€æ­¥.\n\n### æœ€åâ€”â€”å®¹å™¨æ‰˜ç®¡å¹³å° (CaaS)\n\nä»€ä¹ˆæ˜¯å®¹å™¨æ‰˜ç®¡å¹³å°, æˆ–è€…å«å®¹å™¨å³æœåŠ¡å‘¢ï¼Ÿè¿™å°±æ˜¯æˆ‘åœ¨ä¸Šé¢çš„ç« èŠ‚ä¸­æåˆ°çš„å¦å¤–ä¸€ç§æ„å»ºåœ¨ Docker åŸºç¡€ä¸Šçš„ Web æ‰˜ç®¡æ–¹å¼. å®ƒæ˜¯ä½ ç”¨å®¹å™¨æ¥éƒ¨ç½²å¤æ‚çš„å¤šå±‚æ¬¡çš„åº”ç”¨æ‰€éœ€è¦çš„è‡ªåŠ¨åŒ–çš„ç¼–è¯‘ç³»ç»Ÿ, é›†ç¾¤è°ƒåº¦å™¨, è´Ÿè½½å‡è¡¡, DNS è‡ªåŠ¨åŒ–ä»¥åŠæœåŠ¡å‘ç°. è¿™æ˜¯ PaaS çš„å¦å¤–ä¸€éƒ¨åˆ†å†…å®¹, ä½†æ˜¯ä½ ä¸æ˜¯ç”¨ä¸€ä¸ªå¤æ‚çš„ç¼–è¯‘ç³»ç»Ÿæ¥ç¼–è¯‘ä½ çš„åº”ç”¨, è€Œæ˜¯ç”¨ Docker é•œåƒ. é•œåƒå¯ä»¥éå¸¸å®¹æ˜“çš„è¿›è¡Œç¼–è¯‘å’Œæœ¬åœ°æµ‹è¯•, å› æ­¤ä½ åœ¨éƒ¨ç½²åº”ç”¨ä¹‹å‰å°±ç¡®è®¤åº”ç”¨å¯ä»¥æ­£å¸¸å·¥ä½œ. ç°åœ¨ PaaS ç”¨æˆ·ä¹Ÿå¯ä»¥å¾—åˆ°ç›¸åŒçš„ä½“éªŒ, ä½†æ˜¯ä¸éœ€è¦æ‹¥æœ‰è‡ªå·±çš„ç¡¬ä»¶æˆ–è€…äº‘å¸å·çš„å‰æä¸‹èŠ‚çº¦å¤§é‡çš„æˆæœ¬. ä»–ä»¬ä¸å†å—é™äºå…¶æœåŠ¡æä¾›å•†æ‰€æ”¯æŒçš„ç¯å¢ƒ, å¯ä»¥é€šè¿‡å°†åº”ç”¨æ‰“åŒ…æˆ Docker é•œåƒçš„æ–¹å¼åœ¨ä»»ä½•åœ°æ–¹è¿è¡Œ.\n\nåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­, åˆ©ç”¨è¯¸å¦‚ ContainerShip Cloud, ä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹, åœ¨ä»»ä½•äº‘å¹³å°ä¸Šç”šè‡³æ˜¯è£¸æœºä¸Šç”¨ç›¸åŒçš„æ–¹å¼è¿è¡Œä½ çš„åº”ç”¨. ä½ ä¸å†è¢«å¡åœ¨æ„å»ºå¤æ‚çš„åº”ç”¨æ¥è§£å†³éå¸¸å›°éš¾çš„é—®é¢˜, æˆ–è€…å¡åœ¨ä½¿ç”¨æŸä¸ªæä¾›å•†çš„ç‰¹æ®Šçš„è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·ä¸Š.\n\n* ä½†æ˜¯é€‰æ‹©ä¸€ä¸ªæ­£ç¡®çš„ Docker å®¹å™¨æ‰˜ç®¡å¹³å°å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…, æœ‰å¾ˆå¤šçš„é—®é¢˜éœ€è¦ä½ å»æ€è€ƒå’Œæ³¨æ„.\n* æœ‰å¤§é‡çš„é€‰é¡¹, å› æ­¤é€‰æ‹©å…¶ä¸­ä¸€ä¸ªè¿›è¡Œç ”ç©¶å°±å˜å¾—å›°éš¾. å¥½æ¶ˆæ¯æ˜¯å¦‚æœä½ çš„åº”ç”¨å·²ç»å®¹å™¨åŒ–, ä½ å°±å¯ä»¥è½»æ¾çš„æµ‹è¯•å…¶ä¸­çš„æ¯ä¸€ä¸ª.\n* ä½ æ­£åœ¨ä½¿ç”¨çš„æœåŠ¡æä¾›å•†ä¾‹å¦‚ Triton æˆ–è€… ECS çš„æŸä¸ªè§£å†³æ–¹æ¡ˆæˆ–è®¸ä½¿å¾—ä½ æ— æ³•è„±ç¦»è¿™ä¸ªæä¾›å•†, è¿™ä¹Ÿä½¿å¾— Docker çš„æœ€ä»¤äººå…´å¥‹çš„å¯ç§»æ¤æ€§å˜å¾—ä¸é‚£ä¹ˆé‡è¦äº†.\n* è®¸å¤š CaaS æ–¹æ¡ˆåœ¨ä»–ä»¬è‡ªå·±çš„ç¡¬ä»¶ä¸Šè¿è¡Œæ‰€æœ‰çš„ç®¡ç†ç³»ç»Ÿ, ä½ è‡ªå·±çš„æœåŠ¡å™¨ä¸Šåªæ˜¯è¿è¡ŒæŸä¸ªä»£ç†ç¨‹åºæ¥è¿æ¥ä»–ä»¬çš„ API, å› æ­¤å¦‚æœä»–ä»¬çš„ç³»ç»Ÿå®•æœºåä½ çš„é›†ç¾¤å°†æ— æ³•å·¥ä½œ.\n* å…è®¸ä½ åœ¨é˜²ç«å¢™åè¿è¡Œæ•´ä¸ªç³»ç»Ÿçš„æ–¹æ¡ˆæ˜¯éå¸¸å¤æ‚çš„, éœ€è¦ä¸€ä¸ªå›¢é˜Ÿå»ç®¡ç†å’Œå‡çº§.\n* èƒ½å¤Ÿå®¹æ˜“çš„åœ¨é˜²ç«å¢™åè¿è¡Œæ•´ä¸ªç³»ç»Ÿçš„æ–¹æ¡ˆä¼šä½¿å¾—é«˜å¯ç”¨æˆä¸ºä½ä¼˜å…ˆçº§çš„äº‹æƒ….\n* å½“ä½ é€‰æ‹©äº†ä¸€ä¸ª CaaS æä¾›å•†æ—¶, ä½ å°±å¯ä»¥æ‘†è„±äº†ä½ çš„æœåŠ¡æ‰˜ç®¡æä¾›å•†çš„é”å®š, ä½†æ˜¯ä½ å°†é™·å…¥åˆ° CaaS æä¾›å•†çš„é”å®š. ä½ æ— æ³•ä¸ä½¿ç”¨ä»–ä»¬çš„ SaaS ç®¡ç†æ¥å£è€Œåœ¨ä½ è‡ªå·±çš„ç¡¬ä»¶ä¸Šè¿è¡Œæ•´ä¸ªç³»ç»ŸåŒ…æ‹¬ç®¡ç†ç³»ç»Ÿ, API å’Œ UI. ä½ ä¸€æ—¦å†³å®šä»˜é’±, ä½ æœ€å¥½å¯ä»¥ä¸€ç›´ä»˜é’±.\n\n### æ€»ç»“\n\nç»ˆäºçœ‹å®Œäº†, çœŸçš„æ˜¯åˆè‡­åˆé•¿å•Š. å›é¡¾ä¸€ä¸‹è¿™ç¯‡æ–‡ç« , æ€»ä½“æ¥è¯´æ˜¯ç»å†äº†è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹:\n\n1. ä¸“æœ‰æœåŠ¡å™¨\n2. è™šæ‹ŸåŒ–æŠ€æœ¯\n3. åŸºç¡€è®¾æ–½å³æœåŠ¡ (IaaS)\n4. å¹³å°å³æœåŠ¡ (PaaS)\n5. å®¹å™¨å³æœåŠ¡ (CaaS)\n\næ€»ç»“ä¸€ä¸‹, æˆ‘è§‰å¾—å¼€å‘äººå‘˜è¿˜æ˜¯æœ‰å¿…è¦äº†è§£ä¸€ä¸‹å…³äºäº§å“éƒ¨ç½²ç›¸å…³çš„æŠ€æœ¯å‘å±•. ç„¶åæ ¹æ®è‡ªå·±çš„ä¸šåŠ¡æ¥é€‰æ‹©åˆé€‚çš„æœåŠ¡æä¾›å•†.\n","source":"_posts/ç»™å°ç™½è¯»çš„-WEB-æ‰˜ç®¡æœåŠ¡è¿›åŒ–å².md","raw":"---\ntitle: ç»™å°ç™½è¯»çš„ WEB æ‰˜ç®¡æœåŠ¡è¿›åŒ–å²\ncomments: true\ndate: 2018-06-09 18:29:12\ntags:\nfrom:\n---\nè¿™ç¯‡æ–‡ç« æ˜¯æ¥æ‹“å±•è‡ªå·±çŸ¥è¯†é¢çš„, åœ¨æˆ‘è¯»é«˜ä¸­é‚£ä¼š (08 å¹´), æˆ‘èº«è¾¹å°±æœ‰æ²‰è¿·ç”µè„‘æŠ€æœ¯çš„åŒå­¦, é‚£ä¸ªæ—¶å€™æˆ‘æƒ³ç€åšä¸€ä¸ªè‡ªå·±çš„ç½‘ç«™, è‚¯å®šæ˜¯éå¸¸ç‰›é€¼çš„äº‹äº†. ä»æœ€å¼€å§‹æ¥è§¦çš„æœåŠ¡, ä¾æ¬¡æ¥æ’ä¸ªåº. æ°¸ç¡• E ç›˜ -> å…è´¹ç©ºé—´å»ºç«™ (å›½å¤–å±…å¤š) -> è™šæ‹Ÿç©ºé—´ -> è™šæ‹ŸæœåŠ¡å™¨ (VPS) -> ç‹¬ç«‹æœåŠ¡å™¨. çœ‹å®Œè¿™ç¯‡æ–‡ç« å, æˆ‘æ€»ç®—å¯¹è¿™æ–¹é¢çŸ¥è¯†æœ‰äº†ä¸€ä¸ªæ¯”è¾ƒç³»ç»Ÿæ€§çš„è®¤è¯†äº†. ä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹.\n\n<!-- more -->\n### å¼•å­\n\næ–‡ç« å¼€å§‹ä¹‹å‰, æˆ‘è§‰å¾—è¿˜æ˜¯æœ‰å¿…è¦æŠŠè¿™äº›ä¸“æœ‰åè¯å…ˆç§‘æ™®ä¸€ä¸‹, ä¸è¦è§‰å¾—å¾ˆé«˜å¤§ä¸Š, ç®€ç§°è€Œå·².\n\n* IaaS - åŸºç¡€è®¾æ–½å³æœåŠ¡\n* PaaS - å¹³å°å³æœåŠ¡\n* CaaS - å®¹å™¨å³æœåŠ¡\n\næœ¬æ–‡ä»‹ç»äº† Web æ‰˜ç®¡æœåŠ¡è¿›åŒ–çš„å†å², ä»ä¸“ç”¨æœåŠ¡å™¨åˆ°è™šæ‹ŸåŒ–åˆ° IaaSã€PaaS å’Œæœ€æ–°çš„ CaaS; è¯´æ˜äº†æ¯ç§æ–¹å¼çš„ä¼˜ç‚¹å’Œç¼ºç‚¹. ç€é‡é˜è¿°äº†æ„å»º PaaS åº”ç”¨çš„å„ä¸ªç»„ä»¶, ä»¥åŠåœ¨é€‰æ‹© CaaS æä¾›å•†æ—¶åº”è¯¥è€ƒè™‘çš„é—®é¢˜. æœ€åä»æˆæœ¬å’ŒåŠŸèƒ½æ€§çš„è§’åº¦è®ºè¿°äº† PaaS ç”¨æˆ·åº”è¯¥è¿ç§»åˆ° CaaS å¹³å°.\n\nè¯»å®Œè¿™ç¯‡åšæ–‡, ä½ åº”è¯¥å¯ä»¥æ¸…æ¥šçš„ç†è§£:\n\n* è¿™äº›åè¯åˆ°åº•æŒ‡ä»€ä¹ˆ\n* è¿™ä¸ºä»€ä¹ˆå¯¹ä½ å¾ˆé‡è¦\n* å¯¹äºä½ çš„ä½¿ç”¨åœºæ™¯ï¼Œå“ªç§æ–¹å¼æœ€é€‚åˆ\n\nå½“ç„¶æ²¡æœ‰ä¸€ç§æ–¹å¼èƒ½å¤Ÿé€‚åˆæ‰€æœ‰çš„ Web åŸºç¡€è®¾æ–½çš„åœºæ™¯, ä½ çš„ç‰¹æ®Šåœºæ™¯æˆ–è®¸éœ€è¦ç‰¹æ®Šçš„è€ƒè™‘.\n\n### ä»å¤´å¼€å§‹â€”â€”ä¸“ç”¨æœåŠ¡å™¨\n\nWeb æ‰˜ç®¡çš„æœ¬è´¨è¿˜æ˜¯åœ¨ä¸€ä¸ªæ•°æ®ä¸­å¿ƒé‡Œå¸ƒæ»¡äº†æœåŠ¡å™¨ã€äº¤æ¢æœºã€è·¯ç”±å™¨ã€å­˜å‚¨é˜µåˆ—å’Œå…¶å®ƒç½‘ç»œç»„ä»¶. æˆ‘ä»¬æ‰€è®¨è®ºçš„æ¯ä¸€ä¸ªé€‰é¡¹ä¸ç®¡å®ƒæ˜¯ PaaSã€IaaS è¿˜æ˜¯ CaaS, å®ƒåº•å±‚ä½¿ç”¨çš„åŸºç¡€è®¾æ–½éƒ½æ˜¯ç›¸åŒçš„, å³åœ¨ä¸€ä¸ªå¤§å±‹å­é‡Œçš„å¾ˆå¤šç‹¬ç«‹æœåŠ¡å™¨. ä»–ä»¬åªæ˜¯ä¸Šé¢å¢åŠ äº†å¾ˆå¤šæŠ½è±¡å±‚ä½¿å¾—ç®¡ç†å˜å¾—æ›´ç®€å•, å’Œä½¿ç”¨è‡ªåŠ¨åŒ–çš„æ–¹å¼å¤„ç†ä»¥å‰å¾ˆæ…¢æˆ–è€…éœ€è¦æ‰‹åŠ¨æ­¥éª¤çš„ä»»åŠ¡.\n\nä¸“ç”¨æœåŠ¡å™¨, æˆ–è€…å«åš â€œè£¸æœºâ€ æœ‰å®ƒçš„ä¼˜ç‚¹å’Œç¼ºç‚¹.\n\n#### ä¼˜ç‚¹\n\n* æ€§èƒ½â€”â€”ä½ åœ¨ç›´æ¥ä½¿ç”¨ä¸€ä¸ªæœåŠ¡å™¨, æ²¡æœ‰ä»»ä½•æŠ½è±¡å±‚ä¾‹å¦‚è™šæ‹ŸåŒ–å¸¦æ¥çš„æ€§èƒ½å¼€é”€.\n* å¯é æ€§â€”â€”æ²¡æœ‰æŠ½è±¡å±‚å’Œè™šæ‹ŸåŒ–, å‡ºé”™çš„å¯èƒ½æ€§ä¼šé™ä½.\n* èµ„æºåˆ©ç”¨ç‡â€”â€”ä½¿ç”¨ä¸“ç”¨æœåŠ¡å™¨, ä½ çš„è¿›ç¨‹ä¸éœ€è¦è·Ÿå…¶å®ƒçš„è™šæ‹Ÿæœºæˆ–è€…è¿›ç¨‹ç«äº‰èµ„æºä¾‹å¦‚ CPUã€å†…å­˜å’Œå¸¦å®½.\n\n#### ç¼ºç‚¹\n\n* ç®¡ç†å¤æ‚æ€§â€”â€”ä½ æ— æ³•å®¹æ˜“åœ°å…‹éš†ä¸“ç”¨æœåŠ¡å™¨æ¥äº§ç”Ÿæ›´å¤šçš„å®ä¾‹, ä¸“ç”¨æœåŠ¡å™¨æ²¡æœ‰ AMIï¼ˆè¯‘è€…æ³¨: Amazon Machine Imageï¼‰æˆ–è€…é•œåƒçš„æ¦‚å¿µ. æƒ³æ‰©å±•ä½ çš„åŸºç¡€è®¾æ–½åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Ÿæˆ‘å¸Œæœ›ä½ ç”¨é…ç½®ç®¡ç†, æˆ–è€…ä½¿ç”¨å¯ä¿¡èµ–çš„è€æœ‹å‹ rsync.\n* æˆæœ¬â€”â€”ä½¿ç”¨ä¸“ç”¨æœåŠ¡å™¨, åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä½ éœ€è¦é¢„å…ˆæ”¯ä»˜æœåŠ¡å™¨çš„ç¡¬ä»¶ä»·æ ¼, ç„¶åå†ä»˜ç§Ÿç”¨åœºåœ°çš„æˆæœ¬, æˆ–è€…ä½ ä»ä¸€ä¸ªæœåŠ¡æä¾›å•†é‚£é‡Œç§Ÿèµå®ƒä»¬. æ— è®ºå“ªç§æ–¹å¼, ä½ éƒ½æ²¡æ³•åœ¨ä¸ä½¿ç”¨æ—¶ç»ˆæ­¢æœåŠ¡å™¨çš„ç§Ÿèµæ¥èŠ‚çœæˆæœ¬, å› æ­¤ä½ éœ€è¦æ›´åŠ è°¨æ…çš„å¯¹å¾…ä½ çš„è´¢åŠ¡è®¡åˆ’.\n* ä½ æ‰€æœ‰çš„è¿›ç¨‹å’Œåº”ç”¨éƒ½è¿è¡Œåœ¨ä¸“ç”¨æœåŠ¡å™¨ä¸Š, å› æ­¤è¿è¡Œåœ¨ç›¸åŒçš„æ“ä½œç³»ç»Ÿä¸Š. ä¸ºäº†å¯æ‰©å±•æ€§çš„ç›®çš„, ä½ å¾€å¾€å¸Œæœ›æœåŠ¡å™¨åªè¿è¡Œå•ä¸€çš„è¿›ç¨‹, ä¾‹å¦‚ Web æœåŠ¡æˆ–è€…æ•°æ®åº“æœåŠ¡. åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šè¿è¡Œæ‰€æœ‰çš„åº”ç”¨ä½¿å¾—æ“ä½œç³»ç»Ÿçš„è°ƒä¼˜å˜å¾—æ›´å›°éš¾.\n\n### ä½¿äº‹æƒ…å˜å¾—æ›´å®¹æ˜“â€”â€”è™šæ‹ŸåŒ–\n\nå°½ç®¡ä¸“ç”¨æœåŠ¡å™¨æœ‰å¾ˆå¤šä¼˜ç‚¹, ä½†æ˜¯å®ƒçš„ç¼ºç‚¹åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¼šè¿œè¿œè¶…è¿‡å…¶ä¼˜ç‚¹. å…¬å¸ä¸ºäº†èƒ½å¤Ÿè¿…é€Ÿè¿›å…¥å¸‚åœºèµ¢å¾—ç«äº‰, å¯¹äºéƒ¨ç½²çš„é€Ÿåº¦æå‡ºäº†æ›´é«˜çš„è¦æ±‚, è™šæ‹ŸåŒ–å°±å¾ˆè‡ªç„¶çš„æˆä¸ºäº†æ•°æ®ä¸­å¿ƒè¿›åŒ–ä¸­çš„ä¸‹ä¸€ä¸ªæ­¥éª¤.\n\n#### ä»€ä¹ˆæ˜¯è™šæ‹ŸåŒ–\n\nç®€è€Œè¨€ä¹‹, è™šæ‹ŸåŒ–å°±æ˜¯å°†ç‰©ç†æœåŠ¡å™¨åˆ†æˆæ›´å°çš„è™šæ‹Ÿæœº, è¿™äº›è™šæ‹Ÿæœºåªèƒ½è®¿é—®ç‰©ç†æœºçš„éƒ¨åˆ†èµ„æº. ä¾‹å¦‚ä½ æœ‰ä¸€ä¸ª 8CPU æ ¸ä»¥åŠ 16GB å†…å­˜çš„ç‰©ç†æœåŠ¡å™¨, åˆ™å¯ä»¥å°†å®ƒåˆ†æˆ 8 ä¸ªè™šæ‹Ÿæœº, æ¯ä¸ªè™šæ‹Ÿæœºæœ‰ 1 ä¸ª CPU å’Œ 2GB å†…å­˜. ä½ æˆ–è®¸å·²ç»å¬è¯´è¿‡ä¸€äº›è™šæ‹ŸåŒ–æŠ€æœ¯å¦‚ Xen, KVM, VMware å’Œ Hyper-V, å…¶å®å¾ˆæœ‰æ›´å¤š.\n\n#### ä¼˜ç‚¹\n\n* ä½ å¯ä»¥åœ¨éœ€è¦æ›´å¤šè™šæ‹Ÿæœºå®ä¾‹æˆ–è€…æƒ³è¦è™šæ‹Ÿæœºå…±äº«æ—¶è¿›è¡Œè™šæ‹Ÿæœºçš„å…‹éš†.\n* ä½ å¯ä»¥å¤‡ä»½è™šæ‹Ÿæœºé•œåƒä½œä¸ºå®‰å…¨ä¿æŠ¤æˆ–è€…ç¾å¤‡.\n\n#### ç¼ºç‚¹\n\n* ä½¿ç”¨è™šæ‹ŸåŒ–æ„å‘³ç€é¢å¤–çš„æ€§èƒ½å¼€é”€, å¯èƒ½é€ æˆæ€§èƒ½ä¸‹é™.\n* è™šæ‹Ÿæœºé•œåƒåœ¨ä¸åŒçš„æœåŠ¡æä¾›å•†å’Œè™šæ‹ŸåŒ–æŠ€æœ¯ä¹‹é—´åŸºæœ¬ä¸Šæ˜¯ä¸å¯ç§»æ¤çš„.\n* ç®¡ç†è™šæ‹Ÿæœºä¾ç„¶æ˜¯æ‰‹å·¥æ­¥éª¤, éœ€è¦ç®¡ç†çš„æ—¶é—´å’Œä¸“ä¸šçŸ¥è¯†.\n\n### è¿›åŒ–â€”â€”è™šæ‹ŸåŒ–å˜æˆ IaaS\n\nä½ çŸ¥é“ [51% çš„äººè®¤ä¸º â€œäº‘â€ ä¼šè¢«å¤©æ°”å½±å“å—](http://www.businessinsider.com/people-think-stormy-weather-affects-cloud-computing-2012-8)ï¼Ÿä½ çŸ¥é“å½“äººä»¬è°ˆè®º â€œäº‘â€ æ—¶ä»–ä»¬å®é™…ä¸Šæ˜¯åœ¨è®¨è®ºåŸºç¡€è®¾æ–½å³æœåŠ¡ (IaaS) å—ï¼Ÿ\n\n#### ä»€ä¹ˆæ˜¯åŸºç¡€è®¾æ–½å³æœåŠ¡ (IaaS)\n\n* é€šè¿‡ API æ¥ç®¡ç†ç¡¬ä»¶çš„è™šæ‹ŸåŒ–.\n* é€šè¿‡ç¼–ç¨‹æ¥å£è®¿é—®è®¡ç®—ã€å­˜å‚¨å’Œç½‘ç»œèµ„æºå’Œé…ç½®.\n* å½“ä½ éœ€è¦æ˜¯ç”³è¯·ä¸€ä¸ªæ–°çš„è™šæ‹Ÿæœº, å½“ä½ å®Œæˆåç»ˆæ­¢è™šæ‹Ÿæœº, ä½ åªéœ€è¦ä¸ºä½ ä½¿ç”¨çš„èµ„æºä»˜è´¹.\n* å°†æ•°æ®ä¸­å¿ƒèµ„æºè§†ä¸ºå…¬å…±è®¾æ–½.\n\näºšé©¬é€Šåœ¨ 2006 å¹´å‘å¸ƒäº†å…¶ Amazon Web Servicesï¼ˆAWSï¼‰å’Œ EC2 äº§å“ï¼Œæˆä¸ºäº†è¿™ä¸ªé¢†åŸŸçš„å…ˆé©±ã€‚\n\n#### ä¸ºä»€ä¹ˆè¿™ä¸ªè¿›åŒ–å¦‚æ­¤é‡è¦\n\nåœ¨è¿‡å»å½“ä½ éœ€è¦ä¸Šçº¿ä¸€ä¸ªåœ¨çº¿ä¸šåŠ¡æ—¶, ä½ ä¸å¾—ä¸è¿›è¡Œå¤æ‚çš„è®¡åˆ’æ¥ä¿è¯ä½ åœ¨æ•°æ®ä¸­å¿ƒå†…æœ‰è¶³å¤Ÿçš„æœºæ¶ç©ºé—´ã€è¶³å¤Ÿçš„æœåŠ¡å™¨å’Œå­˜å‚¨æ¥å¤„ç†ä¸šåŠ¡çš„å¢é•¿, è¶³å¤Ÿçš„ç½‘ç»œå¸¦å®½æ¥å¤„ç†æ‰€æœ‰çš„ç”¨æˆ·æµé‡. è¿™ç§è®¡åˆ’å¹¶ä¸å®¹æ˜“, å°¤å…¶æ˜¯å¯¹æ—©æœŸçš„ä¸šåŠ¡æ¥è®², ä½ æ— æ³•é¢„æµ‹ä¸šåŠ¡çš„æœªæ¥å’Œå¢é•¿è½¨è¿¹.\n\n1. å®ƒç»™äº†å¼€å‘è€…è¶…èƒ½é‡:\n    * æ„æ€ä¸€ä¸ªæƒ³æ³•ç«‹å³ä¸Šçº¿.\n    * å¦‚æœæˆåŠŸäº†, å¯ä»¥å®¹æ˜“çš„æ‰©å±•è§„æ¨¡.\n    * å¦‚æœå¤±è´¥äº†, å…³é—­è™šæ‹Ÿæœºä»¥èŠ‚çº¦æˆæœ¬.\n2. å®ƒä½¿å¾—æ•°æ®ä¸­å¿ƒè‡ªåŠ¨åŒ–å˜å¾—æ›´å¼ºå¤§:\n    * å…¨è‡ªåŠ¨åŸºç¡€è®¾æ–½ç®¡ç†æˆä¸ºå¯èƒ½, å‡ºç°äº† â€œåŸºç¡€è®¾æ–½å³ä»£ç â€ çš„æ¦‚å¿µ.\n    * å¼¹æ€§ä¼¸ç¼©åœ¨è¿‡å»æ˜¯ä¸å¯èƒ½å®ç°çš„, ä½†æ˜¯ç°åœ¨ web åŸºç¡€è®¾æ–½å¯ä»¥å½“ä¸šåŠ¡å˜åŒ–æ—¶è‡ªåŠ¨çš„æ‰©å±•æˆ–è€…æ”¶ç¼©.\n    * åœ¨æœåŠ¡å™¨çš„è‡ªåŠ¨åŒ–ç®¡ç†ä¹‹å, æ•°æ®ä¸­å¿ƒçš„è‡ªåŠ¨åŒ–ä¹Ÿæ‰©å±•åˆ°äº†å­˜å‚¨ã€ç½‘ç»œä»¥åŠå…¶å®ƒå¤§é‡çš„éœ€è¦ä¸“ä¸šçŸ¥è¯†çš„ç³»ç»Ÿ, åœ¨ä»£ç å’Œ API èƒ½å¤Ÿå¤„ç†è¿™äº›è‡ªåŠ¨åŒ–ä¹‹å, è¿™ç»™å…¨çƒçš„å¼€å‘è€…ç¤¾åŒºå¸¦æ¥äº†æ–°çš„æœºé‡.\n\n### è¿›ä¸€æ­¥æ¼”åŒ–â€”â€”å¹³å°å³æœåŠ¡ (PaaS)\n\nå¹³å°å³æœåŠ¡ (PaaS) ä½¿å¾—å¼€å‘äººå‘˜å¯ä»¥å¾ˆå®¹æ˜“çš„éƒ¨ç½²å’Œç®¡ç†åº”ç”¨è€Œéšè—æ‰æ‰€æœ‰çš„å®ç°ç»†èŠ‚ä¾‹å¦‚æœåŠ¡å™¨ã€è´Ÿè½½å‡è¡¡å™¨ã€DNS ç­‰ç­‰. ä»–ä»¬æˆ–å¤šæˆ–å°‘çš„å»é™¤äº†å¯¹è¿ç»´å›¢é˜Ÿçš„éœ€æ±‚, è€Œæ˜¯è®©å¼€å‘äººå‘˜å»å…³æ³¨åº”ç”¨éƒ¨ç½². æœ‰å¾ˆå¤š PaaS æä¾›å•†, å…¶ä¸­ä¸€ä¸ªæœ€æµè¡Œçš„æ˜¯ Heroku. å…³äº Heroku çš„ä¸€ä¸ªæœ‰è¶£çš„äº‹æƒ…æ˜¯ Heroku å®Œå…¨æ˜¯è¿è¡Œåœ¨ AWS ä¹‹ä¸Šå¹¶ä¾èµ– AWS çš„. å¦‚æœä½ ä¸æ„¿æ„ä½ çš„åº”ç”¨è¿è¡Œåœ¨ç¾å›½ä¸œéƒ¨æˆ–è€…æ¬§æ´²è¥¿éƒ¨çš„ AWS ä¸Šçš„è¯, è¿™æˆ–è®¸æ˜¯ä¸€ä¸ªé—®é¢˜. æ²¡æœ‰ IaaS, åƒ Heroku è¿™æ ·çš„å¹³å°å¯èƒ½å°±ä¸ä¼šå­˜åœ¨äº†. PaaS æä¾›å•†åˆ©ç”¨ IaaS ä½œä¸ºä¸€ä¸ªéå¸¸é‡è¦çš„ç»„æˆéƒ¨åˆ†æ¥äº¤ä»˜å®ƒä»¬çš„æœåŠ¡. åœ¨å‡å°‘ä»æƒ³æ³•åˆ°éƒ¨ç½²çš„æ—¶é—´ã€è‡ªåŠ¨åŒ–æµç¨‹ä»¥åŠå‡å°‘ç‰¹æ®Šçš„ç³»ç»ŸçŸ¥è¯†éœ€æ±‚çš„è¶‹åŠ¿ä¸­, PaaS æ˜¯åˆç†çš„ä¸‹ä¸€æ­¥, å°±åƒæ˜¯ä»ä¸“ç”¨æœåŠ¡å™¨åˆ° IaaS ä¸€æ ·.\n\n#### æ„å»º PaaS æ˜¯å›°éš¾çš„\n\nèƒ½å¤Ÿé€šè¿‡æŠ½è±¡è€Œé¿å…å¤„ç†æœåŠ¡å™¨ç›¸å…³çš„é—®é¢˜æ˜¯ä¸å®¹æ˜“çš„, éœ€è¦å¼•å…¥å¾ˆå¤šä¸œè¥¿æ‰èƒ½åšåˆ°.\n\nåœ¨ PaaS çš„æ¦‚å¿µä¹‹ä¸‹æœ‰å‡ ä¸ªä¸»è¦çš„æ¨¡å—ï¼š\n\n* ç¼–è¯‘ç³»ç»Ÿâ€”â€”æŠŠä½ çš„ä»£ç ç¼–è¯‘æˆå¯ä»¥è¿è¡Œçš„åº”ç”¨, å¹¶ä¸”æŠŠå®ƒå­˜å‚¨åˆ°æŸä¸ªåœ°æ–¹ä½œä¸ºåç»­ä½¿ç”¨.\n* åº”ç”¨ç®¡ç†æ•°æ®åº“â€”â€”ç®¡ç† Git ç‰ˆæœ¬ã€build ç‰ˆæœ¬å’Œåº”ç”¨å…ƒæ•°æ®.\n* é›†ç¾¤è°ƒåº¦å™¨â€”â€”å°†ä¸€ç»„æœåŠ¡å™¨ä½œä¸ºä¸€å°å¤§çš„æœåŠ¡å™¨æ¥ç®¡ç†, åœ¨æœåŠ¡å™¨èµ„æºæ± çš„æŸä¸ªæœåŠ¡å™¨ä¸Šè¿è¡Œä½ çš„ç¨‹åº, å¹¶æ£€æŸ¥å’Œæ›¿æ¢å¤±æ•ˆçš„ä½œä¸š.\n* è´Ÿè½½å‡è¡¡â€”â€”å…è®¸ä» Internet å’Œå†…éƒ¨ç¨‹åºæ¥çš„ä¸šåŠ¡è´Ÿè½½è¢«æ­£ç¡®çš„è·¯ç”±åˆ°åˆé€‚çš„ä½ç½®.\n* DNSâ€”â€”åœ¨ä½ äº§ç”Ÿå’Œä¿®æ”¹åº”ç”¨æ—¶è‡ªåŠ¨é…ç½® DNS æ¡ç›®.\n* æˆ–è®¸æ˜¯æœ€é‡è¦çš„â€”â€”æŸä¸ªå½¢å¼çš„å®¹å™¨åŒ–ä¾‹å¦‚â€Š freebsd jailsã€solaris zonesã€æˆ–è€… linux containers, å®¹å™¨åŒ–ä½¿å¾—æŸä¸ªçš„åº”ç”¨ä¸ä¼šè¿›å…¥å’Œå½±å“åˆ°å…¶å®ƒçš„åº”ç”¨.\n\nç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªç‚¹æ˜¯ Docker è¿…é€Ÿå‘å±•çš„éå¸¸é‡è¦çš„åŸå› . Linux å®¹å™¨æŠ€æœ¯å·²ç»å­˜åœ¨äº†ä¸€æ®µæ—¶é—´äº†, ä½†æ˜¯åªæœ‰æŸäº›å¤§çš„å…¬å¸æˆ–è€… PaaS æä¾›å•†è‡ªåŠ¨åŒ–äº†å®¹å™¨çš„ä½¿ç”¨, Docker ä½¿ Linux å®¹å™¨çš„ä½¿ç”¨å˜å¾—éå¸¸ç®€å•, ä¹Ÿæä¾›äº†æ ‡å‡†åŒ–çš„é•œåƒæ ¼å¼, å®ƒæˆä¸ºäº† PaaS ä¸­é‡è¦çš„ç»„æˆéƒ¨åˆ†.\n\nè¿™éå¸¸å¼ºå¤§, å› ä¸ºå¾ˆå¤šå…¬å¸åœ¨å¤„ç†çˆ†å‘å¼çš„ç”¨æˆ·å¢é•¿, æ¥è‡ªäºç§»åŠ¨ã€ç¤¾äº¤å’Œ IoT çš„æ–°çš„ä¸šåŠ¡æ¨¡å¼, ä»¥åŠæœŸæœ›ä»ä¼ ç»Ÿçš„é•¿çš„ç‰ˆæœ¬å‘å¸ƒå‘¨æœŸè½¬å˜åˆ°æŒç»­äº¤ä»˜. ä»–ä»¬åˆ©ç”¨åŸºäºè½¯ä»¶çš„æ¶æ„æˆ–è€…å¾®æœåŠ¡. ä»–ä»¬éœ€è¦èƒ½å¤Ÿè‡ªåŠ¨éƒ¨ç½²å’Œæµ‹è¯•æ–°çš„ä»£ç , å¹¶æ ¹æ®ä¸šåŠ¡çš„å˜åŒ–å¼¹æ€§ä¼¸ç¼©. ä½†é—®é¢˜æ˜¯ä»–ä»¬æ²¡æœ‰è¶³å¤Ÿçš„èµ„æºå’Œç»éªŒæ¥äº¤ä»˜åˆ°ä»–ä»¬çš„å¼€å‘å›¢é˜Ÿ, æ‰€ä»¥ä»–ä»¬ä¸å¾—ä¸å°†å…¶å¤–åŒ…ç»™ PaaS æä¾›å•†. ä¸å¹¸çš„æ˜¯, å½“ä½ è¿™ä¹ˆåšçš„æ—¶å€™, ä½ å°±æ”¾å¼ƒäº†å¯¹äºè¿™ä¸ªé»‘ç›’å­çš„å¾ˆå¤šæ§åˆ¶, è€Œæ˜¯èŠ±å¾ˆå¤šé’±å¹¶ä½¿å¾—è‡ªå·±å®Œå…¨ä¾èµ–äºå®ƒ. å¦å¤–ä¸€ä¸ªé€‰é¡¹æ˜¯, å¾ˆå¤šå…¬å¸åå¤çš„é‡æ–°å‘æ˜è½®å­æˆ–è€…ä½¿ç”¨é‚£äº›éš¾äºç»´æŠ¤çš„ã€è¿è¡Œç¼“æ…¢çš„å’Œæ˜“äºå‡ºé”™çš„å·¥å…·.\n\næœ€å¥½çš„æƒ…å½¢æ˜¯åœ¨è‡ªå·±çš„æ•°æ®ä¸­å¿ƒæˆ–è€… Cloud å¸å·ä¸­è¿è¡Œä¸€ä¸ª PaaS å¹³å°, ä½ å¯ä»¥å…¨æƒæ§åˆ¶, ä½ çš„å›¢é˜Ÿå¯ä»¥ç›´æ¥å‚ä¸åº”ç”¨çš„éƒ¨ç½², å› æ­¤å¯ä»¥å½¢æˆä¸€ç§çœŸæ­£çš„ DevOps æ–‡åŒ–. Docker åŠå…¶æ ‡å‡†åŒ–çš„ç”Ÿæ€ç³»ç»Ÿæ˜¯è¿™ç§æ„¿æ™¯æˆä¸ºç°å®çš„é‡è¦ä¸€æ­¥.\n\n### æœ€åâ€”â€”å®¹å™¨æ‰˜ç®¡å¹³å° (CaaS)\n\nä»€ä¹ˆæ˜¯å®¹å™¨æ‰˜ç®¡å¹³å°, æˆ–è€…å«å®¹å™¨å³æœåŠ¡å‘¢ï¼Ÿè¿™å°±æ˜¯æˆ‘åœ¨ä¸Šé¢çš„ç« èŠ‚ä¸­æåˆ°çš„å¦å¤–ä¸€ç§æ„å»ºåœ¨ Docker åŸºç¡€ä¸Šçš„ Web æ‰˜ç®¡æ–¹å¼. å®ƒæ˜¯ä½ ç”¨å®¹å™¨æ¥éƒ¨ç½²å¤æ‚çš„å¤šå±‚æ¬¡çš„åº”ç”¨æ‰€éœ€è¦çš„è‡ªåŠ¨åŒ–çš„ç¼–è¯‘ç³»ç»Ÿ, é›†ç¾¤è°ƒåº¦å™¨, è´Ÿè½½å‡è¡¡, DNS è‡ªåŠ¨åŒ–ä»¥åŠæœåŠ¡å‘ç°. è¿™æ˜¯ PaaS çš„å¦å¤–ä¸€éƒ¨åˆ†å†…å®¹, ä½†æ˜¯ä½ ä¸æ˜¯ç”¨ä¸€ä¸ªå¤æ‚çš„ç¼–è¯‘ç³»ç»Ÿæ¥ç¼–è¯‘ä½ çš„åº”ç”¨, è€Œæ˜¯ç”¨ Docker é•œåƒ. é•œåƒå¯ä»¥éå¸¸å®¹æ˜“çš„è¿›è¡Œç¼–è¯‘å’Œæœ¬åœ°æµ‹è¯•, å› æ­¤ä½ åœ¨éƒ¨ç½²åº”ç”¨ä¹‹å‰å°±ç¡®è®¤åº”ç”¨å¯ä»¥æ­£å¸¸å·¥ä½œ. ç°åœ¨ PaaS ç”¨æˆ·ä¹Ÿå¯ä»¥å¾—åˆ°ç›¸åŒçš„ä½“éªŒ, ä½†æ˜¯ä¸éœ€è¦æ‹¥æœ‰è‡ªå·±çš„ç¡¬ä»¶æˆ–è€…äº‘å¸å·çš„å‰æä¸‹èŠ‚çº¦å¤§é‡çš„æˆæœ¬. ä»–ä»¬ä¸å†å—é™äºå…¶æœåŠ¡æä¾›å•†æ‰€æ”¯æŒçš„ç¯å¢ƒ, å¯ä»¥é€šè¿‡å°†åº”ç”¨æ‰“åŒ…æˆ Docker é•œåƒçš„æ–¹å¼åœ¨ä»»ä½•åœ°æ–¹è¿è¡Œ.\n\nåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­, åˆ©ç”¨è¯¸å¦‚ ContainerShip Cloud, ä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹, åœ¨ä»»ä½•äº‘å¹³å°ä¸Šç”šè‡³æ˜¯è£¸æœºä¸Šç”¨ç›¸åŒçš„æ–¹å¼è¿è¡Œä½ çš„åº”ç”¨. ä½ ä¸å†è¢«å¡åœ¨æ„å»ºå¤æ‚çš„åº”ç”¨æ¥è§£å†³éå¸¸å›°éš¾çš„é—®é¢˜, æˆ–è€…å¡åœ¨ä½¿ç”¨æŸä¸ªæä¾›å•†çš„ç‰¹æ®Šçš„è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·ä¸Š.\n\n* ä½†æ˜¯é€‰æ‹©ä¸€ä¸ªæ­£ç¡®çš„ Docker å®¹å™¨æ‰˜ç®¡å¹³å°å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…, æœ‰å¾ˆå¤šçš„é—®é¢˜éœ€è¦ä½ å»æ€è€ƒå’Œæ³¨æ„.\n* æœ‰å¤§é‡çš„é€‰é¡¹, å› æ­¤é€‰æ‹©å…¶ä¸­ä¸€ä¸ªè¿›è¡Œç ”ç©¶å°±å˜å¾—å›°éš¾. å¥½æ¶ˆæ¯æ˜¯å¦‚æœä½ çš„åº”ç”¨å·²ç»å®¹å™¨åŒ–, ä½ å°±å¯ä»¥è½»æ¾çš„æµ‹è¯•å…¶ä¸­çš„æ¯ä¸€ä¸ª.\n* ä½ æ­£åœ¨ä½¿ç”¨çš„æœåŠ¡æä¾›å•†ä¾‹å¦‚ Triton æˆ–è€… ECS çš„æŸä¸ªè§£å†³æ–¹æ¡ˆæˆ–è®¸ä½¿å¾—ä½ æ— æ³•è„±ç¦»è¿™ä¸ªæä¾›å•†, è¿™ä¹Ÿä½¿å¾— Docker çš„æœ€ä»¤äººå…´å¥‹çš„å¯ç§»æ¤æ€§å˜å¾—ä¸é‚£ä¹ˆé‡è¦äº†.\n* è®¸å¤š CaaS æ–¹æ¡ˆåœ¨ä»–ä»¬è‡ªå·±çš„ç¡¬ä»¶ä¸Šè¿è¡Œæ‰€æœ‰çš„ç®¡ç†ç³»ç»Ÿ, ä½ è‡ªå·±çš„æœåŠ¡å™¨ä¸Šåªæ˜¯è¿è¡ŒæŸä¸ªä»£ç†ç¨‹åºæ¥è¿æ¥ä»–ä»¬çš„ API, å› æ­¤å¦‚æœä»–ä»¬çš„ç³»ç»Ÿå®•æœºåä½ çš„é›†ç¾¤å°†æ— æ³•å·¥ä½œ.\n* å…è®¸ä½ åœ¨é˜²ç«å¢™åè¿è¡Œæ•´ä¸ªç³»ç»Ÿçš„æ–¹æ¡ˆæ˜¯éå¸¸å¤æ‚çš„, éœ€è¦ä¸€ä¸ªå›¢é˜Ÿå»ç®¡ç†å’Œå‡çº§.\n* èƒ½å¤Ÿå®¹æ˜“çš„åœ¨é˜²ç«å¢™åè¿è¡Œæ•´ä¸ªç³»ç»Ÿçš„æ–¹æ¡ˆä¼šä½¿å¾—é«˜å¯ç”¨æˆä¸ºä½ä¼˜å…ˆçº§çš„äº‹æƒ….\n* å½“ä½ é€‰æ‹©äº†ä¸€ä¸ª CaaS æä¾›å•†æ—¶, ä½ å°±å¯ä»¥æ‘†è„±äº†ä½ çš„æœåŠ¡æ‰˜ç®¡æä¾›å•†çš„é”å®š, ä½†æ˜¯ä½ å°†é™·å…¥åˆ° CaaS æä¾›å•†çš„é”å®š. ä½ æ— æ³•ä¸ä½¿ç”¨ä»–ä»¬çš„ SaaS ç®¡ç†æ¥å£è€Œåœ¨ä½ è‡ªå·±çš„ç¡¬ä»¶ä¸Šè¿è¡Œæ•´ä¸ªç³»ç»ŸåŒ…æ‹¬ç®¡ç†ç³»ç»Ÿ, API å’Œ UI. ä½ ä¸€æ—¦å†³å®šä»˜é’±, ä½ æœ€å¥½å¯ä»¥ä¸€ç›´ä»˜é’±.\n\n### æ€»ç»“\n\nç»ˆäºçœ‹å®Œäº†, çœŸçš„æ˜¯åˆè‡­åˆé•¿å•Š. å›é¡¾ä¸€ä¸‹è¿™ç¯‡æ–‡ç« , æ€»ä½“æ¥è¯´æ˜¯ç»å†äº†è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹:\n\n1. ä¸“æœ‰æœåŠ¡å™¨\n2. è™šæ‹ŸåŒ–æŠ€æœ¯\n3. åŸºç¡€è®¾æ–½å³æœåŠ¡ (IaaS)\n4. å¹³å°å³æœåŠ¡ (PaaS)\n5. å®¹å™¨å³æœåŠ¡ (CaaS)\n\næ€»ç»“ä¸€ä¸‹, æˆ‘è§‰å¾—å¼€å‘äººå‘˜è¿˜æ˜¯æœ‰å¿…è¦äº†è§£ä¸€ä¸‹å…³äºäº§å“éƒ¨ç½²ç›¸å…³çš„æŠ€æœ¯å‘å±•. ç„¶åæ ¹æ®è‡ªå·±çš„ä¸šåŠ¡æ¥é€‰æ‹©åˆé€‚çš„æœåŠ¡æä¾›å•†.\n","slug":"ç»™å°ç™½è¯»çš„-WEB-æ‰˜ç®¡æœåŠ¡è¿›åŒ–å²","published":1,"updated":"2019-12-07T04:53:18.096Z","layout":"post","photos":[],"link":"","_id":"ck3v60jtq000ur9q9szdjjfva","content":"<p>è¿™ç¯‡æ–‡ç« æ˜¯æ¥æ‹“å±•è‡ªå·±çŸ¥è¯†é¢çš„, åœ¨æˆ‘è¯»é«˜ä¸­é‚£ä¼š (08 å¹´), æˆ‘èº«è¾¹å°±æœ‰æ²‰è¿·ç”µè„‘æŠ€æœ¯çš„åŒå­¦, é‚£ä¸ªæ—¶å€™æˆ‘æƒ³ç€åšä¸€ä¸ªè‡ªå·±çš„ç½‘ç«™, è‚¯å®šæ˜¯éå¸¸ç‰›é€¼çš„äº‹äº†. ä»æœ€å¼€å§‹æ¥è§¦çš„æœåŠ¡, ä¾æ¬¡æ¥æ’ä¸ªåº. æ°¸ç¡• E ç›˜ -&gt; å…è´¹ç©ºé—´å»ºç«™ (å›½å¤–å±…å¤š) -&gt; è™šæ‹Ÿç©ºé—´ -&gt; è™šæ‹ŸæœåŠ¡å™¨ (VPS) -&gt; ç‹¬ç«‹æœåŠ¡å™¨. çœ‹å®Œè¿™ç¯‡æ–‡ç« å, æˆ‘æ€»ç®—å¯¹è¿™æ–¹é¢çŸ¥è¯†æœ‰äº†ä¸€ä¸ªæ¯”è¾ƒç³»ç»Ÿæ€§çš„è®¤è¯†äº†. ä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹.</p>\n<a id=\"more\"></a>\n<h3 id=\"å¼•å­\"><a href=\"#å¼•å­\" class=\"headerlink\" title=\"å¼•å­\"></a>å¼•å­</h3><p>æ–‡ç« å¼€å§‹ä¹‹å‰, æˆ‘è§‰å¾—è¿˜æ˜¯æœ‰å¿…è¦æŠŠè¿™äº›ä¸“æœ‰åè¯å…ˆç§‘æ™®ä¸€ä¸‹, ä¸è¦è§‰å¾—å¾ˆé«˜å¤§ä¸Š, ç®€ç§°è€Œå·².</p>\n<ul>\n<li>IaaS - åŸºç¡€è®¾æ–½å³æœåŠ¡</li>\n<li>PaaS - å¹³å°å³æœåŠ¡</li>\n<li>CaaS - å®¹å™¨å³æœåŠ¡</li>\n</ul>\n<p>æœ¬æ–‡ä»‹ç»äº† Web æ‰˜ç®¡æœåŠ¡è¿›åŒ–çš„å†å², ä»ä¸“ç”¨æœåŠ¡å™¨åˆ°è™šæ‹ŸåŒ–åˆ° IaaSã€PaaS å’Œæœ€æ–°çš„ CaaS; è¯´æ˜äº†æ¯ç§æ–¹å¼çš„ä¼˜ç‚¹å’Œç¼ºç‚¹. ç€é‡é˜è¿°äº†æ„å»º PaaS åº”ç”¨çš„å„ä¸ªç»„ä»¶, ä»¥åŠåœ¨é€‰æ‹© CaaS æä¾›å•†æ—¶åº”è¯¥è€ƒè™‘çš„é—®é¢˜. æœ€åä»æˆæœ¬å’ŒåŠŸèƒ½æ€§çš„è§’åº¦è®ºè¿°äº† PaaS ç”¨æˆ·åº”è¯¥è¿ç§»åˆ° CaaS å¹³å°.</p>\n<p>è¯»å®Œè¿™ç¯‡åšæ–‡, ä½ åº”è¯¥å¯ä»¥æ¸…æ¥šçš„ç†è§£:</p>\n<ul>\n<li>è¿™äº›åè¯åˆ°åº•æŒ‡ä»€ä¹ˆ</li>\n<li>è¿™ä¸ºä»€ä¹ˆå¯¹ä½ å¾ˆé‡è¦</li>\n<li>å¯¹äºä½ çš„ä½¿ç”¨åœºæ™¯ï¼Œå“ªç§æ–¹å¼æœ€é€‚åˆ</li>\n</ul>\n<p>å½“ç„¶æ²¡æœ‰ä¸€ç§æ–¹å¼èƒ½å¤Ÿé€‚åˆæ‰€æœ‰çš„ Web åŸºç¡€è®¾æ–½çš„åœºæ™¯, ä½ çš„ç‰¹æ®Šåœºæ™¯æˆ–è®¸éœ€è¦ç‰¹æ®Šçš„è€ƒè™‘.</p>\n<h3 id=\"ä»å¤´å¼€å§‹â€”â€”ä¸“ç”¨æœåŠ¡å™¨\"><a href=\"#ä»å¤´å¼€å§‹â€”â€”ä¸“ç”¨æœåŠ¡å™¨\" class=\"headerlink\" title=\"ä»å¤´å¼€å§‹â€”â€”ä¸“ç”¨æœåŠ¡å™¨\"></a>ä»å¤´å¼€å§‹â€”â€”ä¸“ç”¨æœåŠ¡å™¨</h3><p>Web æ‰˜ç®¡çš„æœ¬è´¨è¿˜æ˜¯åœ¨ä¸€ä¸ªæ•°æ®ä¸­å¿ƒé‡Œå¸ƒæ»¡äº†æœåŠ¡å™¨ã€äº¤æ¢æœºã€è·¯ç”±å™¨ã€å­˜å‚¨é˜µåˆ—å’Œå…¶å®ƒç½‘ç»œç»„ä»¶. æˆ‘ä»¬æ‰€è®¨è®ºçš„æ¯ä¸€ä¸ªé€‰é¡¹ä¸ç®¡å®ƒæ˜¯ PaaSã€IaaS è¿˜æ˜¯ CaaS, å®ƒåº•å±‚ä½¿ç”¨çš„åŸºç¡€è®¾æ–½éƒ½æ˜¯ç›¸åŒçš„, å³åœ¨ä¸€ä¸ªå¤§å±‹å­é‡Œçš„å¾ˆå¤šç‹¬ç«‹æœåŠ¡å™¨. ä»–ä»¬åªæ˜¯ä¸Šé¢å¢åŠ äº†å¾ˆå¤šæŠ½è±¡å±‚ä½¿å¾—ç®¡ç†å˜å¾—æ›´ç®€å•, å’Œä½¿ç”¨è‡ªåŠ¨åŒ–çš„æ–¹å¼å¤„ç†ä»¥å‰å¾ˆæ…¢æˆ–è€…éœ€è¦æ‰‹åŠ¨æ­¥éª¤çš„ä»»åŠ¡.</p>\n<p>ä¸“ç”¨æœåŠ¡å™¨, æˆ–è€…å«åš â€œè£¸æœºâ€ æœ‰å®ƒçš„ä¼˜ç‚¹å’Œç¼ºç‚¹.</p>\n<h4 id=\"ä¼˜ç‚¹\"><a href=\"#ä¼˜ç‚¹\" class=\"headerlink\" title=\"ä¼˜ç‚¹\"></a>ä¼˜ç‚¹</h4><ul>\n<li>æ€§èƒ½â€”â€”ä½ åœ¨ç›´æ¥ä½¿ç”¨ä¸€ä¸ªæœåŠ¡å™¨, æ²¡æœ‰ä»»ä½•æŠ½è±¡å±‚ä¾‹å¦‚è™šæ‹ŸåŒ–å¸¦æ¥çš„æ€§èƒ½å¼€é”€.</li>\n<li>å¯é æ€§â€”â€”æ²¡æœ‰æŠ½è±¡å±‚å’Œè™šæ‹ŸåŒ–, å‡ºé”™çš„å¯èƒ½æ€§ä¼šé™ä½.</li>\n<li>èµ„æºåˆ©ç”¨ç‡â€”â€”ä½¿ç”¨ä¸“ç”¨æœåŠ¡å™¨, ä½ çš„è¿›ç¨‹ä¸éœ€è¦è·Ÿå…¶å®ƒçš„è™šæ‹Ÿæœºæˆ–è€…è¿›ç¨‹ç«äº‰èµ„æºä¾‹å¦‚ CPUã€å†…å­˜å’Œå¸¦å®½.</li>\n</ul>\n<h4 id=\"ç¼ºç‚¹\"><a href=\"#ç¼ºç‚¹\" class=\"headerlink\" title=\"ç¼ºç‚¹\"></a>ç¼ºç‚¹</h4><ul>\n<li>ç®¡ç†å¤æ‚æ€§â€”â€”ä½ æ— æ³•å®¹æ˜“åœ°å…‹éš†ä¸“ç”¨æœåŠ¡å™¨æ¥äº§ç”Ÿæ›´å¤šçš„å®ä¾‹, ä¸“ç”¨æœåŠ¡å™¨æ²¡æœ‰ AMIï¼ˆè¯‘è€…æ³¨: Amazon Machine Imageï¼‰æˆ–è€…é•œåƒçš„æ¦‚å¿µ. æƒ³æ‰©å±•ä½ çš„åŸºç¡€è®¾æ–½åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Ÿæˆ‘å¸Œæœ›ä½ ç”¨é…ç½®ç®¡ç†, æˆ–è€…ä½¿ç”¨å¯ä¿¡èµ–çš„è€æœ‹å‹ rsync.</li>\n<li>æˆæœ¬â€”â€”ä½¿ç”¨ä¸“ç”¨æœåŠ¡å™¨, åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä½ éœ€è¦é¢„å…ˆæ”¯ä»˜æœåŠ¡å™¨çš„ç¡¬ä»¶ä»·æ ¼, ç„¶åå†ä»˜ç§Ÿç”¨åœºåœ°çš„æˆæœ¬, æˆ–è€…ä½ ä»ä¸€ä¸ªæœåŠ¡æä¾›å•†é‚£é‡Œç§Ÿèµå®ƒä»¬. æ— è®ºå“ªç§æ–¹å¼, ä½ éƒ½æ²¡æ³•åœ¨ä¸ä½¿ç”¨æ—¶ç»ˆæ­¢æœåŠ¡å™¨çš„ç§Ÿèµæ¥èŠ‚çœæˆæœ¬, å› æ­¤ä½ éœ€è¦æ›´åŠ è°¨æ…çš„å¯¹å¾…ä½ çš„è´¢åŠ¡è®¡åˆ’.</li>\n<li>ä½ æ‰€æœ‰çš„è¿›ç¨‹å’Œåº”ç”¨éƒ½è¿è¡Œåœ¨ä¸“ç”¨æœåŠ¡å™¨ä¸Š, å› æ­¤è¿è¡Œåœ¨ç›¸åŒçš„æ“ä½œç³»ç»Ÿä¸Š. ä¸ºäº†å¯æ‰©å±•æ€§çš„ç›®çš„, ä½ å¾€å¾€å¸Œæœ›æœåŠ¡å™¨åªè¿è¡Œå•ä¸€çš„è¿›ç¨‹, ä¾‹å¦‚ Web æœåŠ¡æˆ–è€…æ•°æ®åº“æœåŠ¡. åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šè¿è¡Œæ‰€æœ‰çš„åº”ç”¨ä½¿å¾—æ“ä½œç³»ç»Ÿçš„è°ƒä¼˜å˜å¾—æ›´å›°éš¾.</li>\n</ul>\n<h3 id=\"ä½¿äº‹æƒ…å˜å¾—æ›´å®¹æ˜“â€”â€”è™šæ‹ŸåŒ–\"><a href=\"#ä½¿äº‹æƒ…å˜å¾—æ›´å®¹æ˜“â€”â€”è™šæ‹ŸåŒ–\" class=\"headerlink\" title=\"ä½¿äº‹æƒ…å˜å¾—æ›´å®¹æ˜“â€”â€”è™šæ‹ŸåŒ–\"></a>ä½¿äº‹æƒ…å˜å¾—æ›´å®¹æ˜“â€”â€”è™šæ‹ŸåŒ–</h3><p>å°½ç®¡ä¸“ç”¨æœåŠ¡å™¨æœ‰å¾ˆå¤šä¼˜ç‚¹, ä½†æ˜¯å®ƒçš„ç¼ºç‚¹åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¼šè¿œè¿œè¶…è¿‡å…¶ä¼˜ç‚¹. å…¬å¸ä¸ºäº†èƒ½å¤Ÿè¿…é€Ÿè¿›å…¥å¸‚åœºèµ¢å¾—ç«äº‰, å¯¹äºéƒ¨ç½²çš„é€Ÿåº¦æå‡ºäº†æ›´é«˜çš„è¦æ±‚, è™šæ‹ŸåŒ–å°±å¾ˆè‡ªç„¶çš„æˆä¸ºäº†æ•°æ®ä¸­å¿ƒè¿›åŒ–ä¸­çš„ä¸‹ä¸€ä¸ªæ­¥éª¤.</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯è™šæ‹ŸåŒ–\"><a href=\"#ä»€ä¹ˆæ˜¯è™šæ‹ŸåŒ–\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯è™šæ‹ŸåŒ–\"></a>ä»€ä¹ˆæ˜¯è™šæ‹ŸåŒ–</h4><p>ç®€è€Œè¨€ä¹‹, è™šæ‹ŸåŒ–å°±æ˜¯å°†ç‰©ç†æœåŠ¡å™¨åˆ†æˆæ›´å°çš„è™šæ‹Ÿæœº, è¿™äº›è™šæ‹Ÿæœºåªèƒ½è®¿é—®ç‰©ç†æœºçš„éƒ¨åˆ†èµ„æº. ä¾‹å¦‚ä½ æœ‰ä¸€ä¸ª 8CPU æ ¸ä»¥åŠ 16GB å†…å­˜çš„ç‰©ç†æœåŠ¡å™¨, åˆ™å¯ä»¥å°†å®ƒåˆ†æˆ 8 ä¸ªè™šæ‹Ÿæœº, æ¯ä¸ªè™šæ‹Ÿæœºæœ‰ 1 ä¸ª CPU å’Œ 2GB å†…å­˜. ä½ æˆ–è®¸å·²ç»å¬è¯´è¿‡ä¸€äº›è™šæ‹ŸåŒ–æŠ€æœ¯å¦‚ Xen, KVM, VMware å’Œ Hyper-V, å…¶å®å¾ˆæœ‰æ›´å¤š.</p>\n<h4 id=\"ä¼˜ç‚¹-1\"><a href=\"#ä¼˜ç‚¹-1\" class=\"headerlink\" title=\"ä¼˜ç‚¹\"></a>ä¼˜ç‚¹</h4><ul>\n<li>ä½ å¯ä»¥åœ¨éœ€è¦æ›´å¤šè™šæ‹Ÿæœºå®ä¾‹æˆ–è€…æƒ³è¦è™šæ‹Ÿæœºå…±äº«æ—¶è¿›è¡Œè™šæ‹Ÿæœºçš„å…‹éš†.</li>\n<li>ä½ å¯ä»¥å¤‡ä»½è™šæ‹Ÿæœºé•œåƒä½œä¸ºå®‰å…¨ä¿æŠ¤æˆ–è€…ç¾å¤‡.</li>\n</ul>\n<h4 id=\"ç¼ºç‚¹-1\"><a href=\"#ç¼ºç‚¹-1\" class=\"headerlink\" title=\"ç¼ºç‚¹\"></a>ç¼ºç‚¹</h4><ul>\n<li>ä½¿ç”¨è™šæ‹ŸåŒ–æ„å‘³ç€é¢å¤–çš„æ€§èƒ½å¼€é”€, å¯èƒ½é€ æˆæ€§èƒ½ä¸‹é™.</li>\n<li>è™šæ‹Ÿæœºé•œåƒåœ¨ä¸åŒçš„æœåŠ¡æä¾›å•†å’Œè™šæ‹ŸåŒ–æŠ€æœ¯ä¹‹é—´åŸºæœ¬ä¸Šæ˜¯ä¸å¯ç§»æ¤çš„.</li>\n<li>ç®¡ç†è™šæ‹Ÿæœºä¾ç„¶æ˜¯æ‰‹å·¥æ­¥éª¤, éœ€è¦ç®¡ç†çš„æ—¶é—´å’Œä¸“ä¸šçŸ¥è¯†.</li>\n</ul>\n<h3 id=\"è¿›åŒ–â€”â€”è™šæ‹ŸåŒ–å˜æˆ-IaaS\"><a href=\"#è¿›åŒ–â€”â€”è™šæ‹ŸåŒ–å˜æˆ-IaaS\" class=\"headerlink\" title=\"è¿›åŒ–â€”â€”è™šæ‹ŸåŒ–å˜æˆ IaaS\"></a>è¿›åŒ–â€”â€”è™šæ‹ŸåŒ–å˜æˆ IaaS</h3><p>ä½ çŸ¥é“ <a href=\"http://www.businessinsider.com/people-think-stormy-weather-affects-cloud-computing-2012-8\" target=\"_blank\" rel=\"noopener\">51% çš„äººè®¤ä¸º â€œäº‘â€ ä¼šè¢«å¤©æ°”å½±å“å—</a>ï¼Ÿä½ çŸ¥é“å½“äººä»¬è°ˆè®º â€œäº‘â€ æ—¶ä»–ä»¬å®é™…ä¸Šæ˜¯åœ¨è®¨è®ºåŸºç¡€è®¾æ–½å³æœåŠ¡ (IaaS) å—ï¼Ÿ</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯åŸºç¡€è®¾æ–½å³æœåŠ¡-IaaS\"><a href=\"#ä»€ä¹ˆæ˜¯åŸºç¡€è®¾æ–½å³æœåŠ¡-IaaS\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯åŸºç¡€è®¾æ–½å³æœåŠ¡ (IaaS)\"></a>ä»€ä¹ˆæ˜¯åŸºç¡€è®¾æ–½å³æœåŠ¡ (IaaS)</h4><ul>\n<li>é€šè¿‡ API æ¥ç®¡ç†ç¡¬ä»¶çš„è™šæ‹ŸåŒ–.</li>\n<li>é€šè¿‡ç¼–ç¨‹æ¥å£è®¿é—®è®¡ç®—ã€å­˜å‚¨å’Œç½‘ç»œèµ„æºå’Œé…ç½®.</li>\n<li>å½“ä½ éœ€è¦æ˜¯ç”³è¯·ä¸€ä¸ªæ–°çš„è™šæ‹Ÿæœº, å½“ä½ å®Œæˆåç»ˆæ­¢è™šæ‹Ÿæœº, ä½ åªéœ€è¦ä¸ºä½ ä½¿ç”¨çš„èµ„æºä»˜è´¹.</li>\n<li>å°†æ•°æ®ä¸­å¿ƒèµ„æºè§†ä¸ºå…¬å…±è®¾æ–½.</li>\n</ul>\n<p>äºšé©¬é€Šåœ¨ 2006 å¹´å‘å¸ƒäº†å…¶ Amazon Web Servicesï¼ˆAWSï¼‰å’Œ EC2 äº§å“ï¼Œæˆä¸ºäº†è¿™ä¸ªé¢†åŸŸçš„å…ˆé©±ã€‚</p>\n<h4 id=\"ä¸ºä»€ä¹ˆè¿™ä¸ªè¿›åŒ–å¦‚æ­¤é‡è¦\"><a href=\"#ä¸ºä»€ä¹ˆè¿™ä¸ªè¿›åŒ–å¦‚æ­¤é‡è¦\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆè¿™ä¸ªè¿›åŒ–å¦‚æ­¤é‡è¦\"></a>ä¸ºä»€ä¹ˆè¿™ä¸ªè¿›åŒ–å¦‚æ­¤é‡è¦</h4><p>åœ¨è¿‡å»å½“ä½ éœ€è¦ä¸Šçº¿ä¸€ä¸ªåœ¨çº¿ä¸šåŠ¡æ—¶, ä½ ä¸å¾—ä¸è¿›è¡Œå¤æ‚çš„è®¡åˆ’æ¥ä¿è¯ä½ åœ¨æ•°æ®ä¸­å¿ƒå†…æœ‰è¶³å¤Ÿçš„æœºæ¶ç©ºé—´ã€è¶³å¤Ÿçš„æœåŠ¡å™¨å’Œå­˜å‚¨æ¥å¤„ç†ä¸šåŠ¡çš„å¢é•¿, è¶³å¤Ÿçš„ç½‘ç»œå¸¦å®½æ¥å¤„ç†æ‰€æœ‰çš„ç”¨æˆ·æµé‡. è¿™ç§è®¡åˆ’å¹¶ä¸å®¹æ˜“, å°¤å…¶æ˜¯å¯¹æ—©æœŸçš„ä¸šåŠ¡æ¥è®², ä½ æ— æ³•é¢„æµ‹ä¸šåŠ¡çš„æœªæ¥å’Œå¢é•¿è½¨è¿¹.</p>\n<ol>\n<li>å®ƒç»™äº†å¼€å‘è€…è¶…èƒ½é‡:<ul>\n<li>æ„æ€ä¸€ä¸ªæƒ³æ³•ç«‹å³ä¸Šçº¿.</li>\n<li>å¦‚æœæˆåŠŸäº†, å¯ä»¥å®¹æ˜“çš„æ‰©å±•è§„æ¨¡.</li>\n<li>å¦‚æœå¤±è´¥äº†, å…³é—­è™šæ‹Ÿæœºä»¥èŠ‚çº¦æˆæœ¬.</li>\n</ul>\n</li>\n<li>å®ƒä½¿å¾—æ•°æ®ä¸­å¿ƒè‡ªåŠ¨åŒ–å˜å¾—æ›´å¼ºå¤§:<ul>\n<li>å…¨è‡ªåŠ¨åŸºç¡€è®¾æ–½ç®¡ç†æˆä¸ºå¯èƒ½, å‡ºç°äº† â€œåŸºç¡€è®¾æ–½å³ä»£ç â€ çš„æ¦‚å¿µ.</li>\n<li>å¼¹æ€§ä¼¸ç¼©åœ¨è¿‡å»æ˜¯ä¸å¯èƒ½å®ç°çš„, ä½†æ˜¯ç°åœ¨ web åŸºç¡€è®¾æ–½å¯ä»¥å½“ä¸šåŠ¡å˜åŒ–æ—¶è‡ªåŠ¨çš„æ‰©å±•æˆ–è€…æ”¶ç¼©.</li>\n<li>åœ¨æœåŠ¡å™¨çš„è‡ªåŠ¨åŒ–ç®¡ç†ä¹‹å, æ•°æ®ä¸­å¿ƒçš„è‡ªåŠ¨åŒ–ä¹Ÿæ‰©å±•åˆ°äº†å­˜å‚¨ã€ç½‘ç»œä»¥åŠå…¶å®ƒå¤§é‡çš„éœ€è¦ä¸“ä¸šçŸ¥è¯†çš„ç³»ç»Ÿ, åœ¨ä»£ç å’Œ API èƒ½å¤Ÿå¤„ç†è¿™äº›è‡ªåŠ¨åŒ–ä¹‹å, è¿™ç»™å…¨çƒçš„å¼€å‘è€…ç¤¾åŒºå¸¦æ¥äº†æ–°çš„æœºé‡.</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"è¿›ä¸€æ­¥æ¼”åŒ–â€”â€”å¹³å°å³æœåŠ¡-PaaS\"><a href=\"#è¿›ä¸€æ­¥æ¼”åŒ–â€”â€”å¹³å°å³æœåŠ¡-PaaS\" class=\"headerlink\" title=\"è¿›ä¸€æ­¥æ¼”åŒ–â€”â€”å¹³å°å³æœåŠ¡ (PaaS)\"></a>è¿›ä¸€æ­¥æ¼”åŒ–â€”â€”å¹³å°å³æœåŠ¡ (PaaS)</h3><p>å¹³å°å³æœåŠ¡ (PaaS) ä½¿å¾—å¼€å‘äººå‘˜å¯ä»¥å¾ˆå®¹æ˜“çš„éƒ¨ç½²å’Œç®¡ç†åº”ç”¨è€Œéšè—æ‰æ‰€æœ‰çš„å®ç°ç»†èŠ‚ä¾‹å¦‚æœåŠ¡å™¨ã€è´Ÿè½½å‡è¡¡å™¨ã€DNS ç­‰ç­‰. ä»–ä»¬æˆ–å¤šæˆ–å°‘çš„å»é™¤äº†å¯¹è¿ç»´å›¢é˜Ÿçš„éœ€æ±‚, è€Œæ˜¯è®©å¼€å‘äººå‘˜å»å…³æ³¨åº”ç”¨éƒ¨ç½². æœ‰å¾ˆå¤š PaaS æä¾›å•†, å…¶ä¸­ä¸€ä¸ªæœ€æµè¡Œçš„æ˜¯ Heroku. å…³äº Heroku çš„ä¸€ä¸ªæœ‰è¶£çš„äº‹æƒ…æ˜¯ Heroku å®Œå…¨æ˜¯è¿è¡Œåœ¨ AWS ä¹‹ä¸Šå¹¶ä¾èµ– AWS çš„. å¦‚æœä½ ä¸æ„¿æ„ä½ çš„åº”ç”¨è¿è¡Œåœ¨ç¾å›½ä¸œéƒ¨æˆ–è€…æ¬§æ´²è¥¿éƒ¨çš„ AWS ä¸Šçš„è¯, è¿™æˆ–è®¸æ˜¯ä¸€ä¸ªé—®é¢˜. æ²¡æœ‰ IaaS, åƒ Heroku è¿™æ ·çš„å¹³å°å¯èƒ½å°±ä¸ä¼šå­˜åœ¨äº†. PaaS æä¾›å•†åˆ©ç”¨ IaaS ä½œä¸ºä¸€ä¸ªéå¸¸é‡è¦çš„ç»„æˆéƒ¨åˆ†æ¥äº¤ä»˜å®ƒä»¬çš„æœåŠ¡. åœ¨å‡å°‘ä»æƒ³æ³•åˆ°éƒ¨ç½²çš„æ—¶é—´ã€è‡ªåŠ¨åŒ–æµç¨‹ä»¥åŠå‡å°‘ç‰¹æ®Šçš„ç³»ç»ŸçŸ¥è¯†éœ€æ±‚çš„è¶‹åŠ¿ä¸­, PaaS æ˜¯åˆç†çš„ä¸‹ä¸€æ­¥, å°±åƒæ˜¯ä»ä¸“ç”¨æœåŠ¡å™¨åˆ° IaaS ä¸€æ ·.</p>\n<h4 id=\"æ„å»º-PaaS-æ˜¯å›°éš¾çš„\"><a href=\"#æ„å»º-PaaS-æ˜¯å›°éš¾çš„\" class=\"headerlink\" title=\"æ„å»º PaaS æ˜¯å›°éš¾çš„\"></a>æ„å»º PaaS æ˜¯å›°éš¾çš„</h4><p>èƒ½å¤Ÿé€šè¿‡æŠ½è±¡è€Œé¿å…å¤„ç†æœåŠ¡å™¨ç›¸å…³çš„é—®é¢˜æ˜¯ä¸å®¹æ˜“çš„, éœ€è¦å¼•å…¥å¾ˆå¤šä¸œè¥¿æ‰èƒ½åšåˆ°.</p>\n<p>åœ¨ PaaS çš„æ¦‚å¿µä¹‹ä¸‹æœ‰å‡ ä¸ªä¸»è¦çš„æ¨¡å—ï¼š</p>\n<ul>\n<li>ç¼–è¯‘ç³»ç»Ÿâ€”â€”æŠŠä½ çš„ä»£ç ç¼–è¯‘æˆå¯ä»¥è¿è¡Œçš„åº”ç”¨, å¹¶ä¸”æŠŠå®ƒå­˜å‚¨åˆ°æŸä¸ªåœ°æ–¹ä½œä¸ºåç»­ä½¿ç”¨.</li>\n<li>åº”ç”¨ç®¡ç†æ•°æ®åº“â€”â€”ç®¡ç† Git ç‰ˆæœ¬ã€build ç‰ˆæœ¬å’Œåº”ç”¨å…ƒæ•°æ®.</li>\n<li>é›†ç¾¤è°ƒåº¦å™¨â€”â€”å°†ä¸€ç»„æœåŠ¡å™¨ä½œä¸ºä¸€å°å¤§çš„æœåŠ¡å™¨æ¥ç®¡ç†, åœ¨æœåŠ¡å™¨èµ„æºæ± çš„æŸä¸ªæœåŠ¡å™¨ä¸Šè¿è¡Œä½ çš„ç¨‹åº, å¹¶æ£€æŸ¥å’Œæ›¿æ¢å¤±æ•ˆçš„ä½œä¸š.</li>\n<li>è´Ÿè½½å‡è¡¡â€”â€”å…è®¸ä» Internet å’Œå†…éƒ¨ç¨‹åºæ¥çš„ä¸šåŠ¡è´Ÿè½½è¢«æ­£ç¡®çš„è·¯ç”±åˆ°åˆé€‚çš„ä½ç½®.</li>\n<li>DNSâ€”â€”åœ¨ä½ äº§ç”Ÿå’Œä¿®æ”¹åº”ç”¨æ—¶è‡ªåŠ¨é…ç½® DNS æ¡ç›®.</li>\n<li>æˆ–è®¸æ˜¯æœ€é‡è¦çš„â€”â€”æŸä¸ªå½¢å¼çš„å®¹å™¨åŒ–ä¾‹å¦‚â€Š freebsd jailsã€solaris zonesã€æˆ–è€… linux containers, å®¹å™¨åŒ–ä½¿å¾—æŸä¸ªçš„åº”ç”¨ä¸ä¼šè¿›å…¥å’Œå½±å“åˆ°å…¶å®ƒçš„åº”ç”¨.</li>\n</ul>\n<p>ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªç‚¹æ˜¯ Docker è¿…é€Ÿå‘å±•çš„éå¸¸é‡è¦çš„åŸå› . Linux å®¹å™¨æŠ€æœ¯å·²ç»å­˜åœ¨äº†ä¸€æ®µæ—¶é—´äº†, ä½†æ˜¯åªæœ‰æŸäº›å¤§çš„å…¬å¸æˆ–è€… PaaS æä¾›å•†è‡ªåŠ¨åŒ–äº†å®¹å™¨çš„ä½¿ç”¨, Docker ä½¿ Linux å®¹å™¨çš„ä½¿ç”¨å˜å¾—éå¸¸ç®€å•, ä¹Ÿæä¾›äº†æ ‡å‡†åŒ–çš„é•œåƒæ ¼å¼, å®ƒæˆä¸ºäº† PaaS ä¸­é‡è¦çš„ç»„æˆéƒ¨åˆ†.</p>\n<p>è¿™éå¸¸å¼ºå¤§, å› ä¸ºå¾ˆå¤šå…¬å¸åœ¨å¤„ç†çˆ†å‘å¼çš„ç”¨æˆ·å¢é•¿, æ¥è‡ªäºç§»åŠ¨ã€ç¤¾äº¤å’Œ IoT çš„æ–°çš„ä¸šåŠ¡æ¨¡å¼, ä»¥åŠæœŸæœ›ä»ä¼ ç»Ÿçš„é•¿çš„ç‰ˆæœ¬å‘å¸ƒå‘¨æœŸè½¬å˜åˆ°æŒç»­äº¤ä»˜. ä»–ä»¬åˆ©ç”¨åŸºäºè½¯ä»¶çš„æ¶æ„æˆ–è€…å¾®æœåŠ¡. ä»–ä»¬éœ€è¦èƒ½å¤Ÿè‡ªåŠ¨éƒ¨ç½²å’Œæµ‹è¯•æ–°çš„ä»£ç , å¹¶æ ¹æ®ä¸šåŠ¡çš„å˜åŒ–å¼¹æ€§ä¼¸ç¼©. ä½†é—®é¢˜æ˜¯ä»–ä»¬æ²¡æœ‰è¶³å¤Ÿçš„èµ„æºå’Œç»éªŒæ¥äº¤ä»˜åˆ°ä»–ä»¬çš„å¼€å‘å›¢é˜Ÿ, æ‰€ä»¥ä»–ä»¬ä¸å¾—ä¸å°†å…¶å¤–åŒ…ç»™ PaaS æä¾›å•†. ä¸å¹¸çš„æ˜¯, å½“ä½ è¿™ä¹ˆåšçš„æ—¶å€™, ä½ å°±æ”¾å¼ƒäº†å¯¹äºè¿™ä¸ªé»‘ç›’å­çš„å¾ˆå¤šæ§åˆ¶, è€Œæ˜¯èŠ±å¾ˆå¤šé’±å¹¶ä½¿å¾—è‡ªå·±å®Œå…¨ä¾èµ–äºå®ƒ. å¦å¤–ä¸€ä¸ªé€‰é¡¹æ˜¯, å¾ˆå¤šå…¬å¸åå¤çš„é‡æ–°å‘æ˜è½®å­æˆ–è€…ä½¿ç”¨é‚£äº›éš¾äºç»´æŠ¤çš„ã€è¿è¡Œç¼“æ…¢çš„å’Œæ˜“äºå‡ºé”™çš„å·¥å…·.</p>\n<p>æœ€å¥½çš„æƒ…å½¢æ˜¯åœ¨è‡ªå·±çš„æ•°æ®ä¸­å¿ƒæˆ–è€… Cloud å¸å·ä¸­è¿è¡Œä¸€ä¸ª PaaS å¹³å°, ä½ å¯ä»¥å…¨æƒæ§åˆ¶, ä½ çš„å›¢é˜Ÿå¯ä»¥ç›´æ¥å‚ä¸åº”ç”¨çš„éƒ¨ç½², å› æ­¤å¯ä»¥å½¢æˆä¸€ç§çœŸæ­£çš„ DevOps æ–‡åŒ–. Docker åŠå…¶æ ‡å‡†åŒ–çš„ç”Ÿæ€ç³»ç»Ÿæ˜¯è¿™ç§æ„¿æ™¯æˆä¸ºç°å®çš„é‡è¦ä¸€æ­¥.</p>\n<h3 id=\"æœ€åâ€”â€”å®¹å™¨æ‰˜ç®¡å¹³å°-CaaS\"><a href=\"#æœ€åâ€”â€”å®¹å™¨æ‰˜ç®¡å¹³å°-CaaS\" class=\"headerlink\" title=\"æœ€åâ€”â€”å®¹å™¨æ‰˜ç®¡å¹³å° (CaaS)\"></a>æœ€åâ€”â€”å®¹å™¨æ‰˜ç®¡å¹³å° (CaaS)</h3><p>ä»€ä¹ˆæ˜¯å®¹å™¨æ‰˜ç®¡å¹³å°, æˆ–è€…å«å®¹å™¨å³æœåŠ¡å‘¢ï¼Ÿè¿™å°±æ˜¯æˆ‘åœ¨ä¸Šé¢çš„ç« èŠ‚ä¸­æåˆ°çš„å¦å¤–ä¸€ç§æ„å»ºåœ¨ Docker åŸºç¡€ä¸Šçš„ Web æ‰˜ç®¡æ–¹å¼. å®ƒæ˜¯ä½ ç”¨å®¹å™¨æ¥éƒ¨ç½²å¤æ‚çš„å¤šå±‚æ¬¡çš„åº”ç”¨æ‰€éœ€è¦çš„è‡ªåŠ¨åŒ–çš„ç¼–è¯‘ç³»ç»Ÿ, é›†ç¾¤è°ƒåº¦å™¨, è´Ÿè½½å‡è¡¡, DNS è‡ªåŠ¨åŒ–ä»¥åŠæœåŠ¡å‘ç°. è¿™æ˜¯ PaaS çš„å¦å¤–ä¸€éƒ¨åˆ†å†…å®¹, ä½†æ˜¯ä½ ä¸æ˜¯ç”¨ä¸€ä¸ªå¤æ‚çš„ç¼–è¯‘ç³»ç»Ÿæ¥ç¼–è¯‘ä½ çš„åº”ç”¨, è€Œæ˜¯ç”¨ Docker é•œåƒ. é•œåƒå¯ä»¥éå¸¸å®¹æ˜“çš„è¿›è¡Œç¼–è¯‘å’Œæœ¬åœ°æµ‹è¯•, å› æ­¤ä½ åœ¨éƒ¨ç½²åº”ç”¨ä¹‹å‰å°±ç¡®è®¤åº”ç”¨å¯ä»¥æ­£å¸¸å·¥ä½œ. ç°åœ¨ PaaS ç”¨æˆ·ä¹Ÿå¯ä»¥å¾—åˆ°ç›¸åŒçš„ä½“éªŒ, ä½†æ˜¯ä¸éœ€è¦æ‹¥æœ‰è‡ªå·±çš„ç¡¬ä»¶æˆ–è€…äº‘å¸å·çš„å‰æä¸‹èŠ‚çº¦å¤§é‡çš„æˆæœ¬. ä»–ä»¬ä¸å†å—é™äºå…¶æœåŠ¡æä¾›å•†æ‰€æ”¯æŒçš„ç¯å¢ƒ, å¯ä»¥é€šè¿‡å°†åº”ç”¨æ‰“åŒ…æˆ Docker é•œåƒçš„æ–¹å¼åœ¨ä»»ä½•åœ°æ–¹è¿è¡Œ.</p>\n<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­, åˆ©ç”¨è¯¸å¦‚ ContainerShip Cloud, ä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹, åœ¨ä»»ä½•äº‘å¹³å°ä¸Šç”šè‡³æ˜¯è£¸æœºä¸Šç”¨ç›¸åŒçš„æ–¹å¼è¿è¡Œä½ çš„åº”ç”¨. ä½ ä¸å†è¢«å¡åœ¨æ„å»ºå¤æ‚çš„åº”ç”¨æ¥è§£å†³éå¸¸å›°éš¾çš„é—®é¢˜, æˆ–è€…å¡åœ¨ä½¿ç”¨æŸä¸ªæä¾›å•†çš„ç‰¹æ®Šçš„è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·ä¸Š.</p>\n<ul>\n<li>ä½†æ˜¯é€‰æ‹©ä¸€ä¸ªæ­£ç¡®çš„ Docker å®¹å™¨æ‰˜ç®¡å¹³å°å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…, æœ‰å¾ˆå¤šçš„é—®é¢˜éœ€è¦ä½ å»æ€è€ƒå’Œæ³¨æ„.</li>\n<li>æœ‰å¤§é‡çš„é€‰é¡¹, å› æ­¤é€‰æ‹©å…¶ä¸­ä¸€ä¸ªè¿›è¡Œç ”ç©¶å°±å˜å¾—å›°éš¾. å¥½æ¶ˆæ¯æ˜¯å¦‚æœä½ çš„åº”ç”¨å·²ç»å®¹å™¨åŒ–, ä½ å°±å¯ä»¥è½»æ¾çš„æµ‹è¯•å…¶ä¸­çš„æ¯ä¸€ä¸ª.</li>\n<li>ä½ æ­£åœ¨ä½¿ç”¨çš„æœåŠ¡æä¾›å•†ä¾‹å¦‚ Triton æˆ–è€… ECS çš„æŸä¸ªè§£å†³æ–¹æ¡ˆæˆ–è®¸ä½¿å¾—ä½ æ— æ³•è„±ç¦»è¿™ä¸ªæä¾›å•†, è¿™ä¹Ÿä½¿å¾— Docker çš„æœ€ä»¤äººå…´å¥‹çš„å¯ç§»æ¤æ€§å˜å¾—ä¸é‚£ä¹ˆé‡è¦äº†.</li>\n<li>è®¸å¤š CaaS æ–¹æ¡ˆåœ¨ä»–ä»¬è‡ªå·±çš„ç¡¬ä»¶ä¸Šè¿è¡Œæ‰€æœ‰çš„ç®¡ç†ç³»ç»Ÿ, ä½ è‡ªå·±çš„æœåŠ¡å™¨ä¸Šåªæ˜¯è¿è¡ŒæŸä¸ªä»£ç†ç¨‹åºæ¥è¿æ¥ä»–ä»¬çš„ API, å› æ­¤å¦‚æœä»–ä»¬çš„ç³»ç»Ÿå®•æœºåä½ çš„é›†ç¾¤å°†æ— æ³•å·¥ä½œ.</li>\n<li>å…è®¸ä½ åœ¨é˜²ç«å¢™åè¿è¡Œæ•´ä¸ªç³»ç»Ÿçš„æ–¹æ¡ˆæ˜¯éå¸¸å¤æ‚çš„, éœ€è¦ä¸€ä¸ªå›¢é˜Ÿå»ç®¡ç†å’Œå‡çº§.</li>\n<li>èƒ½å¤Ÿå®¹æ˜“çš„åœ¨é˜²ç«å¢™åè¿è¡Œæ•´ä¸ªç³»ç»Ÿçš„æ–¹æ¡ˆä¼šä½¿å¾—é«˜å¯ç”¨æˆä¸ºä½ä¼˜å…ˆçº§çš„äº‹æƒ….</li>\n<li>å½“ä½ é€‰æ‹©äº†ä¸€ä¸ª CaaS æä¾›å•†æ—¶, ä½ å°±å¯ä»¥æ‘†è„±äº†ä½ çš„æœåŠ¡æ‰˜ç®¡æä¾›å•†çš„é”å®š, ä½†æ˜¯ä½ å°†é™·å…¥åˆ° CaaS æä¾›å•†çš„é”å®š. ä½ æ— æ³•ä¸ä½¿ç”¨ä»–ä»¬çš„ SaaS ç®¡ç†æ¥å£è€Œåœ¨ä½ è‡ªå·±çš„ç¡¬ä»¶ä¸Šè¿è¡Œæ•´ä¸ªç³»ç»ŸåŒ…æ‹¬ç®¡ç†ç³»ç»Ÿ, API å’Œ UI. ä½ ä¸€æ—¦å†³å®šä»˜é’±, ä½ æœ€å¥½å¯ä»¥ä¸€ç›´ä»˜é’±.</li>\n</ul>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>ç»ˆäºçœ‹å®Œäº†, çœŸçš„æ˜¯åˆè‡­åˆé•¿å•Š. å›é¡¾ä¸€ä¸‹è¿™ç¯‡æ–‡ç« , æ€»ä½“æ¥è¯´æ˜¯ç»å†äº†è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹:</p>\n<ol>\n<li>ä¸“æœ‰æœåŠ¡å™¨</li>\n<li>è™šæ‹ŸåŒ–æŠ€æœ¯</li>\n<li>åŸºç¡€è®¾æ–½å³æœåŠ¡ (IaaS)</li>\n<li>å¹³å°å³æœåŠ¡ (PaaS)</li>\n<li>å®¹å™¨å³æœåŠ¡ (CaaS)</li>\n</ol>\n<p>æ€»ç»“ä¸€ä¸‹, æˆ‘è§‰å¾—å¼€å‘äººå‘˜è¿˜æ˜¯æœ‰å¿…è¦äº†è§£ä¸€ä¸‹å…³äºäº§å“éƒ¨ç½²ç›¸å…³çš„æŠ€æœ¯å‘å±•. ç„¶åæ ¹æ®è‡ªå·±çš„ä¸šåŠ¡æ¥é€‰æ‹©åˆé€‚çš„æœåŠ¡æä¾›å•†.</p>\n","site":{"data":{}},"excerpt":"<p>è¿™ç¯‡æ–‡ç« æ˜¯æ¥æ‹“å±•è‡ªå·±çŸ¥è¯†é¢çš„, åœ¨æˆ‘è¯»é«˜ä¸­é‚£ä¼š (08 å¹´), æˆ‘èº«è¾¹å°±æœ‰æ²‰è¿·ç”µè„‘æŠ€æœ¯çš„åŒå­¦, é‚£ä¸ªæ—¶å€™æˆ‘æƒ³ç€åšä¸€ä¸ªè‡ªå·±çš„ç½‘ç«™, è‚¯å®šæ˜¯éå¸¸ç‰›é€¼çš„äº‹äº†. ä»æœ€å¼€å§‹æ¥è§¦çš„æœåŠ¡, ä¾æ¬¡æ¥æ’ä¸ªåº. æ°¸ç¡• E ç›˜ -&gt; å…è´¹ç©ºé—´å»ºç«™ (å›½å¤–å±…å¤š) -&gt; è™šæ‹Ÿç©ºé—´ -&gt; è™šæ‹ŸæœåŠ¡å™¨ (VPS) -&gt; ç‹¬ç«‹æœåŠ¡å™¨. çœ‹å®Œè¿™ç¯‡æ–‡ç« å, æˆ‘æ€»ç®—å¯¹è¿™æ–¹é¢çŸ¥è¯†æœ‰äº†ä¸€ä¸ªæ¯”è¾ƒç³»ç»Ÿæ€§çš„è®¤è¯†äº†. ä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹.</p>","more":"<h3 id=\"å¼•å­\"><a href=\"#å¼•å­\" class=\"headerlink\" title=\"å¼•å­\"></a>å¼•å­</h3><p>æ–‡ç« å¼€å§‹ä¹‹å‰, æˆ‘è§‰å¾—è¿˜æ˜¯æœ‰å¿…è¦æŠŠè¿™äº›ä¸“æœ‰åè¯å…ˆç§‘æ™®ä¸€ä¸‹, ä¸è¦è§‰å¾—å¾ˆé«˜å¤§ä¸Š, ç®€ç§°è€Œå·².</p>\n<ul>\n<li>IaaS - åŸºç¡€è®¾æ–½å³æœåŠ¡</li>\n<li>PaaS - å¹³å°å³æœåŠ¡</li>\n<li>CaaS - å®¹å™¨å³æœåŠ¡</li>\n</ul>\n<p>æœ¬æ–‡ä»‹ç»äº† Web æ‰˜ç®¡æœåŠ¡è¿›åŒ–çš„å†å², ä»ä¸“ç”¨æœåŠ¡å™¨åˆ°è™šæ‹ŸåŒ–åˆ° IaaSã€PaaS å’Œæœ€æ–°çš„ CaaS; è¯´æ˜äº†æ¯ç§æ–¹å¼çš„ä¼˜ç‚¹å’Œç¼ºç‚¹. ç€é‡é˜è¿°äº†æ„å»º PaaS åº”ç”¨çš„å„ä¸ªç»„ä»¶, ä»¥åŠåœ¨é€‰æ‹© CaaS æä¾›å•†æ—¶åº”è¯¥è€ƒè™‘çš„é—®é¢˜. æœ€åä»æˆæœ¬å’ŒåŠŸèƒ½æ€§çš„è§’åº¦è®ºè¿°äº† PaaS ç”¨æˆ·åº”è¯¥è¿ç§»åˆ° CaaS å¹³å°.</p>\n<p>è¯»å®Œè¿™ç¯‡åšæ–‡, ä½ åº”è¯¥å¯ä»¥æ¸…æ¥šçš„ç†è§£:</p>\n<ul>\n<li>è¿™äº›åè¯åˆ°åº•æŒ‡ä»€ä¹ˆ</li>\n<li>è¿™ä¸ºä»€ä¹ˆå¯¹ä½ å¾ˆé‡è¦</li>\n<li>å¯¹äºä½ çš„ä½¿ç”¨åœºæ™¯ï¼Œå“ªç§æ–¹å¼æœ€é€‚åˆ</li>\n</ul>\n<p>å½“ç„¶æ²¡æœ‰ä¸€ç§æ–¹å¼èƒ½å¤Ÿé€‚åˆæ‰€æœ‰çš„ Web åŸºç¡€è®¾æ–½çš„åœºæ™¯, ä½ çš„ç‰¹æ®Šåœºæ™¯æˆ–è®¸éœ€è¦ç‰¹æ®Šçš„è€ƒè™‘.</p>\n<h3 id=\"ä»å¤´å¼€å§‹â€”â€”ä¸“ç”¨æœåŠ¡å™¨\"><a href=\"#ä»å¤´å¼€å§‹â€”â€”ä¸“ç”¨æœåŠ¡å™¨\" class=\"headerlink\" title=\"ä»å¤´å¼€å§‹â€”â€”ä¸“ç”¨æœåŠ¡å™¨\"></a>ä»å¤´å¼€å§‹â€”â€”ä¸“ç”¨æœåŠ¡å™¨</h3><p>Web æ‰˜ç®¡çš„æœ¬è´¨è¿˜æ˜¯åœ¨ä¸€ä¸ªæ•°æ®ä¸­å¿ƒé‡Œå¸ƒæ»¡äº†æœåŠ¡å™¨ã€äº¤æ¢æœºã€è·¯ç”±å™¨ã€å­˜å‚¨é˜µåˆ—å’Œå…¶å®ƒç½‘ç»œç»„ä»¶. æˆ‘ä»¬æ‰€è®¨è®ºçš„æ¯ä¸€ä¸ªé€‰é¡¹ä¸ç®¡å®ƒæ˜¯ PaaSã€IaaS è¿˜æ˜¯ CaaS, å®ƒåº•å±‚ä½¿ç”¨çš„åŸºç¡€è®¾æ–½éƒ½æ˜¯ç›¸åŒçš„, å³åœ¨ä¸€ä¸ªå¤§å±‹å­é‡Œçš„å¾ˆå¤šç‹¬ç«‹æœåŠ¡å™¨. ä»–ä»¬åªæ˜¯ä¸Šé¢å¢åŠ äº†å¾ˆå¤šæŠ½è±¡å±‚ä½¿å¾—ç®¡ç†å˜å¾—æ›´ç®€å•, å’Œä½¿ç”¨è‡ªåŠ¨åŒ–çš„æ–¹å¼å¤„ç†ä»¥å‰å¾ˆæ…¢æˆ–è€…éœ€è¦æ‰‹åŠ¨æ­¥éª¤çš„ä»»åŠ¡.</p>\n<p>ä¸“ç”¨æœåŠ¡å™¨, æˆ–è€…å«åš â€œè£¸æœºâ€ æœ‰å®ƒçš„ä¼˜ç‚¹å’Œç¼ºç‚¹.</p>\n<h4 id=\"ä¼˜ç‚¹\"><a href=\"#ä¼˜ç‚¹\" class=\"headerlink\" title=\"ä¼˜ç‚¹\"></a>ä¼˜ç‚¹</h4><ul>\n<li>æ€§èƒ½â€”â€”ä½ åœ¨ç›´æ¥ä½¿ç”¨ä¸€ä¸ªæœåŠ¡å™¨, æ²¡æœ‰ä»»ä½•æŠ½è±¡å±‚ä¾‹å¦‚è™šæ‹ŸåŒ–å¸¦æ¥çš„æ€§èƒ½å¼€é”€.</li>\n<li>å¯é æ€§â€”â€”æ²¡æœ‰æŠ½è±¡å±‚å’Œè™šæ‹ŸåŒ–, å‡ºé”™çš„å¯èƒ½æ€§ä¼šé™ä½.</li>\n<li>èµ„æºåˆ©ç”¨ç‡â€”â€”ä½¿ç”¨ä¸“ç”¨æœåŠ¡å™¨, ä½ çš„è¿›ç¨‹ä¸éœ€è¦è·Ÿå…¶å®ƒçš„è™šæ‹Ÿæœºæˆ–è€…è¿›ç¨‹ç«äº‰èµ„æºä¾‹å¦‚ CPUã€å†…å­˜å’Œå¸¦å®½.</li>\n</ul>\n<h4 id=\"ç¼ºç‚¹\"><a href=\"#ç¼ºç‚¹\" class=\"headerlink\" title=\"ç¼ºç‚¹\"></a>ç¼ºç‚¹</h4><ul>\n<li>ç®¡ç†å¤æ‚æ€§â€”â€”ä½ æ— æ³•å®¹æ˜“åœ°å…‹éš†ä¸“ç”¨æœåŠ¡å™¨æ¥äº§ç”Ÿæ›´å¤šçš„å®ä¾‹, ä¸“ç”¨æœåŠ¡å™¨æ²¡æœ‰ AMIï¼ˆè¯‘è€…æ³¨: Amazon Machine Imageï¼‰æˆ–è€…é•œåƒçš„æ¦‚å¿µ. æƒ³æ‰©å±•ä½ çš„åŸºç¡€è®¾æ–½åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Ÿæˆ‘å¸Œæœ›ä½ ç”¨é…ç½®ç®¡ç†, æˆ–è€…ä½¿ç”¨å¯ä¿¡èµ–çš„è€æœ‹å‹ rsync.</li>\n<li>æˆæœ¬â€”â€”ä½¿ç”¨ä¸“ç”¨æœåŠ¡å™¨, åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä½ éœ€è¦é¢„å…ˆæ”¯ä»˜æœåŠ¡å™¨çš„ç¡¬ä»¶ä»·æ ¼, ç„¶åå†ä»˜ç§Ÿç”¨åœºåœ°çš„æˆæœ¬, æˆ–è€…ä½ ä»ä¸€ä¸ªæœåŠ¡æä¾›å•†é‚£é‡Œç§Ÿèµå®ƒä»¬. æ— è®ºå“ªç§æ–¹å¼, ä½ éƒ½æ²¡æ³•åœ¨ä¸ä½¿ç”¨æ—¶ç»ˆæ­¢æœåŠ¡å™¨çš„ç§Ÿèµæ¥èŠ‚çœæˆæœ¬, å› æ­¤ä½ éœ€è¦æ›´åŠ è°¨æ…çš„å¯¹å¾…ä½ çš„è´¢åŠ¡è®¡åˆ’.</li>\n<li>ä½ æ‰€æœ‰çš„è¿›ç¨‹å’Œåº”ç”¨éƒ½è¿è¡Œåœ¨ä¸“ç”¨æœåŠ¡å™¨ä¸Š, å› æ­¤è¿è¡Œåœ¨ç›¸åŒçš„æ“ä½œç³»ç»Ÿä¸Š. ä¸ºäº†å¯æ‰©å±•æ€§çš„ç›®çš„, ä½ å¾€å¾€å¸Œæœ›æœåŠ¡å™¨åªè¿è¡Œå•ä¸€çš„è¿›ç¨‹, ä¾‹å¦‚ Web æœåŠ¡æˆ–è€…æ•°æ®åº“æœåŠ¡. åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šè¿è¡Œæ‰€æœ‰çš„åº”ç”¨ä½¿å¾—æ“ä½œç³»ç»Ÿçš„è°ƒä¼˜å˜å¾—æ›´å›°éš¾.</li>\n</ul>\n<h3 id=\"ä½¿äº‹æƒ…å˜å¾—æ›´å®¹æ˜“â€”â€”è™šæ‹ŸåŒ–\"><a href=\"#ä½¿äº‹æƒ…å˜å¾—æ›´å®¹æ˜“â€”â€”è™šæ‹ŸåŒ–\" class=\"headerlink\" title=\"ä½¿äº‹æƒ…å˜å¾—æ›´å®¹æ˜“â€”â€”è™šæ‹ŸåŒ–\"></a>ä½¿äº‹æƒ…å˜å¾—æ›´å®¹æ˜“â€”â€”è™šæ‹ŸåŒ–</h3><p>å°½ç®¡ä¸“ç”¨æœåŠ¡å™¨æœ‰å¾ˆå¤šä¼˜ç‚¹, ä½†æ˜¯å®ƒçš„ç¼ºç‚¹åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¼šè¿œè¿œè¶…è¿‡å…¶ä¼˜ç‚¹. å…¬å¸ä¸ºäº†èƒ½å¤Ÿè¿…é€Ÿè¿›å…¥å¸‚åœºèµ¢å¾—ç«äº‰, å¯¹äºéƒ¨ç½²çš„é€Ÿåº¦æå‡ºäº†æ›´é«˜çš„è¦æ±‚, è™šæ‹ŸåŒ–å°±å¾ˆè‡ªç„¶çš„æˆä¸ºäº†æ•°æ®ä¸­å¿ƒè¿›åŒ–ä¸­çš„ä¸‹ä¸€ä¸ªæ­¥éª¤.</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯è™šæ‹ŸåŒ–\"><a href=\"#ä»€ä¹ˆæ˜¯è™šæ‹ŸåŒ–\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯è™šæ‹ŸåŒ–\"></a>ä»€ä¹ˆæ˜¯è™šæ‹ŸåŒ–</h4><p>ç®€è€Œè¨€ä¹‹, è™šæ‹ŸåŒ–å°±æ˜¯å°†ç‰©ç†æœåŠ¡å™¨åˆ†æˆæ›´å°çš„è™šæ‹Ÿæœº, è¿™äº›è™šæ‹Ÿæœºåªèƒ½è®¿é—®ç‰©ç†æœºçš„éƒ¨åˆ†èµ„æº. ä¾‹å¦‚ä½ æœ‰ä¸€ä¸ª 8CPU æ ¸ä»¥åŠ 16GB å†…å­˜çš„ç‰©ç†æœåŠ¡å™¨, åˆ™å¯ä»¥å°†å®ƒåˆ†æˆ 8 ä¸ªè™šæ‹Ÿæœº, æ¯ä¸ªè™šæ‹Ÿæœºæœ‰ 1 ä¸ª CPU å’Œ 2GB å†…å­˜. ä½ æˆ–è®¸å·²ç»å¬è¯´è¿‡ä¸€äº›è™šæ‹ŸåŒ–æŠ€æœ¯å¦‚ Xen, KVM, VMware å’Œ Hyper-V, å…¶å®å¾ˆæœ‰æ›´å¤š.</p>\n<h4 id=\"ä¼˜ç‚¹-1\"><a href=\"#ä¼˜ç‚¹-1\" class=\"headerlink\" title=\"ä¼˜ç‚¹\"></a>ä¼˜ç‚¹</h4><ul>\n<li>ä½ å¯ä»¥åœ¨éœ€è¦æ›´å¤šè™šæ‹Ÿæœºå®ä¾‹æˆ–è€…æƒ³è¦è™šæ‹Ÿæœºå…±äº«æ—¶è¿›è¡Œè™šæ‹Ÿæœºçš„å…‹éš†.</li>\n<li>ä½ å¯ä»¥å¤‡ä»½è™šæ‹Ÿæœºé•œåƒä½œä¸ºå®‰å…¨ä¿æŠ¤æˆ–è€…ç¾å¤‡.</li>\n</ul>\n<h4 id=\"ç¼ºç‚¹-1\"><a href=\"#ç¼ºç‚¹-1\" class=\"headerlink\" title=\"ç¼ºç‚¹\"></a>ç¼ºç‚¹</h4><ul>\n<li>ä½¿ç”¨è™šæ‹ŸåŒ–æ„å‘³ç€é¢å¤–çš„æ€§èƒ½å¼€é”€, å¯èƒ½é€ æˆæ€§èƒ½ä¸‹é™.</li>\n<li>è™šæ‹Ÿæœºé•œåƒåœ¨ä¸åŒçš„æœåŠ¡æä¾›å•†å’Œè™šæ‹ŸåŒ–æŠ€æœ¯ä¹‹é—´åŸºæœ¬ä¸Šæ˜¯ä¸å¯ç§»æ¤çš„.</li>\n<li>ç®¡ç†è™šæ‹Ÿæœºä¾ç„¶æ˜¯æ‰‹å·¥æ­¥éª¤, éœ€è¦ç®¡ç†çš„æ—¶é—´å’Œä¸“ä¸šçŸ¥è¯†.</li>\n</ul>\n<h3 id=\"è¿›åŒ–â€”â€”è™šæ‹ŸåŒ–å˜æˆ-IaaS\"><a href=\"#è¿›åŒ–â€”â€”è™šæ‹ŸåŒ–å˜æˆ-IaaS\" class=\"headerlink\" title=\"è¿›åŒ–â€”â€”è™šæ‹ŸåŒ–å˜æˆ IaaS\"></a>è¿›åŒ–â€”â€”è™šæ‹ŸåŒ–å˜æˆ IaaS</h3><p>ä½ çŸ¥é“ <a href=\"http://www.businessinsider.com/people-think-stormy-weather-affects-cloud-computing-2012-8\" target=\"_blank\" rel=\"noopener\">51% çš„äººè®¤ä¸º â€œäº‘â€ ä¼šè¢«å¤©æ°”å½±å“å—</a>ï¼Ÿä½ çŸ¥é“å½“äººä»¬è°ˆè®º â€œäº‘â€ æ—¶ä»–ä»¬å®é™…ä¸Šæ˜¯åœ¨è®¨è®ºåŸºç¡€è®¾æ–½å³æœåŠ¡ (IaaS) å—ï¼Ÿ</p>\n<h4 id=\"ä»€ä¹ˆæ˜¯åŸºç¡€è®¾æ–½å³æœåŠ¡-IaaS\"><a href=\"#ä»€ä¹ˆæ˜¯åŸºç¡€è®¾æ–½å³æœåŠ¡-IaaS\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯åŸºç¡€è®¾æ–½å³æœåŠ¡ (IaaS)\"></a>ä»€ä¹ˆæ˜¯åŸºç¡€è®¾æ–½å³æœåŠ¡ (IaaS)</h4><ul>\n<li>é€šè¿‡ API æ¥ç®¡ç†ç¡¬ä»¶çš„è™šæ‹ŸåŒ–.</li>\n<li>é€šè¿‡ç¼–ç¨‹æ¥å£è®¿é—®è®¡ç®—ã€å­˜å‚¨å’Œç½‘ç»œèµ„æºå’Œé…ç½®.</li>\n<li>å½“ä½ éœ€è¦æ˜¯ç”³è¯·ä¸€ä¸ªæ–°çš„è™šæ‹Ÿæœº, å½“ä½ å®Œæˆåç»ˆæ­¢è™šæ‹Ÿæœº, ä½ åªéœ€è¦ä¸ºä½ ä½¿ç”¨çš„èµ„æºä»˜è´¹.</li>\n<li>å°†æ•°æ®ä¸­å¿ƒèµ„æºè§†ä¸ºå…¬å…±è®¾æ–½.</li>\n</ul>\n<p>äºšé©¬é€Šåœ¨ 2006 å¹´å‘å¸ƒäº†å…¶ Amazon Web Servicesï¼ˆAWSï¼‰å’Œ EC2 äº§å“ï¼Œæˆä¸ºäº†è¿™ä¸ªé¢†åŸŸçš„å…ˆé©±ã€‚</p>\n<h4 id=\"ä¸ºä»€ä¹ˆè¿™ä¸ªè¿›åŒ–å¦‚æ­¤é‡è¦\"><a href=\"#ä¸ºä»€ä¹ˆè¿™ä¸ªè¿›åŒ–å¦‚æ­¤é‡è¦\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆè¿™ä¸ªè¿›åŒ–å¦‚æ­¤é‡è¦\"></a>ä¸ºä»€ä¹ˆè¿™ä¸ªè¿›åŒ–å¦‚æ­¤é‡è¦</h4><p>åœ¨è¿‡å»å½“ä½ éœ€è¦ä¸Šçº¿ä¸€ä¸ªåœ¨çº¿ä¸šåŠ¡æ—¶, ä½ ä¸å¾—ä¸è¿›è¡Œå¤æ‚çš„è®¡åˆ’æ¥ä¿è¯ä½ åœ¨æ•°æ®ä¸­å¿ƒå†…æœ‰è¶³å¤Ÿçš„æœºæ¶ç©ºé—´ã€è¶³å¤Ÿçš„æœåŠ¡å™¨å’Œå­˜å‚¨æ¥å¤„ç†ä¸šåŠ¡çš„å¢é•¿, è¶³å¤Ÿçš„ç½‘ç»œå¸¦å®½æ¥å¤„ç†æ‰€æœ‰çš„ç”¨æˆ·æµé‡. è¿™ç§è®¡åˆ’å¹¶ä¸å®¹æ˜“, å°¤å…¶æ˜¯å¯¹æ—©æœŸçš„ä¸šåŠ¡æ¥è®², ä½ æ— æ³•é¢„æµ‹ä¸šåŠ¡çš„æœªæ¥å’Œå¢é•¿è½¨è¿¹.</p>\n<ol>\n<li>å®ƒç»™äº†å¼€å‘è€…è¶…èƒ½é‡:<ul>\n<li>æ„æ€ä¸€ä¸ªæƒ³æ³•ç«‹å³ä¸Šçº¿.</li>\n<li>å¦‚æœæˆåŠŸäº†, å¯ä»¥å®¹æ˜“çš„æ‰©å±•è§„æ¨¡.</li>\n<li>å¦‚æœå¤±è´¥äº†, å…³é—­è™šæ‹Ÿæœºä»¥èŠ‚çº¦æˆæœ¬.</li>\n</ul>\n</li>\n<li>å®ƒä½¿å¾—æ•°æ®ä¸­å¿ƒè‡ªåŠ¨åŒ–å˜å¾—æ›´å¼ºå¤§:<ul>\n<li>å…¨è‡ªåŠ¨åŸºç¡€è®¾æ–½ç®¡ç†æˆä¸ºå¯èƒ½, å‡ºç°äº† â€œåŸºç¡€è®¾æ–½å³ä»£ç â€ çš„æ¦‚å¿µ.</li>\n<li>å¼¹æ€§ä¼¸ç¼©åœ¨è¿‡å»æ˜¯ä¸å¯èƒ½å®ç°çš„, ä½†æ˜¯ç°åœ¨ web åŸºç¡€è®¾æ–½å¯ä»¥å½“ä¸šåŠ¡å˜åŒ–æ—¶è‡ªåŠ¨çš„æ‰©å±•æˆ–è€…æ”¶ç¼©.</li>\n<li>åœ¨æœåŠ¡å™¨çš„è‡ªåŠ¨åŒ–ç®¡ç†ä¹‹å, æ•°æ®ä¸­å¿ƒçš„è‡ªåŠ¨åŒ–ä¹Ÿæ‰©å±•åˆ°äº†å­˜å‚¨ã€ç½‘ç»œä»¥åŠå…¶å®ƒå¤§é‡çš„éœ€è¦ä¸“ä¸šçŸ¥è¯†çš„ç³»ç»Ÿ, åœ¨ä»£ç å’Œ API èƒ½å¤Ÿå¤„ç†è¿™äº›è‡ªåŠ¨åŒ–ä¹‹å, è¿™ç»™å…¨çƒçš„å¼€å‘è€…ç¤¾åŒºå¸¦æ¥äº†æ–°çš„æœºé‡.</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"è¿›ä¸€æ­¥æ¼”åŒ–â€”â€”å¹³å°å³æœåŠ¡-PaaS\"><a href=\"#è¿›ä¸€æ­¥æ¼”åŒ–â€”â€”å¹³å°å³æœåŠ¡-PaaS\" class=\"headerlink\" title=\"è¿›ä¸€æ­¥æ¼”åŒ–â€”â€”å¹³å°å³æœåŠ¡ (PaaS)\"></a>è¿›ä¸€æ­¥æ¼”åŒ–â€”â€”å¹³å°å³æœåŠ¡ (PaaS)</h3><p>å¹³å°å³æœåŠ¡ (PaaS) ä½¿å¾—å¼€å‘äººå‘˜å¯ä»¥å¾ˆå®¹æ˜“çš„éƒ¨ç½²å’Œç®¡ç†åº”ç”¨è€Œéšè—æ‰æ‰€æœ‰çš„å®ç°ç»†èŠ‚ä¾‹å¦‚æœåŠ¡å™¨ã€è´Ÿè½½å‡è¡¡å™¨ã€DNS ç­‰ç­‰. ä»–ä»¬æˆ–å¤šæˆ–å°‘çš„å»é™¤äº†å¯¹è¿ç»´å›¢é˜Ÿçš„éœ€æ±‚, è€Œæ˜¯è®©å¼€å‘äººå‘˜å»å…³æ³¨åº”ç”¨éƒ¨ç½². æœ‰å¾ˆå¤š PaaS æä¾›å•†, å…¶ä¸­ä¸€ä¸ªæœ€æµè¡Œçš„æ˜¯ Heroku. å…³äº Heroku çš„ä¸€ä¸ªæœ‰è¶£çš„äº‹æƒ…æ˜¯ Heroku å®Œå…¨æ˜¯è¿è¡Œåœ¨ AWS ä¹‹ä¸Šå¹¶ä¾èµ– AWS çš„. å¦‚æœä½ ä¸æ„¿æ„ä½ çš„åº”ç”¨è¿è¡Œåœ¨ç¾å›½ä¸œéƒ¨æˆ–è€…æ¬§æ´²è¥¿éƒ¨çš„ AWS ä¸Šçš„è¯, è¿™æˆ–è®¸æ˜¯ä¸€ä¸ªé—®é¢˜. æ²¡æœ‰ IaaS, åƒ Heroku è¿™æ ·çš„å¹³å°å¯èƒ½å°±ä¸ä¼šå­˜åœ¨äº†. PaaS æä¾›å•†åˆ©ç”¨ IaaS ä½œä¸ºä¸€ä¸ªéå¸¸é‡è¦çš„ç»„æˆéƒ¨åˆ†æ¥äº¤ä»˜å®ƒä»¬çš„æœåŠ¡. åœ¨å‡å°‘ä»æƒ³æ³•åˆ°éƒ¨ç½²çš„æ—¶é—´ã€è‡ªåŠ¨åŒ–æµç¨‹ä»¥åŠå‡å°‘ç‰¹æ®Šçš„ç³»ç»ŸçŸ¥è¯†éœ€æ±‚çš„è¶‹åŠ¿ä¸­, PaaS æ˜¯åˆç†çš„ä¸‹ä¸€æ­¥, å°±åƒæ˜¯ä»ä¸“ç”¨æœåŠ¡å™¨åˆ° IaaS ä¸€æ ·.</p>\n<h4 id=\"æ„å»º-PaaS-æ˜¯å›°éš¾çš„\"><a href=\"#æ„å»º-PaaS-æ˜¯å›°éš¾çš„\" class=\"headerlink\" title=\"æ„å»º PaaS æ˜¯å›°éš¾çš„\"></a>æ„å»º PaaS æ˜¯å›°éš¾çš„</h4><p>èƒ½å¤Ÿé€šè¿‡æŠ½è±¡è€Œé¿å…å¤„ç†æœåŠ¡å™¨ç›¸å…³çš„é—®é¢˜æ˜¯ä¸å®¹æ˜“çš„, éœ€è¦å¼•å…¥å¾ˆå¤šä¸œè¥¿æ‰èƒ½åšåˆ°.</p>\n<p>åœ¨ PaaS çš„æ¦‚å¿µä¹‹ä¸‹æœ‰å‡ ä¸ªä¸»è¦çš„æ¨¡å—ï¼š</p>\n<ul>\n<li>ç¼–è¯‘ç³»ç»Ÿâ€”â€”æŠŠä½ çš„ä»£ç ç¼–è¯‘æˆå¯ä»¥è¿è¡Œçš„åº”ç”¨, å¹¶ä¸”æŠŠå®ƒå­˜å‚¨åˆ°æŸä¸ªåœ°æ–¹ä½œä¸ºåç»­ä½¿ç”¨.</li>\n<li>åº”ç”¨ç®¡ç†æ•°æ®åº“â€”â€”ç®¡ç† Git ç‰ˆæœ¬ã€build ç‰ˆæœ¬å’Œåº”ç”¨å…ƒæ•°æ®.</li>\n<li>é›†ç¾¤è°ƒåº¦å™¨â€”â€”å°†ä¸€ç»„æœåŠ¡å™¨ä½œä¸ºä¸€å°å¤§çš„æœåŠ¡å™¨æ¥ç®¡ç†, åœ¨æœåŠ¡å™¨èµ„æºæ± çš„æŸä¸ªæœåŠ¡å™¨ä¸Šè¿è¡Œä½ çš„ç¨‹åº, å¹¶æ£€æŸ¥å’Œæ›¿æ¢å¤±æ•ˆçš„ä½œä¸š.</li>\n<li>è´Ÿè½½å‡è¡¡â€”â€”å…è®¸ä» Internet å’Œå†…éƒ¨ç¨‹åºæ¥çš„ä¸šåŠ¡è´Ÿè½½è¢«æ­£ç¡®çš„è·¯ç”±åˆ°åˆé€‚çš„ä½ç½®.</li>\n<li>DNSâ€”â€”åœ¨ä½ äº§ç”Ÿå’Œä¿®æ”¹åº”ç”¨æ—¶è‡ªåŠ¨é…ç½® DNS æ¡ç›®.</li>\n<li>æˆ–è®¸æ˜¯æœ€é‡è¦çš„â€”â€”æŸä¸ªå½¢å¼çš„å®¹å™¨åŒ–ä¾‹å¦‚â€Š freebsd jailsã€solaris zonesã€æˆ–è€… linux containers, å®¹å™¨åŒ–ä½¿å¾—æŸä¸ªçš„åº”ç”¨ä¸ä¼šè¿›å…¥å’Œå½±å“åˆ°å…¶å®ƒçš„åº”ç”¨.</li>\n</ul>\n<p>ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªç‚¹æ˜¯ Docker è¿…é€Ÿå‘å±•çš„éå¸¸é‡è¦çš„åŸå› . Linux å®¹å™¨æŠ€æœ¯å·²ç»å­˜åœ¨äº†ä¸€æ®µæ—¶é—´äº†, ä½†æ˜¯åªæœ‰æŸäº›å¤§çš„å…¬å¸æˆ–è€… PaaS æä¾›å•†è‡ªåŠ¨åŒ–äº†å®¹å™¨çš„ä½¿ç”¨, Docker ä½¿ Linux å®¹å™¨çš„ä½¿ç”¨å˜å¾—éå¸¸ç®€å•, ä¹Ÿæä¾›äº†æ ‡å‡†åŒ–çš„é•œåƒæ ¼å¼, å®ƒæˆä¸ºäº† PaaS ä¸­é‡è¦çš„ç»„æˆéƒ¨åˆ†.</p>\n<p>è¿™éå¸¸å¼ºå¤§, å› ä¸ºå¾ˆå¤šå…¬å¸åœ¨å¤„ç†çˆ†å‘å¼çš„ç”¨æˆ·å¢é•¿, æ¥è‡ªäºç§»åŠ¨ã€ç¤¾äº¤å’Œ IoT çš„æ–°çš„ä¸šåŠ¡æ¨¡å¼, ä»¥åŠæœŸæœ›ä»ä¼ ç»Ÿçš„é•¿çš„ç‰ˆæœ¬å‘å¸ƒå‘¨æœŸè½¬å˜åˆ°æŒç»­äº¤ä»˜. ä»–ä»¬åˆ©ç”¨åŸºäºè½¯ä»¶çš„æ¶æ„æˆ–è€…å¾®æœåŠ¡. ä»–ä»¬éœ€è¦èƒ½å¤Ÿè‡ªåŠ¨éƒ¨ç½²å’Œæµ‹è¯•æ–°çš„ä»£ç , å¹¶æ ¹æ®ä¸šåŠ¡çš„å˜åŒ–å¼¹æ€§ä¼¸ç¼©. ä½†é—®é¢˜æ˜¯ä»–ä»¬æ²¡æœ‰è¶³å¤Ÿçš„èµ„æºå’Œç»éªŒæ¥äº¤ä»˜åˆ°ä»–ä»¬çš„å¼€å‘å›¢é˜Ÿ, æ‰€ä»¥ä»–ä»¬ä¸å¾—ä¸å°†å…¶å¤–åŒ…ç»™ PaaS æä¾›å•†. ä¸å¹¸çš„æ˜¯, å½“ä½ è¿™ä¹ˆåšçš„æ—¶å€™, ä½ å°±æ”¾å¼ƒäº†å¯¹äºè¿™ä¸ªé»‘ç›’å­çš„å¾ˆå¤šæ§åˆ¶, è€Œæ˜¯èŠ±å¾ˆå¤šé’±å¹¶ä½¿å¾—è‡ªå·±å®Œå…¨ä¾èµ–äºå®ƒ. å¦å¤–ä¸€ä¸ªé€‰é¡¹æ˜¯, å¾ˆå¤šå…¬å¸åå¤çš„é‡æ–°å‘æ˜è½®å­æˆ–è€…ä½¿ç”¨é‚£äº›éš¾äºç»´æŠ¤çš„ã€è¿è¡Œç¼“æ…¢çš„å’Œæ˜“äºå‡ºé”™çš„å·¥å…·.</p>\n<p>æœ€å¥½çš„æƒ…å½¢æ˜¯åœ¨è‡ªå·±çš„æ•°æ®ä¸­å¿ƒæˆ–è€… Cloud å¸å·ä¸­è¿è¡Œä¸€ä¸ª PaaS å¹³å°, ä½ å¯ä»¥å…¨æƒæ§åˆ¶, ä½ çš„å›¢é˜Ÿå¯ä»¥ç›´æ¥å‚ä¸åº”ç”¨çš„éƒ¨ç½², å› æ­¤å¯ä»¥å½¢æˆä¸€ç§çœŸæ­£çš„ DevOps æ–‡åŒ–. Docker åŠå…¶æ ‡å‡†åŒ–çš„ç”Ÿæ€ç³»ç»Ÿæ˜¯è¿™ç§æ„¿æ™¯æˆä¸ºç°å®çš„é‡è¦ä¸€æ­¥.</p>\n<h3 id=\"æœ€åâ€”â€”å®¹å™¨æ‰˜ç®¡å¹³å°-CaaS\"><a href=\"#æœ€åâ€”â€”å®¹å™¨æ‰˜ç®¡å¹³å°-CaaS\" class=\"headerlink\" title=\"æœ€åâ€”â€”å®¹å™¨æ‰˜ç®¡å¹³å° (CaaS)\"></a>æœ€åâ€”â€”å®¹å™¨æ‰˜ç®¡å¹³å° (CaaS)</h3><p>ä»€ä¹ˆæ˜¯å®¹å™¨æ‰˜ç®¡å¹³å°, æˆ–è€…å«å®¹å™¨å³æœåŠ¡å‘¢ï¼Ÿè¿™å°±æ˜¯æˆ‘åœ¨ä¸Šé¢çš„ç« èŠ‚ä¸­æåˆ°çš„å¦å¤–ä¸€ç§æ„å»ºåœ¨ Docker åŸºç¡€ä¸Šçš„ Web æ‰˜ç®¡æ–¹å¼. å®ƒæ˜¯ä½ ç”¨å®¹å™¨æ¥éƒ¨ç½²å¤æ‚çš„å¤šå±‚æ¬¡çš„åº”ç”¨æ‰€éœ€è¦çš„è‡ªåŠ¨åŒ–çš„ç¼–è¯‘ç³»ç»Ÿ, é›†ç¾¤è°ƒåº¦å™¨, è´Ÿè½½å‡è¡¡, DNS è‡ªåŠ¨åŒ–ä»¥åŠæœåŠ¡å‘ç°. è¿™æ˜¯ PaaS çš„å¦å¤–ä¸€éƒ¨åˆ†å†…å®¹, ä½†æ˜¯ä½ ä¸æ˜¯ç”¨ä¸€ä¸ªå¤æ‚çš„ç¼–è¯‘ç³»ç»Ÿæ¥ç¼–è¯‘ä½ çš„åº”ç”¨, è€Œæ˜¯ç”¨ Docker é•œåƒ. é•œåƒå¯ä»¥éå¸¸å®¹æ˜“çš„è¿›è¡Œç¼–è¯‘å’Œæœ¬åœ°æµ‹è¯•, å› æ­¤ä½ åœ¨éƒ¨ç½²åº”ç”¨ä¹‹å‰å°±ç¡®è®¤åº”ç”¨å¯ä»¥æ­£å¸¸å·¥ä½œ. ç°åœ¨ PaaS ç”¨æˆ·ä¹Ÿå¯ä»¥å¾—åˆ°ç›¸åŒçš„ä½“éªŒ, ä½†æ˜¯ä¸éœ€è¦æ‹¥æœ‰è‡ªå·±çš„ç¡¬ä»¶æˆ–è€…äº‘å¸å·çš„å‰æä¸‹èŠ‚çº¦å¤§é‡çš„æˆæœ¬. ä»–ä»¬ä¸å†å—é™äºå…¶æœåŠ¡æä¾›å•†æ‰€æ”¯æŒçš„ç¯å¢ƒ, å¯ä»¥é€šè¿‡å°†åº”ç”¨æ‰“åŒ…æˆ Docker é•œåƒçš„æ–¹å¼åœ¨ä»»ä½•åœ°æ–¹è¿è¡Œ.</p>\n<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­, åˆ©ç”¨è¯¸å¦‚ ContainerShip Cloud, ä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹, åœ¨ä»»ä½•äº‘å¹³å°ä¸Šç”šè‡³æ˜¯è£¸æœºä¸Šç”¨ç›¸åŒçš„æ–¹å¼è¿è¡Œä½ çš„åº”ç”¨. ä½ ä¸å†è¢«å¡åœ¨æ„å»ºå¤æ‚çš„åº”ç”¨æ¥è§£å†³éå¸¸å›°éš¾çš„é—®é¢˜, æˆ–è€…å¡åœ¨ä½¿ç”¨æŸä¸ªæä¾›å•†çš„ç‰¹æ®Šçš„è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·ä¸Š.</p>\n<ul>\n<li>ä½†æ˜¯é€‰æ‹©ä¸€ä¸ªæ­£ç¡®çš„ Docker å®¹å™¨æ‰˜ç®¡å¹³å°å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…, æœ‰å¾ˆå¤šçš„é—®é¢˜éœ€è¦ä½ å»æ€è€ƒå’Œæ³¨æ„.</li>\n<li>æœ‰å¤§é‡çš„é€‰é¡¹, å› æ­¤é€‰æ‹©å…¶ä¸­ä¸€ä¸ªè¿›è¡Œç ”ç©¶å°±å˜å¾—å›°éš¾. å¥½æ¶ˆæ¯æ˜¯å¦‚æœä½ çš„åº”ç”¨å·²ç»å®¹å™¨åŒ–, ä½ å°±å¯ä»¥è½»æ¾çš„æµ‹è¯•å…¶ä¸­çš„æ¯ä¸€ä¸ª.</li>\n<li>ä½ æ­£åœ¨ä½¿ç”¨çš„æœåŠ¡æä¾›å•†ä¾‹å¦‚ Triton æˆ–è€… ECS çš„æŸä¸ªè§£å†³æ–¹æ¡ˆæˆ–è®¸ä½¿å¾—ä½ æ— æ³•è„±ç¦»è¿™ä¸ªæä¾›å•†, è¿™ä¹Ÿä½¿å¾— Docker çš„æœ€ä»¤äººå…´å¥‹çš„å¯ç§»æ¤æ€§å˜å¾—ä¸é‚£ä¹ˆé‡è¦äº†.</li>\n<li>è®¸å¤š CaaS æ–¹æ¡ˆåœ¨ä»–ä»¬è‡ªå·±çš„ç¡¬ä»¶ä¸Šè¿è¡Œæ‰€æœ‰çš„ç®¡ç†ç³»ç»Ÿ, ä½ è‡ªå·±çš„æœåŠ¡å™¨ä¸Šåªæ˜¯è¿è¡ŒæŸä¸ªä»£ç†ç¨‹åºæ¥è¿æ¥ä»–ä»¬çš„ API, å› æ­¤å¦‚æœä»–ä»¬çš„ç³»ç»Ÿå®•æœºåä½ çš„é›†ç¾¤å°†æ— æ³•å·¥ä½œ.</li>\n<li>å…è®¸ä½ åœ¨é˜²ç«å¢™åè¿è¡Œæ•´ä¸ªç³»ç»Ÿçš„æ–¹æ¡ˆæ˜¯éå¸¸å¤æ‚çš„, éœ€è¦ä¸€ä¸ªå›¢é˜Ÿå»ç®¡ç†å’Œå‡çº§.</li>\n<li>èƒ½å¤Ÿå®¹æ˜“çš„åœ¨é˜²ç«å¢™åè¿è¡Œæ•´ä¸ªç³»ç»Ÿçš„æ–¹æ¡ˆä¼šä½¿å¾—é«˜å¯ç”¨æˆä¸ºä½ä¼˜å…ˆçº§çš„äº‹æƒ….</li>\n<li>å½“ä½ é€‰æ‹©äº†ä¸€ä¸ª CaaS æä¾›å•†æ—¶, ä½ å°±å¯ä»¥æ‘†è„±äº†ä½ çš„æœåŠ¡æ‰˜ç®¡æä¾›å•†çš„é”å®š, ä½†æ˜¯ä½ å°†é™·å…¥åˆ° CaaS æä¾›å•†çš„é”å®š. ä½ æ— æ³•ä¸ä½¿ç”¨ä»–ä»¬çš„ SaaS ç®¡ç†æ¥å£è€Œåœ¨ä½ è‡ªå·±çš„ç¡¬ä»¶ä¸Šè¿è¡Œæ•´ä¸ªç³»ç»ŸåŒ…æ‹¬ç®¡ç†ç³»ç»Ÿ, API å’Œ UI. ä½ ä¸€æ—¦å†³å®šä»˜é’±, ä½ æœ€å¥½å¯ä»¥ä¸€ç›´ä»˜é’±.</li>\n</ul>\n<h3 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h3><p>ç»ˆäºçœ‹å®Œäº†, çœŸçš„æ˜¯åˆè‡­åˆé•¿å•Š. å›é¡¾ä¸€ä¸‹è¿™ç¯‡æ–‡ç« , æ€»ä½“æ¥è¯´æ˜¯ç»å†äº†è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹:</p>\n<ol>\n<li>ä¸“æœ‰æœåŠ¡å™¨</li>\n<li>è™šæ‹ŸåŒ–æŠ€æœ¯</li>\n<li>åŸºç¡€è®¾æ–½å³æœåŠ¡ (IaaS)</li>\n<li>å¹³å°å³æœåŠ¡ (PaaS)</li>\n<li>å®¹å™¨å³æœåŠ¡ (CaaS)</li>\n</ol>\n<p>æ€»ç»“ä¸€ä¸‹, æˆ‘è§‰å¾—å¼€å‘äººå‘˜è¿˜æ˜¯æœ‰å¿…è¦äº†è§£ä¸€ä¸‹å…³äºäº§å“éƒ¨ç½²ç›¸å…³çš„æŠ€æœ¯å‘å±•. ç„¶åæ ¹æ®è‡ªå·±çš„ä¸šåŠ¡æ¥é€‰æ‹©åˆé€‚çš„æœåŠ¡æä¾›å•†.</p>"},{"title":"Webpack 4 å®šåˆ¶å‰ç«¯å¼€å‘ç¯å¢ƒ","comments":1,"date":"2018-09-11T14:16:37.000Z","from":null,"_content":"\næœ¬æ–‡æ€»ç»“äº† Webpack 4 çš„ä¸€äº›é…ç½®ç‚¹ï¼Œå¸Œæœ›é€šè¿‡å­¦ä¹ è¿™äº›é…ç½®ç‚¹ï¼Œé™ä½ä½¿ç”¨é—¨æ§›ã€‚çºµè§‚å‰ç«¯çš„æ‰“åŒ…å†å²ï¼Œä¼¼ä¹æ˜¯æ¬ äº†å¤ªå¤šå€ºï¼Œæœ‰å¾ˆå¤šå†å²åŒ…è¢±ï¼Œæ‰€ä»¥å·¥ç¨‹åŒ–è¿™ä¸€å—ä¸€ç›´æ˜¯ä¸€å¤§ç—›ç‚¹ã€‚é…ç½®ç¹çï¼Œå®¹æ˜“å‡ºé”™ï¼Œæœ¬æ–‡æ€»ç»“äº†æœ€æ–°çš„ Webpack 4 åŠŸèƒ½ç‚¹ï¼Œä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹ï¼Œå¯ä»¥ç‚¹å‡»å³ä¾§çš„æ–‡ç« ç›®å½•ç›´è¾¾ã€‚\n\n<!-- more -->\n\n### webpack æ¦‚å¿µå’ŒåŸºç¡€ä½¿ç”¨\n\n#### å®‰è£…å’Œä½¿ç”¨\n\n```bash\n# å®‰è£… webpack\n$ npm install webpack webpack-cli -g\n\n# or\n$ yarn global add webpack webpack-cli\n\n# ç„¶åå°±å¯ä»¥å…¨å±€æ‰§è¡Œå‘½ä»¤äº†\n$ webpack --help\n```\n\n#### webpack çš„åŸºæœ¬æ¦‚å¿µ\n\n> webpack æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ‰“åŒ…å·¥å…·ï¼Œå®ƒä¼šæ ¹æ®ä»£ç çš„å†…å®¹è§£ææ¨¡å—ä¾èµ–ï¼Œå¸®åŠ©æˆ‘ä»¬æŠŠå¤šä¸ªæ¨¡å—çš„ä»£ç æ‰“åŒ…\n\n![image](https://user-images.githubusercontent.com/15377484/59234564-f1cb0600-8c1f-11e9-8bdf-c6041410225a.png)\n\n> webpack ä¼šæŠŠæˆ‘ä»¬é¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„å¤šä¸ªä»£ç æ¨¡å—ï¼ˆå¯ä»¥æ˜¯ä¸åŒæ–‡ä»¶ç±»å‹ï¼‰ï¼Œæ‰“åŒ…æ„å»ºæˆé¡¹ç›®è¿è¡Œä»…éœ€è¦çš„å‡ ä¸ªé™æ€æ–‡ä»¶\n\n**å…¥å£ï¼ˆentryï¼‰**\n\n> å…¥å£å¯ä»¥ä½¿ç”¨ `entry` å­—æ®µæ¥è¿›è¡Œé…ç½®ï¼Œ`webpack` æ”¯æŒé…ç½®å¤šä¸ªå…¥å£æ¥è¿›è¡Œæ„å»º\n\n```js\nmodule.exports = {\n  entry: './src/index.js'\n};\n\n// ä¸Šè¿°é…ç½®ç­‰åŒäº\nmodule.exports = {\n  entry: {\n    main: './src/index.js'\n  }\n};\n\n// æˆ–è€…é…ç½®å¤šä¸ªå…¥å£\nmodule.exports = {\n  entry: {\n    foo: './src/page-foo.js',\n    bar: './src/page-bar.js'\n    // ...\n  }\n};\n\n// ä½¿ç”¨æ•°ç»„æ¥å¯¹å¤šä¸ªæ–‡ä»¶è¿›è¡Œæ‰“åŒ…\nmodule.exports = {\n  entry: {\n    main: ['./src/foo.js', './src/bar.js']\n  }\n};\n```\n\n**è½¬æ¢å™¨ï¼ˆloaderï¼‰**\n\n> å¯ä»¥æŠŠ `loader` ç†è§£ä¸ºæ˜¯ä¸€ä¸ªè½¬æ¢å™¨ï¼Œè´Ÿè´£æŠŠæŸç§æ–‡ä»¶æ ¼å¼çš„å†…å®¹è½¬æ¢æˆ webpack å¯ä»¥æ”¯æŒæ‰“åŒ…çš„æ¨¡å—\n\n- å½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸åŒçš„ `loader` æ¥è§£æå¤„ç†ä¸åŒç±»å‹çš„æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ `module.rules` å­—æ®µä¸‹æ¥é…ç½®ç›¸å…³çš„è§„åˆ™ï¼Œä¾‹å¦‚ä½¿ç”¨ `Babel` æ¥å¤„ç† `.js` æ–‡ä»¶\n\n```js\nmodule: {\n  // ...\n  rules: [\n    {\n      test: /\\.jsx?/, // åŒ¹é…æ–‡ä»¶è·¯å¾„çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œé€šå¸¸æˆ‘ä»¬éƒ½æ˜¯åŒ¹é…æ–‡ä»¶ç±»å‹åç¼€\n      include: [\n        path.resolve(__dirname, 'src') // æŒ‡å®šå“ªäº›è·¯å¾„ä¸‹çš„æ–‡ä»¶éœ€è¦ç»è¿‡ loader å¤„ç†\n      ],\n      use: 'babel-loader', // æŒ‡å®šä½¿ç”¨çš„ loader\n    },\n  ],\n}\n```\n\n**æ’ä»¶ï¼ˆpluginï¼‰**\n\n> æ¨¡å—ä»£ç è½¬æ¢çš„å·¥ä½œç”± `loader` æ¥å¤„ç†ï¼Œé™¤æ­¤ä¹‹å¤–çš„å…¶ä»–ä»»ä½•å·¥ä½œéƒ½å¯ä»¥äº¤ç”± `plugin` æ¥å®Œæˆã€‚é€šè¿‡æ·»åŠ æˆ‘ä»¬éœ€è¦çš„ `plugin`ï¼Œå¯ä»¥æ»¡è¶³æ›´å¤šæ„å»ºä¸­ç‰¹æ®Šçš„éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨å‹ç¼© `JS` ä»£ç çš„ `uglifyjs-webpack-plugin` æ’ä»¶ï¼Œåªéœ€åœ¨é…ç½®ä¸­é€šè¿‡ `plugins` å­—æ®µæ·»åŠ æ–°çš„ `plugin` å³å¯...\n\n```js\nconst UglifyPlugin = require('uglifyjs-webpack-plugin');\n\nmodule.exports = {\n  plugins: [new UglifyPlugin()]\n};\n```\n\n> `plugin` ç†è®ºä¸Šå¯ä»¥å¹²æ¶‰ `webpack` æ•´ä¸ªæ„å»ºæµç¨‹ï¼Œå¯ä»¥åœ¨æµç¨‹çš„æ¯ä¸€ä¸ªæ­¥éª¤ä¸­å®šåˆ¶è‡ªå·±çš„æ„å»ºéœ€æ±‚\n\n**è¾“å‡ºï¼ˆoutputï¼‰**\n\n> æ„å»ºç»“æœçš„æ–‡ä»¶åã€è·¯å¾„ç­‰éƒ½æ˜¯å¯ä»¥é…ç½®çš„ï¼Œä½¿ç”¨ `output` å­—æ®µ\n\n```js\nmodule.exports = {\n  // ...\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: 'bundle.js'\n  }\n};\n\n// æˆ–è€…å¤šä¸ªå…¥å£ç”Ÿæˆä¸åŒæ–‡ä»¶\nmodule.exports = {\n  entry: {\n    foo: './src/foo.js',\n    bar: './src/bar.js'\n  },\n  output: {\n    filename: '[name].js',\n    path: __dirname + '/dist'\n  }\n};\n\n// è·¯å¾„ä¸­ä½¿ç”¨ hashï¼Œæ¯æ¬¡æ„å»ºæ—¶ä¼šæœ‰ä¸€ä¸ªä¸åŒ hash å€¼ï¼Œé¿å…å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶çº¿ä¸Šä½¿ç”¨æµè§ˆå™¨ç¼“å­˜\nmodule.exports = {\n  // ...\n  output: {\n    filename: '[name].js',\n    path: __dirname + '/dist/[hash]'\n  }\n};\n```\n\n> æˆ‘ä»¬ä¸€å¼€å§‹ç›´æ¥ä½¿ç”¨ `webpack` æ„å»ºæ—¶ï¼Œé»˜è®¤åˆ›å»ºçš„è¾“å‡ºå†…å®¹å°±æ˜¯ `./dist/main.js`\n\n**ä¸€ä¸ªç®€å•çš„ webpack é…ç½®**\n\n> æˆ‘ä»¬æŠŠä¸Šè¿°æ¶‰åŠçš„å‡ éƒ¨åˆ†é…ç½®å†…å®¹åˆåˆ°ä¸€èµ·ï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªç®€å•çš„ `webpack` é…ç½®äº†ï¼Œ`webpack` è¿è¡Œæ—¶é»˜è®¤è¯»å–é¡¹ç›®ä¸‹çš„ `webpack.config.js` æ–‡ä»¶ä½œä¸ºé…ç½®ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ª `webpack.config.js` æ–‡ä»¶\n\n```js\nconst path = require('path');\nconst UglifyPlugin = require('uglifyjs-webpack-plugin');\n\nmodule.exports = {\n  entry: './src/index.js',\n\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: 'bundle.js'\n  },\n\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?/,\n        include: [path.resolve(__dirname, 'src')],\n        use: 'babel-loader'\n      }\n    ]\n  },\n\n  // ä»£ç æ¨¡å—è·¯å¾„è§£æçš„é…ç½®\n  resolve: {\n    modules: ['node_modules', path.resolve(__dirname, 'src')],\n\n    extensions: ['.wasm', '.mjs', '.js', '.json', '.jsx']\n  },\n\n  plugins: [\n    new UglifyPlugin()\n    // ä½¿ç”¨ uglifyjs-webpack-plugin æ¥å‹ç¼© JS ä»£ç \n    // å¦‚æœä½ ç•™æ„äº†æˆ‘ä»¬ä¸€å¼€å§‹ç›´æ¥ä½¿ç”¨ webpack æ„å»ºçš„ç»“æœï¼Œä½ ä¼šå‘ç°é»˜è®¤å·²ç»ä½¿ç”¨äº† JS ä»£ç å‹ç¼©çš„æ’ä»¶\n    // è¿™å…¶å®ä¹Ÿæ˜¯æˆ‘ä»¬å‘½ä»¤ä¸­çš„ --mode production çš„æ•ˆæœï¼Œåç»­çš„å°èŠ‚ä¼šä»‹ç» webpack çš„ mode å‚æ•°\n  ]\n};\n```\n\n### æ­å»ºåŸºç¡€çš„å‰ç«¯å¼€å‘ç¯å¢ƒ\n\n#### å…³è” HTML\n\n> `webpack` é»˜è®¤ä»ä½œä¸ºå…¥å£çš„ `.js` æ–‡ä»¶è¿›è¡Œæ„å»ºï¼ˆæ›´å¤šæ˜¯åŸºäº `SPA` å»è€ƒè™‘ï¼‰ï¼Œä½†é€šå¸¸ä¸€ä¸ªå‰ç«¯é¡¹ç›®éƒ½æ˜¯ä»ä¸€ä¸ªé¡µé¢ï¼ˆå³ HTMLï¼‰å‡ºå‘çš„ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼Œåˆ›å»ºä¸€ä¸ª HTML æ–‡ä»¶ï¼Œä½¿ç”¨ `script` æ ‡ç­¾ç›´æ¥å¼•ç”¨æ„å»ºå¥½çš„ JS æ–‡ä»¶ï¼Œå¦‚...\n\n```plain\n<script src=\"./dist/bundle.js\"></script>\n```\n\n- ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„æ–‡ä»¶åæˆ–è€…è·¯å¾„ä¼šå˜åŒ–ï¼Œä¾‹å¦‚ä½¿ç”¨ `[hash]` æ¥è¿›è¡Œå‘½åï¼Œé‚£ä¹ˆæœ€å¥½æ˜¯å°† `HTML` å¼•ç”¨è·¯å¾„å’Œæˆ‘ä»¬çš„æ„å»ºç»“æœå…³è”èµ·æ¥ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `html-webpack-plugin`\n- `html-webpack-plugin` æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ `node package`ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ä¹‹å‰æˆ‘ä»¬éœ€è¦å…ˆå®‰è£…å®ƒï¼ŒæŠŠå®ƒå®‰è£…åˆ°é¡¹ç›®çš„å¼€å‘ä¾èµ–ä¸­\n\n```bash\nnpm install html-webpack-plugin -D\n```\n\n> ç„¶ååœ¨ `webpack` é…ç½®ä¸­ï¼Œå°† `html-webpack-plugin` æ·»åŠ åˆ° `plugins` åˆ—è¡¨ä¸­\n\n```js\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\n\nmodule.exports = {\n  // ...\n  plugins: [new HtmlWebpackPlugin()]\n};\n```\n\n> è¿™æ ·é…ç½®å¥½ä¹‹åï¼Œæ„å»ºæ—¶ `html-webpack-plugin` ä¼šä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª `HTML` æ–‡ä»¶ï¼Œå…¶ä¸­ä¼šå¼•ç”¨æ„å»ºå‡ºæ¥çš„ JS æ–‡ä»¶ã€‚å®é™…é¡¹ç›®ä¸­ï¼Œé»˜è®¤åˆ›å»ºçš„ `HTML` æ–‡ä»¶å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±æ¥å†™ `HTML` æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ `html-webpack-plugin` çš„é…ç½®ï¼Œä¼ é€’ä¸€ä¸ªå†™å¥½çš„ HTML æ¨¡æ¿...\n\n```js\nmodule.exports = {\n  // ...\n  plugins: [\n    new HtmlWebpackPlugin({\n      filename: 'index.html', // é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„\n      template: 'assets/index.html' // é…ç½®æ–‡ä»¶æ¨¡æ¿\n    })\n  ]\n};\n```\n\n> è¿™æ ·ï¼Œé€šè¿‡ `html-webpack-plugin` å°±å¯ä»¥å°†æˆ‘ä»¬çš„é¡µé¢å’Œæ„å»º `JS` å…³è”èµ·æ¥ï¼Œå›å½’æ—¥å¸¸ï¼Œä»é¡µé¢å¼€å§‹å¼€å‘ã€‚å¦‚æœéœ€è¦æ·»åŠ å¤šä¸ªé¡µé¢å…³è”ï¼Œé‚£ä¹ˆå®ä¾‹åŒ–å¤šä¸ª `html-webpack-plugin`ï¼Œ å¹¶å°†å®ƒä»¬éƒ½æ”¾åˆ° `plugins` å­—æ®µæ•°ç»„ä¸­å°±å¯ä»¥äº†...\n\n#### æ„å»º CSS\n\n> æˆ‘ä»¬ç¼–å†™ `CSS`ï¼Œå¹¶ä¸”å¸Œæœ›ä½¿ç”¨ `webpack` æ¥è¿›è¡Œæ„å»ºï¼Œä¸ºæ­¤ï¼Œéœ€è¦åœ¨é…ç½®ä¸­å¼•å…¥ `loader` æ¥è§£æå’Œå¤„ç† `CSS` æ–‡ä»¶\n\n```js\nmodule.exports = {\n  module: {\n    rules: [\n      // ...\n      {\n        test: /\\.css/,\n        include: [path.resolve(__dirname, 'src')],\n        use: ['style-loader', 'css-loader']\n      }\n    ]\n  }\n};\n```\n\n- `css-loader` è´Ÿè´£è§£æ `CSS` ä»£ç ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¤„ç† `CSS` ä¸­çš„ä¾èµ–ï¼Œä¾‹å¦‚ `@import` å’Œ `url()` ç­‰å¼•ç”¨å¤–éƒ¨æ–‡ä»¶çš„å£°æ˜ï¼›\n- `style-loader` ä¼šå°† `css-loader` è§£æçš„ç»“æœè½¬å˜æˆ `JS` ä»£ç ï¼Œè¿è¡Œæ—¶åŠ¨æ€æ’å…¥ `style` æ ‡ç­¾æ¥è®© `CSS` ä»£ç ç”Ÿæ•ˆ...\n\n> ç»ç”±ä¸Šè¿°ä¸¤ä¸ª `loader` çš„å¤„ç†åï¼ŒCSS ä»£ç ä¼šè½¬å˜ä¸º JSï¼Œå’Œ `index.js` ä¸€èµ·æ‰“åŒ…äº†ã€‚å¦‚æœéœ€è¦å•ç‹¬æŠŠ CSS æ–‡ä»¶åˆ†ç¦»å‡ºæ¥ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ `extract-text-webpack-plugin` æ’ä»¶\n\n```js\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\n\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        // å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          use: 'css-loader'\n        })\n      }\n    ]\n  },\n  plugins: [\n    // å¼•å…¥æ’ä»¶ï¼Œé…ç½®æ–‡ä»¶åï¼Œè¿™é‡ŒåŒæ ·å¯ä»¥ä½¿ç”¨ [hash]\n    new ExtractTextPlugin('index.css')\n  ]\n};\n```\n\n#### CSS é¢„å¤„ç†å™¨\n\n> åœ¨ä¸Šè¿°ä½¿ç”¨ CSS çš„åŸºç¡€ä¸Šï¼Œé€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨ `Less/Sass` ç­‰ CSS é¢„å¤„ç†å™¨ï¼Œwebpack å¯ä»¥é€šè¿‡æ·»åŠ å¯¹åº”çš„ `loader` æ¥æ”¯æŒï¼Œä»¥ä½¿ç”¨ `Less` ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æ‰¾åˆ°å¯¹åº”çš„ `loader`\n\n```js\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\.less$/,\n        // å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          use: ['css-loader', 'less-loader']\n        })\n      }\n    ]\n  }\n  // ...\n};\n```\n\n#### å¤„ç†å›¾ç‰‡æ–‡ä»¶\n\n> åœ¨å‰ç«¯é¡¹ç›®çš„æ ·å¼ä¸­æ€»ä¼šä½¿ç”¨åˆ°å›¾ç‰‡ï¼Œè™½ç„¶æˆ‘ä»¬å·²ç»æåˆ° `css-loader` ä¼šè§£ææ ·å¼ä¸­ç”¨ `url()` å¼•ç”¨çš„æ–‡ä»¶è·¯å¾„ï¼Œä½†æ˜¯å›¾ç‰‡å¯¹åº”çš„ `jpg/png/gif` ç­‰æ–‡ä»¶æ ¼å¼ï¼Œ`webpack` å¤„ç†ä¸äº†ã€‚æ˜¯çš„ï¼Œæˆ‘ä»¬åªè¦æ·»åŠ ä¸€ä¸ªå¤„ç†å›¾ç‰‡çš„ `loader` é…ç½®å°±å¯ä»¥äº†ï¼Œç°æœ‰çš„ `file-loader` å°±æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©...\n\n- `file-loader` å¯ä»¥ç”¨äºå¤„ç†å¾ˆå¤šç±»å‹çš„æ–‡ä»¶ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ç›´æ¥è¾“å‡ºæ–‡ä»¶ï¼ŒæŠŠæ„å»ºåçš„æ–‡ä»¶è·¯å¾„è¿”å›ã€‚é…ç½®å¾ˆç®€å•ï¼Œåœ¨ `rules` ä¸­æ·»åŠ ä¸€ä¸ªå­—æ®µï¼Œå¢åŠ å›¾ç‰‡ç±»å‹æ–‡ä»¶çš„è§£æé…ç½®\n\n```js\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\.(png|jpg|gif)$/,\n        use: [\n          {\n            loader: 'file-loader',\n            options: {}\n          }\n        ]\n      }\n    ]\n  }\n};\n```\n\n#### ä½¿ç”¨ Babel\n\n> `Babel` æ˜¯ä¸€ä¸ªè®©æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ `ES` æ–°ç‰¹æ€§çš„ `JS` ç¼–è¯‘å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ `webpack` ä¸­é…ç½® Babelï¼Œä»¥ä¾¿ä½¿ç”¨ `ES6`ã€`ES7` æ ‡å‡†æ¥ç¼–å†™ `JS` ä»£ç \n\n```js\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?/, // æ”¯æŒ js å’Œ jsx\n        include: [\n          path.resolve(__dirname, 'src') // src ç›®å½•ä¸‹çš„æ‰éœ€è¦ç»è¿‡ babel-loader å¤„ç†\n        ],\n        loader: 'babel-loader'\n      }\n    ]\n  }\n};\n```\n\n#### å¯åŠ¨é™æ€æœåŠ¡\n\n> è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†å¤„ç†å¤šç§æ–‡ä»¶ç±»å‹çš„ webpack é…ç½®ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `webpack-dev-server` åœ¨æœ¬åœ°å¼€å¯ä¸€ä¸ªç®€å•çš„é™æ€æœåŠ¡æ¥è¿›è¡Œå¼€å‘\n\n```js\n\"scripts\": {\n  \"build\": \"webpack --mode production\",\n  \"start\": \"webpack-dev-server --mode development\"\n}\n```\n\n> å°è¯•ç€è¿è¡Œ `npm start` æˆ–è€… `yarn start`ï¼Œç„¶åå°±å¯ä»¥è®¿é—® `http://localhost:8080/` æ¥æŸ¥çœ‹ä½ çš„é¡µé¢äº†ã€‚é»˜è®¤æ˜¯è®¿é—® `index.html`ï¼Œå¦‚æœæ˜¯å…¶ä»–é¡µé¢è¦æ³¨æ„è®¿é—®çš„ URL æ˜¯å¦æ­£ç¡®\n\n#### å®Œæ•´ç¤ºä¾‹ä»£ç \n\n```js\nconst path = require('path');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\n\nmodule.exports = {\n  entry: './src/index.js',\n\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: '[name].js'\n  },\n\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?/,\n        include: [path.resolve(__dirname, 'src')],\n        use: 'babel-loader'\n      },\n      {\n        test: /\\.less$/,\n        // å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          use: ['css-loader', 'less-loader']\n        })\n      },\n      {\n        test: /\\.(png|jpg|gif)$/,\n        use: [\n          {\n            loader: 'file-loader'\n          }\n        ]\n      }\n    ]\n  },\n\n  // ä»£ç æ¨¡å—è·¯å¾„è§£æçš„é…ç½®\n  resolve: {\n    modules: ['node_modules', path.resolve(__dirname, 'src')],\n\n    extensions: ['.wasm', '.mjs', '.js', '.json', '.jsx']\n  },\n\n  plugins: [\n    new HtmlWebpackPlugin({\n      filename: 'index.html', // é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„\n      template: 'src/index.html' // é…ç½®æ–‡ä»¶æ¨¡æ¿\n    }),\n    new ExtractTextPlugin('[name].css')\n  ]\n};\n```\n\n### webpack å¦‚ä½•è§£æä»£ç æ¨¡å—è·¯å¾„\n\n> webpack ä¸­æœ‰ä¸€ä¸ªå¾ˆå…³é”®çš„æ¨¡å— `enhanced-resolve` å°±æ˜¯å¤„ç†ä¾èµ–æ¨¡å—è·¯å¾„çš„è§£æçš„ï¼Œè¿™ä¸ªæ¨¡å—å¯ä»¥è¯´æ˜¯ Node.js é‚£ä¸€å¥—æ¨¡å—è·¯å¾„è§£æçš„å¢å¼ºç‰ˆæœ¬ï¼Œæœ‰å¾ˆå¤šå¯ä»¥è‡ªå®šä¹‰çš„è§£æé…ç½®\n\n- åœ¨ webpack é…ç½®ä¸­ï¼Œå’Œæ¨¡å—è·¯å¾„è§£æç›¸å…³çš„é…ç½®éƒ½åœ¨ `resolve` å­—æ®µä¸‹\n\n```js\nmodule.exports = {\n  resolve: {\n    // ...\n  }\n};\n```\n\n#### å¸¸ç”¨çš„ä¸€äº›é…ç½®\n\n**resolve.alias**\n\n> å‡è®¾æˆ‘ä»¬æœ‰ä¸ª `utils` æ¨¡å—æå…¶å¸¸ç”¨ï¼Œç»å¸¸ç¼–å†™ç›¸å¯¹è·¯å¾„å¾ˆéº»çƒ¦ï¼Œå¸Œæœ›å¯ä»¥ç›´æ¥ `import 'utils'` æ¥å¼•ç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é…ç½®æŸä¸ªæ¨¡å—çš„åˆ«åï¼Œå¦‚\n\n```js\nalias: {\n  utils: path.resolve(__dirname, 'src/utils'); // è¿™é‡Œä½¿ç”¨ path.resolve å’Œ __dirname æ¥è·å–ç»å¯¹è·¯å¾„\n}\n```\n\n> ä¸Šè¿°çš„é…ç½®æ˜¯æ¨¡ç³ŠåŒ¹é…ï¼Œæ„å‘³ç€åªè¦æ¨¡å—è·¯å¾„ä¸­æºå¸¦äº† utils å°±å¯ä»¥è¢«æ›¿æ¢æ‰ï¼Œå¦‚ï¼š\n\n```plain\nimport 'utils/query.js' // ç­‰åŒäº import '[é¡¹ç›®ç»å¯¹è·¯å¾„]/src/utils/query.js'\n```\n\n> å¦‚æœéœ€è¦è¿›è¡Œç²¾ç¡®åŒ¹é…å¯ä»¥ä½¿ç”¨ï¼š\n\n```js\nalias: {\n  utils$: path.resolve(__dirname, 'src/utils'); // åªä¼šåŒ¹é… import 'utils'\n}\n```\n\n**resolve.extensions**\n\n```js\nextensions: ['.wasm', '.mjs', '.js', '.json', '.jsx'],\n// è¿™é‡Œçš„é¡ºåºä»£è¡¨åŒ¹é…åç¼€çš„ä¼˜å…ˆçº§ï¼Œä¾‹å¦‚å¯¹äº index.js å’Œ index.jsxï¼Œä¼šä¼˜å…ˆé€‰æ‹© index.js\n```\n\n> è¿™ä¸ªé…ç½®çš„ä½œç”¨æ˜¯å’Œæ–‡ä»¶åç¼€åæœ‰å…³çš„, è¿™ä¸ªé…ç½®å¯ä»¥å®šä¹‰åœ¨è¿›è¡Œæ¨¡å—è·¯å¾„è§£ææ—¶ï¼Œwebpack ä¼šå°è¯•å¸®ä½ è¡¥å…¨é‚£äº›åç¼€åæ¥è¿›è¡ŒæŸ¥æ‰¾\n\n### é…ç½® loader\n\n#### loader åŒ¹é…è§„åˆ™\n\n> å½“æˆ‘ä»¬éœ€è¦é…ç½® `loader` æ—¶ï¼Œéƒ½æ˜¯åœ¨ `module.rules` ä¸­æ·»åŠ æ–°çš„é…ç½®é¡¹ï¼Œåœ¨è¯¥å­—æ®µä¸­ï¼Œæ¯ä¸€é¡¹è¢«è§†ä¸ºä¸€æ¡åŒ¹é…ä½¿ç”¨ `loader` çš„è§„åˆ™\n\n```js\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?/, // æ¡ä»¶\n        include: [path.resolve(__dirname, 'src')], // æ¡ä»¶\n        use: 'babel-loader' // è§„åˆ™åº”ç”¨ç»“æœ\u000e\n      } // ä¸€ä¸ª object å³ä¸€æ¡è§„åˆ™\n      // ...\n    ]\n  }\n};\n```\n\n> `loader` çš„åŒ¹é…è§„åˆ™ä¸­æœ‰ä¸¤ä¸ªæœ€å…³é”®çš„å› ç´ ï¼šä¸€ä¸ªæ˜¯åŒ¹é…æ¡ä»¶ï¼Œä¸€ä¸ªæ˜¯åŒ¹é…è§„åˆ™åçš„åº”ç”¨\n\n#### è§„åˆ™æ¡ä»¶é…ç½®\n\n> å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé…ç½® `loader` çš„åŒ¹é…æ¡ä»¶æ—¶ï¼Œåªè¦ä½¿ç”¨ `test` å­—æ®µå°±å¥½äº†ï¼Œå¾ˆå¤šæ—¶å€™éƒ½åªéœ€è¦åŒ¹é…æ–‡ä»¶åç¼€åæ¥å†³å®šä½¿ç”¨ä»€ä¹ˆ `loader`ï¼Œä½†ä¹Ÿä¸æ’é™¤åœ¨æŸäº›ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®æ¯”è¾ƒå¤æ‚çš„åŒ¹é…æ¡ä»¶ã€‚webpack çš„è§„åˆ™æä¾›äº†å¤šç§é…ç½®å½¢å¼...\n\n- `{test: ...}` åŒ¹é…ç‰¹å®šæ¡ä»¶\n- `{include: ...}` åŒ¹é…ç‰¹å®šè·¯å¾„\n- `{exclude: ...}` æ’é™¤ç‰¹å®šè·¯å¾„\n- `{and: [...] }` å¿…é¡»åŒ¹é…æ•°ç»„ä¸­æ‰€æœ‰æ¡ä»¶\n- `{or: [...] }` åŒ¹é…æ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªæ¡ä»¶\n- `{not: [...] }` æ’é™¤åŒ¹é…æ•°ç»„ä¸­æ‰€æœ‰æ¡ä»¶...\n\n> ä¸Šè¿°çš„æ‰€è°“æ¡ä»¶çš„å€¼å¯ä»¥æ˜¯ï¼š\n\n- å­—ç¬¦ä¸²ï¼šå¿…é¡»ä»¥æä¾›çš„å­—ç¬¦ä¸²å¼€å§‹ï¼Œæ‰€ä»¥æ˜¯å­—ç¬¦ä¸²çš„è¯ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦æä¾›ç»å¯¹è·¯å¾„\n- æ­£åˆ™è¡¨è¾¾å¼ï¼šè°ƒç”¨æ­£åˆ™çš„ `test` æ–¹æ³•æ¥åˆ¤æ–­åŒ¹é…\n- å‡½æ•°ï¼š`(path) => boolean`ï¼Œè¿”å› `true` è¡¨ç¤ºåŒ¹é…\n- æ•°ç»„ï¼šè‡³å°‘åŒ…å«ä¸€ä¸ªæ¡ä»¶çš„æ•°ç»„\n- å¯¹è±¡ï¼šåŒ¹é…æ‰€æœ‰å±æ€§å€¼çš„æ¡ä»¶...\n\n```js\nrules: [\n  {\n    test: /\\.jsx?/, // æ­£åˆ™\n    include: [\n      path.resolve(__dirname, 'src'), // å­—ç¬¦ä¸²ï¼Œæ³¨æ„æ˜¯ç»å¯¹è·¯å¾„\n    ], // æ•°ç»„\n    // ...\n  },\n  {\n    test: {\n      js: /\\.js/,\n      jsx: /\\.jsx/,\n    }, // å¯¹è±¡ï¼Œä¸å»ºè®®ä½¿ç”¨\n    not: [\n      (value) => { /* ... */ return true; }, // å‡½æ•°ï¼Œé€šå¸¸éœ€è¦é«˜åº¦è‡ªå®šä¹‰æ—¶æ‰ä¼šä½¿ç”¨\n    ],\n  },\n]\n```\n\n#### ä½¿ç”¨ loader é…ç½®\n\n> `module.rules` çš„åŒ¹é…è§„åˆ™æœ€é‡è¦çš„è¿˜æ˜¯ç”¨äºé…ç½® `loader`ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `use` å­—æ®µ\n\n```js\nrules: [\n  {\n    test: /\\.less/,\n    use: [\n      'style-loader', // ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²è¡¨ç¤º loader\n      {\n        loader: 'css-loader',\n        options: {\n          importLoaders: 1\n        },\n      }, // ç”¨å¯¹è±¡è¡¨ç¤º loaderï¼Œå¯ä»¥ä¼ é€’ loader é…ç½®ç­‰\n      {\n        loader: 'less-loader',\n        options: {\n          noIeCompat: true\n        }, // ä¼ é€’ loader é…ç½®\n      },\n    ],\n  },\n]\n```\n\n> `use` å­—æ®µå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…è¡¨ç¤º `loader` çš„å¯¹è±¡ã€‚å¦‚æœåªéœ€è¦ä¸€ä¸ª `loader`ï¼Œä¹Ÿå¯ä»¥è¿™æ ·ï¼š`use: {loader: 'babel-loader'`, `options: { ...} }`\n\n#### loader åº”ç”¨é¡ºåº\n\n- å¯¹äºä¸Šé¢çš„ `less` è§„åˆ™é…ç½®ï¼Œä¸€ä¸ª `style.less` æ–‡ä»¶ä¼šé€”å¾„ `less-loader`ã€`css-loader`ã€`style-loader` å¤„ç†ï¼Œæˆä¸ºä¸€ä¸ªå¯ä»¥æ‰“åŒ…çš„æ¨¡å—ã€‚\n- `loader` çš„åº”ç”¨é¡ºåºåœ¨é…ç½®å¤šä¸ª `loader` ä¸€èµ·å·¥ä½œæ—¶å¾ˆé‡è¦ï¼Œé€šå¸¸ä¼šä½¿ç”¨åœ¨ CSS é…ç½®ä¸Šï¼Œé™¤äº† `style-loader` å’Œ `css-loader`ï¼Œä½ å¯èƒ½è¿˜è¦é…ç½® `less-loader` ç„¶åå†åŠ ä¸ª `postcss` çš„ `autoprefixer` ç­‰ã€‚\n- ä¸Šè¿°ä»ååˆ°å‰çš„é¡ºåºæ˜¯åœ¨åŒä¸€ä¸ª `rule` ä¸­è¿›è¡Œçš„ï¼Œé‚£å¦‚æœå¤šä¸ª `rule` åŒ¹é…äº†åŒä¸€ä¸ªæ¨¡å—æ–‡ä»¶ï¼Œ`loader` çš„åº”ç”¨é¡ºåºåˆæ˜¯æ€æ ·çš„å‘¢ï¼Ÿçœ‹ä¸€ä»½è¿™æ ·çš„é…ç½®...\n\n```js\nrules: [\n  {\n    test: /\\.js$/,\n    exclude: /node_modules/,\n    loader: \"eslint-loader\",\n  },\n  {\n    test: /\\.js$/,\n    exclude: /node_modules/,\n    loader: \"babel-loader\",\n  },\n]\n```\n\n> è¿™æ ·æ— æ³•æ³•ä¿è¯ `eslint-loader` åœ¨ `babel-loader` åº”ç”¨å‰æ‰§è¡Œã€‚`webpack` åœ¨ `rules` ä¸­æä¾›äº†ä¸€ä¸ª `enforce` çš„å­—æ®µæ¥é…ç½®å½“å‰ `rule` çš„ `loader` ç±»å‹ï¼Œæ²¡é…ç½®çš„è¯æ˜¯æ™®é€šç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½® `pre` æˆ– `post`ï¼Œåˆ†åˆ«å¯¹åº”å‰ç½®ç±»å‹æˆ–åç½®ç±»å‹çš„ `loader`...\n\n- æ‰€æœ‰çš„ `loader` æŒ‰ç…§ **å‰ç½®** -> **è¡Œå†…** -> **æ™®é€š** -> **åç½®** çš„é¡ºåºæ‰§è¡Œã€‚æ‰€ä»¥å½“æˆ‘ä»¬è¦ç¡®ä¿ `eslint-loader` åœ¨ `babel-loader` ä¹‹å‰æ‰§è¡Œæ—¶ï¼Œå¯ä»¥å¦‚ä¸‹æ·»åŠ  `enforce` é…ç½®\n\n```js\nrules: [\n  {\n    enforce: 'pre', // æŒ‡å®šä¸ºå‰ç½®ç±»å‹\n    test: /\\.js$/,\n    exclude: /node_modules/,\n    loader: \"eslint-loader\",\n  },\n]\n```\n\n> å½“é¡¹ç›®æ–‡ä»¶ç±»å‹å’Œåº”ç”¨çš„ `loader` ä¸æ˜¯ç‰¹åˆ«å¤æ‚çš„æ—¶å€™ï¼Œé€šå¸¸å»ºè®®æŠŠè¦åº”ç”¨çš„åŒä¸€ç±»å‹ `loader` éƒ½å†™åœ¨åŒä¸€ä¸ªåŒ¹é…è§„åˆ™ä¸­ï¼Œè¿™æ ·æ›´å¥½ç»´æŠ¤å’Œæ§åˆ¶\n\n#### å®Œæ•´ä»£ç \n\n```js\nconst path = require('path');\nconst webpack = require('webpack');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\nconst CopyWebpackPlugin = require('copy-webpack-plugin');\n\nmodule.exports = {\n  entry: './src/index',\n\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: '[name].js'\n  },\n\n  module: {\n    rules: [\n      {\n        enforce: 'pre', // æŒ‡å®šä¸ºå‰ç½®ç±»å‹\n        test: /\\.jsx?$/,\n        exclude: /node_modules/,\n        loader: 'eslint-loader'\n      },\n      {\n        test: /\\.jsx?$/,\n        include: [path.resolve(__dirname, 'src')],\n        use: 'babel-loader'\n      },\n      {\n        test: /\\.css$/,\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          use: ['css-loader']\n        })\n      },\n      {\n        test: /\\.less$/,\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          use: ['css-loader', 'less-loader']\n        })\n      },\n      {\n        test: /\\.(png|jpg|gif)$/,\n        use: [\n          {\n            loader: 'file-loader'\n          }\n        ]\n      }\n    ]\n  },\n\n  resolve: {\n    alias: {\n      utils: path.resolve(__dirname, 'src/utils'), // è¿™é‡Œä½¿ç”¨ path.resolve å’Œ __dirname æ¥è·å–ç»å¯¹è·¯å¾„\n      log$: path.resolve(__dirname, 'src/utils/log.js') // åªåŒ¹é… log\n    },\n    extensions: ['.js', '.json', '.jsx', '.css', '.less'],\n    modules: [\n      path.resolve(__dirname, 'node_modules') // æŒ‡å®šå½“å‰ç›®å½•ä¸‹çš„ node_modules ä¼˜å…ˆæŸ¥æ‰¾\n    ]\n  },\n\n  plugins: [\n    new HtmlWebpackPlugin({\n      filename: 'index.html', // é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„\n      template: 'src/index.html' // é…ç½®æ–‡ä»¶æ¨¡æ¿\n    }),\n    new ExtractTextPlugin('[name].css'),\n    new webpack.DefinePlugin({\n      TWO: '1+1',\n      CONSTANTS: {\n        APP_VERSION: JSON.stringify('1.1.2') // const CONSTANTS = { APP_VERSION: '1.1.2' }\n      }\n    }),\n    new CopyWebpackPlugin([\n      { from: 'src/assets/favicon.ico', to: 'favicon.ico' } // é¡¾åæ€ä¹‰ï¼Œfrom é…ç½®æ¥æºï¼Œto é…ç½®ç›®æ ‡è·¯å¾„\n    ]),\n    new webpack.ProvidePlugin({\n      _: 'lodash'\n    })\n  ],\n\n  devServer: {\n    port: '1234',\n    before(app) {\n      app.get('/api/test.json', function(req, res) {\n        // å½“è®¿é—® /some/path è·¯å¾„æ—¶ï¼Œè¿”å›è‡ªå®šä¹‰çš„ json æ•°æ®\n        res.json({ code: 200, message: 'hello world' });\n      });\n    }\n  }\n};\n```\n\n### ä½¿ç”¨ plugin\n\n> æ›´å¤šçš„æ’ä»¶å¯ä»¥åœ¨è¿™é‡ŒæŸ¥æ‰¾ï¼š[plugins in awesome-webpack](https://github.com/webpack-contrib/awesome-webpack#webpack-plugins)\n\n#### DefinePlugin\n\n> `DefinePlugin` æ˜¯ `webpack` å†…ç½®çš„æ’ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ `webpack.DefinePlugin` ç›´æ¥è·å–\n\n- è¿™ä¸ªæ’ä»¶ç”¨äºåˆ›å»ºä¸€äº›åœ¨ç¼–è¯‘æ—¶å¯ä»¥é…ç½®çš„å…¨å±€å¸¸é‡ï¼Œè¿™äº›å¸¸é‡çš„å€¼æˆ‘ä»¬å¯ä»¥åœ¨ `webpack` çš„é…ç½®ä¸­å»æŒ‡å®šï¼Œä¾‹å¦‚\n\n```js\nmodule.exports = {\n  // ...\n  plugins: [\n    new webpack.DefinePlugin({\n      PRODUCTION: JSON.stringify(true), // const PRODUCTION = true\n      VERSION: JSON.stringify('5fa3b9'), // const VERSION = '5fa3b9'\n      BROWSER_SUPPORTS_HTML5: true, // const BROWSER_SUPPORTS_HTML5 = 'true'\n      TWO: '1+1', // const TWO = 1 + 1,\n      CONSTANTS: {\n        APP_VERSION: JSON.stringify('1.1.2') // const CONSTANTS = { APP_VERSION: '1.1.2' }\n      }\n    })\n  ]\n};\n```\n\n> æœ‰äº†ä¸Šé¢çš„é…ç½®ï¼Œå°±å¯ä»¥åœ¨åº”ç”¨ä»£ç æ–‡ä»¶ä¸­ï¼Œè®¿é—®é…ç½®å¥½çš„å˜é‡äº†ï¼Œå¦‚ï¼š\n\n```js\nconsole.log('Running App version' + VERSION);\n\nif (!BROWSER_SUPPORTS_HTML5) require('html5shiv');\n```\n\n> ä¸Šé¢é…ç½®çš„æ³¨é‡Šå·²ç»ç®€å•è¯´æ˜äº†è¿™äº›é…ç½®çš„æ•ˆæœï¼Œè¿™é‡Œå†ç®€è¿°ä¸€ä¸‹æ•´ä¸ªé…ç½®è§„åˆ™ã€‚\n\n- å¦‚æœé…ç½®çš„å€¼æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæ•´ä¸ªå­—ç¬¦ä¸²ä¼šè¢«å½“æˆä»£ç ç‰‡æ®µæ¥æ‰§è¡Œï¼Œå…¶ç»“æœä½œä¸ºæœ€ç»ˆå˜é‡çš„å€¼ï¼Œå¦‚ä¸Šé¢çš„ `\"1+1\"`ï¼Œæœ€åçš„ç»“æœæ˜¯ `2`\n- å¦‚æœé…ç½®çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ï¼Œé‚£ä¹ˆè¯¥å€¼ä¼šè¢«è½¬ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚ `true`ï¼Œæœ€åçš„ç»“æœæ˜¯ `'true'`\n- å¦‚æœé…ç½®çš„æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡çš„æ‰€æœ‰ `key` ä¼šä»¥åŒæ ·çš„æ–¹å¼å»å®šä¹‰\n- è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ `JSON.stringify()` äº†ï¼Œå› ä¸º `JSON.stringify(true)` çš„ç»“æœæ˜¯ `'true'`ï¼Œ`JSON.stringify(\"5fa3b9\")` çš„ç»“æœæ˜¯ `\"5fa3b9\"`ã€‚\n\n> ç¤¾åŒºä¸­å…³äº `DefinePlugin` ä½¿ç”¨å¾—æœ€å¤šçš„æ–¹å¼æ˜¯å®šä¹‰ç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚ `PRODUCTION = true` æˆ–è€… `__DEV__ = true` ç­‰ã€‚éƒ¨åˆ†ç±»åº“åœ¨å¼€å‘ç¯å¢ƒæ—¶ä¾èµ–è¿™æ ·çš„ç¯å¢ƒå˜é‡æ¥ç»™äºˆå¼€å‘è€…æ›´å¤šçš„å¼€å‘è°ƒè¯•åé¦ˆï¼Œä¾‹å¦‚ react ç­‰ã€‚\n\n- å»ºè®®ä½¿ç”¨ `process.env.NODE_ENV`: ... çš„æ–¹å¼æ¥å®šä¹‰ `process.env.NODE_ENV`ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ `process: {env: { NODE_ENV: ...} }` çš„æ–¹å¼ï¼Œå› ä¸ºè¿™æ ·ä¼šè¦†ç›–æ‰ `process` è¿™ä¸ªå¯¹è±¡ï¼Œå¯èƒ½ä¼šå¯¹å…¶ä»–ä»£ç é€ æˆå½±å“...\n\n#### copy-webpack-plugin\n\n> æˆ‘ä»¬ä¸€èˆ¬ä¼šæŠŠå¼€å‘çš„æ‰€æœ‰æºç å’Œèµ„æºæ–‡ä»¶æ”¾åœ¨ `src/` ç›®å½•ä¸‹ï¼Œæ„å»ºçš„æ—¶å€™äº§å‡ºä¸€ä¸ª `build/` ç›®å½•ï¼Œé€šå¸¸ä¼šç›´æ¥æ‹¿ `build` ä¸­çš„æ‰€æœ‰æ–‡ä»¶æ¥å‘å¸ƒã€‚æœ‰äº›æ–‡ä»¶æ²¡ç»è¿‡ `webpack` å¤„ç†ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›å®ƒä»¬ä¹Ÿèƒ½å‡ºç°åœ¨ `build` ç›®å½•ä¸‹ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨ `CopyWebpackPlugin` æ¥å¤„ç†äº†...\n\n```js\nconst CopyWebpackPlugin = require('copy-webpack-plugin');\n\nmodule.exports = {\n  // ...\n  plugins: [\n    new CopyWebpackPlugin([\n      { from: 'src/file.txt', to: 'build/file.txt' }, // é¡¾åæ€ä¹‰ï¼Œfrom é…ç½®æ¥æºï¼Œto é…ç½®ç›®æ ‡è·¯å¾„\n      { from: 'src/*.ico', to: 'build/*.ico' } // é…ç½®é¡¹å¯ä»¥ä½¿ç”¨ glob\n      // å¯ä»¥é…ç½®å¾ˆå¤šé¡¹å¤åˆ¶è§„åˆ™\n    ])\n  ]\n};\n```\n\n#### extract-text-webpack-plugin\n\n> æˆ‘ä»¬ç”¨å®ƒæ¥æŠŠä¾èµ–çš„ `CSS` åˆ†ç¦»å‡ºæ¥æˆä¸ºå•ç‹¬çš„æ–‡ä»¶ã€‚è¿™é‡Œå†çœ‹ä¸€ä¸‹ä½¿ç”¨ `extract-text-webpack-plugin` çš„é…ç½®\n\n```js\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\n\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        // å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          use: 'css-loader'\n        })\n      }\n    ]\n  },\n  plugins: [\n    // å¼•å…¥æ’ä»¶ï¼Œé…ç½®æ–‡ä»¶åï¼Œè¿™é‡ŒåŒæ ·å¯ä»¥ä½¿ç”¨ [hash]\n    new ExtractTextPlugin('index.css')\n  ]\n};\n```\n\n> åœ¨ä¸Šè¿°çš„é…ç½®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† `index.css` ä½œä¸ºå•ç‹¬åˆ†ç¦»å‡ºæ¥çš„æ–‡ä»¶åï¼Œä½†æœ‰çš„æ—¶å€™æ„å»ºå…¥å£ä¸æ­¢ä¸€ä¸ªï¼Œ`extract-text-webpack-plugin` ä¼šä¸ºæ¯ä¸€ä¸ªå…¥å£åˆ›å»ºå•ç‹¬åˆ†ç¦»çš„æ–‡ä»¶ï¼Œå› æ­¤æœ€å¥½è¿™æ ·é…ç½®\n\n```js\n// è¿™æ ·ç¡®ä¿åœ¨ä½¿ç”¨å¤šä¸ªæ„å»ºå…¥å£æ—¶ï¼Œç”Ÿæˆä¸åŒåç§°çš„æ–‡ä»¶\nplugins: [\n  new ExtractTextPlugin('[name].css'),\n],\n```\n\n### æ›´å¥½ä½¿ç”¨ webpack-dev-server\n\n> `webpack-dev-server` æ˜¯ `webpack` å®˜æ–¹æä¾›çš„ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥åŸºäºå½“å‰çš„ `webpack` æ„å»ºé…ç½®å¿«é€Ÿå¯åŠ¨ä¸€ä¸ªé™æ€æœåŠ¡ã€‚å½“ `mode` ä¸º `development` æ—¶ï¼Œä¼šå…·å¤‡ `hot reload` çš„åŠŸèƒ½ï¼Œå³å½“æºç æ–‡ä»¶å˜åŒ–æ—¶ï¼Œä¼šå³æ—¶æ›´æ–°å½“å‰é¡µé¢ï¼Œä»¥ä¾¿ä½ çœ‹åˆ°æœ€æ–°çš„æ•ˆæœ...\n\n#### åŸºç¡€ä½¿ç”¨\n\n> `webpack-dev-server` æ˜¯ä¸€ä¸ª `npm package`ï¼Œå®‰è£…ååœ¨å·²ç»æœ‰ `webpack` é…ç½®æ–‡ä»¶çš„é¡¹ç›®ç›®å½•ä¸‹ç›´æ¥å¯åŠ¨å°±å¯ä»¥\n\n- `webpack-dev-server` é»˜è®¤ä½¿ç”¨ `8080` ç«¯å£\n\n```bash\nnpm install webpack-dev-server -g\nwebpack-dev-server --mode development\n```\n\n> `package` ä¸­çš„ `scripts` é…ç½®ï¼š\n\n```js\n{\n  // ...\n  \"scripts\": {\n    \"start\": \"webpack-dev-server --mode development\"\n  }\n}\n```\n\n#### é…ç½®\n\n> åœ¨ webpack çš„é…ç½®ä¸­ï¼Œå¯ä»¥é€šè¿‡ `devServer` å­—æ®µæ¥é…ç½® `webpack-dev-server`ï¼Œå¦‚ç«¯å£è®¾ç½®ã€å¯åŠ¨ `gzip` å‹ç¼©ç­‰ï¼Œè¿™é‡Œç®€å•è®²è§£å‡ ä¸ªå¸¸ç”¨çš„é…ç½®\n\n- `public` å­—æ®µç”¨äºæŒ‡å®šé™æ€æœåŠ¡çš„åŸŸåï¼Œé»˜è®¤æ˜¯ `http://localhost:8080/` ï¼Œå½“ä½ ä½¿ç”¨ `Nginx` æ¥åšåå‘ä»£ç†æ—¶ï¼Œåº”è¯¥å°±éœ€è¦ä½¿ç”¨è¯¥é…ç½®æ¥æŒ‡å®š `Nginx` é…ç½®ä½¿ç”¨çš„æœåŠ¡åŸŸå\n- `port` å­—æ®µç”¨äºæŒ‡å®šé™æ€æœåŠ¡çš„ç«¯å£ï¼Œå¦‚ä¸Šï¼Œé»˜è®¤æ˜¯ `8080`ï¼Œé€šå¸¸æƒ…å†µä¸‹éƒ½ä¸éœ€è¦æ”¹åŠ¨\n- `publicPath` å­—æ®µç”¨äºæŒ‡å®šæ„å»ºå¥½çš„é™æ€æ–‡ä»¶åœ¨æµè§ˆå™¨ä¸­ç”¨ä»€ä¹ˆè·¯å¾„å»è®¿é—®ï¼Œé»˜è®¤æ˜¯ `/`ï¼Œä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªæ„å»ºå¥½çš„æ–‡ä»¶ `bundle.js`ï¼Œå®Œæ•´çš„è®¿é—®è·¯å¾„æ˜¯ `http://localhost:8080/bundle.js`ï¼Œå¦‚æœä½ é…ç½®äº† `publicPath: 'assets/'`ï¼Œé‚£ä¹ˆä¸Šè¿° `bundle.js` çš„å®Œæ•´è®¿é—®è·¯å¾„å°±æ˜¯ `http://localhost:8080/assets/bundle.js`ã€‚å¯ä»¥ä½¿ç”¨æ•´ä¸ª `URL` æ¥ä½œä¸º `publicPath` çš„å€¼ï¼Œå¦‚ `publicPath: 'http://localhost:8080/assets/'`ã€‚å¦‚æœä½ ä½¿ç”¨äº† `HMR`ï¼Œé‚£ä¹ˆè¦è®¾ç½® `publicPath` å°±å¿…é¡»ä½¿ç”¨å®Œæ•´çš„ `URL`\n\n> å»ºè®®å°† `devServer.publicPath` å’Œ `output.publicPath` çš„å€¼ä¿æŒä¸€è‡´\n\n- `proxy` ç”¨äºé…ç½® `webpack-dev-server` å°†ç‰¹å®š `URL` çš„è¯·æ±‚ä»£ç†åˆ°å¦å¤–ä¸€å°æœåŠ¡å™¨ä¸Šã€‚å½“ä½ æœ‰å•ç‹¬çš„åç«¯å¼€å‘æœåŠ¡å™¨ç”¨äºè¯·æ±‚ API æ—¶ï¼Œè¿™ä¸ªé…ç½®ç›¸å½“æœ‰ç”¨ã€‚ä¾‹å¦‚\n\n```js\nproxy: {\n  '/api': {\n    target: \"http://localhost:3000\", // å°† URL ä¸­å¸¦æœ‰ /api çš„è¯·æ±‚ä»£ç†åˆ°æœ¬åœ°çš„ 3000 ç«¯å£çš„æœåŠ¡ä¸Š\n    pathRewrite: {'^/api': ''}, // æŠŠ URL ä¸­ path éƒ¨åˆ†çš„ `api` ç§»é™¤æ‰\n  },\n}\n```\n\n- `before` å’Œ `after` é…ç½®ç”¨äºåœ¨ `webpack-dev-server` å®šä¹‰é¢å¤–çš„ä¸­é—´ä»¶ï¼Œå¦‚\n\n```js\nbefore(app){\n  app.get('/some/path', function(req, res) { // å½“è®¿é—® /some/path è·¯å¾„æ—¶ï¼Œè¿”å›è‡ªå®šä¹‰çš„ json æ•°æ®\n    res.json({custom: 'response'})\n  })\n}\n```\n\n- `before` åœ¨ `webpack-dev-server` é™æ€èµ„æºä¸­é—´ä»¶å¤„ç†ä¹‹å‰ï¼Œå¯ä»¥ç”¨äºæ‹¦æˆªéƒ¨åˆ†è¯·æ±‚è¿”å›ç‰¹å®šå†…å®¹ï¼Œæˆ–è€…å®ç°ç®€å•çš„æ•°æ® `mock`ã€‚\n- `after` åœ¨ `webpack-dev-server` é™æ€èµ„æºä¸­é—´ä»¶å¤„ç†ä¹‹åï¼Œæ¯”è¾ƒå°‘ç”¨åˆ°ï¼Œå¯ä»¥ç”¨äºæ‰“å°æ—¥å¿—æˆ–è€…åšä¸€äº›é¢å¤–å¤„ç†...\n\n### å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„æ„å»ºé…ç½®å·®å¼‚\n\n- æˆ‘ä»¬åœ¨æ—¥å¸¸çš„å‰ç«¯å¼€å‘å·¥ä½œä¸­ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰ä¸¤å¥—æ„å»ºç¯å¢ƒï¼šä¸€å¥—å¼€å‘æ—¶ä½¿ç”¨ï¼Œæ„å»ºç»“æœç”¨äºæœ¬åœ°å¼€å‘è°ƒè¯•ï¼Œä¸è¿›è¡Œä»£ç å‹ç¼©ï¼Œæ‰“å° `debug` ä¿¡æ¯ï¼ŒåŒ…å« `sourcemap` æ–‡ä»¶\n- å¦å¤–ä¸€å¥—æ„å»ºåçš„ç»“æœæ˜¯ç›´æ¥åº”ç”¨äºçº¿ä¸Šçš„ï¼Œå³ä»£ç éƒ½æ˜¯å‹ç¼©åï¼Œè¿è¡Œæ—¶ä¸æ‰“å° `debug` ä¿¡æ¯ï¼Œé™æ€æ–‡ä»¶ä¸åŒ…æ‹¬ `sourcemap` çš„ã€‚æœ‰çš„æ—¶å€™å¯èƒ½è¿˜éœ€è¦å¤šä¸€å¥—æµ‹è¯•ç¯å¢ƒï¼Œåœ¨è¿è¡Œæ—¶ç›´æ¥è¿›è¡Œè¯·æ±‚ `mock` ç­‰å·¥ä½œ\n- `webpack 4.x` ç‰ˆæœ¬å¼•å…¥äº† `mode` çš„æ¦‚å¿µï¼Œåœ¨è¿è¡Œ `webpack` æ—¶éœ€è¦æŒ‡å®šä½¿ç”¨ `production` æˆ– `development` ä¸¤ä¸ª `mode` å…¶ä¸­ä¸€ä¸ªï¼Œè¿™ä¸ªåŠŸèƒ½ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„è¿è¡Œä¸¤å¥—æ„å»ºç¯å¢ƒçš„èƒ½åŠ›ã€‚\n\n#### åœ¨é…ç½®æ–‡ä»¶ä¸­åŒºåˆ† mode\n\n> ä¹‹å‰æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶éƒ½æ˜¯ç›´æ¥å¯¹å¤–æš´éœ²ä¸€ä¸ª `JS` å¯¹è±¡ï¼Œè¿™ç§æ–¹å¼æš‚æ—¶æ²¡æœ‰åŠæ³•è·å–åˆ° `webpack` çš„ `mode` å‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ¢ä¸€ç§æ–¹å¼æ¥å¤„ç†é…ç½®ã€‚æ ¹æ®å®˜æ–¹çš„æ–‡æ¡£å¤šç§é…ç½®ç±»å‹ï¼Œé…ç½®æ–‡ä»¶å¯ä»¥å¯¹å¤–æš´éœ²ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¿™æ ·åš\n\n```js\nmodule.exports = (env, argv) => ({\n  // ... å…¶ä»–é…ç½®\n  optimization: {\n    minimize: false,\n    // ä½¿ç”¨ argv æ¥è·å– mode å‚æ•°çš„å€¼\n    minimizer:\n      argv.mode === 'production'\n        ? [\n            new UglifyJsPlugin({\n              /* ä½ è‡ªå·±çš„é…ç½® */\n            })\n            // ä»…åœ¨æˆ‘ä»¬è¦è‡ªå®šä¹‰å‹ç¼©é…ç½®æ—¶æ‰éœ€è¦è¿™ä¹ˆåš\n            // mode ä¸º production æ—¶ webpack ä¼šé»˜è®¤ä½¿ç”¨å‹ç¼© JS çš„ plugin\n          ]\n        : []\n  }\n});\n```\n\n> è¿™æ ·è·å– `mode` ä¹‹åï¼Œæˆ‘ä»¬å°±èƒ½å¤ŸåŒºåˆ†ä¸åŒçš„æ„å»ºç¯å¢ƒï¼Œç„¶åæ ¹æ®ä¸åŒç¯å¢ƒå†å¯¹ç‰¹æ®Šçš„ `loader` æˆ– `plugin` åšé¢å¤–çš„é…ç½®å°±å¯ä»¥äº†\n\n- ä»¥ä¸Šæ˜¯ `webpack 4.x` çš„åšæ³•ï¼Œç”±äºæœ‰äº† `mode` å‚æ•°ï¼ŒåŒºåˆ†ç¯å¢ƒå˜å¾—ç®€å•äº†ã€‚ä¸è¿‡åœ¨å½“å‰ä¸šç•Œï¼Œä¼°è®¡è¿˜æ˜¯ä½¿ç”¨ `webpack 3.x` ç‰ˆæœ¬çš„å±…å¤šï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿç®€å•ä»‹ç»ä¸€ä¸‹ `3.x` å¦‚ä½•åŒºåˆ†ç¯å¢ƒ\n\n> `webpack` çš„è¿è¡Œæ—¶ç¯å¢ƒæ˜¯ `Node.js`ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ `Node.js` æä¾›çš„æœºåˆ¶ç»™è¦è¿è¡Œçš„ `webpack` ç¨‹åºä¼ é€’ç¯å¢ƒå˜é‡ï¼Œæ¥æ§åˆ¶ä¸åŒç¯å¢ƒä¸‹çš„æ„å»ºè¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨ `npm` ä¸­çš„ `scripts` å­—æ®µæ·»åŠ ä¸€ä¸ªç”¨äºç”Ÿäº§ç¯å¢ƒçš„æ„å»ºå‘½ä»¤...\n\n```js\n{\n  \"scripts\": {\n    \"build\": \"NODE_ENV=production webpack\",\n    \"develop\": \"NODE_ENV=development webpack-dev-server\"\n  }\n}\n```\n\n> ç„¶ååœ¨ `webpack.config.js` æ–‡ä»¶ä¸­å¯ä»¥é€šè¿‡ `process.env.NODE_ENV` æ¥è·å–å‘½ä»¤ä¼ å…¥çš„ç¯å¢ƒå˜é‡\n\n```js\nconst config = {\n  // ... webpack é…ç½®\n};\n\nif (process.env.NODE_ENV === 'production') {\n  // ç”Ÿäº§ç¯å¢ƒéœ€è¦åšçš„äº‹æƒ…ï¼Œå¦‚ä½¿ç”¨ä»£ç å‹ç¼©æ’ä»¶ç­‰\n  config.plugins.push(new UglifyJsPlugin());\n}\n\nmodule.exports = config;\n```\n\n#### è¿è¡Œæ—¶çš„ç¯å¢ƒå˜é‡\n\n> æˆ‘ä»¬ä½¿ç”¨ webpack æ—¶ä¼ é€’çš„ mode å‚æ•°ï¼Œæ˜¯å¯ä»¥åœ¨æˆ‘ä»¬çš„åº”ç”¨ä»£ç è¿è¡Œæ—¶ï¼Œé€šè¿‡ `process.env.NODE_ENV` è¿™ä¸ªå˜é‡è·å–çš„ã€‚è¿™æ ·æ–¹ä¾¿æˆ‘ä»¬åœ¨è¿è¡Œæ—¶åˆ¤æ–­å½“å‰æ‰§è¡Œçš„æ„å»ºç¯å¢ƒï¼Œä½¿ç”¨æœ€å¤šçš„åœºæ™¯è«è¿‡äºæ§åˆ¶æ˜¯å¦æ‰“å° `debug` ä¿¡æ¯...\n\n- ä¸‹é¢è¿™ä¸ªç®€å•çš„ä¾‹å­ï¼Œåœ¨åº”ç”¨å¼€å‘çš„ä»£ç ä¸­å®ç°ä¸€ä¸ªç®€å•çš„ `console` æ‰“å°å°è£…\n\n```js\nexport default function log(...args) {\n  if (process.env.NODE_ENV === 'development' && console && console.log) {\n    console.log.apply(console, args);\n  }\n}\n```\n\n> åŒæ ·ï¼Œä»¥ä¸Šæ˜¯ `webpack 4.x` çš„åšæ³•ï¼Œä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹ `3.x` ç‰ˆæœ¬åº”è¯¥å¦‚ä½•å®ç°ã€‚è¿™é‡Œéœ€è¦ç”¨åˆ° `DefinePlugin` æ’ä»¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨æ„å»ºæ—¶ç»™è¿è¡Œæ—¶å®šä¹‰å˜é‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªè¦åœ¨å‰é¢ `webpack 3.x` ç‰ˆæœ¬åŒºåˆ†æ„å»ºç¯å¢ƒçš„ä¾‹å­çš„åŸºç¡€ä¸Šï¼Œå†ä½¿ç”¨ `DefinePlugin` æ·»åŠ ç¯å¢ƒå˜é‡å³å¯å½±å“åˆ°è¿è¡Œæ—¶çš„ä»£ç ...\n\n```js\nmodule.exports = {\n  // ...\n  // webpack çš„é…ç½®\n\n  plugins: [\n    new webpack.DefinePlugin({\n      // webpack 3.x çš„ process.env.NODE_ENV æ˜¯é€šè¿‡æ‰‹åŠ¨åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®š NODE_ENV=... çš„æ–¹å¼æ¥ä¼ é€’çš„\n      'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV)\n    })\n  ]\n};\n```\n\n#### å¸¸è§çš„ç¯å¢ƒå·®å¼‚é…ç½®\n\n**å¸¸è§çš„ webpack æ„å»ºå·®å¼‚é…ç½®**\n\n- ç”Ÿäº§ç¯å¢ƒå¯èƒ½éœ€è¦åˆ†ç¦» `CSS` æˆå•ç‹¬çš„æ–‡ä»¶ï¼Œä»¥ä¾¿å¤šä¸ªé¡µé¢å…±äº«åŒä¸€ä¸ª `CSS` æ–‡ä»¶\n- ç”Ÿäº§ç¯å¢ƒéœ€è¦å‹ç¼© `HTML/CSS/JS` ä»£ç \n- ç”Ÿäº§ç¯å¢ƒéœ€è¦å‹ç¼©å›¾ç‰‡\n- å¼€å‘ç¯å¢ƒéœ€è¦ç”Ÿæˆ `sourcemap` æ–‡ä»¶\n- å¼€å‘ç¯å¢ƒéœ€è¦æ‰“å° `debug` ä¿¡æ¯\n- å¼€å‘ç¯å¢ƒéœ€è¦ `live reload` æˆ–è€… `hot reload` çš„åŠŸèƒ½...\n\n> `webpack 4.x` çš„ `mode` å·²ç»æä¾›äº†ä¸Šè¿°å·®å¼‚é…ç½®çš„å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œ`mode` ä¸º `production` æ—¶é»˜è®¤ä½¿ç”¨ `JS` ä»£ç å‹ç¼©ï¼Œè€Œ `mode` ä¸º `development` æ—¶é»˜è®¤å¯ç”¨ `hot` `reload`ï¼Œç­‰ç­‰ã€‚è¿™æ ·è®©æˆ‘ä»¬çš„é…ç½®æ›´ä¸ºç®€æ´ï¼Œæˆ‘ä»¬åªéœ€è¦é’ˆå¯¹ç‰¹åˆ«ä½¿ç”¨çš„ `loader` å’Œ `plugin` åšåŒºåˆ†é…ç½®å°±å¯ä»¥äº†...\n\n- `webpack 3.x` ç‰ˆæœ¬è¿˜æ˜¯åªèƒ½è‡ªå·±åŠ¨æ‰‹ä¿®æ”¹é…ç½®æ¥æ»¡è¶³å¤§éƒ¨åˆ†ç¯å¢ƒå·®å¼‚éœ€æ±‚ï¼Œæ‰€ä»¥å¦‚æœä½ è¦å¼€å§‹ä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨ `webpack 4.x` ç‰ˆæœ¬\n\n#### æ‹†åˆ†é…ç½®\n\n> å‰é¢æˆ‘ä»¬åˆ—å‡ºäº†å‡ ä¸ªç¯å¢ƒå·®å¼‚é…ç½®ï¼Œå¯èƒ½è¿™äº›æ„å»ºéœ€æ±‚å°±å·²ç»æœ‰ç‚¹å¤šäº†ï¼Œä¼šè®©æ•´ä¸ª `webpack` çš„é…ç½®å˜å¾—å¤æ‚ï¼Œå°¤å…¶æ˜¯æœ‰ç€å¤§é‡ç¯å¢ƒå˜é‡åˆ¤æ–­çš„é…ç½®ã€‚æˆ‘ä»¬å¯ä»¥æŠŠ `webpack` çš„é…ç½®æŒ‰ç…§ä¸åŒçš„ç¯å¢ƒæ‹†åˆ†æˆå¤šä¸ªæ–‡ä»¶ï¼Œè¿è¡Œæ—¶ç›´æ¥æ ¹æ®ç¯å¢ƒå˜é‡åŠ è½½å¯¹åº”çš„é…ç½®å³å¯ã€‚åŸºæœ¬çš„åˆ’åˆ†å¦‚ä¸‹...\n\n- `webpack.base.js`ï¼šåŸºç¡€éƒ¨åˆ†ï¼Œå³å¤šä¸ªæ–‡ä»¶ä¸­å…±äº«çš„é…ç½®\n- `webpack.development.js`ï¼šå¼€å‘ç¯å¢ƒä½¿ç”¨çš„é…ç½®\n- `webpack.production.js`ï¼šç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„é…ç½®\n- `webpack.test.js`ï¼šæµ‹è¯•ç¯å¢ƒä½¿ç”¨çš„é…ç½®...\n\n**å¦‚ä½•å¤„ç†è¿™æ ·çš„é…ç½®æ‹†åˆ†**\n\n> é¦–å…ˆæˆ‘ä»¬è¦æ˜ç™½ï¼Œå¯¹äº `webpack` çš„é…ç½®ï¼Œå…¶å®æ˜¯å¯¹å¤–æš´éœ²ä¸€ä¸ª `JS` å¯¹è±¡ï¼Œæ‰€ä»¥å¯¹äºè¿™ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç”¨ `JS` ä»£ç æ¥ä¿®æ”¹å®ƒï¼Œä¾‹å¦‚\n\n```js\nconst config = {\n  // ... webpack é…ç½®\n};\n\n// æˆ‘ä»¬å¯ä»¥ä¿®æ”¹è¿™ä¸ª config æ¥è°ƒæ•´é…ç½®ï¼Œä¾‹å¦‚æ·»åŠ ä¸€ä¸ªæ–°çš„æ’ä»¶\nconfig.plugins.push(new YourPlugin());\n\nmodule.exports = config;\n```\n\n> å› æ­¤ï¼Œåªè¦æœ‰ä¸€ä¸ªå·¥å…·èƒ½æ¯”è¾ƒæ™ºèƒ½åœ°åˆå¹¶å¤šä¸ªé…ç½®å¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆè½»æ¾åœ°æ‹†åˆ† webpack é…ç½®ï¼Œç„¶åé€šè¿‡åˆ¤æ–­ç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨å·¥å…·å°†å¯¹åº”ç¯å¢ƒçš„å¤šä¸ªé…ç½®å¯¹è±¡æ•´åˆåæä¾›ç»™ webpack ä½¿ç”¨ã€‚è¿™ä¸ªå·¥å…·å°±æ˜¯ **[webpack-merge](https://github.com/survivejs/webpack-merge)**\n\n- æˆ‘ä»¬çš„ webpack é…ç½®åŸºç¡€éƒ¨åˆ†ï¼Œå³ `webpack.base.js` åº”è¯¥å¤§è‡´æ˜¯è¿™æ ·çš„\n\n```js\nmodule.exports = {\n  entry: '...',\n  output: {\n    // ...\n  },\n  resolve: {\n    // ...\n  },\n  module: {\n    // è¿™é‡Œæ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œåé¢ä»‹ç» API æ—¶ä¼šç”¨åˆ°\n    rules: [\n      {\n        test: /\\.js$/,\n        use: ['babel']\n      }\n    ]\n    // ...\n  },\n  plugins: [\n    // ...\n  ]\n};\n```\n\n> ç„¶å `webpack.development.js` éœ€è¦æ·»åŠ  `loader` æˆ– `plugin`ï¼Œå°±å¯ä»¥ä½¿ç”¨ `webpack-merge` çš„ `API`ï¼Œä¾‹å¦‚\n\n```js\nconst {smart} = require('webpack-merge')\nconst webpack = require('webpack')\nconst base = require('./webpack.base.js')\n\nmodule.exports = smart(base, {\n  module: {\n    rules: [\n      // ç”¨ smart APIï¼Œå½“è¿™é‡Œçš„åŒ¹é…è§„åˆ™ç›¸åŒä¸” use å€¼éƒ½æ˜¯æ•°ç»„æ—¶ï¼Œsmart ä¼šè¯†åˆ«åå¤„ç†\n      // å’Œä¸Šè¿° base é…ç½®åˆå¹¶åï¼Œè¿™é‡Œä¼šæ˜¯ {test: /\\.js$/, use: ['babel', 'coffee'] }\n      // å¦‚æœè¿™é‡Œ use çš„å€¼ç”¨çš„æ˜¯å­—ç¬¦ä¸²æˆ–è€…å¯¹è±¡çš„è¯ï¼Œé‚£ä¹ˆä¼šæ›¿æ¢æ‰åŸæœ¬çš„è§„åˆ™ use çš„å€¼\n      {\n        test: /\\.js$/,\n        use: ['coffee'],\n      },\n      // ...\n    ],\n  },\n  plugins: [\n    // plugins è¿™é‡Œçš„æ•°ç»„ä¼šå’Œ base ä¸­çš„ plugins æ•°ç»„è¿›è¡Œåˆå¹¶\n    new webpack.DefinePlugin({\n      'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV),\n    }),\n  ],\n})ï¼›\n```\n\n> å¯è§ `webpack-merge` æä¾›çš„ `smart` æ–¹æ³•ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´åŠ è½»æ¾åœ°å¤„ç† `loader` é…ç½®çš„åˆå¹¶ã€‚`webpack-merge` è¿˜æœ‰å…¶ä»– `API` å¯ä»¥ç”¨äºè‡ªå®šä¹‰åˆå¹¶è¡Œä¸º\n\n#### å®Œæ•´ä»£ç \n\n> `webpack.config.js`\n\n```js\nmodule.exports = function(env, argv) {\n  return argv.mode === 'production'\n    ? require('./configs/webpack.production')\n    : require('./configs/webpack.development');\n};\n```\n\n> `configs/webpack.base.js`\n\n```js\nconst path = require('path');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\n\nmodule.exports = {\n  entry: './src/index.js',\n\n  output: {\n    path: path.resolve(__dirname, '../dist'),\n    filename: '[name].js'\n  },\n\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?/,\n        include: [path.resolve(__dirname, '../src')],\n        use: 'babel-loader'\n      },\n      {\n        test: /\\.(png|jpg|gif)$/,\n        use: [\n          {\n            loader: 'file-loader'\n          }\n        ]\n      }\n    ]\n  },\n\n  plugins: [\n    new HtmlWebpackPlugin({\n      filename: 'index.html', // é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„\n      template: 'src/index.html' // é…ç½®æ–‡ä»¶æ¨¡æ¿\n    })\n  ]\n};\n```\n\n> `configs/webpack.development.js`\n\n```js\nconst webpack = require('webpack');\nconst merge = require('webpack-merge');\nconst baseConfig = require('./webpack.base');\n\nconst config = merge.smart(baseConfig, {\n  module: {\n    rules: [\n      {\n        enforce: 'pre',\n        test: /\\.jsx?$/,\n        exclude: /node_modules/,\n        loader: 'eslint-loader'\n      },\n      {\n        test: /\\.less$/,\n        use: ['style-loader', 'css-loader', 'less-loader']\n      }\n    ]\n  },\n\n  devServer: {\n    port: '1234',\n    before(app) {\n      app.get('/api/test.json', function(req, res) {\n        res.json({ code: 200, message: 'hello world' });\n      });\n    }\n  }\n});\n\nconfig.plugins.push(\n  new webpack.DefinePlugin({\n    __DEV__: JSON.stringify(true)\n  })\n);\n\nmodule.exports = config;\n```\n\n> `configs/webpack.production.js`\n\n```js\nconst merge = require('webpack-merge');\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\nconst baseConfig = require('./webpack.base');\n\nconst config = merge.smart(baseConfig, {\n  module: {\n    rules: [\n      {\n        test: /\\.less$/,\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          use: [\n            {\n              loader: 'css-loader',\n              options: {\n                minimize: true\n              }\n            },\n            'less-loader'\n          ]\n        })\n      }\n    ]\n  }\n});\n\nconfig.plugins.push(new ExtractTextPlugin('[name].css'));\n\nmodule.exports = config;\n```\n\n### æ¨¡å—çƒ­æ›¿æ¢æé«˜å¼€å‘æ•ˆç‡\n\n> `HMR` å…¨ç§°æ˜¯ `Hot Module Replacement`ï¼Œå³æ¨¡å—çƒ­æ›¿æ¢ã€‚åœ¨è¿™ä¸ªæ¦‚å¿µå‡ºæ¥ä¹‹å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿‡ `Hot Reloading`ï¼Œå½“ä»£ç å˜æ›´æ—¶é€šçŸ¥æµè§ˆå™¨åˆ·æ–°é¡µé¢ï¼Œä»¥é¿å…é¢‘ç¹æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨é¡µé¢ã€‚HMR å¯ä»¥ç†è§£ä¸ºå¢å¼ºç‰ˆçš„ `Hot Reloading`ï¼Œä½†ä¸ç”¨æ•´ä¸ªé¡µé¢åˆ·æ–°ï¼Œè€Œæ˜¯å±€éƒ¨æ›¿æ¢æ‰éƒ¨åˆ†æ¨¡å—ä»£ç å¹¶ä¸”ä½¿å…¶ç”Ÿæ•ˆï¼Œå¯ä»¥çœ‹åˆ°ä»£ç å˜æ›´åçš„æ•ˆæœã€‚æ‰€ä»¥ï¼Œ`HMR` æ—¢é¿å…äº†é¢‘ç¹æ‰‹åŠ¨åˆ·æ–°é¡µé¢ï¼Œä¹Ÿå‡å°‘äº†é¡µé¢åˆ·æ–°æ—¶çš„ç­‰å¾…ï¼Œå¯ä»¥æå¤§åœ°æé«˜å‰ç«¯é¡µé¢å¼€å‘æ•ˆç‡...\n\n#### é…ç½®ä½¿ç”¨ HMR\n\n> `HMR` æ˜¯ `webpack` æä¾›çš„éå¸¸æœ‰ç”¨çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œè·Ÿæˆ‘ä»¬ä¹‹å‰æåˆ°çš„ä¸€æ ·ï¼Œå®‰è£…å¥½ `webpack-dev-server`ï¼Œ æ·»åŠ ä¸€äº›ç®€å•çš„é…ç½®ï¼Œå³åœ¨ `webpack` çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¯ç”¨ `HMR` éœ€è¦çš„ä¸¤ä¸ªæ’ä»¶\n\n```js\nconst webpack = require('webpack');\n\nmodule.exports = {\n  // ...\n  devServer: {\n    hot: true // dev server çš„é…ç½®è¦å¯åŠ¨ hotï¼Œæˆ–è€…åœ¨å‘½ä»¤è¡Œä¸­å¸¦å‚æ•°å¼€å¯\n  },\n  plugins: [\n    // ...\n    new webpack.NamedModulesPlugin(), // ç”¨äºå¯åŠ¨ HMR æ—¶å¯ä»¥æ˜¾ç¤ºæ¨¡å—çš„ç›¸å¯¹è·¯å¾„\n    new webpack.HotModuleReplacementPlugin() // Hot Module Replacement çš„æ’ä»¶\n  ]\n};\n```\n\n#### module.hot å¸¸è§çš„ API\n\n> å‰é¢ `HMR` å®ç°éƒ¨åˆ†å·²ç»è®²è§£äº†å®ç° HMR æ¥å£çš„é‡è¦æ€§ï¼Œä¸‹é¢æ¥çœ‹çœ‹å¸¸è§çš„ `module.hot` `API` æœ‰å“ªäº›ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨\n\n- `module.hot.accept` æ–¹æ³•æŒ‡å®šåœ¨åº”ç”¨ç‰¹å®šä»£ç æ¨¡å—æ›´æ–°æ—¶æ‰§è¡Œç›¸åº”çš„ `callback`ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–è€…æ•°ç»„ï¼Œå¦‚\n\n```js\nif (module.hot) {\n  module.hot.accept(['./bar.js', './index.css'], () => {\n    // ... è¿™æ ·å½“ bar.js æˆ–è€… index.css æ›´æ–°æ—¶éƒ½ä¼šæ‰§è¡Œè¯¥å‡½æ•°\n  });\n}\n```\n\n- `module.hot.decline` å¯¹äºæŒ‡å®šçš„ä»£ç æ¨¡å—ï¼Œæ‹’ç»è¿›è¡Œæ¨¡å—ä»£ç çš„æ›´æ–°ï¼Œè¿›å…¥æ›´æ–°å¤±è´¥çŠ¶æ€ï¼Œå¦‚ `module.hot.decline('./bar.js')`ã€‚è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒå°‘ç”¨åˆ°\n- `module.hot.dispose` ç”¨äºæ·»åŠ ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œåœ¨å½“å‰æ¨¡å—ä»£ç è¢«æ›¿æ¢æ—¶è¿è¡Œè¯¥å‡½æ•°ï¼Œä¾‹å¦‚\n\n```js\nif (module.hot) {\n  module.hot.dispose(data => {\n    // data ç”¨äºä¼ é€’æ•°æ®ï¼Œå¦‚æœæœ‰éœ€è¦ä¼ é€’çš„æ•°æ®å¯ä»¥æŒ‚åœ¨ data å¯¹è±¡ä¸Šï¼Œç„¶ååœ¨æ¨¡å—ä»£ç æ›´æ–°åå¯ä»¥é€šè¿‡ module.hot.data æ¥è·å–\n  });\n}\n```\n\n- `module.hot.accept` é€šå¸¸ç”¨äºæŒ‡å®šå½“å‰ä¾èµ–çš„æŸä¸ªæ¨¡å—æ›´æ–°æ—¶éœ€è¦åšçš„å¤„ç†ï¼Œå¦‚æœæ˜¯å½“å‰æ¨¡å—æ›´æ–°æ—¶éœ€è¦å¤„ç†çš„åŠ¨ä½œï¼Œä½¿ç”¨ `module.hot.dispose` ä¼šæ›´åŠ å®¹æ˜“æ–¹ä¾¿\n- `module.hot.removeDisposeHandler` ç”¨äºç§»é™¤ `dispose` æ–¹æ³•æ·»åŠ çš„ `callback`\n\n### å›¾ç‰‡åŠ è½½ä¼˜åŒ–\n\n#### CSS Sprites\n\n- å¦‚æœä½ ä½¿ç”¨çš„ `webpack 3.x` ç‰ˆæœ¬ï¼Œéœ€è¦ `CSS Sprites` çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ `webpack-spritesmith` æˆ–è€… `sprite-webpack-plugin`ã€‚\n- æˆ‘ä»¬ä»¥ `webpack-spritesmith` ä¸ºä¾‹ï¼Œå…ˆå®‰è£…ä¾èµ–...\n\n```js\nmodule: {\n  loaders: [\n    // ... è¿™é‡Œéœ€è¦æœ‰å¤„ç†å›¾ç‰‡çš„ loaderï¼Œå¦‚ file-loader\n  ]\n},\nresolve: {\n  modules: [\n    'node_modules',\n    'spritesmith-generated', // webpack-spritesmith ç”Ÿæˆæ‰€éœ€æ–‡ä»¶çš„ç›®å½•\n  ],\n},\nplugins: [\n  new SpritesmithPlugin({\n    src: {\n      cwd: path.resolve(__dirname, 'src/ico'), // å¤šä¸ªå›¾ç‰‡æ‰€åœ¨çš„ç›®å½•\n      glob: '*.png' // åŒ¹é…å›¾ç‰‡çš„è·¯å¾„\n    },\n    target: {\n      // ç”Ÿæˆæœ€ç»ˆå›¾ç‰‡çš„è·¯å¾„\n      image: path.resolve(__dirname, 'src/spritesmith-generated/sprite.png'),\n      // ç”Ÿæˆæ‰€éœ€ SASS/LESS/Stylus mixins ä»£ç ï¼Œæˆ‘ä»¬ä½¿ç”¨ Stylus é¢„å¤„ç†å™¨åšä¾‹å­\n      css: path.resolve(__dirname, 'src/spritesmith-generated/sprite.styl'),\n    },\n    apiOptions: {\n      cssImageRef: \"~sprite.png\"\n    },\n  }),\n],\n```\n\n> åœ¨ä½ éœ€è¦çš„æ ·å¼ä»£ç ä¸­å¼•å…¥ `sprite.styl` åè°ƒç”¨éœ€è¦çš„ `mixins` å³å¯\n\n```plain\n@import '~sprite.styl'\n\n.close-button\n    sprite($close)\n.open-button\n    sprite($open)\n```\n\n> å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ `webpack 4.x`ï¼Œä½ éœ€è¦é…åˆä½¿ç”¨ `postcss` å’Œ `postcss-sprites`ï¼Œæ‰èƒ½å®ç° `CSS Sprites` çš„ç›¸å…³æ„å»º\n\n#### å›¾ç‰‡å‹ç¼©\n\n- åœ¨ä¸€èˆ¬çš„é¡¹ç›®ä¸­ï¼Œå›¾ç‰‡èµ„æºä¼šå å‰ç«¯èµ„æºçš„å¾ˆå¤§ä¸€éƒ¨åˆ†ï¼Œæ—¢ç„¶ä»£ç éƒ½è¿›è¡Œå‹ç¼©äº†ï¼Œå å¤§å¤´çš„å›¾ç‰‡å°±æ›´ä¸ç”¨è¯´äº†\n- æˆ‘ä»¬ä¹‹å‰æåŠä½¿ç”¨ `file-loader` æ¥å¤„ç†å›¾ç‰‡æ–‡ä»¶ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å†æ·»åŠ ä¸€ä¸ª `image-webpack-loader` æ¥å‹ç¼©å›¾ç‰‡æ–‡ä»¶ã€‚ç®€å•çš„é…ç½®å¦‚ä¸‹...\n\n```js\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /.*\\.(gif|png|jpe?g|svg|webp)$/i,\n        use: [\n          {\n            loader: 'file-loader',\n            options: {}\n          },\n          {\n            loader: 'image-webpack-loader',\n            options: {\n              mozjpeg: { // å‹ç¼© jpeg çš„é…ç½®\n                progressive: true,\n                quality: 65\n              },\n              optipng: { // ä½¿ç”¨ imagemin-optipng å‹ç¼© pngï¼Œenable: false ä¸ºå…³é—­\n                enabled: false,\n              },\n              pngquant: { // ä½¿ç”¨ imagemin-pngquant å‹ç¼© png\n                quality: '65-90',\n                speed: 4\n              },\n              gifsicle: { // å‹ç¼© gif çš„é…ç½®\n                interlaced: false,\n              },\n              webp: { // å¼€å¯ webpï¼Œä¼šæŠŠ jpg å’Œ png å›¾ç‰‡å‹ç¼©ä¸º webp æ ¼å¼\n                quality: 75\n              },\n          },\n        ],\n      },\n    ],\n  },\n};\n```\n\n#### ä½¿ç”¨ DataURL\n\n> æœ‰çš„æ—¶å€™æˆ‘ä»¬çš„é¡¹ç›®ä¸­ä¼šæœ‰ä¸€äº›å¾ˆå°çš„å›¾ç‰‡ï¼Œå› ä¸ºæŸäº›ç¼˜æ•…å¹¶ä¸æƒ³ä½¿ç”¨ `CSS Sprites` çš„æ–¹å¼æ¥å¤„ç†ï¼ˆè­¬å¦‚å°å›¾ç‰‡ä¸å¤šï¼Œå› æ­¤å¼•å…¥ CSS Sprites æ„Ÿè§‰éº»çƒ¦ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨ webpack ä¸­ä½¿ç”¨ `url-loader` æ¥å¤„ç†è¿™äº›å¾ˆå°çš„å›¾ç‰‡...\n\n- `url-loader` å’Œ `file-loader` çš„åŠŸèƒ½ç±»ä¼¼ï¼Œä½†æ˜¯åœ¨å¤„ç†æ–‡ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡é…ç½®æŒ‡å®šä¸€ä¸ªå¤§å°ï¼Œå½“æ–‡ä»¶å°äºè¿™ä¸ªé…ç½®å€¼æ—¶ï¼Œ`url-loader` ä¼šå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª `base64` ç¼–ç çš„ `DataURL`ï¼Œé…ç½®å¦‚ä¸‹\n\n```js\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\.(png|jpg|gif)$/,\n        use: [\n          {\n            loader: 'url-loader',\n            options: {\n              limit: 8192 // å•ä½æ˜¯ Byteï¼Œå½“æ–‡ä»¶å°äº 8KB æ—¶ä½œä¸º DataURL å¤„ç†\n            }\n          }\n        ]\n      }\n    ]\n  }\n};\n```\n\n#### ä»£ç å‹ç¼©\n\n- `webpack 4.x` ç‰ˆæœ¬è¿è¡Œæ—¶ï¼Œ`mode` ä¸º `production` å³ä¼šå¯åŠ¨å‹ç¼© `JS` ä»£ç çš„æ’ä»¶ï¼Œè€Œå¯¹äº `webpack` `3.x`ï¼Œä½¿ç”¨å‹ç¼© `JS` ä»£ç æ’ä»¶çš„æ–¹å¼ä¹Ÿå·²ç»ä»‹ç»è¿‡äº†ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå‹ç¼© `JS` ä»£ç åŸºæœ¬æ˜¯ä¸€ä¸ªå¿…ä¸å¯å°‘çš„æ­¥éª¤ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å° `JavaScript` çš„ä½“ç§¯ï¼Œç›¸å…³å†…å®¹è¿™é‡Œä¸å†èµ˜è¿°ã€‚\n- é™¤äº† JS ä»£ç ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¸€èˆ¬è¿˜éœ€è¦ HTML å’Œ CSS æ–‡ä»¶ï¼Œè¿™ä¸¤ç§æ–‡ä»¶ä¹Ÿéƒ½æ˜¯å¯ä»¥å‹ç¼©çš„ï¼Œè™½ç„¶ä¸åƒ JS çš„å‹ç¼©é‚£ä¹ˆå½»åº•ï¼ˆæ›¿æ¢æ‰é•¿å˜é‡ç­‰ï¼‰ï¼Œåªèƒ½ç§»é™¤ç©ºæ ¼æ¢è¡Œç­‰æ— ç”¨å­—ç¬¦ï¼Œä½†ä¹Ÿèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°æ–‡ä»¶å¤§å°ã€‚åœ¨ webpack ä¸­çš„é…ç½®ä½¿ç”¨ä¹Ÿä¸æ˜¯ç‰¹åˆ«éº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¹Ÿä¼šä½¿ç”¨ã€‚\n- å¯¹äº HTML æ–‡ä»¶ï¼Œä¹‹å‰ä»‹ç»çš„ `html-webpack-plugin` æ’ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆéœ€è¦çš„ HTML å¹¶å¯¹å…¶è¿›è¡Œå‹ç¼©...\n\n```js\nmodule.exports = {\n  // ...\n  plugins: [\n    new HtmlWebpackPlugin({\n      filename: 'index.html', // é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„\n      template: 'assets/index.html', // é…ç½®æ–‡ä»¶æ¨¡æ¿\n      minify: {\n        // å‹ç¼© HTML çš„é…ç½®\n        minifyCSS: true, // å‹ç¼© HTML ä¸­å‡ºç°çš„ CSS ä»£ç \n        minifyJS: true // å‹ç¼© HTML ä¸­å‡ºç°çš„ JS ä»£ç \n      }\n    })\n  ]\n};\n```\n\n- å¦‚ä¸Šï¼Œä½¿ç”¨ `minify` å­—æ®µé…ç½®å°±å¯ä»¥ä½¿ç”¨ `HTML` å‹ç¼©ï¼Œè¿™ä¸ªæ’ä»¶æ˜¯ä½¿ç”¨ `html-minifier` æ¥å®ç° `HTML` ä»£ç å‹ç¼©çš„ï¼Œ`minify` ä¸‹çš„é…ç½®é¡¹ç›´æ¥é€ä¼ ç»™ `html-minifier`ï¼Œé…ç½®é¡¹å‚è€ƒ `html-minifier` æ–‡æ¡£å³å¯ã€‚\n- å¯¹äº CSS æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¹‹å‰ä»‹ç»è¿‡ç”¨æ¥å¤„ç† CSS æ–‡ä»¶çš„ `css-loader`ï¼Œä¹Ÿæä¾›äº†å‹ç¼© CSS ä»£ç çš„åŠŸèƒ½ï¼š\n\n```js\nmodule.exports = {\n  module: {\n    rules: [\n      // ...\n      {\n        test: /\\.css/,\n        include: [path.resolve(__dirname, 'src')],\n        use: [\n          'style-loader',\n          {\n            loader: 'css-loader',\n            options: {\n              minimize: true // ä½¿ç”¨ css çš„å‹ç¼©åŠŸèƒ½\n            }\n          }\n        ]\n      }\n    ]\n  }\n};\n```\n\n> åœ¨ `css-loader` çš„é€‰é¡¹ä¸­é…ç½® `minimize` å­—æ®µä¸º `true` æ¥ä½¿ç”¨ `CSS` å‹ç¼©ä»£ç çš„åŠŸèƒ½ã€‚`css-loader` æ˜¯ä½¿ç”¨ `cssnano` æ¥å‹ç¼©ä»£ç çš„ï¼Œ`minimize` å­—æ®µä¹Ÿå¯ä»¥é…ç½®ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œæ¥å°†ç›¸å…³é…ç½®ä¼ é€’ç»™ `cssnano`\n\n### åˆ†ç¦»ä»£ç æ–‡ä»¶\n\n- å…³äºåˆ†ç¦» CSS æ–‡ä»¶è¿™ä¸ªä¸»é¢˜ï¼Œä¹‹å‰åœ¨ä»‹ç»å¦‚ä½•æ­å»ºåŸºæœ¬çš„å‰ç«¯å¼€å‘ç¯å¢ƒæ—¶æœ‰æåŠï¼Œåœ¨ `webpack` ä¸­ä½¿ç”¨ `extract-text-webpack-plugin` æ’ä»¶å³å¯ã€‚\n- å…ˆç®€å•è§£é‡Šä¸€ä¸‹ä¸ºä½•è¦æŠŠ CSS æ–‡ä»¶åˆ†ç¦»å‡ºæ¥ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¸€èµ·æ‰“åŒ…åœ¨ JS ä¸­ã€‚æœ€ä¸»è¦çš„åŸå› æ˜¯æˆ‘ä»¬å¸Œæœ›æ›´å¥½åœ°åˆ©ç”¨ç¼“å­˜ã€‚\n- å‡è®¾æˆ‘ä»¬åŸæœ¬é¡µé¢çš„é™æ€èµ„æºéƒ½æ‰“åŒ…æˆä¸€ä¸ª JS æ–‡ä»¶ï¼ŒåŠ è½½é¡µé¢æ—¶è™½ç„¶åªéœ€è¦åŠ è½½ä¸€ä¸ª JS æ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ä»£ç ä¸€æ—¦æ”¹å˜äº†ï¼Œç”¨æˆ·è®¿é—®æ–°çš„é¡µé¢æ—¶å°±éœ€è¦é‡æ–°åŠ è½½ä¸€ä¸ªæ–°çš„ JS æ–‡ä»¶ã€‚æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªæ˜¯å•ç‹¬ä¿®æ”¹äº†æ ·å¼ï¼Œè¿™æ ·ä¹Ÿè¦é‡æ–°åŠ è½½æ•´ä¸ªåº”ç”¨çš„ JS æ–‡ä»¶ï¼Œç›¸å½“ä¸åˆ’ç®—ã€‚\n- è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯æˆ‘ä»¬æœ‰å¤šä¸ªé¡µé¢ï¼Œå®ƒä»¬éƒ½å¯ä»¥å…±ç”¨ä¸€éƒ¨åˆ†æ ·å¼ï¼ˆè¿™æ˜¯å¾ˆå¸¸è§çš„ï¼ŒCSS Resetã€åŸºç¡€ç»„ä»¶æ ·å¼ç­‰åŸºæœ¬éƒ½æ˜¯è·¨é¡µé¢é€šç”¨ï¼‰ï¼Œå¦‚æœæ¯ä¸ªé¡µé¢éƒ½å•ç‹¬æ‰“åŒ…ä¸€ä¸ª JS æ–‡ä»¶ï¼Œé‚£ä¹ˆæ¯æ¬¡è®¿é—®é¡µé¢éƒ½ä¼šé‡å¤åŠ è½½åŸæœ¬å¯ä»¥å…±äº«çš„é‚£äº› CSS ä»£ç ã€‚å¦‚æœåˆ†ç¦»å¼€æ¥ï¼Œç¬¬äºŒä¸ªé¡µé¢å°±æœ‰äº† CSS æ–‡ä»¶çš„ç¼“å­˜ï¼Œè®¿é—®é€Ÿåº¦è‡ªç„¶ä¼šåŠ å¿«ã€‚è™½ç„¶å¯¹ç¬¬ä¸€ä¸ªé¡µé¢æ¥è¯´å¤šäº†ä¸€ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯å¯¹éšåçš„é¡µé¢æ¥è¯´ï¼Œç¼“å­˜å¸¦æ¥çš„é€Ÿåº¦æå‡ç›¸å¯¹æ›´åŠ å¯è§‚\n\n> `3.x` ä»¥å‰çš„ç‰ˆæœ¬æ˜¯ä½¿ç”¨ `CommonsChunkPlugin` æ¥åšä»£ç åˆ†ç¦»çš„ï¼Œè€Œ `webpack 4.x` åˆ™æ˜¯æŠŠç›¸å…³çš„åŠŸèƒ½åŒ…åˆ°äº† `optimize.splitChunks` ä¸­ï¼Œç›´æ¥ä½¿ç”¨è¯¥é…ç½®å°±å¯ä»¥å®ç°ä»£ç åˆ†ç¦»ã€‚\n\n#### webpack 4.x çš„ optimization\n\n```js\nmodule.exports = {\n  // ... webpack é…ç½®\n\n  optimization: {\n    splitChunks: {\n      chunks: 'all' // æ‰€æœ‰çš„ chunks ä»£ç å…¬å…±çš„éƒ¨åˆ†åˆ†ç¦»å‡ºæ¥æˆä¸ºä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶\n    }\n  }\n};\n```\n\n> æˆ‘ä»¬éœ€è¦åœ¨ HTML ä¸­å¼•ç”¨ä¸¤ä¸ªæ„å»ºå‡ºæ¥çš„ JS æ–‡ä»¶ï¼Œå¹¶ä¸” `commons.js` éœ€è¦åœ¨å…¥å£ä»£ç ä¹‹å‰ã€‚ä¸‹é¢æ˜¯ä¸ªç®€å•çš„ä¾‹å­\n\n```html\n<script src=\"commons.js\" charset=\"utf-8\"></script>\n<script src=\"entry.bundle.js\" charset=\"utf-8\"></script>\n```\n\n> å¦‚æœä½ ä½¿ç”¨äº† `html-webpack-plugin`ï¼Œé‚£ä¹ˆå¯¹åº”éœ€è¦çš„ JS æ–‡ä»¶éƒ½ä¼šåœ¨ HTML æ–‡ä»¶ä¸­æ­£ç¡®å¼•ç”¨ï¼Œä¸ç”¨æ‹…å¿ƒã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨ï¼Œé‚£ä¹ˆä½ éœ€è¦ä» `stats` çš„ `entrypoints` å±æ€§æ¥è·å–å…¥å£åº”è¯¥å¼•ç”¨å“ªäº› JS æ–‡ä»¶ï¼Œå¯ä»¥å‚è€ƒ Node API äº†è§£å¦‚ä½•ä» stats ä¸­è·å–ä¿¡æ¯\n\n**æ˜¾å¼é…ç½®å…±äº«ç±»åº“å¯ä»¥è¿™ä¹ˆæ“ä½œ**\n\n```js\nmodule.exports = {\n  entry: {\n    vendor: [\"react\", \"lodash\", \"angular\", ...], // æŒ‡å®šå…¬å…±ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹ç±»åº“\n  },\n  optimization: {\n    splitChunks: {\n      cacheGroups: {\n        vendor: {\n          chunks: \"initial\",\n          test: \"vendor\",\n          name: \"vendor\", // ä½¿ç”¨ vendor å…¥å£ä½œä¸ºå…¬å…±éƒ¨åˆ†\n          enforce: true,\n        },\n      },\n    },\n  },\n  // ... å…¶ä»–é…ç½®\n}\n\n// æˆ–è€…\nmodule.exports = {\n  optimization: {\n    splitChunks: {\n      cacheGroups: {\n        vendor: {\n          test: /react|angluar|lodash/, // ç›´æ¥ä½¿ç”¨ test æ¥åšè·¯å¾„åŒ¹é…\n          chunks: \"initial\",\n          name: \"vendor\",\n          enforce: true,\n        },\n      },\n    },\n  },\n}\n\n// æˆ–è€…\nmodule.exports = {\n  optimization: {\n    splitChunks: {\n      cacheGroups: {\n        vendor: {\n          chunks: \"initial\",\n          test: path.resolve(__dirname, \"node_modules\") // è·¯å¾„åœ¨ node_modules ç›®å½•ä¸‹çš„éƒ½ä½œä¸ºå…¬å…±éƒ¨åˆ†\n          name: \"vendor\", // ä½¿ç”¨ vendor å…¥å£ä½œä¸ºå…¬å…±éƒ¨åˆ†\n          enforce: true,\n        },\n      },\n    },\n  },\n}\n```\n\n> ä¸Šè¿°ç¬¬ä¸€ç§åšæ³•æ˜¯æ˜¾ç¤ºæŒ‡å®šå“ªäº›ç±»åº“ä½œä¸ºå…¬å…±éƒ¨åˆ†ï¼Œç¬¬äºŒç§åšæ³•å®ç°çš„åŠŸèƒ½å·®ä¸å¤šï¼Œåªæ˜¯åˆ©ç”¨äº† test æ¥åšæ¨¡å—è·¯å¾„çš„åŒ¹é…ï¼Œç¬¬ä¸‰ç§åšæ³•æ˜¯æŠŠæ‰€æœ‰åœ¨ node_modules ä¸‹çš„æ¨¡å—ï¼Œå³ä½œä¸ºä¾èµ–å®‰è£…çš„ï¼Œéƒ½ä½œä¸ºå…¬å…±éƒ¨åˆ†ã€‚ä½ å¯ä»¥é’ˆå¯¹é¡¹ç›®æƒ…å†µï¼Œé€‰æ‹©æœ€åˆé€‚çš„åšæ³•\n\n#### webpack 3.x çš„ CommonsChunkPlugin\n\n> `webpack 3.x` ä»¥ä¸‹çš„ç‰ˆæœ¬éœ€è¦ç”¨åˆ° webpack è‡ªèº«æä¾›çš„ `CommonsChunkPlugin` æ’ä»¶ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­\n\n```js\nmodule.exports = {\n  // ...\n  plugins: [\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'commons', // å…¬å…±ä½¿ç”¨çš„ chunk çš„åç§°\n      filename: 'commons.js', // å…¬å…± chunk çš„ç”Ÿæˆæ–‡ä»¶å\n      minChunks: 3 // å…¬å…±çš„éƒ¨åˆ†å¿…é¡»è¢« 3 ä¸ª chunk å…±äº«\n    })\n  ]\n};\n```\n\n- `chunk` åœ¨è¿™é‡Œæ˜¯æ„å»ºçš„ä¸»å¹²ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ä¸ªå…¥å£å¯¹åº”ä¸€ä¸ª `chunk`ã€‚\n- ä»¥ä¸Šæ’ä»¶é…ç½®åœ¨æ„å»ºåä¼šç”Ÿæˆä¸€ä¸ª `commons.js` æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å°±æ˜¯ä»£ç ä¸­çš„å…¬å…±éƒ¨åˆ†ã€‚ä¸Šé¢çš„é…ç½®ä¸­ `minChunks` å­—æ®µä¸º 3ï¼Œè¯¥å­—æ®µçš„æ„æ€æ˜¯å½“ä¸€ä¸ªæ¨¡å—è¢« 3 ä¸ªä»¥ä¸Šçš„ `chunk` ä¾èµ–æ—¶ï¼Œè¿™ä¸ªæ¨¡å—å°±ä¼šè¢«åˆ’åˆ†åˆ° `commons chunk` ä¸­å»ã€‚å•ä»è¿™ä¸ªé…ç½®çš„è§’åº¦ä¸Šè®²ï¼Œè¿™ç§æ–¹å¼å¹¶æ²¡æœ‰ `4.x` çš„ `chunks: \"all\"` é‚£ä¹ˆæ–¹ä¾¿ã€‚\n\n**CommonsChunkPlugin ä¹Ÿæ˜¯æ”¯æŒæ˜¾å¼é…ç½®å…±äº«ç±»åº“çš„**\n\n```js\nmodule.exports = {\n  entry: {\n    vendor: ['react', 'react-redux'], // æŒ‡å®šå…¬å…±ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹ç±»åº“\n    app: './src/entry',\n    // ...\n  },\n  // ...\n  plugins: [\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'vendor' // ä½¿ç”¨ vendor å…¥å£ä½œä¸ºå…¬å…±éƒ¨åˆ†\n      filename: \"vendor.js\",\n      minChunks: Infinity, // è¿™ä¸ªé…ç½®ä¼šè®© webpack ä¸å†è‡ªåŠ¨æŠ½ç¦»å…¬å…±æ¨¡å—\n    }),\n  ],\n}\n```\n\n> ä¸Šè¿°é…ç½®ä¼šç”Ÿæˆä¸€ä¸ªåä¸º `vendor.js` çš„å…±äº«ä»£ç æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº† `React` å’Œ `React-Redux` åº“çš„ä»£ç ï¼Œå¯ä»¥æä¾›ç»™å¤šä¸ªä¸åŒçš„å…¥å£ä»£ç ä½¿ç”¨ã€‚è¿™é‡Œçš„ `minChunks` å­—æ®µçš„é…ç½®ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† `Infinity`ï¼Œå¯ä»¥ç†è§£ä¸º `webpack` ä¸è‡ªåŠ¨æŠ½ç¦»å…¬å…±æ¨¡å—ã€‚å¦‚æœè¿™é‡Œå’Œä¹‹å‰ä¸€æ ·ä¾æ—§è®¾ç½®ä¸º 3ï¼Œé‚£ä¹ˆè¢« 3 ä¸ªä»¥ä¸Šçš„ `chunk` ä¾èµ–çš„æ¨¡å—ä¼šå’Œ `React`ã€`React-Redux` ä¸€åŒæ‰“åŒ…è¿› `vendor`ï¼Œè¿™æ ·å°±å¤±å»æ˜¾å¼æŒ‡å®šçš„æ„ä¹‰äº†ã€‚\n\n> `minChunks` å…¶å®è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚ï¼š\n\n```js\nminChunks: (module, count) => {\n  console.log(module, count);\n  return true;\n},\n```\n\n> è¯¥å‡½æ•°åœ¨åˆ†ææ¯ä¸€ä¸ªä¾èµ–çš„æ—¶å€™ä¼šè¢«è°ƒç”¨ï¼Œä¼ å…¥å½“å‰ä¾èµ–æ¨¡å—çš„ä¿¡æ¯ `module`ï¼Œä»¥åŠå·²ç»è¢«ä½œä¸ºå…¬å…±æ¨¡å—çš„æ•°é‡ `count`ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°ä¸­é’ˆå¯¹æ¯ä¸€ä¸ªæ¨¡å—åšæ›´åŠ ç²¾ç»†åŒ–çš„æ§åˆ¶ã€‚çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\n\n```js\nminChunks: (module, count) => {\n  return module.context && module.context.includes(\"node_modules\");\n  // node_modules ç›®å½•ä¸‹çš„æ¨¡å—éƒ½ä½œä¸ºå…¬å…±éƒ¨åˆ†ï¼Œæ•ˆæœå°±å¦‚åŒ webpack 4.x ä¸­çš„ test: path.resolve(__dirname, \"node_modules\")\n},\n```\n\n- æ›´å¤šä½¿ç”¨ `CommonsChunkPlugin` çš„é…ç½®å‚è€ƒå®˜æ–¹æ–‡æ¡£ `commons-chunk-plugin`ã€‚\n\n### è¿›ä¸€æ­¥æ§åˆ¶ JS å¤§å°\n\n#### æŒ‰éœ€åŠ è½½æ¨¡å—\n\n> åœ¨ webpack çš„æ„å»ºç¯å¢ƒä¸­ï¼Œè¦æŒ‰éœ€åŠ è½½ä»£ç æ¨¡å—å¾ˆç®€å•ï¼Œéµå¾ª ES æ ‡å‡†çš„åŠ¨æ€åŠ è½½è¯­æ³• `dynamic-import` æ¥ç¼–å†™ä»£ç å³å¯ï¼Œ`webpack` ä¼šè‡ªåŠ¨å¤„ç†ä½¿ç”¨è¯¥è¯­æ³•ç¼–å†™çš„æ¨¡å—\n\n```js\n// import ä½œä¸ºä¸€ä¸ªæ–¹æ³•ä½¿ç”¨ï¼Œä¼ å…¥æ¨¡å—åå³å¯ï¼Œè¿”å›ä¸€ä¸ª promise æ¥è·å–æ¨¡å—æš´éœ²çš„å¯¹è±¡\n// æ³¨é‡Š webpackChunkName: \"lodash\" å¯ä»¥ç”¨äºæŒ‡å®š chunk çš„åç§°ï¼Œåœ¨è¾“å‡ºæ–‡ä»¶æ—¶æœ‰ç”¨\nimport(/* webpackChunkName: \"lodash\" */ 'lodash').then((_) => {\n  console.log(_.lash([1, 2, 3])) // æ‰“å° 3\n})\n```\n\n- æ³¨æ„ä¸€ä¸‹ï¼Œå¦‚æœä½ ä½¿ç”¨äº† `Babel` çš„è¯ï¼Œè¿˜éœ€è¦ `Syntax Dynamic Import` è¿™ä¸ª `Babel` æ’ä»¶æ¥å¤„ç† `import()` è¿™ç§è¯­æ³•ã€‚\n- ç”±äºåŠ¨æ€åŠ è½½ä»£ç æ¨¡å—çš„è¯­æ³•ä¾èµ–äº `promise`ï¼Œå¯¹äºä½ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼Œéœ€è¦æ·»åŠ  `promise` çš„ `polyfill` åæ‰èƒ½ä½¿ç”¨ã€‚\n- å¦‚ä¸Šçš„ä»£ç ï¼Œwebpack æ„å»ºæ—¶ä¼šè‡ªåŠ¨æŠŠ `lodash` æ¨¡å—åˆ†ç¦»å‡ºæ¥ï¼Œå¹¶ä¸”åœ¨ä»£ç å†…éƒ¨å®ç°åŠ¨æ€åŠ è½½ `lodash` çš„åŠŸèƒ½ã€‚åŠ¨æ€åŠ è½½ä»£ç æ—¶ä¾èµ–äºç½‘ç»œï¼Œå…¶æ¨¡å—å†…å®¹ä¼šå¼‚æ­¥è¿”å›ï¼Œæ‰€ä»¥ import æ–¹æ³•æ˜¯è¿”å›ä¸€ä¸ª `promise` æ¥è·å–åŠ¨æ€åŠ è½½çš„æ¨¡å—å†…å®¹ã€‚\n- `import` åé¢çš„æ³¨é‡Š `webpackChunkName: \"lodash\"` ç”¨äºå‘ŠçŸ¥ `webpack` æ‰€è¦åŠ¨æ€åŠ è½½æ¨¡å—çš„åç§°ã€‚æˆ‘ä»¬åœ¨ webpack é…ç½®ä¸­æ·»åŠ ä¸€ä¸ª `output.chunkFilename` çš„é…ç½®...\n\n```js\noutput: {\n  path: path.resolve(__dirname, 'dist'),\n  filename: '[name].[hash:8].js',\n  chunkFilename: '[name].[hash:8].js' // æŒ‡å®šåˆ†ç¦»å‡ºæ¥çš„ä»£ç æ–‡ä»¶çš„åç§°\n},\n```\n\n> è¿™æ ·å°±å¯ä»¥æŠŠåˆ†ç¦»å‡ºæ¥çš„æ–‡ä»¶åç§°ç”¨ lodash æ ‡è¯†äº†ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![image.png](https://upload-images.jianshu.io/upload_images/1480597-ae36b6816feed422.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n> å¦‚æœæ²¡æœ‰æ·»åŠ æ³¨é‡Š `webpackChunkName: \"lodash\" ä»¥åŠ output.chunkFilename` é…ç½®ï¼Œé‚£ä¹ˆåˆ†ç¦»å‡ºæ¥çš„æ–‡ä»¶åç§°ä¼šä»¥ç®€å•æ•°å­—çš„æ–¹å¼æ ‡è¯†ï¼Œä¸ä¾¿äºè¯†åˆ«\n\n#### ä»¥ä¸Šå®Œæ•´ç¤ºä¾‹ä»£ç \n\n```js\nconst path = require('path');\nconst webpack = require('webpack');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\n\nmodule.exports = {\n  entry: './src/index.js',\n\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: '[name].js'\n  },\n\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?/,\n        include: [path.resolve(__dirname, 'src')],\n        use: 'babel-loader'\n      },\n      {\n        test: /\\.less$/,\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          use: ['css-loader', 'postcss-loader', 'less-loader']\n        })\n      },\n      {\n        test: /\\.(png|jpg|gif)$/,\n        use: [\n          {\n            loader: 'url-loader',\n            options: {\n              limit: 8192\n            }\n          },\n          {\n            loader: 'image-webpack-loader',\n            options: {\n              mozjpeg: {\n                // å‹ç¼© jpeg çš„é…ç½®\n                progressive: true,\n                quality: 65\n              },\n              optipng: {\n                // ä½¿ç”¨ imagemin-optipng å‹ç¼© pngï¼Œenable: false ä¸ºå…³é—­\n                enabled: false\n              },\n              pngquant: {\n                // ä½¿ç”¨ imagemin-pngquant å‹ç¼© png\n                quality: '65-90',\n                speed: 4\n              },\n              gifsicle: {\n                // å‹ç¼© gif çš„é…ç½®\n                interlaced: false\n              },\n              webp: {\n                // å¼€å¯ webpï¼Œä¼šæŠŠ jpg å’Œ png å›¾ç‰‡å‹ç¼©ä¸º webp æ ¼å¼\n                quality: 75\n              }\n            }\n          }\n        ]\n      }\n    ]\n  },\n\n  optimization: {\n    splitChunks: {\n      cacheGroups: {\n        vendor: {\n          chunks: 'initial',\n          test: path.resolve(__dirname, 'node_modules'), // è·¯å¾„åœ¨ node_modules ç›®å½•ä¸‹çš„éƒ½ä½œä¸ºå…¬å…±éƒ¨åˆ†\n          name: 'vendor', // ä½¿ç”¨ vendor å…¥å£ä½œä¸ºå…¬å…±éƒ¨åˆ†\n          enforce: true\n        }\n      }\n    }\n  },\n\n  plugins: [\n    new HtmlWebpackPlugin({\n      filename: 'index.html', // é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„\n      template: 'src/index.html', // é…ç½®æ–‡ä»¶æ¨¡æ¿\n      minify: {\n        // å‹ç¼© HTML çš„é…ç½®\n        minifyCSS: true, // å‹ç¼© HTML ä¸­å‡ºç°çš„ CSS ä»£ç \n        minifyJS: true, // å‹ç¼© HTML ä¸­å‡ºç°çš„ JS ä»£ç \n        removeComments: true\n      }\n    }),\n    new ExtractTextPlugin('[name].css'),\n    new webpack.NamedModulesPlugin(),\n    new webpack.HotModuleReplacementPlugin()\n  ],\n\n  devServer: {\n    hot: true\n  }\n};\n```\n","source":"_posts/webpack4-å®šåˆ¶å‰ç«¯å¼€å‘ç¯å¢ƒ.md","raw":"---\ntitle: Webpack 4 å®šåˆ¶å‰ç«¯å¼€å‘ç¯å¢ƒ\ncomments: true\ndate: 2018-09-11 22:16:37\ntags:\nfrom:\n---\n\næœ¬æ–‡æ€»ç»“äº† Webpack 4 çš„ä¸€äº›é…ç½®ç‚¹ï¼Œå¸Œæœ›é€šè¿‡å­¦ä¹ è¿™äº›é…ç½®ç‚¹ï¼Œé™ä½ä½¿ç”¨é—¨æ§›ã€‚çºµè§‚å‰ç«¯çš„æ‰“åŒ…å†å²ï¼Œä¼¼ä¹æ˜¯æ¬ äº†å¤ªå¤šå€ºï¼Œæœ‰å¾ˆå¤šå†å²åŒ…è¢±ï¼Œæ‰€ä»¥å·¥ç¨‹åŒ–è¿™ä¸€å—ä¸€ç›´æ˜¯ä¸€å¤§ç—›ç‚¹ã€‚é…ç½®ç¹çï¼Œå®¹æ˜“å‡ºé”™ï¼Œæœ¬æ–‡æ€»ç»“äº†æœ€æ–°çš„ Webpack 4 åŠŸèƒ½ç‚¹ï¼Œä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹ï¼Œå¯ä»¥ç‚¹å‡»å³ä¾§çš„æ–‡ç« ç›®å½•ç›´è¾¾ã€‚\n\n<!-- more -->\n\n### webpack æ¦‚å¿µå’ŒåŸºç¡€ä½¿ç”¨\n\n#### å®‰è£…å’Œä½¿ç”¨\n\n```bash\n# å®‰è£… webpack\n$ npm install webpack webpack-cli -g\n\n# or\n$ yarn global add webpack webpack-cli\n\n# ç„¶åå°±å¯ä»¥å…¨å±€æ‰§è¡Œå‘½ä»¤äº†\n$ webpack --help\n```\n\n#### webpack çš„åŸºæœ¬æ¦‚å¿µ\n\n> webpack æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ‰“åŒ…å·¥å…·ï¼Œå®ƒä¼šæ ¹æ®ä»£ç çš„å†…å®¹è§£ææ¨¡å—ä¾èµ–ï¼Œå¸®åŠ©æˆ‘ä»¬æŠŠå¤šä¸ªæ¨¡å—çš„ä»£ç æ‰“åŒ…\n\n![image](https://user-images.githubusercontent.com/15377484/59234564-f1cb0600-8c1f-11e9-8bdf-c6041410225a.png)\n\n> webpack ä¼šæŠŠæˆ‘ä»¬é¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„å¤šä¸ªä»£ç æ¨¡å—ï¼ˆå¯ä»¥æ˜¯ä¸åŒæ–‡ä»¶ç±»å‹ï¼‰ï¼Œæ‰“åŒ…æ„å»ºæˆé¡¹ç›®è¿è¡Œä»…éœ€è¦çš„å‡ ä¸ªé™æ€æ–‡ä»¶\n\n**å…¥å£ï¼ˆentryï¼‰**\n\n> å…¥å£å¯ä»¥ä½¿ç”¨ `entry` å­—æ®µæ¥è¿›è¡Œé…ç½®ï¼Œ`webpack` æ”¯æŒé…ç½®å¤šä¸ªå…¥å£æ¥è¿›è¡Œæ„å»º\n\n```js\nmodule.exports = {\n  entry: './src/index.js'\n};\n\n// ä¸Šè¿°é…ç½®ç­‰åŒäº\nmodule.exports = {\n  entry: {\n    main: './src/index.js'\n  }\n};\n\n// æˆ–è€…é…ç½®å¤šä¸ªå…¥å£\nmodule.exports = {\n  entry: {\n    foo: './src/page-foo.js',\n    bar: './src/page-bar.js'\n    // ...\n  }\n};\n\n// ä½¿ç”¨æ•°ç»„æ¥å¯¹å¤šä¸ªæ–‡ä»¶è¿›è¡Œæ‰“åŒ…\nmodule.exports = {\n  entry: {\n    main: ['./src/foo.js', './src/bar.js']\n  }\n};\n```\n\n**è½¬æ¢å™¨ï¼ˆloaderï¼‰**\n\n> å¯ä»¥æŠŠ `loader` ç†è§£ä¸ºæ˜¯ä¸€ä¸ªè½¬æ¢å™¨ï¼Œè´Ÿè´£æŠŠæŸç§æ–‡ä»¶æ ¼å¼çš„å†…å®¹è½¬æ¢æˆ webpack å¯ä»¥æ”¯æŒæ‰“åŒ…çš„æ¨¡å—\n\n- å½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸åŒçš„ `loader` æ¥è§£æå¤„ç†ä¸åŒç±»å‹çš„æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ `module.rules` å­—æ®µä¸‹æ¥é…ç½®ç›¸å…³çš„è§„åˆ™ï¼Œä¾‹å¦‚ä½¿ç”¨ `Babel` æ¥å¤„ç† `.js` æ–‡ä»¶\n\n```js\nmodule: {\n  // ...\n  rules: [\n    {\n      test: /\\.jsx?/, // åŒ¹é…æ–‡ä»¶è·¯å¾„çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œé€šå¸¸æˆ‘ä»¬éƒ½æ˜¯åŒ¹é…æ–‡ä»¶ç±»å‹åç¼€\n      include: [\n        path.resolve(__dirname, 'src') // æŒ‡å®šå“ªäº›è·¯å¾„ä¸‹çš„æ–‡ä»¶éœ€è¦ç»è¿‡ loader å¤„ç†\n      ],\n      use: 'babel-loader', // æŒ‡å®šä½¿ç”¨çš„ loader\n    },\n  ],\n}\n```\n\n**æ’ä»¶ï¼ˆpluginï¼‰**\n\n> æ¨¡å—ä»£ç è½¬æ¢çš„å·¥ä½œç”± `loader` æ¥å¤„ç†ï¼Œé™¤æ­¤ä¹‹å¤–çš„å…¶ä»–ä»»ä½•å·¥ä½œéƒ½å¯ä»¥äº¤ç”± `plugin` æ¥å®Œæˆã€‚é€šè¿‡æ·»åŠ æˆ‘ä»¬éœ€è¦çš„ `plugin`ï¼Œå¯ä»¥æ»¡è¶³æ›´å¤šæ„å»ºä¸­ç‰¹æ®Šçš„éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨å‹ç¼© `JS` ä»£ç çš„ `uglifyjs-webpack-plugin` æ’ä»¶ï¼Œåªéœ€åœ¨é…ç½®ä¸­é€šè¿‡ `plugins` å­—æ®µæ·»åŠ æ–°çš„ `plugin` å³å¯...\n\n```js\nconst UglifyPlugin = require('uglifyjs-webpack-plugin');\n\nmodule.exports = {\n  plugins: [new UglifyPlugin()]\n};\n```\n\n> `plugin` ç†è®ºä¸Šå¯ä»¥å¹²æ¶‰ `webpack` æ•´ä¸ªæ„å»ºæµç¨‹ï¼Œå¯ä»¥åœ¨æµç¨‹çš„æ¯ä¸€ä¸ªæ­¥éª¤ä¸­å®šåˆ¶è‡ªå·±çš„æ„å»ºéœ€æ±‚\n\n**è¾“å‡ºï¼ˆoutputï¼‰**\n\n> æ„å»ºç»“æœçš„æ–‡ä»¶åã€è·¯å¾„ç­‰éƒ½æ˜¯å¯ä»¥é…ç½®çš„ï¼Œä½¿ç”¨ `output` å­—æ®µ\n\n```js\nmodule.exports = {\n  // ...\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: 'bundle.js'\n  }\n};\n\n// æˆ–è€…å¤šä¸ªå…¥å£ç”Ÿæˆä¸åŒæ–‡ä»¶\nmodule.exports = {\n  entry: {\n    foo: './src/foo.js',\n    bar: './src/bar.js'\n  },\n  output: {\n    filename: '[name].js',\n    path: __dirname + '/dist'\n  }\n};\n\n// è·¯å¾„ä¸­ä½¿ç”¨ hashï¼Œæ¯æ¬¡æ„å»ºæ—¶ä¼šæœ‰ä¸€ä¸ªä¸åŒ hash å€¼ï¼Œé¿å…å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶çº¿ä¸Šä½¿ç”¨æµè§ˆå™¨ç¼“å­˜\nmodule.exports = {\n  // ...\n  output: {\n    filename: '[name].js',\n    path: __dirname + '/dist/[hash]'\n  }\n};\n```\n\n> æˆ‘ä»¬ä¸€å¼€å§‹ç›´æ¥ä½¿ç”¨ `webpack` æ„å»ºæ—¶ï¼Œé»˜è®¤åˆ›å»ºçš„è¾“å‡ºå†…å®¹å°±æ˜¯ `./dist/main.js`\n\n**ä¸€ä¸ªç®€å•çš„ webpack é…ç½®**\n\n> æˆ‘ä»¬æŠŠä¸Šè¿°æ¶‰åŠçš„å‡ éƒ¨åˆ†é…ç½®å†…å®¹åˆåˆ°ä¸€èµ·ï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªç®€å•çš„ `webpack` é…ç½®äº†ï¼Œ`webpack` è¿è¡Œæ—¶é»˜è®¤è¯»å–é¡¹ç›®ä¸‹çš„ `webpack.config.js` æ–‡ä»¶ä½œä¸ºé…ç½®ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ª `webpack.config.js` æ–‡ä»¶\n\n```js\nconst path = require('path');\nconst UglifyPlugin = require('uglifyjs-webpack-plugin');\n\nmodule.exports = {\n  entry: './src/index.js',\n\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: 'bundle.js'\n  },\n\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?/,\n        include: [path.resolve(__dirname, 'src')],\n        use: 'babel-loader'\n      }\n    ]\n  },\n\n  // ä»£ç æ¨¡å—è·¯å¾„è§£æçš„é…ç½®\n  resolve: {\n    modules: ['node_modules', path.resolve(__dirname, 'src')],\n\n    extensions: ['.wasm', '.mjs', '.js', '.json', '.jsx']\n  },\n\n  plugins: [\n    new UglifyPlugin()\n    // ä½¿ç”¨ uglifyjs-webpack-plugin æ¥å‹ç¼© JS ä»£ç \n    // å¦‚æœä½ ç•™æ„äº†æˆ‘ä»¬ä¸€å¼€å§‹ç›´æ¥ä½¿ç”¨ webpack æ„å»ºçš„ç»“æœï¼Œä½ ä¼šå‘ç°é»˜è®¤å·²ç»ä½¿ç”¨äº† JS ä»£ç å‹ç¼©çš„æ’ä»¶\n    // è¿™å…¶å®ä¹Ÿæ˜¯æˆ‘ä»¬å‘½ä»¤ä¸­çš„ --mode production çš„æ•ˆæœï¼Œåç»­çš„å°èŠ‚ä¼šä»‹ç» webpack çš„ mode å‚æ•°\n  ]\n};\n```\n\n### æ­å»ºåŸºç¡€çš„å‰ç«¯å¼€å‘ç¯å¢ƒ\n\n#### å…³è” HTML\n\n> `webpack` é»˜è®¤ä»ä½œä¸ºå…¥å£çš„ `.js` æ–‡ä»¶è¿›è¡Œæ„å»ºï¼ˆæ›´å¤šæ˜¯åŸºäº `SPA` å»è€ƒè™‘ï¼‰ï¼Œä½†é€šå¸¸ä¸€ä¸ªå‰ç«¯é¡¹ç›®éƒ½æ˜¯ä»ä¸€ä¸ªé¡µé¢ï¼ˆå³ HTMLï¼‰å‡ºå‘çš„ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼Œåˆ›å»ºä¸€ä¸ª HTML æ–‡ä»¶ï¼Œä½¿ç”¨ `script` æ ‡ç­¾ç›´æ¥å¼•ç”¨æ„å»ºå¥½çš„ JS æ–‡ä»¶ï¼Œå¦‚...\n\n```plain\n<script src=\"./dist/bundle.js\"></script>\n```\n\n- ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„æ–‡ä»¶åæˆ–è€…è·¯å¾„ä¼šå˜åŒ–ï¼Œä¾‹å¦‚ä½¿ç”¨ `[hash]` æ¥è¿›è¡Œå‘½åï¼Œé‚£ä¹ˆæœ€å¥½æ˜¯å°† `HTML` å¼•ç”¨è·¯å¾„å’Œæˆ‘ä»¬çš„æ„å»ºç»“æœå…³è”èµ·æ¥ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `html-webpack-plugin`\n- `html-webpack-plugin` æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ `node package`ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ä¹‹å‰æˆ‘ä»¬éœ€è¦å…ˆå®‰è£…å®ƒï¼ŒæŠŠå®ƒå®‰è£…åˆ°é¡¹ç›®çš„å¼€å‘ä¾èµ–ä¸­\n\n```bash\nnpm install html-webpack-plugin -D\n```\n\n> ç„¶ååœ¨ `webpack` é…ç½®ä¸­ï¼Œå°† `html-webpack-plugin` æ·»åŠ åˆ° `plugins` åˆ—è¡¨ä¸­\n\n```js\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\n\nmodule.exports = {\n  // ...\n  plugins: [new HtmlWebpackPlugin()]\n};\n```\n\n> è¿™æ ·é…ç½®å¥½ä¹‹åï¼Œæ„å»ºæ—¶ `html-webpack-plugin` ä¼šä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª `HTML` æ–‡ä»¶ï¼Œå…¶ä¸­ä¼šå¼•ç”¨æ„å»ºå‡ºæ¥çš„ JS æ–‡ä»¶ã€‚å®é™…é¡¹ç›®ä¸­ï¼Œé»˜è®¤åˆ›å»ºçš„ `HTML` æ–‡ä»¶å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±æ¥å†™ `HTML` æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ `html-webpack-plugin` çš„é…ç½®ï¼Œä¼ é€’ä¸€ä¸ªå†™å¥½çš„ HTML æ¨¡æ¿...\n\n```js\nmodule.exports = {\n  // ...\n  plugins: [\n    new HtmlWebpackPlugin({\n      filename: 'index.html', // é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„\n      template: 'assets/index.html' // é…ç½®æ–‡ä»¶æ¨¡æ¿\n    })\n  ]\n};\n```\n\n> è¿™æ ·ï¼Œé€šè¿‡ `html-webpack-plugin` å°±å¯ä»¥å°†æˆ‘ä»¬çš„é¡µé¢å’Œæ„å»º `JS` å…³è”èµ·æ¥ï¼Œå›å½’æ—¥å¸¸ï¼Œä»é¡µé¢å¼€å§‹å¼€å‘ã€‚å¦‚æœéœ€è¦æ·»åŠ å¤šä¸ªé¡µé¢å…³è”ï¼Œé‚£ä¹ˆå®ä¾‹åŒ–å¤šä¸ª `html-webpack-plugin`ï¼Œ å¹¶å°†å®ƒä»¬éƒ½æ”¾åˆ° `plugins` å­—æ®µæ•°ç»„ä¸­å°±å¯ä»¥äº†...\n\n#### æ„å»º CSS\n\n> æˆ‘ä»¬ç¼–å†™ `CSS`ï¼Œå¹¶ä¸”å¸Œæœ›ä½¿ç”¨ `webpack` æ¥è¿›è¡Œæ„å»ºï¼Œä¸ºæ­¤ï¼Œéœ€è¦åœ¨é…ç½®ä¸­å¼•å…¥ `loader` æ¥è§£æå’Œå¤„ç† `CSS` æ–‡ä»¶\n\n```js\nmodule.exports = {\n  module: {\n    rules: [\n      // ...\n      {\n        test: /\\.css/,\n        include: [path.resolve(__dirname, 'src')],\n        use: ['style-loader', 'css-loader']\n      }\n    ]\n  }\n};\n```\n\n- `css-loader` è´Ÿè´£è§£æ `CSS` ä»£ç ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¤„ç† `CSS` ä¸­çš„ä¾èµ–ï¼Œä¾‹å¦‚ `@import` å’Œ `url()` ç­‰å¼•ç”¨å¤–éƒ¨æ–‡ä»¶çš„å£°æ˜ï¼›\n- `style-loader` ä¼šå°† `css-loader` è§£æçš„ç»“æœè½¬å˜æˆ `JS` ä»£ç ï¼Œè¿è¡Œæ—¶åŠ¨æ€æ’å…¥ `style` æ ‡ç­¾æ¥è®© `CSS` ä»£ç ç”Ÿæ•ˆ...\n\n> ç»ç”±ä¸Šè¿°ä¸¤ä¸ª `loader` çš„å¤„ç†åï¼ŒCSS ä»£ç ä¼šè½¬å˜ä¸º JSï¼Œå’Œ `index.js` ä¸€èµ·æ‰“åŒ…äº†ã€‚å¦‚æœéœ€è¦å•ç‹¬æŠŠ CSS æ–‡ä»¶åˆ†ç¦»å‡ºæ¥ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ `extract-text-webpack-plugin` æ’ä»¶\n\n```js\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\n\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        // å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          use: 'css-loader'\n        })\n      }\n    ]\n  },\n  plugins: [\n    // å¼•å…¥æ’ä»¶ï¼Œé…ç½®æ–‡ä»¶åï¼Œè¿™é‡ŒåŒæ ·å¯ä»¥ä½¿ç”¨ [hash]\n    new ExtractTextPlugin('index.css')\n  ]\n};\n```\n\n#### CSS é¢„å¤„ç†å™¨\n\n> åœ¨ä¸Šè¿°ä½¿ç”¨ CSS çš„åŸºç¡€ä¸Šï¼Œé€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨ `Less/Sass` ç­‰ CSS é¢„å¤„ç†å™¨ï¼Œwebpack å¯ä»¥é€šè¿‡æ·»åŠ å¯¹åº”çš„ `loader` æ¥æ”¯æŒï¼Œä»¥ä½¿ç”¨ `Less` ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æ‰¾åˆ°å¯¹åº”çš„ `loader`\n\n```js\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\.less$/,\n        // å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          use: ['css-loader', 'less-loader']\n        })\n      }\n    ]\n  }\n  // ...\n};\n```\n\n#### å¤„ç†å›¾ç‰‡æ–‡ä»¶\n\n> åœ¨å‰ç«¯é¡¹ç›®çš„æ ·å¼ä¸­æ€»ä¼šä½¿ç”¨åˆ°å›¾ç‰‡ï¼Œè™½ç„¶æˆ‘ä»¬å·²ç»æåˆ° `css-loader` ä¼šè§£ææ ·å¼ä¸­ç”¨ `url()` å¼•ç”¨çš„æ–‡ä»¶è·¯å¾„ï¼Œä½†æ˜¯å›¾ç‰‡å¯¹åº”çš„ `jpg/png/gif` ç­‰æ–‡ä»¶æ ¼å¼ï¼Œ`webpack` å¤„ç†ä¸äº†ã€‚æ˜¯çš„ï¼Œæˆ‘ä»¬åªè¦æ·»åŠ ä¸€ä¸ªå¤„ç†å›¾ç‰‡çš„ `loader` é…ç½®å°±å¯ä»¥äº†ï¼Œç°æœ‰çš„ `file-loader` å°±æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©...\n\n- `file-loader` å¯ä»¥ç”¨äºå¤„ç†å¾ˆå¤šç±»å‹çš„æ–‡ä»¶ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ç›´æ¥è¾“å‡ºæ–‡ä»¶ï¼ŒæŠŠæ„å»ºåçš„æ–‡ä»¶è·¯å¾„è¿”å›ã€‚é…ç½®å¾ˆç®€å•ï¼Œåœ¨ `rules` ä¸­æ·»åŠ ä¸€ä¸ªå­—æ®µï¼Œå¢åŠ å›¾ç‰‡ç±»å‹æ–‡ä»¶çš„è§£æé…ç½®\n\n```js\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\.(png|jpg|gif)$/,\n        use: [\n          {\n            loader: 'file-loader',\n            options: {}\n          }\n        ]\n      }\n    ]\n  }\n};\n```\n\n#### ä½¿ç”¨ Babel\n\n> `Babel` æ˜¯ä¸€ä¸ªè®©æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ `ES` æ–°ç‰¹æ€§çš„ `JS` ç¼–è¯‘å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ `webpack` ä¸­é…ç½® Babelï¼Œä»¥ä¾¿ä½¿ç”¨ `ES6`ã€`ES7` æ ‡å‡†æ¥ç¼–å†™ `JS` ä»£ç \n\n```js\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?/, // æ”¯æŒ js å’Œ jsx\n        include: [\n          path.resolve(__dirname, 'src') // src ç›®å½•ä¸‹çš„æ‰éœ€è¦ç»è¿‡ babel-loader å¤„ç†\n        ],\n        loader: 'babel-loader'\n      }\n    ]\n  }\n};\n```\n\n#### å¯åŠ¨é™æ€æœåŠ¡\n\n> è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†å¤„ç†å¤šç§æ–‡ä»¶ç±»å‹çš„ webpack é…ç½®ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `webpack-dev-server` åœ¨æœ¬åœ°å¼€å¯ä¸€ä¸ªç®€å•çš„é™æ€æœåŠ¡æ¥è¿›è¡Œå¼€å‘\n\n```js\n\"scripts\": {\n  \"build\": \"webpack --mode production\",\n  \"start\": \"webpack-dev-server --mode development\"\n}\n```\n\n> å°è¯•ç€è¿è¡Œ `npm start` æˆ–è€… `yarn start`ï¼Œç„¶åå°±å¯ä»¥è®¿é—® `http://localhost:8080/` æ¥æŸ¥çœ‹ä½ çš„é¡µé¢äº†ã€‚é»˜è®¤æ˜¯è®¿é—® `index.html`ï¼Œå¦‚æœæ˜¯å…¶ä»–é¡µé¢è¦æ³¨æ„è®¿é—®çš„ URL æ˜¯å¦æ­£ç¡®\n\n#### å®Œæ•´ç¤ºä¾‹ä»£ç \n\n```js\nconst path = require('path');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\n\nmodule.exports = {\n  entry: './src/index.js',\n\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: '[name].js'\n  },\n\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?/,\n        include: [path.resolve(__dirname, 'src')],\n        use: 'babel-loader'\n      },\n      {\n        test: /\\.less$/,\n        // å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          use: ['css-loader', 'less-loader']\n        })\n      },\n      {\n        test: /\\.(png|jpg|gif)$/,\n        use: [\n          {\n            loader: 'file-loader'\n          }\n        ]\n      }\n    ]\n  },\n\n  // ä»£ç æ¨¡å—è·¯å¾„è§£æçš„é…ç½®\n  resolve: {\n    modules: ['node_modules', path.resolve(__dirname, 'src')],\n\n    extensions: ['.wasm', '.mjs', '.js', '.json', '.jsx']\n  },\n\n  plugins: [\n    new HtmlWebpackPlugin({\n      filename: 'index.html', // é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„\n      template: 'src/index.html' // é…ç½®æ–‡ä»¶æ¨¡æ¿\n    }),\n    new ExtractTextPlugin('[name].css')\n  ]\n};\n```\n\n### webpack å¦‚ä½•è§£æä»£ç æ¨¡å—è·¯å¾„\n\n> webpack ä¸­æœ‰ä¸€ä¸ªå¾ˆå…³é”®çš„æ¨¡å— `enhanced-resolve` å°±æ˜¯å¤„ç†ä¾èµ–æ¨¡å—è·¯å¾„çš„è§£æçš„ï¼Œè¿™ä¸ªæ¨¡å—å¯ä»¥è¯´æ˜¯ Node.js é‚£ä¸€å¥—æ¨¡å—è·¯å¾„è§£æçš„å¢å¼ºç‰ˆæœ¬ï¼Œæœ‰å¾ˆå¤šå¯ä»¥è‡ªå®šä¹‰çš„è§£æé…ç½®\n\n- åœ¨ webpack é…ç½®ä¸­ï¼Œå’Œæ¨¡å—è·¯å¾„è§£æç›¸å…³çš„é…ç½®éƒ½åœ¨ `resolve` å­—æ®µä¸‹\n\n```js\nmodule.exports = {\n  resolve: {\n    // ...\n  }\n};\n```\n\n#### å¸¸ç”¨çš„ä¸€äº›é…ç½®\n\n**resolve.alias**\n\n> å‡è®¾æˆ‘ä»¬æœ‰ä¸ª `utils` æ¨¡å—æå…¶å¸¸ç”¨ï¼Œç»å¸¸ç¼–å†™ç›¸å¯¹è·¯å¾„å¾ˆéº»çƒ¦ï¼Œå¸Œæœ›å¯ä»¥ç›´æ¥ `import 'utils'` æ¥å¼•ç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é…ç½®æŸä¸ªæ¨¡å—çš„åˆ«åï¼Œå¦‚\n\n```js\nalias: {\n  utils: path.resolve(__dirname, 'src/utils'); // è¿™é‡Œä½¿ç”¨ path.resolve å’Œ __dirname æ¥è·å–ç»å¯¹è·¯å¾„\n}\n```\n\n> ä¸Šè¿°çš„é…ç½®æ˜¯æ¨¡ç³ŠåŒ¹é…ï¼Œæ„å‘³ç€åªè¦æ¨¡å—è·¯å¾„ä¸­æºå¸¦äº† utils å°±å¯ä»¥è¢«æ›¿æ¢æ‰ï¼Œå¦‚ï¼š\n\n```plain\nimport 'utils/query.js' // ç­‰åŒäº import '[é¡¹ç›®ç»å¯¹è·¯å¾„]/src/utils/query.js'\n```\n\n> å¦‚æœéœ€è¦è¿›è¡Œç²¾ç¡®åŒ¹é…å¯ä»¥ä½¿ç”¨ï¼š\n\n```js\nalias: {\n  utils$: path.resolve(__dirname, 'src/utils'); // åªä¼šåŒ¹é… import 'utils'\n}\n```\n\n**resolve.extensions**\n\n```js\nextensions: ['.wasm', '.mjs', '.js', '.json', '.jsx'],\n// è¿™é‡Œçš„é¡ºåºä»£è¡¨åŒ¹é…åç¼€çš„ä¼˜å…ˆçº§ï¼Œä¾‹å¦‚å¯¹äº index.js å’Œ index.jsxï¼Œä¼šä¼˜å…ˆé€‰æ‹© index.js\n```\n\n> è¿™ä¸ªé…ç½®çš„ä½œç”¨æ˜¯å’Œæ–‡ä»¶åç¼€åæœ‰å…³çš„, è¿™ä¸ªé…ç½®å¯ä»¥å®šä¹‰åœ¨è¿›è¡Œæ¨¡å—è·¯å¾„è§£ææ—¶ï¼Œwebpack ä¼šå°è¯•å¸®ä½ è¡¥å…¨é‚£äº›åç¼€åæ¥è¿›è¡ŒæŸ¥æ‰¾\n\n### é…ç½® loader\n\n#### loader åŒ¹é…è§„åˆ™\n\n> å½“æˆ‘ä»¬éœ€è¦é…ç½® `loader` æ—¶ï¼Œéƒ½æ˜¯åœ¨ `module.rules` ä¸­æ·»åŠ æ–°çš„é…ç½®é¡¹ï¼Œåœ¨è¯¥å­—æ®µä¸­ï¼Œæ¯ä¸€é¡¹è¢«è§†ä¸ºä¸€æ¡åŒ¹é…ä½¿ç”¨ `loader` çš„è§„åˆ™\n\n```js\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?/, // æ¡ä»¶\n        include: [path.resolve(__dirname, 'src')], // æ¡ä»¶\n        use: 'babel-loader' // è§„åˆ™åº”ç”¨ç»“æœ\u000e\n      } // ä¸€ä¸ª object å³ä¸€æ¡è§„åˆ™\n      // ...\n    ]\n  }\n};\n```\n\n> `loader` çš„åŒ¹é…è§„åˆ™ä¸­æœ‰ä¸¤ä¸ªæœ€å…³é”®çš„å› ç´ ï¼šä¸€ä¸ªæ˜¯åŒ¹é…æ¡ä»¶ï¼Œä¸€ä¸ªæ˜¯åŒ¹é…è§„åˆ™åçš„åº”ç”¨\n\n#### è§„åˆ™æ¡ä»¶é…ç½®\n\n> å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé…ç½® `loader` çš„åŒ¹é…æ¡ä»¶æ—¶ï¼Œåªè¦ä½¿ç”¨ `test` å­—æ®µå°±å¥½äº†ï¼Œå¾ˆå¤šæ—¶å€™éƒ½åªéœ€è¦åŒ¹é…æ–‡ä»¶åç¼€åæ¥å†³å®šä½¿ç”¨ä»€ä¹ˆ `loader`ï¼Œä½†ä¹Ÿä¸æ’é™¤åœ¨æŸäº›ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®æ¯”è¾ƒå¤æ‚çš„åŒ¹é…æ¡ä»¶ã€‚webpack çš„è§„åˆ™æä¾›äº†å¤šç§é…ç½®å½¢å¼...\n\n- `{test: ...}` åŒ¹é…ç‰¹å®šæ¡ä»¶\n- `{include: ...}` åŒ¹é…ç‰¹å®šè·¯å¾„\n- `{exclude: ...}` æ’é™¤ç‰¹å®šè·¯å¾„\n- `{and: [...] }` å¿…é¡»åŒ¹é…æ•°ç»„ä¸­æ‰€æœ‰æ¡ä»¶\n- `{or: [...] }` åŒ¹é…æ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªæ¡ä»¶\n- `{not: [...] }` æ’é™¤åŒ¹é…æ•°ç»„ä¸­æ‰€æœ‰æ¡ä»¶...\n\n> ä¸Šè¿°çš„æ‰€è°“æ¡ä»¶çš„å€¼å¯ä»¥æ˜¯ï¼š\n\n- å­—ç¬¦ä¸²ï¼šå¿…é¡»ä»¥æä¾›çš„å­—ç¬¦ä¸²å¼€å§‹ï¼Œæ‰€ä»¥æ˜¯å­—ç¬¦ä¸²çš„è¯ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦æä¾›ç»å¯¹è·¯å¾„\n- æ­£åˆ™è¡¨è¾¾å¼ï¼šè°ƒç”¨æ­£åˆ™çš„ `test` æ–¹æ³•æ¥åˆ¤æ–­åŒ¹é…\n- å‡½æ•°ï¼š`(path) => boolean`ï¼Œè¿”å› `true` è¡¨ç¤ºåŒ¹é…\n- æ•°ç»„ï¼šè‡³å°‘åŒ…å«ä¸€ä¸ªæ¡ä»¶çš„æ•°ç»„\n- å¯¹è±¡ï¼šåŒ¹é…æ‰€æœ‰å±æ€§å€¼çš„æ¡ä»¶...\n\n```js\nrules: [\n  {\n    test: /\\.jsx?/, // æ­£åˆ™\n    include: [\n      path.resolve(__dirname, 'src'), // å­—ç¬¦ä¸²ï¼Œæ³¨æ„æ˜¯ç»å¯¹è·¯å¾„\n    ], // æ•°ç»„\n    // ...\n  },\n  {\n    test: {\n      js: /\\.js/,\n      jsx: /\\.jsx/,\n    }, // å¯¹è±¡ï¼Œä¸å»ºè®®ä½¿ç”¨\n    not: [\n      (value) => { /* ... */ return true; }, // å‡½æ•°ï¼Œé€šå¸¸éœ€è¦é«˜åº¦è‡ªå®šä¹‰æ—¶æ‰ä¼šä½¿ç”¨\n    ],\n  },\n]\n```\n\n#### ä½¿ç”¨ loader é…ç½®\n\n> `module.rules` çš„åŒ¹é…è§„åˆ™æœ€é‡è¦çš„è¿˜æ˜¯ç”¨äºé…ç½® `loader`ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `use` å­—æ®µ\n\n```js\nrules: [\n  {\n    test: /\\.less/,\n    use: [\n      'style-loader', // ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²è¡¨ç¤º loader\n      {\n        loader: 'css-loader',\n        options: {\n          importLoaders: 1\n        },\n      }, // ç”¨å¯¹è±¡è¡¨ç¤º loaderï¼Œå¯ä»¥ä¼ é€’ loader é…ç½®ç­‰\n      {\n        loader: 'less-loader',\n        options: {\n          noIeCompat: true\n        }, // ä¼ é€’ loader é…ç½®\n      },\n    ],\n  },\n]\n```\n\n> `use` å­—æ®µå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…è¡¨ç¤º `loader` çš„å¯¹è±¡ã€‚å¦‚æœåªéœ€è¦ä¸€ä¸ª `loader`ï¼Œä¹Ÿå¯ä»¥è¿™æ ·ï¼š`use: {loader: 'babel-loader'`, `options: { ...} }`\n\n#### loader åº”ç”¨é¡ºåº\n\n- å¯¹äºä¸Šé¢çš„ `less` è§„åˆ™é…ç½®ï¼Œä¸€ä¸ª `style.less` æ–‡ä»¶ä¼šé€”å¾„ `less-loader`ã€`css-loader`ã€`style-loader` å¤„ç†ï¼Œæˆä¸ºä¸€ä¸ªå¯ä»¥æ‰“åŒ…çš„æ¨¡å—ã€‚\n- `loader` çš„åº”ç”¨é¡ºåºåœ¨é…ç½®å¤šä¸ª `loader` ä¸€èµ·å·¥ä½œæ—¶å¾ˆé‡è¦ï¼Œé€šå¸¸ä¼šä½¿ç”¨åœ¨ CSS é…ç½®ä¸Šï¼Œé™¤äº† `style-loader` å’Œ `css-loader`ï¼Œä½ å¯èƒ½è¿˜è¦é…ç½® `less-loader` ç„¶åå†åŠ ä¸ª `postcss` çš„ `autoprefixer` ç­‰ã€‚\n- ä¸Šè¿°ä»ååˆ°å‰çš„é¡ºåºæ˜¯åœ¨åŒä¸€ä¸ª `rule` ä¸­è¿›è¡Œçš„ï¼Œé‚£å¦‚æœå¤šä¸ª `rule` åŒ¹é…äº†åŒä¸€ä¸ªæ¨¡å—æ–‡ä»¶ï¼Œ`loader` çš„åº”ç”¨é¡ºåºåˆæ˜¯æ€æ ·çš„å‘¢ï¼Ÿçœ‹ä¸€ä»½è¿™æ ·çš„é…ç½®...\n\n```js\nrules: [\n  {\n    test: /\\.js$/,\n    exclude: /node_modules/,\n    loader: \"eslint-loader\",\n  },\n  {\n    test: /\\.js$/,\n    exclude: /node_modules/,\n    loader: \"babel-loader\",\n  },\n]\n```\n\n> è¿™æ ·æ— æ³•æ³•ä¿è¯ `eslint-loader` åœ¨ `babel-loader` åº”ç”¨å‰æ‰§è¡Œã€‚`webpack` åœ¨ `rules` ä¸­æä¾›äº†ä¸€ä¸ª `enforce` çš„å­—æ®µæ¥é…ç½®å½“å‰ `rule` çš„ `loader` ç±»å‹ï¼Œæ²¡é…ç½®çš„è¯æ˜¯æ™®é€šç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½® `pre` æˆ– `post`ï¼Œåˆ†åˆ«å¯¹åº”å‰ç½®ç±»å‹æˆ–åç½®ç±»å‹çš„ `loader`...\n\n- æ‰€æœ‰çš„ `loader` æŒ‰ç…§ **å‰ç½®** -> **è¡Œå†…** -> **æ™®é€š** -> **åç½®** çš„é¡ºåºæ‰§è¡Œã€‚æ‰€ä»¥å½“æˆ‘ä»¬è¦ç¡®ä¿ `eslint-loader` åœ¨ `babel-loader` ä¹‹å‰æ‰§è¡Œæ—¶ï¼Œå¯ä»¥å¦‚ä¸‹æ·»åŠ  `enforce` é…ç½®\n\n```js\nrules: [\n  {\n    enforce: 'pre', // æŒ‡å®šä¸ºå‰ç½®ç±»å‹\n    test: /\\.js$/,\n    exclude: /node_modules/,\n    loader: \"eslint-loader\",\n  },\n]\n```\n\n> å½“é¡¹ç›®æ–‡ä»¶ç±»å‹å’Œåº”ç”¨çš„ `loader` ä¸æ˜¯ç‰¹åˆ«å¤æ‚çš„æ—¶å€™ï¼Œé€šå¸¸å»ºè®®æŠŠè¦åº”ç”¨çš„åŒä¸€ç±»å‹ `loader` éƒ½å†™åœ¨åŒä¸€ä¸ªåŒ¹é…è§„åˆ™ä¸­ï¼Œè¿™æ ·æ›´å¥½ç»´æŠ¤å’Œæ§åˆ¶\n\n#### å®Œæ•´ä»£ç \n\n```js\nconst path = require('path');\nconst webpack = require('webpack');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\nconst CopyWebpackPlugin = require('copy-webpack-plugin');\n\nmodule.exports = {\n  entry: './src/index',\n\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: '[name].js'\n  },\n\n  module: {\n    rules: [\n      {\n        enforce: 'pre', // æŒ‡å®šä¸ºå‰ç½®ç±»å‹\n        test: /\\.jsx?$/,\n        exclude: /node_modules/,\n        loader: 'eslint-loader'\n      },\n      {\n        test: /\\.jsx?$/,\n        include: [path.resolve(__dirname, 'src')],\n        use: 'babel-loader'\n      },\n      {\n        test: /\\.css$/,\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          use: ['css-loader']\n        })\n      },\n      {\n        test: /\\.less$/,\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          use: ['css-loader', 'less-loader']\n        })\n      },\n      {\n        test: /\\.(png|jpg|gif)$/,\n        use: [\n          {\n            loader: 'file-loader'\n          }\n        ]\n      }\n    ]\n  },\n\n  resolve: {\n    alias: {\n      utils: path.resolve(__dirname, 'src/utils'), // è¿™é‡Œä½¿ç”¨ path.resolve å’Œ __dirname æ¥è·å–ç»å¯¹è·¯å¾„\n      log$: path.resolve(__dirname, 'src/utils/log.js') // åªåŒ¹é… log\n    },\n    extensions: ['.js', '.json', '.jsx', '.css', '.less'],\n    modules: [\n      path.resolve(__dirname, 'node_modules') // æŒ‡å®šå½“å‰ç›®å½•ä¸‹çš„ node_modules ä¼˜å…ˆæŸ¥æ‰¾\n    ]\n  },\n\n  plugins: [\n    new HtmlWebpackPlugin({\n      filename: 'index.html', // é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„\n      template: 'src/index.html' // é…ç½®æ–‡ä»¶æ¨¡æ¿\n    }),\n    new ExtractTextPlugin('[name].css'),\n    new webpack.DefinePlugin({\n      TWO: '1+1',\n      CONSTANTS: {\n        APP_VERSION: JSON.stringify('1.1.2') // const CONSTANTS = { APP_VERSION: '1.1.2' }\n      }\n    }),\n    new CopyWebpackPlugin([\n      { from: 'src/assets/favicon.ico', to: 'favicon.ico' } // é¡¾åæ€ä¹‰ï¼Œfrom é…ç½®æ¥æºï¼Œto é…ç½®ç›®æ ‡è·¯å¾„\n    ]),\n    new webpack.ProvidePlugin({\n      _: 'lodash'\n    })\n  ],\n\n  devServer: {\n    port: '1234',\n    before(app) {\n      app.get('/api/test.json', function(req, res) {\n        // å½“è®¿é—® /some/path è·¯å¾„æ—¶ï¼Œè¿”å›è‡ªå®šä¹‰çš„ json æ•°æ®\n        res.json({ code: 200, message: 'hello world' });\n      });\n    }\n  }\n};\n```\n\n### ä½¿ç”¨ plugin\n\n> æ›´å¤šçš„æ’ä»¶å¯ä»¥åœ¨è¿™é‡ŒæŸ¥æ‰¾ï¼š[plugins in awesome-webpack](https://github.com/webpack-contrib/awesome-webpack#webpack-plugins)\n\n#### DefinePlugin\n\n> `DefinePlugin` æ˜¯ `webpack` å†…ç½®çš„æ’ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ `webpack.DefinePlugin` ç›´æ¥è·å–\n\n- è¿™ä¸ªæ’ä»¶ç”¨äºåˆ›å»ºä¸€äº›åœ¨ç¼–è¯‘æ—¶å¯ä»¥é…ç½®çš„å…¨å±€å¸¸é‡ï¼Œè¿™äº›å¸¸é‡çš„å€¼æˆ‘ä»¬å¯ä»¥åœ¨ `webpack` çš„é…ç½®ä¸­å»æŒ‡å®šï¼Œä¾‹å¦‚\n\n```js\nmodule.exports = {\n  // ...\n  plugins: [\n    new webpack.DefinePlugin({\n      PRODUCTION: JSON.stringify(true), // const PRODUCTION = true\n      VERSION: JSON.stringify('5fa3b9'), // const VERSION = '5fa3b9'\n      BROWSER_SUPPORTS_HTML5: true, // const BROWSER_SUPPORTS_HTML5 = 'true'\n      TWO: '1+1', // const TWO = 1 + 1,\n      CONSTANTS: {\n        APP_VERSION: JSON.stringify('1.1.2') // const CONSTANTS = { APP_VERSION: '1.1.2' }\n      }\n    })\n  ]\n};\n```\n\n> æœ‰äº†ä¸Šé¢çš„é…ç½®ï¼Œå°±å¯ä»¥åœ¨åº”ç”¨ä»£ç æ–‡ä»¶ä¸­ï¼Œè®¿é—®é…ç½®å¥½çš„å˜é‡äº†ï¼Œå¦‚ï¼š\n\n```js\nconsole.log('Running App version' + VERSION);\n\nif (!BROWSER_SUPPORTS_HTML5) require('html5shiv');\n```\n\n> ä¸Šé¢é…ç½®çš„æ³¨é‡Šå·²ç»ç®€å•è¯´æ˜äº†è¿™äº›é…ç½®çš„æ•ˆæœï¼Œè¿™é‡Œå†ç®€è¿°ä¸€ä¸‹æ•´ä¸ªé…ç½®è§„åˆ™ã€‚\n\n- å¦‚æœé…ç½®çš„å€¼æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæ•´ä¸ªå­—ç¬¦ä¸²ä¼šè¢«å½“æˆä»£ç ç‰‡æ®µæ¥æ‰§è¡Œï¼Œå…¶ç»“æœä½œä¸ºæœ€ç»ˆå˜é‡çš„å€¼ï¼Œå¦‚ä¸Šé¢çš„ `\"1+1\"`ï¼Œæœ€åçš„ç»“æœæ˜¯ `2`\n- å¦‚æœé…ç½®çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ï¼Œé‚£ä¹ˆè¯¥å€¼ä¼šè¢«è½¬ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚ `true`ï¼Œæœ€åçš„ç»“æœæ˜¯ `'true'`\n- å¦‚æœé…ç½®çš„æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡çš„æ‰€æœ‰ `key` ä¼šä»¥åŒæ ·çš„æ–¹å¼å»å®šä¹‰\n- è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ `JSON.stringify()` äº†ï¼Œå› ä¸º `JSON.stringify(true)` çš„ç»“æœæ˜¯ `'true'`ï¼Œ`JSON.stringify(\"5fa3b9\")` çš„ç»“æœæ˜¯ `\"5fa3b9\"`ã€‚\n\n> ç¤¾åŒºä¸­å…³äº `DefinePlugin` ä½¿ç”¨å¾—æœ€å¤šçš„æ–¹å¼æ˜¯å®šä¹‰ç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚ `PRODUCTION = true` æˆ–è€… `__DEV__ = true` ç­‰ã€‚éƒ¨åˆ†ç±»åº“åœ¨å¼€å‘ç¯å¢ƒæ—¶ä¾èµ–è¿™æ ·çš„ç¯å¢ƒå˜é‡æ¥ç»™äºˆå¼€å‘è€…æ›´å¤šçš„å¼€å‘è°ƒè¯•åé¦ˆï¼Œä¾‹å¦‚ react ç­‰ã€‚\n\n- å»ºè®®ä½¿ç”¨ `process.env.NODE_ENV`: ... çš„æ–¹å¼æ¥å®šä¹‰ `process.env.NODE_ENV`ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ `process: {env: { NODE_ENV: ...} }` çš„æ–¹å¼ï¼Œå› ä¸ºè¿™æ ·ä¼šè¦†ç›–æ‰ `process` è¿™ä¸ªå¯¹è±¡ï¼Œå¯èƒ½ä¼šå¯¹å…¶ä»–ä»£ç é€ æˆå½±å“...\n\n#### copy-webpack-plugin\n\n> æˆ‘ä»¬ä¸€èˆ¬ä¼šæŠŠå¼€å‘çš„æ‰€æœ‰æºç å’Œèµ„æºæ–‡ä»¶æ”¾åœ¨ `src/` ç›®å½•ä¸‹ï¼Œæ„å»ºçš„æ—¶å€™äº§å‡ºä¸€ä¸ª `build/` ç›®å½•ï¼Œé€šå¸¸ä¼šç›´æ¥æ‹¿ `build` ä¸­çš„æ‰€æœ‰æ–‡ä»¶æ¥å‘å¸ƒã€‚æœ‰äº›æ–‡ä»¶æ²¡ç»è¿‡ `webpack` å¤„ç†ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›å®ƒä»¬ä¹Ÿèƒ½å‡ºç°åœ¨ `build` ç›®å½•ä¸‹ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨ `CopyWebpackPlugin` æ¥å¤„ç†äº†...\n\n```js\nconst CopyWebpackPlugin = require('copy-webpack-plugin');\n\nmodule.exports = {\n  // ...\n  plugins: [\n    new CopyWebpackPlugin([\n      { from: 'src/file.txt', to: 'build/file.txt' }, // é¡¾åæ€ä¹‰ï¼Œfrom é…ç½®æ¥æºï¼Œto é…ç½®ç›®æ ‡è·¯å¾„\n      { from: 'src/*.ico', to: 'build/*.ico' } // é…ç½®é¡¹å¯ä»¥ä½¿ç”¨ glob\n      // å¯ä»¥é…ç½®å¾ˆå¤šé¡¹å¤åˆ¶è§„åˆ™\n    ])\n  ]\n};\n```\n\n#### extract-text-webpack-plugin\n\n> æˆ‘ä»¬ç”¨å®ƒæ¥æŠŠä¾èµ–çš„ `CSS` åˆ†ç¦»å‡ºæ¥æˆä¸ºå•ç‹¬çš„æ–‡ä»¶ã€‚è¿™é‡Œå†çœ‹ä¸€ä¸‹ä½¿ç”¨ `extract-text-webpack-plugin` çš„é…ç½®\n\n```js\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\n\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        // å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          use: 'css-loader'\n        })\n      }\n    ]\n  },\n  plugins: [\n    // å¼•å…¥æ’ä»¶ï¼Œé…ç½®æ–‡ä»¶åï¼Œè¿™é‡ŒåŒæ ·å¯ä»¥ä½¿ç”¨ [hash]\n    new ExtractTextPlugin('index.css')\n  ]\n};\n```\n\n> åœ¨ä¸Šè¿°çš„é…ç½®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† `index.css` ä½œä¸ºå•ç‹¬åˆ†ç¦»å‡ºæ¥çš„æ–‡ä»¶åï¼Œä½†æœ‰çš„æ—¶å€™æ„å»ºå…¥å£ä¸æ­¢ä¸€ä¸ªï¼Œ`extract-text-webpack-plugin` ä¼šä¸ºæ¯ä¸€ä¸ªå…¥å£åˆ›å»ºå•ç‹¬åˆ†ç¦»çš„æ–‡ä»¶ï¼Œå› æ­¤æœ€å¥½è¿™æ ·é…ç½®\n\n```js\n// è¿™æ ·ç¡®ä¿åœ¨ä½¿ç”¨å¤šä¸ªæ„å»ºå…¥å£æ—¶ï¼Œç”Ÿæˆä¸åŒåç§°çš„æ–‡ä»¶\nplugins: [\n  new ExtractTextPlugin('[name].css'),\n],\n```\n\n### æ›´å¥½ä½¿ç”¨ webpack-dev-server\n\n> `webpack-dev-server` æ˜¯ `webpack` å®˜æ–¹æä¾›çš„ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥åŸºäºå½“å‰çš„ `webpack` æ„å»ºé…ç½®å¿«é€Ÿå¯åŠ¨ä¸€ä¸ªé™æ€æœåŠ¡ã€‚å½“ `mode` ä¸º `development` æ—¶ï¼Œä¼šå…·å¤‡ `hot reload` çš„åŠŸèƒ½ï¼Œå³å½“æºç æ–‡ä»¶å˜åŒ–æ—¶ï¼Œä¼šå³æ—¶æ›´æ–°å½“å‰é¡µé¢ï¼Œä»¥ä¾¿ä½ çœ‹åˆ°æœ€æ–°çš„æ•ˆæœ...\n\n#### åŸºç¡€ä½¿ç”¨\n\n> `webpack-dev-server` æ˜¯ä¸€ä¸ª `npm package`ï¼Œå®‰è£…ååœ¨å·²ç»æœ‰ `webpack` é…ç½®æ–‡ä»¶çš„é¡¹ç›®ç›®å½•ä¸‹ç›´æ¥å¯åŠ¨å°±å¯ä»¥\n\n- `webpack-dev-server` é»˜è®¤ä½¿ç”¨ `8080` ç«¯å£\n\n```bash\nnpm install webpack-dev-server -g\nwebpack-dev-server --mode development\n```\n\n> `package` ä¸­çš„ `scripts` é…ç½®ï¼š\n\n```js\n{\n  // ...\n  \"scripts\": {\n    \"start\": \"webpack-dev-server --mode development\"\n  }\n}\n```\n\n#### é…ç½®\n\n> åœ¨ webpack çš„é…ç½®ä¸­ï¼Œå¯ä»¥é€šè¿‡ `devServer` å­—æ®µæ¥é…ç½® `webpack-dev-server`ï¼Œå¦‚ç«¯å£è®¾ç½®ã€å¯åŠ¨ `gzip` å‹ç¼©ç­‰ï¼Œè¿™é‡Œç®€å•è®²è§£å‡ ä¸ªå¸¸ç”¨çš„é…ç½®\n\n- `public` å­—æ®µç”¨äºæŒ‡å®šé™æ€æœåŠ¡çš„åŸŸåï¼Œé»˜è®¤æ˜¯ `http://localhost:8080/` ï¼Œå½“ä½ ä½¿ç”¨ `Nginx` æ¥åšåå‘ä»£ç†æ—¶ï¼Œåº”è¯¥å°±éœ€è¦ä½¿ç”¨è¯¥é…ç½®æ¥æŒ‡å®š `Nginx` é…ç½®ä½¿ç”¨çš„æœåŠ¡åŸŸå\n- `port` å­—æ®µç”¨äºæŒ‡å®šé™æ€æœåŠ¡çš„ç«¯å£ï¼Œå¦‚ä¸Šï¼Œé»˜è®¤æ˜¯ `8080`ï¼Œé€šå¸¸æƒ…å†µä¸‹éƒ½ä¸éœ€è¦æ”¹åŠ¨\n- `publicPath` å­—æ®µç”¨äºæŒ‡å®šæ„å»ºå¥½çš„é™æ€æ–‡ä»¶åœ¨æµè§ˆå™¨ä¸­ç”¨ä»€ä¹ˆè·¯å¾„å»è®¿é—®ï¼Œé»˜è®¤æ˜¯ `/`ï¼Œä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªæ„å»ºå¥½çš„æ–‡ä»¶ `bundle.js`ï¼Œå®Œæ•´çš„è®¿é—®è·¯å¾„æ˜¯ `http://localhost:8080/bundle.js`ï¼Œå¦‚æœä½ é…ç½®äº† `publicPath: 'assets/'`ï¼Œé‚£ä¹ˆä¸Šè¿° `bundle.js` çš„å®Œæ•´è®¿é—®è·¯å¾„å°±æ˜¯ `http://localhost:8080/assets/bundle.js`ã€‚å¯ä»¥ä½¿ç”¨æ•´ä¸ª `URL` æ¥ä½œä¸º `publicPath` çš„å€¼ï¼Œå¦‚ `publicPath: 'http://localhost:8080/assets/'`ã€‚å¦‚æœä½ ä½¿ç”¨äº† `HMR`ï¼Œé‚£ä¹ˆè¦è®¾ç½® `publicPath` å°±å¿…é¡»ä½¿ç”¨å®Œæ•´çš„ `URL`\n\n> å»ºè®®å°† `devServer.publicPath` å’Œ `output.publicPath` çš„å€¼ä¿æŒä¸€è‡´\n\n- `proxy` ç”¨äºé…ç½® `webpack-dev-server` å°†ç‰¹å®š `URL` çš„è¯·æ±‚ä»£ç†åˆ°å¦å¤–ä¸€å°æœåŠ¡å™¨ä¸Šã€‚å½“ä½ æœ‰å•ç‹¬çš„åç«¯å¼€å‘æœåŠ¡å™¨ç”¨äºè¯·æ±‚ API æ—¶ï¼Œè¿™ä¸ªé…ç½®ç›¸å½“æœ‰ç”¨ã€‚ä¾‹å¦‚\n\n```js\nproxy: {\n  '/api': {\n    target: \"http://localhost:3000\", // å°† URL ä¸­å¸¦æœ‰ /api çš„è¯·æ±‚ä»£ç†åˆ°æœ¬åœ°çš„ 3000 ç«¯å£çš„æœåŠ¡ä¸Š\n    pathRewrite: {'^/api': ''}, // æŠŠ URL ä¸­ path éƒ¨åˆ†çš„ `api` ç§»é™¤æ‰\n  },\n}\n```\n\n- `before` å’Œ `after` é…ç½®ç”¨äºåœ¨ `webpack-dev-server` å®šä¹‰é¢å¤–çš„ä¸­é—´ä»¶ï¼Œå¦‚\n\n```js\nbefore(app){\n  app.get('/some/path', function(req, res) { // å½“è®¿é—® /some/path è·¯å¾„æ—¶ï¼Œè¿”å›è‡ªå®šä¹‰çš„ json æ•°æ®\n    res.json({custom: 'response'})\n  })\n}\n```\n\n- `before` åœ¨ `webpack-dev-server` é™æ€èµ„æºä¸­é—´ä»¶å¤„ç†ä¹‹å‰ï¼Œå¯ä»¥ç”¨äºæ‹¦æˆªéƒ¨åˆ†è¯·æ±‚è¿”å›ç‰¹å®šå†…å®¹ï¼Œæˆ–è€…å®ç°ç®€å•çš„æ•°æ® `mock`ã€‚\n- `after` åœ¨ `webpack-dev-server` é™æ€èµ„æºä¸­é—´ä»¶å¤„ç†ä¹‹åï¼Œæ¯”è¾ƒå°‘ç”¨åˆ°ï¼Œå¯ä»¥ç”¨äºæ‰“å°æ—¥å¿—æˆ–è€…åšä¸€äº›é¢å¤–å¤„ç†...\n\n### å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„æ„å»ºé…ç½®å·®å¼‚\n\n- æˆ‘ä»¬åœ¨æ—¥å¸¸çš„å‰ç«¯å¼€å‘å·¥ä½œä¸­ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰ä¸¤å¥—æ„å»ºç¯å¢ƒï¼šä¸€å¥—å¼€å‘æ—¶ä½¿ç”¨ï¼Œæ„å»ºç»“æœç”¨äºæœ¬åœ°å¼€å‘è°ƒè¯•ï¼Œä¸è¿›è¡Œä»£ç å‹ç¼©ï¼Œæ‰“å° `debug` ä¿¡æ¯ï¼ŒåŒ…å« `sourcemap` æ–‡ä»¶\n- å¦å¤–ä¸€å¥—æ„å»ºåçš„ç»“æœæ˜¯ç›´æ¥åº”ç”¨äºçº¿ä¸Šçš„ï¼Œå³ä»£ç éƒ½æ˜¯å‹ç¼©åï¼Œè¿è¡Œæ—¶ä¸æ‰“å° `debug` ä¿¡æ¯ï¼Œé™æ€æ–‡ä»¶ä¸åŒ…æ‹¬ `sourcemap` çš„ã€‚æœ‰çš„æ—¶å€™å¯èƒ½è¿˜éœ€è¦å¤šä¸€å¥—æµ‹è¯•ç¯å¢ƒï¼Œåœ¨è¿è¡Œæ—¶ç›´æ¥è¿›è¡Œè¯·æ±‚ `mock` ç­‰å·¥ä½œ\n- `webpack 4.x` ç‰ˆæœ¬å¼•å…¥äº† `mode` çš„æ¦‚å¿µï¼Œåœ¨è¿è¡Œ `webpack` æ—¶éœ€è¦æŒ‡å®šä½¿ç”¨ `production` æˆ– `development` ä¸¤ä¸ª `mode` å…¶ä¸­ä¸€ä¸ªï¼Œè¿™ä¸ªåŠŸèƒ½ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„è¿è¡Œä¸¤å¥—æ„å»ºç¯å¢ƒçš„èƒ½åŠ›ã€‚\n\n#### åœ¨é…ç½®æ–‡ä»¶ä¸­åŒºåˆ† mode\n\n> ä¹‹å‰æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶éƒ½æ˜¯ç›´æ¥å¯¹å¤–æš´éœ²ä¸€ä¸ª `JS` å¯¹è±¡ï¼Œè¿™ç§æ–¹å¼æš‚æ—¶æ²¡æœ‰åŠæ³•è·å–åˆ° `webpack` çš„ `mode` å‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ¢ä¸€ç§æ–¹å¼æ¥å¤„ç†é…ç½®ã€‚æ ¹æ®å®˜æ–¹çš„æ–‡æ¡£å¤šç§é…ç½®ç±»å‹ï¼Œé…ç½®æ–‡ä»¶å¯ä»¥å¯¹å¤–æš´éœ²ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¿™æ ·åš\n\n```js\nmodule.exports = (env, argv) => ({\n  // ... å…¶ä»–é…ç½®\n  optimization: {\n    minimize: false,\n    // ä½¿ç”¨ argv æ¥è·å– mode å‚æ•°çš„å€¼\n    minimizer:\n      argv.mode === 'production'\n        ? [\n            new UglifyJsPlugin({\n              /* ä½ è‡ªå·±çš„é…ç½® */\n            })\n            // ä»…åœ¨æˆ‘ä»¬è¦è‡ªå®šä¹‰å‹ç¼©é…ç½®æ—¶æ‰éœ€è¦è¿™ä¹ˆåš\n            // mode ä¸º production æ—¶ webpack ä¼šé»˜è®¤ä½¿ç”¨å‹ç¼© JS çš„ plugin\n          ]\n        : []\n  }\n});\n```\n\n> è¿™æ ·è·å– `mode` ä¹‹åï¼Œæˆ‘ä»¬å°±èƒ½å¤ŸåŒºåˆ†ä¸åŒçš„æ„å»ºç¯å¢ƒï¼Œç„¶åæ ¹æ®ä¸åŒç¯å¢ƒå†å¯¹ç‰¹æ®Šçš„ `loader` æˆ– `plugin` åšé¢å¤–çš„é…ç½®å°±å¯ä»¥äº†\n\n- ä»¥ä¸Šæ˜¯ `webpack 4.x` çš„åšæ³•ï¼Œç”±äºæœ‰äº† `mode` å‚æ•°ï¼ŒåŒºåˆ†ç¯å¢ƒå˜å¾—ç®€å•äº†ã€‚ä¸è¿‡åœ¨å½“å‰ä¸šç•Œï¼Œä¼°è®¡è¿˜æ˜¯ä½¿ç”¨ `webpack 3.x` ç‰ˆæœ¬çš„å±…å¤šï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿç®€å•ä»‹ç»ä¸€ä¸‹ `3.x` å¦‚ä½•åŒºåˆ†ç¯å¢ƒ\n\n> `webpack` çš„è¿è¡Œæ—¶ç¯å¢ƒæ˜¯ `Node.js`ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ `Node.js` æä¾›çš„æœºåˆ¶ç»™è¦è¿è¡Œçš„ `webpack` ç¨‹åºä¼ é€’ç¯å¢ƒå˜é‡ï¼Œæ¥æ§åˆ¶ä¸åŒç¯å¢ƒä¸‹çš„æ„å»ºè¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨ `npm` ä¸­çš„ `scripts` å­—æ®µæ·»åŠ ä¸€ä¸ªç”¨äºç”Ÿäº§ç¯å¢ƒçš„æ„å»ºå‘½ä»¤...\n\n```js\n{\n  \"scripts\": {\n    \"build\": \"NODE_ENV=production webpack\",\n    \"develop\": \"NODE_ENV=development webpack-dev-server\"\n  }\n}\n```\n\n> ç„¶ååœ¨ `webpack.config.js` æ–‡ä»¶ä¸­å¯ä»¥é€šè¿‡ `process.env.NODE_ENV` æ¥è·å–å‘½ä»¤ä¼ å…¥çš„ç¯å¢ƒå˜é‡\n\n```js\nconst config = {\n  // ... webpack é…ç½®\n};\n\nif (process.env.NODE_ENV === 'production') {\n  // ç”Ÿäº§ç¯å¢ƒéœ€è¦åšçš„äº‹æƒ…ï¼Œå¦‚ä½¿ç”¨ä»£ç å‹ç¼©æ’ä»¶ç­‰\n  config.plugins.push(new UglifyJsPlugin());\n}\n\nmodule.exports = config;\n```\n\n#### è¿è¡Œæ—¶çš„ç¯å¢ƒå˜é‡\n\n> æˆ‘ä»¬ä½¿ç”¨ webpack æ—¶ä¼ é€’çš„ mode å‚æ•°ï¼Œæ˜¯å¯ä»¥åœ¨æˆ‘ä»¬çš„åº”ç”¨ä»£ç è¿è¡Œæ—¶ï¼Œé€šè¿‡ `process.env.NODE_ENV` è¿™ä¸ªå˜é‡è·å–çš„ã€‚è¿™æ ·æ–¹ä¾¿æˆ‘ä»¬åœ¨è¿è¡Œæ—¶åˆ¤æ–­å½“å‰æ‰§è¡Œçš„æ„å»ºç¯å¢ƒï¼Œä½¿ç”¨æœ€å¤šçš„åœºæ™¯è«è¿‡äºæ§åˆ¶æ˜¯å¦æ‰“å° `debug` ä¿¡æ¯...\n\n- ä¸‹é¢è¿™ä¸ªç®€å•çš„ä¾‹å­ï¼Œåœ¨åº”ç”¨å¼€å‘çš„ä»£ç ä¸­å®ç°ä¸€ä¸ªç®€å•çš„ `console` æ‰“å°å°è£…\n\n```js\nexport default function log(...args) {\n  if (process.env.NODE_ENV === 'development' && console && console.log) {\n    console.log.apply(console, args);\n  }\n}\n```\n\n> åŒæ ·ï¼Œä»¥ä¸Šæ˜¯ `webpack 4.x` çš„åšæ³•ï¼Œä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹ `3.x` ç‰ˆæœ¬åº”è¯¥å¦‚ä½•å®ç°ã€‚è¿™é‡Œéœ€è¦ç”¨åˆ° `DefinePlugin` æ’ä»¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨æ„å»ºæ—¶ç»™è¿è¡Œæ—¶å®šä¹‰å˜é‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªè¦åœ¨å‰é¢ `webpack 3.x` ç‰ˆæœ¬åŒºåˆ†æ„å»ºç¯å¢ƒçš„ä¾‹å­çš„åŸºç¡€ä¸Šï¼Œå†ä½¿ç”¨ `DefinePlugin` æ·»åŠ ç¯å¢ƒå˜é‡å³å¯å½±å“åˆ°è¿è¡Œæ—¶çš„ä»£ç ...\n\n```js\nmodule.exports = {\n  // ...\n  // webpack çš„é…ç½®\n\n  plugins: [\n    new webpack.DefinePlugin({\n      // webpack 3.x çš„ process.env.NODE_ENV æ˜¯é€šè¿‡æ‰‹åŠ¨åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®š NODE_ENV=... çš„æ–¹å¼æ¥ä¼ é€’çš„\n      'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV)\n    })\n  ]\n};\n```\n\n#### å¸¸è§çš„ç¯å¢ƒå·®å¼‚é…ç½®\n\n**å¸¸è§çš„ webpack æ„å»ºå·®å¼‚é…ç½®**\n\n- ç”Ÿäº§ç¯å¢ƒå¯èƒ½éœ€è¦åˆ†ç¦» `CSS` æˆå•ç‹¬çš„æ–‡ä»¶ï¼Œä»¥ä¾¿å¤šä¸ªé¡µé¢å…±äº«åŒä¸€ä¸ª `CSS` æ–‡ä»¶\n- ç”Ÿäº§ç¯å¢ƒéœ€è¦å‹ç¼© `HTML/CSS/JS` ä»£ç \n- ç”Ÿäº§ç¯å¢ƒéœ€è¦å‹ç¼©å›¾ç‰‡\n- å¼€å‘ç¯å¢ƒéœ€è¦ç”Ÿæˆ `sourcemap` æ–‡ä»¶\n- å¼€å‘ç¯å¢ƒéœ€è¦æ‰“å° `debug` ä¿¡æ¯\n- å¼€å‘ç¯å¢ƒéœ€è¦ `live reload` æˆ–è€… `hot reload` çš„åŠŸèƒ½...\n\n> `webpack 4.x` çš„ `mode` å·²ç»æä¾›äº†ä¸Šè¿°å·®å¼‚é…ç½®çš„å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œ`mode` ä¸º `production` æ—¶é»˜è®¤ä½¿ç”¨ `JS` ä»£ç å‹ç¼©ï¼Œè€Œ `mode` ä¸º `development` æ—¶é»˜è®¤å¯ç”¨ `hot` `reload`ï¼Œç­‰ç­‰ã€‚è¿™æ ·è®©æˆ‘ä»¬çš„é…ç½®æ›´ä¸ºç®€æ´ï¼Œæˆ‘ä»¬åªéœ€è¦é’ˆå¯¹ç‰¹åˆ«ä½¿ç”¨çš„ `loader` å’Œ `plugin` åšåŒºåˆ†é…ç½®å°±å¯ä»¥äº†...\n\n- `webpack 3.x` ç‰ˆæœ¬è¿˜æ˜¯åªèƒ½è‡ªå·±åŠ¨æ‰‹ä¿®æ”¹é…ç½®æ¥æ»¡è¶³å¤§éƒ¨åˆ†ç¯å¢ƒå·®å¼‚éœ€æ±‚ï¼Œæ‰€ä»¥å¦‚æœä½ è¦å¼€å§‹ä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨ `webpack 4.x` ç‰ˆæœ¬\n\n#### æ‹†åˆ†é…ç½®\n\n> å‰é¢æˆ‘ä»¬åˆ—å‡ºäº†å‡ ä¸ªç¯å¢ƒå·®å¼‚é…ç½®ï¼Œå¯èƒ½è¿™äº›æ„å»ºéœ€æ±‚å°±å·²ç»æœ‰ç‚¹å¤šäº†ï¼Œä¼šè®©æ•´ä¸ª `webpack` çš„é…ç½®å˜å¾—å¤æ‚ï¼Œå°¤å…¶æ˜¯æœ‰ç€å¤§é‡ç¯å¢ƒå˜é‡åˆ¤æ–­çš„é…ç½®ã€‚æˆ‘ä»¬å¯ä»¥æŠŠ `webpack` çš„é…ç½®æŒ‰ç…§ä¸åŒçš„ç¯å¢ƒæ‹†åˆ†æˆå¤šä¸ªæ–‡ä»¶ï¼Œè¿è¡Œæ—¶ç›´æ¥æ ¹æ®ç¯å¢ƒå˜é‡åŠ è½½å¯¹åº”çš„é…ç½®å³å¯ã€‚åŸºæœ¬çš„åˆ’åˆ†å¦‚ä¸‹...\n\n- `webpack.base.js`ï¼šåŸºç¡€éƒ¨åˆ†ï¼Œå³å¤šä¸ªæ–‡ä»¶ä¸­å…±äº«çš„é…ç½®\n- `webpack.development.js`ï¼šå¼€å‘ç¯å¢ƒä½¿ç”¨çš„é…ç½®\n- `webpack.production.js`ï¼šç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„é…ç½®\n- `webpack.test.js`ï¼šæµ‹è¯•ç¯å¢ƒä½¿ç”¨çš„é…ç½®...\n\n**å¦‚ä½•å¤„ç†è¿™æ ·çš„é…ç½®æ‹†åˆ†**\n\n> é¦–å…ˆæˆ‘ä»¬è¦æ˜ç™½ï¼Œå¯¹äº `webpack` çš„é…ç½®ï¼Œå…¶å®æ˜¯å¯¹å¤–æš´éœ²ä¸€ä¸ª `JS` å¯¹è±¡ï¼Œæ‰€ä»¥å¯¹äºè¿™ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç”¨ `JS` ä»£ç æ¥ä¿®æ”¹å®ƒï¼Œä¾‹å¦‚\n\n```js\nconst config = {\n  // ... webpack é…ç½®\n};\n\n// æˆ‘ä»¬å¯ä»¥ä¿®æ”¹è¿™ä¸ª config æ¥è°ƒæ•´é…ç½®ï¼Œä¾‹å¦‚æ·»åŠ ä¸€ä¸ªæ–°çš„æ’ä»¶\nconfig.plugins.push(new YourPlugin());\n\nmodule.exports = config;\n```\n\n> å› æ­¤ï¼Œåªè¦æœ‰ä¸€ä¸ªå·¥å…·èƒ½æ¯”è¾ƒæ™ºèƒ½åœ°åˆå¹¶å¤šä¸ªé…ç½®å¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆè½»æ¾åœ°æ‹†åˆ† webpack é…ç½®ï¼Œç„¶åé€šè¿‡åˆ¤æ–­ç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨å·¥å…·å°†å¯¹åº”ç¯å¢ƒçš„å¤šä¸ªé…ç½®å¯¹è±¡æ•´åˆåæä¾›ç»™ webpack ä½¿ç”¨ã€‚è¿™ä¸ªå·¥å…·å°±æ˜¯ **[webpack-merge](https://github.com/survivejs/webpack-merge)**\n\n- æˆ‘ä»¬çš„ webpack é…ç½®åŸºç¡€éƒ¨åˆ†ï¼Œå³ `webpack.base.js` åº”è¯¥å¤§è‡´æ˜¯è¿™æ ·çš„\n\n```js\nmodule.exports = {\n  entry: '...',\n  output: {\n    // ...\n  },\n  resolve: {\n    // ...\n  },\n  module: {\n    // è¿™é‡Œæ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œåé¢ä»‹ç» API æ—¶ä¼šç”¨åˆ°\n    rules: [\n      {\n        test: /\\.js$/,\n        use: ['babel']\n      }\n    ]\n    // ...\n  },\n  plugins: [\n    // ...\n  ]\n};\n```\n\n> ç„¶å `webpack.development.js` éœ€è¦æ·»åŠ  `loader` æˆ– `plugin`ï¼Œå°±å¯ä»¥ä½¿ç”¨ `webpack-merge` çš„ `API`ï¼Œä¾‹å¦‚\n\n```js\nconst {smart} = require('webpack-merge')\nconst webpack = require('webpack')\nconst base = require('./webpack.base.js')\n\nmodule.exports = smart(base, {\n  module: {\n    rules: [\n      // ç”¨ smart APIï¼Œå½“è¿™é‡Œçš„åŒ¹é…è§„åˆ™ç›¸åŒä¸” use å€¼éƒ½æ˜¯æ•°ç»„æ—¶ï¼Œsmart ä¼šè¯†åˆ«åå¤„ç†\n      // å’Œä¸Šè¿° base é…ç½®åˆå¹¶åï¼Œè¿™é‡Œä¼šæ˜¯ {test: /\\.js$/, use: ['babel', 'coffee'] }\n      // å¦‚æœè¿™é‡Œ use çš„å€¼ç”¨çš„æ˜¯å­—ç¬¦ä¸²æˆ–è€…å¯¹è±¡çš„è¯ï¼Œé‚£ä¹ˆä¼šæ›¿æ¢æ‰åŸæœ¬çš„è§„åˆ™ use çš„å€¼\n      {\n        test: /\\.js$/,\n        use: ['coffee'],\n      },\n      // ...\n    ],\n  },\n  plugins: [\n    // plugins è¿™é‡Œçš„æ•°ç»„ä¼šå’Œ base ä¸­çš„ plugins æ•°ç»„è¿›è¡Œåˆå¹¶\n    new webpack.DefinePlugin({\n      'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV),\n    }),\n  ],\n})ï¼›\n```\n\n> å¯è§ `webpack-merge` æä¾›çš„ `smart` æ–¹æ³•ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´åŠ è½»æ¾åœ°å¤„ç† `loader` é…ç½®çš„åˆå¹¶ã€‚`webpack-merge` è¿˜æœ‰å…¶ä»– `API` å¯ä»¥ç”¨äºè‡ªå®šä¹‰åˆå¹¶è¡Œä¸º\n\n#### å®Œæ•´ä»£ç \n\n> `webpack.config.js`\n\n```js\nmodule.exports = function(env, argv) {\n  return argv.mode === 'production'\n    ? require('./configs/webpack.production')\n    : require('./configs/webpack.development');\n};\n```\n\n> `configs/webpack.base.js`\n\n```js\nconst path = require('path');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\n\nmodule.exports = {\n  entry: './src/index.js',\n\n  output: {\n    path: path.resolve(__dirname, '../dist'),\n    filename: '[name].js'\n  },\n\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?/,\n        include: [path.resolve(__dirname, '../src')],\n        use: 'babel-loader'\n      },\n      {\n        test: /\\.(png|jpg|gif)$/,\n        use: [\n          {\n            loader: 'file-loader'\n          }\n        ]\n      }\n    ]\n  },\n\n  plugins: [\n    new HtmlWebpackPlugin({\n      filename: 'index.html', // é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„\n      template: 'src/index.html' // é…ç½®æ–‡ä»¶æ¨¡æ¿\n    })\n  ]\n};\n```\n\n> `configs/webpack.development.js`\n\n```js\nconst webpack = require('webpack');\nconst merge = require('webpack-merge');\nconst baseConfig = require('./webpack.base');\n\nconst config = merge.smart(baseConfig, {\n  module: {\n    rules: [\n      {\n        enforce: 'pre',\n        test: /\\.jsx?$/,\n        exclude: /node_modules/,\n        loader: 'eslint-loader'\n      },\n      {\n        test: /\\.less$/,\n        use: ['style-loader', 'css-loader', 'less-loader']\n      }\n    ]\n  },\n\n  devServer: {\n    port: '1234',\n    before(app) {\n      app.get('/api/test.json', function(req, res) {\n        res.json({ code: 200, message: 'hello world' });\n      });\n    }\n  }\n});\n\nconfig.plugins.push(\n  new webpack.DefinePlugin({\n    __DEV__: JSON.stringify(true)\n  })\n);\n\nmodule.exports = config;\n```\n\n> `configs/webpack.production.js`\n\n```js\nconst merge = require('webpack-merge');\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\nconst baseConfig = require('./webpack.base');\n\nconst config = merge.smart(baseConfig, {\n  module: {\n    rules: [\n      {\n        test: /\\.less$/,\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          use: [\n            {\n              loader: 'css-loader',\n              options: {\n                minimize: true\n              }\n            },\n            'less-loader'\n          ]\n        })\n      }\n    ]\n  }\n});\n\nconfig.plugins.push(new ExtractTextPlugin('[name].css'));\n\nmodule.exports = config;\n```\n\n### æ¨¡å—çƒ­æ›¿æ¢æé«˜å¼€å‘æ•ˆç‡\n\n> `HMR` å…¨ç§°æ˜¯ `Hot Module Replacement`ï¼Œå³æ¨¡å—çƒ­æ›¿æ¢ã€‚åœ¨è¿™ä¸ªæ¦‚å¿µå‡ºæ¥ä¹‹å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿‡ `Hot Reloading`ï¼Œå½“ä»£ç å˜æ›´æ—¶é€šçŸ¥æµè§ˆå™¨åˆ·æ–°é¡µé¢ï¼Œä»¥é¿å…é¢‘ç¹æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨é¡µé¢ã€‚HMR å¯ä»¥ç†è§£ä¸ºå¢å¼ºç‰ˆçš„ `Hot Reloading`ï¼Œä½†ä¸ç”¨æ•´ä¸ªé¡µé¢åˆ·æ–°ï¼Œè€Œæ˜¯å±€éƒ¨æ›¿æ¢æ‰éƒ¨åˆ†æ¨¡å—ä»£ç å¹¶ä¸”ä½¿å…¶ç”Ÿæ•ˆï¼Œå¯ä»¥çœ‹åˆ°ä»£ç å˜æ›´åçš„æ•ˆæœã€‚æ‰€ä»¥ï¼Œ`HMR` æ—¢é¿å…äº†é¢‘ç¹æ‰‹åŠ¨åˆ·æ–°é¡µé¢ï¼Œä¹Ÿå‡å°‘äº†é¡µé¢åˆ·æ–°æ—¶çš„ç­‰å¾…ï¼Œå¯ä»¥æå¤§åœ°æé«˜å‰ç«¯é¡µé¢å¼€å‘æ•ˆç‡...\n\n#### é…ç½®ä½¿ç”¨ HMR\n\n> `HMR` æ˜¯ `webpack` æä¾›çš„éå¸¸æœ‰ç”¨çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œè·Ÿæˆ‘ä»¬ä¹‹å‰æåˆ°çš„ä¸€æ ·ï¼Œå®‰è£…å¥½ `webpack-dev-server`ï¼Œ æ·»åŠ ä¸€äº›ç®€å•çš„é…ç½®ï¼Œå³åœ¨ `webpack` çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¯ç”¨ `HMR` éœ€è¦çš„ä¸¤ä¸ªæ’ä»¶\n\n```js\nconst webpack = require('webpack');\n\nmodule.exports = {\n  // ...\n  devServer: {\n    hot: true // dev server çš„é…ç½®è¦å¯åŠ¨ hotï¼Œæˆ–è€…åœ¨å‘½ä»¤è¡Œä¸­å¸¦å‚æ•°å¼€å¯\n  },\n  plugins: [\n    // ...\n    new webpack.NamedModulesPlugin(), // ç”¨äºå¯åŠ¨ HMR æ—¶å¯ä»¥æ˜¾ç¤ºæ¨¡å—çš„ç›¸å¯¹è·¯å¾„\n    new webpack.HotModuleReplacementPlugin() // Hot Module Replacement çš„æ’ä»¶\n  ]\n};\n```\n\n#### module.hot å¸¸è§çš„ API\n\n> å‰é¢ `HMR` å®ç°éƒ¨åˆ†å·²ç»è®²è§£äº†å®ç° HMR æ¥å£çš„é‡è¦æ€§ï¼Œä¸‹é¢æ¥çœ‹çœ‹å¸¸è§çš„ `module.hot` `API` æœ‰å“ªäº›ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨\n\n- `module.hot.accept` æ–¹æ³•æŒ‡å®šåœ¨åº”ç”¨ç‰¹å®šä»£ç æ¨¡å—æ›´æ–°æ—¶æ‰§è¡Œç›¸åº”çš„ `callback`ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–è€…æ•°ç»„ï¼Œå¦‚\n\n```js\nif (module.hot) {\n  module.hot.accept(['./bar.js', './index.css'], () => {\n    // ... è¿™æ ·å½“ bar.js æˆ–è€… index.css æ›´æ–°æ—¶éƒ½ä¼šæ‰§è¡Œè¯¥å‡½æ•°\n  });\n}\n```\n\n- `module.hot.decline` å¯¹äºæŒ‡å®šçš„ä»£ç æ¨¡å—ï¼Œæ‹’ç»è¿›è¡Œæ¨¡å—ä»£ç çš„æ›´æ–°ï¼Œè¿›å…¥æ›´æ–°å¤±è´¥çŠ¶æ€ï¼Œå¦‚ `module.hot.decline('./bar.js')`ã€‚è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒå°‘ç”¨åˆ°\n- `module.hot.dispose` ç”¨äºæ·»åŠ ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œåœ¨å½“å‰æ¨¡å—ä»£ç è¢«æ›¿æ¢æ—¶è¿è¡Œè¯¥å‡½æ•°ï¼Œä¾‹å¦‚\n\n```js\nif (module.hot) {\n  module.hot.dispose(data => {\n    // data ç”¨äºä¼ é€’æ•°æ®ï¼Œå¦‚æœæœ‰éœ€è¦ä¼ é€’çš„æ•°æ®å¯ä»¥æŒ‚åœ¨ data å¯¹è±¡ä¸Šï¼Œç„¶ååœ¨æ¨¡å—ä»£ç æ›´æ–°åå¯ä»¥é€šè¿‡ module.hot.data æ¥è·å–\n  });\n}\n```\n\n- `module.hot.accept` é€šå¸¸ç”¨äºæŒ‡å®šå½“å‰ä¾èµ–çš„æŸä¸ªæ¨¡å—æ›´æ–°æ—¶éœ€è¦åšçš„å¤„ç†ï¼Œå¦‚æœæ˜¯å½“å‰æ¨¡å—æ›´æ–°æ—¶éœ€è¦å¤„ç†çš„åŠ¨ä½œï¼Œä½¿ç”¨ `module.hot.dispose` ä¼šæ›´åŠ å®¹æ˜“æ–¹ä¾¿\n- `module.hot.removeDisposeHandler` ç”¨äºç§»é™¤ `dispose` æ–¹æ³•æ·»åŠ çš„ `callback`\n\n### å›¾ç‰‡åŠ è½½ä¼˜åŒ–\n\n#### CSS Sprites\n\n- å¦‚æœä½ ä½¿ç”¨çš„ `webpack 3.x` ç‰ˆæœ¬ï¼Œéœ€è¦ `CSS Sprites` çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ `webpack-spritesmith` æˆ–è€… `sprite-webpack-plugin`ã€‚\n- æˆ‘ä»¬ä»¥ `webpack-spritesmith` ä¸ºä¾‹ï¼Œå…ˆå®‰è£…ä¾èµ–...\n\n```js\nmodule: {\n  loaders: [\n    // ... è¿™é‡Œéœ€è¦æœ‰å¤„ç†å›¾ç‰‡çš„ loaderï¼Œå¦‚ file-loader\n  ]\n},\nresolve: {\n  modules: [\n    'node_modules',\n    'spritesmith-generated', // webpack-spritesmith ç”Ÿæˆæ‰€éœ€æ–‡ä»¶çš„ç›®å½•\n  ],\n},\nplugins: [\n  new SpritesmithPlugin({\n    src: {\n      cwd: path.resolve(__dirname, 'src/ico'), // å¤šä¸ªå›¾ç‰‡æ‰€åœ¨çš„ç›®å½•\n      glob: '*.png' // åŒ¹é…å›¾ç‰‡çš„è·¯å¾„\n    },\n    target: {\n      // ç”Ÿæˆæœ€ç»ˆå›¾ç‰‡çš„è·¯å¾„\n      image: path.resolve(__dirname, 'src/spritesmith-generated/sprite.png'),\n      // ç”Ÿæˆæ‰€éœ€ SASS/LESS/Stylus mixins ä»£ç ï¼Œæˆ‘ä»¬ä½¿ç”¨ Stylus é¢„å¤„ç†å™¨åšä¾‹å­\n      css: path.resolve(__dirname, 'src/spritesmith-generated/sprite.styl'),\n    },\n    apiOptions: {\n      cssImageRef: \"~sprite.png\"\n    },\n  }),\n],\n```\n\n> åœ¨ä½ éœ€è¦çš„æ ·å¼ä»£ç ä¸­å¼•å…¥ `sprite.styl` åè°ƒç”¨éœ€è¦çš„ `mixins` å³å¯\n\n```plain\n@import '~sprite.styl'\n\n.close-button\n    sprite($close)\n.open-button\n    sprite($open)\n```\n\n> å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ `webpack 4.x`ï¼Œä½ éœ€è¦é…åˆä½¿ç”¨ `postcss` å’Œ `postcss-sprites`ï¼Œæ‰èƒ½å®ç° `CSS Sprites` çš„ç›¸å…³æ„å»º\n\n#### å›¾ç‰‡å‹ç¼©\n\n- åœ¨ä¸€èˆ¬çš„é¡¹ç›®ä¸­ï¼Œå›¾ç‰‡èµ„æºä¼šå å‰ç«¯èµ„æºçš„å¾ˆå¤§ä¸€éƒ¨åˆ†ï¼Œæ—¢ç„¶ä»£ç éƒ½è¿›è¡Œå‹ç¼©äº†ï¼Œå å¤§å¤´çš„å›¾ç‰‡å°±æ›´ä¸ç”¨è¯´äº†\n- æˆ‘ä»¬ä¹‹å‰æåŠä½¿ç”¨ `file-loader` æ¥å¤„ç†å›¾ç‰‡æ–‡ä»¶ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å†æ·»åŠ ä¸€ä¸ª `image-webpack-loader` æ¥å‹ç¼©å›¾ç‰‡æ–‡ä»¶ã€‚ç®€å•çš„é…ç½®å¦‚ä¸‹...\n\n```js\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /.*\\.(gif|png|jpe?g|svg|webp)$/i,\n        use: [\n          {\n            loader: 'file-loader',\n            options: {}\n          },\n          {\n            loader: 'image-webpack-loader',\n            options: {\n              mozjpeg: { // å‹ç¼© jpeg çš„é…ç½®\n                progressive: true,\n                quality: 65\n              },\n              optipng: { // ä½¿ç”¨ imagemin-optipng å‹ç¼© pngï¼Œenable: false ä¸ºå…³é—­\n                enabled: false,\n              },\n              pngquant: { // ä½¿ç”¨ imagemin-pngquant å‹ç¼© png\n                quality: '65-90',\n                speed: 4\n              },\n              gifsicle: { // å‹ç¼© gif çš„é…ç½®\n                interlaced: false,\n              },\n              webp: { // å¼€å¯ webpï¼Œä¼šæŠŠ jpg å’Œ png å›¾ç‰‡å‹ç¼©ä¸º webp æ ¼å¼\n                quality: 75\n              },\n          },\n        ],\n      },\n    ],\n  },\n};\n```\n\n#### ä½¿ç”¨ DataURL\n\n> æœ‰çš„æ—¶å€™æˆ‘ä»¬çš„é¡¹ç›®ä¸­ä¼šæœ‰ä¸€äº›å¾ˆå°çš„å›¾ç‰‡ï¼Œå› ä¸ºæŸäº›ç¼˜æ•…å¹¶ä¸æƒ³ä½¿ç”¨ `CSS Sprites` çš„æ–¹å¼æ¥å¤„ç†ï¼ˆè­¬å¦‚å°å›¾ç‰‡ä¸å¤šï¼Œå› æ­¤å¼•å…¥ CSS Sprites æ„Ÿè§‰éº»çƒ¦ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨ webpack ä¸­ä½¿ç”¨ `url-loader` æ¥å¤„ç†è¿™äº›å¾ˆå°çš„å›¾ç‰‡...\n\n- `url-loader` å’Œ `file-loader` çš„åŠŸèƒ½ç±»ä¼¼ï¼Œä½†æ˜¯åœ¨å¤„ç†æ–‡ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡é…ç½®æŒ‡å®šä¸€ä¸ªå¤§å°ï¼Œå½“æ–‡ä»¶å°äºè¿™ä¸ªé…ç½®å€¼æ—¶ï¼Œ`url-loader` ä¼šå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª `base64` ç¼–ç çš„ `DataURL`ï¼Œé…ç½®å¦‚ä¸‹\n\n```js\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\.(png|jpg|gif)$/,\n        use: [\n          {\n            loader: 'url-loader',\n            options: {\n              limit: 8192 // å•ä½æ˜¯ Byteï¼Œå½“æ–‡ä»¶å°äº 8KB æ—¶ä½œä¸º DataURL å¤„ç†\n            }\n          }\n        ]\n      }\n    ]\n  }\n};\n```\n\n#### ä»£ç å‹ç¼©\n\n- `webpack 4.x` ç‰ˆæœ¬è¿è¡Œæ—¶ï¼Œ`mode` ä¸º `production` å³ä¼šå¯åŠ¨å‹ç¼© `JS` ä»£ç çš„æ’ä»¶ï¼Œè€Œå¯¹äº `webpack` `3.x`ï¼Œä½¿ç”¨å‹ç¼© `JS` ä»£ç æ’ä»¶çš„æ–¹å¼ä¹Ÿå·²ç»ä»‹ç»è¿‡äº†ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå‹ç¼© `JS` ä»£ç åŸºæœ¬æ˜¯ä¸€ä¸ªå¿…ä¸å¯å°‘çš„æ­¥éª¤ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å° `JavaScript` çš„ä½“ç§¯ï¼Œç›¸å…³å†…å®¹è¿™é‡Œä¸å†èµ˜è¿°ã€‚\n- é™¤äº† JS ä»£ç ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¸€èˆ¬è¿˜éœ€è¦ HTML å’Œ CSS æ–‡ä»¶ï¼Œè¿™ä¸¤ç§æ–‡ä»¶ä¹Ÿéƒ½æ˜¯å¯ä»¥å‹ç¼©çš„ï¼Œè™½ç„¶ä¸åƒ JS çš„å‹ç¼©é‚£ä¹ˆå½»åº•ï¼ˆæ›¿æ¢æ‰é•¿å˜é‡ç­‰ï¼‰ï¼Œåªèƒ½ç§»é™¤ç©ºæ ¼æ¢è¡Œç­‰æ— ç”¨å­—ç¬¦ï¼Œä½†ä¹Ÿèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°æ–‡ä»¶å¤§å°ã€‚åœ¨ webpack ä¸­çš„é…ç½®ä½¿ç”¨ä¹Ÿä¸æ˜¯ç‰¹åˆ«éº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¹Ÿä¼šä½¿ç”¨ã€‚\n- å¯¹äº HTML æ–‡ä»¶ï¼Œä¹‹å‰ä»‹ç»çš„ `html-webpack-plugin` æ’ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆéœ€è¦çš„ HTML å¹¶å¯¹å…¶è¿›è¡Œå‹ç¼©...\n\n```js\nmodule.exports = {\n  // ...\n  plugins: [\n    new HtmlWebpackPlugin({\n      filename: 'index.html', // é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„\n      template: 'assets/index.html', // é…ç½®æ–‡ä»¶æ¨¡æ¿\n      minify: {\n        // å‹ç¼© HTML çš„é…ç½®\n        minifyCSS: true, // å‹ç¼© HTML ä¸­å‡ºç°çš„ CSS ä»£ç \n        minifyJS: true // å‹ç¼© HTML ä¸­å‡ºç°çš„ JS ä»£ç \n      }\n    })\n  ]\n};\n```\n\n- å¦‚ä¸Šï¼Œä½¿ç”¨ `minify` å­—æ®µé…ç½®å°±å¯ä»¥ä½¿ç”¨ `HTML` å‹ç¼©ï¼Œè¿™ä¸ªæ’ä»¶æ˜¯ä½¿ç”¨ `html-minifier` æ¥å®ç° `HTML` ä»£ç å‹ç¼©çš„ï¼Œ`minify` ä¸‹çš„é…ç½®é¡¹ç›´æ¥é€ä¼ ç»™ `html-minifier`ï¼Œé…ç½®é¡¹å‚è€ƒ `html-minifier` æ–‡æ¡£å³å¯ã€‚\n- å¯¹äº CSS æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¹‹å‰ä»‹ç»è¿‡ç”¨æ¥å¤„ç† CSS æ–‡ä»¶çš„ `css-loader`ï¼Œä¹Ÿæä¾›äº†å‹ç¼© CSS ä»£ç çš„åŠŸèƒ½ï¼š\n\n```js\nmodule.exports = {\n  module: {\n    rules: [\n      // ...\n      {\n        test: /\\.css/,\n        include: [path.resolve(__dirname, 'src')],\n        use: [\n          'style-loader',\n          {\n            loader: 'css-loader',\n            options: {\n              minimize: true // ä½¿ç”¨ css çš„å‹ç¼©åŠŸèƒ½\n            }\n          }\n        ]\n      }\n    ]\n  }\n};\n```\n\n> åœ¨ `css-loader` çš„é€‰é¡¹ä¸­é…ç½® `minimize` å­—æ®µä¸º `true` æ¥ä½¿ç”¨ `CSS` å‹ç¼©ä»£ç çš„åŠŸèƒ½ã€‚`css-loader` æ˜¯ä½¿ç”¨ `cssnano` æ¥å‹ç¼©ä»£ç çš„ï¼Œ`minimize` å­—æ®µä¹Ÿå¯ä»¥é…ç½®ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œæ¥å°†ç›¸å…³é…ç½®ä¼ é€’ç»™ `cssnano`\n\n### åˆ†ç¦»ä»£ç æ–‡ä»¶\n\n- å…³äºåˆ†ç¦» CSS æ–‡ä»¶è¿™ä¸ªä¸»é¢˜ï¼Œä¹‹å‰åœ¨ä»‹ç»å¦‚ä½•æ­å»ºåŸºæœ¬çš„å‰ç«¯å¼€å‘ç¯å¢ƒæ—¶æœ‰æåŠï¼Œåœ¨ `webpack` ä¸­ä½¿ç”¨ `extract-text-webpack-plugin` æ’ä»¶å³å¯ã€‚\n- å…ˆç®€å•è§£é‡Šä¸€ä¸‹ä¸ºä½•è¦æŠŠ CSS æ–‡ä»¶åˆ†ç¦»å‡ºæ¥ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¸€èµ·æ‰“åŒ…åœ¨ JS ä¸­ã€‚æœ€ä¸»è¦çš„åŸå› æ˜¯æˆ‘ä»¬å¸Œæœ›æ›´å¥½åœ°åˆ©ç”¨ç¼“å­˜ã€‚\n- å‡è®¾æˆ‘ä»¬åŸæœ¬é¡µé¢çš„é™æ€èµ„æºéƒ½æ‰“åŒ…æˆä¸€ä¸ª JS æ–‡ä»¶ï¼ŒåŠ è½½é¡µé¢æ—¶è™½ç„¶åªéœ€è¦åŠ è½½ä¸€ä¸ª JS æ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ä»£ç ä¸€æ—¦æ”¹å˜äº†ï¼Œç”¨æˆ·è®¿é—®æ–°çš„é¡µé¢æ—¶å°±éœ€è¦é‡æ–°åŠ è½½ä¸€ä¸ªæ–°çš„ JS æ–‡ä»¶ã€‚æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªæ˜¯å•ç‹¬ä¿®æ”¹äº†æ ·å¼ï¼Œè¿™æ ·ä¹Ÿè¦é‡æ–°åŠ è½½æ•´ä¸ªåº”ç”¨çš„ JS æ–‡ä»¶ï¼Œç›¸å½“ä¸åˆ’ç®—ã€‚\n- è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯æˆ‘ä»¬æœ‰å¤šä¸ªé¡µé¢ï¼Œå®ƒä»¬éƒ½å¯ä»¥å…±ç”¨ä¸€éƒ¨åˆ†æ ·å¼ï¼ˆè¿™æ˜¯å¾ˆå¸¸è§çš„ï¼ŒCSS Resetã€åŸºç¡€ç»„ä»¶æ ·å¼ç­‰åŸºæœ¬éƒ½æ˜¯è·¨é¡µé¢é€šç”¨ï¼‰ï¼Œå¦‚æœæ¯ä¸ªé¡µé¢éƒ½å•ç‹¬æ‰“åŒ…ä¸€ä¸ª JS æ–‡ä»¶ï¼Œé‚£ä¹ˆæ¯æ¬¡è®¿é—®é¡µé¢éƒ½ä¼šé‡å¤åŠ è½½åŸæœ¬å¯ä»¥å…±äº«çš„é‚£äº› CSS ä»£ç ã€‚å¦‚æœåˆ†ç¦»å¼€æ¥ï¼Œç¬¬äºŒä¸ªé¡µé¢å°±æœ‰äº† CSS æ–‡ä»¶çš„ç¼“å­˜ï¼Œè®¿é—®é€Ÿåº¦è‡ªç„¶ä¼šåŠ å¿«ã€‚è™½ç„¶å¯¹ç¬¬ä¸€ä¸ªé¡µé¢æ¥è¯´å¤šäº†ä¸€ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯å¯¹éšåçš„é¡µé¢æ¥è¯´ï¼Œç¼“å­˜å¸¦æ¥çš„é€Ÿåº¦æå‡ç›¸å¯¹æ›´åŠ å¯è§‚\n\n> `3.x` ä»¥å‰çš„ç‰ˆæœ¬æ˜¯ä½¿ç”¨ `CommonsChunkPlugin` æ¥åšä»£ç åˆ†ç¦»çš„ï¼Œè€Œ `webpack 4.x` åˆ™æ˜¯æŠŠç›¸å…³çš„åŠŸèƒ½åŒ…åˆ°äº† `optimize.splitChunks` ä¸­ï¼Œç›´æ¥ä½¿ç”¨è¯¥é…ç½®å°±å¯ä»¥å®ç°ä»£ç åˆ†ç¦»ã€‚\n\n#### webpack 4.x çš„ optimization\n\n```js\nmodule.exports = {\n  // ... webpack é…ç½®\n\n  optimization: {\n    splitChunks: {\n      chunks: 'all' // æ‰€æœ‰çš„ chunks ä»£ç å…¬å…±çš„éƒ¨åˆ†åˆ†ç¦»å‡ºæ¥æˆä¸ºä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶\n    }\n  }\n};\n```\n\n> æˆ‘ä»¬éœ€è¦åœ¨ HTML ä¸­å¼•ç”¨ä¸¤ä¸ªæ„å»ºå‡ºæ¥çš„ JS æ–‡ä»¶ï¼Œå¹¶ä¸” `commons.js` éœ€è¦åœ¨å…¥å£ä»£ç ä¹‹å‰ã€‚ä¸‹é¢æ˜¯ä¸ªç®€å•çš„ä¾‹å­\n\n```html\n<script src=\"commons.js\" charset=\"utf-8\"></script>\n<script src=\"entry.bundle.js\" charset=\"utf-8\"></script>\n```\n\n> å¦‚æœä½ ä½¿ç”¨äº† `html-webpack-plugin`ï¼Œé‚£ä¹ˆå¯¹åº”éœ€è¦çš„ JS æ–‡ä»¶éƒ½ä¼šåœ¨ HTML æ–‡ä»¶ä¸­æ­£ç¡®å¼•ç”¨ï¼Œä¸ç”¨æ‹…å¿ƒã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨ï¼Œé‚£ä¹ˆä½ éœ€è¦ä» `stats` çš„ `entrypoints` å±æ€§æ¥è·å–å…¥å£åº”è¯¥å¼•ç”¨å“ªäº› JS æ–‡ä»¶ï¼Œå¯ä»¥å‚è€ƒ Node API äº†è§£å¦‚ä½•ä» stats ä¸­è·å–ä¿¡æ¯\n\n**æ˜¾å¼é…ç½®å…±äº«ç±»åº“å¯ä»¥è¿™ä¹ˆæ“ä½œ**\n\n```js\nmodule.exports = {\n  entry: {\n    vendor: [\"react\", \"lodash\", \"angular\", ...], // æŒ‡å®šå…¬å…±ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹ç±»åº“\n  },\n  optimization: {\n    splitChunks: {\n      cacheGroups: {\n        vendor: {\n          chunks: \"initial\",\n          test: \"vendor\",\n          name: \"vendor\", // ä½¿ç”¨ vendor å…¥å£ä½œä¸ºå…¬å…±éƒ¨åˆ†\n          enforce: true,\n        },\n      },\n    },\n  },\n  // ... å…¶ä»–é…ç½®\n}\n\n// æˆ–è€…\nmodule.exports = {\n  optimization: {\n    splitChunks: {\n      cacheGroups: {\n        vendor: {\n          test: /react|angluar|lodash/, // ç›´æ¥ä½¿ç”¨ test æ¥åšè·¯å¾„åŒ¹é…\n          chunks: \"initial\",\n          name: \"vendor\",\n          enforce: true,\n        },\n      },\n    },\n  },\n}\n\n// æˆ–è€…\nmodule.exports = {\n  optimization: {\n    splitChunks: {\n      cacheGroups: {\n        vendor: {\n          chunks: \"initial\",\n          test: path.resolve(__dirname, \"node_modules\") // è·¯å¾„åœ¨ node_modules ç›®å½•ä¸‹çš„éƒ½ä½œä¸ºå…¬å…±éƒ¨åˆ†\n          name: \"vendor\", // ä½¿ç”¨ vendor å…¥å£ä½œä¸ºå…¬å…±éƒ¨åˆ†\n          enforce: true,\n        },\n      },\n    },\n  },\n}\n```\n\n> ä¸Šè¿°ç¬¬ä¸€ç§åšæ³•æ˜¯æ˜¾ç¤ºæŒ‡å®šå“ªäº›ç±»åº“ä½œä¸ºå…¬å…±éƒ¨åˆ†ï¼Œç¬¬äºŒç§åšæ³•å®ç°çš„åŠŸèƒ½å·®ä¸å¤šï¼Œåªæ˜¯åˆ©ç”¨äº† test æ¥åšæ¨¡å—è·¯å¾„çš„åŒ¹é…ï¼Œç¬¬ä¸‰ç§åšæ³•æ˜¯æŠŠæ‰€æœ‰åœ¨ node_modules ä¸‹çš„æ¨¡å—ï¼Œå³ä½œä¸ºä¾èµ–å®‰è£…çš„ï¼Œéƒ½ä½œä¸ºå…¬å…±éƒ¨åˆ†ã€‚ä½ å¯ä»¥é’ˆå¯¹é¡¹ç›®æƒ…å†µï¼Œé€‰æ‹©æœ€åˆé€‚çš„åšæ³•\n\n#### webpack 3.x çš„ CommonsChunkPlugin\n\n> `webpack 3.x` ä»¥ä¸‹çš„ç‰ˆæœ¬éœ€è¦ç”¨åˆ° webpack è‡ªèº«æä¾›çš„ `CommonsChunkPlugin` æ’ä»¶ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­\n\n```js\nmodule.exports = {\n  // ...\n  plugins: [\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'commons', // å…¬å…±ä½¿ç”¨çš„ chunk çš„åç§°\n      filename: 'commons.js', // å…¬å…± chunk çš„ç”Ÿæˆæ–‡ä»¶å\n      minChunks: 3 // å…¬å…±çš„éƒ¨åˆ†å¿…é¡»è¢« 3 ä¸ª chunk å…±äº«\n    })\n  ]\n};\n```\n\n- `chunk` åœ¨è¿™é‡Œæ˜¯æ„å»ºçš„ä¸»å¹²ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ä¸ªå…¥å£å¯¹åº”ä¸€ä¸ª `chunk`ã€‚\n- ä»¥ä¸Šæ’ä»¶é…ç½®åœ¨æ„å»ºåä¼šç”Ÿæˆä¸€ä¸ª `commons.js` æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å°±æ˜¯ä»£ç ä¸­çš„å…¬å…±éƒ¨åˆ†ã€‚ä¸Šé¢çš„é…ç½®ä¸­ `minChunks` å­—æ®µä¸º 3ï¼Œè¯¥å­—æ®µçš„æ„æ€æ˜¯å½“ä¸€ä¸ªæ¨¡å—è¢« 3 ä¸ªä»¥ä¸Šçš„ `chunk` ä¾èµ–æ—¶ï¼Œè¿™ä¸ªæ¨¡å—å°±ä¼šè¢«åˆ’åˆ†åˆ° `commons chunk` ä¸­å»ã€‚å•ä»è¿™ä¸ªé…ç½®çš„è§’åº¦ä¸Šè®²ï¼Œè¿™ç§æ–¹å¼å¹¶æ²¡æœ‰ `4.x` çš„ `chunks: \"all\"` é‚£ä¹ˆæ–¹ä¾¿ã€‚\n\n**CommonsChunkPlugin ä¹Ÿæ˜¯æ”¯æŒæ˜¾å¼é…ç½®å…±äº«ç±»åº“çš„**\n\n```js\nmodule.exports = {\n  entry: {\n    vendor: ['react', 'react-redux'], // æŒ‡å®šå…¬å…±ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹ç±»åº“\n    app: './src/entry',\n    // ...\n  },\n  // ...\n  plugins: [\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'vendor' // ä½¿ç”¨ vendor å…¥å£ä½œä¸ºå…¬å…±éƒ¨åˆ†\n      filename: \"vendor.js\",\n      minChunks: Infinity, // è¿™ä¸ªé…ç½®ä¼šè®© webpack ä¸å†è‡ªåŠ¨æŠ½ç¦»å…¬å…±æ¨¡å—\n    }),\n  ],\n}\n```\n\n> ä¸Šè¿°é…ç½®ä¼šç”Ÿæˆä¸€ä¸ªåä¸º `vendor.js` çš„å…±äº«ä»£ç æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº† `React` å’Œ `React-Redux` åº“çš„ä»£ç ï¼Œå¯ä»¥æä¾›ç»™å¤šä¸ªä¸åŒçš„å…¥å£ä»£ç ä½¿ç”¨ã€‚è¿™é‡Œçš„ `minChunks` å­—æ®µçš„é…ç½®ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† `Infinity`ï¼Œå¯ä»¥ç†è§£ä¸º `webpack` ä¸è‡ªåŠ¨æŠ½ç¦»å…¬å…±æ¨¡å—ã€‚å¦‚æœè¿™é‡Œå’Œä¹‹å‰ä¸€æ ·ä¾æ—§è®¾ç½®ä¸º 3ï¼Œé‚£ä¹ˆè¢« 3 ä¸ªä»¥ä¸Šçš„ `chunk` ä¾èµ–çš„æ¨¡å—ä¼šå’Œ `React`ã€`React-Redux` ä¸€åŒæ‰“åŒ…è¿› `vendor`ï¼Œè¿™æ ·å°±å¤±å»æ˜¾å¼æŒ‡å®šçš„æ„ä¹‰äº†ã€‚\n\n> `minChunks` å…¶å®è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚ï¼š\n\n```js\nminChunks: (module, count) => {\n  console.log(module, count);\n  return true;\n},\n```\n\n> è¯¥å‡½æ•°åœ¨åˆ†ææ¯ä¸€ä¸ªä¾èµ–çš„æ—¶å€™ä¼šè¢«è°ƒç”¨ï¼Œä¼ å…¥å½“å‰ä¾èµ–æ¨¡å—çš„ä¿¡æ¯ `module`ï¼Œä»¥åŠå·²ç»è¢«ä½œä¸ºå…¬å…±æ¨¡å—çš„æ•°é‡ `count`ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°ä¸­é’ˆå¯¹æ¯ä¸€ä¸ªæ¨¡å—åšæ›´åŠ ç²¾ç»†åŒ–çš„æ§åˆ¶ã€‚çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\n\n```js\nminChunks: (module, count) => {\n  return module.context && module.context.includes(\"node_modules\");\n  // node_modules ç›®å½•ä¸‹çš„æ¨¡å—éƒ½ä½œä¸ºå…¬å…±éƒ¨åˆ†ï¼Œæ•ˆæœå°±å¦‚åŒ webpack 4.x ä¸­çš„ test: path.resolve(__dirname, \"node_modules\")\n},\n```\n\n- æ›´å¤šä½¿ç”¨ `CommonsChunkPlugin` çš„é…ç½®å‚è€ƒå®˜æ–¹æ–‡æ¡£ `commons-chunk-plugin`ã€‚\n\n### è¿›ä¸€æ­¥æ§åˆ¶ JS å¤§å°\n\n#### æŒ‰éœ€åŠ è½½æ¨¡å—\n\n> åœ¨ webpack çš„æ„å»ºç¯å¢ƒä¸­ï¼Œè¦æŒ‰éœ€åŠ è½½ä»£ç æ¨¡å—å¾ˆç®€å•ï¼Œéµå¾ª ES æ ‡å‡†çš„åŠ¨æ€åŠ è½½è¯­æ³• `dynamic-import` æ¥ç¼–å†™ä»£ç å³å¯ï¼Œ`webpack` ä¼šè‡ªåŠ¨å¤„ç†ä½¿ç”¨è¯¥è¯­æ³•ç¼–å†™çš„æ¨¡å—\n\n```js\n// import ä½œä¸ºä¸€ä¸ªæ–¹æ³•ä½¿ç”¨ï¼Œä¼ å…¥æ¨¡å—åå³å¯ï¼Œè¿”å›ä¸€ä¸ª promise æ¥è·å–æ¨¡å—æš´éœ²çš„å¯¹è±¡\n// æ³¨é‡Š webpackChunkName: \"lodash\" å¯ä»¥ç”¨äºæŒ‡å®š chunk çš„åç§°ï¼Œåœ¨è¾“å‡ºæ–‡ä»¶æ—¶æœ‰ç”¨\nimport(/* webpackChunkName: \"lodash\" */ 'lodash').then((_) => {\n  console.log(_.lash([1, 2, 3])) // æ‰“å° 3\n})\n```\n\n- æ³¨æ„ä¸€ä¸‹ï¼Œå¦‚æœä½ ä½¿ç”¨äº† `Babel` çš„è¯ï¼Œè¿˜éœ€è¦ `Syntax Dynamic Import` è¿™ä¸ª `Babel` æ’ä»¶æ¥å¤„ç† `import()` è¿™ç§è¯­æ³•ã€‚\n- ç”±äºåŠ¨æ€åŠ è½½ä»£ç æ¨¡å—çš„è¯­æ³•ä¾èµ–äº `promise`ï¼Œå¯¹äºä½ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼Œéœ€è¦æ·»åŠ  `promise` çš„ `polyfill` åæ‰èƒ½ä½¿ç”¨ã€‚\n- å¦‚ä¸Šçš„ä»£ç ï¼Œwebpack æ„å»ºæ—¶ä¼šè‡ªåŠ¨æŠŠ `lodash` æ¨¡å—åˆ†ç¦»å‡ºæ¥ï¼Œå¹¶ä¸”åœ¨ä»£ç å†…éƒ¨å®ç°åŠ¨æ€åŠ è½½ `lodash` çš„åŠŸèƒ½ã€‚åŠ¨æ€åŠ è½½ä»£ç æ—¶ä¾èµ–äºç½‘ç»œï¼Œå…¶æ¨¡å—å†…å®¹ä¼šå¼‚æ­¥è¿”å›ï¼Œæ‰€ä»¥ import æ–¹æ³•æ˜¯è¿”å›ä¸€ä¸ª `promise` æ¥è·å–åŠ¨æ€åŠ è½½çš„æ¨¡å—å†…å®¹ã€‚\n- `import` åé¢çš„æ³¨é‡Š `webpackChunkName: \"lodash\"` ç”¨äºå‘ŠçŸ¥ `webpack` æ‰€è¦åŠ¨æ€åŠ è½½æ¨¡å—çš„åç§°ã€‚æˆ‘ä»¬åœ¨ webpack é…ç½®ä¸­æ·»åŠ ä¸€ä¸ª `output.chunkFilename` çš„é…ç½®...\n\n```js\noutput: {\n  path: path.resolve(__dirname, 'dist'),\n  filename: '[name].[hash:8].js',\n  chunkFilename: '[name].[hash:8].js' // æŒ‡å®šåˆ†ç¦»å‡ºæ¥çš„ä»£ç æ–‡ä»¶çš„åç§°\n},\n```\n\n> è¿™æ ·å°±å¯ä»¥æŠŠåˆ†ç¦»å‡ºæ¥çš„æ–‡ä»¶åç§°ç”¨ lodash æ ‡è¯†äº†ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![image.png](https://upload-images.jianshu.io/upload_images/1480597-ae36b6816feed422.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n> å¦‚æœæ²¡æœ‰æ·»åŠ æ³¨é‡Š `webpackChunkName: \"lodash\" ä»¥åŠ output.chunkFilename` é…ç½®ï¼Œé‚£ä¹ˆåˆ†ç¦»å‡ºæ¥çš„æ–‡ä»¶åç§°ä¼šä»¥ç®€å•æ•°å­—çš„æ–¹å¼æ ‡è¯†ï¼Œä¸ä¾¿äºè¯†åˆ«\n\n#### ä»¥ä¸Šå®Œæ•´ç¤ºä¾‹ä»£ç \n\n```js\nconst path = require('path');\nconst webpack = require('webpack');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\n\nmodule.exports = {\n  entry: './src/index.js',\n\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: '[name].js'\n  },\n\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?/,\n        include: [path.resolve(__dirname, 'src')],\n        use: 'babel-loader'\n      },\n      {\n        test: /\\.less$/,\n        use: ExtractTextPlugin.extract({\n          fallback: 'style-loader',\n          use: ['css-loader', 'postcss-loader', 'less-loader']\n        })\n      },\n      {\n        test: /\\.(png|jpg|gif)$/,\n        use: [\n          {\n            loader: 'url-loader',\n            options: {\n              limit: 8192\n            }\n          },\n          {\n            loader: 'image-webpack-loader',\n            options: {\n              mozjpeg: {\n                // å‹ç¼© jpeg çš„é…ç½®\n                progressive: true,\n                quality: 65\n              },\n              optipng: {\n                // ä½¿ç”¨ imagemin-optipng å‹ç¼© pngï¼Œenable: false ä¸ºå…³é—­\n                enabled: false\n              },\n              pngquant: {\n                // ä½¿ç”¨ imagemin-pngquant å‹ç¼© png\n                quality: '65-90',\n                speed: 4\n              },\n              gifsicle: {\n                // å‹ç¼© gif çš„é…ç½®\n                interlaced: false\n              },\n              webp: {\n                // å¼€å¯ webpï¼Œä¼šæŠŠ jpg å’Œ png å›¾ç‰‡å‹ç¼©ä¸º webp æ ¼å¼\n                quality: 75\n              }\n            }\n          }\n        ]\n      }\n    ]\n  },\n\n  optimization: {\n    splitChunks: {\n      cacheGroups: {\n        vendor: {\n          chunks: 'initial',\n          test: path.resolve(__dirname, 'node_modules'), // è·¯å¾„åœ¨ node_modules ç›®å½•ä¸‹çš„éƒ½ä½œä¸ºå…¬å…±éƒ¨åˆ†\n          name: 'vendor', // ä½¿ç”¨ vendor å…¥å£ä½œä¸ºå…¬å…±éƒ¨åˆ†\n          enforce: true\n        }\n      }\n    }\n  },\n\n  plugins: [\n    new HtmlWebpackPlugin({\n      filename: 'index.html', // é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„\n      template: 'src/index.html', // é…ç½®æ–‡ä»¶æ¨¡æ¿\n      minify: {\n        // å‹ç¼© HTML çš„é…ç½®\n        minifyCSS: true, // å‹ç¼© HTML ä¸­å‡ºç°çš„ CSS ä»£ç \n        minifyJS: true, // å‹ç¼© HTML ä¸­å‡ºç°çš„ JS ä»£ç \n        removeComments: true\n      }\n    }),\n    new ExtractTextPlugin('[name].css'),\n    new webpack.NamedModulesPlugin(),\n    new webpack.HotModuleReplacementPlugin()\n  ],\n\n  devServer: {\n    hot: true\n  }\n};\n```\n","slug":"webpack4-å®šåˆ¶å‰ç«¯å¼€å‘ç¯å¢ƒ","published":1,"updated":"2019-12-07T04:59:35.928Z","layout":"post","photos":[],"link":"","_id":"ck3v60jtr000vr9q9raat5o53","content":"<p>æœ¬æ–‡æ€»ç»“äº† Webpack 4 çš„ä¸€äº›é…ç½®ç‚¹ï¼Œå¸Œæœ›é€šè¿‡å­¦ä¹ è¿™äº›é…ç½®ç‚¹ï¼Œé™ä½ä½¿ç”¨é—¨æ§›ã€‚çºµè§‚å‰ç«¯çš„æ‰“åŒ…å†å²ï¼Œä¼¼ä¹æ˜¯æ¬ äº†å¤ªå¤šå€ºï¼Œæœ‰å¾ˆå¤šå†å²åŒ…è¢±ï¼Œæ‰€ä»¥å·¥ç¨‹åŒ–è¿™ä¸€å—ä¸€ç›´æ˜¯ä¸€å¤§ç—›ç‚¹ã€‚é…ç½®ç¹çï¼Œå®¹æ˜“å‡ºé”™ï¼Œæœ¬æ–‡æ€»ç»“äº†æœ€æ–°çš„ Webpack 4 åŠŸèƒ½ç‚¹ï¼Œä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹ï¼Œå¯ä»¥ç‚¹å‡»å³ä¾§çš„æ–‡ç« ç›®å½•ç›´è¾¾ã€‚</p>\n<a id=\"more\"></a>\n<h3 id=\"webpack-æ¦‚å¿µå’ŒåŸºç¡€ä½¿ç”¨\"><a href=\"#webpack-æ¦‚å¿µå’ŒåŸºç¡€ä½¿ç”¨\" class=\"headerlink\" title=\"webpack æ¦‚å¿µå’ŒåŸºç¡€ä½¿ç”¨\"></a>webpack æ¦‚å¿µå’ŒåŸºç¡€ä½¿ç”¨</h3><h4 id=\"å®‰è£…å’Œä½¿ç”¨\"><a href=\"#å®‰è£…å’Œä½¿ç”¨\" class=\"headerlink\" title=\"å®‰è£…å’Œä½¿ç”¨\"></a>å®‰è£…å’Œä½¿ç”¨</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å®‰è£… webpack</span></span><br><span class=\"line\">$ npm install webpack webpack-cli -g</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># or</span></span><br><span class=\"line\">$ yarn global add webpack webpack-cli</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç„¶åå°±å¯ä»¥å…¨å±€æ‰§è¡Œå‘½ä»¤äº†</span></span><br><span class=\"line\">$ webpack --<span class=\"built_in\">help</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"webpack-çš„åŸºæœ¬æ¦‚å¿µ\"><a href=\"#webpack-çš„åŸºæœ¬æ¦‚å¿µ\" class=\"headerlink\" title=\"webpack çš„åŸºæœ¬æ¦‚å¿µ\"></a>webpack çš„åŸºæœ¬æ¦‚å¿µ</h4><blockquote>\n<p>webpack æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ‰“åŒ…å·¥å…·ï¼Œå®ƒä¼šæ ¹æ®ä»£ç çš„å†…å®¹è§£ææ¨¡å—ä¾èµ–ï¼Œå¸®åŠ©æˆ‘ä»¬æŠŠå¤šä¸ªæ¨¡å—çš„ä»£ç æ‰“åŒ…</p>\n</blockquote>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/59234564-f1cb0600-8c1f-11e9-8bdf-c6041410225a.png\" alt=\"image\"></p>\n<blockquote>\n<p>webpack ä¼šæŠŠæˆ‘ä»¬é¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„å¤šä¸ªä»£ç æ¨¡å—ï¼ˆå¯ä»¥æ˜¯ä¸åŒæ–‡ä»¶ç±»å‹ï¼‰ï¼Œæ‰“åŒ…æ„å»ºæˆé¡¹ç›®è¿è¡Œä»…éœ€è¦çš„å‡ ä¸ªé™æ€æ–‡ä»¶</p>\n</blockquote>\n<p><strong>å…¥å£ï¼ˆentryï¼‰</strong></p>\n<blockquote>\n<p>å…¥å£å¯ä»¥ä½¿ç”¨ <code>entry</code> å­—æ®µæ¥è¿›è¡Œé…ç½®ï¼Œ<code>webpack</code> æ”¯æŒé…ç½®å¤šä¸ªå…¥å£æ¥è¿›è¡Œæ„å»º</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: <span class=\"string\">'./src/index.js'</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¸Šè¿°é…ç½®ç­‰åŒäº</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: &#123;</span><br><span class=\"line\">    main: <span class=\"string\">'./src/index.js'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æˆ–è€…é…ç½®å¤šä¸ªå…¥å£</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: &#123;</span><br><span class=\"line\">    foo: <span class=\"string\">'./src/page-foo.js'</span>,</span><br><span class=\"line\">    bar: <span class=\"string\">'./src/page-bar.js'</span></span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨æ•°ç»„æ¥å¯¹å¤šä¸ªæ–‡ä»¶è¿›è¡Œæ‰“åŒ…</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: &#123;</span><br><span class=\"line\">    main: [<span class=\"string\">'./src/foo.js'</span>, <span class=\"string\">'./src/bar.js'</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><strong>è½¬æ¢å™¨ï¼ˆloaderï¼‰</strong></p>\n<blockquote>\n<p>å¯ä»¥æŠŠ <code>loader</code> ç†è§£ä¸ºæ˜¯ä¸€ä¸ªè½¬æ¢å™¨ï¼Œè´Ÿè´£æŠŠæŸç§æ–‡ä»¶æ ¼å¼çš„å†…å®¹è½¬æ¢æˆ webpack å¯ä»¥æ”¯æŒæ‰“åŒ…çš„æ¨¡å—</p>\n</blockquote>\n<ul>\n<li>å½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸åŒçš„ <code>loader</code> æ¥è§£æå¤„ç†ä¸åŒç±»å‹çš„æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>module.rules</code> å­—æ®µä¸‹æ¥é…ç½®ç›¸å…³çš„è§„åˆ™ï¼Œä¾‹å¦‚ä½¿ç”¨ <code>Babel</code> æ¥å¤„ç† <code>.js</code> æ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  rules: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      test: <span class=\"regexp\">/\\.jsx?/</span>, <span class=\"comment\">// åŒ¹é…æ–‡ä»¶è·¯å¾„çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œé€šå¸¸æˆ‘ä»¬éƒ½æ˜¯åŒ¹é…æ–‡ä»¶ç±»å‹åç¼€</span></span><br><span class=\"line\">      include: [</span><br><span class=\"line\">        path.resolve(__dirname, <span class=\"string\">'src'</span>) <span class=\"comment\">// æŒ‡å®šå“ªäº›è·¯å¾„ä¸‹çš„æ–‡ä»¶éœ€è¦ç»è¿‡ loader å¤„ç†</span></span><br><span class=\"line\">      ],</span><br><span class=\"line\">      use: <span class=\"string\">'babel-loader'</span>, <span class=\"comment\">// æŒ‡å®šä½¿ç”¨çš„ loader</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>æ’ä»¶ï¼ˆpluginï¼‰</strong></p>\n<blockquote>\n<p>æ¨¡å—ä»£ç è½¬æ¢çš„å·¥ä½œç”± <code>loader</code> æ¥å¤„ç†ï¼Œé™¤æ­¤ä¹‹å¤–çš„å…¶ä»–ä»»ä½•å·¥ä½œéƒ½å¯ä»¥äº¤ç”± <code>plugin</code> æ¥å®Œæˆã€‚é€šè¿‡æ·»åŠ æˆ‘ä»¬éœ€è¦çš„ <code>plugin</code>ï¼Œå¯ä»¥æ»¡è¶³æ›´å¤šæ„å»ºä¸­ç‰¹æ®Šçš„éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨å‹ç¼© <code>JS</code> ä»£ç çš„ <code>uglifyjs-webpack-plugin</code> æ’ä»¶ï¼Œåªéœ€åœ¨é…ç½®ä¸­é€šè¿‡ <code>plugins</code> å­—æ®µæ·»åŠ æ–°çš„ <code>plugin</code> å³å¯â€¦</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> UglifyPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'uglifyjs-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  plugins: [<span class=\"keyword\">new</span> UglifyPlugin()]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>plugin</code> ç†è®ºä¸Šå¯ä»¥å¹²æ¶‰ <code>webpack</code> æ•´ä¸ªæ„å»ºæµç¨‹ï¼Œå¯ä»¥åœ¨æµç¨‹çš„æ¯ä¸€ä¸ªæ­¥éª¤ä¸­å®šåˆ¶è‡ªå·±çš„æ„å»ºéœ€æ±‚</p>\n</blockquote>\n<p><strong>è¾“å‡ºï¼ˆoutputï¼‰</strong></p>\n<blockquote>\n<p>æ„å»ºç»“æœçš„æ–‡ä»¶åã€è·¯å¾„ç­‰éƒ½æ˜¯å¯ä»¥é…ç½®çš„ï¼Œä½¿ç”¨ <code>output</code> å­—æ®µ</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">    filename: <span class=\"string\">'bundle.js'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æˆ–è€…å¤šä¸ªå…¥å£ç”Ÿæˆä¸åŒæ–‡ä»¶</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: &#123;</span><br><span class=\"line\">    foo: <span class=\"string\">'./src/foo.js'</span>,</span><br><span class=\"line\">    bar: <span class=\"string\">'./src/bar.js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: <span class=\"string\">'[name].js'</span>,</span><br><span class=\"line\">    path: __dirname + <span class=\"string\">'/dist'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è·¯å¾„ä¸­ä½¿ç”¨ hashï¼Œæ¯æ¬¡æ„å»ºæ—¶ä¼šæœ‰ä¸€ä¸ªä¸åŒ hash å€¼ï¼Œé¿å…å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶çº¿ä¸Šä½¿ç”¨æµè§ˆå™¨ç¼“å­˜</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: <span class=\"string\">'[name].js'</span>,</span><br><span class=\"line\">    path: __dirname + <span class=\"string\">'/dist/[hash]'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>æˆ‘ä»¬ä¸€å¼€å§‹ç›´æ¥ä½¿ç”¨ <code>webpack</code> æ„å»ºæ—¶ï¼Œé»˜è®¤åˆ›å»ºçš„è¾“å‡ºå†…å®¹å°±æ˜¯ <code>./dist/main.js</code></p>\n</blockquote>\n<p><strong>ä¸€ä¸ªç®€å•çš„ webpack é…ç½®</strong></p>\n<blockquote>\n<p>æˆ‘ä»¬æŠŠä¸Šè¿°æ¶‰åŠçš„å‡ éƒ¨åˆ†é…ç½®å†…å®¹åˆåˆ°ä¸€èµ·ï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªç®€å•çš„ <code>webpack</code> é…ç½®äº†ï¼Œ<code>webpack</code> è¿è¡Œæ—¶é»˜è®¤è¯»å–é¡¹ç›®ä¸‹çš„ <code>webpack.config.js</code> æ–‡ä»¶ä½œä¸ºé…ç½®ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ª <code>webpack.config.js</code> æ–‡ä»¶</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> UglifyPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'uglifyjs-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: <span class=\"string\">'./src/index.js'</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">    filename: <span class=\"string\">'bundle.js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?/</span>,</span><br><span class=\"line\">        include: [path.resolve(__dirname, <span class=\"string\">'src'</span>)],</span><br><span class=\"line\">        use: <span class=\"string\">'babel-loader'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ä»£ç æ¨¡å—è·¯å¾„è§£æçš„é…ç½®</span></span><br><span class=\"line\">  resolve: &#123;</span><br><span class=\"line\">    modules: [<span class=\"string\">'node_modules'</span>, path.resolve(__dirname, <span class=\"string\">'src'</span>)],</span><br><span class=\"line\"></span><br><span class=\"line\">    extensions: [<span class=\"string\">'.wasm'</span>, <span class=\"string\">'.mjs'</span>, <span class=\"string\">'.js'</span>, <span class=\"string\">'.json'</span>, <span class=\"string\">'.jsx'</span>]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> UglifyPlugin()</span><br><span class=\"line\">    <span class=\"comment\">// ä½¿ç”¨ uglifyjs-webpack-plugin æ¥å‹ç¼© JS ä»£ç </span></span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœä½ ç•™æ„äº†æˆ‘ä»¬ä¸€å¼€å§‹ç›´æ¥ä½¿ç”¨ webpack æ„å»ºçš„ç»“æœï¼Œä½ ä¼šå‘ç°é»˜è®¤å·²ç»ä½¿ç”¨äº† JS ä»£ç å‹ç¼©çš„æ’ä»¶</span></span><br><span class=\"line\">    <span class=\"comment\">// è¿™å…¶å®ä¹Ÿæ˜¯æˆ‘ä»¬å‘½ä»¤ä¸­çš„ --mode production çš„æ•ˆæœï¼Œåç»­çš„å°èŠ‚ä¼šä»‹ç» webpack çš„ mode å‚æ•°</span></span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"æ­å»ºåŸºç¡€çš„å‰ç«¯å¼€å‘ç¯å¢ƒ\"><a href=\"#æ­å»ºåŸºç¡€çš„å‰ç«¯å¼€å‘ç¯å¢ƒ\" class=\"headerlink\" title=\"æ­å»ºåŸºç¡€çš„å‰ç«¯å¼€å‘ç¯å¢ƒ\"></a>æ­å»ºåŸºç¡€çš„å‰ç«¯å¼€å‘ç¯å¢ƒ</h3><h4 id=\"å…³è”-HTML\"><a href=\"#å…³è”-HTML\" class=\"headerlink\" title=\"å…³è” HTML\"></a>å…³è” HTML</h4><blockquote>\n<p><code>webpack</code> é»˜è®¤ä»ä½œä¸ºå…¥å£çš„ <code>.js</code> æ–‡ä»¶è¿›è¡Œæ„å»ºï¼ˆæ›´å¤šæ˜¯åŸºäº <code>SPA</code> å»è€ƒè™‘ï¼‰ï¼Œä½†é€šå¸¸ä¸€ä¸ªå‰ç«¯é¡¹ç›®éƒ½æ˜¯ä»ä¸€ä¸ªé¡µé¢ï¼ˆå³ HTMLï¼‰å‡ºå‘çš„ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼Œåˆ›å»ºä¸€ä¸ª HTML æ–‡ä»¶ï¼Œä½¿ç”¨ <code>script</code> æ ‡ç­¾ç›´æ¥å¼•ç”¨æ„å»ºå¥½çš„ JS æ–‡ä»¶ï¼Œå¦‚â€¦</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;./dist/bundle.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„æ–‡ä»¶åæˆ–è€…è·¯å¾„ä¼šå˜åŒ–ï¼Œä¾‹å¦‚ä½¿ç”¨ <code>[hash]</code> æ¥è¿›è¡Œå‘½åï¼Œé‚£ä¹ˆæœ€å¥½æ˜¯å°† <code>HTML</code> å¼•ç”¨è·¯å¾„å’Œæˆ‘ä»¬çš„æ„å»ºç»“æœå…³è”èµ·æ¥ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>html-webpack-plugin</code></li>\n<li><code>html-webpack-plugin</code> æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ <code>node package</code>ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ä¹‹å‰æˆ‘ä»¬éœ€è¦å…ˆå®‰è£…å®ƒï¼ŒæŠŠå®ƒå®‰è£…åˆ°é¡¹ç›®çš„å¼€å‘ä¾èµ–ä¸­</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install html-webpack-plugin -D</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>ç„¶ååœ¨ <code>webpack</code> é…ç½®ä¸­ï¼Œå°† <code>html-webpack-plugin</code> æ·»åŠ åˆ° <code>plugins</code> åˆ—è¡¨ä¸­</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  plugins: [<span class=\"keyword\">new</span> HtmlWebpackPlugin()]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>è¿™æ ·é…ç½®å¥½ä¹‹åï¼Œæ„å»ºæ—¶ <code>html-webpack-plugin</code> ä¼šä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <code>HTML</code> æ–‡ä»¶ï¼Œå…¶ä¸­ä¼šå¼•ç”¨æ„å»ºå‡ºæ¥çš„ JS æ–‡ä»¶ã€‚å®é™…é¡¹ç›®ä¸­ï¼Œé»˜è®¤åˆ›å»ºçš„ <code>HTML</code> æ–‡ä»¶å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±æ¥å†™ <code>HTML</code> æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ <code>html-webpack-plugin</code> çš„é…ç½®ï¼Œä¼ é€’ä¸€ä¸ªå†™å¥½çš„ HTML æ¨¡æ¿â€¦</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      filename: <span class=\"string\">'index.html'</span>, <span class=\"comment\">// é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„</span></span><br><span class=\"line\">      template: <span class=\"string\">'assets/index.html'</span> <span class=\"comment\">// é…ç½®æ–‡ä»¶æ¨¡æ¿</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>è¿™æ ·ï¼Œé€šè¿‡ <code>html-webpack-plugin</code> å°±å¯ä»¥å°†æˆ‘ä»¬çš„é¡µé¢å’Œæ„å»º <code>JS</code> å…³è”èµ·æ¥ï¼Œå›å½’æ—¥å¸¸ï¼Œä»é¡µé¢å¼€å§‹å¼€å‘ã€‚å¦‚æœéœ€è¦æ·»åŠ å¤šä¸ªé¡µé¢å…³è”ï¼Œé‚£ä¹ˆå®ä¾‹åŒ–å¤šä¸ª <code>html-webpack-plugin</code>ï¼Œ å¹¶å°†å®ƒä»¬éƒ½æ”¾åˆ° <code>plugins</code> å­—æ®µæ•°ç»„ä¸­å°±å¯ä»¥äº†â€¦</p>\n</blockquote>\n<h4 id=\"æ„å»º-CSS\"><a href=\"#æ„å»º-CSS\" class=\"headerlink\" title=\"æ„å»º CSS\"></a>æ„å»º CSS</h4><blockquote>\n<p>æˆ‘ä»¬ç¼–å†™ <code>CSS</code>ï¼Œå¹¶ä¸”å¸Œæœ›ä½¿ç”¨ <code>webpack</code> æ¥è¿›è¡Œæ„å»ºï¼Œä¸ºæ­¤ï¼Œéœ€è¦åœ¨é…ç½®ä¸­å¼•å…¥ <code>loader</code> æ¥è§£æå’Œå¤„ç† <code>CSS</code> æ–‡ä»¶</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css/</span>,</span><br><span class=\"line\">        include: [path.resolve(__dirname, <span class=\"string\">'src'</span>)],</span><br><span class=\"line\">        use: [<span class=\"string\">'style-loader'</span>, <span class=\"string\">'css-loader'</span>]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>css-loader</code> è´Ÿè´£è§£æ <code>CSS</code> ä»£ç ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¤„ç† <code>CSS</code> ä¸­çš„ä¾èµ–ï¼Œä¾‹å¦‚ <code>@import</code> å’Œ <code>url()</code> ç­‰å¼•ç”¨å¤–éƒ¨æ–‡ä»¶çš„å£°æ˜ï¼›</li>\n<li><code>style-loader</code> ä¼šå°† <code>css-loader</code> è§£æçš„ç»“æœè½¬å˜æˆ <code>JS</code> ä»£ç ï¼Œè¿è¡Œæ—¶åŠ¨æ€æ’å…¥ <code>style</code> æ ‡ç­¾æ¥è®© <code>CSS</code> ä»£ç ç”Ÿæ•ˆâ€¦</li>\n</ul>\n<blockquote>\n<p>ç»ç”±ä¸Šè¿°ä¸¤ä¸ª <code>loader</code> çš„å¤„ç†åï¼ŒCSS ä»£ç ä¼šè½¬å˜ä¸º JSï¼Œå’Œ <code>index.js</code> ä¸€èµ·æ‰“åŒ…äº†ã€‚å¦‚æœéœ€è¦å•ç‹¬æŠŠ CSS æ–‡ä»¶åˆ†ç¦»å‡ºæ¥ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>extract-text-webpack-plugin</code> æ’ä»¶</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader</span></span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: <span class=\"string\">'css-loader'</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"comment\">// å¼•å…¥æ’ä»¶ï¼Œé…ç½®æ–‡ä»¶åï¼Œè¿™é‡ŒåŒæ ·å¯ä»¥ä½¿ç”¨ [hash]</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">'index.css'</span>)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"CSS-é¢„å¤„ç†å™¨\"><a href=\"#CSS-é¢„å¤„ç†å™¨\" class=\"headerlink\" title=\"CSS é¢„å¤„ç†å™¨\"></a>CSS é¢„å¤„ç†å™¨</h4><blockquote>\n<p>åœ¨ä¸Šè¿°ä½¿ç”¨ CSS çš„åŸºç¡€ä¸Šï¼Œé€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨ <code>Less/Sass</code> ç­‰ CSS é¢„å¤„ç†å™¨ï¼Œwebpack å¯ä»¥é€šè¿‡æ·»åŠ å¯¹åº”çš„ <code>loader</code> æ¥æ”¯æŒï¼Œä»¥ä½¿ç”¨ <code>Less</code> ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æ‰¾åˆ°å¯¹åº”çš„ <code>loader</code></p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader</span></span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: [<span class=\"string\">'css-loader'</span>, <span class=\"string\">'less-loader'</span>]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"å¤„ç†å›¾ç‰‡æ–‡ä»¶\"><a href=\"#å¤„ç†å›¾ç‰‡æ–‡ä»¶\" class=\"headerlink\" title=\"å¤„ç†å›¾ç‰‡æ–‡ä»¶\"></a>å¤„ç†å›¾ç‰‡æ–‡ä»¶</h4><blockquote>\n<p>åœ¨å‰ç«¯é¡¹ç›®çš„æ ·å¼ä¸­æ€»ä¼šä½¿ç”¨åˆ°å›¾ç‰‡ï¼Œè™½ç„¶æˆ‘ä»¬å·²ç»æåˆ° <code>css-loader</code> ä¼šè§£ææ ·å¼ä¸­ç”¨ <code>url()</code> å¼•ç”¨çš„æ–‡ä»¶è·¯å¾„ï¼Œä½†æ˜¯å›¾ç‰‡å¯¹åº”çš„ <code>jpg/png/gif</code> ç­‰æ–‡ä»¶æ ¼å¼ï¼Œ<code>webpack</code> å¤„ç†ä¸äº†ã€‚æ˜¯çš„ï¼Œæˆ‘ä»¬åªè¦æ·»åŠ ä¸€ä¸ªå¤„ç†å›¾ç‰‡çš„ <code>loader</code> é…ç½®å°±å¯ä»¥äº†ï¼Œç°æœ‰çš„ <code>file-loader</code> å°±æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©â€¦</p>\n</blockquote>\n<ul>\n<li><code>file-loader</code> å¯ä»¥ç”¨äºå¤„ç†å¾ˆå¤šç±»å‹çš„æ–‡ä»¶ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ç›´æ¥è¾“å‡ºæ–‡ä»¶ï¼ŒæŠŠæ„å»ºåçš„æ–‡ä»¶è·¯å¾„è¿”å›ã€‚é…ç½®å¾ˆç®€å•ï¼Œåœ¨ <code>rules</code> ä¸­æ·»åŠ ä¸€ä¸ªå­—æ®µï¼Œå¢åŠ å›¾ç‰‡ç±»å‹æ–‡ä»¶çš„è§£æé…ç½®</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif)$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'file-loader'</span>,</span><br><span class=\"line\">            options: &#123;&#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"ä½¿ç”¨-Babel\"><a href=\"#ä½¿ç”¨-Babel\" class=\"headerlink\" title=\"ä½¿ç”¨ Babel\"></a>ä½¿ç”¨ Babel</h4><blockquote>\n<p><code>Babel</code> æ˜¯ä¸€ä¸ªè®©æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ <code>ES</code> æ–°ç‰¹æ€§çš„ <code>JS</code> ç¼–è¯‘å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>webpack</code> ä¸­é…ç½® Babelï¼Œä»¥ä¾¿ä½¿ç”¨ <code>ES6</code>ã€<code>ES7</code> æ ‡å‡†æ¥ç¼–å†™ <code>JS</code> ä»£ç </p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?/</span>, <span class=\"comment\">// æ”¯æŒ js å’Œ jsx</span></span><br><span class=\"line\">        include: [</span><br><span class=\"line\">          path.resolve(__dirname, <span class=\"string\">'src'</span>) <span class=\"comment\">// src ç›®å½•ä¸‹çš„æ‰éœ€è¦ç»è¿‡ babel-loader å¤„ç†</span></span><br><span class=\"line\">        ],</span><br><span class=\"line\">        loader: <span class=\"string\">'babel-loader'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"å¯åŠ¨é™æ€æœåŠ¡\"><a href=\"#å¯åŠ¨é™æ€æœåŠ¡\" class=\"headerlink\" title=\"å¯åŠ¨é™æ€æœåŠ¡\"></a>å¯åŠ¨é™æ€æœåŠ¡</h4><blockquote>\n<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†å¤„ç†å¤šç§æ–‡ä»¶ç±»å‹çš„ webpack é…ç½®ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>webpack-dev-server</code> åœ¨æœ¬åœ°å¼€å¯ä¸€ä¸ªç®€å•çš„é™æ€æœåŠ¡æ¥è¿›è¡Œå¼€å‘</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">  <span class=\"string\">\"build\"</span>: <span class=\"string\">\"webpack --mode production\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"start\"</span>: <span class=\"string\">\"webpack-dev-server --mode development\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>å°è¯•ç€è¿è¡Œ <code>npm start</code> æˆ–è€… <code>yarn start</code>ï¼Œç„¶åå°±å¯ä»¥è®¿é—® <code>http://localhost:8080/</code> æ¥æŸ¥çœ‹ä½ çš„é¡µé¢äº†ã€‚é»˜è®¤æ˜¯è®¿é—® <code>index.html</code>ï¼Œå¦‚æœæ˜¯å…¶ä»–é¡µé¢è¦æ³¨æ„è®¿é—®çš„ URL æ˜¯å¦æ­£ç¡®</p>\n</blockquote>\n<h4 id=\"å®Œæ•´ç¤ºä¾‹ä»£ç \"><a href=\"#å®Œæ•´ç¤ºä¾‹ä»£ç \" class=\"headerlink\" title=\"å®Œæ•´ç¤ºä¾‹ä»£ç \"></a>å®Œæ•´ç¤ºä¾‹ä»£ç </h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: <span class=\"string\">'./src/index.js'</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">    filename: <span class=\"string\">'[name].js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?/</span>,</span><br><span class=\"line\">        include: [path.resolve(__dirname, <span class=\"string\">'src'</span>)],</span><br><span class=\"line\">        use: <span class=\"string\">'babel-loader'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader</span></span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: [<span class=\"string\">'css-loader'</span>, <span class=\"string\">'less-loader'</span>]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif)$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'file-loader'</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ä»£ç æ¨¡å—è·¯å¾„è§£æçš„é…ç½®</span></span><br><span class=\"line\">  resolve: &#123;</span><br><span class=\"line\">    modules: [<span class=\"string\">'node_modules'</span>, path.resolve(__dirname, <span class=\"string\">'src'</span>)],</span><br><span class=\"line\"></span><br><span class=\"line\">    extensions: [<span class=\"string\">'.wasm'</span>, <span class=\"string\">'.mjs'</span>, <span class=\"string\">'.js'</span>, <span class=\"string\">'.json'</span>, <span class=\"string\">'.jsx'</span>]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      filename: <span class=\"string\">'index.html'</span>, <span class=\"comment\">// é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„</span></span><br><span class=\"line\">      template: <span class=\"string\">'src/index.html'</span> <span class=\"comment\">// é…ç½®æ–‡ä»¶æ¨¡æ¿</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">'[name].css'</span>)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"webpack-å¦‚ä½•è§£æä»£ç æ¨¡å—è·¯å¾„\"><a href=\"#webpack-å¦‚ä½•è§£æä»£ç æ¨¡å—è·¯å¾„\" class=\"headerlink\" title=\"webpack å¦‚ä½•è§£æä»£ç æ¨¡å—è·¯å¾„\"></a>webpack å¦‚ä½•è§£æä»£ç æ¨¡å—è·¯å¾„</h3><blockquote>\n<p>webpack ä¸­æœ‰ä¸€ä¸ªå¾ˆå…³é”®çš„æ¨¡å— <code>enhanced-resolve</code> å°±æ˜¯å¤„ç†ä¾èµ–æ¨¡å—è·¯å¾„çš„è§£æçš„ï¼Œè¿™ä¸ªæ¨¡å—å¯ä»¥è¯´æ˜¯ Node.js é‚£ä¸€å¥—æ¨¡å—è·¯å¾„è§£æçš„å¢å¼ºç‰ˆæœ¬ï¼Œæœ‰å¾ˆå¤šå¯ä»¥è‡ªå®šä¹‰çš„è§£æé…ç½®</p>\n</blockquote>\n<ul>\n<li>åœ¨ webpack é…ç½®ä¸­ï¼Œå’Œæ¨¡å—è·¯å¾„è§£æç›¸å…³çš„é…ç½®éƒ½åœ¨ <code>resolve</code> å­—æ®µä¸‹</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  resolve: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"å¸¸ç”¨çš„ä¸€äº›é…ç½®\"><a href=\"#å¸¸ç”¨çš„ä¸€äº›é…ç½®\" class=\"headerlink\" title=\"å¸¸ç”¨çš„ä¸€äº›é…ç½®\"></a>å¸¸ç”¨çš„ä¸€äº›é…ç½®</h4><p><strong>resolve.alias</strong></p>\n<blockquote>\n<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸ª <code>utils</code> æ¨¡å—æå…¶å¸¸ç”¨ï¼Œç»å¸¸ç¼–å†™ç›¸å¯¹è·¯å¾„å¾ˆéº»çƒ¦ï¼Œå¸Œæœ›å¯ä»¥ç›´æ¥ <code>import &#39;utils&#39;</code> æ¥å¼•ç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é…ç½®æŸä¸ªæ¨¡å—çš„åˆ«åï¼Œå¦‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alias: &#123;</span><br><span class=\"line\">  utils: path.resolve(__dirname, <span class=\"string\">'src/utils'</span>); <span class=\"comment\">// è¿™é‡Œä½¿ç”¨ path.resolve å’Œ __dirname æ¥è·å–ç»å¯¹è·¯å¾„</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>ä¸Šè¿°çš„é…ç½®æ˜¯æ¨¡ç³ŠåŒ¹é…ï¼Œæ„å‘³ç€åªè¦æ¨¡å—è·¯å¾„ä¸­æºå¸¦äº† utils å°±å¯ä»¥è¢«æ›¿æ¢æ‰ï¼Œå¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &apos;utils/query.js&apos; // ç­‰åŒäº import &apos;[é¡¹ç›®ç»å¯¹è·¯å¾„]/src/utils/query.js&apos;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>å¦‚æœéœ€è¦è¿›è¡Œç²¾ç¡®åŒ¹é…å¯ä»¥ä½¿ç”¨ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alias: &#123;</span><br><span class=\"line\">  utils$: path.resolve(__dirname, <span class=\"string\">'src/utils'</span>); <span class=\"comment\">// åªä¼šåŒ¹é… import 'utils'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>resolve.extensions</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">extensions: [<span class=\"string\">'.wasm'</span>, <span class=\"string\">'.mjs'</span>, <span class=\"string\">'.js'</span>, <span class=\"string\">'.json'</span>, <span class=\"string\">'.jsx'</span>],</span><br><span class=\"line\"><span class=\"comment\">// è¿™é‡Œçš„é¡ºåºä»£è¡¨åŒ¹é…åç¼€çš„ä¼˜å…ˆçº§ï¼Œä¾‹å¦‚å¯¹äº index.js å’Œ index.jsxï¼Œä¼šä¼˜å…ˆé€‰æ‹© index.js</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>è¿™ä¸ªé…ç½®çš„ä½œç”¨æ˜¯å’Œæ–‡ä»¶åç¼€åæœ‰å…³çš„, è¿™ä¸ªé…ç½®å¯ä»¥å®šä¹‰åœ¨è¿›è¡Œæ¨¡å—è·¯å¾„è§£ææ—¶ï¼Œwebpack ä¼šå°è¯•å¸®ä½ è¡¥å…¨é‚£äº›åç¼€åæ¥è¿›è¡ŒæŸ¥æ‰¾</p>\n</blockquote>\n<h3 id=\"é…ç½®-loader\"><a href=\"#é…ç½®-loader\" class=\"headerlink\" title=\"é…ç½® loader\"></a>é…ç½® loader</h3><h4 id=\"loader-åŒ¹é…è§„åˆ™\"><a href=\"#loader-åŒ¹é…è§„åˆ™\" class=\"headerlink\" title=\"loader åŒ¹é…è§„åˆ™\"></a>loader åŒ¹é…è§„åˆ™</h4><blockquote>\n<p>å½“æˆ‘ä»¬éœ€è¦é…ç½® <code>loader</code> æ—¶ï¼Œéƒ½æ˜¯åœ¨ <code>module.rules</code> ä¸­æ·»åŠ æ–°çš„é…ç½®é¡¹ï¼Œåœ¨è¯¥å­—æ®µä¸­ï¼Œæ¯ä¸€é¡¹è¢«è§†ä¸ºä¸€æ¡åŒ¹é…ä½¿ç”¨ <code>loader</code> çš„è§„åˆ™</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?/</span>, <span class=\"comment\">// æ¡ä»¶</span></span><br><span class=\"line\">        include: [path.resolve(__dirname, <span class=\"string\">'src'</span>)], <span class=\"comment\">// æ¡ä»¶</span></span><br><span class=\"line\">        use: <span class=\"string\">'babel-loader'</span> <span class=\"comment\">// è§„åˆ™åº”ç”¨ç»“æœ\u000e</span></span><br><span class=\"line\">      &#125; <span class=\"comment\">// ä¸€ä¸ª object å³ä¸€æ¡è§„åˆ™</span></span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>loader</code> çš„åŒ¹é…è§„åˆ™ä¸­æœ‰ä¸¤ä¸ªæœ€å…³é”®çš„å› ç´ ï¼šä¸€ä¸ªæ˜¯åŒ¹é…æ¡ä»¶ï¼Œä¸€ä¸ªæ˜¯åŒ¹é…è§„åˆ™åçš„åº”ç”¨</p>\n</blockquote>\n<h4 id=\"è§„åˆ™æ¡ä»¶é…ç½®\"><a href=\"#è§„åˆ™æ¡ä»¶é…ç½®\" class=\"headerlink\" title=\"è§„åˆ™æ¡ä»¶é…ç½®\"></a>è§„åˆ™æ¡ä»¶é…ç½®</h4><blockquote>\n<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé…ç½® <code>loader</code> çš„åŒ¹é…æ¡ä»¶æ—¶ï¼Œåªè¦ä½¿ç”¨ <code>test</code> å­—æ®µå°±å¥½äº†ï¼Œå¾ˆå¤šæ—¶å€™éƒ½åªéœ€è¦åŒ¹é…æ–‡ä»¶åç¼€åæ¥å†³å®šä½¿ç”¨ä»€ä¹ˆ <code>loader</code>ï¼Œä½†ä¹Ÿä¸æ’é™¤åœ¨æŸäº›ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®æ¯”è¾ƒå¤æ‚çš„åŒ¹é…æ¡ä»¶ã€‚webpack çš„è§„åˆ™æä¾›äº†å¤šç§é…ç½®å½¢å¼â€¦</p>\n</blockquote>\n<ul>\n<li><code>{test: ...}</code> åŒ¹é…ç‰¹å®šæ¡ä»¶</li>\n<li><code>{include: ...}</code> åŒ¹é…ç‰¹å®šè·¯å¾„</li>\n<li><code>{exclude: ...}</code> æ’é™¤ç‰¹å®šè·¯å¾„</li>\n<li><code>{and: [...] }</code> å¿…é¡»åŒ¹é…æ•°ç»„ä¸­æ‰€æœ‰æ¡ä»¶</li>\n<li><code>{or: [...] }</code> åŒ¹é…æ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªæ¡ä»¶</li>\n<li><code>{not: [...] }</code> æ’é™¤åŒ¹é…æ•°ç»„ä¸­æ‰€æœ‰æ¡ä»¶â€¦</li>\n</ul>\n<blockquote>\n<p>ä¸Šè¿°çš„æ‰€è°“æ¡ä»¶çš„å€¼å¯ä»¥æ˜¯ï¼š</p>\n</blockquote>\n<ul>\n<li>å­—ç¬¦ä¸²ï¼šå¿…é¡»ä»¥æä¾›çš„å­—ç¬¦ä¸²å¼€å§‹ï¼Œæ‰€ä»¥æ˜¯å­—ç¬¦ä¸²çš„è¯ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦æä¾›ç»å¯¹è·¯å¾„</li>\n<li>æ­£åˆ™è¡¨è¾¾å¼ï¼šè°ƒç”¨æ­£åˆ™çš„ <code>test</code> æ–¹æ³•æ¥åˆ¤æ–­åŒ¹é…</li>\n<li>å‡½æ•°ï¼š<code>(path) =&gt; boolean</code>ï¼Œè¿”å› <code>true</code> è¡¨ç¤ºåŒ¹é…</li>\n<li>æ•°ç»„ï¼šè‡³å°‘åŒ…å«ä¸€ä¸ªæ¡ä»¶çš„æ•°ç»„</li>\n<li>å¯¹è±¡ï¼šåŒ¹é…æ‰€æœ‰å±æ€§å€¼çš„æ¡ä»¶â€¦</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rules: [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    test: <span class=\"regexp\">/\\.jsx?/</span>, <span class=\"comment\">// æ­£åˆ™</span></span><br><span class=\"line\">    include: [</span><br><span class=\"line\">      path.resolve(__dirname, <span class=\"string\">'src'</span>), <span class=\"comment\">// å­—ç¬¦ä¸²ï¼Œæ³¨æ„æ˜¯ç»å¯¹è·¯å¾„</span></span><br><span class=\"line\">    ], <span class=\"comment\">// æ•°ç»„</span></span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    test: &#123;</span><br><span class=\"line\">      js: <span class=\"regexp\">/\\.js/</span>,</span><br><span class=\"line\">      jsx: <span class=\"regexp\">/\\.jsx/</span>,</span><br><span class=\"line\">    &#125;, <span class=\"comment\">// å¯¹è±¡ï¼Œä¸å»ºè®®ä½¿ç”¨</span></span><br><span class=\"line\">    not: [</span><br><span class=\"line\">      (value) =&gt; &#123; <span class=\"comment\">/* ... */</span> <span class=\"keyword\">return</span> <span class=\"literal\">true</span>; &#125;, <span class=\"comment\">// å‡½æ•°ï¼Œé€šå¸¸éœ€è¦é«˜åº¦è‡ªå®šä¹‰æ—¶æ‰ä¼šä½¿ç”¨</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<h4 id=\"ä½¿ç”¨-loader-é…ç½®\"><a href=\"#ä½¿ç”¨-loader-é…ç½®\" class=\"headerlink\" title=\"ä½¿ç”¨ loader é…ç½®\"></a>ä½¿ç”¨ loader é…ç½®</h4><blockquote>\n<p><code>module.rules</code> çš„åŒ¹é…è§„åˆ™æœ€é‡è¦çš„è¿˜æ˜¯ç”¨äºé…ç½® <code>loader</code>ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>use</code> å­—æ®µ</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rules: [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    test: <span class=\"regexp\">/\\.less/</span>,</span><br><span class=\"line\">    use: [</span><br><span class=\"line\">      <span class=\"string\">'style-loader'</span>, <span class=\"comment\">// ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²è¡¨ç¤º loader</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        loader: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">        options: &#123;</span><br><span class=\"line\">          importLoaders: <span class=\"number\">1</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;, <span class=\"comment\">// ç”¨å¯¹è±¡è¡¨ç¤º loaderï¼Œå¯ä»¥ä¼ é€’ loader é…ç½®ç­‰</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        loader: <span class=\"string\">'less-loader'</span>,</span><br><span class=\"line\">        options: &#123;</span><br><span class=\"line\">          noIeCompat: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;, <span class=\"comment\">// ä¼ é€’ loader é…ç½®</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>use</code> å­—æ®µå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…è¡¨ç¤º <code>loader</code> çš„å¯¹è±¡ã€‚å¦‚æœåªéœ€è¦ä¸€ä¸ª <code>loader</code>ï¼Œä¹Ÿå¯ä»¥è¿™æ ·ï¼š<code>use: {loader: &#39;babel-loader&#39;</code>, <code>options: { ...} }</code></p>\n</blockquote>\n<h4 id=\"loader-åº”ç”¨é¡ºåº\"><a href=\"#loader-åº”ç”¨é¡ºåº\" class=\"headerlink\" title=\"loader åº”ç”¨é¡ºåº\"></a>loader åº”ç”¨é¡ºåº</h4><ul>\n<li>å¯¹äºä¸Šé¢çš„ <code>less</code> è§„åˆ™é…ç½®ï¼Œä¸€ä¸ª <code>style.less</code> æ–‡ä»¶ä¼šé€”å¾„ <code>less-loader</code>ã€<code>css-loader</code>ã€<code>style-loader</code> å¤„ç†ï¼Œæˆä¸ºä¸€ä¸ªå¯ä»¥æ‰“åŒ…çš„æ¨¡å—ã€‚</li>\n<li><code>loader</code> çš„åº”ç”¨é¡ºåºåœ¨é…ç½®å¤šä¸ª <code>loader</code> ä¸€èµ·å·¥ä½œæ—¶å¾ˆé‡è¦ï¼Œé€šå¸¸ä¼šä½¿ç”¨åœ¨ CSS é…ç½®ä¸Šï¼Œé™¤äº† <code>style-loader</code> å’Œ <code>css-loader</code>ï¼Œä½ å¯èƒ½è¿˜è¦é…ç½® <code>less-loader</code> ç„¶åå†åŠ ä¸ª <code>postcss</code> çš„ <code>autoprefixer</code> ç­‰ã€‚</li>\n<li>ä¸Šè¿°ä»ååˆ°å‰çš„é¡ºåºæ˜¯åœ¨åŒä¸€ä¸ª <code>rule</code> ä¸­è¿›è¡Œçš„ï¼Œé‚£å¦‚æœå¤šä¸ª <code>rule</code> åŒ¹é…äº†åŒä¸€ä¸ªæ¨¡å—æ–‡ä»¶ï¼Œ<code>loader</code> çš„åº”ç”¨é¡ºåºåˆæ˜¯æ€æ ·çš„å‘¢ï¼Ÿçœ‹ä¸€ä»½è¿™æ ·çš„é…ç½®â€¦</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rules: [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">    exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">    loader: <span class=\"string\">\"eslint-loader\"</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">    exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">    loader: <span class=\"string\">\"babel-loader\"</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>è¿™æ ·æ— æ³•æ³•ä¿è¯ <code>eslint-loader</code> åœ¨ <code>babel-loader</code> åº”ç”¨å‰æ‰§è¡Œã€‚<code>webpack</code> åœ¨ <code>rules</code> ä¸­æä¾›äº†ä¸€ä¸ª <code>enforce</code> çš„å­—æ®µæ¥é…ç½®å½“å‰ <code>rule</code> çš„ <code>loader</code> ç±»å‹ï¼Œæ²¡é…ç½®çš„è¯æ˜¯æ™®é€šç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½® <code>pre</code> æˆ– <code>post</code>ï¼Œåˆ†åˆ«å¯¹åº”å‰ç½®ç±»å‹æˆ–åç½®ç±»å‹çš„ <code>loader</code>â€¦</p>\n</blockquote>\n<ul>\n<li>æ‰€æœ‰çš„ <code>loader</code> æŒ‰ç…§ <strong>å‰ç½®</strong> -&gt; <strong>è¡Œå†…</strong> -&gt; <strong>æ™®é€š</strong> -&gt; <strong>åç½®</strong> çš„é¡ºåºæ‰§è¡Œã€‚æ‰€ä»¥å½“æˆ‘ä»¬è¦ç¡®ä¿ <code>eslint-loader</code> åœ¨ <code>babel-loader</code> ä¹‹å‰æ‰§è¡Œæ—¶ï¼Œå¯ä»¥å¦‚ä¸‹æ·»åŠ  <code>enforce</code> é…ç½®</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rules: [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    enforce: <span class=\"string\">'pre'</span>, <span class=\"comment\">// æŒ‡å®šä¸ºå‰ç½®ç±»å‹</span></span><br><span class=\"line\">    test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">    exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">    loader: <span class=\"string\">\"eslint-loader\"</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>å½“é¡¹ç›®æ–‡ä»¶ç±»å‹å’Œåº”ç”¨çš„ <code>loader</code> ä¸æ˜¯ç‰¹åˆ«å¤æ‚çš„æ—¶å€™ï¼Œé€šå¸¸å»ºè®®æŠŠè¦åº”ç”¨çš„åŒä¸€ç±»å‹ <code>loader</code> éƒ½å†™åœ¨åŒä¸€ä¸ªåŒ¹é…è§„åˆ™ä¸­ï¼Œè¿™æ ·æ›´å¥½ç»´æŠ¤å’Œæ§åˆ¶</p>\n</blockquote>\n<h4 id=\"å®Œæ•´ä»£ç \"><a href=\"#å®Œæ•´ä»£ç \" class=\"headerlink\" title=\"å®Œæ•´ä»£ç \"></a>å®Œæ•´ä»£ç </h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> CopyWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'copy-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: <span class=\"string\">'./src/index'</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">    filename: <span class=\"string\">'[name].js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        enforce: <span class=\"string\">'pre'</span>, <span class=\"comment\">// æŒ‡å®šä¸ºå‰ç½®ç±»å‹</span></span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">'eslint-loader'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?$/</span>,</span><br><span class=\"line\">        include: [path.resolve(__dirname, <span class=\"string\">'src'</span>)],</span><br><span class=\"line\">        use: <span class=\"string\">'babel-loader'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: [<span class=\"string\">'css-loader'</span>]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: [<span class=\"string\">'css-loader'</span>, <span class=\"string\">'less-loader'</span>]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif)$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'file-loader'</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  resolve: &#123;</span><br><span class=\"line\">    alias: &#123;</span><br><span class=\"line\">      utils: path.resolve(__dirname, <span class=\"string\">'src/utils'</span>), <span class=\"comment\">// è¿™é‡Œä½¿ç”¨ path.resolve å’Œ __dirname æ¥è·å–ç»å¯¹è·¯å¾„</span></span><br><span class=\"line\">      log$: path.resolve(__dirname, <span class=\"string\">'src/utils/log.js'</span>) <span class=\"comment\">// åªåŒ¹é… log</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    extensions: [<span class=\"string\">'.js'</span>, <span class=\"string\">'.json'</span>, <span class=\"string\">'.jsx'</span>, <span class=\"string\">'.css'</span>, <span class=\"string\">'.less'</span>],</span><br><span class=\"line\">    modules: [</span><br><span class=\"line\">      path.resolve(__dirname, <span class=\"string\">'node_modules'</span>) <span class=\"comment\">// æŒ‡å®šå½“å‰ç›®å½•ä¸‹çš„ node_modules ä¼˜å…ˆæŸ¥æ‰¾</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      filename: <span class=\"string\">'index.html'</span>, <span class=\"comment\">// é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„</span></span><br><span class=\"line\">      template: <span class=\"string\">'src/index.html'</span> <span class=\"comment\">// é…ç½®æ–‡ä»¶æ¨¡æ¿</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">'[name].css'</span>),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123;</span><br><span class=\"line\">      TWO: <span class=\"string\">'1+1'</span>,</span><br><span class=\"line\">      CONSTANTS: &#123;</span><br><span class=\"line\">        APP_VERSION: <span class=\"built_in\">JSON</span>.stringify(<span class=\"string\">'1.1.2'</span>) <span class=\"comment\">// const CONSTANTS = &#123; APP_VERSION: '1.1.2' &#125;</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> CopyWebpackPlugin([</span><br><span class=\"line\">      &#123; <span class=\"attr\">from</span>: <span class=\"string\">'src/assets/favicon.ico'</span>, <span class=\"attr\">to</span>: <span class=\"string\">'favicon.ico'</span> &#125; <span class=\"comment\">// é¡¾åæ€ä¹‰ï¼Œfrom é…ç½®æ¥æºï¼Œto é…ç½®ç›®æ ‡è·¯å¾„</span></span><br><span class=\"line\">    ]),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.ProvidePlugin(&#123;</span><br><span class=\"line\">      _: <span class=\"string\">'lodash'</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\"></span><br><span class=\"line\">  devServer: &#123;</span><br><span class=\"line\">    port: <span class=\"string\">'1234'</span>,</span><br><span class=\"line\">    before(app) &#123;</span><br><span class=\"line\">      app.get(<span class=\"string\">'/api/test.json'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// å½“è®¿é—® /some/path è·¯å¾„æ—¶ï¼Œè¿”å›è‡ªå®šä¹‰çš„ json æ•°æ®</span></span><br><span class=\"line\">        res.json(&#123; <span class=\"attr\">code</span>: <span class=\"number\">200</span>, <span class=\"attr\">message</span>: <span class=\"string\">'hello world'</span> &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"ä½¿ç”¨-plugin\"><a href=\"#ä½¿ç”¨-plugin\" class=\"headerlink\" title=\"ä½¿ç”¨ plugin\"></a>ä½¿ç”¨ plugin</h3><blockquote>\n<p>æ›´å¤šçš„æ’ä»¶å¯ä»¥åœ¨è¿™é‡ŒæŸ¥æ‰¾ï¼š<a href=\"https://github.com/webpack-contrib/awesome-webpack#webpack-plugins\" target=\"_blank\" rel=\"noopener\">plugins in awesome-webpack</a></p>\n</blockquote>\n<h4 id=\"DefinePlugin\"><a href=\"#DefinePlugin\" class=\"headerlink\" title=\"DefinePlugin\"></a>DefinePlugin</h4><blockquote>\n<p><code>DefinePlugin</code> æ˜¯ <code>webpack</code> å†…ç½®çš„æ’ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>webpack.DefinePlugin</code> ç›´æ¥è·å–</p>\n</blockquote>\n<ul>\n<li>è¿™ä¸ªæ’ä»¶ç”¨äºåˆ›å»ºä¸€äº›åœ¨ç¼–è¯‘æ—¶å¯ä»¥é…ç½®çš„å…¨å±€å¸¸é‡ï¼Œè¿™äº›å¸¸é‡çš„å€¼æˆ‘ä»¬å¯ä»¥åœ¨ <code>webpack</code> çš„é…ç½®ä¸­å»æŒ‡å®šï¼Œä¾‹å¦‚</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123;</span><br><span class=\"line\">      PRODUCTION: <span class=\"built_in\">JSON</span>.stringify(<span class=\"literal\">true</span>), <span class=\"comment\">// const PRODUCTION = true</span></span><br><span class=\"line\">      VERSION: <span class=\"built_in\">JSON</span>.stringify(<span class=\"string\">'5fa3b9'</span>), <span class=\"comment\">// const VERSION = '5fa3b9'</span></span><br><span class=\"line\">      BROWSER_SUPPORTS_HTML5: <span class=\"literal\">true</span>, <span class=\"comment\">// const BROWSER_SUPPORTS_HTML5 = 'true'</span></span><br><span class=\"line\">      TWO: <span class=\"string\">'1+1'</span>, <span class=\"comment\">// const TWO = 1 + 1,</span></span><br><span class=\"line\">      CONSTANTS: &#123;</span><br><span class=\"line\">        APP_VERSION: <span class=\"built_in\">JSON</span>.stringify(<span class=\"string\">'1.1.2'</span>) <span class=\"comment\">// const CONSTANTS = &#123; APP_VERSION: '1.1.2' &#125;</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>æœ‰äº†ä¸Šé¢çš„é…ç½®ï¼Œå°±å¯ä»¥åœ¨åº”ç”¨ä»£ç æ–‡ä»¶ä¸­ï¼Œè®¿é—®é…ç½®å¥½çš„å˜é‡äº†ï¼Œå¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'Running App version'</span> + VERSION);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!BROWSER_SUPPORTS_HTML5) <span class=\"built_in\">require</span>(<span class=\"string\">'html5shiv'</span>);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>ä¸Šé¢é…ç½®çš„æ³¨é‡Šå·²ç»ç®€å•è¯´æ˜äº†è¿™äº›é…ç½®çš„æ•ˆæœï¼Œè¿™é‡Œå†ç®€è¿°ä¸€ä¸‹æ•´ä¸ªé…ç½®è§„åˆ™ã€‚</p>\n</blockquote>\n<ul>\n<li>å¦‚æœé…ç½®çš„å€¼æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæ•´ä¸ªå­—ç¬¦ä¸²ä¼šè¢«å½“æˆä»£ç ç‰‡æ®µæ¥æ‰§è¡Œï¼Œå…¶ç»“æœä½œä¸ºæœ€ç»ˆå˜é‡çš„å€¼ï¼Œå¦‚ä¸Šé¢çš„ <code>&quot;1+1&quot;</code>ï¼Œæœ€åçš„ç»“æœæ˜¯ <code>2</code></li>\n<li>å¦‚æœé…ç½®çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ï¼Œé‚£ä¹ˆè¯¥å€¼ä¼šè¢«è½¬ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚ <code>true</code>ï¼Œæœ€åçš„ç»“æœæ˜¯ <code>&#39;true&#39;</code></li>\n<li>å¦‚æœé…ç½®çš„æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡çš„æ‰€æœ‰ <code>key</code> ä¼šä»¥åŒæ ·çš„æ–¹å¼å»å®šä¹‰</li>\n<li>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ <code>JSON.stringify()</code> äº†ï¼Œå› ä¸º <code>JSON.stringify(true)</code> çš„ç»“æœæ˜¯ <code>&#39;true&#39;</code>ï¼Œ<code>JSON.stringify(&quot;5fa3b9&quot;)</code> çš„ç»“æœæ˜¯ <code>&quot;5fa3b9&quot;</code>ã€‚</li>\n</ul>\n<blockquote>\n<p>ç¤¾åŒºä¸­å…³äº <code>DefinePlugin</code> ä½¿ç”¨å¾—æœ€å¤šçš„æ–¹å¼æ˜¯å®šä¹‰ç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚ <code>PRODUCTION = true</code> æˆ–è€… <code>__DEV__ = true</code> ç­‰ã€‚éƒ¨åˆ†ç±»åº“åœ¨å¼€å‘ç¯å¢ƒæ—¶ä¾èµ–è¿™æ ·çš„ç¯å¢ƒå˜é‡æ¥ç»™äºˆå¼€å‘è€…æ›´å¤šçš„å¼€å‘è°ƒè¯•åé¦ˆï¼Œä¾‹å¦‚ react ç­‰ã€‚</p>\n</blockquote>\n<ul>\n<li>å»ºè®®ä½¿ç”¨ <code>process.env.NODE_ENV</code>: â€¦ çš„æ–¹å¼æ¥å®šä¹‰ <code>process.env.NODE_ENV</code>ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ <code>process: {env: { NODE_ENV: ...} }</code> çš„æ–¹å¼ï¼Œå› ä¸ºè¿™æ ·ä¼šè¦†ç›–æ‰ <code>process</code> è¿™ä¸ªå¯¹è±¡ï¼Œå¯èƒ½ä¼šå¯¹å…¶ä»–ä»£ç é€ æˆå½±å“â€¦</li>\n</ul>\n<h4 id=\"copy-webpack-plugin\"><a href=\"#copy-webpack-plugin\" class=\"headerlink\" title=\"copy-webpack-plugin\"></a>copy-webpack-plugin</h4><blockquote>\n<p>æˆ‘ä»¬ä¸€èˆ¬ä¼šæŠŠå¼€å‘çš„æ‰€æœ‰æºç å’Œèµ„æºæ–‡ä»¶æ”¾åœ¨ <code>src/</code> ç›®å½•ä¸‹ï¼Œæ„å»ºçš„æ—¶å€™äº§å‡ºä¸€ä¸ª <code>build/</code> ç›®å½•ï¼Œé€šå¸¸ä¼šç›´æ¥æ‹¿ <code>build</code> ä¸­çš„æ‰€æœ‰æ–‡ä»¶æ¥å‘å¸ƒã€‚æœ‰äº›æ–‡ä»¶æ²¡ç»è¿‡ <code>webpack</code> å¤„ç†ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›å®ƒä»¬ä¹Ÿèƒ½å‡ºç°åœ¨ <code>build</code> ç›®å½•ä¸‹ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨ <code>CopyWebpackPlugin</code> æ¥å¤„ç†äº†â€¦</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> CopyWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'copy-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> CopyWebpackPlugin([</span><br><span class=\"line\">      &#123; <span class=\"attr\">from</span>: <span class=\"string\">'src/file.txt'</span>, <span class=\"attr\">to</span>: <span class=\"string\">'build/file.txt'</span> &#125;, <span class=\"comment\">// é¡¾åæ€ä¹‰ï¼Œfrom é…ç½®æ¥æºï¼Œto é…ç½®ç›®æ ‡è·¯å¾„</span></span><br><span class=\"line\">      &#123; <span class=\"attr\">from</span>: <span class=\"string\">'src/*.ico'</span>, <span class=\"attr\">to</span>: <span class=\"string\">'build/*.ico'</span> &#125; <span class=\"comment\">// é…ç½®é¡¹å¯ä»¥ä½¿ç”¨ glob</span></span><br><span class=\"line\">      <span class=\"comment\">// å¯ä»¥é…ç½®å¾ˆå¤šé¡¹å¤åˆ¶è§„åˆ™</span></span><br><span class=\"line\">    ])</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"extract-text-webpack-plugin\"><a href=\"#extract-text-webpack-plugin\" class=\"headerlink\" title=\"extract-text-webpack-plugin\"></a>extract-text-webpack-plugin</h4><blockquote>\n<p>æˆ‘ä»¬ç”¨å®ƒæ¥æŠŠä¾èµ–çš„ <code>CSS</code> åˆ†ç¦»å‡ºæ¥æˆä¸ºå•ç‹¬çš„æ–‡ä»¶ã€‚è¿™é‡Œå†çœ‹ä¸€ä¸‹ä½¿ç”¨ <code>extract-text-webpack-plugin</code> çš„é…ç½®</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader</span></span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: <span class=\"string\">'css-loader'</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"comment\">// å¼•å…¥æ’ä»¶ï¼Œé…ç½®æ–‡ä»¶åï¼Œè¿™é‡ŒåŒæ ·å¯ä»¥ä½¿ç”¨ [hash]</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">'index.css'</span>)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>åœ¨ä¸Šè¿°çš„é…ç½®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>index.css</code> ä½œä¸ºå•ç‹¬åˆ†ç¦»å‡ºæ¥çš„æ–‡ä»¶åï¼Œä½†æœ‰çš„æ—¶å€™æ„å»ºå…¥å£ä¸æ­¢ä¸€ä¸ªï¼Œ<code>extract-text-webpack-plugin</code> ä¼šä¸ºæ¯ä¸€ä¸ªå…¥å£åˆ›å»ºå•ç‹¬åˆ†ç¦»çš„æ–‡ä»¶ï¼Œå› æ­¤æœ€å¥½è¿™æ ·é…ç½®</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿™æ ·ç¡®ä¿åœ¨ä½¿ç”¨å¤šä¸ªæ„å»ºå…¥å£æ—¶ï¼Œç”Ÿæˆä¸åŒåç§°çš„æ–‡ä»¶</span></span><br><span class=\"line\">plugins: [</span><br><span class=\"line\">  <span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">'[name].css'</span>),</span><br><span class=\"line\">],</span><br></pre></td></tr></table></figure>\n<h3 id=\"æ›´å¥½ä½¿ç”¨-webpack-dev-server\"><a href=\"#æ›´å¥½ä½¿ç”¨-webpack-dev-server\" class=\"headerlink\" title=\"æ›´å¥½ä½¿ç”¨ webpack-dev-server\"></a>æ›´å¥½ä½¿ç”¨ webpack-dev-server</h3><blockquote>\n<p><code>webpack-dev-server</code> æ˜¯ <code>webpack</code> å®˜æ–¹æä¾›çš„ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥åŸºäºå½“å‰çš„ <code>webpack</code> æ„å»ºé…ç½®å¿«é€Ÿå¯åŠ¨ä¸€ä¸ªé™æ€æœåŠ¡ã€‚å½“ <code>mode</code> ä¸º <code>development</code> æ—¶ï¼Œä¼šå…·å¤‡ <code>hot reload</code> çš„åŠŸèƒ½ï¼Œå³å½“æºç æ–‡ä»¶å˜åŒ–æ—¶ï¼Œä¼šå³æ—¶æ›´æ–°å½“å‰é¡µé¢ï¼Œä»¥ä¾¿ä½ çœ‹åˆ°æœ€æ–°çš„æ•ˆæœâ€¦</p>\n</blockquote>\n<h4 id=\"åŸºç¡€ä½¿ç”¨\"><a href=\"#åŸºç¡€ä½¿ç”¨\" class=\"headerlink\" title=\"åŸºç¡€ä½¿ç”¨\"></a>åŸºç¡€ä½¿ç”¨</h4><blockquote>\n<p><code>webpack-dev-server</code> æ˜¯ä¸€ä¸ª <code>npm package</code>ï¼Œå®‰è£…ååœ¨å·²ç»æœ‰ <code>webpack</code> é…ç½®æ–‡ä»¶çš„é¡¹ç›®ç›®å½•ä¸‹ç›´æ¥å¯åŠ¨å°±å¯ä»¥</p>\n</blockquote>\n<ul>\n<li><code>webpack-dev-server</code> é»˜è®¤ä½¿ç”¨ <code>8080</code> ç«¯å£</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install webpack-dev-server -g</span><br><span class=\"line\">webpack-dev-server --mode development</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>package</code> ä¸­çš„ <code>scripts</code> é…ç½®ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"start\"</span>: <span class=\"string\">\"webpack-dev-server --mode development\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"é…ç½®\"><a href=\"#é…ç½®\" class=\"headerlink\" title=\"é…ç½®\"></a>é…ç½®</h4><blockquote>\n<p>åœ¨ webpack çš„é…ç½®ä¸­ï¼Œå¯ä»¥é€šè¿‡ <code>devServer</code> å­—æ®µæ¥é…ç½® <code>webpack-dev-server</code>ï¼Œå¦‚ç«¯å£è®¾ç½®ã€å¯åŠ¨ <code>gzip</code> å‹ç¼©ç­‰ï¼Œè¿™é‡Œç®€å•è®²è§£å‡ ä¸ªå¸¸ç”¨çš„é…ç½®</p>\n</blockquote>\n<ul>\n<li><code>public</code> å­—æ®µç”¨äºæŒ‡å®šé™æ€æœåŠ¡çš„åŸŸåï¼Œé»˜è®¤æ˜¯ <code>http://localhost:8080/</code> ï¼Œå½“ä½ ä½¿ç”¨ <code>Nginx</code> æ¥åšåå‘ä»£ç†æ—¶ï¼Œåº”è¯¥å°±éœ€è¦ä½¿ç”¨è¯¥é…ç½®æ¥æŒ‡å®š <code>Nginx</code> é…ç½®ä½¿ç”¨çš„æœåŠ¡åŸŸå</li>\n<li><code>port</code> å­—æ®µç”¨äºæŒ‡å®šé™æ€æœåŠ¡çš„ç«¯å£ï¼Œå¦‚ä¸Šï¼Œé»˜è®¤æ˜¯ <code>8080</code>ï¼Œé€šå¸¸æƒ…å†µä¸‹éƒ½ä¸éœ€è¦æ”¹åŠ¨</li>\n<li><code>publicPath</code> å­—æ®µç”¨äºæŒ‡å®šæ„å»ºå¥½çš„é™æ€æ–‡ä»¶åœ¨æµè§ˆå™¨ä¸­ç”¨ä»€ä¹ˆè·¯å¾„å»è®¿é—®ï¼Œé»˜è®¤æ˜¯ <code>/</code>ï¼Œä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªæ„å»ºå¥½çš„æ–‡ä»¶ <code>bundle.js</code>ï¼Œå®Œæ•´çš„è®¿é—®è·¯å¾„æ˜¯ <code>http://localhost:8080/bundle.js</code>ï¼Œå¦‚æœä½ é…ç½®äº† <code>publicPath: &#39;assets/&#39;</code>ï¼Œé‚£ä¹ˆä¸Šè¿° <code>bundle.js</code> çš„å®Œæ•´è®¿é—®è·¯å¾„å°±æ˜¯ <code>http://localhost:8080/assets/bundle.js</code>ã€‚å¯ä»¥ä½¿ç”¨æ•´ä¸ª <code>URL</code> æ¥ä½œä¸º <code>publicPath</code> çš„å€¼ï¼Œå¦‚ <code>publicPath: &#39;http://localhost:8080/assets/&#39;</code>ã€‚å¦‚æœä½ ä½¿ç”¨äº† <code>HMR</code>ï¼Œé‚£ä¹ˆè¦è®¾ç½® <code>publicPath</code> å°±å¿…é¡»ä½¿ç”¨å®Œæ•´çš„ <code>URL</code></li>\n</ul>\n<blockquote>\n<p>å»ºè®®å°† <code>devServer.publicPath</code> å’Œ <code>output.publicPath</code> çš„å€¼ä¿æŒä¸€è‡´</p>\n</blockquote>\n<ul>\n<li><code>proxy</code> ç”¨äºé…ç½® <code>webpack-dev-server</code> å°†ç‰¹å®š <code>URL</code> çš„è¯·æ±‚ä»£ç†åˆ°å¦å¤–ä¸€å°æœåŠ¡å™¨ä¸Šã€‚å½“ä½ æœ‰å•ç‹¬çš„åç«¯å¼€å‘æœåŠ¡å™¨ç”¨äºè¯·æ±‚ API æ—¶ï¼Œè¿™ä¸ªé…ç½®ç›¸å½“æœ‰ç”¨ã€‚ä¾‹å¦‚</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">proxy: &#123;</span><br><span class=\"line\">  <span class=\"string\">'/api'</span>: &#123;</span><br><span class=\"line\">    target: <span class=\"string\">\"http://localhost:3000\"</span>, <span class=\"comment\">// å°† URL ä¸­å¸¦æœ‰ /api çš„è¯·æ±‚ä»£ç†åˆ°æœ¬åœ°çš„ 3000 ç«¯å£çš„æœåŠ¡ä¸Š</span></span><br><span class=\"line\">    pathRewrite: &#123;<span class=\"string\">'^/api'</span>: <span class=\"string\">''</span>&#125;, <span class=\"comment\">// æŠŠ URL ä¸­ path éƒ¨åˆ†çš„ `api` ç§»é™¤æ‰</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>before</code> å’Œ <code>after</code> é…ç½®ç”¨äºåœ¨ <code>webpack-dev-server</code> å®šä¹‰é¢å¤–çš„ä¸­é—´ä»¶ï¼Œå¦‚</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">before(app)&#123;</span><br><span class=\"line\">  app.get(<span class=\"string\">'/some/path'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res</span>) </span>&#123; <span class=\"comment\">// å½“è®¿é—® /some/path è·¯å¾„æ—¶ï¼Œè¿”å›è‡ªå®šä¹‰çš„ json æ•°æ®</span></span><br><span class=\"line\">    res.json(&#123;<span class=\"attr\">custom</span>: <span class=\"string\">'response'</span>&#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>before</code> åœ¨ <code>webpack-dev-server</code> é™æ€èµ„æºä¸­é—´ä»¶å¤„ç†ä¹‹å‰ï¼Œå¯ä»¥ç”¨äºæ‹¦æˆªéƒ¨åˆ†è¯·æ±‚è¿”å›ç‰¹å®šå†…å®¹ï¼Œæˆ–è€…å®ç°ç®€å•çš„æ•°æ® <code>mock</code>ã€‚</li>\n<li><code>after</code> åœ¨ <code>webpack-dev-server</code> é™æ€èµ„æºä¸­é—´ä»¶å¤„ç†ä¹‹åï¼Œæ¯”è¾ƒå°‘ç”¨åˆ°ï¼Œå¯ä»¥ç”¨äºæ‰“å°æ—¥å¿—æˆ–è€…åšä¸€äº›é¢å¤–å¤„ç†â€¦</li>\n</ul>\n<h3 id=\"å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„æ„å»ºé…ç½®å·®å¼‚\"><a href=\"#å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„æ„å»ºé…ç½®å·®å¼‚\" class=\"headerlink\" title=\"å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„æ„å»ºé…ç½®å·®å¼‚\"></a>å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„æ„å»ºé…ç½®å·®å¼‚</h3><ul>\n<li>æˆ‘ä»¬åœ¨æ—¥å¸¸çš„å‰ç«¯å¼€å‘å·¥ä½œä¸­ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰ä¸¤å¥—æ„å»ºç¯å¢ƒï¼šä¸€å¥—å¼€å‘æ—¶ä½¿ç”¨ï¼Œæ„å»ºç»“æœç”¨äºæœ¬åœ°å¼€å‘è°ƒè¯•ï¼Œä¸è¿›è¡Œä»£ç å‹ç¼©ï¼Œæ‰“å° <code>debug</code> ä¿¡æ¯ï¼ŒåŒ…å« <code>sourcemap</code> æ–‡ä»¶</li>\n<li>å¦å¤–ä¸€å¥—æ„å»ºåçš„ç»“æœæ˜¯ç›´æ¥åº”ç”¨äºçº¿ä¸Šçš„ï¼Œå³ä»£ç éƒ½æ˜¯å‹ç¼©åï¼Œè¿è¡Œæ—¶ä¸æ‰“å° <code>debug</code> ä¿¡æ¯ï¼Œé™æ€æ–‡ä»¶ä¸åŒ…æ‹¬ <code>sourcemap</code> çš„ã€‚æœ‰çš„æ—¶å€™å¯èƒ½è¿˜éœ€è¦å¤šä¸€å¥—æµ‹è¯•ç¯å¢ƒï¼Œåœ¨è¿è¡Œæ—¶ç›´æ¥è¿›è¡Œè¯·æ±‚ <code>mock</code> ç­‰å·¥ä½œ</li>\n<li><code>webpack 4.x</code> ç‰ˆæœ¬å¼•å…¥äº† <code>mode</code> çš„æ¦‚å¿µï¼Œåœ¨è¿è¡Œ <code>webpack</code> æ—¶éœ€è¦æŒ‡å®šä½¿ç”¨ <code>production</code> æˆ– <code>development</code> ä¸¤ä¸ª <code>mode</code> å…¶ä¸­ä¸€ä¸ªï¼Œè¿™ä¸ªåŠŸèƒ½ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„è¿è¡Œä¸¤å¥—æ„å»ºç¯å¢ƒçš„èƒ½åŠ›ã€‚</li>\n</ul>\n<h4 id=\"åœ¨é…ç½®æ–‡ä»¶ä¸­åŒºåˆ†-mode\"><a href=\"#åœ¨é…ç½®æ–‡ä»¶ä¸­åŒºåˆ†-mode\" class=\"headerlink\" title=\"åœ¨é…ç½®æ–‡ä»¶ä¸­åŒºåˆ† mode\"></a>åœ¨é…ç½®æ–‡ä»¶ä¸­åŒºåˆ† mode</h4><blockquote>\n<p>ä¹‹å‰æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶éƒ½æ˜¯ç›´æ¥å¯¹å¤–æš´éœ²ä¸€ä¸ª <code>JS</code> å¯¹è±¡ï¼Œè¿™ç§æ–¹å¼æš‚æ—¶æ²¡æœ‰åŠæ³•è·å–åˆ° <code>webpack</code> çš„ <code>mode</code> å‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ¢ä¸€ç§æ–¹å¼æ¥å¤„ç†é…ç½®ã€‚æ ¹æ®å®˜æ–¹çš„æ–‡æ¡£å¤šç§é…ç½®ç±»å‹ï¼Œé…ç½®æ–‡ä»¶å¯ä»¥å¯¹å¤–æš´éœ²ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¿™æ ·åš</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\">(<span class=\"params\">env, argv</span>) =&gt;</span> (&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... å…¶ä»–é…ç½®</span></span><br><span class=\"line\">  optimization: &#123;</span><br><span class=\"line\">    minimize: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"comment\">// ä½¿ç”¨ argv æ¥è·å– mode å‚æ•°çš„å€¼</span></span><br><span class=\"line\">    minimizer:</span><br><span class=\"line\">      argv.mode === <span class=\"string\">'production'</span></span><br><span class=\"line\">        ? [</span><br><span class=\"line\">            <span class=\"keyword\">new</span> UglifyJsPlugin(&#123;</span><br><span class=\"line\">              <span class=\"comment\">/* ä½ è‡ªå·±çš„é…ç½® */</span></span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">            <span class=\"comment\">// ä»…åœ¨æˆ‘ä»¬è¦è‡ªå®šä¹‰å‹ç¼©é…ç½®æ—¶æ‰éœ€è¦è¿™ä¹ˆåš</span></span><br><span class=\"line\">            <span class=\"comment\">// mode ä¸º production æ—¶ webpack ä¼šé»˜è®¤ä½¿ç”¨å‹ç¼© JS çš„ plugin</span></span><br><span class=\"line\">          ]</span><br><span class=\"line\">        : []</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>è¿™æ ·è·å– <code>mode</code> ä¹‹åï¼Œæˆ‘ä»¬å°±èƒ½å¤ŸåŒºåˆ†ä¸åŒçš„æ„å»ºç¯å¢ƒï¼Œç„¶åæ ¹æ®ä¸åŒç¯å¢ƒå†å¯¹ç‰¹æ®Šçš„ <code>loader</code> æˆ– <code>plugin</code> åšé¢å¤–çš„é…ç½®å°±å¯ä»¥äº†</p>\n</blockquote>\n<ul>\n<li>ä»¥ä¸Šæ˜¯ <code>webpack 4.x</code> çš„åšæ³•ï¼Œç”±äºæœ‰äº† <code>mode</code> å‚æ•°ï¼ŒåŒºåˆ†ç¯å¢ƒå˜å¾—ç®€å•äº†ã€‚ä¸è¿‡åœ¨å½“å‰ä¸šç•Œï¼Œä¼°è®¡è¿˜æ˜¯ä½¿ç”¨ <code>webpack 3.x</code> ç‰ˆæœ¬çš„å±…å¤šï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿç®€å•ä»‹ç»ä¸€ä¸‹ <code>3.x</code> å¦‚ä½•åŒºåˆ†ç¯å¢ƒ</li>\n</ul>\n<blockquote>\n<p><code>webpack</code> çš„è¿è¡Œæ—¶ç¯å¢ƒæ˜¯ <code>Node.js</code>ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>Node.js</code> æä¾›çš„æœºåˆ¶ç»™è¦è¿è¡Œçš„ <code>webpack</code> ç¨‹åºä¼ é€’ç¯å¢ƒå˜é‡ï¼Œæ¥æ§åˆ¶ä¸åŒç¯å¢ƒä¸‹çš„æ„å»ºè¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨ <code>npm</code> ä¸­çš„ <code>scripts</code> å­—æ®µæ·»åŠ ä¸€ä¸ªç”¨äºç”Ÿäº§ç¯å¢ƒçš„æ„å»ºå‘½ä»¤â€¦</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"build\"</span>: <span class=\"string\">\"NODE_ENV=production webpack\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"develop\"</span>: <span class=\"string\">\"NODE_ENV=development webpack-dev-server\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>ç„¶ååœ¨ <code>webpack.config.js</code> æ–‡ä»¶ä¸­å¯ä»¥é€šè¿‡ <code>process.env.NODE_ENV</code> æ¥è·å–å‘½ä»¤ä¼ å…¥çš„ç¯å¢ƒå˜é‡</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> config = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... webpack é…ç½®</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (process.env.NODE_ENV === <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ç”Ÿäº§ç¯å¢ƒéœ€è¦åšçš„äº‹æƒ…ï¼Œå¦‚ä½¿ç”¨ä»£ç å‹ç¼©æ’ä»¶ç­‰</span></span><br><span class=\"line\">  config.plugins.push(<span class=\"keyword\">new</span> UglifyJsPlugin());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = config;</span><br></pre></td></tr></table></figure>\n<h4 id=\"è¿è¡Œæ—¶çš„ç¯å¢ƒå˜é‡\"><a href=\"#è¿è¡Œæ—¶çš„ç¯å¢ƒå˜é‡\" class=\"headerlink\" title=\"è¿è¡Œæ—¶çš„ç¯å¢ƒå˜é‡\"></a>è¿è¡Œæ—¶çš„ç¯å¢ƒå˜é‡</h4><blockquote>\n<p>æˆ‘ä»¬ä½¿ç”¨ webpack æ—¶ä¼ é€’çš„ mode å‚æ•°ï¼Œæ˜¯å¯ä»¥åœ¨æˆ‘ä»¬çš„åº”ç”¨ä»£ç è¿è¡Œæ—¶ï¼Œé€šè¿‡ <code>process.env.NODE_ENV</code> è¿™ä¸ªå˜é‡è·å–çš„ã€‚è¿™æ ·æ–¹ä¾¿æˆ‘ä»¬åœ¨è¿è¡Œæ—¶åˆ¤æ–­å½“å‰æ‰§è¡Œçš„æ„å»ºç¯å¢ƒï¼Œä½¿ç”¨æœ€å¤šçš„åœºæ™¯è«è¿‡äºæ§åˆ¶æ˜¯å¦æ‰“å° <code>debug</code> ä¿¡æ¯â€¦</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢è¿™ä¸ªç®€å•çš„ä¾‹å­ï¼Œåœ¨åº”ç”¨å¼€å‘çš„ä»£ç ä¸­å®ç°ä¸€ä¸ªç®€å•çš„ <code>console</code> æ‰“å°å°è£…</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">log</span>(<span class=\"params\">...args</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.env.NODE_ENV === <span class=\"string\">'development'</span> &amp;&amp; <span class=\"built_in\">console</span> &amp;&amp; <span class=\"built_in\">console</span>.log) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log.apply(<span class=\"built_in\">console</span>, args);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>åŒæ ·ï¼Œä»¥ä¸Šæ˜¯ <code>webpack 4.x</code> çš„åšæ³•ï¼Œä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹ <code>3.x</code> ç‰ˆæœ¬åº”è¯¥å¦‚ä½•å®ç°ã€‚è¿™é‡Œéœ€è¦ç”¨åˆ° <code>DefinePlugin</code> æ’ä»¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨æ„å»ºæ—¶ç»™è¿è¡Œæ—¶å®šä¹‰å˜é‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªè¦åœ¨å‰é¢ <code>webpack 3.x</code> ç‰ˆæœ¬åŒºåˆ†æ„å»ºç¯å¢ƒçš„ä¾‹å­çš„åŸºç¡€ä¸Šï¼Œå†ä½¿ç”¨ <code>DefinePlugin</code> æ·»åŠ ç¯å¢ƒå˜é‡å³å¯å½±å“åˆ°è¿è¡Œæ—¶çš„ä»£ç â€¦</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"comment\">// webpack çš„é…ç½®</span></span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123;</span><br><span class=\"line\">      <span class=\"comment\">// webpack 3.x çš„ process.env.NODE_ENV æ˜¯é€šè¿‡æ‰‹åŠ¨åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®š NODE_ENV=... çš„æ–¹å¼æ¥ä¼ é€’çš„</span></span><br><span class=\"line\">      <span class=\"string\">'process.env.NODE_ENV'</span>: <span class=\"built_in\">JSON</span>.stringify(process.env.NODE_ENV)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"å¸¸è§çš„ç¯å¢ƒå·®å¼‚é…ç½®\"><a href=\"#å¸¸è§çš„ç¯å¢ƒå·®å¼‚é…ç½®\" class=\"headerlink\" title=\"å¸¸è§çš„ç¯å¢ƒå·®å¼‚é…ç½®\"></a>å¸¸è§çš„ç¯å¢ƒå·®å¼‚é…ç½®</h4><p><strong>å¸¸è§çš„ webpack æ„å»ºå·®å¼‚é…ç½®</strong></p>\n<ul>\n<li>ç”Ÿäº§ç¯å¢ƒå¯èƒ½éœ€è¦åˆ†ç¦» <code>CSS</code> æˆå•ç‹¬çš„æ–‡ä»¶ï¼Œä»¥ä¾¿å¤šä¸ªé¡µé¢å…±äº«åŒä¸€ä¸ª <code>CSS</code> æ–‡ä»¶</li>\n<li>ç”Ÿäº§ç¯å¢ƒéœ€è¦å‹ç¼© <code>HTML/CSS/JS</code> ä»£ç </li>\n<li>ç”Ÿäº§ç¯å¢ƒéœ€è¦å‹ç¼©å›¾ç‰‡</li>\n<li>å¼€å‘ç¯å¢ƒéœ€è¦ç”Ÿæˆ <code>sourcemap</code> æ–‡ä»¶</li>\n<li>å¼€å‘ç¯å¢ƒéœ€è¦æ‰“å° <code>debug</code> ä¿¡æ¯</li>\n<li>å¼€å‘ç¯å¢ƒéœ€è¦ <code>live reload</code> æˆ–è€… <code>hot reload</code> çš„åŠŸèƒ½â€¦</li>\n</ul>\n<blockquote>\n<p><code>webpack 4.x</code> çš„ <code>mode</code> å·²ç»æä¾›äº†ä¸Šè¿°å·®å¼‚é…ç½®çš„å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œ<code>mode</code> ä¸º <code>production</code> æ—¶é»˜è®¤ä½¿ç”¨ <code>JS</code> ä»£ç å‹ç¼©ï¼Œè€Œ <code>mode</code> ä¸º <code>development</code> æ—¶é»˜è®¤å¯ç”¨ <code>hot</code> <code>reload</code>ï¼Œç­‰ç­‰ã€‚è¿™æ ·è®©æˆ‘ä»¬çš„é…ç½®æ›´ä¸ºç®€æ´ï¼Œæˆ‘ä»¬åªéœ€è¦é’ˆå¯¹ç‰¹åˆ«ä½¿ç”¨çš„ <code>loader</code> å’Œ <code>plugin</code> åšåŒºåˆ†é…ç½®å°±å¯ä»¥äº†â€¦</p>\n</blockquote>\n<ul>\n<li><code>webpack 3.x</code> ç‰ˆæœ¬è¿˜æ˜¯åªèƒ½è‡ªå·±åŠ¨æ‰‹ä¿®æ”¹é…ç½®æ¥æ»¡è¶³å¤§éƒ¨åˆ†ç¯å¢ƒå·®å¼‚éœ€æ±‚ï¼Œæ‰€ä»¥å¦‚æœä½ è¦å¼€å§‹ä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨ <code>webpack 4.x</code> ç‰ˆæœ¬</li>\n</ul>\n<h4 id=\"æ‹†åˆ†é…ç½®\"><a href=\"#æ‹†åˆ†é…ç½®\" class=\"headerlink\" title=\"æ‹†åˆ†é…ç½®\"></a>æ‹†åˆ†é…ç½®</h4><blockquote>\n<p>å‰é¢æˆ‘ä»¬åˆ—å‡ºäº†å‡ ä¸ªç¯å¢ƒå·®å¼‚é…ç½®ï¼Œå¯èƒ½è¿™äº›æ„å»ºéœ€æ±‚å°±å·²ç»æœ‰ç‚¹å¤šäº†ï¼Œä¼šè®©æ•´ä¸ª <code>webpack</code> çš„é…ç½®å˜å¾—å¤æ‚ï¼Œå°¤å…¶æ˜¯æœ‰ç€å¤§é‡ç¯å¢ƒå˜é‡åˆ¤æ–­çš„é…ç½®ã€‚æˆ‘ä»¬å¯ä»¥æŠŠ <code>webpack</code> çš„é…ç½®æŒ‰ç…§ä¸åŒçš„ç¯å¢ƒæ‹†åˆ†æˆå¤šä¸ªæ–‡ä»¶ï¼Œè¿è¡Œæ—¶ç›´æ¥æ ¹æ®ç¯å¢ƒå˜é‡åŠ è½½å¯¹åº”çš„é…ç½®å³å¯ã€‚åŸºæœ¬çš„åˆ’åˆ†å¦‚ä¸‹â€¦</p>\n</blockquote>\n<ul>\n<li><code>webpack.base.js</code>ï¼šåŸºç¡€éƒ¨åˆ†ï¼Œå³å¤šä¸ªæ–‡ä»¶ä¸­å…±äº«çš„é…ç½®</li>\n<li><code>webpack.development.js</code>ï¼šå¼€å‘ç¯å¢ƒä½¿ç”¨çš„é…ç½®</li>\n<li><code>webpack.production.js</code>ï¼šç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„é…ç½®</li>\n<li><code>webpack.test.js</code>ï¼šæµ‹è¯•ç¯å¢ƒä½¿ç”¨çš„é…ç½®â€¦</li>\n</ul>\n<p><strong>å¦‚ä½•å¤„ç†è¿™æ ·çš„é…ç½®æ‹†åˆ†</strong></p>\n<blockquote>\n<p>é¦–å…ˆæˆ‘ä»¬è¦æ˜ç™½ï¼Œå¯¹äº <code>webpack</code> çš„é…ç½®ï¼Œå…¶å®æ˜¯å¯¹å¤–æš´éœ²ä¸€ä¸ª <code>JS</code> å¯¹è±¡ï¼Œæ‰€ä»¥å¯¹äºè¿™ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç”¨ <code>JS</code> ä»£ç æ¥ä¿®æ”¹å®ƒï¼Œä¾‹å¦‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> config = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... webpack é…ç½®</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æˆ‘ä»¬å¯ä»¥ä¿®æ”¹è¿™ä¸ª config æ¥è°ƒæ•´é…ç½®ï¼Œä¾‹å¦‚æ·»åŠ ä¸€ä¸ªæ–°çš„æ’ä»¶</span></span><br><span class=\"line\">config.plugins.push(<span class=\"keyword\">new</span> YourPlugin());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = config;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>å› æ­¤ï¼Œåªè¦æœ‰ä¸€ä¸ªå·¥å…·èƒ½æ¯”è¾ƒæ™ºèƒ½åœ°åˆå¹¶å¤šä¸ªé…ç½®å¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆè½»æ¾åœ°æ‹†åˆ† webpack é…ç½®ï¼Œç„¶åé€šè¿‡åˆ¤æ–­ç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨å·¥å…·å°†å¯¹åº”ç¯å¢ƒçš„å¤šä¸ªé…ç½®å¯¹è±¡æ•´åˆåæä¾›ç»™ webpack ä½¿ç”¨ã€‚è¿™ä¸ªå·¥å…·å°±æ˜¯ <strong><a href=\"https://github.com/survivejs/webpack-merge\" target=\"_blank\" rel=\"noopener\">webpack-merge</a></strong></p>\n</blockquote>\n<ul>\n<li>æˆ‘ä»¬çš„ webpack é…ç½®åŸºç¡€éƒ¨åˆ†ï¼Œå³ <code>webpack.base.js</code> åº”è¯¥å¤§è‡´æ˜¯è¿™æ ·çš„</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: <span class=\"string\">'...'</span>,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  resolve: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// è¿™é‡Œæ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œåé¢ä»‹ç» API æ—¶ä¼šç”¨åˆ°</span></span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        use: [<span class=\"string\">'babel'</span>]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>ç„¶å <code>webpack.development.js</code> éœ€è¦æ·»åŠ  <code>loader</code> æˆ– <code>plugin</code>ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>webpack-merge</code> çš„ <code>API</code>ï¼Œä¾‹å¦‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123;smart&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-merge'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> base = <span class=\"built_in\">require</span>(<span class=\"string\">'./webpack.base.js'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = smart(base, &#123;</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      <span class=\"comment\">// ç”¨ smart APIï¼Œå½“è¿™é‡Œçš„åŒ¹é…è§„åˆ™ç›¸åŒä¸” use å€¼éƒ½æ˜¯æ•°ç»„æ—¶ï¼Œsmart ä¼šè¯†åˆ«åå¤„ç†</span></span><br><span class=\"line\">      <span class=\"comment\">// å’Œä¸Šè¿° base é…ç½®åˆå¹¶åï¼Œè¿™é‡Œä¼šæ˜¯ &#123;test: /\\.js$/, use: ['babel', 'coffee'] &#125;</span></span><br><span class=\"line\">      <span class=\"comment\">// å¦‚æœè¿™é‡Œ use çš„å€¼ç”¨çš„æ˜¯å­—ç¬¦ä¸²æˆ–è€…å¯¹è±¡çš„è¯ï¼Œé‚£ä¹ˆä¼šæ›¿æ¢æ‰åŸæœ¬çš„è§„åˆ™ use çš„å€¼</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        use: [<span class=\"string\">'coffee'</span>],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"comment\">// plugins è¿™é‡Œçš„æ•°ç»„ä¼šå’Œ base ä¸­çš„ plugins æ•°ç»„è¿›è¡Œåˆå¹¶</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123;</span><br><span class=\"line\">      <span class=\"string\">'process.env.NODE_ENV'</span>: <span class=\"built_in\">JSON</span>.stringify(process.env.NODE_ENV),</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">  ],</span><br><span class=\"line\">&#125;)ï¼›</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>å¯è§ <code>webpack-merge</code> æä¾›çš„ <code>smart</code> æ–¹æ³•ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´åŠ è½»æ¾åœ°å¤„ç† <code>loader</code> é…ç½®çš„åˆå¹¶ã€‚<code>webpack-merge</code> è¿˜æœ‰å…¶ä»– <code>API</code> å¯ä»¥ç”¨äºè‡ªå®šä¹‰åˆå¹¶è¡Œä¸º</p>\n</blockquote>\n<h4 id=\"å®Œæ•´ä»£ç -1\"><a href=\"#å®Œæ•´ä»£ç -1\" class=\"headerlink\" title=\"å®Œæ•´ä»£ç \"></a>å®Œæ•´ä»£ç </h4><blockquote>\n<p><code>webpack.config.js</code></p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">env, argv</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> argv.mode === <span class=\"string\">'production'</span></span><br><span class=\"line\">    ? <span class=\"built_in\">require</span>(<span class=\"string\">'./configs/webpack.production'</span>)</span><br><span class=\"line\">    : <span class=\"built_in\">require</span>(<span class=\"string\">'./configs/webpack.development'</span>);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>configs/webpack.base.js</code></p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: <span class=\"string\">'./src/index.js'</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'../dist'</span>),</span><br><span class=\"line\">    filename: <span class=\"string\">'[name].js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?/</span>,</span><br><span class=\"line\">        include: [path.resolve(__dirname, <span class=\"string\">'../src'</span>)],</span><br><span class=\"line\">        use: <span class=\"string\">'babel-loader'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif)$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'file-loader'</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      filename: <span class=\"string\">'index.html'</span>, <span class=\"comment\">// é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„</span></span><br><span class=\"line\">      template: <span class=\"string\">'src/index.html'</span> <span class=\"comment\">// é…ç½®æ–‡ä»¶æ¨¡æ¿</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>configs/webpack.development.js</code></p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> merge = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-merge'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> baseConfig = <span class=\"built_in\">require</span>(<span class=\"string\">'./webpack.base'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> config = merge.smart(baseConfig, &#123;</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        enforce: <span class=\"string\">'pre'</span>,</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">'eslint-loader'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">        use: [<span class=\"string\">'style-loader'</span>, <span class=\"string\">'css-loader'</span>, <span class=\"string\">'less-loader'</span>]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  devServer: &#123;</span><br><span class=\"line\">    port: <span class=\"string\">'1234'</span>,</span><br><span class=\"line\">    before(app) &#123;</span><br><span class=\"line\">      app.get(<span class=\"string\">'/api/test.json'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">        res.json(&#123; <span class=\"attr\">code</span>: <span class=\"number\">200</span>, <span class=\"attr\">message</span>: <span class=\"string\">'hello world'</span> &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">config.plugins.push(</span><br><span class=\"line\">  <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123;</span><br><span class=\"line\">    __DEV__: <span class=\"built_in\">JSON</span>.stringify(<span class=\"literal\">true</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = config;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>configs/webpack.production.js</code></p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> merge = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-merge'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> baseConfig = <span class=\"built_in\">require</span>(<span class=\"string\">'./webpack.base'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> config = merge.smart(baseConfig, &#123;</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">              loader: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">              options: &#123;</span><br><span class=\"line\">                minimize: <span class=\"literal\">true</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"string\">'less-loader'</span></span><br><span class=\"line\">          ]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">config.plugins.push(<span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">'[name].css'</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = config;</span><br></pre></td></tr></table></figure>\n<h3 id=\"æ¨¡å—çƒ­æ›¿æ¢æé«˜å¼€å‘æ•ˆç‡\"><a href=\"#æ¨¡å—çƒ­æ›¿æ¢æé«˜å¼€å‘æ•ˆç‡\" class=\"headerlink\" title=\"æ¨¡å—çƒ­æ›¿æ¢æé«˜å¼€å‘æ•ˆç‡\"></a>æ¨¡å—çƒ­æ›¿æ¢æé«˜å¼€å‘æ•ˆç‡</h3><blockquote>\n<p><code>HMR</code> å…¨ç§°æ˜¯ <code>Hot Module Replacement</code>ï¼Œå³æ¨¡å—çƒ­æ›¿æ¢ã€‚åœ¨è¿™ä¸ªæ¦‚å¿µå‡ºæ¥ä¹‹å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿‡ <code>Hot Reloading</code>ï¼Œå½“ä»£ç å˜æ›´æ—¶é€šçŸ¥æµè§ˆå™¨åˆ·æ–°é¡µé¢ï¼Œä»¥é¿å…é¢‘ç¹æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨é¡µé¢ã€‚HMR å¯ä»¥ç†è§£ä¸ºå¢å¼ºç‰ˆçš„ <code>Hot Reloading</code>ï¼Œä½†ä¸ç”¨æ•´ä¸ªé¡µé¢åˆ·æ–°ï¼Œè€Œæ˜¯å±€éƒ¨æ›¿æ¢æ‰éƒ¨åˆ†æ¨¡å—ä»£ç å¹¶ä¸”ä½¿å…¶ç”Ÿæ•ˆï¼Œå¯ä»¥çœ‹åˆ°ä»£ç å˜æ›´åçš„æ•ˆæœã€‚æ‰€ä»¥ï¼Œ<code>HMR</code> æ—¢é¿å…äº†é¢‘ç¹æ‰‹åŠ¨åˆ·æ–°é¡µé¢ï¼Œä¹Ÿå‡å°‘äº†é¡µé¢åˆ·æ–°æ—¶çš„ç­‰å¾…ï¼Œå¯ä»¥æå¤§åœ°æé«˜å‰ç«¯é¡µé¢å¼€å‘æ•ˆç‡â€¦</p>\n</blockquote>\n<h4 id=\"é…ç½®ä½¿ç”¨-HMR\"><a href=\"#é…ç½®ä½¿ç”¨-HMR\" class=\"headerlink\" title=\"é…ç½®ä½¿ç”¨ HMR\"></a>é…ç½®ä½¿ç”¨ HMR</h4><blockquote>\n<p><code>HMR</code> æ˜¯ <code>webpack</code> æä¾›çš„éå¸¸æœ‰ç”¨çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œè·Ÿæˆ‘ä»¬ä¹‹å‰æåˆ°çš„ä¸€æ ·ï¼Œå®‰è£…å¥½ <code>webpack-dev-server</code>ï¼Œ æ·»åŠ ä¸€äº›ç®€å•çš„é…ç½®ï¼Œå³åœ¨ <code>webpack</code> çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¯ç”¨ <code>HMR</code> éœ€è¦çš„ä¸¤ä¸ªæ’ä»¶</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  devServer: &#123;</span><br><span class=\"line\">    hot: <span class=\"literal\">true</span> <span class=\"comment\">// dev server çš„é…ç½®è¦å¯åŠ¨ hotï¼Œæˆ–è€…åœ¨å‘½ä»¤è¡Œä¸­å¸¦å‚æ•°å¼€å¯</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.NamedModulesPlugin(), <span class=\"comment\">// ç”¨äºå¯åŠ¨ HMR æ—¶å¯ä»¥æ˜¾ç¤ºæ¨¡å—çš„ç›¸å¯¹è·¯å¾„</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.HotModuleReplacementPlugin() <span class=\"comment\">// Hot Module Replacement çš„æ’ä»¶</span></span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"module-hot-å¸¸è§çš„-API\"><a href=\"#module-hot-å¸¸è§çš„-API\" class=\"headerlink\" title=\"module.hot å¸¸è§çš„ API\"></a>module.hot å¸¸è§çš„ API</h4><blockquote>\n<p>å‰é¢ <code>HMR</code> å®ç°éƒ¨åˆ†å·²ç»è®²è§£äº†å®ç° HMR æ¥å£çš„é‡è¦æ€§ï¼Œä¸‹é¢æ¥çœ‹çœ‹å¸¸è§çš„ <code>module.hot</code> <code>API</code> æœ‰å“ªäº›ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨</p>\n</blockquote>\n<ul>\n<li><code>module.hot.accept</code> æ–¹æ³•æŒ‡å®šåœ¨åº”ç”¨ç‰¹å®šä»£ç æ¨¡å—æ›´æ–°æ—¶æ‰§è¡Œç›¸åº”çš„ <code>callback</code>ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–è€…æ•°ç»„ï¼Œå¦‚</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"built_in\">module</span>.hot) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">module</span>.hot.accept([<span class=\"string\">'./bar.js'</span>, <span class=\"string\">'./index.css'</span>], () =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ... è¿™æ ·å½“ bar.js æˆ–è€… index.css æ›´æ–°æ—¶éƒ½ä¼šæ‰§è¡Œè¯¥å‡½æ•°</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>module.hot.decline</code> å¯¹äºæŒ‡å®šçš„ä»£ç æ¨¡å—ï¼Œæ‹’ç»è¿›è¡Œæ¨¡å—ä»£ç çš„æ›´æ–°ï¼Œè¿›å…¥æ›´æ–°å¤±è´¥çŠ¶æ€ï¼Œå¦‚ <code>module.hot.decline(&#39;./bar.js&#39;)</code>ã€‚è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒå°‘ç”¨åˆ°</li>\n<li><code>module.hot.dispose</code> ç”¨äºæ·»åŠ ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œåœ¨å½“å‰æ¨¡å—ä»£ç è¢«æ›¿æ¢æ—¶è¿è¡Œè¯¥å‡½æ•°ï¼Œä¾‹å¦‚</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"built_in\">module</span>.hot) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">module</span>.hot.dispose(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// data ç”¨äºä¼ é€’æ•°æ®ï¼Œå¦‚æœæœ‰éœ€è¦ä¼ é€’çš„æ•°æ®å¯ä»¥æŒ‚åœ¨ data å¯¹è±¡ä¸Šï¼Œç„¶ååœ¨æ¨¡å—ä»£ç æ›´æ–°åå¯ä»¥é€šè¿‡ module.hot.data æ¥è·å–</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>module.hot.accept</code> é€šå¸¸ç”¨äºæŒ‡å®šå½“å‰ä¾èµ–çš„æŸä¸ªæ¨¡å—æ›´æ–°æ—¶éœ€è¦åšçš„å¤„ç†ï¼Œå¦‚æœæ˜¯å½“å‰æ¨¡å—æ›´æ–°æ—¶éœ€è¦å¤„ç†çš„åŠ¨ä½œï¼Œä½¿ç”¨ <code>module.hot.dispose</code> ä¼šæ›´åŠ å®¹æ˜“æ–¹ä¾¿</li>\n<li><code>module.hot.removeDisposeHandler</code> ç”¨äºç§»é™¤ <code>dispose</code> æ–¹æ³•æ·»åŠ çš„ <code>callback</code></li>\n</ul>\n<h3 id=\"å›¾ç‰‡åŠ è½½ä¼˜åŒ–\"><a href=\"#å›¾ç‰‡åŠ è½½ä¼˜åŒ–\" class=\"headerlink\" title=\"å›¾ç‰‡åŠ è½½ä¼˜åŒ–\"></a>å›¾ç‰‡åŠ è½½ä¼˜åŒ–</h3><h4 id=\"CSS-Sprites\"><a href=\"#CSS-Sprites\" class=\"headerlink\" title=\"CSS Sprites\"></a>CSS Sprites</h4><ul>\n<li>å¦‚æœä½ ä½¿ç”¨çš„ <code>webpack 3.x</code> ç‰ˆæœ¬ï¼Œéœ€è¦ <code>CSS Sprites</code> çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ <code>webpack-spritesmith</code> æˆ–è€… <code>sprite-webpack-plugin</code>ã€‚</li>\n<li>æˆ‘ä»¬ä»¥ <code>webpack-spritesmith</code> ä¸ºä¾‹ï¼Œå…ˆå®‰è£…ä¾èµ–â€¦</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">  loaders: [</span><br><span class=\"line\">    <span class=\"comment\">// ... è¿™é‡Œéœ€è¦æœ‰å¤„ç†å›¾ç‰‡çš„ loaderï¼Œå¦‚ file-loader</span></span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">resolve: &#123;</span><br><span class=\"line\">  modules: [</span><br><span class=\"line\">    <span class=\"string\">'node_modules'</span>,</span><br><span class=\"line\">    <span class=\"string\">'spritesmith-generated'</span>, <span class=\"comment\">// webpack-spritesmith ç”Ÿæˆæ‰€éœ€æ–‡ä»¶çš„ç›®å½•</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">plugins: [</span><br><span class=\"line\">  <span class=\"keyword\">new</span> SpritesmithPlugin(&#123;</span><br><span class=\"line\">    src: &#123;</span><br><span class=\"line\">      cwd: path.resolve(__dirname, <span class=\"string\">'src/ico'</span>), <span class=\"comment\">// å¤šä¸ªå›¾ç‰‡æ‰€åœ¨çš„ç›®å½•</span></span><br><span class=\"line\">      glob: <span class=\"string\">'*.png'</span> <span class=\"comment\">// åŒ¹é…å›¾ç‰‡çš„è·¯å¾„</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    target: &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ç”Ÿæˆæœ€ç»ˆå›¾ç‰‡çš„è·¯å¾„</span></span><br><span class=\"line\">      image: path.resolve(__dirname, <span class=\"string\">'src/spritesmith-generated/sprite.png'</span>),</span><br><span class=\"line\">      <span class=\"comment\">// ç”Ÿæˆæ‰€éœ€ SASS/LESS/Stylus mixins ä»£ç ï¼Œæˆ‘ä»¬ä½¿ç”¨ Stylus é¢„å¤„ç†å™¨åšä¾‹å­</span></span><br><span class=\"line\">      css: path.resolve(__dirname, <span class=\"string\">'src/spritesmith-generated/sprite.styl'</span>),</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    apiOptions: &#123;</span><br><span class=\"line\">      cssImageRef: <span class=\"string\">\"~sprite.png\"</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;),</span><br><span class=\"line\">],</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>åœ¨ä½ éœ€è¦çš„æ ·å¼ä»£ç ä¸­å¼•å…¥ <code>sprite.styl</code> åè°ƒç”¨éœ€è¦çš„ <code>mixins</code> å³å¯</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@import &apos;~sprite.styl&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">.close-button</span><br><span class=\"line\">    sprite($close)</span><br><span class=\"line\">.open-button</span><br><span class=\"line\">    sprite($open)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ <code>webpack 4.x</code>ï¼Œä½ éœ€è¦é…åˆä½¿ç”¨ <code>postcss</code> å’Œ <code>postcss-sprites</code>ï¼Œæ‰èƒ½å®ç° <code>CSS Sprites</code> çš„ç›¸å…³æ„å»º</p>\n</blockquote>\n<h4 id=\"å›¾ç‰‡å‹ç¼©\"><a href=\"#å›¾ç‰‡å‹ç¼©\" class=\"headerlink\" title=\"å›¾ç‰‡å‹ç¼©\"></a>å›¾ç‰‡å‹ç¼©</h4><ul>\n<li>åœ¨ä¸€èˆ¬çš„é¡¹ç›®ä¸­ï¼Œå›¾ç‰‡èµ„æºä¼šå å‰ç«¯èµ„æºçš„å¾ˆå¤§ä¸€éƒ¨åˆ†ï¼Œæ—¢ç„¶ä»£ç éƒ½è¿›è¡Œå‹ç¼©äº†ï¼Œå å¤§å¤´çš„å›¾ç‰‡å°±æ›´ä¸ç”¨è¯´äº†</li>\n<li>æˆ‘ä»¬ä¹‹å‰æåŠä½¿ç”¨ <code>file-loader</code> æ¥å¤„ç†å›¾ç‰‡æ–‡ä»¶ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å†æ·»åŠ ä¸€ä¸ª <code>image-webpack-loader</code> æ¥å‹ç¼©å›¾ç‰‡æ–‡ä»¶ã€‚ç®€å•çš„é…ç½®å¦‚ä¸‹â€¦</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/.*\\.(gif|png|jpe?g|svg|webp)$/i</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'file-loader'</span>,</span><br><span class=\"line\">            options: &#123;&#125;</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'image-webpack-loader'</span>,</span><br><span class=\"line\">            options: &#123;</span><br><span class=\"line\">              mozjpeg: &#123; <span class=\"comment\">// å‹ç¼© jpeg çš„é…ç½®</span></span><br><span class=\"line\">                progressive: <span class=\"literal\">true</span>,</span><br><span class=\"line\">                quality: <span class=\"number\">65</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              optipng: &#123; <span class=\"comment\">// ä½¿ç”¨ imagemin-optipng å‹ç¼© pngï¼Œenable: false ä¸ºå…³é—­</span></span><br><span class=\"line\">                enabled: <span class=\"literal\">false</span>,</span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              pngquant: &#123; <span class=\"comment\">// ä½¿ç”¨ imagemin-pngquant å‹ç¼© png</span></span><br><span class=\"line\">                quality: <span class=\"string\">'65-90'</span>,</span><br><span class=\"line\">                speed: <span class=\"number\">4</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              gifsicle: &#123; <span class=\"comment\">// å‹ç¼© gif çš„é…ç½®</span></span><br><span class=\"line\">                interlaced: <span class=\"literal\">false</span>,</span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              webp: &#123; <span class=\"comment\">// å¼€å¯ webpï¼Œä¼šæŠŠ jpg å’Œ png å›¾ç‰‡å‹ç¼©ä¸º webp æ ¼å¼</span></span><br><span class=\"line\">                quality: <span class=\"number\">75</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"ä½¿ç”¨-DataURL\"><a href=\"#ä½¿ç”¨-DataURL\" class=\"headerlink\" title=\"ä½¿ç”¨ DataURL\"></a>ä½¿ç”¨ DataURL</h4><blockquote>\n<p>æœ‰çš„æ—¶å€™æˆ‘ä»¬çš„é¡¹ç›®ä¸­ä¼šæœ‰ä¸€äº›å¾ˆå°çš„å›¾ç‰‡ï¼Œå› ä¸ºæŸäº›ç¼˜æ•…å¹¶ä¸æƒ³ä½¿ç”¨ <code>CSS Sprites</code> çš„æ–¹å¼æ¥å¤„ç†ï¼ˆè­¬å¦‚å°å›¾ç‰‡ä¸å¤šï¼Œå› æ­¤å¼•å…¥ CSS Sprites æ„Ÿè§‰éº»çƒ¦ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨ webpack ä¸­ä½¿ç”¨ <code>url-loader</code> æ¥å¤„ç†è¿™äº›å¾ˆå°çš„å›¾ç‰‡â€¦</p>\n</blockquote>\n<ul>\n<li><code>url-loader</code> å’Œ <code>file-loader</code> çš„åŠŸèƒ½ç±»ä¼¼ï¼Œä½†æ˜¯åœ¨å¤„ç†æ–‡ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡é…ç½®æŒ‡å®šä¸€ä¸ªå¤§å°ï¼Œå½“æ–‡ä»¶å°äºè¿™ä¸ªé…ç½®å€¼æ—¶ï¼Œ<code>url-loader</code> ä¼šå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª <code>base64</code> ç¼–ç çš„ <code>DataURL</code>ï¼Œé…ç½®å¦‚ä¸‹</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif)$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'url-loader'</span>,</span><br><span class=\"line\">            options: &#123;</span><br><span class=\"line\">              limit: <span class=\"number\">8192</span> <span class=\"comment\">// å•ä½æ˜¯ Byteï¼Œå½“æ–‡ä»¶å°äº 8KB æ—¶ä½œä¸º DataURL å¤„ç†</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"ä»£ç å‹ç¼©\"><a href=\"#ä»£ç å‹ç¼©\" class=\"headerlink\" title=\"ä»£ç å‹ç¼©\"></a>ä»£ç å‹ç¼©</h4><ul>\n<li><code>webpack 4.x</code> ç‰ˆæœ¬è¿è¡Œæ—¶ï¼Œ<code>mode</code> ä¸º <code>production</code> å³ä¼šå¯åŠ¨å‹ç¼© <code>JS</code> ä»£ç çš„æ’ä»¶ï¼Œè€Œå¯¹äº <code>webpack</code> <code>3.x</code>ï¼Œä½¿ç”¨å‹ç¼© <code>JS</code> ä»£ç æ’ä»¶çš„æ–¹å¼ä¹Ÿå·²ç»ä»‹ç»è¿‡äº†ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå‹ç¼© <code>JS</code> ä»£ç åŸºæœ¬æ˜¯ä¸€ä¸ªå¿…ä¸å¯å°‘çš„æ­¥éª¤ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å° <code>JavaScript</code> çš„ä½“ç§¯ï¼Œç›¸å…³å†…å®¹è¿™é‡Œä¸å†èµ˜è¿°ã€‚</li>\n<li>é™¤äº† JS ä»£ç ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¸€èˆ¬è¿˜éœ€è¦ HTML å’Œ CSS æ–‡ä»¶ï¼Œè¿™ä¸¤ç§æ–‡ä»¶ä¹Ÿéƒ½æ˜¯å¯ä»¥å‹ç¼©çš„ï¼Œè™½ç„¶ä¸åƒ JS çš„å‹ç¼©é‚£ä¹ˆå½»åº•ï¼ˆæ›¿æ¢æ‰é•¿å˜é‡ç­‰ï¼‰ï¼Œåªèƒ½ç§»é™¤ç©ºæ ¼æ¢è¡Œç­‰æ— ç”¨å­—ç¬¦ï¼Œä½†ä¹Ÿèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°æ–‡ä»¶å¤§å°ã€‚åœ¨ webpack ä¸­çš„é…ç½®ä½¿ç”¨ä¹Ÿä¸æ˜¯ç‰¹åˆ«éº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¹Ÿä¼šä½¿ç”¨ã€‚</li>\n<li>å¯¹äº HTML æ–‡ä»¶ï¼Œä¹‹å‰ä»‹ç»çš„ <code>html-webpack-plugin</code> æ’ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆéœ€è¦çš„ HTML å¹¶å¯¹å…¶è¿›è¡Œå‹ç¼©â€¦</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      filename: <span class=\"string\">'index.html'</span>, <span class=\"comment\">// é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„</span></span><br><span class=\"line\">      template: <span class=\"string\">'assets/index.html'</span>, <span class=\"comment\">// é…ç½®æ–‡ä»¶æ¨¡æ¿</span></span><br><span class=\"line\">      minify: &#123;</span><br><span class=\"line\">        <span class=\"comment\">// å‹ç¼© HTML çš„é…ç½®</span></span><br><span class=\"line\">        minifyCSS: <span class=\"literal\">true</span>, <span class=\"comment\">// å‹ç¼© HTML ä¸­å‡ºç°çš„ CSS ä»£ç </span></span><br><span class=\"line\">        minifyJS: <span class=\"literal\">true</span> <span class=\"comment\">// å‹ç¼© HTML ä¸­å‡ºç°çš„ JS ä»£ç </span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>å¦‚ä¸Šï¼Œä½¿ç”¨ <code>minify</code> å­—æ®µé…ç½®å°±å¯ä»¥ä½¿ç”¨ <code>HTML</code> å‹ç¼©ï¼Œè¿™ä¸ªæ’ä»¶æ˜¯ä½¿ç”¨ <code>html-minifier</code> æ¥å®ç° <code>HTML</code> ä»£ç å‹ç¼©çš„ï¼Œ<code>minify</code> ä¸‹çš„é…ç½®é¡¹ç›´æ¥é€ä¼ ç»™ <code>html-minifier</code>ï¼Œé…ç½®é¡¹å‚è€ƒ <code>html-minifier</code> æ–‡æ¡£å³å¯ã€‚</li>\n<li>å¯¹äº CSS æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¹‹å‰ä»‹ç»è¿‡ç”¨æ¥å¤„ç† CSS æ–‡ä»¶çš„ <code>css-loader</code>ï¼Œä¹Ÿæä¾›äº†å‹ç¼© CSS ä»£ç çš„åŠŸèƒ½ï¼š</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css/</span>,</span><br><span class=\"line\">        include: [path.resolve(__dirname, <span class=\"string\">'src'</span>)],</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">            options: &#123;</span><br><span class=\"line\">              minimize: <span class=\"literal\">true</span> <span class=\"comment\">// ä½¿ç”¨ css çš„å‹ç¼©åŠŸèƒ½</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>åœ¨ <code>css-loader</code> çš„é€‰é¡¹ä¸­é…ç½® <code>minimize</code> å­—æ®µä¸º <code>true</code> æ¥ä½¿ç”¨ <code>CSS</code> å‹ç¼©ä»£ç çš„åŠŸèƒ½ã€‚<code>css-loader</code> æ˜¯ä½¿ç”¨ <code>cssnano</code> æ¥å‹ç¼©ä»£ç çš„ï¼Œ<code>minimize</code> å­—æ®µä¹Ÿå¯ä»¥é…ç½®ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œæ¥å°†ç›¸å…³é…ç½®ä¼ é€’ç»™ <code>cssnano</code></p>\n</blockquote>\n<h3 id=\"åˆ†ç¦»ä»£ç æ–‡ä»¶\"><a href=\"#åˆ†ç¦»ä»£ç æ–‡ä»¶\" class=\"headerlink\" title=\"åˆ†ç¦»ä»£ç æ–‡ä»¶\"></a>åˆ†ç¦»ä»£ç æ–‡ä»¶</h3><ul>\n<li>å…³äºåˆ†ç¦» CSS æ–‡ä»¶è¿™ä¸ªä¸»é¢˜ï¼Œä¹‹å‰åœ¨ä»‹ç»å¦‚ä½•æ­å»ºåŸºæœ¬çš„å‰ç«¯å¼€å‘ç¯å¢ƒæ—¶æœ‰æåŠï¼Œåœ¨ <code>webpack</code> ä¸­ä½¿ç”¨ <code>extract-text-webpack-plugin</code> æ’ä»¶å³å¯ã€‚</li>\n<li>å…ˆç®€å•è§£é‡Šä¸€ä¸‹ä¸ºä½•è¦æŠŠ CSS æ–‡ä»¶åˆ†ç¦»å‡ºæ¥ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¸€èµ·æ‰“åŒ…åœ¨ JS ä¸­ã€‚æœ€ä¸»è¦çš„åŸå› æ˜¯æˆ‘ä»¬å¸Œæœ›æ›´å¥½åœ°åˆ©ç”¨ç¼“å­˜ã€‚</li>\n<li>å‡è®¾æˆ‘ä»¬åŸæœ¬é¡µé¢çš„é™æ€èµ„æºéƒ½æ‰“åŒ…æˆä¸€ä¸ª JS æ–‡ä»¶ï¼ŒåŠ è½½é¡µé¢æ—¶è™½ç„¶åªéœ€è¦åŠ è½½ä¸€ä¸ª JS æ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ä»£ç ä¸€æ—¦æ”¹å˜äº†ï¼Œç”¨æˆ·è®¿é—®æ–°çš„é¡µé¢æ—¶å°±éœ€è¦é‡æ–°åŠ è½½ä¸€ä¸ªæ–°çš„ JS æ–‡ä»¶ã€‚æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªæ˜¯å•ç‹¬ä¿®æ”¹äº†æ ·å¼ï¼Œè¿™æ ·ä¹Ÿè¦é‡æ–°åŠ è½½æ•´ä¸ªåº”ç”¨çš„ JS æ–‡ä»¶ï¼Œç›¸å½“ä¸åˆ’ç®—ã€‚</li>\n<li>è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯æˆ‘ä»¬æœ‰å¤šä¸ªé¡µé¢ï¼Œå®ƒä»¬éƒ½å¯ä»¥å…±ç”¨ä¸€éƒ¨åˆ†æ ·å¼ï¼ˆè¿™æ˜¯å¾ˆå¸¸è§çš„ï¼ŒCSS Resetã€åŸºç¡€ç»„ä»¶æ ·å¼ç­‰åŸºæœ¬éƒ½æ˜¯è·¨é¡µé¢é€šç”¨ï¼‰ï¼Œå¦‚æœæ¯ä¸ªé¡µé¢éƒ½å•ç‹¬æ‰“åŒ…ä¸€ä¸ª JS æ–‡ä»¶ï¼Œé‚£ä¹ˆæ¯æ¬¡è®¿é—®é¡µé¢éƒ½ä¼šé‡å¤åŠ è½½åŸæœ¬å¯ä»¥å…±äº«çš„é‚£äº› CSS ä»£ç ã€‚å¦‚æœåˆ†ç¦»å¼€æ¥ï¼Œç¬¬äºŒä¸ªé¡µé¢å°±æœ‰äº† CSS æ–‡ä»¶çš„ç¼“å­˜ï¼Œè®¿é—®é€Ÿåº¦è‡ªç„¶ä¼šåŠ å¿«ã€‚è™½ç„¶å¯¹ç¬¬ä¸€ä¸ªé¡µé¢æ¥è¯´å¤šäº†ä¸€ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯å¯¹éšåçš„é¡µé¢æ¥è¯´ï¼Œç¼“å­˜å¸¦æ¥çš„é€Ÿåº¦æå‡ç›¸å¯¹æ›´åŠ å¯è§‚</li>\n</ul>\n<blockquote>\n<p><code>3.x</code> ä»¥å‰çš„ç‰ˆæœ¬æ˜¯ä½¿ç”¨ <code>CommonsChunkPlugin</code> æ¥åšä»£ç åˆ†ç¦»çš„ï¼Œè€Œ <code>webpack 4.x</code> åˆ™æ˜¯æŠŠç›¸å…³çš„åŠŸèƒ½åŒ…åˆ°äº† <code>optimize.splitChunks</code> ä¸­ï¼Œç›´æ¥ä½¿ç”¨è¯¥é…ç½®å°±å¯ä»¥å®ç°ä»£ç åˆ†ç¦»ã€‚</p>\n</blockquote>\n<h4 id=\"webpack-4-x-çš„-optimization\"><a href=\"#webpack-4-x-çš„-optimization\" class=\"headerlink\" title=\"webpack 4.x çš„ optimization\"></a>webpack 4.x çš„ optimization</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... webpack é…ç½®</span></span><br><span class=\"line\"></span><br><span class=\"line\">  optimization: &#123;</span><br><span class=\"line\">    splitChunks: &#123;</span><br><span class=\"line\">      chunks: <span class=\"string\">'all'</span> <span class=\"comment\">// æ‰€æœ‰çš„ chunks ä»£ç å…¬å…±çš„éƒ¨åˆ†åˆ†ç¦»å‡ºæ¥æˆä¸ºä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>æˆ‘ä»¬éœ€è¦åœ¨ HTML ä¸­å¼•ç”¨ä¸¤ä¸ªæ„å»ºå‡ºæ¥çš„ JS æ–‡ä»¶ï¼Œå¹¶ä¸” <code>commons.js</code> éœ€è¦åœ¨å…¥å£ä»£ç ä¹‹å‰ã€‚ä¸‹é¢æ˜¯ä¸ªç®€å•çš„ä¾‹å­</p>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"commons.js\"</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"entry.bundle.js\"</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>å¦‚æœä½ ä½¿ç”¨äº† <code>html-webpack-plugin</code>ï¼Œé‚£ä¹ˆå¯¹åº”éœ€è¦çš„ JS æ–‡ä»¶éƒ½ä¼šåœ¨ HTML æ–‡ä»¶ä¸­æ­£ç¡®å¼•ç”¨ï¼Œä¸ç”¨æ‹…å¿ƒã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨ï¼Œé‚£ä¹ˆä½ éœ€è¦ä» <code>stats</code> çš„ <code>entrypoints</code> å±æ€§æ¥è·å–å…¥å£åº”è¯¥å¼•ç”¨å“ªäº› JS æ–‡ä»¶ï¼Œå¯ä»¥å‚è€ƒ Node API äº†è§£å¦‚ä½•ä» stats ä¸­è·å–ä¿¡æ¯</p>\n</blockquote>\n<p><strong>æ˜¾å¼é…ç½®å…±äº«ç±»åº“å¯ä»¥è¿™ä¹ˆæ“ä½œ</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: &#123;</span><br><span class=\"line\">    vendor: [<span class=\"string\">\"react\"</span>, <span class=\"string\">\"lodash\"</span>, <span class=\"string\">\"angular\"</span>, ...], <span class=\"comment\">// æŒ‡å®šå…¬å…±ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹ç±»åº“</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  optimization: &#123;</span><br><span class=\"line\">    splitChunks: &#123;</span><br><span class=\"line\">      cacheGroups: &#123;</span><br><span class=\"line\">        vendor: &#123;</span><br><span class=\"line\">          chunks: <span class=\"string\">\"initial\"</span>,</span><br><span class=\"line\">          test: <span class=\"string\">\"vendor\"</span>,</span><br><span class=\"line\">          name: <span class=\"string\">\"vendor\"</span>, <span class=\"comment\">// ä½¿ç”¨ vendor å…¥å£ä½œä¸ºå…¬å…±éƒ¨åˆ†</span></span><br><span class=\"line\">          enforce: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// ... å…¶ä»–é…ç½®</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æˆ–è€…</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  optimization: &#123;</span><br><span class=\"line\">    splitChunks: &#123;</span><br><span class=\"line\">      cacheGroups: &#123;</span><br><span class=\"line\">        vendor: &#123;</span><br><span class=\"line\">          test: <span class=\"regexp\">/react|angluar|lodash/</span>, <span class=\"comment\">// ç›´æ¥ä½¿ç”¨ test æ¥åšè·¯å¾„åŒ¹é…</span></span><br><span class=\"line\">          chunks: <span class=\"string\">\"initial\"</span>,</span><br><span class=\"line\">          name: <span class=\"string\">\"vendor\"</span>,</span><br><span class=\"line\">          enforce: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æˆ–è€…</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  optimization: &#123;</span><br><span class=\"line\">    splitChunks: &#123;</span><br><span class=\"line\">      cacheGroups: &#123;</span><br><span class=\"line\">        vendor: &#123;</span><br><span class=\"line\">          chunks: <span class=\"string\">\"initial\"</span>,</span><br><span class=\"line\">          test: path.resolve(__dirname, <span class=\"string\">\"node_modules\"</span>) <span class=\"comment\">// è·¯å¾„åœ¨ node_modules ç›®å½•ä¸‹çš„éƒ½ä½œä¸ºå…¬å…±éƒ¨åˆ†</span></span><br><span class=\"line\">          name: <span class=\"string\">\"vendor\"</span>, <span class=\"comment\">// ä½¿ç”¨ vendor å…¥å£ä½œä¸ºå…¬å…±éƒ¨åˆ†</span></span><br><span class=\"line\">          enforce: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>ä¸Šè¿°ç¬¬ä¸€ç§åšæ³•æ˜¯æ˜¾ç¤ºæŒ‡å®šå“ªäº›ç±»åº“ä½œä¸ºå…¬å…±éƒ¨åˆ†ï¼Œç¬¬äºŒç§åšæ³•å®ç°çš„åŠŸèƒ½å·®ä¸å¤šï¼Œåªæ˜¯åˆ©ç”¨äº† test æ¥åšæ¨¡å—è·¯å¾„çš„åŒ¹é…ï¼Œç¬¬ä¸‰ç§åšæ³•æ˜¯æŠŠæ‰€æœ‰åœ¨ node_modules ä¸‹çš„æ¨¡å—ï¼Œå³ä½œä¸ºä¾èµ–å®‰è£…çš„ï¼Œéƒ½ä½œä¸ºå…¬å…±éƒ¨åˆ†ã€‚ä½ å¯ä»¥é’ˆå¯¹é¡¹ç›®æƒ…å†µï¼Œé€‰æ‹©æœ€åˆé€‚çš„åšæ³•</p>\n</blockquote>\n<h4 id=\"webpack-3-x-çš„-CommonsChunkPlugin\"><a href=\"#webpack-3-x-çš„-CommonsChunkPlugin\" class=\"headerlink\" title=\"webpack 3.x çš„ CommonsChunkPlugin\"></a>webpack 3.x çš„ CommonsChunkPlugin</h4><blockquote>\n<p><code>webpack 3.x</code> ä»¥ä¸‹çš„ç‰ˆæœ¬éœ€è¦ç”¨åˆ° webpack è‡ªèº«æä¾›çš„ <code>CommonsChunkPlugin</code> æ’ä»¶ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class=\"line\">      name: <span class=\"string\">'commons'</span>, <span class=\"comment\">// å…¬å…±ä½¿ç”¨çš„ chunk çš„åç§°</span></span><br><span class=\"line\">      filename: <span class=\"string\">'commons.js'</span>, <span class=\"comment\">// å…¬å…± chunk çš„ç”Ÿæˆæ–‡ä»¶å</span></span><br><span class=\"line\">      minChunks: <span class=\"number\">3</span> <span class=\"comment\">// å…¬å…±çš„éƒ¨åˆ†å¿…é¡»è¢« 3 ä¸ª chunk å…±äº«</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>chunk</code> åœ¨è¿™é‡Œæ˜¯æ„å»ºçš„ä¸»å¹²ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ä¸ªå…¥å£å¯¹åº”ä¸€ä¸ª <code>chunk</code>ã€‚</li>\n<li>ä»¥ä¸Šæ’ä»¶é…ç½®åœ¨æ„å»ºåä¼šç”Ÿæˆä¸€ä¸ª <code>commons.js</code> æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å°±æ˜¯ä»£ç ä¸­çš„å…¬å…±éƒ¨åˆ†ã€‚ä¸Šé¢çš„é…ç½®ä¸­ <code>minChunks</code> å­—æ®µä¸º 3ï¼Œè¯¥å­—æ®µçš„æ„æ€æ˜¯å½“ä¸€ä¸ªæ¨¡å—è¢« 3 ä¸ªä»¥ä¸Šçš„ <code>chunk</code> ä¾èµ–æ—¶ï¼Œè¿™ä¸ªæ¨¡å—å°±ä¼šè¢«åˆ’åˆ†åˆ° <code>commons chunk</code> ä¸­å»ã€‚å•ä»è¿™ä¸ªé…ç½®çš„è§’åº¦ä¸Šè®²ï¼Œè¿™ç§æ–¹å¼å¹¶æ²¡æœ‰ <code>4.x</code> çš„ <code>chunks: &quot;all&quot;</code> é‚£ä¹ˆæ–¹ä¾¿ã€‚</li>\n</ul>\n<p><strong>CommonsChunkPlugin ä¹Ÿæ˜¯æ”¯æŒæ˜¾å¼é…ç½®å…±äº«ç±»åº“çš„</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: &#123;</span><br><span class=\"line\">    vendor: [<span class=\"string\">'react'</span>, <span class=\"string\">'react-redux'</span>], <span class=\"comment\">// æŒ‡å®šå…¬å…±ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹ç±»åº“</span></span><br><span class=\"line\">    app: <span class=\"string\">'./src/entry'</span>,</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class=\"line\">      name: <span class=\"string\">'vendor'</span> <span class=\"comment\">// ä½¿ç”¨ vendor å…¥å£ä½œä¸ºå…¬å…±éƒ¨åˆ†</span></span><br><span class=\"line\">      filename: <span class=\"string\">\"vendor.js\"</span>,</span><br><span class=\"line\">      minChunks: <span class=\"literal\">Infinity</span>, <span class=\"comment\">// è¿™ä¸ªé…ç½®ä¼šè®© webpack ä¸å†è‡ªåŠ¨æŠ½ç¦»å…¬å…±æ¨¡å—</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">  ],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>ä¸Šè¿°é…ç½®ä¼šç”Ÿæˆä¸€ä¸ªåä¸º <code>vendor.js</code> çš„å…±äº«ä»£ç æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº† <code>React</code> å’Œ <code>React-Redux</code> åº“çš„ä»£ç ï¼Œå¯ä»¥æä¾›ç»™å¤šä¸ªä¸åŒçš„å…¥å£ä»£ç ä½¿ç”¨ã€‚è¿™é‡Œçš„ <code>minChunks</code> å­—æ®µçš„é…ç½®ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>Infinity</code>ï¼Œå¯ä»¥ç†è§£ä¸º <code>webpack</code> ä¸è‡ªåŠ¨æŠ½ç¦»å…¬å…±æ¨¡å—ã€‚å¦‚æœè¿™é‡Œå’Œä¹‹å‰ä¸€æ ·ä¾æ—§è®¾ç½®ä¸º 3ï¼Œé‚£ä¹ˆè¢« 3 ä¸ªä»¥ä¸Šçš„ <code>chunk</code> ä¾èµ–çš„æ¨¡å—ä¼šå’Œ <code>React</code>ã€<code>React-Redux</code> ä¸€åŒæ‰“åŒ…è¿› <code>vendor</code>ï¼Œè¿™æ ·å°±å¤±å»æ˜¾å¼æŒ‡å®šçš„æ„ä¹‰äº†ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>minChunks</code> å…¶å®è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">minChunks: <span class=\"function\">(<span class=\"params\"><span class=\"built_in\">module</span>, count</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">module</span>, count);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>è¯¥å‡½æ•°åœ¨åˆ†ææ¯ä¸€ä¸ªä¾èµ–çš„æ—¶å€™ä¼šè¢«è°ƒç”¨ï¼Œä¼ å…¥å½“å‰ä¾èµ–æ¨¡å—çš„ä¿¡æ¯ <code>module</code>ï¼Œä»¥åŠå·²ç»è¢«ä½œä¸ºå…¬å…±æ¨¡å—çš„æ•°é‡ <code>count</code>ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°ä¸­é’ˆå¯¹æ¯ä¸€ä¸ªæ¨¡å—åšæ›´åŠ ç²¾ç»†åŒ–çš„æ§åˆ¶ã€‚çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">minChunks: <span class=\"function\">(<span class=\"params\"><span class=\"built_in\">module</span>, count</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">module</span>.context &amp;&amp; <span class=\"built_in\">module</span>.context.includes(<span class=\"string\">\"node_modules\"</span>);</span><br><span class=\"line\">  <span class=\"comment\">// node_modules ç›®å½•ä¸‹çš„æ¨¡å—éƒ½ä½œä¸ºå…¬å…±éƒ¨åˆ†ï¼Œæ•ˆæœå°±å¦‚åŒ webpack 4.x ä¸­çš„ test: path.resolve(__dirname, \"node_modules\")</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<ul>\n<li>æ›´å¤šä½¿ç”¨ <code>CommonsChunkPlugin</code> çš„é…ç½®å‚è€ƒå®˜æ–¹æ–‡æ¡£ <code>commons-chunk-plugin</code>ã€‚</li>\n</ul>\n<h3 id=\"è¿›ä¸€æ­¥æ§åˆ¶-JS-å¤§å°\"><a href=\"#è¿›ä¸€æ­¥æ§åˆ¶-JS-å¤§å°\" class=\"headerlink\" title=\"è¿›ä¸€æ­¥æ§åˆ¶ JS å¤§å°\"></a>è¿›ä¸€æ­¥æ§åˆ¶ JS å¤§å°</h3><h4 id=\"æŒ‰éœ€åŠ è½½æ¨¡å—\"><a href=\"#æŒ‰éœ€åŠ è½½æ¨¡å—\" class=\"headerlink\" title=\"æŒ‰éœ€åŠ è½½æ¨¡å—\"></a>æŒ‰éœ€åŠ è½½æ¨¡å—</h4><blockquote>\n<p>åœ¨ webpack çš„æ„å»ºç¯å¢ƒä¸­ï¼Œè¦æŒ‰éœ€åŠ è½½ä»£ç æ¨¡å—å¾ˆç®€å•ï¼Œéµå¾ª ES æ ‡å‡†çš„åŠ¨æ€åŠ è½½è¯­æ³• <code>dynamic-import</code> æ¥ç¼–å†™ä»£ç å³å¯ï¼Œ<code>webpack</code> ä¼šè‡ªåŠ¨å¤„ç†ä½¿ç”¨è¯¥è¯­æ³•ç¼–å†™çš„æ¨¡å—</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// import ä½œä¸ºä¸€ä¸ªæ–¹æ³•ä½¿ç”¨ï¼Œä¼ å…¥æ¨¡å—åå³å¯ï¼Œè¿”å›ä¸€ä¸ª promise æ¥è·å–æ¨¡å—æš´éœ²çš„å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">// æ³¨é‡Š webpackChunkName: \"lodash\" å¯ä»¥ç”¨äºæŒ‡å®š chunk çš„åç§°ï¼Œåœ¨è¾“å‡ºæ–‡ä»¶æ—¶æœ‰ç”¨</span></span><br><span class=\"line\"><span class=\"keyword\">import</span>(<span class=\"comment\">/* webpackChunkName: \"lodash\" */</span> <span class=\"string\">'lodash'</span>).then(<span class=\"function\">(<span class=\"params\">_</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(_.lash([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>])) <span class=\"comment\">// æ‰“å° 3</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>æ³¨æ„ä¸€ä¸‹ï¼Œå¦‚æœä½ ä½¿ç”¨äº† <code>Babel</code> çš„è¯ï¼Œè¿˜éœ€è¦ <code>Syntax Dynamic Import</code> è¿™ä¸ª <code>Babel</code> æ’ä»¶æ¥å¤„ç† <code>import()</code> è¿™ç§è¯­æ³•ã€‚</li>\n<li>ç”±äºåŠ¨æ€åŠ è½½ä»£ç æ¨¡å—çš„è¯­æ³•ä¾èµ–äº <code>promise</code>ï¼Œå¯¹äºä½ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼Œéœ€è¦æ·»åŠ  <code>promise</code> çš„ <code>polyfill</code> åæ‰èƒ½ä½¿ç”¨ã€‚</li>\n<li>å¦‚ä¸Šçš„ä»£ç ï¼Œwebpack æ„å»ºæ—¶ä¼šè‡ªåŠ¨æŠŠ <code>lodash</code> æ¨¡å—åˆ†ç¦»å‡ºæ¥ï¼Œå¹¶ä¸”åœ¨ä»£ç å†…éƒ¨å®ç°åŠ¨æ€åŠ è½½ <code>lodash</code> çš„åŠŸèƒ½ã€‚åŠ¨æ€åŠ è½½ä»£ç æ—¶ä¾èµ–äºç½‘ç»œï¼Œå…¶æ¨¡å—å†…å®¹ä¼šå¼‚æ­¥è¿”å›ï¼Œæ‰€ä»¥ import æ–¹æ³•æ˜¯è¿”å›ä¸€ä¸ª <code>promise</code> æ¥è·å–åŠ¨æ€åŠ è½½çš„æ¨¡å—å†…å®¹ã€‚</li>\n<li><code>import</code> åé¢çš„æ³¨é‡Š <code>webpackChunkName: &quot;lodash&quot;</code> ç”¨äºå‘ŠçŸ¥ <code>webpack</code> æ‰€è¦åŠ¨æ€åŠ è½½æ¨¡å—çš„åç§°ã€‚æˆ‘ä»¬åœ¨ webpack é…ç½®ä¸­æ·»åŠ ä¸€ä¸ª <code>output.chunkFilename</code> çš„é…ç½®â€¦</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">output: &#123;</span><br><span class=\"line\">  path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">  filename: <span class=\"string\">'[name].[hash:8].js'</span>,</span><br><span class=\"line\">  chunkFilename: <span class=\"string\">'[name].[hash:8].js'</span> <span class=\"comment\">// æŒ‡å®šåˆ†ç¦»å‡ºæ¥çš„ä»£ç æ–‡ä»¶çš„åç§°</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>è¿™æ ·å°±å¯ä»¥æŠŠåˆ†ç¦»å‡ºæ¥çš„æ–‡ä»¶åç§°ç”¨ lodash æ ‡è¯†äº†ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n</blockquote>\n<p><img src=\"https://upload-images.jianshu.io/upload_images/1480597-ae36b6816feed422.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"image.png\"></p>\n<blockquote>\n<p>å¦‚æœæ²¡æœ‰æ·»åŠ æ³¨é‡Š <code>webpackChunkName: &quot;lodash&quot; ä»¥åŠ output.chunkFilename</code> é…ç½®ï¼Œé‚£ä¹ˆåˆ†ç¦»å‡ºæ¥çš„æ–‡ä»¶åç§°ä¼šä»¥ç®€å•æ•°å­—çš„æ–¹å¼æ ‡è¯†ï¼Œä¸ä¾¿äºè¯†åˆ«</p>\n</blockquote>\n<h4 id=\"ä»¥ä¸Šå®Œæ•´ç¤ºä¾‹ä»£ç \"><a href=\"#ä»¥ä¸Šå®Œæ•´ç¤ºä¾‹ä»£ç \" class=\"headerlink\" title=\"ä»¥ä¸Šå®Œæ•´ç¤ºä¾‹ä»£ç \"></a>ä»¥ä¸Šå®Œæ•´ç¤ºä¾‹ä»£ç </h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: <span class=\"string\">'./src/index.js'</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">    filename: <span class=\"string\">'[name].js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?/</span>,</span><br><span class=\"line\">        include: [path.resolve(__dirname, <span class=\"string\">'src'</span>)],</span><br><span class=\"line\">        use: <span class=\"string\">'babel-loader'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: [<span class=\"string\">'css-loader'</span>, <span class=\"string\">'postcss-loader'</span>, <span class=\"string\">'less-loader'</span>]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif)$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'url-loader'</span>,</span><br><span class=\"line\">            options: &#123;</span><br><span class=\"line\">              limit: <span class=\"number\">8192</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'image-webpack-loader'</span>,</span><br><span class=\"line\">            options: &#123;</span><br><span class=\"line\">              mozjpeg: &#123;</span><br><span class=\"line\">                <span class=\"comment\">// å‹ç¼© jpeg çš„é…ç½®</span></span><br><span class=\"line\">                progressive: <span class=\"literal\">true</span>,</span><br><span class=\"line\">                quality: <span class=\"number\">65</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              optipng: &#123;</span><br><span class=\"line\">                <span class=\"comment\">// ä½¿ç”¨ imagemin-optipng å‹ç¼© pngï¼Œenable: false ä¸ºå…³é—­</span></span><br><span class=\"line\">                enabled: <span class=\"literal\">false</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              pngquant: &#123;</span><br><span class=\"line\">                <span class=\"comment\">// ä½¿ç”¨ imagemin-pngquant å‹ç¼© png</span></span><br><span class=\"line\">                quality: <span class=\"string\">'65-90'</span>,</span><br><span class=\"line\">                speed: <span class=\"number\">4</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              gifsicle: &#123;</span><br><span class=\"line\">                <span class=\"comment\">// å‹ç¼© gif çš„é…ç½®</span></span><br><span class=\"line\">                interlaced: <span class=\"literal\">false</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              webp: &#123;</span><br><span class=\"line\">                <span class=\"comment\">// å¼€å¯ webpï¼Œä¼šæŠŠ jpg å’Œ png å›¾ç‰‡å‹ç¼©ä¸º webp æ ¼å¼</span></span><br><span class=\"line\">                quality: <span class=\"number\">75</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  optimization: &#123;</span><br><span class=\"line\">    splitChunks: &#123;</span><br><span class=\"line\">      cacheGroups: &#123;</span><br><span class=\"line\">        vendor: &#123;</span><br><span class=\"line\">          chunks: <span class=\"string\">'initial'</span>,</span><br><span class=\"line\">          test: path.resolve(__dirname, <span class=\"string\">'node_modules'</span>), <span class=\"comment\">// è·¯å¾„åœ¨ node_modules ç›®å½•ä¸‹çš„éƒ½ä½œä¸ºå…¬å…±éƒ¨åˆ†</span></span><br><span class=\"line\">          name: <span class=\"string\">'vendor'</span>, <span class=\"comment\">// ä½¿ç”¨ vendor å…¥å£ä½œä¸ºå…¬å…±éƒ¨åˆ†</span></span><br><span class=\"line\">          enforce: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      filename: <span class=\"string\">'index.html'</span>, <span class=\"comment\">// é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„</span></span><br><span class=\"line\">      template: <span class=\"string\">'src/index.html'</span>, <span class=\"comment\">// é…ç½®æ–‡ä»¶æ¨¡æ¿</span></span><br><span class=\"line\">      minify: &#123;</span><br><span class=\"line\">        <span class=\"comment\">// å‹ç¼© HTML çš„é…ç½®</span></span><br><span class=\"line\">        minifyCSS: <span class=\"literal\">true</span>, <span class=\"comment\">// å‹ç¼© HTML ä¸­å‡ºç°çš„ CSS ä»£ç </span></span><br><span class=\"line\">        minifyJS: <span class=\"literal\">true</span>, <span class=\"comment\">// å‹ç¼© HTML ä¸­å‡ºç°çš„ JS ä»£ç </span></span><br><span class=\"line\">        removeComments: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">'[name].css'</span>),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.NamedModulesPlugin(),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.HotModuleReplacementPlugin()</span><br><span class=\"line\">  ],</span><br><span class=\"line\"></span><br><span class=\"line\">  devServer: &#123;</span><br><span class=\"line\">    hot: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p>æœ¬æ–‡æ€»ç»“äº† Webpack 4 çš„ä¸€äº›é…ç½®ç‚¹ï¼Œå¸Œæœ›é€šè¿‡å­¦ä¹ è¿™äº›é…ç½®ç‚¹ï¼Œé™ä½ä½¿ç”¨é—¨æ§›ã€‚çºµè§‚å‰ç«¯çš„æ‰“åŒ…å†å²ï¼Œä¼¼ä¹æ˜¯æ¬ äº†å¤ªå¤šå€ºï¼Œæœ‰å¾ˆå¤šå†å²åŒ…è¢±ï¼Œæ‰€ä»¥å·¥ç¨‹åŒ–è¿™ä¸€å—ä¸€ç›´æ˜¯ä¸€å¤§ç—›ç‚¹ã€‚é…ç½®ç¹çï¼Œå®¹æ˜“å‡ºé”™ï¼Œæœ¬æ–‡æ€»ç»“äº†æœ€æ–°çš„ Webpack 4 åŠŸèƒ½ç‚¹ï¼Œä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹ï¼Œå¯ä»¥ç‚¹å‡»å³ä¾§çš„æ–‡ç« ç›®å½•ç›´è¾¾ã€‚</p>","more":"<h3 id=\"webpack-æ¦‚å¿µå’ŒåŸºç¡€ä½¿ç”¨\"><a href=\"#webpack-æ¦‚å¿µå’ŒåŸºç¡€ä½¿ç”¨\" class=\"headerlink\" title=\"webpack æ¦‚å¿µå’ŒåŸºç¡€ä½¿ç”¨\"></a>webpack æ¦‚å¿µå’ŒåŸºç¡€ä½¿ç”¨</h3><h4 id=\"å®‰è£…å’Œä½¿ç”¨\"><a href=\"#å®‰è£…å’Œä½¿ç”¨\" class=\"headerlink\" title=\"å®‰è£…å’Œä½¿ç”¨\"></a>å®‰è£…å’Œä½¿ç”¨</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># å®‰è£… webpack</span></span><br><span class=\"line\">$ npm install webpack webpack-cli -g</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># or</span></span><br><span class=\"line\">$ yarn global add webpack webpack-cli</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç„¶åå°±å¯ä»¥å…¨å±€æ‰§è¡Œå‘½ä»¤äº†</span></span><br><span class=\"line\">$ webpack --<span class=\"built_in\">help</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"webpack-çš„åŸºæœ¬æ¦‚å¿µ\"><a href=\"#webpack-çš„åŸºæœ¬æ¦‚å¿µ\" class=\"headerlink\" title=\"webpack çš„åŸºæœ¬æ¦‚å¿µ\"></a>webpack çš„åŸºæœ¬æ¦‚å¿µ</h4><blockquote>\n<p>webpack æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ‰“åŒ…å·¥å…·ï¼Œå®ƒä¼šæ ¹æ®ä»£ç çš„å†…å®¹è§£ææ¨¡å—ä¾èµ–ï¼Œå¸®åŠ©æˆ‘ä»¬æŠŠå¤šä¸ªæ¨¡å—çš„ä»£ç æ‰“åŒ…</p>\n</blockquote>\n<p><img src=\"https://user-images.githubusercontent.com/15377484/59234564-f1cb0600-8c1f-11e9-8bdf-c6041410225a.png\" alt=\"image\"></p>\n<blockquote>\n<p>webpack ä¼šæŠŠæˆ‘ä»¬é¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„å¤šä¸ªä»£ç æ¨¡å—ï¼ˆå¯ä»¥æ˜¯ä¸åŒæ–‡ä»¶ç±»å‹ï¼‰ï¼Œæ‰“åŒ…æ„å»ºæˆé¡¹ç›®è¿è¡Œä»…éœ€è¦çš„å‡ ä¸ªé™æ€æ–‡ä»¶</p>\n</blockquote>\n<p><strong>å…¥å£ï¼ˆentryï¼‰</strong></p>\n<blockquote>\n<p>å…¥å£å¯ä»¥ä½¿ç”¨ <code>entry</code> å­—æ®µæ¥è¿›è¡Œé…ç½®ï¼Œ<code>webpack</code> æ”¯æŒé…ç½®å¤šä¸ªå…¥å£æ¥è¿›è¡Œæ„å»º</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: <span class=\"string\">'./src/index.js'</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¸Šè¿°é…ç½®ç­‰åŒäº</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: &#123;</span><br><span class=\"line\">    main: <span class=\"string\">'./src/index.js'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æˆ–è€…é…ç½®å¤šä¸ªå…¥å£</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: &#123;</span><br><span class=\"line\">    foo: <span class=\"string\">'./src/page-foo.js'</span>,</span><br><span class=\"line\">    bar: <span class=\"string\">'./src/page-bar.js'</span></span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨æ•°ç»„æ¥å¯¹å¤šä¸ªæ–‡ä»¶è¿›è¡Œæ‰“åŒ…</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: &#123;</span><br><span class=\"line\">    main: [<span class=\"string\">'./src/foo.js'</span>, <span class=\"string\">'./src/bar.js'</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><strong>è½¬æ¢å™¨ï¼ˆloaderï¼‰</strong></p>\n<blockquote>\n<p>å¯ä»¥æŠŠ <code>loader</code> ç†è§£ä¸ºæ˜¯ä¸€ä¸ªè½¬æ¢å™¨ï¼Œè´Ÿè´£æŠŠæŸç§æ–‡ä»¶æ ¼å¼çš„å†…å®¹è½¬æ¢æˆ webpack å¯ä»¥æ”¯æŒæ‰“åŒ…çš„æ¨¡å—</p>\n</blockquote>\n<ul>\n<li>å½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸åŒçš„ <code>loader</code> æ¥è§£æå¤„ç†ä¸åŒç±»å‹çš„æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>module.rules</code> å­—æ®µä¸‹æ¥é…ç½®ç›¸å…³çš„è§„åˆ™ï¼Œä¾‹å¦‚ä½¿ç”¨ <code>Babel</code> æ¥å¤„ç† <code>.js</code> æ–‡ä»¶</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  rules: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      test: <span class=\"regexp\">/\\.jsx?/</span>, <span class=\"comment\">// åŒ¹é…æ–‡ä»¶è·¯å¾„çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œé€šå¸¸æˆ‘ä»¬éƒ½æ˜¯åŒ¹é…æ–‡ä»¶ç±»å‹åç¼€</span></span><br><span class=\"line\">      include: [</span><br><span class=\"line\">        path.resolve(__dirname, <span class=\"string\">'src'</span>) <span class=\"comment\">// æŒ‡å®šå“ªäº›è·¯å¾„ä¸‹çš„æ–‡ä»¶éœ€è¦ç»è¿‡ loader å¤„ç†</span></span><br><span class=\"line\">      ],</span><br><span class=\"line\">      use: <span class=\"string\">'babel-loader'</span>, <span class=\"comment\">// æŒ‡å®šä½¿ç”¨çš„ loader</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>æ’ä»¶ï¼ˆpluginï¼‰</strong></p>\n<blockquote>\n<p>æ¨¡å—ä»£ç è½¬æ¢çš„å·¥ä½œç”± <code>loader</code> æ¥å¤„ç†ï¼Œé™¤æ­¤ä¹‹å¤–çš„å…¶ä»–ä»»ä½•å·¥ä½œéƒ½å¯ä»¥äº¤ç”± <code>plugin</code> æ¥å®Œæˆã€‚é€šè¿‡æ·»åŠ æˆ‘ä»¬éœ€è¦çš„ <code>plugin</code>ï¼Œå¯ä»¥æ»¡è¶³æ›´å¤šæ„å»ºä¸­ç‰¹æ®Šçš„éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨å‹ç¼© <code>JS</code> ä»£ç çš„ <code>uglifyjs-webpack-plugin</code> æ’ä»¶ï¼Œåªéœ€åœ¨é…ç½®ä¸­é€šè¿‡ <code>plugins</code> å­—æ®µæ·»åŠ æ–°çš„ <code>plugin</code> å³å¯â€¦</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> UglifyPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'uglifyjs-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  plugins: [<span class=\"keyword\">new</span> UglifyPlugin()]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>plugin</code> ç†è®ºä¸Šå¯ä»¥å¹²æ¶‰ <code>webpack</code> æ•´ä¸ªæ„å»ºæµç¨‹ï¼Œå¯ä»¥åœ¨æµç¨‹çš„æ¯ä¸€ä¸ªæ­¥éª¤ä¸­å®šåˆ¶è‡ªå·±çš„æ„å»ºéœ€æ±‚</p>\n</blockquote>\n<p><strong>è¾“å‡ºï¼ˆoutputï¼‰</strong></p>\n<blockquote>\n<p>æ„å»ºç»“æœçš„æ–‡ä»¶åã€è·¯å¾„ç­‰éƒ½æ˜¯å¯ä»¥é…ç½®çš„ï¼Œä½¿ç”¨ <code>output</code> å­—æ®µ</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">    filename: <span class=\"string\">'bundle.js'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æˆ–è€…å¤šä¸ªå…¥å£ç”Ÿæˆä¸åŒæ–‡ä»¶</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: &#123;</span><br><span class=\"line\">    foo: <span class=\"string\">'./src/foo.js'</span>,</span><br><span class=\"line\">    bar: <span class=\"string\">'./src/bar.js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: <span class=\"string\">'[name].js'</span>,</span><br><span class=\"line\">    path: __dirname + <span class=\"string\">'/dist'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è·¯å¾„ä¸­ä½¿ç”¨ hashï¼Œæ¯æ¬¡æ„å»ºæ—¶ä¼šæœ‰ä¸€ä¸ªä¸åŒ hash å€¼ï¼Œé¿å…å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶çº¿ä¸Šä½¿ç”¨æµè§ˆå™¨ç¼“å­˜</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: <span class=\"string\">'[name].js'</span>,</span><br><span class=\"line\">    path: __dirname + <span class=\"string\">'/dist/[hash]'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>æˆ‘ä»¬ä¸€å¼€å§‹ç›´æ¥ä½¿ç”¨ <code>webpack</code> æ„å»ºæ—¶ï¼Œé»˜è®¤åˆ›å»ºçš„è¾“å‡ºå†…å®¹å°±æ˜¯ <code>./dist/main.js</code></p>\n</blockquote>\n<p><strong>ä¸€ä¸ªç®€å•çš„ webpack é…ç½®</strong></p>\n<blockquote>\n<p>æˆ‘ä»¬æŠŠä¸Šè¿°æ¶‰åŠçš„å‡ éƒ¨åˆ†é…ç½®å†…å®¹åˆåˆ°ä¸€èµ·ï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªç®€å•çš„ <code>webpack</code> é…ç½®äº†ï¼Œ<code>webpack</code> è¿è¡Œæ—¶é»˜è®¤è¯»å–é¡¹ç›®ä¸‹çš„ <code>webpack.config.js</code> æ–‡ä»¶ä½œä¸ºé…ç½®ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ª <code>webpack.config.js</code> æ–‡ä»¶</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> UglifyPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'uglifyjs-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: <span class=\"string\">'./src/index.js'</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">    filename: <span class=\"string\">'bundle.js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?/</span>,</span><br><span class=\"line\">        include: [path.resolve(__dirname, <span class=\"string\">'src'</span>)],</span><br><span class=\"line\">        use: <span class=\"string\">'babel-loader'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ä»£ç æ¨¡å—è·¯å¾„è§£æçš„é…ç½®</span></span><br><span class=\"line\">  resolve: &#123;</span><br><span class=\"line\">    modules: [<span class=\"string\">'node_modules'</span>, path.resolve(__dirname, <span class=\"string\">'src'</span>)],</span><br><span class=\"line\"></span><br><span class=\"line\">    extensions: [<span class=\"string\">'.wasm'</span>, <span class=\"string\">'.mjs'</span>, <span class=\"string\">'.js'</span>, <span class=\"string\">'.json'</span>, <span class=\"string\">'.jsx'</span>]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> UglifyPlugin()</span><br><span class=\"line\">    <span class=\"comment\">// ä½¿ç”¨ uglifyjs-webpack-plugin æ¥å‹ç¼© JS ä»£ç </span></span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœä½ ç•™æ„äº†æˆ‘ä»¬ä¸€å¼€å§‹ç›´æ¥ä½¿ç”¨ webpack æ„å»ºçš„ç»“æœï¼Œä½ ä¼šå‘ç°é»˜è®¤å·²ç»ä½¿ç”¨äº† JS ä»£ç å‹ç¼©çš„æ’ä»¶</span></span><br><span class=\"line\">    <span class=\"comment\">// è¿™å…¶å®ä¹Ÿæ˜¯æˆ‘ä»¬å‘½ä»¤ä¸­çš„ --mode production çš„æ•ˆæœï¼Œåç»­çš„å°èŠ‚ä¼šä»‹ç» webpack çš„ mode å‚æ•°</span></span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"æ­å»ºåŸºç¡€çš„å‰ç«¯å¼€å‘ç¯å¢ƒ\"><a href=\"#æ­å»ºåŸºç¡€çš„å‰ç«¯å¼€å‘ç¯å¢ƒ\" class=\"headerlink\" title=\"æ­å»ºåŸºç¡€çš„å‰ç«¯å¼€å‘ç¯å¢ƒ\"></a>æ­å»ºåŸºç¡€çš„å‰ç«¯å¼€å‘ç¯å¢ƒ</h3><h4 id=\"å…³è”-HTML\"><a href=\"#å…³è”-HTML\" class=\"headerlink\" title=\"å…³è” HTML\"></a>å…³è” HTML</h4><blockquote>\n<p><code>webpack</code> é»˜è®¤ä»ä½œä¸ºå…¥å£çš„ <code>.js</code> æ–‡ä»¶è¿›è¡Œæ„å»ºï¼ˆæ›´å¤šæ˜¯åŸºäº <code>SPA</code> å»è€ƒè™‘ï¼‰ï¼Œä½†é€šå¸¸ä¸€ä¸ªå‰ç«¯é¡¹ç›®éƒ½æ˜¯ä»ä¸€ä¸ªé¡µé¢ï¼ˆå³ HTMLï¼‰å‡ºå‘çš„ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼Œåˆ›å»ºä¸€ä¸ª HTML æ–‡ä»¶ï¼Œä½¿ç”¨ <code>script</code> æ ‡ç­¾ç›´æ¥å¼•ç”¨æ„å»ºå¥½çš„ JS æ–‡ä»¶ï¼Œå¦‚â€¦</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script src=&quot;./dist/bundle.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„æ–‡ä»¶åæˆ–è€…è·¯å¾„ä¼šå˜åŒ–ï¼Œä¾‹å¦‚ä½¿ç”¨ <code>[hash]</code> æ¥è¿›è¡Œå‘½åï¼Œé‚£ä¹ˆæœ€å¥½æ˜¯å°† <code>HTML</code> å¼•ç”¨è·¯å¾„å’Œæˆ‘ä»¬çš„æ„å»ºç»“æœå…³è”èµ·æ¥ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>html-webpack-plugin</code></li>\n<li><code>html-webpack-plugin</code> æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ <code>node package</code>ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ä¹‹å‰æˆ‘ä»¬éœ€è¦å…ˆå®‰è£…å®ƒï¼ŒæŠŠå®ƒå®‰è£…åˆ°é¡¹ç›®çš„å¼€å‘ä¾èµ–ä¸­</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install html-webpack-plugin -D</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>ç„¶ååœ¨ <code>webpack</code> é…ç½®ä¸­ï¼Œå°† <code>html-webpack-plugin</code> æ·»åŠ åˆ° <code>plugins</code> åˆ—è¡¨ä¸­</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  plugins: [<span class=\"keyword\">new</span> HtmlWebpackPlugin()]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>è¿™æ ·é…ç½®å¥½ä¹‹åï¼Œæ„å»ºæ—¶ <code>html-webpack-plugin</code> ä¼šä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <code>HTML</code> æ–‡ä»¶ï¼Œå…¶ä¸­ä¼šå¼•ç”¨æ„å»ºå‡ºæ¥çš„ JS æ–‡ä»¶ã€‚å®é™…é¡¹ç›®ä¸­ï¼Œé»˜è®¤åˆ›å»ºçš„ <code>HTML</code> æ–‡ä»¶å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±æ¥å†™ <code>HTML</code> æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ <code>html-webpack-plugin</code> çš„é…ç½®ï¼Œä¼ é€’ä¸€ä¸ªå†™å¥½çš„ HTML æ¨¡æ¿â€¦</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      filename: <span class=\"string\">'index.html'</span>, <span class=\"comment\">// é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„</span></span><br><span class=\"line\">      template: <span class=\"string\">'assets/index.html'</span> <span class=\"comment\">// é…ç½®æ–‡ä»¶æ¨¡æ¿</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>è¿™æ ·ï¼Œé€šè¿‡ <code>html-webpack-plugin</code> å°±å¯ä»¥å°†æˆ‘ä»¬çš„é¡µé¢å’Œæ„å»º <code>JS</code> å…³è”èµ·æ¥ï¼Œå›å½’æ—¥å¸¸ï¼Œä»é¡µé¢å¼€å§‹å¼€å‘ã€‚å¦‚æœéœ€è¦æ·»åŠ å¤šä¸ªé¡µé¢å…³è”ï¼Œé‚£ä¹ˆå®ä¾‹åŒ–å¤šä¸ª <code>html-webpack-plugin</code>ï¼Œ å¹¶å°†å®ƒä»¬éƒ½æ”¾åˆ° <code>plugins</code> å­—æ®µæ•°ç»„ä¸­å°±å¯ä»¥äº†â€¦</p>\n</blockquote>\n<h4 id=\"æ„å»º-CSS\"><a href=\"#æ„å»º-CSS\" class=\"headerlink\" title=\"æ„å»º CSS\"></a>æ„å»º CSS</h4><blockquote>\n<p>æˆ‘ä»¬ç¼–å†™ <code>CSS</code>ï¼Œå¹¶ä¸”å¸Œæœ›ä½¿ç”¨ <code>webpack</code> æ¥è¿›è¡Œæ„å»ºï¼Œä¸ºæ­¤ï¼Œéœ€è¦åœ¨é…ç½®ä¸­å¼•å…¥ <code>loader</code> æ¥è§£æå’Œå¤„ç† <code>CSS</code> æ–‡ä»¶</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css/</span>,</span><br><span class=\"line\">        include: [path.resolve(__dirname, <span class=\"string\">'src'</span>)],</span><br><span class=\"line\">        use: [<span class=\"string\">'style-loader'</span>, <span class=\"string\">'css-loader'</span>]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>css-loader</code> è´Ÿè´£è§£æ <code>CSS</code> ä»£ç ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¤„ç† <code>CSS</code> ä¸­çš„ä¾èµ–ï¼Œä¾‹å¦‚ <code>@import</code> å’Œ <code>url()</code> ç­‰å¼•ç”¨å¤–éƒ¨æ–‡ä»¶çš„å£°æ˜ï¼›</li>\n<li><code>style-loader</code> ä¼šå°† <code>css-loader</code> è§£æçš„ç»“æœè½¬å˜æˆ <code>JS</code> ä»£ç ï¼Œè¿è¡Œæ—¶åŠ¨æ€æ’å…¥ <code>style</code> æ ‡ç­¾æ¥è®© <code>CSS</code> ä»£ç ç”Ÿæ•ˆâ€¦</li>\n</ul>\n<blockquote>\n<p>ç»ç”±ä¸Šè¿°ä¸¤ä¸ª <code>loader</code> çš„å¤„ç†åï¼ŒCSS ä»£ç ä¼šè½¬å˜ä¸º JSï¼Œå’Œ <code>index.js</code> ä¸€èµ·æ‰“åŒ…äº†ã€‚å¦‚æœéœ€è¦å•ç‹¬æŠŠ CSS æ–‡ä»¶åˆ†ç¦»å‡ºæ¥ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>extract-text-webpack-plugin</code> æ’ä»¶</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader</span></span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: <span class=\"string\">'css-loader'</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"comment\">// å¼•å…¥æ’ä»¶ï¼Œé…ç½®æ–‡ä»¶åï¼Œè¿™é‡ŒåŒæ ·å¯ä»¥ä½¿ç”¨ [hash]</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">'index.css'</span>)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"CSS-é¢„å¤„ç†å™¨\"><a href=\"#CSS-é¢„å¤„ç†å™¨\" class=\"headerlink\" title=\"CSS é¢„å¤„ç†å™¨\"></a>CSS é¢„å¤„ç†å™¨</h4><blockquote>\n<p>åœ¨ä¸Šè¿°ä½¿ç”¨ CSS çš„åŸºç¡€ä¸Šï¼Œé€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨ <code>Less/Sass</code> ç­‰ CSS é¢„å¤„ç†å™¨ï¼Œwebpack å¯ä»¥é€šè¿‡æ·»åŠ å¯¹åº”çš„ <code>loader</code> æ¥æ”¯æŒï¼Œä»¥ä½¿ç”¨ <code>Less</code> ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æ‰¾åˆ°å¯¹åº”çš„ <code>loader</code></p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader</span></span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: [<span class=\"string\">'css-loader'</span>, <span class=\"string\">'less-loader'</span>]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"å¤„ç†å›¾ç‰‡æ–‡ä»¶\"><a href=\"#å¤„ç†å›¾ç‰‡æ–‡ä»¶\" class=\"headerlink\" title=\"å¤„ç†å›¾ç‰‡æ–‡ä»¶\"></a>å¤„ç†å›¾ç‰‡æ–‡ä»¶</h4><blockquote>\n<p>åœ¨å‰ç«¯é¡¹ç›®çš„æ ·å¼ä¸­æ€»ä¼šä½¿ç”¨åˆ°å›¾ç‰‡ï¼Œè™½ç„¶æˆ‘ä»¬å·²ç»æåˆ° <code>css-loader</code> ä¼šè§£ææ ·å¼ä¸­ç”¨ <code>url()</code> å¼•ç”¨çš„æ–‡ä»¶è·¯å¾„ï¼Œä½†æ˜¯å›¾ç‰‡å¯¹åº”çš„ <code>jpg/png/gif</code> ç­‰æ–‡ä»¶æ ¼å¼ï¼Œ<code>webpack</code> å¤„ç†ä¸äº†ã€‚æ˜¯çš„ï¼Œæˆ‘ä»¬åªè¦æ·»åŠ ä¸€ä¸ªå¤„ç†å›¾ç‰‡çš„ <code>loader</code> é…ç½®å°±å¯ä»¥äº†ï¼Œç°æœ‰çš„ <code>file-loader</code> å°±æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©â€¦</p>\n</blockquote>\n<ul>\n<li><code>file-loader</code> å¯ä»¥ç”¨äºå¤„ç†å¾ˆå¤šç±»å‹çš„æ–‡ä»¶ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ç›´æ¥è¾“å‡ºæ–‡ä»¶ï¼ŒæŠŠæ„å»ºåçš„æ–‡ä»¶è·¯å¾„è¿”å›ã€‚é…ç½®å¾ˆç®€å•ï¼Œåœ¨ <code>rules</code> ä¸­æ·»åŠ ä¸€ä¸ªå­—æ®µï¼Œå¢åŠ å›¾ç‰‡ç±»å‹æ–‡ä»¶çš„è§£æé…ç½®</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif)$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'file-loader'</span>,</span><br><span class=\"line\">            options: &#123;&#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"ä½¿ç”¨-Babel\"><a href=\"#ä½¿ç”¨-Babel\" class=\"headerlink\" title=\"ä½¿ç”¨ Babel\"></a>ä½¿ç”¨ Babel</h4><blockquote>\n<p><code>Babel</code> æ˜¯ä¸€ä¸ªè®©æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ <code>ES</code> æ–°ç‰¹æ€§çš„ <code>JS</code> ç¼–è¯‘å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>webpack</code> ä¸­é…ç½® Babelï¼Œä»¥ä¾¿ä½¿ç”¨ <code>ES6</code>ã€<code>ES7</code> æ ‡å‡†æ¥ç¼–å†™ <code>JS</code> ä»£ç </p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?/</span>, <span class=\"comment\">// æ”¯æŒ js å’Œ jsx</span></span><br><span class=\"line\">        include: [</span><br><span class=\"line\">          path.resolve(__dirname, <span class=\"string\">'src'</span>) <span class=\"comment\">// src ç›®å½•ä¸‹çš„æ‰éœ€è¦ç»è¿‡ babel-loader å¤„ç†</span></span><br><span class=\"line\">        ],</span><br><span class=\"line\">        loader: <span class=\"string\">'babel-loader'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"å¯åŠ¨é™æ€æœåŠ¡\"><a href=\"#å¯åŠ¨é™æ€æœåŠ¡\" class=\"headerlink\" title=\"å¯åŠ¨é™æ€æœåŠ¡\"></a>å¯åŠ¨é™æ€æœåŠ¡</h4><blockquote>\n<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†å¤„ç†å¤šç§æ–‡ä»¶ç±»å‹çš„ webpack é…ç½®ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>webpack-dev-server</code> åœ¨æœ¬åœ°å¼€å¯ä¸€ä¸ªç®€å•çš„é™æ€æœåŠ¡æ¥è¿›è¡Œå¼€å‘</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">  <span class=\"string\">\"build\"</span>: <span class=\"string\">\"webpack --mode production\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"start\"</span>: <span class=\"string\">\"webpack-dev-server --mode development\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>å°è¯•ç€è¿è¡Œ <code>npm start</code> æˆ–è€… <code>yarn start</code>ï¼Œç„¶åå°±å¯ä»¥è®¿é—® <code>http://localhost:8080/</code> æ¥æŸ¥çœ‹ä½ çš„é¡µé¢äº†ã€‚é»˜è®¤æ˜¯è®¿é—® <code>index.html</code>ï¼Œå¦‚æœæ˜¯å…¶ä»–é¡µé¢è¦æ³¨æ„è®¿é—®çš„ URL æ˜¯å¦æ­£ç¡®</p>\n</blockquote>\n<h4 id=\"å®Œæ•´ç¤ºä¾‹ä»£ç \"><a href=\"#å®Œæ•´ç¤ºä¾‹ä»£ç \" class=\"headerlink\" title=\"å®Œæ•´ç¤ºä¾‹ä»£ç \"></a>å®Œæ•´ç¤ºä¾‹ä»£ç </h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: <span class=\"string\">'./src/index.js'</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">    filename: <span class=\"string\">'[name].js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?/</span>,</span><br><span class=\"line\">        include: [path.resolve(__dirname, <span class=\"string\">'src'</span>)],</span><br><span class=\"line\">        use: <span class=\"string\">'babel-loader'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader</span></span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: [<span class=\"string\">'css-loader'</span>, <span class=\"string\">'less-loader'</span>]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif)$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'file-loader'</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ä»£ç æ¨¡å—è·¯å¾„è§£æçš„é…ç½®</span></span><br><span class=\"line\">  resolve: &#123;</span><br><span class=\"line\">    modules: [<span class=\"string\">'node_modules'</span>, path.resolve(__dirname, <span class=\"string\">'src'</span>)],</span><br><span class=\"line\"></span><br><span class=\"line\">    extensions: [<span class=\"string\">'.wasm'</span>, <span class=\"string\">'.mjs'</span>, <span class=\"string\">'.js'</span>, <span class=\"string\">'.json'</span>, <span class=\"string\">'.jsx'</span>]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      filename: <span class=\"string\">'index.html'</span>, <span class=\"comment\">// é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„</span></span><br><span class=\"line\">      template: <span class=\"string\">'src/index.html'</span> <span class=\"comment\">// é…ç½®æ–‡ä»¶æ¨¡æ¿</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">'[name].css'</span>)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"webpack-å¦‚ä½•è§£æä»£ç æ¨¡å—è·¯å¾„\"><a href=\"#webpack-å¦‚ä½•è§£æä»£ç æ¨¡å—è·¯å¾„\" class=\"headerlink\" title=\"webpack å¦‚ä½•è§£æä»£ç æ¨¡å—è·¯å¾„\"></a>webpack å¦‚ä½•è§£æä»£ç æ¨¡å—è·¯å¾„</h3><blockquote>\n<p>webpack ä¸­æœ‰ä¸€ä¸ªå¾ˆå…³é”®çš„æ¨¡å— <code>enhanced-resolve</code> å°±æ˜¯å¤„ç†ä¾èµ–æ¨¡å—è·¯å¾„çš„è§£æçš„ï¼Œè¿™ä¸ªæ¨¡å—å¯ä»¥è¯´æ˜¯ Node.js é‚£ä¸€å¥—æ¨¡å—è·¯å¾„è§£æçš„å¢å¼ºç‰ˆæœ¬ï¼Œæœ‰å¾ˆå¤šå¯ä»¥è‡ªå®šä¹‰çš„è§£æé…ç½®</p>\n</blockquote>\n<ul>\n<li>åœ¨ webpack é…ç½®ä¸­ï¼Œå’Œæ¨¡å—è·¯å¾„è§£æç›¸å…³çš„é…ç½®éƒ½åœ¨ <code>resolve</code> å­—æ®µä¸‹</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  resolve: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"å¸¸ç”¨çš„ä¸€äº›é…ç½®\"><a href=\"#å¸¸ç”¨çš„ä¸€äº›é…ç½®\" class=\"headerlink\" title=\"å¸¸ç”¨çš„ä¸€äº›é…ç½®\"></a>å¸¸ç”¨çš„ä¸€äº›é…ç½®</h4><p><strong>resolve.alias</strong></p>\n<blockquote>\n<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸ª <code>utils</code> æ¨¡å—æå…¶å¸¸ç”¨ï¼Œç»å¸¸ç¼–å†™ç›¸å¯¹è·¯å¾„å¾ˆéº»çƒ¦ï¼Œå¸Œæœ›å¯ä»¥ç›´æ¥ <code>import &#39;utils&#39;</code> æ¥å¼•ç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é…ç½®æŸä¸ªæ¨¡å—çš„åˆ«åï¼Œå¦‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alias: &#123;</span><br><span class=\"line\">  utils: path.resolve(__dirname, <span class=\"string\">'src/utils'</span>); <span class=\"comment\">// è¿™é‡Œä½¿ç”¨ path.resolve å’Œ __dirname æ¥è·å–ç»å¯¹è·¯å¾„</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>ä¸Šè¿°çš„é…ç½®æ˜¯æ¨¡ç³ŠåŒ¹é…ï¼Œæ„å‘³ç€åªè¦æ¨¡å—è·¯å¾„ä¸­æºå¸¦äº† utils å°±å¯ä»¥è¢«æ›¿æ¢æ‰ï¼Œå¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &apos;utils/query.js&apos; // ç­‰åŒäº import &apos;[é¡¹ç›®ç»å¯¹è·¯å¾„]/src/utils/query.js&apos;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>å¦‚æœéœ€è¦è¿›è¡Œç²¾ç¡®åŒ¹é…å¯ä»¥ä½¿ç”¨ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alias: &#123;</span><br><span class=\"line\">  utils$: path.resolve(__dirname, <span class=\"string\">'src/utils'</span>); <span class=\"comment\">// åªä¼šåŒ¹é… import 'utils'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>resolve.extensions</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">extensions: [<span class=\"string\">'.wasm'</span>, <span class=\"string\">'.mjs'</span>, <span class=\"string\">'.js'</span>, <span class=\"string\">'.json'</span>, <span class=\"string\">'.jsx'</span>],</span><br><span class=\"line\"><span class=\"comment\">// è¿™é‡Œçš„é¡ºåºä»£è¡¨åŒ¹é…åç¼€çš„ä¼˜å…ˆçº§ï¼Œä¾‹å¦‚å¯¹äº index.js å’Œ index.jsxï¼Œä¼šä¼˜å…ˆé€‰æ‹© index.js</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>è¿™ä¸ªé…ç½®çš„ä½œç”¨æ˜¯å’Œæ–‡ä»¶åç¼€åæœ‰å…³çš„, è¿™ä¸ªé…ç½®å¯ä»¥å®šä¹‰åœ¨è¿›è¡Œæ¨¡å—è·¯å¾„è§£ææ—¶ï¼Œwebpack ä¼šå°è¯•å¸®ä½ è¡¥å…¨é‚£äº›åç¼€åæ¥è¿›è¡ŒæŸ¥æ‰¾</p>\n</blockquote>\n<h3 id=\"é…ç½®-loader\"><a href=\"#é…ç½®-loader\" class=\"headerlink\" title=\"é…ç½® loader\"></a>é…ç½® loader</h3><h4 id=\"loader-åŒ¹é…è§„åˆ™\"><a href=\"#loader-åŒ¹é…è§„åˆ™\" class=\"headerlink\" title=\"loader åŒ¹é…è§„åˆ™\"></a>loader åŒ¹é…è§„åˆ™</h4><blockquote>\n<p>å½“æˆ‘ä»¬éœ€è¦é…ç½® <code>loader</code> æ—¶ï¼Œéƒ½æ˜¯åœ¨ <code>module.rules</code> ä¸­æ·»åŠ æ–°çš„é…ç½®é¡¹ï¼Œåœ¨è¯¥å­—æ®µä¸­ï¼Œæ¯ä¸€é¡¹è¢«è§†ä¸ºä¸€æ¡åŒ¹é…ä½¿ç”¨ <code>loader</code> çš„è§„åˆ™</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?/</span>, <span class=\"comment\">// æ¡ä»¶</span></span><br><span class=\"line\">        include: [path.resolve(__dirname, <span class=\"string\">'src'</span>)], <span class=\"comment\">// æ¡ä»¶</span></span><br><span class=\"line\">        use: <span class=\"string\">'babel-loader'</span> <span class=\"comment\">// è§„åˆ™åº”ç”¨ç»“æœ\u000e</span></span><br><span class=\"line\">      &#125; <span class=\"comment\">// ä¸€ä¸ª object å³ä¸€æ¡è§„åˆ™</span></span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>loader</code> çš„åŒ¹é…è§„åˆ™ä¸­æœ‰ä¸¤ä¸ªæœ€å…³é”®çš„å› ç´ ï¼šä¸€ä¸ªæ˜¯åŒ¹é…æ¡ä»¶ï¼Œä¸€ä¸ªæ˜¯åŒ¹é…è§„åˆ™åçš„åº”ç”¨</p>\n</blockquote>\n<h4 id=\"è§„åˆ™æ¡ä»¶é…ç½®\"><a href=\"#è§„åˆ™æ¡ä»¶é…ç½®\" class=\"headerlink\" title=\"è§„åˆ™æ¡ä»¶é…ç½®\"></a>è§„åˆ™æ¡ä»¶é…ç½®</h4><blockquote>\n<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé…ç½® <code>loader</code> çš„åŒ¹é…æ¡ä»¶æ—¶ï¼Œåªè¦ä½¿ç”¨ <code>test</code> å­—æ®µå°±å¥½äº†ï¼Œå¾ˆå¤šæ—¶å€™éƒ½åªéœ€è¦åŒ¹é…æ–‡ä»¶åç¼€åæ¥å†³å®šä½¿ç”¨ä»€ä¹ˆ <code>loader</code>ï¼Œä½†ä¹Ÿä¸æ’é™¤åœ¨æŸäº›ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®æ¯”è¾ƒå¤æ‚çš„åŒ¹é…æ¡ä»¶ã€‚webpack çš„è§„åˆ™æä¾›äº†å¤šç§é…ç½®å½¢å¼â€¦</p>\n</blockquote>\n<ul>\n<li><code>{test: ...}</code> åŒ¹é…ç‰¹å®šæ¡ä»¶</li>\n<li><code>{include: ...}</code> åŒ¹é…ç‰¹å®šè·¯å¾„</li>\n<li><code>{exclude: ...}</code> æ’é™¤ç‰¹å®šè·¯å¾„</li>\n<li><code>{and: [...] }</code> å¿…é¡»åŒ¹é…æ•°ç»„ä¸­æ‰€æœ‰æ¡ä»¶</li>\n<li><code>{or: [...] }</code> åŒ¹é…æ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªæ¡ä»¶</li>\n<li><code>{not: [...] }</code> æ’é™¤åŒ¹é…æ•°ç»„ä¸­æ‰€æœ‰æ¡ä»¶â€¦</li>\n</ul>\n<blockquote>\n<p>ä¸Šè¿°çš„æ‰€è°“æ¡ä»¶çš„å€¼å¯ä»¥æ˜¯ï¼š</p>\n</blockquote>\n<ul>\n<li>å­—ç¬¦ä¸²ï¼šå¿…é¡»ä»¥æä¾›çš„å­—ç¬¦ä¸²å¼€å§‹ï¼Œæ‰€ä»¥æ˜¯å­—ç¬¦ä¸²çš„è¯ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦æä¾›ç»å¯¹è·¯å¾„</li>\n<li>æ­£åˆ™è¡¨è¾¾å¼ï¼šè°ƒç”¨æ­£åˆ™çš„ <code>test</code> æ–¹æ³•æ¥åˆ¤æ–­åŒ¹é…</li>\n<li>å‡½æ•°ï¼š<code>(path) =&gt; boolean</code>ï¼Œè¿”å› <code>true</code> è¡¨ç¤ºåŒ¹é…</li>\n<li>æ•°ç»„ï¼šè‡³å°‘åŒ…å«ä¸€ä¸ªæ¡ä»¶çš„æ•°ç»„</li>\n<li>å¯¹è±¡ï¼šåŒ¹é…æ‰€æœ‰å±æ€§å€¼çš„æ¡ä»¶â€¦</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rules: [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    test: <span class=\"regexp\">/\\.jsx?/</span>, <span class=\"comment\">// æ­£åˆ™</span></span><br><span class=\"line\">    include: [</span><br><span class=\"line\">      path.resolve(__dirname, <span class=\"string\">'src'</span>), <span class=\"comment\">// å­—ç¬¦ä¸²ï¼Œæ³¨æ„æ˜¯ç»å¯¹è·¯å¾„</span></span><br><span class=\"line\">    ], <span class=\"comment\">// æ•°ç»„</span></span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    test: &#123;</span><br><span class=\"line\">      js: <span class=\"regexp\">/\\.js/</span>,</span><br><span class=\"line\">      jsx: <span class=\"regexp\">/\\.jsx/</span>,</span><br><span class=\"line\">    &#125;, <span class=\"comment\">// å¯¹è±¡ï¼Œä¸å»ºè®®ä½¿ç”¨</span></span><br><span class=\"line\">    not: [</span><br><span class=\"line\">      (value) =&gt; &#123; <span class=\"comment\">/* ... */</span> <span class=\"keyword\">return</span> <span class=\"literal\">true</span>; &#125;, <span class=\"comment\">// å‡½æ•°ï¼Œé€šå¸¸éœ€è¦é«˜åº¦è‡ªå®šä¹‰æ—¶æ‰ä¼šä½¿ç”¨</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<h4 id=\"ä½¿ç”¨-loader-é…ç½®\"><a href=\"#ä½¿ç”¨-loader-é…ç½®\" class=\"headerlink\" title=\"ä½¿ç”¨ loader é…ç½®\"></a>ä½¿ç”¨ loader é…ç½®</h4><blockquote>\n<p><code>module.rules</code> çš„åŒ¹é…è§„åˆ™æœ€é‡è¦çš„è¿˜æ˜¯ç”¨äºé…ç½® <code>loader</code>ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>use</code> å­—æ®µ</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rules: [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    test: <span class=\"regexp\">/\\.less/</span>,</span><br><span class=\"line\">    use: [</span><br><span class=\"line\">      <span class=\"string\">'style-loader'</span>, <span class=\"comment\">// ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²è¡¨ç¤º loader</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        loader: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">        options: &#123;</span><br><span class=\"line\">          importLoaders: <span class=\"number\">1</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;, <span class=\"comment\">// ç”¨å¯¹è±¡è¡¨ç¤º loaderï¼Œå¯ä»¥ä¼ é€’ loader é…ç½®ç­‰</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        loader: <span class=\"string\">'less-loader'</span>,</span><br><span class=\"line\">        options: &#123;</span><br><span class=\"line\">          noIeCompat: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;, <span class=\"comment\">// ä¼ é€’ loader é…ç½®</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>use</code> å­—æ®µå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…è¡¨ç¤º <code>loader</code> çš„å¯¹è±¡ã€‚å¦‚æœåªéœ€è¦ä¸€ä¸ª <code>loader</code>ï¼Œä¹Ÿå¯ä»¥è¿™æ ·ï¼š<code>use: {loader: &#39;babel-loader&#39;</code>, <code>options: { ...} }</code></p>\n</blockquote>\n<h4 id=\"loader-åº”ç”¨é¡ºåº\"><a href=\"#loader-åº”ç”¨é¡ºåº\" class=\"headerlink\" title=\"loader åº”ç”¨é¡ºåº\"></a>loader åº”ç”¨é¡ºåº</h4><ul>\n<li>å¯¹äºä¸Šé¢çš„ <code>less</code> è§„åˆ™é…ç½®ï¼Œä¸€ä¸ª <code>style.less</code> æ–‡ä»¶ä¼šé€”å¾„ <code>less-loader</code>ã€<code>css-loader</code>ã€<code>style-loader</code> å¤„ç†ï¼Œæˆä¸ºä¸€ä¸ªå¯ä»¥æ‰“åŒ…çš„æ¨¡å—ã€‚</li>\n<li><code>loader</code> çš„åº”ç”¨é¡ºåºåœ¨é…ç½®å¤šä¸ª <code>loader</code> ä¸€èµ·å·¥ä½œæ—¶å¾ˆé‡è¦ï¼Œé€šå¸¸ä¼šä½¿ç”¨åœ¨ CSS é…ç½®ä¸Šï¼Œé™¤äº† <code>style-loader</code> å’Œ <code>css-loader</code>ï¼Œä½ å¯èƒ½è¿˜è¦é…ç½® <code>less-loader</code> ç„¶åå†åŠ ä¸ª <code>postcss</code> çš„ <code>autoprefixer</code> ç­‰ã€‚</li>\n<li>ä¸Šè¿°ä»ååˆ°å‰çš„é¡ºåºæ˜¯åœ¨åŒä¸€ä¸ª <code>rule</code> ä¸­è¿›è¡Œçš„ï¼Œé‚£å¦‚æœå¤šä¸ª <code>rule</code> åŒ¹é…äº†åŒä¸€ä¸ªæ¨¡å—æ–‡ä»¶ï¼Œ<code>loader</code> çš„åº”ç”¨é¡ºåºåˆæ˜¯æ€æ ·çš„å‘¢ï¼Ÿçœ‹ä¸€ä»½è¿™æ ·çš„é…ç½®â€¦</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rules: [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">    exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">    loader: <span class=\"string\">\"eslint-loader\"</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">    exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">    loader: <span class=\"string\">\"babel-loader\"</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>è¿™æ ·æ— æ³•æ³•ä¿è¯ <code>eslint-loader</code> åœ¨ <code>babel-loader</code> åº”ç”¨å‰æ‰§è¡Œã€‚<code>webpack</code> åœ¨ <code>rules</code> ä¸­æä¾›äº†ä¸€ä¸ª <code>enforce</code> çš„å­—æ®µæ¥é…ç½®å½“å‰ <code>rule</code> çš„ <code>loader</code> ç±»å‹ï¼Œæ²¡é…ç½®çš„è¯æ˜¯æ™®é€šç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½® <code>pre</code> æˆ– <code>post</code>ï¼Œåˆ†åˆ«å¯¹åº”å‰ç½®ç±»å‹æˆ–åç½®ç±»å‹çš„ <code>loader</code>â€¦</p>\n</blockquote>\n<ul>\n<li>æ‰€æœ‰çš„ <code>loader</code> æŒ‰ç…§ <strong>å‰ç½®</strong> -&gt; <strong>è¡Œå†…</strong> -&gt; <strong>æ™®é€š</strong> -&gt; <strong>åç½®</strong> çš„é¡ºåºæ‰§è¡Œã€‚æ‰€ä»¥å½“æˆ‘ä»¬è¦ç¡®ä¿ <code>eslint-loader</code> åœ¨ <code>babel-loader</code> ä¹‹å‰æ‰§è¡Œæ—¶ï¼Œå¯ä»¥å¦‚ä¸‹æ·»åŠ  <code>enforce</code> é…ç½®</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rules: [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    enforce: <span class=\"string\">'pre'</span>, <span class=\"comment\">// æŒ‡å®šä¸ºå‰ç½®ç±»å‹</span></span><br><span class=\"line\">    test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">    exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">    loader: <span class=\"string\">\"eslint-loader\"</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>å½“é¡¹ç›®æ–‡ä»¶ç±»å‹å’Œåº”ç”¨çš„ <code>loader</code> ä¸æ˜¯ç‰¹åˆ«å¤æ‚çš„æ—¶å€™ï¼Œé€šå¸¸å»ºè®®æŠŠè¦åº”ç”¨çš„åŒä¸€ç±»å‹ <code>loader</code> éƒ½å†™åœ¨åŒä¸€ä¸ªåŒ¹é…è§„åˆ™ä¸­ï¼Œè¿™æ ·æ›´å¥½ç»´æŠ¤å’Œæ§åˆ¶</p>\n</blockquote>\n<h4 id=\"å®Œæ•´ä»£ç \"><a href=\"#å®Œæ•´ä»£ç \" class=\"headerlink\" title=\"å®Œæ•´ä»£ç \"></a>å®Œæ•´ä»£ç </h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> CopyWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'copy-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: <span class=\"string\">'./src/index'</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">    filename: <span class=\"string\">'[name].js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        enforce: <span class=\"string\">'pre'</span>, <span class=\"comment\">// æŒ‡å®šä¸ºå‰ç½®ç±»å‹</span></span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">'eslint-loader'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?$/</span>,</span><br><span class=\"line\">        include: [path.resolve(__dirname, <span class=\"string\">'src'</span>)],</span><br><span class=\"line\">        use: <span class=\"string\">'babel-loader'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: [<span class=\"string\">'css-loader'</span>]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: [<span class=\"string\">'css-loader'</span>, <span class=\"string\">'less-loader'</span>]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif)$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'file-loader'</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  resolve: &#123;</span><br><span class=\"line\">    alias: &#123;</span><br><span class=\"line\">      utils: path.resolve(__dirname, <span class=\"string\">'src/utils'</span>), <span class=\"comment\">// è¿™é‡Œä½¿ç”¨ path.resolve å’Œ __dirname æ¥è·å–ç»å¯¹è·¯å¾„</span></span><br><span class=\"line\">      log$: path.resolve(__dirname, <span class=\"string\">'src/utils/log.js'</span>) <span class=\"comment\">// åªåŒ¹é… log</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    extensions: [<span class=\"string\">'.js'</span>, <span class=\"string\">'.json'</span>, <span class=\"string\">'.jsx'</span>, <span class=\"string\">'.css'</span>, <span class=\"string\">'.less'</span>],</span><br><span class=\"line\">    modules: [</span><br><span class=\"line\">      path.resolve(__dirname, <span class=\"string\">'node_modules'</span>) <span class=\"comment\">// æŒ‡å®šå½“å‰ç›®å½•ä¸‹çš„ node_modules ä¼˜å…ˆæŸ¥æ‰¾</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      filename: <span class=\"string\">'index.html'</span>, <span class=\"comment\">// é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„</span></span><br><span class=\"line\">      template: <span class=\"string\">'src/index.html'</span> <span class=\"comment\">// é…ç½®æ–‡ä»¶æ¨¡æ¿</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">'[name].css'</span>),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123;</span><br><span class=\"line\">      TWO: <span class=\"string\">'1+1'</span>,</span><br><span class=\"line\">      CONSTANTS: &#123;</span><br><span class=\"line\">        APP_VERSION: <span class=\"built_in\">JSON</span>.stringify(<span class=\"string\">'1.1.2'</span>) <span class=\"comment\">// const CONSTANTS = &#123; APP_VERSION: '1.1.2' &#125;</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> CopyWebpackPlugin([</span><br><span class=\"line\">      &#123; <span class=\"attr\">from</span>: <span class=\"string\">'src/assets/favicon.ico'</span>, <span class=\"attr\">to</span>: <span class=\"string\">'favicon.ico'</span> &#125; <span class=\"comment\">// é¡¾åæ€ä¹‰ï¼Œfrom é…ç½®æ¥æºï¼Œto é…ç½®ç›®æ ‡è·¯å¾„</span></span><br><span class=\"line\">    ]),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.ProvidePlugin(&#123;</span><br><span class=\"line\">      _: <span class=\"string\">'lodash'</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\"></span><br><span class=\"line\">  devServer: &#123;</span><br><span class=\"line\">    port: <span class=\"string\">'1234'</span>,</span><br><span class=\"line\">    before(app) &#123;</span><br><span class=\"line\">      app.get(<span class=\"string\">'/api/test.json'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// å½“è®¿é—® /some/path è·¯å¾„æ—¶ï¼Œè¿”å›è‡ªå®šä¹‰çš„ json æ•°æ®</span></span><br><span class=\"line\">        res.json(&#123; <span class=\"attr\">code</span>: <span class=\"number\">200</span>, <span class=\"attr\">message</span>: <span class=\"string\">'hello world'</span> &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"ä½¿ç”¨-plugin\"><a href=\"#ä½¿ç”¨-plugin\" class=\"headerlink\" title=\"ä½¿ç”¨ plugin\"></a>ä½¿ç”¨ plugin</h3><blockquote>\n<p>æ›´å¤šçš„æ’ä»¶å¯ä»¥åœ¨è¿™é‡ŒæŸ¥æ‰¾ï¼š<a href=\"https://github.com/webpack-contrib/awesome-webpack#webpack-plugins\" target=\"_blank\" rel=\"noopener\">plugins in awesome-webpack</a></p>\n</blockquote>\n<h4 id=\"DefinePlugin\"><a href=\"#DefinePlugin\" class=\"headerlink\" title=\"DefinePlugin\"></a>DefinePlugin</h4><blockquote>\n<p><code>DefinePlugin</code> æ˜¯ <code>webpack</code> å†…ç½®çš„æ’ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>webpack.DefinePlugin</code> ç›´æ¥è·å–</p>\n</blockquote>\n<ul>\n<li>è¿™ä¸ªæ’ä»¶ç”¨äºåˆ›å»ºä¸€äº›åœ¨ç¼–è¯‘æ—¶å¯ä»¥é…ç½®çš„å…¨å±€å¸¸é‡ï¼Œè¿™äº›å¸¸é‡çš„å€¼æˆ‘ä»¬å¯ä»¥åœ¨ <code>webpack</code> çš„é…ç½®ä¸­å»æŒ‡å®šï¼Œä¾‹å¦‚</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123;</span><br><span class=\"line\">      PRODUCTION: <span class=\"built_in\">JSON</span>.stringify(<span class=\"literal\">true</span>), <span class=\"comment\">// const PRODUCTION = true</span></span><br><span class=\"line\">      VERSION: <span class=\"built_in\">JSON</span>.stringify(<span class=\"string\">'5fa3b9'</span>), <span class=\"comment\">// const VERSION = '5fa3b9'</span></span><br><span class=\"line\">      BROWSER_SUPPORTS_HTML5: <span class=\"literal\">true</span>, <span class=\"comment\">// const BROWSER_SUPPORTS_HTML5 = 'true'</span></span><br><span class=\"line\">      TWO: <span class=\"string\">'1+1'</span>, <span class=\"comment\">// const TWO = 1 + 1,</span></span><br><span class=\"line\">      CONSTANTS: &#123;</span><br><span class=\"line\">        APP_VERSION: <span class=\"built_in\">JSON</span>.stringify(<span class=\"string\">'1.1.2'</span>) <span class=\"comment\">// const CONSTANTS = &#123; APP_VERSION: '1.1.2' &#125;</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>æœ‰äº†ä¸Šé¢çš„é…ç½®ï¼Œå°±å¯ä»¥åœ¨åº”ç”¨ä»£ç æ–‡ä»¶ä¸­ï¼Œè®¿é—®é…ç½®å¥½çš„å˜é‡äº†ï¼Œå¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'Running App version'</span> + VERSION);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!BROWSER_SUPPORTS_HTML5) <span class=\"built_in\">require</span>(<span class=\"string\">'html5shiv'</span>);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>ä¸Šé¢é…ç½®çš„æ³¨é‡Šå·²ç»ç®€å•è¯´æ˜äº†è¿™äº›é…ç½®çš„æ•ˆæœï¼Œè¿™é‡Œå†ç®€è¿°ä¸€ä¸‹æ•´ä¸ªé…ç½®è§„åˆ™ã€‚</p>\n</blockquote>\n<ul>\n<li>å¦‚æœé…ç½®çš„å€¼æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæ•´ä¸ªå­—ç¬¦ä¸²ä¼šè¢«å½“æˆä»£ç ç‰‡æ®µæ¥æ‰§è¡Œï¼Œå…¶ç»“æœä½œä¸ºæœ€ç»ˆå˜é‡çš„å€¼ï¼Œå¦‚ä¸Šé¢çš„ <code>&quot;1+1&quot;</code>ï¼Œæœ€åçš„ç»“æœæ˜¯ <code>2</code></li>\n<li>å¦‚æœé…ç½®çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ï¼Œé‚£ä¹ˆè¯¥å€¼ä¼šè¢«è½¬ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚ <code>true</code>ï¼Œæœ€åçš„ç»“æœæ˜¯ <code>&#39;true&#39;</code></li>\n<li>å¦‚æœé…ç½®çš„æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡çš„æ‰€æœ‰ <code>key</code> ä¼šä»¥åŒæ ·çš„æ–¹å¼å»å®šä¹‰</li>\n<li>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ <code>JSON.stringify()</code> äº†ï¼Œå› ä¸º <code>JSON.stringify(true)</code> çš„ç»“æœæ˜¯ <code>&#39;true&#39;</code>ï¼Œ<code>JSON.stringify(&quot;5fa3b9&quot;)</code> çš„ç»“æœæ˜¯ <code>&quot;5fa3b9&quot;</code>ã€‚</li>\n</ul>\n<blockquote>\n<p>ç¤¾åŒºä¸­å…³äº <code>DefinePlugin</code> ä½¿ç”¨å¾—æœ€å¤šçš„æ–¹å¼æ˜¯å®šä¹‰ç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚ <code>PRODUCTION = true</code> æˆ–è€… <code>__DEV__ = true</code> ç­‰ã€‚éƒ¨åˆ†ç±»åº“åœ¨å¼€å‘ç¯å¢ƒæ—¶ä¾èµ–è¿™æ ·çš„ç¯å¢ƒå˜é‡æ¥ç»™äºˆå¼€å‘è€…æ›´å¤šçš„å¼€å‘è°ƒè¯•åé¦ˆï¼Œä¾‹å¦‚ react ç­‰ã€‚</p>\n</blockquote>\n<ul>\n<li>å»ºè®®ä½¿ç”¨ <code>process.env.NODE_ENV</code>: â€¦ çš„æ–¹å¼æ¥å®šä¹‰ <code>process.env.NODE_ENV</code>ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ <code>process: {env: { NODE_ENV: ...} }</code> çš„æ–¹å¼ï¼Œå› ä¸ºè¿™æ ·ä¼šè¦†ç›–æ‰ <code>process</code> è¿™ä¸ªå¯¹è±¡ï¼Œå¯èƒ½ä¼šå¯¹å…¶ä»–ä»£ç é€ æˆå½±å“â€¦</li>\n</ul>\n<h4 id=\"copy-webpack-plugin\"><a href=\"#copy-webpack-plugin\" class=\"headerlink\" title=\"copy-webpack-plugin\"></a>copy-webpack-plugin</h4><blockquote>\n<p>æˆ‘ä»¬ä¸€èˆ¬ä¼šæŠŠå¼€å‘çš„æ‰€æœ‰æºç å’Œèµ„æºæ–‡ä»¶æ”¾åœ¨ <code>src/</code> ç›®å½•ä¸‹ï¼Œæ„å»ºçš„æ—¶å€™äº§å‡ºä¸€ä¸ª <code>build/</code> ç›®å½•ï¼Œé€šå¸¸ä¼šç›´æ¥æ‹¿ <code>build</code> ä¸­çš„æ‰€æœ‰æ–‡ä»¶æ¥å‘å¸ƒã€‚æœ‰äº›æ–‡ä»¶æ²¡ç»è¿‡ <code>webpack</code> å¤„ç†ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›å®ƒä»¬ä¹Ÿèƒ½å‡ºç°åœ¨ <code>build</code> ç›®å½•ä¸‹ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨ <code>CopyWebpackPlugin</code> æ¥å¤„ç†äº†â€¦</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> CopyWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'copy-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> CopyWebpackPlugin([</span><br><span class=\"line\">      &#123; <span class=\"attr\">from</span>: <span class=\"string\">'src/file.txt'</span>, <span class=\"attr\">to</span>: <span class=\"string\">'build/file.txt'</span> &#125;, <span class=\"comment\">// é¡¾åæ€ä¹‰ï¼Œfrom é…ç½®æ¥æºï¼Œto é…ç½®ç›®æ ‡è·¯å¾„</span></span><br><span class=\"line\">      &#123; <span class=\"attr\">from</span>: <span class=\"string\">'src/*.ico'</span>, <span class=\"attr\">to</span>: <span class=\"string\">'build/*.ico'</span> &#125; <span class=\"comment\">// é…ç½®é¡¹å¯ä»¥ä½¿ç”¨ glob</span></span><br><span class=\"line\">      <span class=\"comment\">// å¯ä»¥é…ç½®å¾ˆå¤šé¡¹å¤åˆ¶è§„åˆ™</span></span><br><span class=\"line\">    ])</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"extract-text-webpack-plugin\"><a href=\"#extract-text-webpack-plugin\" class=\"headerlink\" title=\"extract-text-webpack-plugin\"></a>extract-text-webpack-plugin</h4><blockquote>\n<p>æˆ‘ä»¬ç”¨å®ƒæ¥æŠŠä¾èµ–çš„ <code>CSS</code> åˆ†ç¦»å‡ºæ¥æˆä¸ºå•ç‹¬çš„æ–‡ä»¶ã€‚è¿™é‡Œå†çœ‹ä¸€ä¸‹ä½¿ç”¨ <code>extract-text-webpack-plugin</code> çš„é…ç½®</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        <span class=\"comment\">// å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader</span></span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: <span class=\"string\">'css-loader'</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"comment\">// å¼•å…¥æ’ä»¶ï¼Œé…ç½®æ–‡ä»¶åï¼Œè¿™é‡ŒåŒæ ·å¯ä»¥ä½¿ç”¨ [hash]</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">'index.css'</span>)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>åœ¨ä¸Šè¿°çš„é…ç½®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>index.css</code> ä½œä¸ºå•ç‹¬åˆ†ç¦»å‡ºæ¥çš„æ–‡ä»¶åï¼Œä½†æœ‰çš„æ—¶å€™æ„å»ºå…¥å£ä¸æ­¢ä¸€ä¸ªï¼Œ<code>extract-text-webpack-plugin</code> ä¼šä¸ºæ¯ä¸€ä¸ªå…¥å£åˆ›å»ºå•ç‹¬åˆ†ç¦»çš„æ–‡ä»¶ï¼Œå› æ­¤æœ€å¥½è¿™æ ·é…ç½®</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿™æ ·ç¡®ä¿åœ¨ä½¿ç”¨å¤šä¸ªæ„å»ºå…¥å£æ—¶ï¼Œç”Ÿæˆä¸åŒåç§°çš„æ–‡ä»¶</span></span><br><span class=\"line\">plugins: [</span><br><span class=\"line\">  <span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">'[name].css'</span>),</span><br><span class=\"line\">],</span><br></pre></td></tr></table></figure>\n<h3 id=\"æ›´å¥½ä½¿ç”¨-webpack-dev-server\"><a href=\"#æ›´å¥½ä½¿ç”¨-webpack-dev-server\" class=\"headerlink\" title=\"æ›´å¥½ä½¿ç”¨ webpack-dev-server\"></a>æ›´å¥½ä½¿ç”¨ webpack-dev-server</h3><blockquote>\n<p><code>webpack-dev-server</code> æ˜¯ <code>webpack</code> å®˜æ–¹æä¾›çš„ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥åŸºäºå½“å‰çš„ <code>webpack</code> æ„å»ºé…ç½®å¿«é€Ÿå¯åŠ¨ä¸€ä¸ªé™æ€æœåŠ¡ã€‚å½“ <code>mode</code> ä¸º <code>development</code> æ—¶ï¼Œä¼šå…·å¤‡ <code>hot reload</code> çš„åŠŸèƒ½ï¼Œå³å½“æºç æ–‡ä»¶å˜åŒ–æ—¶ï¼Œä¼šå³æ—¶æ›´æ–°å½“å‰é¡µé¢ï¼Œä»¥ä¾¿ä½ çœ‹åˆ°æœ€æ–°çš„æ•ˆæœâ€¦</p>\n</blockquote>\n<h4 id=\"åŸºç¡€ä½¿ç”¨\"><a href=\"#åŸºç¡€ä½¿ç”¨\" class=\"headerlink\" title=\"åŸºç¡€ä½¿ç”¨\"></a>åŸºç¡€ä½¿ç”¨</h4><blockquote>\n<p><code>webpack-dev-server</code> æ˜¯ä¸€ä¸ª <code>npm package</code>ï¼Œå®‰è£…ååœ¨å·²ç»æœ‰ <code>webpack</code> é…ç½®æ–‡ä»¶çš„é¡¹ç›®ç›®å½•ä¸‹ç›´æ¥å¯åŠ¨å°±å¯ä»¥</p>\n</blockquote>\n<ul>\n<li><code>webpack-dev-server</code> é»˜è®¤ä½¿ç”¨ <code>8080</code> ç«¯å£</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install webpack-dev-server -g</span><br><span class=\"line\">webpack-dev-server --mode development</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>package</code> ä¸­çš„ <code>scripts</code> é…ç½®ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"start\"</span>: <span class=\"string\">\"webpack-dev-server --mode development\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"é…ç½®\"><a href=\"#é…ç½®\" class=\"headerlink\" title=\"é…ç½®\"></a>é…ç½®</h4><blockquote>\n<p>åœ¨ webpack çš„é…ç½®ä¸­ï¼Œå¯ä»¥é€šè¿‡ <code>devServer</code> å­—æ®µæ¥é…ç½® <code>webpack-dev-server</code>ï¼Œå¦‚ç«¯å£è®¾ç½®ã€å¯åŠ¨ <code>gzip</code> å‹ç¼©ç­‰ï¼Œè¿™é‡Œç®€å•è®²è§£å‡ ä¸ªå¸¸ç”¨çš„é…ç½®</p>\n</blockquote>\n<ul>\n<li><code>public</code> å­—æ®µç”¨äºæŒ‡å®šé™æ€æœåŠ¡çš„åŸŸåï¼Œé»˜è®¤æ˜¯ <code>http://localhost:8080/</code> ï¼Œå½“ä½ ä½¿ç”¨ <code>Nginx</code> æ¥åšåå‘ä»£ç†æ—¶ï¼Œåº”è¯¥å°±éœ€è¦ä½¿ç”¨è¯¥é…ç½®æ¥æŒ‡å®š <code>Nginx</code> é…ç½®ä½¿ç”¨çš„æœåŠ¡åŸŸå</li>\n<li><code>port</code> å­—æ®µç”¨äºæŒ‡å®šé™æ€æœåŠ¡çš„ç«¯å£ï¼Œå¦‚ä¸Šï¼Œé»˜è®¤æ˜¯ <code>8080</code>ï¼Œé€šå¸¸æƒ…å†µä¸‹éƒ½ä¸éœ€è¦æ”¹åŠ¨</li>\n<li><code>publicPath</code> å­—æ®µç”¨äºæŒ‡å®šæ„å»ºå¥½çš„é™æ€æ–‡ä»¶åœ¨æµè§ˆå™¨ä¸­ç”¨ä»€ä¹ˆè·¯å¾„å»è®¿é—®ï¼Œé»˜è®¤æ˜¯ <code>/</code>ï¼Œä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªæ„å»ºå¥½çš„æ–‡ä»¶ <code>bundle.js</code>ï¼Œå®Œæ•´çš„è®¿é—®è·¯å¾„æ˜¯ <code>http://localhost:8080/bundle.js</code>ï¼Œå¦‚æœä½ é…ç½®äº† <code>publicPath: &#39;assets/&#39;</code>ï¼Œé‚£ä¹ˆä¸Šè¿° <code>bundle.js</code> çš„å®Œæ•´è®¿é—®è·¯å¾„å°±æ˜¯ <code>http://localhost:8080/assets/bundle.js</code>ã€‚å¯ä»¥ä½¿ç”¨æ•´ä¸ª <code>URL</code> æ¥ä½œä¸º <code>publicPath</code> çš„å€¼ï¼Œå¦‚ <code>publicPath: &#39;http://localhost:8080/assets/&#39;</code>ã€‚å¦‚æœä½ ä½¿ç”¨äº† <code>HMR</code>ï¼Œé‚£ä¹ˆè¦è®¾ç½® <code>publicPath</code> å°±å¿…é¡»ä½¿ç”¨å®Œæ•´çš„ <code>URL</code></li>\n</ul>\n<blockquote>\n<p>å»ºè®®å°† <code>devServer.publicPath</code> å’Œ <code>output.publicPath</code> çš„å€¼ä¿æŒä¸€è‡´</p>\n</blockquote>\n<ul>\n<li><code>proxy</code> ç”¨äºé…ç½® <code>webpack-dev-server</code> å°†ç‰¹å®š <code>URL</code> çš„è¯·æ±‚ä»£ç†åˆ°å¦å¤–ä¸€å°æœåŠ¡å™¨ä¸Šã€‚å½“ä½ æœ‰å•ç‹¬çš„åç«¯å¼€å‘æœåŠ¡å™¨ç”¨äºè¯·æ±‚ API æ—¶ï¼Œè¿™ä¸ªé…ç½®ç›¸å½“æœ‰ç”¨ã€‚ä¾‹å¦‚</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">proxy: &#123;</span><br><span class=\"line\">  <span class=\"string\">'/api'</span>: &#123;</span><br><span class=\"line\">    target: <span class=\"string\">\"http://localhost:3000\"</span>, <span class=\"comment\">// å°† URL ä¸­å¸¦æœ‰ /api çš„è¯·æ±‚ä»£ç†åˆ°æœ¬åœ°çš„ 3000 ç«¯å£çš„æœåŠ¡ä¸Š</span></span><br><span class=\"line\">    pathRewrite: &#123;<span class=\"string\">'^/api'</span>: <span class=\"string\">''</span>&#125;, <span class=\"comment\">// æŠŠ URL ä¸­ path éƒ¨åˆ†çš„ `api` ç§»é™¤æ‰</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>before</code> å’Œ <code>after</code> é…ç½®ç”¨äºåœ¨ <code>webpack-dev-server</code> å®šä¹‰é¢å¤–çš„ä¸­é—´ä»¶ï¼Œå¦‚</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">before(app)&#123;</span><br><span class=\"line\">  app.get(<span class=\"string\">'/some/path'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res</span>) </span>&#123; <span class=\"comment\">// å½“è®¿é—® /some/path è·¯å¾„æ—¶ï¼Œè¿”å›è‡ªå®šä¹‰çš„ json æ•°æ®</span></span><br><span class=\"line\">    res.json(&#123;<span class=\"attr\">custom</span>: <span class=\"string\">'response'</span>&#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>before</code> åœ¨ <code>webpack-dev-server</code> é™æ€èµ„æºä¸­é—´ä»¶å¤„ç†ä¹‹å‰ï¼Œå¯ä»¥ç”¨äºæ‹¦æˆªéƒ¨åˆ†è¯·æ±‚è¿”å›ç‰¹å®šå†…å®¹ï¼Œæˆ–è€…å®ç°ç®€å•çš„æ•°æ® <code>mock</code>ã€‚</li>\n<li><code>after</code> åœ¨ <code>webpack-dev-server</code> é™æ€èµ„æºä¸­é—´ä»¶å¤„ç†ä¹‹åï¼Œæ¯”è¾ƒå°‘ç”¨åˆ°ï¼Œå¯ä»¥ç”¨äºæ‰“å°æ—¥å¿—æˆ–è€…åšä¸€äº›é¢å¤–å¤„ç†â€¦</li>\n</ul>\n<h3 id=\"å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„æ„å»ºé…ç½®å·®å¼‚\"><a href=\"#å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„æ„å»ºé…ç½®å·®å¼‚\" class=\"headerlink\" title=\"å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„æ„å»ºé…ç½®å·®å¼‚\"></a>å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„æ„å»ºé…ç½®å·®å¼‚</h3><ul>\n<li>æˆ‘ä»¬åœ¨æ—¥å¸¸çš„å‰ç«¯å¼€å‘å·¥ä½œä¸­ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰ä¸¤å¥—æ„å»ºç¯å¢ƒï¼šä¸€å¥—å¼€å‘æ—¶ä½¿ç”¨ï¼Œæ„å»ºç»“æœç”¨äºæœ¬åœ°å¼€å‘è°ƒè¯•ï¼Œä¸è¿›è¡Œä»£ç å‹ç¼©ï¼Œæ‰“å° <code>debug</code> ä¿¡æ¯ï¼ŒåŒ…å« <code>sourcemap</code> æ–‡ä»¶</li>\n<li>å¦å¤–ä¸€å¥—æ„å»ºåçš„ç»“æœæ˜¯ç›´æ¥åº”ç”¨äºçº¿ä¸Šçš„ï¼Œå³ä»£ç éƒ½æ˜¯å‹ç¼©åï¼Œè¿è¡Œæ—¶ä¸æ‰“å° <code>debug</code> ä¿¡æ¯ï¼Œé™æ€æ–‡ä»¶ä¸åŒ…æ‹¬ <code>sourcemap</code> çš„ã€‚æœ‰çš„æ—¶å€™å¯èƒ½è¿˜éœ€è¦å¤šä¸€å¥—æµ‹è¯•ç¯å¢ƒï¼Œåœ¨è¿è¡Œæ—¶ç›´æ¥è¿›è¡Œè¯·æ±‚ <code>mock</code> ç­‰å·¥ä½œ</li>\n<li><code>webpack 4.x</code> ç‰ˆæœ¬å¼•å…¥äº† <code>mode</code> çš„æ¦‚å¿µï¼Œåœ¨è¿è¡Œ <code>webpack</code> æ—¶éœ€è¦æŒ‡å®šä½¿ç”¨ <code>production</code> æˆ– <code>development</code> ä¸¤ä¸ª <code>mode</code> å…¶ä¸­ä¸€ä¸ªï¼Œè¿™ä¸ªåŠŸèƒ½ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„è¿è¡Œä¸¤å¥—æ„å»ºç¯å¢ƒçš„èƒ½åŠ›ã€‚</li>\n</ul>\n<h4 id=\"åœ¨é…ç½®æ–‡ä»¶ä¸­åŒºåˆ†-mode\"><a href=\"#åœ¨é…ç½®æ–‡ä»¶ä¸­åŒºåˆ†-mode\" class=\"headerlink\" title=\"åœ¨é…ç½®æ–‡ä»¶ä¸­åŒºåˆ† mode\"></a>åœ¨é…ç½®æ–‡ä»¶ä¸­åŒºåˆ† mode</h4><blockquote>\n<p>ä¹‹å‰æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶éƒ½æ˜¯ç›´æ¥å¯¹å¤–æš´éœ²ä¸€ä¸ª <code>JS</code> å¯¹è±¡ï¼Œè¿™ç§æ–¹å¼æš‚æ—¶æ²¡æœ‰åŠæ³•è·å–åˆ° <code>webpack</code> çš„ <code>mode</code> å‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ¢ä¸€ç§æ–¹å¼æ¥å¤„ç†é…ç½®ã€‚æ ¹æ®å®˜æ–¹çš„æ–‡æ¡£å¤šç§é…ç½®ç±»å‹ï¼Œé…ç½®æ–‡ä»¶å¯ä»¥å¯¹å¤–æš´éœ²ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¿™æ ·åš</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\">(<span class=\"params\">env, argv</span>) =&gt;</span> (&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... å…¶ä»–é…ç½®</span></span><br><span class=\"line\">  optimization: &#123;</span><br><span class=\"line\">    minimize: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"comment\">// ä½¿ç”¨ argv æ¥è·å– mode å‚æ•°çš„å€¼</span></span><br><span class=\"line\">    minimizer:</span><br><span class=\"line\">      argv.mode === <span class=\"string\">'production'</span></span><br><span class=\"line\">        ? [</span><br><span class=\"line\">            <span class=\"keyword\">new</span> UglifyJsPlugin(&#123;</span><br><span class=\"line\">              <span class=\"comment\">/* ä½ è‡ªå·±çš„é…ç½® */</span></span><br><span class=\"line\">            &#125;)</span><br><span class=\"line\">            <span class=\"comment\">// ä»…åœ¨æˆ‘ä»¬è¦è‡ªå®šä¹‰å‹ç¼©é…ç½®æ—¶æ‰éœ€è¦è¿™ä¹ˆåš</span></span><br><span class=\"line\">            <span class=\"comment\">// mode ä¸º production æ—¶ webpack ä¼šé»˜è®¤ä½¿ç”¨å‹ç¼© JS çš„ plugin</span></span><br><span class=\"line\">          ]</span><br><span class=\"line\">        : []</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>è¿™æ ·è·å– <code>mode</code> ä¹‹åï¼Œæˆ‘ä»¬å°±èƒ½å¤ŸåŒºåˆ†ä¸åŒçš„æ„å»ºç¯å¢ƒï¼Œç„¶åæ ¹æ®ä¸åŒç¯å¢ƒå†å¯¹ç‰¹æ®Šçš„ <code>loader</code> æˆ– <code>plugin</code> åšé¢å¤–çš„é…ç½®å°±å¯ä»¥äº†</p>\n</blockquote>\n<ul>\n<li>ä»¥ä¸Šæ˜¯ <code>webpack 4.x</code> çš„åšæ³•ï¼Œç”±äºæœ‰äº† <code>mode</code> å‚æ•°ï¼ŒåŒºåˆ†ç¯å¢ƒå˜å¾—ç®€å•äº†ã€‚ä¸è¿‡åœ¨å½“å‰ä¸šç•Œï¼Œä¼°è®¡è¿˜æ˜¯ä½¿ç”¨ <code>webpack 3.x</code> ç‰ˆæœ¬çš„å±…å¤šï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿç®€å•ä»‹ç»ä¸€ä¸‹ <code>3.x</code> å¦‚ä½•åŒºåˆ†ç¯å¢ƒ</li>\n</ul>\n<blockquote>\n<p><code>webpack</code> çš„è¿è¡Œæ—¶ç¯å¢ƒæ˜¯ <code>Node.js</code>ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>Node.js</code> æä¾›çš„æœºåˆ¶ç»™è¦è¿è¡Œçš„ <code>webpack</code> ç¨‹åºä¼ é€’ç¯å¢ƒå˜é‡ï¼Œæ¥æ§åˆ¶ä¸åŒç¯å¢ƒä¸‹çš„æ„å»ºè¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨ <code>npm</code> ä¸­çš„ <code>scripts</code> å­—æ®µæ·»åŠ ä¸€ä¸ªç”¨äºç”Ÿäº§ç¯å¢ƒçš„æ„å»ºå‘½ä»¤â€¦</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"build\"</span>: <span class=\"string\">\"NODE_ENV=production webpack\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"develop\"</span>: <span class=\"string\">\"NODE_ENV=development webpack-dev-server\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>ç„¶ååœ¨ <code>webpack.config.js</code> æ–‡ä»¶ä¸­å¯ä»¥é€šè¿‡ <code>process.env.NODE_ENV</code> æ¥è·å–å‘½ä»¤ä¼ å…¥çš„ç¯å¢ƒå˜é‡</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> config = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... webpack é…ç½®</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (process.env.NODE_ENV === <span class=\"string\">'production'</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ç”Ÿäº§ç¯å¢ƒéœ€è¦åšçš„äº‹æƒ…ï¼Œå¦‚ä½¿ç”¨ä»£ç å‹ç¼©æ’ä»¶ç­‰</span></span><br><span class=\"line\">  config.plugins.push(<span class=\"keyword\">new</span> UglifyJsPlugin());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = config;</span><br></pre></td></tr></table></figure>\n<h4 id=\"è¿è¡Œæ—¶çš„ç¯å¢ƒå˜é‡\"><a href=\"#è¿è¡Œæ—¶çš„ç¯å¢ƒå˜é‡\" class=\"headerlink\" title=\"è¿è¡Œæ—¶çš„ç¯å¢ƒå˜é‡\"></a>è¿è¡Œæ—¶çš„ç¯å¢ƒå˜é‡</h4><blockquote>\n<p>æˆ‘ä»¬ä½¿ç”¨ webpack æ—¶ä¼ é€’çš„ mode å‚æ•°ï¼Œæ˜¯å¯ä»¥åœ¨æˆ‘ä»¬çš„åº”ç”¨ä»£ç è¿è¡Œæ—¶ï¼Œé€šè¿‡ <code>process.env.NODE_ENV</code> è¿™ä¸ªå˜é‡è·å–çš„ã€‚è¿™æ ·æ–¹ä¾¿æˆ‘ä»¬åœ¨è¿è¡Œæ—¶åˆ¤æ–­å½“å‰æ‰§è¡Œçš„æ„å»ºç¯å¢ƒï¼Œä½¿ç”¨æœ€å¤šçš„åœºæ™¯è«è¿‡äºæ§åˆ¶æ˜¯å¦æ‰“å° <code>debug</code> ä¿¡æ¯â€¦</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢è¿™ä¸ªç®€å•çš„ä¾‹å­ï¼Œåœ¨åº”ç”¨å¼€å‘çš„ä»£ç ä¸­å®ç°ä¸€ä¸ªç®€å•çš„ <code>console</code> æ‰“å°å°è£…</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">log</span>(<span class=\"params\">...args</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.env.NODE_ENV === <span class=\"string\">'development'</span> &amp;&amp; <span class=\"built_in\">console</span> &amp;&amp; <span class=\"built_in\">console</span>.log) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log.apply(<span class=\"built_in\">console</span>, args);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>åŒæ ·ï¼Œä»¥ä¸Šæ˜¯ <code>webpack 4.x</code> çš„åšæ³•ï¼Œä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹ <code>3.x</code> ç‰ˆæœ¬åº”è¯¥å¦‚ä½•å®ç°ã€‚è¿™é‡Œéœ€è¦ç”¨åˆ° <code>DefinePlugin</code> æ’ä»¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨æ„å»ºæ—¶ç»™è¿è¡Œæ—¶å®šä¹‰å˜é‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªè¦åœ¨å‰é¢ <code>webpack 3.x</code> ç‰ˆæœ¬åŒºåˆ†æ„å»ºç¯å¢ƒçš„ä¾‹å­çš„åŸºç¡€ä¸Šï¼Œå†ä½¿ç”¨ <code>DefinePlugin</code> æ·»åŠ ç¯å¢ƒå˜é‡å³å¯å½±å“åˆ°è¿è¡Œæ—¶çš„ä»£ç â€¦</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"comment\">// webpack çš„é…ç½®</span></span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123;</span><br><span class=\"line\">      <span class=\"comment\">// webpack 3.x çš„ process.env.NODE_ENV æ˜¯é€šè¿‡æ‰‹åŠ¨åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®š NODE_ENV=... çš„æ–¹å¼æ¥ä¼ é€’çš„</span></span><br><span class=\"line\">      <span class=\"string\">'process.env.NODE_ENV'</span>: <span class=\"built_in\">JSON</span>.stringify(process.env.NODE_ENV)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"å¸¸è§çš„ç¯å¢ƒå·®å¼‚é…ç½®\"><a href=\"#å¸¸è§çš„ç¯å¢ƒå·®å¼‚é…ç½®\" class=\"headerlink\" title=\"å¸¸è§çš„ç¯å¢ƒå·®å¼‚é…ç½®\"></a>å¸¸è§çš„ç¯å¢ƒå·®å¼‚é…ç½®</h4><p><strong>å¸¸è§çš„ webpack æ„å»ºå·®å¼‚é…ç½®</strong></p>\n<ul>\n<li>ç”Ÿäº§ç¯å¢ƒå¯èƒ½éœ€è¦åˆ†ç¦» <code>CSS</code> æˆå•ç‹¬çš„æ–‡ä»¶ï¼Œä»¥ä¾¿å¤šä¸ªé¡µé¢å…±äº«åŒä¸€ä¸ª <code>CSS</code> æ–‡ä»¶</li>\n<li>ç”Ÿäº§ç¯å¢ƒéœ€è¦å‹ç¼© <code>HTML/CSS/JS</code> ä»£ç </li>\n<li>ç”Ÿäº§ç¯å¢ƒéœ€è¦å‹ç¼©å›¾ç‰‡</li>\n<li>å¼€å‘ç¯å¢ƒéœ€è¦ç”Ÿæˆ <code>sourcemap</code> æ–‡ä»¶</li>\n<li>å¼€å‘ç¯å¢ƒéœ€è¦æ‰“å° <code>debug</code> ä¿¡æ¯</li>\n<li>å¼€å‘ç¯å¢ƒéœ€è¦ <code>live reload</code> æˆ–è€… <code>hot reload</code> çš„åŠŸèƒ½â€¦</li>\n</ul>\n<blockquote>\n<p><code>webpack 4.x</code> çš„ <code>mode</code> å·²ç»æä¾›äº†ä¸Šè¿°å·®å¼‚é…ç½®çš„å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œ<code>mode</code> ä¸º <code>production</code> æ—¶é»˜è®¤ä½¿ç”¨ <code>JS</code> ä»£ç å‹ç¼©ï¼Œè€Œ <code>mode</code> ä¸º <code>development</code> æ—¶é»˜è®¤å¯ç”¨ <code>hot</code> <code>reload</code>ï¼Œç­‰ç­‰ã€‚è¿™æ ·è®©æˆ‘ä»¬çš„é…ç½®æ›´ä¸ºç®€æ´ï¼Œæˆ‘ä»¬åªéœ€è¦é’ˆå¯¹ç‰¹åˆ«ä½¿ç”¨çš„ <code>loader</code> å’Œ <code>plugin</code> åšåŒºåˆ†é…ç½®å°±å¯ä»¥äº†â€¦</p>\n</blockquote>\n<ul>\n<li><code>webpack 3.x</code> ç‰ˆæœ¬è¿˜æ˜¯åªèƒ½è‡ªå·±åŠ¨æ‰‹ä¿®æ”¹é…ç½®æ¥æ»¡è¶³å¤§éƒ¨åˆ†ç¯å¢ƒå·®å¼‚éœ€æ±‚ï¼Œæ‰€ä»¥å¦‚æœä½ è¦å¼€å§‹ä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨ <code>webpack 4.x</code> ç‰ˆæœ¬</li>\n</ul>\n<h4 id=\"æ‹†åˆ†é…ç½®\"><a href=\"#æ‹†åˆ†é…ç½®\" class=\"headerlink\" title=\"æ‹†åˆ†é…ç½®\"></a>æ‹†åˆ†é…ç½®</h4><blockquote>\n<p>å‰é¢æˆ‘ä»¬åˆ—å‡ºäº†å‡ ä¸ªç¯å¢ƒå·®å¼‚é…ç½®ï¼Œå¯èƒ½è¿™äº›æ„å»ºéœ€æ±‚å°±å·²ç»æœ‰ç‚¹å¤šäº†ï¼Œä¼šè®©æ•´ä¸ª <code>webpack</code> çš„é…ç½®å˜å¾—å¤æ‚ï¼Œå°¤å…¶æ˜¯æœ‰ç€å¤§é‡ç¯å¢ƒå˜é‡åˆ¤æ–­çš„é…ç½®ã€‚æˆ‘ä»¬å¯ä»¥æŠŠ <code>webpack</code> çš„é…ç½®æŒ‰ç…§ä¸åŒçš„ç¯å¢ƒæ‹†åˆ†æˆå¤šä¸ªæ–‡ä»¶ï¼Œè¿è¡Œæ—¶ç›´æ¥æ ¹æ®ç¯å¢ƒå˜é‡åŠ è½½å¯¹åº”çš„é…ç½®å³å¯ã€‚åŸºæœ¬çš„åˆ’åˆ†å¦‚ä¸‹â€¦</p>\n</blockquote>\n<ul>\n<li><code>webpack.base.js</code>ï¼šåŸºç¡€éƒ¨åˆ†ï¼Œå³å¤šä¸ªæ–‡ä»¶ä¸­å…±äº«çš„é…ç½®</li>\n<li><code>webpack.development.js</code>ï¼šå¼€å‘ç¯å¢ƒä½¿ç”¨çš„é…ç½®</li>\n<li><code>webpack.production.js</code>ï¼šç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„é…ç½®</li>\n<li><code>webpack.test.js</code>ï¼šæµ‹è¯•ç¯å¢ƒä½¿ç”¨çš„é…ç½®â€¦</li>\n</ul>\n<p><strong>å¦‚ä½•å¤„ç†è¿™æ ·çš„é…ç½®æ‹†åˆ†</strong></p>\n<blockquote>\n<p>é¦–å…ˆæˆ‘ä»¬è¦æ˜ç™½ï¼Œå¯¹äº <code>webpack</code> çš„é…ç½®ï¼Œå…¶å®æ˜¯å¯¹å¤–æš´éœ²ä¸€ä¸ª <code>JS</code> å¯¹è±¡ï¼Œæ‰€ä»¥å¯¹äºè¿™ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç”¨ <code>JS</code> ä»£ç æ¥ä¿®æ”¹å®ƒï¼Œä¾‹å¦‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> config = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... webpack é…ç½®</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æˆ‘ä»¬å¯ä»¥ä¿®æ”¹è¿™ä¸ª config æ¥è°ƒæ•´é…ç½®ï¼Œä¾‹å¦‚æ·»åŠ ä¸€ä¸ªæ–°çš„æ’ä»¶</span></span><br><span class=\"line\">config.plugins.push(<span class=\"keyword\">new</span> YourPlugin());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = config;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>å› æ­¤ï¼Œåªè¦æœ‰ä¸€ä¸ªå·¥å…·èƒ½æ¯”è¾ƒæ™ºèƒ½åœ°åˆå¹¶å¤šä¸ªé…ç½®å¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆè½»æ¾åœ°æ‹†åˆ† webpack é…ç½®ï¼Œç„¶åé€šè¿‡åˆ¤æ–­ç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨å·¥å…·å°†å¯¹åº”ç¯å¢ƒçš„å¤šä¸ªé…ç½®å¯¹è±¡æ•´åˆåæä¾›ç»™ webpack ä½¿ç”¨ã€‚è¿™ä¸ªå·¥å…·å°±æ˜¯ <strong><a href=\"https://github.com/survivejs/webpack-merge\" target=\"_blank\" rel=\"noopener\">webpack-merge</a></strong></p>\n</blockquote>\n<ul>\n<li>æˆ‘ä»¬çš„ webpack é…ç½®åŸºç¡€éƒ¨åˆ†ï¼Œå³ <code>webpack.base.js</code> åº”è¯¥å¤§è‡´æ˜¯è¿™æ ·çš„</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: <span class=\"string\">'...'</span>,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  resolve: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// è¿™é‡Œæ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œåé¢ä»‹ç» API æ—¶ä¼šç”¨åˆ°</span></span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        use: [<span class=\"string\">'babel'</span>]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>ç„¶å <code>webpack.development.js</code> éœ€è¦æ·»åŠ  <code>loader</code> æˆ– <code>plugin</code>ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>webpack-merge</code> çš„ <code>API</code>ï¼Œä¾‹å¦‚</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123;smart&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-merge'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> base = <span class=\"built_in\">require</span>(<span class=\"string\">'./webpack.base.js'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = smart(base, &#123;</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      <span class=\"comment\">// ç”¨ smart APIï¼Œå½“è¿™é‡Œçš„åŒ¹é…è§„åˆ™ç›¸åŒä¸” use å€¼éƒ½æ˜¯æ•°ç»„æ—¶ï¼Œsmart ä¼šè¯†åˆ«åå¤„ç†</span></span><br><span class=\"line\">      <span class=\"comment\">// å’Œä¸Šè¿° base é…ç½®åˆå¹¶åï¼Œè¿™é‡Œä¼šæ˜¯ &#123;test: /\\.js$/, use: ['babel', 'coffee'] &#125;</span></span><br><span class=\"line\">      <span class=\"comment\">// å¦‚æœè¿™é‡Œ use çš„å€¼ç”¨çš„æ˜¯å­—ç¬¦ä¸²æˆ–è€…å¯¹è±¡çš„è¯ï¼Œé‚£ä¹ˆä¼šæ›¿æ¢æ‰åŸæœ¬çš„è§„åˆ™ use çš„å€¼</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        use: [<span class=\"string\">'coffee'</span>],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"comment\">// plugins è¿™é‡Œçš„æ•°ç»„ä¼šå’Œ base ä¸­çš„ plugins æ•°ç»„è¿›è¡Œåˆå¹¶</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123;</span><br><span class=\"line\">      <span class=\"string\">'process.env.NODE_ENV'</span>: <span class=\"built_in\">JSON</span>.stringify(process.env.NODE_ENV),</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">  ],</span><br><span class=\"line\">&#125;)ï¼›</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>å¯è§ <code>webpack-merge</code> æä¾›çš„ <code>smart</code> æ–¹æ³•ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´åŠ è½»æ¾åœ°å¤„ç† <code>loader</code> é…ç½®çš„åˆå¹¶ã€‚<code>webpack-merge</code> è¿˜æœ‰å…¶ä»– <code>API</code> å¯ä»¥ç”¨äºè‡ªå®šä¹‰åˆå¹¶è¡Œä¸º</p>\n</blockquote>\n<h4 id=\"å®Œæ•´ä»£ç -1\"><a href=\"#å®Œæ•´ä»£ç -1\" class=\"headerlink\" title=\"å®Œæ•´ä»£ç \"></a>å®Œæ•´ä»£ç </h4><blockquote>\n<p><code>webpack.config.js</code></p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">env, argv</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> argv.mode === <span class=\"string\">'production'</span></span><br><span class=\"line\">    ? <span class=\"built_in\">require</span>(<span class=\"string\">'./configs/webpack.production'</span>)</span><br><span class=\"line\">    : <span class=\"built_in\">require</span>(<span class=\"string\">'./configs/webpack.development'</span>);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>configs/webpack.base.js</code></p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: <span class=\"string\">'./src/index.js'</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'../dist'</span>),</span><br><span class=\"line\">    filename: <span class=\"string\">'[name].js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?/</span>,</span><br><span class=\"line\">        include: [path.resolve(__dirname, <span class=\"string\">'../src'</span>)],</span><br><span class=\"line\">        use: <span class=\"string\">'babel-loader'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif)$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'file-loader'</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      filename: <span class=\"string\">'index.html'</span>, <span class=\"comment\">// é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„</span></span><br><span class=\"line\">      template: <span class=\"string\">'src/index.html'</span> <span class=\"comment\">// é…ç½®æ–‡ä»¶æ¨¡æ¿</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>configs/webpack.development.js</code></p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> merge = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-merge'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> baseConfig = <span class=\"built_in\">require</span>(<span class=\"string\">'./webpack.base'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> config = merge.smart(baseConfig, &#123;</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        enforce: <span class=\"string\">'pre'</span>,</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">'eslint-loader'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">        use: [<span class=\"string\">'style-loader'</span>, <span class=\"string\">'css-loader'</span>, <span class=\"string\">'less-loader'</span>]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  devServer: &#123;</span><br><span class=\"line\">    port: <span class=\"string\">'1234'</span>,</span><br><span class=\"line\">    before(app) &#123;</span><br><span class=\"line\">      app.get(<span class=\"string\">'/api/test.json'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res</span>) </span>&#123;</span><br><span class=\"line\">        res.json(&#123; <span class=\"attr\">code</span>: <span class=\"number\">200</span>, <span class=\"attr\">message</span>: <span class=\"string\">'hello world'</span> &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">config.plugins.push(</span><br><span class=\"line\">  <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123;</span><br><span class=\"line\">    __DEV__: <span class=\"built_in\">JSON</span>.stringify(<span class=\"literal\">true</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = config;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><code>configs/webpack.production.js</code></p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> merge = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack-merge'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> baseConfig = <span class=\"built_in\">require</span>(<span class=\"string\">'./webpack.base'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> config = merge.smart(baseConfig, &#123;</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">              loader: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">              options: &#123;</span><br><span class=\"line\">                minimize: <span class=\"literal\">true</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"string\">'less-loader'</span></span><br><span class=\"line\">          ]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">config.plugins.push(<span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">'[name].css'</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = config;</span><br></pre></td></tr></table></figure>\n<h3 id=\"æ¨¡å—çƒ­æ›¿æ¢æé«˜å¼€å‘æ•ˆç‡\"><a href=\"#æ¨¡å—çƒ­æ›¿æ¢æé«˜å¼€å‘æ•ˆç‡\" class=\"headerlink\" title=\"æ¨¡å—çƒ­æ›¿æ¢æé«˜å¼€å‘æ•ˆç‡\"></a>æ¨¡å—çƒ­æ›¿æ¢æé«˜å¼€å‘æ•ˆç‡</h3><blockquote>\n<p><code>HMR</code> å…¨ç§°æ˜¯ <code>Hot Module Replacement</code>ï¼Œå³æ¨¡å—çƒ­æ›¿æ¢ã€‚åœ¨è¿™ä¸ªæ¦‚å¿µå‡ºæ¥ä¹‹å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿‡ <code>Hot Reloading</code>ï¼Œå½“ä»£ç å˜æ›´æ—¶é€šçŸ¥æµè§ˆå™¨åˆ·æ–°é¡µé¢ï¼Œä»¥é¿å…é¢‘ç¹æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨é¡µé¢ã€‚HMR å¯ä»¥ç†è§£ä¸ºå¢å¼ºç‰ˆçš„ <code>Hot Reloading</code>ï¼Œä½†ä¸ç”¨æ•´ä¸ªé¡µé¢åˆ·æ–°ï¼Œè€Œæ˜¯å±€éƒ¨æ›¿æ¢æ‰éƒ¨åˆ†æ¨¡å—ä»£ç å¹¶ä¸”ä½¿å…¶ç”Ÿæ•ˆï¼Œå¯ä»¥çœ‹åˆ°ä»£ç å˜æ›´åçš„æ•ˆæœã€‚æ‰€ä»¥ï¼Œ<code>HMR</code> æ—¢é¿å…äº†é¢‘ç¹æ‰‹åŠ¨åˆ·æ–°é¡µé¢ï¼Œä¹Ÿå‡å°‘äº†é¡µé¢åˆ·æ–°æ—¶çš„ç­‰å¾…ï¼Œå¯ä»¥æå¤§åœ°æé«˜å‰ç«¯é¡µé¢å¼€å‘æ•ˆç‡â€¦</p>\n</blockquote>\n<h4 id=\"é…ç½®ä½¿ç”¨-HMR\"><a href=\"#é…ç½®ä½¿ç”¨-HMR\" class=\"headerlink\" title=\"é…ç½®ä½¿ç”¨ HMR\"></a>é…ç½®ä½¿ç”¨ HMR</h4><blockquote>\n<p><code>HMR</code> æ˜¯ <code>webpack</code> æä¾›çš„éå¸¸æœ‰ç”¨çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œè·Ÿæˆ‘ä»¬ä¹‹å‰æåˆ°çš„ä¸€æ ·ï¼Œå®‰è£…å¥½ <code>webpack-dev-server</code>ï¼Œ æ·»åŠ ä¸€äº›ç®€å•çš„é…ç½®ï¼Œå³åœ¨ <code>webpack</code> çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¯ç”¨ <code>HMR</code> éœ€è¦çš„ä¸¤ä¸ªæ’ä»¶</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  devServer: &#123;</span><br><span class=\"line\">    hot: <span class=\"literal\">true</span> <span class=\"comment\">// dev server çš„é…ç½®è¦å¯åŠ¨ hotï¼Œæˆ–è€…åœ¨å‘½ä»¤è¡Œä¸­å¸¦å‚æ•°å¼€å¯</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.NamedModulesPlugin(), <span class=\"comment\">// ç”¨äºå¯åŠ¨ HMR æ—¶å¯ä»¥æ˜¾ç¤ºæ¨¡å—çš„ç›¸å¯¹è·¯å¾„</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.HotModuleReplacementPlugin() <span class=\"comment\">// Hot Module Replacement çš„æ’ä»¶</span></span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"module-hot-å¸¸è§çš„-API\"><a href=\"#module-hot-å¸¸è§çš„-API\" class=\"headerlink\" title=\"module.hot å¸¸è§çš„ API\"></a>module.hot å¸¸è§çš„ API</h4><blockquote>\n<p>å‰é¢ <code>HMR</code> å®ç°éƒ¨åˆ†å·²ç»è®²è§£äº†å®ç° HMR æ¥å£çš„é‡è¦æ€§ï¼Œä¸‹é¢æ¥çœ‹çœ‹å¸¸è§çš„ <code>module.hot</code> <code>API</code> æœ‰å“ªäº›ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨</p>\n</blockquote>\n<ul>\n<li><code>module.hot.accept</code> æ–¹æ³•æŒ‡å®šåœ¨åº”ç”¨ç‰¹å®šä»£ç æ¨¡å—æ›´æ–°æ—¶æ‰§è¡Œç›¸åº”çš„ <code>callback</code>ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–è€…æ•°ç»„ï¼Œå¦‚</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"built_in\">module</span>.hot) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">module</span>.hot.accept([<span class=\"string\">'./bar.js'</span>, <span class=\"string\">'./index.css'</span>], () =&gt; &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ... è¿™æ ·å½“ bar.js æˆ–è€… index.css æ›´æ–°æ—¶éƒ½ä¼šæ‰§è¡Œè¯¥å‡½æ•°</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>module.hot.decline</code> å¯¹äºæŒ‡å®šçš„ä»£ç æ¨¡å—ï¼Œæ‹’ç»è¿›è¡Œæ¨¡å—ä»£ç çš„æ›´æ–°ï¼Œè¿›å…¥æ›´æ–°å¤±è´¥çŠ¶æ€ï¼Œå¦‚ <code>module.hot.decline(&#39;./bar.js&#39;)</code>ã€‚è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒå°‘ç”¨åˆ°</li>\n<li><code>module.hot.dispose</code> ç”¨äºæ·»åŠ ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œåœ¨å½“å‰æ¨¡å—ä»£ç è¢«æ›¿æ¢æ—¶è¿è¡Œè¯¥å‡½æ•°ï¼Œä¾‹å¦‚</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"built_in\">module</span>.hot) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">module</span>.hot.dispose(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// data ç”¨äºä¼ é€’æ•°æ®ï¼Œå¦‚æœæœ‰éœ€è¦ä¼ é€’çš„æ•°æ®å¯ä»¥æŒ‚åœ¨ data å¯¹è±¡ä¸Šï¼Œç„¶ååœ¨æ¨¡å—ä»£ç æ›´æ–°åå¯ä»¥é€šè¿‡ module.hot.data æ¥è·å–</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>module.hot.accept</code> é€šå¸¸ç”¨äºæŒ‡å®šå½“å‰ä¾èµ–çš„æŸä¸ªæ¨¡å—æ›´æ–°æ—¶éœ€è¦åšçš„å¤„ç†ï¼Œå¦‚æœæ˜¯å½“å‰æ¨¡å—æ›´æ–°æ—¶éœ€è¦å¤„ç†çš„åŠ¨ä½œï¼Œä½¿ç”¨ <code>module.hot.dispose</code> ä¼šæ›´åŠ å®¹æ˜“æ–¹ä¾¿</li>\n<li><code>module.hot.removeDisposeHandler</code> ç”¨äºç§»é™¤ <code>dispose</code> æ–¹æ³•æ·»åŠ çš„ <code>callback</code></li>\n</ul>\n<h3 id=\"å›¾ç‰‡åŠ è½½ä¼˜åŒ–\"><a href=\"#å›¾ç‰‡åŠ è½½ä¼˜åŒ–\" class=\"headerlink\" title=\"å›¾ç‰‡åŠ è½½ä¼˜åŒ–\"></a>å›¾ç‰‡åŠ è½½ä¼˜åŒ–</h3><h4 id=\"CSS-Sprites\"><a href=\"#CSS-Sprites\" class=\"headerlink\" title=\"CSS Sprites\"></a>CSS Sprites</h4><ul>\n<li>å¦‚æœä½ ä½¿ç”¨çš„ <code>webpack 3.x</code> ç‰ˆæœ¬ï¼Œéœ€è¦ <code>CSS Sprites</code> çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ <code>webpack-spritesmith</code> æˆ–è€… <code>sprite-webpack-plugin</code>ã€‚</li>\n<li>æˆ‘ä»¬ä»¥ <code>webpack-spritesmith</code> ä¸ºä¾‹ï¼Œå…ˆå®‰è£…ä¾èµ–â€¦</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">  loaders: [</span><br><span class=\"line\">    <span class=\"comment\">// ... è¿™é‡Œéœ€è¦æœ‰å¤„ç†å›¾ç‰‡çš„ loaderï¼Œå¦‚ file-loader</span></span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">resolve: &#123;</span><br><span class=\"line\">  modules: [</span><br><span class=\"line\">    <span class=\"string\">'node_modules'</span>,</span><br><span class=\"line\">    <span class=\"string\">'spritesmith-generated'</span>, <span class=\"comment\">// webpack-spritesmith ç”Ÿæˆæ‰€éœ€æ–‡ä»¶çš„ç›®å½•</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">plugins: [</span><br><span class=\"line\">  <span class=\"keyword\">new</span> SpritesmithPlugin(&#123;</span><br><span class=\"line\">    src: &#123;</span><br><span class=\"line\">      cwd: path.resolve(__dirname, <span class=\"string\">'src/ico'</span>), <span class=\"comment\">// å¤šä¸ªå›¾ç‰‡æ‰€åœ¨çš„ç›®å½•</span></span><br><span class=\"line\">      glob: <span class=\"string\">'*.png'</span> <span class=\"comment\">// åŒ¹é…å›¾ç‰‡çš„è·¯å¾„</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    target: &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ç”Ÿæˆæœ€ç»ˆå›¾ç‰‡çš„è·¯å¾„</span></span><br><span class=\"line\">      image: path.resolve(__dirname, <span class=\"string\">'src/spritesmith-generated/sprite.png'</span>),</span><br><span class=\"line\">      <span class=\"comment\">// ç”Ÿæˆæ‰€éœ€ SASS/LESS/Stylus mixins ä»£ç ï¼Œæˆ‘ä»¬ä½¿ç”¨ Stylus é¢„å¤„ç†å™¨åšä¾‹å­</span></span><br><span class=\"line\">      css: path.resolve(__dirname, <span class=\"string\">'src/spritesmith-generated/sprite.styl'</span>),</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    apiOptions: &#123;</span><br><span class=\"line\">      cssImageRef: <span class=\"string\">\"~sprite.png\"</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;),</span><br><span class=\"line\">],</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>åœ¨ä½ éœ€è¦çš„æ ·å¼ä»£ç ä¸­å¼•å…¥ <code>sprite.styl</code> åè°ƒç”¨éœ€è¦çš„ <code>mixins</code> å³å¯</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@import &apos;~sprite.styl&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">.close-button</span><br><span class=\"line\">    sprite($close)</span><br><span class=\"line\">.open-button</span><br><span class=\"line\">    sprite($open)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ <code>webpack 4.x</code>ï¼Œä½ éœ€è¦é…åˆä½¿ç”¨ <code>postcss</code> å’Œ <code>postcss-sprites</code>ï¼Œæ‰èƒ½å®ç° <code>CSS Sprites</code> çš„ç›¸å…³æ„å»º</p>\n</blockquote>\n<h4 id=\"å›¾ç‰‡å‹ç¼©\"><a href=\"#å›¾ç‰‡å‹ç¼©\" class=\"headerlink\" title=\"å›¾ç‰‡å‹ç¼©\"></a>å›¾ç‰‡å‹ç¼©</h4><ul>\n<li>åœ¨ä¸€èˆ¬çš„é¡¹ç›®ä¸­ï¼Œå›¾ç‰‡èµ„æºä¼šå å‰ç«¯èµ„æºçš„å¾ˆå¤§ä¸€éƒ¨åˆ†ï¼Œæ—¢ç„¶ä»£ç éƒ½è¿›è¡Œå‹ç¼©äº†ï¼Œå å¤§å¤´çš„å›¾ç‰‡å°±æ›´ä¸ç”¨è¯´äº†</li>\n<li>æˆ‘ä»¬ä¹‹å‰æåŠä½¿ç”¨ <code>file-loader</code> æ¥å¤„ç†å›¾ç‰‡æ–‡ä»¶ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å†æ·»åŠ ä¸€ä¸ª <code>image-webpack-loader</code> æ¥å‹ç¼©å›¾ç‰‡æ–‡ä»¶ã€‚ç®€å•çš„é…ç½®å¦‚ä¸‹â€¦</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/.*\\.(gif|png|jpe?g|svg|webp)$/i</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'file-loader'</span>,</span><br><span class=\"line\">            options: &#123;&#125;</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'image-webpack-loader'</span>,</span><br><span class=\"line\">            options: &#123;</span><br><span class=\"line\">              mozjpeg: &#123; <span class=\"comment\">// å‹ç¼© jpeg çš„é…ç½®</span></span><br><span class=\"line\">                progressive: <span class=\"literal\">true</span>,</span><br><span class=\"line\">                quality: <span class=\"number\">65</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              optipng: &#123; <span class=\"comment\">// ä½¿ç”¨ imagemin-optipng å‹ç¼© pngï¼Œenable: false ä¸ºå…³é—­</span></span><br><span class=\"line\">                enabled: <span class=\"literal\">false</span>,</span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              pngquant: &#123; <span class=\"comment\">// ä½¿ç”¨ imagemin-pngquant å‹ç¼© png</span></span><br><span class=\"line\">                quality: <span class=\"string\">'65-90'</span>,</span><br><span class=\"line\">                speed: <span class=\"number\">4</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              gifsicle: &#123; <span class=\"comment\">// å‹ç¼© gif çš„é…ç½®</span></span><br><span class=\"line\">                interlaced: <span class=\"literal\">false</span>,</span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              webp: &#123; <span class=\"comment\">// å¼€å¯ webpï¼Œä¼šæŠŠ jpg å’Œ png å›¾ç‰‡å‹ç¼©ä¸º webp æ ¼å¼</span></span><br><span class=\"line\">                quality: <span class=\"number\">75</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"ä½¿ç”¨-DataURL\"><a href=\"#ä½¿ç”¨-DataURL\" class=\"headerlink\" title=\"ä½¿ç”¨ DataURL\"></a>ä½¿ç”¨ DataURL</h4><blockquote>\n<p>æœ‰çš„æ—¶å€™æˆ‘ä»¬çš„é¡¹ç›®ä¸­ä¼šæœ‰ä¸€äº›å¾ˆå°çš„å›¾ç‰‡ï¼Œå› ä¸ºæŸäº›ç¼˜æ•…å¹¶ä¸æƒ³ä½¿ç”¨ <code>CSS Sprites</code> çš„æ–¹å¼æ¥å¤„ç†ï¼ˆè­¬å¦‚å°å›¾ç‰‡ä¸å¤šï¼Œå› æ­¤å¼•å…¥ CSS Sprites æ„Ÿè§‰éº»çƒ¦ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨ webpack ä¸­ä½¿ç”¨ <code>url-loader</code> æ¥å¤„ç†è¿™äº›å¾ˆå°çš„å›¾ç‰‡â€¦</p>\n</blockquote>\n<ul>\n<li><code>url-loader</code> å’Œ <code>file-loader</code> çš„åŠŸèƒ½ç±»ä¼¼ï¼Œä½†æ˜¯åœ¨å¤„ç†æ–‡ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡é…ç½®æŒ‡å®šä¸€ä¸ªå¤§å°ï¼Œå½“æ–‡ä»¶å°äºè¿™ä¸ªé…ç½®å€¼æ—¶ï¼Œ<code>url-loader</code> ä¼šå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª <code>base64</code> ç¼–ç çš„ <code>DataURL</code>ï¼Œé…ç½®å¦‚ä¸‹</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif)$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'url-loader'</span>,</span><br><span class=\"line\">            options: &#123;</span><br><span class=\"line\">              limit: <span class=\"number\">8192</span> <span class=\"comment\">// å•ä½æ˜¯ Byteï¼Œå½“æ–‡ä»¶å°äº 8KB æ—¶ä½œä¸º DataURL å¤„ç†</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"ä»£ç å‹ç¼©\"><a href=\"#ä»£ç å‹ç¼©\" class=\"headerlink\" title=\"ä»£ç å‹ç¼©\"></a>ä»£ç å‹ç¼©</h4><ul>\n<li><code>webpack 4.x</code> ç‰ˆæœ¬è¿è¡Œæ—¶ï¼Œ<code>mode</code> ä¸º <code>production</code> å³ä¼šå¯åŠ¨å‹ç¼© <code>JS</code> ä»£ç çš„æ’ä»¶ï¼Œè€Œå¯¹äº <code>webpack</code> <code>3.x</code>ï¼Œä½¿ç”¨å‹ç¼© <code>JS</code> ä»£ç æ’ä»¶çš„æ–¹å¼ä¹Ÿå·²ç»ä»‹ç»è¿‡äº†ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå‹ç¼© <code>JS</code> ä»£ç åŸºæœ¬æ˜¯ä¸€ä¸ªå¿…ä¸å¯å°‘çš„æ­¥éª¤ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å° <code>JavaScript</code> çš„ä½“ç§¯ï¼Œç›¸å…³å†…å®¹è¿™é‡Œä¸å†èµ˜è¿°ã€‚</li>\n<li>é™¤äº† JS ä»£ç ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¸€èˆ¬è¿˜éœ€è¦ HTML å’Œ CSS æ–‡ä»¶ï¼Œè¿™ä¸¤ç§æ–‡ä»¶ä¹Ÿéƒ½æ˜¯å¯ä»¥å‹ç¼©çš„ï¼Œè™½ç„¶ä¸åƒ JS çš„å‹ç¼©é‚£ä¹ˆå½»åº•ï¼ˆæ›¿æ¢æ‰é•¿å˜é‡ç­‰ï¼‰ï¼Œåªèƒ½ç§»é™¤ç©ºæ ¼æ¢è¡Œç­‰æ— ç”¨å­—ç¬¦ï¼Œä½†ä¹Ÿèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°æ–‡ä»¶å¤§å°ã€‚åœ¨ webpack ä¸­çš„é…ç½®ä½¿ç”¨ä¹Ÿä¸æ˜¯ç‰¹åˆ«éº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¹Ÿä¼šä½¿ç”¨ã€‚</li>\n<li>å¯¹äº HTML æ–‡ä»¶ï¼Œä¹‹å‰ä»‹ç»çš„ <code>html-webpack-plugin</code> æ’ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆéœ€è¦çš„ HTML å¹¶å¯¹å…¶è¿›è¡Œå‹ç¼©â€¦</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      filename: <span class=\"string\">'index.html'</span>, <span class=\"comment\">// é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„</span></span><br><span class=\"line\">      template: <span class=\"string\">'assets/index.html'</span>, <span class=\"comment\">// é…ç½®æ–‡ä»¶æ¨¡æ¿</span></span><br><span class=\"line\">      minify: &#123;</span><br><span class=\"line\">        <span class=\"comment\">// å‹ç¼© HTML çš„é…ç½®</span></span><br><span class=\"line\">        minifyCSS: <span class=\"literal\">true</span>, <span class=\"comment\">// å‹ç¼© HTML ä¸­å‡ºç°çš„ CSS ä»£ç </span></span><br><span class=\"line\">        minifyJS: <span class=\"literal\">true</span> <span class=\"comment\">// å‹ç¼© HTML ä¸­å‡ºç°çš„ JS ä»£ç </span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>å¦‚ä¸Šï¼Œä½¿ç”¨ <code>minify</code> å­—æ®µé…ç½®å°±å¯ä»¥ä½¿ç”¨ <code>HTML</code> å‹ç¼©ï¼Œè¿™ä¸ªæ’ä»¶æ˜¯ä½¿ç”¨ <code>html-minifier</code> æ¥å®ç° <code>HTML</code> ä»£ç å‹ç¼©çš„ï¼Œ<code>minify</code> ä¸‹çš„é…ç½®é¡¹ç›´æ¥é€ä¼ ç»™ <code>html-minifier</code>ï¼Œé…ç½®é¡¹å‚è€ƒ <code>html-minifier</code> æ–‡æ¡£å³å¯ã€‚</li>\n<li>å¯¹äº CSS æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¹‹å‰ä»‹ç»è¿‡ç”¨æ¥å¤„ç† CSS æ–‡ä»¶çš„ <code>css-loader</code>ï¼Œä¹Ÿæä¾›äº†å‹ç¼© CSS ä»£ç çš„åŠŸèƒ½ï¼š</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css/</span>,</span><br><span class=\"line\">        include: [path.resolve(__dirname, <span class=\"string\">'src'</span>)],</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">            options: &#123;</span><br><span class=\"line\">              minimize: <span class=\"literal\">true</span> <span class=\"comment\">// ä½¿ç”¨ css çš„å‹ç¼©åŠŸèƒ½</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>åœ¨ <code>css-loader</code> çš„é€‰é¡¹ä¸­é…ç½® <code>minimize</code> å­—æ®µä¸º <code>true</code> æ¥ä½¿ç”¨ <code>CSS</code> å‹ç¼©ä»£ç çš„åŠŸèƒ½ã€‚<code>css-loader</code> æ˜¯ä½¿ç”¨ <code>cssnano</code> æ¥å‹ç¼©ä»£ç çš„ï¼Œ<code>minimize</code> å­—æ®µä¹Ÿå¯ä»¥é…ç½®ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œæ¥å°†ç›¸å…³é…ç½®ä¼ é€’ç»™ <code>cssnano</code></p>\n</blockquote>\n<h3 id=\"åˆ†ç¦»ä»£ç æ–‡ä»¶\"><a href=\"#åˆ†ç¦»ä»£ç æ–‡ä»¶\" class=\"headerlink\" title=\"åˆ†ç¦»ä»£ç æ–‡ä»¶\"></a>åˆ†ç¦»ä»£ç æ–‡ä»¶</h3><ul>\n<li>å…³äºåˆ†ç¦» CSS æ–‡ä»¶è¿™ä¸ªä¸»é¢˜ï¼Œä¹‹å‰åœ¨ä»‹ç»å¦‚ä½•æ­å»ºåŸºæœ¬çš„å‰ç«¯å¼€å‘ç¯å¢ƒæ—¶æœ‰æåŠï¼Œåœ¨ <code>webpack</code> ä¸­ä½¿ç”¨ <code>extract-text-webpack-plugin</code> æ’ä»¶å³å¯ã€‚</li>\n<li>å…ˆç®€å•è§£é‡Šä¸€ä¸‹ä¸ºä½•è¦æŠŠ CSS æ–‡ä»¶åˆ†ç¦»å‡ºæ¥ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¸€èµ·æ‰“åŒ…åœ¨ JS ä¸­ã€‚æœ€ä¸»è¦çš„åŸå› æ˜¯æˆ‘ä»¬å¸Œæœ›æ›´å¥½åœ°åˆ©ç”¨ç¼“å­˜ã€‚</li>\n<li>å‡è®¾æˆ‘ä»¬åŸæœ¬é¡µé¢çš„é™æ€èµ„æºéƒ½æ‰“åŒ…æˆä¸€ä¸ª JS æ–‡ä»¶ï¼ŒåŠ è½½é¡µé¢æ—¶è™½ç„¶åªéœ€è¦åŠ è½½ä¸€ä¸ª JS æ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ä»£ç ä¸€æ—¦æ”¹å˜äº†ï¼Œç”¨æˆ·è®¿é—®æ–°çš„é¡µé¢æ—¶å°±éœ€è¦é‡æ–°åŠ è½½ä¸€ä¸ªæ–°çš„ JS æ–‡ä»¶ã€‚æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªæ˜¯å•ç‹¬ä¿®æ”¹äº†æ ·å¼ï¼Œè¿™æ ·ä¹Ÿè¦é‡æ–°åŠ è½½æ•´ä¸ªåº”ç”¨çš„ JS æ–‡ä»¶ï¼Œç›¸å½“ä¸åˆ’ç®—ã€‚</li>\n<li>è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯æˆ‘ä»¬æœ‰å¤šä¸ªé¡µé¢ï¼Œå®ƒä»¬éƒ½å¯ä»¥å…±ç”¨ä¸€éƒ¨åˆ†æ ·å¼ï¼ˆè¿™æ˜¯å¾ˆå¸¸è§çš„ï¼ŒCSS Resetã€åŸºç¡€ç»„ä»¶æ ·å¼ç­‰åŸºæœ¬éƒ½æ˜¯è·¨é¡µé¢é€šç”¨ï¼‰ï¼Œå¦‚æœæ¯ä¸ªé¡µé¢éƒ½å•ç‹¬æ‰“åŒ…ä¸€ä¸ª JS æ–‡ä»¶ï¼Œé‚£ä¹ˆæ¯æ¬¡è®¿é—®é¡µé¢éƒ½ä¼šé‡å¤åŠ è½½åŸæœ¬å¯ä»¥å…±äº«çš„é‚£äº› CSS ä»£ç ã€‚å¦‚æœåˆ†ç¦»å¼€æ¥ï¼Œç¬¬äºŒä¸ªé¡µé¢å°±æœ‰äº† CSS æ–‡ä»¶çš„ç¼“å­˜ï¼Œè®¿é—®é€Ÿåº¦è‡ªç„¶ä¼šåŠ å¿«ã€‚è™½ç„¶å¯¹ç¬¬ä¸€ä¸ªé¡µé¢æ¥è¯´å¤šäº†ä¸€ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯å¯¹éšåçš„é¡µé¢æ¥è¯´ï¼Œç¼“å­˜å¸¦æ¥çš„é€Ÿåº¦æå‡ç›¸å¯¹æ›´åŠ å¯è§‚</li>\n</ul>\n<blockquote>\n<p><code>3.x</code> ä»¥å‰çš„ç‰ˆæœ¬æ˜¯ä½¿ç”¨ <code>CommonsChunkPlugin</code> æ¥åšä»£ç åˆ†ç¦»çš„ï¼Œè€Œ <code>webpack 4.x</code> åˆ™æ˜¯æŠŠç›¸å…³çš„åŠŸèƒ½åŒ…åˆ°äº† <code>optimize.splitChunks</code> ä¸­ï¼Œç›´æ¥ä½¿ç”¨è¯¥é…ç½®å°±å¯ä»¥å®ç°ä»£ç åˆ†ç¦»ã€‚</p>\n</blockquote>\n<h4 id=\"webpack-4-x-çš„-optimization\"><a href=\"#webpack-4-x-çš„-optimization\" class=\"headerlink\" title=\"webpack 4.x çš„ optimization\"></a>webpack 4.x çš„ optimization</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... webpack é…ç½®</span></span><br><span class=\"line\"></span><br><span class=\"line\">  optimization: &#123;</span><br><span class=\"line\">    splitChunks: &#123;</span><br><span class=\"line\">      chunks: <span class=\"string\">'all'</span> <span class=\"comment\">// æ‰€æœ‰çš„ chunks ä»£ç å…¬å…±çš„éƒ¨åˆ†åˆ†ç¦»å‡ºæ¥æˆä¸ºä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>æˆ‘ä»¬éœ€è¦åœ¨ HTML ä¸­å¼•ç”¨ä¸¤ä¸ªæ„å»ºå‡ºæ¥çš„ JS æ–‡ä»¶ï¼Œå¹¶ä¸” <code>commons.js</code> éœ€è¦åœ¨å…¥å£ä»£ç ä¹‹å‰ã€‚ä¸‹é¢æ˜¯ä¸ªç®€å•çš„ä¾‹å­</p>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"commons.js\"</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"entry.bundle.js\"</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>å¦‚æœä½ ä½¿ç”¨äº† <code>html-webpack-plugin</code>ï¼Œé‚£ä¹ˆå¯¹åº”éœ€è¦çš„ JS æ–‡ä»¶éƒ½ä¼šåœ¨ HTML æ–‡ä»¶ä¸­æ­£ç¡®å¼•ç”¨ï¼Œä¸ç”¨æ‹…å¿ƒã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨ï¼Œé‚£ä¹ˆä½ éœ€è¦ä» <code>stats</code> çš„ <code>entrypoints</code> å±æ€§æ¥è·å–å…¥å£åº”è¯¥å¼•ç”¨å“ªäº› JS æ–‡ä»¶ï¼Œå¯ä»¥å‚è€ƒ Node API äº†è§£å¦‚ä½•ä» stats ä¸­è·å–ä¿¡æ¯</p>\n</blockquote>\n<p><strong>æ˜¾å¼é…ç½®å…±äº«ç±»åº“å¯ä»¥è¿™ä¹ˆæ“ä½œ</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: &#123;</span><br><span class=\"line\">    vendor: [<span class=\"string\">\"react\"</span>, <span class=\"string\">\"lodash\"</span>, <span class=\"string\">\"angular\"</span>, ...], <span class=\"comment\">// æŒ‡å®šå…¬å…±ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹ç±»åº“</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  optimization: &#123;</span><br><span class=\"line\">    splitChunks: &#123;</span><br><span class=\"line\">      cacheGroups: &#123;</span><br><span class=\"line\">        vendor: &#123;</span><br><span class=\"line\">          chunks: <span class=\"string\">\"initial\"</span>,</span><br><span class=\"line\">          test: <span class=\"string\">\"vendor\"</span>,</span><br><span class=\"line\">          name: <span class=\"string\">\"vendor\"</span>, <span class=\"comment\">// ä½¿ç”¨ vendor å…¥å£ä½œä¸ºå…¬å…±éƒ¨åˆ†</span></span><br><span class=\"line\">          enforce: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// ... å…¶ä»–é…ç½®</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æˆ–è€…</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  optimization: &#123;</span><br><span class=\"line\">    splitChunks: &#123;</span><br><span class=\"line\">      cacheGroups: &#123;</span><br><span class=\"line\">        vendor: &#123;</span><br><span class=\"line\">          test: <span class=\"regexp\">/react|angluar|lodash/</span>, <span class=\"comment\">// ç›´æ¥ä½¿ç”¨ test æ¥åšè·¯å¾„åŒ¹é…</span></span><br><span class=\"line\">          chunks: <span class=\"string\">\"initial\"</span>,</span><br><span class=\"line\">          name: <span class=\"string\">\"vendor\"</span>,</span><br><span class=\"line\">          enforce: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æˆ–è€…</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  optimization: &#123;</span><br><span class=\"line\">    splitChunks: &#123;</span><br><span class=\"line\">      cacheGroups: &#123;</span><br><span class=\"line\">        vendor: &#123;</span><br><span class=\"line\">          chunks: <span class=\"string\">\"initial\"</span>,</span><br><span class=\"line\">          test: path.resolve(__dirname, <span class=\"string\">\"node_modules\"</span>) <span class=\"comment\">// è·¯å¾„åœ¨ node_modules ç›®å½•ä¸‹çš„éƒ½ä½œä¸ºå…¬å…±éƒ¨åˆ†</span></span><br><span class=\"line\">          name: <span class=\"string\">\"vendor\"</span>, <span class=\"comment\">// ä½¿ç”¨ vendor å…¥å£ä½œä¸ºå…¬å…±éƒ¨åˆ†</span></span><br><span class=\"line\">          enforce: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>ä¸Šè¿°ç¬¬ä¸€ç§åšæ³•æ˜¯æ˜¾ç¤ºæŒ‡å®šå“ªäº›ç±»åº“ä½œä¸ºå…¬å…±éƒ¨åˆ†ï¼Œç¬¬äºŒç§åšæ³•å®ç°çš„åŠŸèƒ½å·®ä¸å¤šï¼Œåªæ˜¯åˆ©ç”¨äº† test æ¥åšæ¨¡å—è·¯å¾„çš„åŒ¹é…ï¼Œç¬¬ä¸‰ç§åšæ³•æ˜¯æŠŠæ‰€æœ‰åœ¨ node_modules ä¸‹çš„æ¨¡å—ï¼Œå³ä½œä¸ºä¾èµ–å®‰è£…çš„ï¼Œéƒ½ä½œä¸ºå…¬å…±éƒ¨åˆ†ã€‚ä½ å¯ä»¥é’ˆå¯¹é¡¹ç›®æƒ…å†µï¼Œé€‰æ‹©æœ€åˆé€‚çš„åšæ³•</p>\n</blockquote>\n<h4 id=\"webpack-3-x-çš„-CommonsChunkPlugin\"><a href=\"#webpack-3-x-çš„-CommonsChunkPlugin\" class=\"headerlink\" title=\"webpack 3.x çš„ CommonsChunkPlugin\"></a>webpack 3.x çš„ CommonsChunkPlugin</h4><blockquote>\n<p><code>webpack 3.x</code> ä»¥ä¸‹çš„ç‰ˆæœ¬éœ€è¦ç”¨åˆ° webpack è‡ªèº«æä¾›çš„ <code>CommonsChunkPlugin</code> æ’ä»¶ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class=\"line\">      name: <span class=\"string\">'commons'</span>, <span class=\"comment\">// å…¬å…±ä½¿ç”¨çš„ chunk çš„åç§°</span></span><br><span class=\"line\">      filename: <span class=\"string\">'commons.js'</span>, <span class=\"comment\">// å…¬å…± chunk çš„ç”Ÿæˆæ–‡ä»¶å</span></span><br><span class=\"line\">      minChunks: <span class=\"number\">3</span> <span class=\"comment\">// å…¬å…±çš„éƒ¨åˆ†å¿…é¡»è¢« 3 ä¸ª chunk å…±äº«</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>chunk</code> åœ¨è¿™é‡Œæ˜¯æ„å»ºçš„ä¸»å¹²ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ä¸ªå…¥å£å¯¹åº”ä¸€ä¸ª <code>chunk</code>ã€‚</li>\n<li>ä»¥ä¸Šæ’ä»¶é…ç½®åœ¨æ„å»ºåä¼šç”Ÿæˆä¸€ä¸ª <code>commons.js</code> æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å°±æ˜¯ä»£ç ä¸­çš„å…¬å…±éƒ¨åˆ†ã€‚ä¸Šé¢çš„é…ç½®ä¸­ <code>minChunks</code> å­—æ®µä¸º 3ï¼Œè¯¥å­—æ®µçš„æ„æ€æ˜¯å½“ä¸€ä¸ªæ¨¡å—è¢« 3 ä¸ªä»¥ä¸Šçš„ <code>chunk</code> ä¾èµ–æ—¶ï¼Œè¿™ä¸ªæ¨¡å—å°±ä¼šè¢«åˆ’åˆ†åˆ° <code>commons chunk</code> ä¸­å»ã€‚å•ä»è¿™ä¸ªé…ç½®çš„è§’åº¦ä¸Šè®²ï¼Œè¿™ç§æ–¹å¼å¹¶æ²¡æœ‰ <code>4.x</code> çš„ <code>chunks: &quot;all&quot;</code> é‚£ä¹ˆæ–¹ä¾¿ã€‚</li>\n</ul>\n<p><strong>CommonsChunkPlugin ä¹Ÿæ˜¯æ”¯æŒæ˜¾å¼é…ç½®å…±äº«ç±»åº“çš„</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: &#123;</span><br><span class=\"line\">    vendor: [<span class=\"string\">'react'</span>, <span class=\"string\">'react-redux'</span>], <span class=\"comment\">// æŒ‡å®šå…¬å…±ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹ç±»åº“</span></span><br><span class=\"line\">    app: <span class=\"string\">'./src/entry'</span>,</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class=\"line\">      name: <span class=\"string\">'vendor'</span> <span class=\"comment\">// ä½¿ç”¨ vendor å…¥å£ä½œä¸ºå…¬å…±éƒ¨åˆ†</span></span><br><span class=\"line\">      filename: <span class=\"string\">\"vendor.js\"</span>,</span><br><span class=\"line\">      minChunks: <span class=\"literal\">Infinity</span>, <span class=\"comment\">// è¿™ä¸ªé…ç½®ä¼šè®© webpack ä¸å†è‡ªåŠ¨æŠ½ç¦»å…¬å…±æ¨¡å—</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">  ],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>ä¸Šè¿°é…ç½®ä¼šç”Ÿæˆä¸€ä¸ªåä¸º <code>vendor.js</code> çš„å…±äº«ä»£ç æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº† <code>React</code> å’Œ <code>React-Redux</code> åº“çš„ä»£ç ï¼Œå¯ä»¥æä¾›ç»™å¤šä¸ªä¸åŒçš„å…¥å£ä»£ç ä½¿ç”¨ã€‚è¿™é‡Œçš„ <code>minChunks</code> å­—æ®µçš„é…ç½®ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>Infinity</code>ï¼Œå¯ä»¥ç†è§£ä¸º <code>webpack</code> ä¸è‡ªåŠ¨æŠ½ç¦»å…¬å…±æ¨¡å—ã€‚å¦‚æœè¿™é‡Œå’Œä¹‹å‰ä¸€æ ·ä¾æ—§è®¾ç½®ä¸º 3ï¼Œé‚£ä¹ˆè¢« 3 ä¸ªä»¥ä¸Šçš„ <code>chunk</code> ä¾èµ–çš„æ¨¡å—ä¼šå’Œ <code>React</code>ã€<code>React-Redux</code> ä¸€åŒæ‰“åŒ…è¿› <code>vendor</code>ï¼Œè¿™æ ·å°±å¤±å»æ˜¾å¼æŒ‡å®šçš„æ„ä¹‰äº†ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>minChunks</code> å…¶å®è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">minChunks: <span class=\"function\">(<span class=\"params\"><span class=\"built_in\">module</span>, count</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">module</span>, count);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>è¯¥å‡½æ•°åœ¨åˆ†ææ¯ä¸€ä¸ªä¾èµ–çš„æ—¶å€™ä¼šè¢«è°ƒç”¨ï¼Œä¼ å…¥å½“å‰ä¾èµ–æ¨¡å—çš„ä¿¡æ¯ <code>module</code>ï¼Œä»¥åŠå·²ç»è¢«ä½œä¸ºå…¬å…±æ¨¡å—çš„æ•°é‡ <code>count</code>ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°ä¸­é’ˆå¯¹æ¯ä¸€ä¸ªæ¨¡å—åšæ›´åŠ ç²¾ç»†åŒ–çš„æ§åˆ¶ã€‚çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">minChunks: <span class=\"function\">(<span class=\"params\"><span class=\"built_in\">module</span>, count</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">module</span>.context &amp;&amp; <span class=\"built_in\">module</span>.context.includes(<span class=\"string\">\"node_modules\"</span>);</span><br><span class=\"line\">  <span class=\"comment\">// node_modules ç›®å½•ä¸‹çš„æ¨¡å—éƒ½ä½œä¸ºå…¬å…±éƒ¨åˆ†ï¼Œæ•ˆæœå°±å¦‚åŒ webpack 4.x ä¸­çš„ test: path.resolve(__dirname, \"node_modules\")</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<ul>\n<li>æ›´å¤šä½¿ç”¨ <code>CommonsChunkPlugin</code> çš„é…ç½®å‚è€ƒå®˜æ–¹æ–‡æ¡£ <code>commons-chunk-plugin</code>ã€‚</li>\n</ul>\n<h3 id=\"è¿›ä¸€æ­¥æ§åˆ¶-JS-å¤§å°\"><a href=\"#è¿›ä¸€æ­¥æ§åˆ¶-JS-å¤§å°\" class=\"headerlink\" title=\"è¿›ä¸€æ­¥æ§åˆ¶ JS å¤§å°\"></a>è¿›ä¸€æ­¥æ§åˆ¶ JS å¤§å°</h3><h4 id=\"æŒ‰éœ€åŠ è½½æ¨¡å—\"><a href=\"#æŒ‰éœ€åŠ è½½æ¨¡å—\" class=\"headerlink\" title=\"æŒ‰éœ€åŠ è½½æ¨¡å—\"></a>æŒ‰éœ€åŠ è½½æ¨¡å—</h4><blockquote>\n<p>åœ¨ webpack çš„æ„å»ºç¯å¢ƒä¸­ï¼Œè¦æŒ‰éœ€åŠ è½½ä»£ç æ¨¡å—å¾ˆç®€å•ï¼Œéµå¾ª ES æ ‡å‡†çš„åŠ¨æ€åŠ è½½è¯­æ³• <code>dynamic-import</code> æ¥ç¼–å†™ä»£ç å³å¯ï¼Œ<code>webpack</code> ä¼šè‡ªåŠ¨å¤„ç†ä½¿ç”¨è¯¥è¯­æ³•ç¼–å†™çš„æ¨¡å—</p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// import ä½œä¸ºä¸€ä¸ªæ–¹æ³•ä½¿ç”¨ï¼Œä¼ å…¥æ¨¡å—åå³å¯ï¼Œè¿”å›ä¸€ä¸ª promise æ¥è·å–æ¨¡å—æš´éœ²çš„å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"comment\">// æ³¨é‡Š webpackChunkName: \"lodash\" å¯ä»¥ç”¨äºæŒ‡å®š chunk çš„åç§°ï¼Œåœ¨è¾“å‡ºæ–‡ä»¶æ—¶æœ‰ç”¨</span></span><br><span class=\"line\"><span class=\"keyword\">import</span>(<span class=\"comment\">/* webpackChunkName: \"lodash\" */</span> <span class=\"string\">'lodash'</span>).then(<span class=\"function\">(<span class=\"params\">_</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(_.lash([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>])) <span class=\"comment\">// æ‰“å° 3</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<ul>\n<li>æ³¨æ„ä¸€ä¸‹ï¼Œå¦‚æœä½ ä½¿ç”¨äº† <code>Babel</code> çš„è¯ï¼Œè¿˜éœ€è¦ <code>Syntax Dynamic Import</code> è¿™ä¸ª <code>Babel</code> æ’ä»¶æ¥å¤„ç† <code>import()</code> è¿™ç§è¯­æ³•ã€‚</li>\n<li>ç”±äºåŠ¨æ€åŠ è½½ä»£ç æ¨¡å—çš„è¯­æ³•ä¾èµ–äº <code>promise</code>ï¼Œå¯¹äºä½ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼Œéœ€è¦æ·»åŠ  <code>promise</code> çš„ <code>polyfill</code> åæ‰èƒ½ä½¿ç”¨ã€‚</li>\n<li>å¦‚ä¸Šçš„ä»£ç ï¼Œwebpack æ„å»ºæ—¶ä¼šè‡ªåŠ¨æŠŠ <code>lodash</code> æ¨¡å—åˆ†ç¦»å‡ºæ¥ï¼Œå¹¶ä¸”åœ¨ä»£ç å†…éƒ¨å®ç°åŠ¨æ€åŠ è½½ <code>lodash</code> çš„åŠŸèƒ½ã€‚åŠ¨æ€åŠ è½½ä»£ç æ—¶ä¾èµ–äºç½‘ç»œï¼Œå…¶æ¨¡å—å†…å®¹ä¼šå¼‚æ­¥è¿”å›ï¼Œæ‰€ä»¥ import æ–¹æ³•æ˜¯è¿”å›ä¸€ä¸ª <code>promise</code> æ¥è·å–åŠ¨æ€åŠ è½½çš„æ¨¡å—å†…å®¹ã€‚</li>\n<li><code>import</code> åé¢çš„æ³¨é‡Š <code>webpackChunkName: &quot;lodash&quot;</code> ç”¨äºå‘ŠçŸ¥ <code>webpack</code> æ‰€è¦åŠ¨æ€åŠ è½½æ¨¡å—çš„åç§°ã€‚æˆ‘ä»¬åœ¨ webpack é…ç½®ä¸­æ·»åŠ ä¸€ä¸ª <code>output.chunkFilename</code> çš„é…ç½®â€¦</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">output: &#123;</span><br><span class=\"line\">  path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">  filename: <span class=\"string\">'[name].[hash:8].js'</span>,</span><br><span class=\"line\">  chunkFilename: <span class=\"string\">'[name].[hash:8].js'</span> <span class=\"comment\">// æŒ‡å®šåˆ†ç¦»å‡ºæ¥çš„ä»£ç æ–‡ä»¶çš„åç§°</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>è¿™æ ·å°±å¯ä»¥æŠŠåˆ†ç¦»å‡ºæ¥çš„æ–‡ä»¶åç§°ç”¨ lodash æ ‡è¯†äº†ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n</blockquote>\n<p><img src=\"https://upload-images.jianshu.io/upload_images/1480597-ae36b6816feed422.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"image.png\"></p>\n<blockquote>\n<p>å¦‚æœæ²¡æœ‰æ·»åŠ æ³¨é‡Š <code>webpackChunkName: &quot;lodash&quot; ä»¥åŠ output.chunkFilename</code> é…ç½®ï¼Œé‚£ä¹ˆåˆ†ç¦»å‡ºæ¥çš„æ–‡ä»¶åç§°ä¼šä»¥ç®€å•æ•°å­—çš„æ–¹å¼æ ‡è¯†ï¼Œä¸ä¾¿äºè¯†åˆ«</p>\n</blockquote>\n<h4 id=\"ä»¥ä¸Šå®Œæ•´ç¤ºä¾‹ä»£ç \"><a href=\"#ä»¥ä¸Šå®Œæ•´ç¤ºä¾‹ä»£ç \" class=\"headerlink\" title=\"ä»¥ä¸Šå®Œæ•´ç¤ºä¾‹ä»£ç \"></a>ä»¥ä¸Šå®Œæ•´ç¤ºä¾‹ä»£ç </h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: <span class=\"string\">'./src/index.js'</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">    filename: <span class=\"string\">'[name].js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.jsx?/</span>,</span><br><span class=\"line\">        include: [path.resolve(__dirname, <span class=\"string\">'src'</span>)],</span><br><span class=\"line\">        use: <span class=\"string\">'babel-loader'</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">        use: ExtractTextPlugin.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: [<span class=\"string\">'css-loader'</span>, <span class=\"string\">'postcss-loader'</span>, <span class=\"string\">'less-loader'</span>]</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif)$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'url-loader'</span>,</span><br><span class=\"line\">            options: &#123;</span><br><span class=\"line\">              limit: <span class=\"number\">8192</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'image-webpack-loader'</span>,</span><br><span class=\"line\">            options: &#123;</span><br><span class=\"line\">              mozjpeg: &#123;</span><br><span class=\"line\">                <span class=\"comment\">// å‹ç¼© jpeg çš„é…ç½®</span></span><br><span class=\"line\">                progressive: <span class=\"literal\">true</span>,</span><br><span class=\"line\">                quality: <span class=\"number\">65</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              optipng: &#123;</span><br><span class=\"line\">                <span class=\"comment\">// ä½¿ç”¨ imagemin-optipng å‹ç¼© pngï¼Œenable: false ä¸ºå…³é—­</span></span><br><span class=\"line\">                enabled: <span class=\"literal\">false</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              pngquant: &#123;</span><br><span class=\"line\">                <span class=\"comment\">// ä½¿ç”¨ imagemin-pngquant å‹ç¼© png</span></span><br><span class=\"line\">                quality: <span class=\"string\">'65-90'</span>,</span><br><span class=\"line\">                speed: <span class=\"number\">4</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              gifsicle: &#123;</span><br><span class=\"line\">                <span class=\"comment\">// å‹ç¼© gif çš„é…ç½®</span></span><br><span class=\"line\">                interlaced: <span class=\"literal\">false</span></span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              webp: &#123;</span><br><span class=\"line\">                <span class=\"comment\">// å¼€å¯ webpï¼Œä¼šæŠŠ jpg å’Œ png å›¾ç‰‡å‹ç¼©ä¸º webp æ ¼å¼</span></span><br><span class=\"line\">                quality: <span class=\"number\">75</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  optimization: &#123;</span><br><span class=\"line\">    splitChunks: &#123;</span><br><span class=\"line\">      cacheGroups: &#123;</span><br><span class=\"line\">        vendor: &#123;</span><br><span class=\"line\">          chunks: <span class=\"string\">'initial'</span>,</span><br><span class=\"line\">          test: path.resolve(__dirname, <span class=\"string\">'node_modules'</span>), <span class=\"comment\">// è·¯å¾„åœ¨ node_modules ç›®å½•ä¸‹çš„éƒ½ä½œä¸ºå…¬å…±éƒ¨åˆ†</span></span><br><span class=\"line\">          name: <span class=\"string\">'vendor'</span>, <span class=\"comment\">// ä½¿ç”¨ vendor å…¥å£ä½œä¸ºå…¬å…±éƒ¨åˆ†</span></span><br><span class=\"line\">          enforce: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      filename: <span class=\"string\">'index.html'</span>, <span class=\"comment\">// é…ç½®è¾“å‡ºæ–‡ä»¶åå’Œè·¯å¾„</span></span><br><span class=\"line\">      template: <span class=\"string\">'src/index.html'</span>, <span class=\"comment\">// é…ç½®æ–‡ä»¶æ¨¡æ¿</span></span><br><span class=\"line\">      minify: &#123;</span><br><span class=\"line\">        <span class=\"comment\">// å‹ç¼© HTML çš„é…ç½®</span></span><br><span class=\"line\">        minifyCSS: <span class=\"literal\">true</span>, <span class=\"comment\">// å‹ç¼© HTML ä¸­å‡ºç°çš„ CSS ä»£ç </span></span><br><span class=\"line\">        minifyJS: <span class=\"literal\">true</span>, <span class=\"comment\">// å‹ç¼© HTML ä¸­å‡ºç°çš„ JS ä»£ç </span></span><br><span class=\"line\">        removeComments: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">'[name].css'</span>),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.NamedModulesPlugin(),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.HotModuleReplacementPlugin()</span><br><span class=\"line\">  ],</span><br><span class=\"line\"></span><br><span class=\"line\">  devServer: &#123;</span><br><span class=\"line\">    hot: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>"}],"PostAsset":[],"PostCategory":[],"PostTag":[],"Tag":[]}}